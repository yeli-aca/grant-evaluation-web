var sV=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var c7e=sV((js,Gs)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function fb(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const Li={},su=[],Xa=()=>{},aV=()=>!1,bv=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),pb=e=>e.startsWith("onUpdate:"),Wr=Object.assign,mb=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},nV=Object.prototype.hasOwnProperty,vi=(e,t)=>nV.call(e,t),gt=Array.isArray,au=e=>$d(e)==="[object Map]",Ju=e=>$d(e)==="[object Set]",b7=e=>$d(e)==="[object Date]",zt=e=>typeof e=="function",hr=e=>typeof e=="string",Za=e=>typeof e=="symbol",Bi=e=>e!==null&&typeof e=="object",XD=e=>(Bi(e)||zt(e))&&zt(e.then)&&zt(e.catch),YD=Object.prototype.toString,$d=e=>YD.call(e),oV=e=>$d(e).slice(8,-1),KD=e=>$d(e)==="[object Object]",gb=e=>hr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,M3=fb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wv=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},lV=/-(\w)/g,Sa=wv(e=>e.replace(lV,(t,i)=>i?i.toUpperCase():"")),hV=/\B([A-Z])/g,wh=wv(e=>e.replace(hV,"-$1").toLowerCase()),_v=wv(e=>e.charAt(0).toUpperCase()+e.slice(1)),m4=wv(e=>e?`on${_v(e)}`:""),th=(e,t)=>!Object.is(e,t),pm=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},l5=(e,t,i,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:i})},jm=e=>{const t=parseFloat(e);return isNaN(t)?e:t},cV=e=>{const t=hr(e)?Number(e):NaN;return isNaN(t)?e:t};let w7;const Sv=()=>w7||(w7=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Aa(e){if(gt(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],s=hr(r)?pV(r):Aa(r);if(s)for(const a in s)t[a]=s[a]}return t}else if(hr(e)||Bi(e))return e}const uV=/;(?![^(]*\))/g,dV=/:([^]+)/,fV=/\/\*[^]*?\*\//g;function pV(e){const t={};return e.replace(fV,"").split(uV).forEach(i=>{if(i){const r=i.split(dV);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function rs(e){let t="";if(hr(e))t=e;else if(gt(e))for(let i=0;i<e.length;i++){const r=rs(e[i]);r&&(t+=r+" ")}else if(Bi(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const mV="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gV=fb(mV);function QD(e){return!!e||e===""}function vV(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=Ic(e[r],t[r]);return i}function Ic(e,t){if(e===t)return!0;let i=b7(e),r=b7(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=Za(e),r=Za(t),i||r)return e===t;if(i=gt(e),r=gt(t),i||r)return i&&r?vV(e,t):!1;if(i=Bi(e),r=Bi(t),i||r){if(!i||!r)return!1;const s=Object.keys(e).length,a=Object.keys(t).length;if(s!==a)return!1;for(const n in e){const o=e.hasOwnProperty(n),l=t.hasOwnProperty(n);if(o&&!l||!o&&l||!Ic(e[n],t[n]))return!1}}return String(e)===String(t)}function vb(e,t){return e.findIndex(i=>Ic(i,t))}const ZD=e=>!!(e&&e.__v_isRef===!0),Hr=e=>hr(e)?e:e==null?"":gt(e)||Bi(e)&&(e.toString===YD||!zt(e.toString))?ZD(e)?Hr(e.value):JSON.stringify(e,JD,2):String(e),JD=(e,t)=>ZD(t)?JD(e,t.value):au(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,s],a)=>(i[g4(r,a)+" =>"]=s,i),{})}:Ju(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>g4(i))}:Za(t)?g4(t):Bi(t)&&!gt(t)&&!KD(t)?String(t):t,g4=(e,t="")=>{var i;return Za(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};function yV(e){return e==null?"initial":typeof e=="string"?e===""?" ":e:String(e)}/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let O1;class $D{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=O1,!t&&O1&&(this.index=(O1.scopes||(O1.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=O1;try{return O1=this,t()}finally{O1=i}}}on(){++this._on===1&&(this.prevScope=O1,O1=this)}off(){this._on>0&&--this._on===0&&(O1=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(this.effects.length=0,i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function xV(e){return new $D(e)}function eI(){return O1}function bV(e,t=!1){O1&&O1.cleanups.push(e)}let Fi;const v4=new WeakSet;class tI{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,O1&&O1.active&&O1.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,v4.has(this)&&(v4.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||rI(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_7(this),sI(this);const t=Fi,i=Ya;Fi=this,Ya=!0;try{return this.fn()}finally{aI(this),Fi=t,Ya=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)bb(t);this.deps=this.depsTail=void 0,_7(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?v4.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){h5(this)&&this.run()}get dirty(){return h5(this)}}let iI=0,C3,E3;function rI(e,t=!1){if(e.flags|=8,t){e.next=E3,E3=e;return}e.next=C3,C3=e}function yb(){iI++}function xb(){if(--iI>0)return;if(E3){let t=E3;for(E3=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;C3;){let t=C3;for(C3=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=i}}if(e)throw e}function sI(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function aI(e){let t,i=e.depsTail,r=i;for(;r;){const s=r.prevDep;r.version===-1?(r===i&&(i=s),bb(r),wV(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=i}function h5(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(nI(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function nI(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===hd)||(e.globalVersion=hd,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!h5(e))))return;e.flags|=2;const t=e.dep,i=Fi,r=Ya;Fi=e,Ya=!0;try{sI(e);const s=e.fn(e._value);(t.version===0||th(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Fi=i,Ya=r,aI(e),e.flags&=-3}}function bb(e,t=!1){const{dep:i,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),i.subs===e&&(i.subs=r,!r&&i.computed)){i.computed.flags&=-5;for(let a=i.computed.deps;a;a=a.nextDep)bb(a,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function wV(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let Ya=!0;const oI=[];function Wo(){oI.push(Ya),Ya=!1}function qo(){const e=oI.pop();Ya=e===void 0?!0:e}function _7(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=Fi;Fi=void 0;try{t()}finally{Fi=i}}}let hd=0;class _V{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wb{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Fi||!Ya||Fi===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Fi)i=this.activeLink=new _V(Fi,this),Fi.deps?(i.prevDep=Fi.depsTail,Fi.depsTail.nextDep=i,Fi.depsTail=i):Fi.deps=Fi.depsTail=i,lI(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=Fi.depsTail,i.nextDep=void 0,Fi.depsTail.nextDep=i,Fi.depsTail=i,Fi.deps===i&&(Fi.deps=r)}return i}trigger(t){this.version++,hd++,this.notify(t)}notify(t){yb();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{xb()}}}function lI(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)lI(r)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Gm=new WeakMap,vc=Symbol(""),c5=Symbol(""),cd=Symbol("");function L1(e,t,i){if(Ya&&Fi){let r=Gm.get(e);r||Gm.set(e,r=new Map);let s=r.get(i);s||(r.set(i,s=new wb),s.map=r,s.key=i),s.track()}}function Io(e,t,i,r,s,a){const n=Gm.get(e);if(!n){hd++;return}const o=l=>{l&&l.trigger()};if(yb(),t==="clear")n.forEach(o);else{const l=gt(e),h=l&&gb(i);if(l&&i==="length"){const c=Number(r);n.forEach((u,d)=>{(d==="length"||d===cd||!Za(d)&&d>=c)&&o(u)})}else switch((i!==void 0||n.has(void 0))&&o(n.get(i)),h&&o(n.get(cd)),t){case"add":l?h&&o(n.get("length")):(o(n.get(vc)),au(e)&&o(n.get(c5)));break;case"delete":l||(o(n.get(vc)),au(e)&&o(n.get(c5)));break;case"set":au(e)&&o(n.get(vc));break}}xb()}function SV(e,t){const i=Gm.get(e);return i&&i.get(t)}function $c(e){const t=li(e);return t===e?t:(L1(t,"iterate",cd),ya(e)?t:t.map(v1))}function Av(e){return L1(e=li(e),"iterate",cd),e}const AV={__proto__:null,[Symbol.iterator](){return y4(this,Symbol.iterator,v1)},concat(...e){return $c(this).concat(...e.map(t=>gt(t)?$c(t):t))},entries(){return y4(this,"entries",e=>(e[1]=v1(e[1]),e))},every(e,t){return so(this,"every",e,t,void 0,arguments)},filter(e,t){return so(this,"filter",e,t,i=>i.map(v1),arguments)},find(e,t){return so(this,"find",e,t,v1,arguments)},findIndex(e,t){return so(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return so(this,"findLast",e,t,v1,arguments)},findLastIndex(e,t){return so(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return so(this,"forEach",e,t,void 0,arguments)},includes(...e){return x4(this,"includes",e)},indexOf(...e){return x4(this,"indexOf",e)},join(e){return $c(this).join(e)},lastIndexOf(...e){return x4(this,"lastIndexOf",e)},map(e,t){return so(this,"map",e,t,void 0,arguments)},pop(){return E0(this,"pop")},push(...e){return E0(this,"push",e)},reduce(e,...t){return S7(this,"reduce",e,t)},reduceRight(e,...t){return S7(this,"reduceRight",e,t)},shift(){return E0(this,"shift")},some(e,t){return so(this,"some",e,t,void 0,arguments)},splice(...e){return E0(this,"splice",e)},toReversed(){return $c(this).toReversed()},toSorted(e){return $c(this).toSorted(e)},toSpliced(...e){return $c(this).toSpliced(...e)},unshift(...e){return E0(this,"unshift",e)},values(){return y4(this,"values",v1)}};function y4(e,t,i){const r=Av(e),s=r[t]();return r!==e&&!ya(e)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=i(a.value)),a}),s}const MV=Array.prototype;function so(e,t,i,r,s,a){const n=Av(e),o=n!==e&&!ya(e),l=n[t];if(l!==MV[t]){const u=l.apply(e,a);return o?v1(u):u}let h=i;n!==e&&(o?h=function(u,d){return i.call(this,v1(u),d,e)}:i.length>2&&(h=function(u,d){return i.call(this,u,d,e)}));const c=l.call(n,h,r);return o&&s?s(c):c}function S7(e,t,i,r){const s=Av(e);let a=i;return s!==e&&(ya(e)?i.length>3&&(a=function(n,o,l){return i.call(this,n,o,l,e)}):a=function(n,o,l){return i.call(this,n,v1(o),l,e)}),s[t](a,...r)}function x4(e,t,i){const r=li(e);L1(r,"iterate",cd);const s=r[t](...i);return(s===-1||s===!1)&&Ab(i[0])?(i[0]=li(i[0]),r[t](...i)):s}function E0(e,t,i=[]){Wo(),yb();const r=li(e)[t].apply(e,i);return xb(),qo(),r}const CV=fb("__proto__,__v_isRef,__isVue"),hI=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Za));function EV(e){Za(e)||(e=String(e));const t=li(this);return L1(t,"has",e),t.hasOwnProperty(e)}class cI{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,r){if(i==="__v_skip")return t.__v_skip;const s=this._isReadonly,a=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return a;if(i==="__v_raw")return r===(s?a?kV:pI:a?fI:dI).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const n=gt(t);if(!s){let l;if(n&&(l=AV[i]))return l;if(i==="hasOwnProperty")return EV}const o=Reflect.get(t,i,a1(t)?t:r);return(Za(i)?hI.has(i):CV(i))||(s||L1(t,"get",i),a)?o:a1(o)?n&&gb(i)?o:o.value:Bi(o)?s?gI(o):hh(o):o}}class uI extends cI{constructor(t=!1){super(!1,t)}set(t,i,r,s){let a=t[i];if(!this._isShallow){const l=ch(a);if(!ya(r)&&!ch(r)&&(a=li(a),r=li(r)),!gt(t)&&a1(a)&&!a1(r))return l?!1:(a.value=r,!0)}const n=gt(t)&&gb(i)?Number(i)<t.length:vi(t,i),o=Reflect.set(t,i,r,a1(t)?t:s);return t===li(s)&&(n?th(r,a)&&Io(t,"set",i,r):Io(t,"add",i,r)),o}deleteProperty(t,i){const r=vi(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&r&&Io(t,"delete",i,void 0),s}has(t,i){const r=Reflect.has(t,i);return(!Za(i)||!hI.has(i))&&L1(t,"has",i),r}ownKeys(t){return L1(t,"iterate",gt(t)?"length":vc),Reflect.ownKeys(t)}}class TV extends cI{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const PV=new uI,DV=new TV,IV=new uI(!0),u5=e=>e,If=e=>Reflect.getPrototypeOf(e);function OV(e,t,i){return function(...r){const s=this.__v_raw,a=li(s),n=au(a),o=e==="entries"||e===Symbol.iterator&&n,l=e==="keys"&&n,h=s[e](...r),c=i?u5:t?Hm:v1;return!t&&L1(a,"iterate",l?c5:vc),{next(){const{value:u,done:d}=h.next();return d?{value:u,done:d}:{value:o?[c(u[0]),c(u[1])]:c(u),done:d}},[Symbol.iterator](){return this}}}}function Of(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function RV(e,t){const i={get(s){const a=this.__v_raw,n=li(a),o=li(s);e||(th(s,o)&&L1(n,"get",s),L1(n,"get",o));const{has:l}=If(n),h=t?u5:e?Hm:v1;if(l.call(n,s))return h(a.get(s));if(l.call(n,o))return h(a.get(o));a!==n&&a.get(s)},get size(){const s=this.__v_raw;return!e&&L1(li(s),"iterate",vc),Reflect.get(s,"size",s)},has(s){const a=this.__v_raw,n=li(a),o=li(s);return e||(th(s,o)&&L1(n,"has",s),L1(n,"has",o)),s===o?a.has(s):a.has(s)||a.has(o)},forEach(s,a){const n=this,o=n.__v_raw,l=li(o),h=t?u5:e?Hm:v1;return!e&&L1(l,"iterate",vc),o.forEach((c,u)=>s.call(a,h(c),h(u),n))}};return Wr(i,e?{add:Of("add"),set:Of("set"),delete:Of("delete"),clear:Of("clear")}:{add(s){!t&&!ya(s)&&!ch(s)&&(s=li(s));const a=li(this);return If(a).has.call(a,s)||(a.add(s),Io(a,"add",s,s)),this},set(s,a){!t&&!ya(a)&&!ch(a)&&(a=li(a));const n=li(this),{has:o,get:l}=If(n);let h=o.call(n,s);h||(s=li(s),h=o.call(n,s));const c=l.call(n,s);return n.set(s,a),h?th(a,c)&&Io(n,"set",s,a):Io(n,"add",s,a),this},delete(s){const a=li(this),{has:n,get:o}=If(a);let l=n.call(a,s);l||(s=li(s),l=n.call(a,s)),o&&o.call(a,s);const h=a.delete(s);return l&&Io(a,"delete",s,void 0),h},clear(){const s=li(this),a=s.size!==0,n=s.clear();return a&&Io(s,"clear",void 0,void 0),n}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=OV(s,e,t)}),i}function _b(e,t){const i=RV(e,t);return(r,s,a)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(vi(i,s)&&s in r?i:r,s,a)}const LV={get:_b(!1,!1)},zV={get:_b(!1,!0)},BV={get:_b(!0,!1)},dI=new WeakMap,fI=new WeakMap,pI=new WeakMap,kV=new WeakMap;function FV(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function NV(e){return e.__v_skip||!Object.isExtensible(e)?0:FV(oV(e))}function hh(e){return ch(e)?e:Sb(e,!1,PV,LV,dI)}function mI(e){return Sb(e,!1,IV,zV,fI)}function gI(e){return Sb(e,!0,DV,BV,pI)}function Sb(e,t,i,r,s){if(!Bi(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=NV(e);if(a===0)return e;const n=s.get(e);if(n)return n;const o=new Proxy(e,a===2?r:i);return s.set(e,o),o}function nu(e){return ch(e)?nu(e.__v_raw):!!(e&&e.__v_isReactive)}function ch(e){return!!(e&&e.__v_isReadonly)}function ya(e){return!!(e&&e.__v_isShallow)}function Ab(e){return e?!!e.__v_raw:!1}function li(e){const t=e&&e.__v_raw;return t?li(t):e}function vI(e){return!vi(e,"__v_skip")&&Object.isExtensible(e)&&l5(e,"__v_skip",!0),e}const v1=e=>Bi(e)?hh(e):e,Hm=e=>Bi(e)?gI(e):e;function a1(e){return e?e.__v_isRef===!0:!1}function Yt(e){return yI(e,!1)}function Mb(e){return yI(e,!0)}function yI(e,t){return a1(e)?e:new UV(e,t)}class UV{constructor(t,i){this.dep=new wb,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:li(t),this._value=i?t:v1(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,r=this.__v_isShallow||ya(t)||ch(t);t=r?t:li(t),th(t,i)&&(this._rawValue=t,this._value=r?t:v1(t),this.dep.trigger())}}function Si(e){return a1(e)?e.value:e}function ud(e){return zt(e)?e():Si(e)}const VV={get:(e,t,i)=>t==="__v_raw"?e:Si(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const s=e[t];return a1(s)&&!a1(i)?(s.value=i,!0):Reflect.set(e,t,i,r)}};function xI(e){return nu(e)?e:new Proxy(e,VV)}function jV(e){const t=gt(e)?new Array(e.length):{};for(const i in e)t[i]=HV(e,i);return t}class GV{constructor(t,i,r){this._object=t,this._key=i,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return SV(li(this._object),this._key)}}function HV(e,t,i){const r=e[t];return a1(r)?r:new GV(e,t,i)}class WV{constructor(t,i,r){this.fn=t,this.setter=i,this._value=void 0,this.dep=new wb(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=hd-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Fi!==this)return rI(this,!0),!0}get value(){const t=this.dep.track();return nI(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function qV(e,t,i=!1){let r,s;return zt(e)?r=e:(r=e.get,s=e.set),new WV(r,s,i)}const Rf={},Wm=new WeakMap;let Wh;function XV(e,t=!1,i=Wh){if(i){let r=Wm.get(i);r||Wm.set(i,r=[]),r.push(e)}}function YV(e,t,i=Li){const{immediate:r,deep:s,once:a,scheduler:n,augmentJob:o,call:l}=i,h=w=>s?w:ya(w)||s===!1||s===0?Oo(w,1):Oo(w);let c,u,d,f,p=!1,m=!1;if(a1(e)?(u=()=>e.value,p=ya(e)):nu(e)?(u=()=>h(e),p=!0):gt(e)?(m=!0,p=e.some(w=>nu(w)||ya(w)),u=()=>e.map(w=>{if(a1(w))return w.value;if(nu(w))return h(w);if(zt(w))return l?l(w,2):w()})):zt(e)?t?u=l?()=>l(e,2):e:u=()=>{if(d){Wo();try{d()}finally{qo()}}const w=Wh;Wh=c;try{return l?l(e,3,[f]):e(f)}finally{Wh=w}}:u=Xa,t&&s){const w=u,_=s===!0?1/0:s;u=()=>Oo(w(),_)}const g=eI(),v=()=>{c.stop(),g&&g.active&&mb(g.effects,c)};if(a&&t){const w=t;t=(..._)=>{w(..._),v()}}let y=m?new Array(e.length).fill(Rf):Rf;const x=w=>{if(!(!(c.flags&1)||!c.dirty&&!w))if(t){const _=c.run();if(s||p||(m?_.some((b,M)=>th(b,y[M])):th(_,y))){d&&d();const b=Wh;Wh=c;try{const M=[_,y===Rf?void 0:m&&y[0]===Rf?[]:y,f];y=_,l?l(t,3,M):t(...M)}finally{Wh=b}}}else c.run()};return o&&o(x),c=new tI(u),c.scheduler=n?()=>n(x,!1):x,f=w=>XV(w,!1,c),d=c.onStop=()=>{const w=Wm.get(c);if(w){if(l)l(w,4);else for(const _ of w)_();Wm.delete(c)}},t?r?x(!0):y=c.run():n?n(x.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function Oo(e,t=1/0,i){if(t<=0||!Bi(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,a1(e))Oo(e.value,t,i);else if(gt(e))for(let r=0;r<e.length;r++)Oo(e[r],t,i);else if(Ju(e)||au(e))e.forEach(r=>{Oo(r,t,i)});else if(KD(e)){for(const r in e)Oo(e[r],t,i);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Oo(e[r],t,i)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ef(e,t,i,r){try{return r?e(...r):e()}catch(s){Mv(s,t,i)}}function Ja(e,t,i,r){if(zt(e)){const s=ef(e,t,i,r);return s&&XD(s)&&s.catch(a=>{Mv(a,t,i)}),s}if(gt(e)){const s=[];for(let a=0;a<e.length;a++)s.push(Ja(e[a],t,i,r));return s}}function Mv(e,t,i,r=!0){const s=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:n}=t&&t.appContext.config||Li;if(t){let o=t.parent;const l=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${i}`;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,l,h)===!1)return}o=o.parent}if(a){Wo(),ef(a,null,10,[e,l,h]),qo();return}}KV(e,i,s,r,n)}function KV(e,t,i,r=!0,s=!1){if(s)throw e;console.error(e)}const Z1=[];let Mn=-1;const ou=[];let Dl=null,z2=0;const bI=Promise.resolve();let qm=null;function tf(e){const t=qm||bI;return e?t.then(this?e.bind(this):e):t}function QV(e){let t=Mn+1,i=Z1.length;for(;t<i;){const r=t+i>>>1,s=Z1[r],a=dd(s);a<e||a===e&&s.flags&2?t=r+1:i=r}return t}function Cb(e){if(!(e.flags&1)){const t=dd(e),i=Z1[Z1.length-1];!i||!(e.flags&2)&&t>=dd(i)?Z1.push(e):Z1.splice(QV(t),0,e),e.flags|=1,wI()}}function wI(){qm||(qm=bI.then(AI))}function _I(e){gt(e)?ou.push(...e):Dl&&e.id===-1?Dl.splice(z2+1,0,e):e.flags&1||(ou.push(e),e.flags|=1),wI()}function A7(e,t,i=Mn+1){for(;i<Z1.length;i++){const r=Z1[i];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Z1.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function SI(e){if(ou.length){const t=[...new Set(ou)].sort((i,r)=>dd(i)-dd(r));if(ou.length=0,Dl){Dl.push(...t);return}for(Dl=t,z2=0;z2<Dl.length;z2++){const i=Dl[z2];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Dl=null,z2=0}}const dd=e=>e.id==null?e.flags&2?-1:1/0:e.id;function AI(e){try{for(Mn=0;Mn<Z1.length;Mn++){const t=Z1[Mn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ef(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Mn<Z1.length;Mn++){const t=Z1[Mn];t&&(t.flags&=-2)}Mn=-1,Z1.length=0,SI(),qm=null,(Z1.length||ou.length)&&AI()}}let x1=null,MI=null;function Xm(e){const t=x1;return x1=e,MI=e&&e.type.__scopeId||null,t}function da(e,t=x1,i){if(!t||e._n)return e;const r=(...s)=>{r._d&&L7(-1);const a=Xm(t);let n;try{n=e(...s)}finally{Xm(a),r._d&&L7(1)}return n};return r._n=!0,r._c=!0,r._d=!0,r}function ZV(e,t){if(x1===null)return e;const i=Iv(x1),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,n,o,l=Li]=t[s];a&&(zt(a)&&(a={mounted:a,updated:a}),a.deep&&Oo(n),r.push({dir:a,instance:i,value:n,oldValue:void 0,arg:o,modifiers:l}))}return e}function Dh(e,t,i,r){const s=e.dirs,a=t&&t.dirs;for(let n=0;n<s.length;n++){const o=s[n];a&&(o.oldValue=a[n].value);let l=o.dir[r];l&&(Wo(),Ja(l,i,8,[e.el,o,e,t]),qo())}}const JV=Symbol("_vte"),$V=e=>e.__isTeleport,e2=Symbol("_leaveCb"),Lf=Symbol("_enterCb");function ej(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return M1(()=>{e.isMounted=!0}),Ev(()=>{e.isUnmounting=!0}),e}const Zs=[Function,Array],tj={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zs,onEnter:Zs,onAfterEnter:Zs,onEnterCancelled:Zs,onBeforeLeave:Zs,onLeave:Zs,onAfterLeave:Zs,onLeaveCancelled:Zs,onBeforeAppear:Zs,onAppear:Zs,onAfterAppear:Zs,onAppearCancelled:Zs};function ij(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function d5(e,t,i,r,s){const{appear:a,mode:n,persisted:o=!1,onBeforeEnter:l,onEnter:h,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:f,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:g,onAppear:v,onAfterAppear:y,onAppearCancelled:x}=t,w=String(e.key),_=ij(i,e),b=(A,C)=>{A&&Ja(A,r,9,C)},M=(A,C)=>{const T=C[1];b(A,C),gt(A)?A.every(D=>D.length<=1)&&T():A.length<=1&&T()},S={mode:n,persisted:o,beforeEnter(A){let C=l;if(!i.isMounted)if(a)C=g||l;else return;A[e2]&&A[e2](!0);const T=_[w];T&&B2(e,T)&&T.el[e2]&&T.el[e2](),b(C,[A])},enter(A){let C=h,T=c,D=u;if(!i.isMounted)if(a)C=v||h,T=y||c,D=x||u;else return;let R=!1;const O=A[Lf]=j=>{R||(R=!0,j?b(D,[A]):b(T,[A]),S.delayedLeave&&S.delayedLeave(),A[Lf]=void 0)};C?M(C,[A,O]):O()},leave(A,C){const T=String(e.key);if(A[Lf]&&A[Lf](!0),i.isUnmounting)return C();b(d,[A]);let D=!1;const R=A[e2]=O=>{D||(D=!0,C(),O?b(m,[A]):b(p,[A]),A[e2]=void 0,_[T]===e&&delete _[T])};_[T]=e,f?M(f,[A,R]):R()},clone(A){return d5(A,t,i,r)}};return S}function fd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,fd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function CI(e,t=!1,i){let r=[],s=0;for(let a=0;a<e.length;a++){let n=e[a];const o=i==null?n.key:String(i)+String(n.key!=null?n.key:a);n.type===sr?(n.patchFlag&128&&s++,r=r.concat(CI(n.children,t,o))):(t||n.type!==$a)&&r.push(o!=null?uh(n,{key:o}):n)}if(s>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function qi(e,t){return zt(e)?Wr({name:e.name},t,{setup:e}):e}function EI(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function T3(e,t,i,r,s=!1){if(gt(e)){e.forEach((p,m)=>T3(p,t&&(gt(t)?t[m]:t),i,r,s));return}if(lu(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&T3(e,t,i,r.component.subTree);return}const a=r.shapeFlag&4?Iv(r.component):r.el,n=s?null:a,{i:o,r:l}=e,h=t&&t.r,c=o.refs===Li?o.refs={}:o.refs,u=o.setupState,d=li(u),f=u===Li?()=>!1:p=>vi(d,p);if(h!=null&&h!==l&&(hr(h)?(c[h]=null,f(h)&&(u[h]=null)):a1(h)&&(h.value=null)),zt(l))ef(l,o,12,[n,c]);else{const p=hr(l),m=a1(l);if(p||m){const g=()=>{if(e.f){const v=p?f(l)?u[l]:c[l]:l.value;s?gt(v)&&mb(v,a):gt(v)?v.includes(a)||v.push(a):p?(c[l]=[a],f(l)&&(u[l]=c[l])):(l.value=[a],e.k&&(c[e.k]=l.value))}else p?(c[l]=n,f(l)&&(u[l]=n)):m&&(l.value=n,e.k&&(c[e.k]=n))};n?(g.id=-1,zs(g,i)):g()}}}Sv().requestIdleCallback;Sv().cancelIdleCallback;const lu=e=>!!e.type.__asyncLoader,TI=e=>e.type.__isKeepAlive;function rj(e,t){PI(e,"a",t)}function sj(e,t){PI(e,"da",t)}function PI(e,t,i=B1){const r=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Cv(t,r,i),i){let s=i.parent;for(;s&&s.parent;)TI(s.parent.vnode)&&aj(r,t,i,s),s=s.parent}}function aj(e,t,i,r){const s=Cv(t,e,r,!0);$u(()=>{mb(r[t],s)},i)}function Cv(e,t,i=B1,r=!1){if(i){const s=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...n)=>{Wo();const o=nf(i),l=Ja(t,i,e,n);return o(),qo(),l});return r?s.unshift(a):s.push(a),a}}const sl=e=>(t,i=B1)=>{(!gd||e==="sp")&&Cv(e,(...r)=>t(...r),i)},DI=sl("bm"),M1=sl("m"),Eb=sl("bu"),Tb=sl("u"),Ev=sl("bum"),$u=sl("um"),nj=sl("sp"),oj=sl("rtg"),lj=sl("rtc");function hj(e,t=B1){Cv("ec",e,t)}const cj="components",II=Symbol.for("v-ndc");function uj(e){return hr(e)?dj(cj,e,!1)||e:e||II}function dj(e,t,i=!0,r=!1){const s=x1||B1;if(s){const a=s.type;{const o=Qj(a,!1);if(o&&(o===t||o===Sa(t)||o===_v(Sa(t))))return a}const n=M7(s[e]||a[e],t)||M7(s.appContext[e],t);return!n&&r?a:n}}function M7(e,t){return e&&(e[t]||e[Sa(t)]||e[_v(Sa(t))])}function rf(e,t,i,r){let s;const a=i,n=gt(e);if(n||hr(e)){const o=n&&nu(e);let l=!1,h=!1;o&&(l=!ya(e),h=ch(e),e=Av(e)),s=new Array(e.length);for(let c=0,u=e.length;c<u;c++)s[c]=t(l?h?Hm(v1(e[c])):v1(e[c]):e[c],c,void 0,a)}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,a)}else if(Bi(e))if(e[Symbol.iterator])s=Array.from(e,(o,l)=>t(o,l,void 0,a));else{const o=Object.keys(e);s=new Array(o.length);for(let l=0,h=o.length;l<h;l++){const c=o[l];s[l]=t(e[c],c,l,a)}}else s=[];return s}function sf(e,t,i={},r,s){if(x1.ce||x1.parent&&lu(x1.parent)&&x1.parent.ce)return t!=="default"&&(i.name=t),It(),ss(sr,null,[$t("slot",i,r)],64);let a=e[t];a&&a._c&&(a._d=!1),It();const n=a&&OI(a(i)),o=i.key||n&&n.key,l=ss(sr,{key:(o&&!Za(o)?o:`_${t}`)+(!n&&r?"_fb":"")},n||[],n&&e._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),a&&a._c&&(a._d=!0),l}function OI(e){return e.some(t=>md(t)?!(t.type===$a||t.type===sr&&!OI(t.children)):!0)?e:null}const f5=e=>e?tO(e)?Iv(e):f5(e.parent):null,P3=Wr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>f5(e.parent),$root:e=>f5(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>kI(e),$forceUpdate:e=>e.f||(e.f=()=>{Cb(e.update)}),$nextTick:e=>e.n||(e.n=tf.bind(e.proxy)),$watch:e=>Rj.bind(e)}),b4=(e,t)=>e!==Li&&!e.__isScriptSetup&&vi(e,t),fj={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:r,data:s,props:a,accessCache:n,type:o,appContext:l}=e;let h;if(t[0]!=="$"){const f=n[t];if(f!==void 0)switch(f){case 1:return r[t];case 2:return s[t];case 4:return i[t];case 3:return a[t]}else{if(b4(r,t))return n[t]=1,r[t];if(s!==Li&&vi(s,t))return n[t]=2,s[t];if((h=e.propsOptions[0])&&vi(h,t))return n[t]=3,a[t];if(i!==Li&&vi(i,t))return n[t]=4,i[t];p5&&(n[t]=0)}}const c=P3[t];let u,d;if(c)return t==="$attrs"&&L1(e.attrs,"get",""),c(e);if((u=o.__cssModules)&&(u=u[t]))return u;if(i!==Li&&vi(i,t))return n[t]=4,i[t];if(d=l.config.globalProperties,vi(d,t))return d[t]},set({_:e},t,i){const{data:r,setupState:s,ctx:a}=e;return b4(s,t)?(s[t]=i,!0):r!==Li&&vi(r,t)?(r[t]=i,!0):vi(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:s,propsOptions:a}},n){let o;return!!i[n]||e!==Li&&vi(e,n)||b4(t,n)||(o=a[0])&&vi(o,n)||vi(r,n)||vi(P3,n)||vi(s.config.globalProperties,n)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:vi(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function RI(){return zI().slots}function LI(){return zI().attrs}function zI(e){const t=_h();return t.setupContext||(t.setupContext=rO(t))}function C7(e){return gt(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let p5=!0;function pj(e){const t=kI(e),i=e.proxy,r=e.ctx;p5=!1,t.beforeCreate&&E7(t.beforeCreate,e,"bc");const{data:s,computed:a,methods:n,watch:o,provide:l,inject:h,created:c,beforeMount:u,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:y,destroyed:x,unmounted:w,render:_,renderTracked:b,renderTriggered:M,errorCaptured:S,serverPrefetch:A,expose:C,inheritAttrs:T,components:D,directives:R,filters:O}=t;if(h&&mj(h,r,null),n)for(const N in n){const k=n[N];zt(k)&&(r[N]=k.bind(i))}if(s){const N=s.call(i,i);Bi(N)&&(e.data=hh(N))}if(p5=!0,a)for(const N in a){const k=a[N],ne=zt(k)?k.bind(i,i):zt(k.get)?k.get.bind(i,i):Xa,te=!zt(k)&&zt(k.set)?k.set.bind(i):Xa,Q=ci({get:ne,set:te});Object.defineProperty(r,N,{enumerable:!0,configurable:!0,get:()=>Q.value,set:Z=>Q.value=Z})}if(o)for(const N in o)BI(o[N],r,i,N);if(l){const N=zt(l)?l.call(i):l;Reflect.ownKeys(N).forEach(k=>{D3(k,N[k])})}c&&E7(c,e,"c");function X(N,k){gt(k)?k.forEach(ne=>N(ne.bind(i))):k&&N(k.bind(i))}if(X(DI,u),X(M1,d),X(Eb,f),X(Tb,p),X(rj,m),X(sj,g),X(hj,S),X(lj,b),X(oj,M),X(Ev,y),X($u,w),X(nj,A),gt(C))if(C.length){const N=e.exposed||(e.exposed={});C.forEach(k=>{Object.defineProperty(N,k,{get:()=>i[k],set:ne=>i[k]=ne,enumerable:!0})})}else e.exposed||(e.exposed={});_&&e.render===Xa&&(e.render=_),T!=null&&(e.inheritAttrs=T),D&&(e.components=D),R&&(e.directives=R),A&&EI(e)}function mj(e,t,i=Xa){gt(e)&&(e=m5(e));for(const r in e){const s=e[r];let a;Bi(s)?"default"in s?a=Vn(s.from||r,s.default,!0):a=Vn(s.from||r):a=Vn(s),a1(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:n=>a.value=n}):t[r]=a}}function E7(e,t,i){Ja(gt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function BI(e,t,i,r){let s=r.includes(".")?QI(i,r):()=>i[r];if(hr(e)){const a=t[e];zt(a)&&Ni(s,a)}else if(zt(e))Ni(s,e.bind(i));else if(Bi(e))if(gt(e))e.forEach(a=>BI(a,t,i,r));else{const a=zt(e.handler)?e.handler.bind(i):t[e.handler];zt(a)&&Ni(s,a,e)}}function kI(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:s,optionsCache:a,config:{optionMergeStrategies:n}}=e.appContext,o=a.get(t);let l;return o?l=o:!s.length&&!i&&!r?l=t:(l={},s.length&&s.forEach(h=>Ym(l,h,n,!0)),Ym(l,t,n)),Bi(t)&&a.set(t,l),l}function Ym(e,t,i,r=!1){const{mixins:s,extends:a}=t;a&&Ym(e,a,i,!0),s&&s.forEach(n=>Ym(e,n,i,!0));for(const n in t)if(!(r&&n==="expose")){const o=gj[n]||i&&i[n];e[n]=o?o(e[n],t[n]):t[n]}return e}const gj={data:T7,props:P7,emits:P7,methods:h3,computed:h3,beforeCreate:Y1,created:Y1,beforeMount:Y1,mounted:Y1,beforeUpdate:Y1,updated:Y1,beforeDestroy:Y1,beforeUnmount:Y1,destroyed:Y1,unmounted:Y1,activated:Y1,deactivated:Y1,errorCaptured:Y1,serverPrefetch:Y1,components:h3,directives:h3,watch:yj,provide:T7,inject:vj};function T7(e,t){return t?e?function(){return Wr(zt(e)?e.call(this,this):e,zt(t)?t.call(this,this):t)}:t:e}function vj(e,t){return h3(m5(e),m5(t))}function m5(e){if(gt(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Y1(e,t){return e?[...new Set([].concat(e,t))]:t}function h3(e,t){return e?Wr(Object.create(null),e,t):t}function P7(e,t){return e?gt(e)&&gt(t)?[...new Set([...e,...t])]:Wr(Object.create(null),C7(e),C7(t??{})):t}function yj(e,t){if(!e)return t;if(!t)return e;const i=Wr(Object.create(null),e);for(const r in t)i[r]=Y1(e[r],t[r]);return i}function FI(){return{app:null,config:{isNativeTag:aV,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xj=0;function bj(e,t){return function(r,s=null){zt(r)||(r=Wr({},r)),s!=null&&!Bi(s)&&(s=null);const a=FI(),n=new WeakSet,o=[];let l=!1;const h=a.app={_uid:xj++,_component:r,_props:s,_container:null,_context:a,_instance:null,version:Jj,get config(){return a.config},set config(c){},use(c,...u){return n.has(c)||(c&&zt(c.install)?(n.add(c),c.install(h,...u)):zt(c)&&(n.add(c),c(h,...u))),h},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),h},component(c,u){return u?(a.components[c]=u,h):a.components[c]},directive(c,u){return u?(a.directives[c]=u,h):a.directives[c]},mount(c,u,d){if(!l){const f=h._ceVNode||$t(r,s);return f.appContext=a,d===!0?d="svg":d===!1&&(d=void 0),e(f,c,d),l=!0,h._container=c,c.__vue_app__=h,Iv(f.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Ja(o,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(c,u){return a.provides[c]=u,h},runWithContext(c){const u=hu;hu=h;try{return c()}finally{hu=u}}};return h}}let hu=null;function D3(e,t){if(B1){let i=B1.provides;const r=B1.parent&&B1.parent.provides;r===i&&(i=B1.provides=Object.create(r)),i[e]=t}}function Vn(e,t,i=!1){const r=_h();if(r||hu){let s=hu?hu._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&zt(t)?t.call(r&&r.proxy):t}}const NI={},UI=()=>Object.create(NI),VI=e=>Object.getPrototypeOf(e)===NI;function wj(e,t,i,r=!1){const s={},a=UI();e.propsDefaults=Object.create(null),jI(e,t,s,a);for(const n in e.propsOptions[0])n in s||(s[n]=void 0);i?e.props=r?s:mI(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function _j(e,t,i,r){const{props:s,attrs:a,vnode:{patchFlag:n}}=e,o=li(s),[l]=e.propsOptions;let h=!1;if((r||n>0)&&!(n&16)){if(n&8){const c=e.vnode.dynamicProps;for(let u=0;u<c.length;u++){let d=c[u];if(Tv(e.emitsOptions,d))continue;const f=t[d];if(l)if(vi(a,d))f!==a[d]&&(a[d]=f,h=!0);else{const p=Sa(d);s[p]=g5(l,o,p,f,e,!1)}else f!==a[d]&&(a[d]=f,h=!0)}}}else{jI(e,t,s,a)&&(h=!0);let c;for(const u in o)(!t||!vi(t,u)&&((c=wh(u))===u||!vi(t,c)))&&(l?i&&(i[u]!==void 0||i[c]!==void 0)&&(s[u]=g5(l,o,u,void 0,e,!0)):delete s[u]);if(a!==o)for(const u in a)(!t||!vi(t,u))&&(delete a[u],h=!0)}h&&Io(e.attrs,"set","")}function jI(e,t,i,r){const[s,a]=e.propsOptions;let n=!1,o;if(t)for(let l in t){if(M3(l))continue;const h=t[l];let c;s&&vi(s,c=Sa(l))?!a||!a.includes(c)?i[c]=h:(o||(o={}))[c]=h:Tv(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,n=!0)}if(a){const l=li(i),h=o||Li;for(let c=0;c<a.length;c++){const u=a[c];i[u]=g5(s,l,u,h[u],e,!vi(h,u))}}return n}function g5(e,t,i,r,s,a){const n=e[i];if(n!=null){const o=vi(n,"default");if(o&&r===void 0){const l=n.default;if(n.type!==Function&&!n.skipFactory&&zt(l)){const{propsDefaults:h}=s;if(i in h)r=h[i];else{const c=nf(s);r=h[i]=l.call(null,t),c()}}else r=l;s.ce&&s.ce._setProp(i,r)}n[0]&&(a&&!o?r=!1:n[1]&&(r===""||r===wh(i))&&(r=!0))}return r}const Sj=new WeakMap;function GI(e,t,i=!1){const r=i?Sj:t.propsCache,s=r.get(e);if(s)return s;const a=e.props,n={},o=[];let l=!1;if(!zt(e)){const c=u=>{l=!0;const[d,f]=GI(u,t,!0);Wr(n,d),f&&o.push(...f)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!a&&!l)return Bi(e)&&r.set(e,su),su;if(gt(a))for(let c=0;c<a.length;c++){const u=Sa(a[c]);D7(u)&&(n[u]=Li)}else if(a)for(const c in a){const u=Sa(c);if(D7(u)){const d=a[c],f=n[u]=gt(d)||zt(d)?{type:d}:Wr({},d),p=f.type;let m=!1,g=!0;if(gt(p))for(let v=0;v<p.length;++v){const y=p[v],x=zt(y)&&y.name;if(x==="Boolean"){m=!0;break}else x==="String"&&(g=!1)}else m=zt(p)&&p.name==="Boolean";f[0]=m,f[1]=g,(m||vi(f,"default"))&&o.push(u)}}const h=[n,o];return Bi(e)&&r.set(e,h),h}function D7(e){return e[0]!=="$"&&!M3(e)}const Pb=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",Db=e=>gt(e)?e.map(Pn):[Pn(e)],Aj=(e,t,i)=>{if(t._n)return t;const r=da((...s)=>Db(t(...s)),i);return r._c=!1,r},HI=(e,t,i)=>{const r=e._ctx;for(const s in e){if(Pb(s))continue;const a=e[s];if(zt(a))t[s]=Aj(s,a,r);else if(a!=null){const n=Db(a);t[s]=()=>n}}},WI=(e,t)=>{const i=Db(t);e.slots.default=()=>i},qI=(e,t,i)=>{for(const r in t)(i||!Pb(r))&&(e[r]=t[r])},Mj=(e,t,i)=>{const r=e.slots=UI();if(e.vnode.shapeFlag&32){const s=t.__;s&&l5(r,"__",s,!0);const a=t._;a?(qI(r,t,i),i&&l5(r,"_",a,!0)):HI(t,r)}else t&&WI(e,t)},Cj=(e,t,i)=>{const{vnode:r,slots:s}=e;let a=!0,n=Li;if(r.shapeFlag&32){const o=t._;o?i&&o===1?a=!1:qI(s,t,i):(a=!t.$stable,HI(t,s)),n=t}else t&&(WI(e,t),n={default:1});if(a)for(const o in s)!Pb(o)&&n[o]==null&&delete s[o]},zs=Uj;function Ej(e){return Tj(e)}function Tj(e,t){const i=Sv();i.__VUE__=!0;const{insert:r,remove:s,patchProp:a,createElement:n,createText:o,createComment:l,setText:h,setElementText:c,parentNode:u,nextSibling:d,setScopeId:f=Xa,insertStaticContent:p}=e,m=(F,V,ie,ue=null,ve=null,ge=null,_e=void 0,ye=null,Se=!!V.dynamicChildren)=>{if(F===V)return;F&&!B2(F,V)&&(ue=K(F),Z(F,ve,ge,!0),F=null),V.patchFlag===-2&&(Se=!1,V.dynamicChildren=null);const{type:pe,ref:G,shapeFlag:L}=V;switch(pe){case Pv:g(F,V,ie,ue);break;case $a:v(F,V,ie,ue);break;case mm:F==null&&y(V,ie,ue,_e);break;case sr:D(F,V,ie,ue,ve,ge,_e,ye,Se);break;default:L&1?_(F,V,ie,ue,ve,ge,_e,ye,Se):L&6?R(F,V,ie,ue,ve,ge,_e,ye,Se):(L&64||L&128)&&pe.process(F,V,ie,ue,ve,ge,_e,ye,Se,ae)}G!=null&&ve?T3(G,F&&F.ref,ge,V||F,!V):G==null&&F&&F.ref!=null&&T3(F.ref,null,ge,F,!0)},g=(F,V,ie,ue)=>{if(F==null)r(V.el=o(V.children),ie,ue);else{const ve=V.el=F.el;V.children!==F.children&&h(ve,V.children)}},v=(F,V,ie,ue)=>{F==null?r(V.el=l(V.children||""),ie,ue):V.el=F.el},y=(F,V,ie,ue)=>{[F.el,F.anchor]=p(F.children,V,ie,ue,F.el,F.anchor)},x=({el:F,anchor:V},ie,ue)=>{let ve;for(;F&&F!==V;)ve=d(F),r(F,ie,ue),F=ve;r(V,ie,ue)},w=({el:F,anchor:V})=>{let ie;for(;F&&F!==V;)ie=d(F),s(F),F=ie;s(V)},_=(F,V,ie,ue,ve,ge,_e,ye,Se)=>{V.type==="svg"?_e="svg":V.type==="math"&&(_e="mathml"),F==null?b(V,ie,ue,ve,ge,_e,ye,Se):A(F,V,ve,ge,_e,ye,Se)},b=(F,V,ie,ue,ve,ge,_e,ye)=>{let Se,pe;const{props:G,shapeFlag:L,transition:he,dirs:Ce}=F;if(Se=F.el=n(F.type,ge,G&&G.is,G),L&8?c(Se,F.children):L&16&&S(F.children,Se,null,ue,ve,w4(F,ge),_e,ye),Ce&&Dh(F,null,ue,"created"),M(Se,F,F.scopeId,_e,ue),G){for(const Le in G)Le!=="value"&&!M3(Le)&&a(Se,Le,null,G[Le],ge,ue);"value"in G&&a(Se,"value",null,G.value,ge),(pe=G.onVnodeBeforeMount)&&hn(pe,ue,F)}Ce&&Dh(F,null,ue,"beforeMount");const B=Pj(ve,he);B&&he.beforeEnter(Se),r(Se,V,ie),((pe=G&&G.onVnodeMounted)||B||Ce)&&zs(()=>{pe&&hn(pe,ue,F),B&&he.enter(Se),Ce&&Dh(F,null,ue,"mounted")},ve)},M=(F,V,ie,ue,ve)=>{if(ie&&f(F,ie),ue)for(let ge=0;ge<ue.length;ge++)f(F,ue[ge]);if(ve){let ge=ve.subTree;if(V===ge||JI(ge.type)&&(ge.ssContent===V||ge.ssFallback===V)){const _e=ve.vnode;M(F,_e,_e.scopeId,_e.slotScopeIds,ve.parent)}}},S=(F,V,ie,ue,ve,ge,_e,ye,Se=0)=>{for(let pe=Se;pe<F.length;pe++){const G=F[pe]=ye?Il(F[pe]):Pn(F[pe]);m(null,G,V,ie,ue,ve,ge,_e,ye)}},A=(F,V,ie,ue,ve,ge,_e)=>{const ye=V.el=F.el;let{patchFlag:Se,dynamicChildren:pe,dirs:G}=V;Se|=F.patchFlag&16;const L=F.props||Li,he=V.props||Li;let Ce;if(ie&&Ih(ie,!1),(Ce=he.onVnodeBeforeUpdate)&&hn(Ce,ie,V,F),G&&Dh(V,F,ie,"beforeUpdate"),ie&&Ih(ie,!0),(L.innerHTML&&he.innerHTML==null||L.textContent&&he.textContent==null)&&c(ye,""),pe?C(F.dynamicChildren,pe,ye,ie,ue,w4(V,ve),ge):_e||k(F,V,ye,null,ie,ue,w4(V,ve),ge,!1),Se>0){if(Se&16)T(ye,L,he,ie,ve);else if(Se&2&&L.class!==he.class&&a(ye,"class",null,he.class,ve),Se&4&&a(ye,"style",L.style,he.style,ve),Se&8){const B=V.dynamicProps;for(let Le=0;Le<B.length;Le++){const Ue=B[Le],je=L[Ue],Ee=he[Ue];(Ee!==je||Ue==="value")&&a(ye,Ue,je,Ee,ve,ie)}}Se&1&&F.children!==V.children&&c(ye,V.children)}else!_e&&pe==null&&T(ye,L,he,ie,ve);((Ce=he.onVnodeUpdated)||G)&&zs(()=>{Ce&&hn(Ce,ie,V,F),G&&Dh(V,F,ie,"updated")},ue)},C=(F,V,ie,ue,ve,ge,_e)=>{for(let ye=0;ye<V.length;ye++){const Se=F[ye],pe=V[ye],G=Se.el&&(Se.type===sr||!B2(Se,pe)||Se.shapeFlag&198)?u(Se.el):ie;m(Se,pe,G,null,ue,ve,ge,_e,!0)}},T=(F,V,ie,ue,ve)=>{if(V!==ie){if(V!==Li)for(const ge in V)!M3(ge)&&!(ge in ie)&&a(F,ge,V[ge],null,ve,ue);for(const ge in ie){if(M3(ge))continue;const _e=ie[ge],ye=V[ge];_e!==ye&&ge!=="value"&&a(F,ge,ye,_e,ve,ue)}"value"in ie&&a(F,"value",V.value,ie.value,ve)}},D=(F,V,ie,ue,ve,ge,_e,ye,Se)=>{const pe=V.el=F?F.el:o(""),G=V.anchor=F?F.anchor:o("");let{patchFlag:L,dynamicChildren:he,slotScopeIds:Ce}=V;Ce&&(ye=ye?ye.concat(Ce):Ce),F==null?(r(pe,ie,ue),r(G,ie,ue),S(V.children||[],ie,G,ve,ge,_e,ye,Se)):L>0&&L&64&&he&&F.dynamicChildren?(C(F.dynamicChildren,he,ie,ve,ge,_e,ye),(V.key!=null||ve&&V===ve.subTree)&&XI(F,V,!0)):k(F,V,ie,G,ve,ge,_e,ye,Se)},R=(F,V,ie,ue,ve,ge,_e,ye,Se)=>{V.slotScopeIds=ye,F==null?V.shapeFlag&512?ve.ctx.activate(V,ie,ue,_e,Se):O(V,ie,ue,ve,ge,_e,Se):j(F,V,Se)},O=(F,V,ie,ue,ve,ge,_e)=>{const ye=F.component=qj(F,ue,ve);if(TI(F)&&(ye.ctx.renderer=ae),Xj(ye,!1,_e),ye.asyncDep){if(ve&&ve.registerDep(ye,X,_e),!F.el){const Se=ye.subTree=$t($a);v(null,Se,V,ie),F.placeholder=Se.el}}else X(ye,F,V,ie,ve,ge,_e)},j=(F,V,ie)=>{const ue=V.component=F.component;if(Fj(F,V,ie))if(ue.asyncDep&&!ue.asyncResolved){N(ue,V,ie);return}else ue.next=V,ue.update();else V.el=F.el,ue.vnode=V},X=(F,V,ie,ue,ve,ge,_e)=>{const ye=()=>{if(F.isMounted){let{next:L,bu:he,u:Ce,parent:B,vnode:Le}=F;{const Ge=YI(F);if(Ge){L&&(L.el=Le.el,N(F,L,_e)),Ge.asyncDep.then(()=>{F.isUnmounted||ye()});return}}let Ue=L,je;Ih(F,!1),L?(L.el=Le.el,N(F,L,_e)):L=Le,he&&pm(he),(je=L.props&&L.props.onVnodeBeforeUpdate)&&hn(je,B,L,Le),Ih(F,!0);const Ee=O7(F),qe=F.subTree;F.subTree=Ee,m(qe,Ee,u(qe.el),K(qe),F,ve,ge),L.el=Ee.el,Ue===null&&Nj(F,Ee.el),Ce&&zs(Ce,ve),(je=L.props&&L.props.onVnodeUpdated)&&zs(()=>hn(je,B,L,Le),ve)}else{let L;const{el:he,props:Ce}=V,{bm:B,m:Le,parent:Ue,root:je,type:Ee}=F,qe=lu(V);Ih(F,!1),B&&pm(B),!qe&&(L=Ce&&Ce.onVnodeBeforeMount)&&hn(L,Ue,V),Ih(F,!0);{je.ce&&je.ce._def.shadowRoot!==!1&&je.ce._injectChildStyle(Ee);const Ge=F.subTree=O7(F);m(null,Ge,ie,ue,F,ve,ge),V.el=Ge.el}if(Le&&zs(Le,ve),!qe&&(L=Ce&&Ce.onVnodeMounted)){const Ge=V;zs(()=>hn(L,Ue,Ge),ve)}(V.shapeFlag&256||Ue&&lu(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&F.a&&zs(F.a,ve),F.isMounted=!0,V=ie=ue=null}};F.scope.on();const Se=F.effect=new tI(ye);F.scope.off();const pe=F.update=Se.run.bind(Se),G=F.job=Se.runIfDirty.bind(Se);G.i=F,G.id=F.uid,Se.scheduler=()=>Cb(G),Ih(F,!0),pe()},N=(F,V,ie)=>{V.component=F;const ue=F.vnode.props;F.vnode=V,F.next=null,_j(F,V.props,ue,ie),Cj(F,V.children,ie),Wo(),A7(F),qo()},k=(F,V,ie,ue,ve,ge,_e,ye,Se=!1)=>{const pe=F&&F.children,G=F?F.shapeFlag:0,L=V.children,{patchFlag:he,shapeFlag:Ce}=V;if(he>0){if(he&128){te(pe,L,ie,ue,ve,ge,_e,ye,Se);return}else if(he&256){ne(pe,L,ie,ue,ve,ge,_e,ye,Se);return}}Ce&8?(G&16&&$(pe,ve,ge),L!==pe&&c(ie,L)):G&16?Ce&16?te(pe,L,ie,ue,ve,ge,_e,ye,Se):$(pe,ve,ge,!0):(G&8&&c(ie,""),Ce&16&&S(L,ie,ue,ve,ge,_e,ye,Se))},ne=(F,V,ie,ue,ve,ge,_e,ye,Se)=>{F=F||su,V=V||su;const pe=F.length,G=V.length,L=Math.min(pe,G);let he;for(he=0;he<L;he++){const Ce=V[he]=Se?Il(V[he]):Pn(V[he]);m(F[he],Ce,ie,null,ve,ge,_e,ye,Se)}pe>G?$(F,ve,ge,!0,!1,L):S(V,ie,ue,ve,ge,_e,ye,Se,L)},te=(F,V,ie,ue,ve,ge,_e,ye,Se)=>{let pe=0;const G=V.length;let L=F.length-1,he=G-1;for(;pe<=L&&pe<=he;){const Ce=F[pe],B=V[pe]=Se?Il(V[pe]):Pn(V[pe]);if(B2(Ce,B))m(Ce,B,ie,null,ve,ge,_e,ye,Se);else break;pe++}for(;pe<=L&&pe<=he;){const Ce=F[L],B=V[he]=Se?Il(V[he]):Pn(V[he]);if(B2(Ce,B))m(Ce,B,ie,null,ve,ge,_e,ye,Se);else break;L--,he--}if(pe>L){if(pe<=he){const Ce=he+1,B=Ce<G?V[Ce].el:ue;for(;pe<=he;)m(null,V[pe]=Se?Il(V[pe]):Pn(V[pe]),ie,B,ve,ge,_e,ye,Se),pe++}}else if(pe>he)for(;pe<=L;)Z(F[pe],ve,ge,!0),pe++;else{const Ce=pe,B=pe,Le=new Map;for(pe=B;pe<=he;pe++){const Qe=V[pe]=Se?Il(V[pe]):Pn(V[pe]);Qe.key!=null&&Le.set(Qe.key,pe)}let Ue,je=0;const Ee=he-B+1;let qe=!1,Ge=0;const Je=new Array(Ee);for(pe=0;pe<Ee;pe++)Je[pe]=0;for(pe=Ce;pe<=L;pe++){const Qe=F[pe];if(je>=Ee){Z(Qe,ve,ge,!0);continue}let et;if(Qe.key!=null)et=Le.get(Qe.key);else for(Ue=B;Ue<=he;Ue++)if(Je[Ue-B]===0&&B2(Qe,V[Ue])){et=Ue;break}et===void 0?Z(Qe,ve,ge,!0):(Je[et-B]=pe+1,et>=Ge?Ge=et:qe=!0,m(Qe,V[et],ie,null,ve,ge,_e,ye,Se),je++)}const ot=qe?Dj(Je):su;for(Ue=ot.length-1,pe=Ee-1;pe>=0;pe--){const Qe=B+pe,et=V[Qe],oi=V[Qe+1],Mi=Qe+1<G?oi.el||oi.placeholder:ue;Je[pe]===0?m(null,et,ie,Mi,ve,ge,_e,ye,Se):qe&&(Ue<0||pe!==ot[Ue]?Q(et,ie,Mi,2):Ue--)}}},Q=(F,V,ie,ue,ve=null)=>{const{el:ge,type:_e,transition:ye,children:Se,shapeFlag:pe}=F;if(pe&6){Q(F.component.subTree,V,ie,ue);return}if(pe&128){F.suspense.move(V,ie,ue);return}if(pe&64){_e.move(F,V,ie,ae);return}if(_e===sr){r(ge,V,ie);for(let L=0;L<Se.length;L++)Q(Se[L],V,ie,ue);r(F.anchor,V,ie);return}if(_e===mm){x(F,V,ie);return}if(ue!==2&&pe&1&&ye)if(ue===0)ye.beforeEnter(ge),r(ge,V,ie),zs(()=>ye.enter(ge),ve);else{const{leave:L,delayLeave:he,afterLeave:Ce}=ye,B=()=>{F.ctx.isUnmounted?s(ge):r(ge,V,ie)},Le=()=>{L(ge,()=>{B(),Ce&&Ce()})};he?he(ge,B,Le):Le()}else r(ge,V,ie)},Z=(F,V,ie,ue=!1,ve=!1)=>{const{type:ge,props:_e,ref:ye,children:Se,dynamicChildren:pe,shapeFlag:G,patchFlag:L,dirs:he,cacheIndex:Ce}=F;if(L===-2&&(ve=!1),ye!=null&&(Wo(),T3(ye,null,ie,F,!0),qo()),Ce!=null&&(V.renderCache[Ce]=void 0),G&256){V.ctx.deactivate(F);return}const B=G&1&&he,Le=!lu(F);let Ue;if(Le&&(Ue=_e&&_e.onVnodeBeforeUnmount)&&hn(Ue,V,F),G&6)le(F.component,ie,ue);else{if(G&128){F.suspense.unmount(ie,ue);return}B&&Dh(F,null,V,"beforeUnmount"),G&64?F.type.remove(F,V,ie,ae,ue):pe&&!pe.hasOnce&&(ge!==sr||L>0&&L&64)?$(pe,V,ie,!1,!0):(ge===sr&&L&384||!ve&&G&16)&&$(Se,V,ie),ue&&de(F)}(Le&&(Ue=_e&&_e.onVnodeUnmounted)||B)&&zs(()=>{Ue&&hn(Ue,V,F),B&&Dh(F,null,V,"unmounted")},ie)},de=F=>{const{type:V,el:ie,anchor:ue,transition:ve}=F;if(V===sr){ee(ie,ue);return}if(V===mm){w(F);return}const ge=()=>{s(ie),ve&&!ve.persisted&&ve.afterLeave&&ve.afterLeave()};if(F.shapeFlag&1&&ve&&!ve.persisted){const{leave:_e,delayLeave:ye}=ve,Se=()=>_e(ie,ge);ye?ye(F.el,ge,Se):Se()}else ge()},ee=(F,V)=>{let ie;for(;F!==V;)ie=d(F),s(F),F=ie;s(V)},le=(F,V,ie)=>{const{bum:ue,scope:ve,job:ge,subTree:_e,um:ye,m:Se,a:pe,parent:G,slots:{__:L}}=F;I7(Se),I7(pe),ue&&pm(ue),G&&gt(L)&&L.forEach(he=>{G.renderCache[he]=void 0}),ve.stop(),ge&&(ge.flags|=8,Z(_e,F,V,ie)),ye&&zs(ye,V),zs(()=>{F.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},$=(F,V,ie,ue=!1,ve=!1,ge=0)=>{for(let _e=ge;_e<F.length;_e++)Z(F[_e],V,ie,ue,ve)},K=F=>{if(F.shapeFlag&6)return K(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const V=d(F.anchor||F.el),ie=V&&V[JV];return ie?d(ie):V};let J=!1;const se=(F,V,ie)=>{F==null?V._vnode&&Z(V._vnode,null,null,!0):m(V._vnode||null,F,V,null,null,null,ie),V._vnode=F,J||(J=!0,A7(),SI(),J=!1)},ae={p:m,um:Z,m:Q,r:de,mt:O,mc:S,pc:k,pbc:C,n:K,o:e};return{render:se,hydrate:void 0,createApp:bj(se)}}function w4({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function Ih({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Pj(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function XI(e,t,i=!1){const r=e.children,s=t.children;if(gt(r)&&gt(s))for(let a=0;a<r.length;a++){const n=r[a];let o=s[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[a]=Il(s[a]),o.el=n.el),!i&&o.patchFlag!==-2&&XI(n,o)),o.type===Pv&&(o.el=n.el),o.type===$a&&!o.el&&(o.el=n.el)}}function Dj(e){const t=e.slice(),i=[0];let r,s,a,n,o;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(s=i[i.length-1],e[s]<h){t[r]=s,i.push(r);continue}for(a=0,n=i.length-1;a<n;)o=a+n>>1,e[i[o]]<h?a=o+1:n=o;h<e[i[a]]&&(a>0&&(t[r]=i[a-1]),i[a]=r)}}for(a=i.length,n=i[a-1];a-- >0;)i[a]=n,n=t[n];return i}function YI(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:YI(t)}function I7(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ij=Symbol.for("v-scx"),Oj=()=>Vn(Ij);function Ni(e,t,i){return KI(e,t,i)}function KI(e,t,i=Li){const{immediate:r,deep:s,flush:a,once:n}=i,o=Wr({},i),l=t&&r||!t&&a!=="post";let h;if(gd){if(a==="sync"){const f=Oj();h=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Xa,f.resume=Xa,f.pause=Xa,f}}const c=B1;o.call=(f,p,m)=>Ja(f,c,p,m);let u=!1;a==="post"?o.scheduler=f=>{zs(f,c&&c.suspense)}:a!=="sync"&&(u=!0,o.scheduler=(f,p)=>{p?f():Cb(f)}),o.augmentJob=f=>{t&&(f.flags|=4),u&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const d=YV(e,t,o);return gd&&(h?h.push(d):l&&d()),d}function Rj(e,t,i){const r=this.proxy,s=hr(e)?e.includes(".")?QI(r,e):()=>r[e]:e.bind(r,r);let a;zt(t)?a=t:(a=t.handler,i=t);const n=nf(this),o=KI(s,a.bind(r),i);return n(),o}function QI(e,t){const i=t.split(".");return()=>{let r=e;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}const Lj=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Sa(t)}Modifiers`]||e[`${wh(t)}Modifiers`];function zj(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||Li;let s=i;const a=t.startsWith("update:"),n=a&&Lj(r,t.slice(7));n&&(n.trim&&(s=i.map(c=>hr(c)?c.trim():c)),n.number&&(s=i.map(jm)));let o,l=r[o=m4(t)]||r[o=m4(Sa(t))];!l&&a&&(l=r[o=m4(wh(t))]),l&&Ja(l,e,6,s);const h=r[o+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Ja(h,e,6,s)}}function ZI(e,t,i=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const a=e.emits;let n={},o=!1;if(!zt(e)){const l=h=>{const c=ZI(h,t,!0);c&&(o=!0,Wr(n,c))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!o?(Bi(e)&&r.set(e,null),null):(gt(a)?a.forEach(l=>n[l]=null):Wr(n,a),Bi(e)&&r.set(e,n),n)}function Tv(e,t){return!e||!bv(t)?!1:(t=t.slice(2).replace(/Once$/,""),vi(e,t[0].toLowerCase()+t.slice(1))||vi(e,wh(t))||vi(e,t))}function O7(e){const{type:t,vnode:i,proxy:r,withProxy:s,propsOptions:[a],slots:n,attrs:o,emit:l,render:h,renderCache:c,props:u,data:d,setupState:f,ctx:p,inheritAttrs:m}=e,g=Xm(e);let v,y;try{if(i.shapeFlag&4){const w=s||r,_=w;v=Pn(h.call(_,w,c,u,f,d,p)),y=o}else{const w=t;v=Pn(w.length>1?w(u,{attrs:o,slots:n,emit:l}):w(u,null)),y=t.props?o:Bj(o)}}catch(w){I3.length=0,Mv(w,e,1),v=$t($a)}let x=v;if(y&&m!==!1){const w=Object.keys(y),{shapeFlag:_}=x;w.length&&_&7&&(a&&w.some(pb)&&(y=kj(y,a)),x=uh(x,y,!1,!0))}return i.dirs&&(x=uh(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(i.dirs):i.dirs),i.transition&&fd(x,i.transition),v=x,Xm(g),v}const Bj=e=>{let t;for(const i in e)(i==="class"||i==="style"||bv(i))&&((t||(t={}))[i]=e[i]);return t},kj=(e,t)=>{const i={};for(const r in e)(!pb(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function Fj(e,t,i){const{props:r,children:s,component:a}=e,{props:n,children:o,patchFlag:l}=t,h=a.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?R7(r,n,h):!!n;if(l&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const d=c[u];if(n[d]!==r[d]&&!Tv(h,d))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:r===n?!1:r?n?R7(r,n,h):!0:!!n;return!1}function R7(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const a=r[s];if(t[a]!==e[a]&&!Tv(i,a))return!0}return!1}function Nj({vnode:e,parent:t},i){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=i,t=t.parent;else break}}const JI=e=>e.__isSuspense;function Uj(e,t){t&&t.pendingBranch?gt(e)?t.effects.push(...e):t.effects.push(e):_I(e)}const sr=Symbol.for("v-fgt"),Pv=Symbol.for("v-txt"),$a=Symbol.for("v-cmt"),mm=Symbol.for("v-stc"),I3=[];let Ns=null;function It(e=!1){I3.push(Ns=e?null:[])}function Vj(){I3.pop(),Ns=I3[I3.length-1]||null}let pd=1;function L7(e,t=!1){pd+=e,e<0&&Ns&&t&&(Ns.hasOnce=!0)}function $I(e){return e.dynamicChildren=pd>0?Ns||su:null,Vj(),pd>0&&Ns&&Ns.push(e),e}function fi(e,t,i,r,s,a){return $I(Et(e,t,i,r,s,a,!0))}function ss(e,t,i,r,s){return $I($t(e,t,i,r,s,!0))}function md(e){return e?e.__v_isVNode===!0:!1}function B2(e,t){return e.type===t.type&&e.key===t.key}const eO=({key:e})=>e??null,gm=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?hr(e)||a1(e)||zt(e)?{i:x1,r:e,k:t,f:!!i}:e:null);function Et(e,t=null,i=null,r=0,s=null,a=e===sr?0:1,n=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&eO(t),ref:t&&gm(t),scopeId:MI,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:x1};return o?(Ob(l,i),a&128&&e.normalize(l)):i&&(l.shapeFlag|=hr(i)?8:16),pd>0&&!n&&Ns&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&Ns.push(l),l}const $t=jj;function jj(e,t=null,i=null,r=0,s=null,a=!1){if((!e||e===II)&&(e=$a),md(e)){const o=uh(e,t,!0);return i&&Ob(o,i),pd>0&&!a&&Ns&&(o.shapeFlag&6?Ns[Ns.indexOf(e)]=o:Ns.push(o)),o.patchFlag=-2,o}if(Zj(e)&&(e=e.__vccOpts),t){t=Gj(t);let{class:o,style:l}=t;o&&!hr(o)&&(t.class=rs(o)),Bi(l)&&(Ab(l)&&!gt(l)&&(l=Wr({},l)),t.style=Aa(l))}const n=hr(e)?1:JI(e)?128:$V(e)?64:Bi(e)?4:zt(e)?2:0;return Et(e,t,i,r,s,n,a,!0)}function Gj(e){return e?Ab(e)||VI(e)?Wr({},e):e:null}function uh(e,t,i=!1,r=!1){const{props:s,ref:a,patchFlag:n,children:o,transition:l}=e,h=t?af(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&eO(h),ref:t&&t.ref?i&&a?gt(a)?a.concat(gm(t)):[a,gm(t)]:gm(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==sr?n===-1?16:n|16:n,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&uh(e.ssContent),ssFallback:e.ssFallback&&uh(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&fd(c,l.clone(c)),c}function Ib(e=" ",t=0){return $t(Pv,null,e,t)}function Dv(e="",t=!1){return t?(It(),ss($a,null,e)):$t($a,null,e)}function Pn(e){return e==null||typeof e=="boolean"?$t($a):gt(e)?$t(sr,null,e.slice()):md(e)?Il(e):$t(Pv,null,String(e))}function Il(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:uh(e)}function Ob(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(gt(t))i=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Ob(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!VI(t)?t._ctx=x1:s===3&&x1&&(x1.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else zt(t)?(t={default:t,_ctx:x1},i=32):(t=String(t),r&64?(i=16,t=[Ib(t)]):i=8);e.children=t,e.shapeFlag|=i}function af(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=rs([t.class,r.class]));else if(s==="style")t.style=Aa([t.style,r.style]);else if(bv(s)){const a=t[s],n=r[s];n&&a!==n&&!(gt(a)&&a.includes(n))&&(t[s]=a?[].concat(a,n):n)}else s!==""&&(t[s]=r[s])}return t}function hn(e,t,i,r=null){Ja(e,t,7,[i,r])}const Hj=FI();let Wj=0;function qj(e,t,i){const r=e.type,s=(t?t.appContext:e.appContext)||Hj,a={uid:Wj++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $D(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:GI(r,s),emitsOptions:ZI(r,s),emit:null,emitted:null,propsDefaults:Li,inheritAttrs:r.inheritAttrs,ctx:Li,data:Li,props:Li,attrs:Li,slots:Li,refs:Li,setupState:Li,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=zj.bind(null,a),e.ce&&e.ce(a),a}let B1=null;const _h=()=>B1||x1;let Km,v5;{const e=Sv(),t=(i,r)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(r),a=>{s.length>1?s.forEach(n=>n(a)):s[0](a)}};Km=t("__VUE_INSTANCE_SETTERS__",i=>B1=i),v5=t("__VUE_SSR_SETTERS__",i=>gd=i)}const nf=e=>{const t=B1;return Km(e),e.scope.on(),()=>{e.scope.off(),Km(t)}},z7=()=>{B1&&B1.scope.off(),Km(null)};function tO(e){return e.vnode.shapeFlag&4}let gd=!1;function Xj(e,t=!1,i=!1){t&&v5(t);const{props:r,children:s}=e.vnode,a=tO(e);wj(e,r,a,t),Mj(e,s,i||t);const n=a?Yj(e,t):void 0;return t&&v5(!1),n}function Yj(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,fj);const{setup:r}=i;if(r){Wo();const s=e.setupContext=r.length>1?rO(e):null,a=nf(e),n=ef(r,e,0,[e.props,s]),o=XD(n);if(qo(),a(),(o||e.sp)&&!lu(e)&&EI(e),o){if(n.then(z7,z7),t)return n.then(l=>{B7(e,l)}).catch(l=>{Mv(l,e,0)});e.asyncDep=n}else B7(e,n)}else iO(e)}function B7(e,t,i){zt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Bi(t)&&(e.setupState=xI(t)),iO(e)}function iO(e,t,i){const r=e.type;e.render||(e.render=r.render||Xa);{const s=nf(e);Wo();try{pj(e)}finally{qo(),s()}}}const Kj={get(e,t){return L1(e,"get",""),e[t]}};function rO(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Kj),slots:e.slots,emit:e.emit,expose:t}}function Iv(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xI(vI(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in P3)return P3[i](e)},has(t,i){return i in t||i in P3}})):e.proxy}function Qj(e,t=!0){return zt(e)?e.displayName||e.name:e.name||t&&e.__name}function Zj(e){return zt(e)&&"__vccOpts"in e}const ci=(e,t)=>qV(e,t,gd);function dh(e,t,i){const r=arguments.length;return r===2?Bi(t)&&!gt(t)?md(t)?$t(e,null,[t]):$t(e,t):$t(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&md(i)&&(i=[i]),$t(e,t,i))}const Jj="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let y5;const k7=typeof window<"u"&&window.trustedTypes;if(k7)try{y5=k7.createPolicy("vue",{createHTML:e=>e})}catch{}const sO=y5?e=>y5.createHTML(e):e=>e,$j="http://www.w3.org/2000/svg",eG="http://www.w3.org/1998/Math/MathML",_o=typeof document<"u"?document:null,F7=_o&&_o.createElement("template"),tG={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const s=t==="svg"?_o.createElementNS($j,e):t==="mathml"?_o.createElementNS(eG,e):i?_o.createElement(e,{is:i}):_o.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>_o.createTextNode(e),createComment:e=>_o.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>_o.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,s,a){const n=i?i.previousSibling:t.lastChild;if(s&&(s===a||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===a||!(s=s.nextSibling)););else{F7.innerHTML=sO(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const o=F7.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,i)}return[n?n.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},cl="transition",T0="animation",Mu=Symbol("_vtc"),aO={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},iG=Wr({},tj,aO),Oh=(e,t=[])=>{gt(e)?e.forEach(i=>i(...t)):e&&e(...t)},N7=e=>e?gt(e)?e.some(t=>t.length>1):e.length>1:!1;function rG(e){const t={};for(const D in e)D in aO||(t[D]=e[D]);if(e.css===!1)return t;const{name:i="v",type:r,duration:s,enterFromClass:a=`${i}-enter-from`,enterActiveClass:n=`${i}-enter-active`,enterToClass:o=`${i}-enter-to`,appearFromClass:l=a,appearActiveClass:h=n,appearToClass:c=o,leaveFromClass:u=`${i}-leave-from`,leaveActiveClass:d=`${i}-leave-active`,leaveToClass:f=`${i}-leave-to`}=e,p=sG(s),m=p&&p[0],g=p&&p[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:x,onLeave:w,onLeaveCancelled:_,onBeforeAppear:b=v,onAppear:M=y,onAppearCancelled:S=x}=t,A=(D,R,O,j)=>{D._enterCancelled=j,Tl(D,R?c:o),Tl(D,R?h:n),O&&O()},C=(D,R)=>{D._isLeaving=!1,Tl(D,u),Tl(D,f),Tl(D,d),R&&R()},T=D=>(R,O)=>{const j=D?M:y,X=()=>A(R,D,O);Oh(j,[R,X]),U7(()=>{Tl(R,D?l:a),Sn(R,D?c:o),N7(j)||V7(R,r,m,X)})};return Wr(t,{onBeforeEnter(D){Oh(v,[D]),Sn(D,a),Sn(D,n)},onBeforeAppear(D){Oh(b,[D]),Sn(D,l),Sn(D,h)},onEnter:T(!1),onAppear:T(!0),onLeave(D,R){D._isLeaving=!0;const O=()=>C(D,R);Sn(D,u),D._enterCancelled?(Sn(D,d),x5()):(x5(),Sn(D,d)),U7(()=>{D._isLeaving&&(Tl(D,u),Sn(D,f),N7(w)||V7(D,r,g,O))}),Oh(w,[D,O])},onEnterCancelled(D){A(D,!1,void 0,!0),Oh(x,[D])},onAppearCancelled(D){A(D,!0,void 0,!0),Oh(S,[D])},onLeaveCancelled(D){C(D),Oh(_,[D])}})}function sG(e){if(e==null)return null;if(Bi(e))return[_4(e.enter),_4(e.leave)];{const t=_4(e);return[t,t]}}function _4(e){return cV(e)}function Sn(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e[Mu]||(e[Mu]=new Set)).add(t)}function Tl(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const i=e[Mu];i&&(i.delete(t),i.size||(e[Mu]=void 0))}function U7(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let aG=0;function V7(e,t,i,r){const s=e._endId=++aG,a=()=>{s===e._endId&&r()};if(i!=null)return setTimeout(a,i);const{type:n,timeout:o,propCount:l}=nO(e,t);if(!n)return r();const h=n+"end";let c=0;const u=()=>{e.removeEventListener(h,d),a()},d=f=>{f.target===e&&++c>=l&&u()};setTimeout(()=>{c<l&&u()},o+1),e.addEventListener(h,d)}function nO(e,t){const i=window.getComputedStyle(e),r=p=>(i[p]||"").split(", "),s=r(`${cl}Delay`),a=r(`${cl}Duration`),n=j7(s,a),o=r(`${T0}Delay`),l=r(`${T0}Duration`),h=j7(o,l);let c=null,u=0,d=0;t===cl?n>0&&(c=cl,u=n,d=a.length):t===T0?h>0&&(c=T0,u=h,d=l.length):(u=Math.max(n,h),c=u>0?n>h?cl:T0:null,d=c?c===cl?a.length:l.length:0);const f=c===cl&&/\b(transform|all)(,|$)/.test(r(`${cl}Property`).toString());return{type:c,timeout:u,propCount:d,hasTransform:f}}function j7(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,r)=>G7(i)+G7(e[r])))}function G7(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function x5(){return document.body.offsetHeight}function nG(e,t,i){const r=e[Mu];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const H7=Symbol("_vod"),oG=Symbol("_vsh"),oO=Symbol("");function lG(e){const t=_h();if(!t)return;const i=t.ut=(s=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(a=>Qm(a,s))},r=()=>{const s=e(t.proxy);t.ce?Qm(t.ce,s):b5(t.subTree,s),i(s)};Eb(()=>{_I(r)}),M1(()=>{Ni(r,Xa,{flush:"post"});const s=new MutationObserver(r);s.observe(t.subTree.el.parentNode,{childList:!0}),$u(()=>s.disconnect())})}function b5(e,t){if(e.shapeFlag&128){const i=e.suspense;e=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{b5(i.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Qm(e.el,t);else if(e.type===sr)e.children.forEach(i=>b5(i,t));else if(e.type===mm){let{el:i,anchor:r}=e;for(;i&&(Qm(i,t),i!==r);)i=i.nextSibling}}function Qm(e,t){if(e.nodeType===1){const i=e.style;let r="";for(const s in t){const a=yV(t[s]);i.setProperty(`--${s}`,a),r+=`--${s}: ${a};`}i[oO]=r}}const hG=/(^|;)\s*display\s*:/;function cG(e,t,i){const r=e.style,s=hr(i);let a=!1;if(i&&!s){if(t)if(hr(t))for(const n of t.split(";")){const o=n.slice(0,n.indexOf(":")).trim();i[o]==null&&vm(r,o,"")}else for(const n in t)i[n]==null&&vm(r,n,"");for(const n in i)n==="display"&&(a=!0),vm(r,n,i[n])}else if(s){if(t!==i){const n=r[oO];n&&(i+=";"+n),r.cssText=i,a=hG.test(i)}}else t&&e.removeAttribute("style");H7 in e&&(e[H7]=a?r.display:"",e[oG]&&(r.display="none"))}const W7=/\s*!important$/;function vm(e,t,i){if(gt(i))i.forEach(r=>vm(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=uG(e,t);W7.test(i)?e.setProperty(wh(r),i.replace(W7,""),"important"):e[r]=i}}const q7=["Webkit","Moz","ms"],S4={};function uG(e,t){const i=S4[t];if(i)return i;let r=Sa(t);if(r!=="filter"&&r in e)return S4[t]=r;r=_v(r);for(let s=0;s<q7.length;s++){const a=q7[s]+r;if(a in e)return S4[t]=a}return t}const X7="http://www.w3.org/1999/xlink";function Y7(e,t,i,r,s,a=gV(t)){r&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(X7,t.slice(6,t.length)):e.setAttributeNS(X7,t,i):i==null||a&&!QD(i)?e.removeAttribute(t):e.setAttribute(t,a?"":Za(i)?String(i):i)}function K7(e,t,i,r,s){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?sO(i):i);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const o=a==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(o!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let n=!1;if(i===""||i==null){const o=typeof e[t];o==="boolean"?i=QD(i):i==null&&o==="string"?(i="",n=!0):o==="number"&&(i=0,n=!0)}try{e[t]=i}catch{}n&&e.removeAttribute(s||t)}function Ro(e,t,i,r){e.addEventListener(t,i,r)}function dG(e,t,i,r){e.removeEventListener(t,i,r)}const Q7=Symbol("_vei");function fG(e,t,i,r,s=null){const a=e[Q7]||(e[Q7]={}),n=a[t];if(r&&n)n.value=r;else{const[o,l]=pG(t);if(r){const h=a[t]=vG(r,s);Ro(e,o,h,l)}else n&&(dG(e,o,n,l),a[t]=void 0)}}const Z7=/(?:Once|Passive|Capture)$/;function pG(e){let t;if(Z7.test(e)){t={};let r;for(;r=e.match(Z7);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):wh(e.slice(2)),t]}let A4=0;const mG=Promise.resolve(),gG=()=>A4||(mG.then(()=>A4=0),A4=Date.now());function vG(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;Ja(yG(r,i.value),t,5,[r])};return i.value=e,i.attached=gG(),i}function yG(e,t){if(gt(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const J7=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,xG=(e,t,i,r,s,a)=>{const n=s==="svg";t==="class"?nG(e,r,n):t==="style"?cG(e,i,r):bv(t)?pb(t)||fG(e,t,i,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):bG(e,t,r,n))?(K7(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Y7(e,t,r,n,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!hr(r))?K7(e,Sa(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Y7(e,t,r,n))};function bG(e,t,i,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&J7(t)&&zt(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return J7(t)&&hr(i)?!1:t in e}const lO=new WeakMap,hO=new WeakMap,Zm=Symbol("_moveCb"),$7=Symbol("_enterCb"),wG=e=>(delete e.props.mode,e),_G=wG({name:"TransitionGroup",props:Wr({},iG,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=_h(),r=ej();let s,a;return Tb(()=>{if(!s.length)return;const n=e.moveClass||`${e.name||"v"}-move`;if(!EG(s[0].el,i.vnode.el,n)){s=[];return}s.forEach(AG),s.forEach(MG);const o=s.filter(CG);x5(),o.forEach(l=>{const h=l.el,c=h.style;Sn(h,n),c.transform=c.webkitTransform=c.transitionDuration="";const u=h[Zm]=d=>{d&&d.target!==h||(!d||/transform$/.test(d.propertyName))&&(h.removeEventListener("transitionend",u),h[Zm]=null,Tl(h,n))};h.addEventListener("transitionend",u)}),s=[]}),()=>{const n=li(e),o=rG(n);let l=n.tag||sr;if(s=[],a)for(let h=0;h<a.length;h++){const c=a[h];c.el&&c.el instanceof Element&&(s.push(c),fd(c,d5(c,o,r,i)),lO.set(c,c.el.getBoundingClientRect()))}a=t.default?CI(t.default()):[];for(let h=0;h<a.length;h++){const c=a[h];c.key!=null&&fd(c,d5(c,o,r,i))}return $t(l,null,a)}}}),SG=_G;function AG(e){const t=e.el;t[Zm]&&t[Zm](),t[$7]&&t[$7]()}function MG(e){hO.set(e,e.el.getBoundingClientRect())}function CG(e){const t=lO.get(e),i=hO.get(e),r=t.left-i.left,s=t.top-i.top;if(r||s){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${r}px,${s}px)`,a.transitionDuration="0s",e}}function EG(e,t,i){const r=e.cloneNode(),s=e[Mu];s&&s.forEach(o=>{o.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),i.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(r);const{hasTransform:n}=nO(r);return a.removeChild(r),n}const fh=e=>{const t=e.props["onUpdate:modelValue"]||!1;return gt(t)?i=>pm(t,i):t};function TG(e){e.target.composing=!0}function eS(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xa=Symbol("_assign"),tS={created(e,{modifiers:{lazy:t,trim:i,number:r}},s){e[xa]=fh(s);const a=r||s.props&&s.props.type==="number";Ro(e,t?"change":"input",n=>{if(n.target.composing)return;let o=e.value;i&&(o=o.trim()),a&&(o=jm(o)),e[xa](o)}),i&&Ro(e,"change",()=>{e.value=e.value.trim()}),t||(Ro(e,"compositionstart",TG),Ro(e,"compositionend",eS),Ro(e,"change",eS))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:r,trim:s,number:a}},n){if(e[xa]=fh(n),e.composing)return;const o=(a||e.type==="number")&&!/^0\d/.test(e.value)?jm(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===i||s&&e.value.trim()===l)||(e.value=l))}},PG={deep:!0,created(e,t,i){e[xa]=fh(i),Ro(e,"change",()=>{const r=e._modelValue,s=Cu(e),a=e.checked,n=e[xa];if(gt(r)){const o=vb(r,s),l=o!==-1;if(a&&!l)n(r.concat(s));else if(!a&&l){const h=[...r];h.splice(o,1),n(h)}}else if(Ju(r)){const o=new Set(r);a?o.add(s):o.delete(s),n(o)}else n(cO(e,a))})},mounted:iS,beforeUpdate(e,t,i){e[xa]=fh(i),iS(e,t,i)}};function iS(e,{value:t,oldValue:i},r){e._modelValue=t;let s;if(gt(t))s=vb(t,r.props.value)>-1;else if(Ju(t))s=t.has(r.props.value);else{if(t===i)return;s=Ic(t,cO(e,!0))}e.checked!==s&&(e.checked=s)}const DG={created(e,{value:t},i){e.checked=Ic(t,i.props.value),e[xa]=fh(i),Ro(e,"change",()=>{e[xa](Cu(e))})},beforeUpdate(e,{value:t,oldValue:i},r){e[xa]=fh(r),t!==i&&(e.checked=Ic(t,r.props.value))}},IG={deep:!0,created(e,{value:t,modifiers:{number:i}},r){const s=Ju(t);Ro(e,"change",()=>{const a=Array.prototype.filter.call(e.options,n=>n.selected).map(n=>i?jm(Cu(n)):Cu(n));e[xa](e.multiple?s?new Set(a):a:a[0]),e._assigning=!0,tf(()=>{e._assigning=!1})}),e[xa]=fh(r)},mounted(e,{value:t}){rS(e,t)},beforeUpdate(e,t,i){e[xa]=fh(i)},updated(e,{value:t}){e._assigning||rS(e,t)}};function rS(e,t){const i=e.multiple,r=gt(t);if(!(i&&!r&&!Ju(t))){for(let s=0,a=e.options.length;s<a;s++){const n=e.options[s],o=Cu(n);if(i)if(r){const l=typeof o;l==="string"||l==="number"?n.selected=t.some(h=>String(h)===String(o)):n.selected=vb(t,o)>-1}else n.selected=t.has(o);else if(Ic(Cu(n),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Cu(e){return"_value"in e?e._value:e.value}function cO(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const OG={created(e,t,i){zf(e,t,i,null,"created")},mounted(e,t,i){zf(e,t,i,null,"mounted")},beforeUpdate(e,t,i,r){zf(e,t,i,r,"beforeUpdate")},updated(e,t,i,r){zf(e,t,i,r,"updated")}};function RG(e,t){switch(e){case"SELECT":return IG;case"TEXTAREA":return tS;default:switch(t){case"checkbox":return PG;case"radio":return DG;default:return tS}}}function zf(e,t,i,r,s){const n=RG(e.tagName,i.props&&i.props.type)[s];n&&n(e,t,i,r)}const LG={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zG=(e,t)=>{const i=e._withKeys||(e._withKeys={}),r=t.join(".");return i[r]||(i[r]=s=>{if(!("key"in s))return;const a=wh(s.key);if(t.some(n=>n===a||LG[n]===a))return e(s)})},BG=Wr({patchProp:xG},tG);let sS;function kG(){return sS||(sS=Ej(BG))}const uO=(...e)=>{const t=kG().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=NG(r);if(!s)return;const a=t._component;!zt(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const n=i(s,!1,FG(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),n},t};function FG(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function NG(e){return hr(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const UG=Symbol();var aS;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(aS||(aS={}));function VG(){const e=xV(!0),t=e.run(()=>Yt({}));let i=[],r=[];const s=vI({install(a){s._a=a,a.provide(UG,s),a.config.globalProperties.$pinia=s,r.forEach(n=>i.push(n)),r=[]},use(a){return this._a?i.push(a):r.push(a),this},_p:i,_a:null,_e:e,_s:new Map,state:t});return s}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const k2=typeof document<"u";function dO(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function jG(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&dO(e.default)}const gi=Object.assign;function M4(e,t){const i={};for(const r in t){const s=t[r];i[r]=en(s)?s.map(e):e(s)}return i}const O3=()=>{},en=Array.isArray,fO=/#/g,GG=/&/g,HG=/\//g,WG=/=/g,qG=/\?/g,pO=/\+/g,XG=/%5B/g,YG=/%5D/g,mO=/%5E/g,KG=/%60/g,gO=/%7B/g,QG=/%7C/g,vO=/%7D/g,ZG=/%20/g;function Rb(e){return encodeURI(""+e).replace(QG,"|").replace(XG,"[").replace(YG,"]")}function JG(e){return Rb(e).replace(gO,"{").replace(vO,"}").replace(mO,"^")}function w5(e){return Rb(e).replace(pO,"%2B").replace(ZG,"+").replace(fO,"%23").replace(GG,"%26").replace(KG,"`").replace(gO,"{").replace(vO,"}").replace(mO,"^")}function $G(e){return w5(e).replace(WG,"%3D")}function eH(e){return Rb(e).replace(fO,"%23").replace(qG,"%3F")}function tH(e){return e==null?"":eH(e).replace(HG,"%2F")}function vd(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const iH=/\/$/,rH=e=>e.replace(iH,"");function C4(e,t,i="/"){let r,s={},a="",n="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(r=t.slice(0,l),a=t.slice(l+1,o>-1?o:t.length),s=e(a)),o>-1&&(r=r||t.slice(0,o),n=t.slice(o,t.length)),r=oH(r??t,i),{fullPath:r+(a&&"?")+a+n,path:r,query:s,hash:vd(n)}}function sH(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function nS(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function aH(e,t,i){const r=t.matched.length-1,s=i.matched.length-1;return r>-1&&r===s&&Eu(t.matched[r],i.matched[s])&&yO(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function Eu(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function yO(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!nH(e[i],t[i]))return!1;return!0}function nH(e,t){return en(e)?oS(e,t):en(t)?oS(t,e):e===t}function oS(e,t){return en(t)?e.length===t.length&&e.every((i,r)=>i===t[r]):e.length===1&&e[0]===t}function oH(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let a=i.length-1,n,o;for(n=0;n<r.length;n++)if(o=r[n],o!==".")if(o==="..")a>1&&a--;else break;return i.slice(0,a).join("/")+"/"+r.slice(n).join("/")}const ul={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var yd;(function(e){e.pop="pop",e.push="push"})(yd||(yd={}));var R3;(function(e){e.back="back",e.forward="forward",e.unknown=""})(R3||(R3={}));function lH(e){if(!e)if(k2){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),rH(e)}const hH=/^[^#]+#/;function cH(e,t){return e.replace(hH,"#")+t}function uH(e,t){const i=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-i.left-(t.left||0),top:r.top-i.top-(t.top||0)}}const Ov=()=>({left:window.scrollX,top:window.scrollY});function dH(e){let t;if("el"in e){const i=e.el,r=typeof i=="string"&&i.startsWith("#"),s=typeof i=="string"?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!s)return;t=uH(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function lS(e,t){return(history.state?history.state.position-t:-1)+e}const _5=new Map;function fH(e,t){_5.set(e,t)}function pH(e){const t=_5.get(e);return _5.delete(e),t}let mH=()=>location.protocol+"//"+location.host;function xO(e,t){const{pathname:i,search:r,hash:s}=t,a=e.indexOf("#");if(a>-1){let o=s.includes(e.slice(a))?e.slice(a).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),nS(l,"")}return nS(i,e)+r+s}function gH(e,t,i,r){let s=[],a=[],n=null;const o=({state:d})=>{const f=xO(e,location),p=i.value,m=t.value;let g=0;if(d){if(i.value=f,t.value=d,n&&n===p){n=null;return}g=m?d.position-m.position:0}else r(f);s.forEach(v=>{v(i.value,p,{delta:g,type:yd.pop,direction:g?g>0?R3.forward:R3.back:R3.unknown})})};function l(){n=i.value}function h(d){s.push(d);const f=()=>{const p=s.indexOf(d);p>-1&&s.splice(p,1)};return a.push(f),f}function c(){const{history:d}=window;d.state&&d.replaceState(gi({},d.state,{scroll:Ov()}),"")}function u(){for(const d of a)d();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:h,destroy:u}}function hS(e,t,i,r=!1,s=!1){return{back:e,current:t,forward:i,replaced:r,position:window.history.length,scroll:s?Ov():null}}function vH(e){const{history:t,location:i}=window,r={value:xO(e,i)},s={value:t.state};s.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,h,c){const u=e.indexOf("#"),d=u>-1?(i.host&&document.querySelector("base")?e:e.slice(u))+l:mH()+e+l;try{t[c?"replaceState":"pushState"](h,"",d),s.value=h}catch(f){console.error(f),i[c?"replace":"assign"](d)}}function n(l,h){const c=gi({},t.state,hS(s.value.back,l,s.value.forward,!0),h,{position:s.value.position});a(l,c,!0),r.value=l}function o(l,h){const c=gi({},s.value,t.state,{forward:l,scroll:Ov()});a(c.current,c,!0);const u=gi({},hS(r.value,l,null),{position:c.position+1},h);a(l,u,!1),r.value=l}return{location:r,state:s,push:o,replace:n}}function yH(e){e=lH(e);const t=vH(e),i=gH(e,t.state,t.location,t.replace);function r(a,n=!0){n||i.pauseListeners(),history.go(a)}const s=gi({location:"",base:e,go:r,createHref:cH.bind(null,e)},t,i);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function xH(e){return typeof e=="string"||e&&typeof e=="object"}function bO(e){return typeof e=="string"||typeof e=="symbol"}const wO=Symbol("");var cS;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(cS||(cS={}));function Tu(e,t){return gi(new Error,{type:e,[wO]:!0},t)}function ao(e,t){return e instanceof Error&&wO in e&&(t==null||!!(e.type&t))}const uS="[^/]+?",bH={sensitive:!1,strict:!1,start:!0,end:!0},wH=/[.+*?^${}()[\]/\\]/g;function _H(e,t){const i=gi({},bH,t),r=[];let s=i.start?"^":"";const a=[];for(const h of e){const c=h.length?[]:[90];i.strict&&!h.length&&(s+="/");for(let u=0;u<h.length;u++){const d=h[u];let f=40+(i.sensitive?.25:0);if(d.type===0)u||(s+="/"),s+=d.value.replace(wH,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:g,regexp:v}=d;a.push({name:p,repeatable:m,optional:g});const y=v||uS;if(y!==uS){f+=10;try{new RegExp(`(${y})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+w.message)}}let x=m?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;u||(x=g&&h.length<2?`(?:/${x})`:"/"+x),g&&(x+="?"),s+=x,f+=20,g&&(f+=-8),m&&(f+=-20),y===".*"&&(f+=-50)}c.push(f)}r.push(c)}if(i.strict&&i.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}i.strict||(s+="/?"),i.end?s+="$":i.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const n=new RegExp(s,i.sensitive?"":"i");function o(h){const c=h.match(n),u={};if(!c)return null;for(let d=1;d<c.length;d++){const f=c[d]||"",p=a[d-1];u[p.name]=f&&p.repeatable?f.split("/"):f}return u}function l(h){let c="",u=!1;for(const d of e){(!u||!c.endsWith("/"))&&(c+="/"),u=!1;for(const f of d)if(f.type===0)c+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:g}=f,v=p in h?h[p]:"";if(en(v)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=en(v)?v.join("/"):v;if(!y)if(g)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):u=!0);else throw new Error(`Missing required param "${p}"`);c+=y}}return c||"/"}return{re:n,score:r,keys:a,parse:o,stringify:l}}function SH(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=t[i]-e[i];if(r)return r;i++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function _O(e,t){let i=0;const r=e.score,s=t.score;for(;i<r.length&&i<s.length;){const a=SH(r[i],s[i]);if(a)return a;i++}if(Math.abs(s.length-r.length)===1){if(dS(r))return 1;if(dS(s))return-1}return s.length-r.length}function dS(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const AH={type:0,value:""},MH=/[a-zA-Z0-9_]/;function CH(e){if(!e)return[[]];if(e==="/")return[[AH]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${i})/"${h}": ${f}`)}let i=0,r=i;const s=[];let a;function n(){a&&s.push(a),a=[]}let o=0,l,h="",c="";function u(){h&&(i===0?a.push({type:0,value:h}):i===1||i===2||i===3?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:h,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function d(){h+=l}for(;o<e.length;){if(l=e[o++],l==="\\"&&i!==2){r=i,i=4;continue}switch(i){case 0:l==="/"?(h&&u(),n()):l===":"?(u(),i=1):d();break;case 4:d(),i=r;break;case 1:l==="("?i=2:MH.test(l)?d():(u(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:i=3:c+=l;break;case 3:u(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${h}"`),u(),n(),s}function EH(e,t,i){const r=_H(CH(e.path),i),s=gi(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function TH(e,t){const i=[],r=new Map;t=gS({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function a(u,d,f){const p=!f,m=pS(u);m.aliasOf=f&&f.record;const g=gS(t,u),v=[m];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const _ of w)v.push(pS(gi({},m,{components:f?f.record.components:m.components,path:_,aliasOf:f?f.record:m})))}let y,x;for(const w of v){const{path:_}=w;if(d&&_[0]!=="/"){const b=d.record.path,M=b[b.length-1]==="/"?"":"/";w.path=d.record.path+(_&&M+_)}if(y=EH(w,d,g),f?f.alias.push(y):(x=x||y,x!==y&&x.alias.push(y),p&&u.name&&!mS(y)&&n(u.name)),SO(y)&&l(y),m.children){const b=m.children;for(let M=0;M<b.length;M++)a(b[M],y,f&&f.children[M])}f=f||y}return x?()=>{n(x)}:O3}function n(u){if(bO(u)){const d=r.get(u);d&&(r.delete(u),i.splice(i.indexOf(d),1),d.children.forEach(n),d.alias.forEach(n))}else{const d=i.indexOf(u);d>-1&&(i.splice(d,1),u.record.name&&r.delete(u.record.name),u.children.forEach(n),u.alias.forEach(n))}}function o(){return i}function l(u){const d=IH(u,i);i.splice(d,0,u),u.record.name&&!mS(u)&&r.set(u.record.name,u)}function h(u,d){let f,p={},m,g;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Tu(1,{location:u});g=f.record.name,p=gi(fS(d.params,f.keys.filter(x=>!x.optional).concat(f.parent?f.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),u.params&&fS(u.params,f.keys.map(x=>x.name))),m=f.stringify(p)}else if(u.path!=null)m=u.path,f=i.find(x=>x.re.test(m)),f&&(p=f.parse(m),g=f.record.name);else{if(f=d.name?r.get(d.name):i.find(x=>x.re.test(d.path)),!f)throw Tu(1,{location:u,currentLocation:d});g=f.record.name,p=gi({},d.params,u.params),m=f.stringify(p)}const v=[];let y=f;for(;y;)v.unshift(y.record),y=y.parent;return{name:g,path:m,params:p,matched:v,meta:DH(v)}}e.forEach(u=>a(u));function c(){i.length=0,r.clear()}return{addRoute:a,resolve:h,removeRoute:n,clearRoutes:c,getRoutes:o,getRecordMatcher:s}}function fS(e,t){const i={};for(const r of t)r in e&&(i[r]=e[r]);return i}function pS(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:PH(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function PH(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const r in e.components)t[r]=typeof i=="object"?i[r]:i;return t}function mS(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function DH(e){return e.reduce((t,i)=>gi(t,i.meta),{})}function gS(e,t){const i={};for(const r in e)i[r]=r in t?t[r]:e[r];return i}function IH(e,t){let i=0,r=t.length;for(;i!==r;){const a=i+r>>1;_O(e,t[a])<0?r=a:i=a+1}const s=OH(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function OH(e){let t=e;for(;t=t.parent;)if(SO(t)&&_O(e,t)===0)return t}function SO({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function RH(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const a=r[s].replace(pO," "),n=a.indexOf("="),o=vd(n<0?a:a.slice(0,n)),l=n<0?null:vd(a.slice(n+1));if(o in t){let h=t[o];en(h)||(h=t[o]=[h]),h.push(l)}else t[o]=l}return t}function vS(e){let t="";for(let i in e){const r=e[i];if(i=$G(i),r==null){r!==void 0&&(t+=(t.length?"&":"")+i);continue}(en(r)?r.map(a=>a&&w5(a)):[r&&w5(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+i,a!=null&&(t+="="+a))})}return t}function LH(e){const t={};for(const i in e){const r=e[i];r!==void 0&&(t[i]=en(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const zH=Symbol(""),yS=Symbol(""),Lb=Symbol(""),AO=Symbol(""),S5=Symbol("");function P0(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function i(){e=[]}return{add:t,list:()=>e.slice(),reset:i}}function Ol(e,t,i,r,s,a=n=>n()){const n=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const h=d=>{d===!1?l(Tu(4,{from:i,to:t})):d instanceof Error?l(d):xH(d)?l(Tu(2,{from:t,to:d})):(n&&r.enterCallbacks[s]===n&&typeof d=="function"&&n.push(d),o())},c=a(()=>e.call(r&&r.instances[s],t,i,h));let u=Promise.resolve(c);e.length<3&&(u=u.then(h)),u.catch(d=>l(d))})}function E4(e,t,i,r,s=a=>a()){const a=[];for(const n of e)for(const o in n.components){let l=n.components[o];if(!(t!=="beforeRouteEnter"&&!n.instances[o]))if(dO(l)){const c=(l.__vccOpts||l)[t];c&&a.push(Ol(c,i,r,n,o,s))}else{let h=l();a.push(()=>h.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${o}" at "${n.path}"`);const u=jG(c)?c.default:c;n.mods[o]=c,n.components[o]=u;const f=(u.__vccOpts||u)[t];return f&&Ol(f,i,r,n,o,s)()}))}}return a}function xS(e){const t=Vn(Lb),i=Vn(AO),r=ci(()=>{const l=Si(e.to);return t.resolve(l)}),s=ci(()=>{const{matched:l}=r.value,{length:h}=l,c=l[h-1],u=i.matched;if(!c||!u.length)return-1;const d=u.findIndex(Eu.bind(null,c));if(d>-1)return d;const f=bS(l[h-2]);return h>1&&bS(c)===f&&u[u.length-1].path!==f?u.findIndex(Eu.bind(null,l[h-2])):d}),a=ci(()=>s.value>-1&&UH(i.params,r.value.params)),n=ci(()=>s.value>-1&&s.value===i.matched.length-1&&yO(i.params,r.value.params));function o(l={}){if(NH(l)){const h=t[Si(e.replace)?"replace":"push"](Si(e.to)).catch(O3);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:ci(()=>r.value.href),isActive:a,isExactActive:n,navigate:o}}function BH(e){return e.length===1?e[0]:e}const kH=qi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:xS,setup(e,{slots:t}){const i=hh(xS(e)),{options:r}=Vn(Lb),s=ci(()=>({[wS(e.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[wS(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const a=t.default&&BH(t.default(i));return e.custom?a:dh("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:s.value},a)}}}),FH=kH;function NH(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function UH(e,t){for(const i in t){const r=t[i],s=e[i];if(typeof r=="string"){if(r!==s)return!1}else if(!en(s)||s.length!==r.length||r.some((a,n)=>a!==s[n]))return!1}return!0}function bS(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const wS=(e,t,i)=>e??t??i,VH=qi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:i}){const r=Vn(S5),s=ci(()=>e.route||r.value),a=Vn(yS,0),n=ci(()=>{let h=Si(a);const{matched:c}=s.value;let u;for(;(u=c[h])&&!u.components;)h++;return h}),o=ci(()=>s.value.matched[n.value]);D3(yS,ci(()=>n.value+1)),D3(zH,o),D3(S5,s);const l=Yt();return Ni(()=>[l.value,o.value,e.name],([h,c,u],[d,f,p])=>{c&&(c.instances[u]=h,f&&f!==c&&h&&h===d&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),h&&c&&(!f||!Eu(c,f)||!d)&&(c.enterCallbacks[u]||[]).forEach(m=>m(h))},{flush:"post"}),()=>{const h=s.value,c=e.name,u=o.value,d=u&&u.components[c];if(!d)return _S(i.default,{Component:d,route:h});const f=u.props[c],p=f?f===!0?h.params:typeof f=="function"?f(h):f:null,g=dh(d,gi({},p,t,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(u.instances[c]=null)},ref:l}));return _S(i.default,{Component:g,route:h})||g}}});function _S(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const MO=VH;function jH(e){const t=TH(e.routes,e),i=e.parseQuery||RH,r=e.stringifyQuery||vS,s=e.history,a=P0(),n=P0(),o=P0(),l=Mb(ul);let h=ul;k2&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=M4.bind(null,K=>""+K),u=M4.bind(null,tH),d=M4.bind(null,vd);function f(K,J){let se,ae;return bO(K)?(se=t.getRecordMatcher(K),ae=J):ae=K,t.addRoute(ae,se)}function p(K){const J=t.getRecordMatcher(K);J&&t.removeRoute(J)}function m(){return t.getRoutes().map(K=>K.record)}function g(K){return!!t.getRecordMatcher(K)}function v(K,J){if(J=gi({},J||l.value),typeof K=="string"){const ie=C4(i,K,J.path),ue=t.resolve({path:ie.path},J),ve=s.createHref(ie.fullPath);return gi(ie,ue,{params:d(ue.params),hash:vd(ie.hash),redirectedFrom:void 0,href:ve})}let se;if(K.path!=null)se=gi({},K,{path:C4(i,K.path,J.path).path});else{const ie=gi({},K.params);for(const ue in ie)ie[ue]==null&&delete ie[ue];se=gi({},K,{params:u(ie)}),J.params=u(J.params)}const ae=t.resolve(se,J),Ae=K.hash||"";ae.params=c(d(ae.params));const F=sH(r,gi({},K,{hash:JG(Ae),path:ae.path})),V=s.createHref(F);return gi({fullPath:F,hash:Ae,query:r===vS?LH(K.query):K.query||{}},ae,{redirectedFrom:void 0,href:V})}function y(K){return typeof K=="string"?C4(i,K,l.value.path):gi({},K)}function x(K,J){if(h!==K)return Tu(8,{from:J,to:K})}function w(K){return M(K)}function _(K){return w(gi(y(K),{replace:!0}))}function b(K){const J=K.matched[K.matched.length-1];if(J&&J.redirect){const{redirect:se}=J;let ae=typeof se=="function"?se(K):se;return typeof ae=="string"&&(ae=ae.includes("?")||ae.includes("#")?ae=y(ae):{path:ae},ae.params={}),gi({query:K.query,hash:K.hash,params:ae.path!=null?{}:K.params},ae)}}function M(K,J){const se=h=v(K),ae=l.value,Ae=K.state,F=K.force,V=K.replace===!0,ie=b(se);if(ie)return M(gi(y(ie),{state:typeof ie=="object"?gi({},Ae,ie.state):Ae,force:F,replace:V}),J||se);const ue=se;ue.redirectedFrom=J;let ve;return!F&&aH(r,ae,se)&&(ve=Tu(16,{to:ue,from:ae}),Q(ae,ae,!0,!1)),(ve?Promise.resolve(ve):C(ue,ae)).catch(ge=>ao(ge)?ao(ge,2)?ge:te(ge):k(ge,ue,ae)).then(ge=>{if(ge){if(ao(ge,2))return M(gi({replace:V},y(ge.to),{state:typeof ge.to=="object"?gi({},Ae,ge.to.state):Ae,force:F}),J||ue)}else ge=D(ue,ae,!0,V,Ae);return T(ue,ae,ge),ge})}function S(K,J){const se=x(K,J);return se?Promise.reject(se):Promise.resolve()}function A(K){const J=ee.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(K):K()}function C(K,J){let se;const[ae,Ae,F]=GH(K,J);se=E4(ae.reverse(),"beforeRouteLeave",K,J);for(const ie of ae)ie.leaveGuards.forEach(ue=>{se.push(Ol(ue,K,J))});const V=S.bind(null,K,J);return se.push(V),$(se).then(()=>{se=[];for(const ie of a.list())se.push(Ol(ie,K,J));return se.push(V),$(se)}).then(()=>{se=E4(Ae,"beforeRouteUpdate",K,J);for(const ie of Ae)ie.updateGuards.forEach(ue=>{se.push(Ol(ue,K,J))});return se.push(V),$(se)}).then(()=>{se=[];for(const ie of F)if(ie.beforeEnter)if(en(ie.beforeEnter))for(const ue of ie.beforeEnter)se.push(Ol(ue,K,J));else se.push(Ol(ie.beforeEnter,K,J));return se.push(V),$(se)}).then(()=>(K.matched.forEach(ie=>ie.enterCallbacks={}),se=E4(F,"beforeRouteEnter",K,J,A),se.push(V),$(se))).then(()=>{se=[];for(const ie of n.list())se.push(Ol(ie,K,J));return se.push(V),$(se)}).catch(ie=>ao(ie,8)?ie:Promise.reject(ie))}function T(K,J,se){o.list().forEach(ae=>A(()=>ae(K,J,se)))}function D(K,J,se,ae,Ae){const F=x(K,J);if(F)return F;const V=J===ul,ie=k2?history.state:{};se&&(ae||V?s.replace(K.fullPath,gi({scroll:V&&ie&&ie.scroll},Ae)):s.push(K.fullPath,Ae)),l.value=K,Q(K,J,se,V),te()}let R;function O(){R||(R=s.listen((K,J,se)=>{if(!le.listening)return;const ae=v(K),Ae=b(ae);if(Ae){M(gi(Ae,{replace:!0,force:!0}),ae).catch(O3);return}h=ae;const F=l.value;k2&&fH(lS(F.fullPath,se.delta),Ov()),C(ae,F).catch(V=>ao(V,12)?V:ao(V,2)?(M(gi(y(V.to),{force:!0}),ae).then(ie=>{ao(ie,20)&&!se.delta&&se.type===yd.pop&&s.go(-1,!1)}).catch(O3),Promise.reject()):(se.delta&&s.go(-se.delta,!1),k(V,ae,F))).then(V=>{V=V||D(ae,F,!1),V&&(se.delta&&!ao(V,8)?s.go(-se.delta,!1):se.type===yd.pop&&ao(V,20)&&s.go(-1,!1)),T(ae,F,V)}).catch(O3)}))}let j=P0(),X=P0(),N;function k(K,J,se){te(K);const ae=X.list();return ae.length?ae.forEach(Ae=>Ae(K,J,se)):console.error(K),Promise.reject(K)}function ne(){return N&&l.value!==ul?Promise.resolve():new Promise((K,J)=>{j.add([K,J])})}function te(K){return N||(N=!K,O(),j.list().forEach(([J,se])=>K?se(K):J()),j.reset()),K}function Q(K,J,se,ae){const{scrollBehavior:Ae}=e;if(!k2||!Ae)return Promise.resolve();const F=!se&&pH(lS(K.fullPath,0))||(ae||!se)&&history.state&&history.state.scroll||null;return tf().then(()=>Ae(K,J,F)).then(V=>V&&dH(V)).catch(V=>k(V,K,J))}const Z=K=>s.go(K);let de;const ee=new Set,le={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,clearRoutes:t.clearRoutes,hasRoute:g,getRoutes:m,resolve:v,options:e,push:w,replace:_,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:a.add,beforeResolve:n.add,afterEach:o.add,onError:X.add,isReady:ne,install(K){const J=this;K.component("RouterLink",FH),K.component("RouterView",MO),K.config.globalProperties.$router=J,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>Si(l)}),k2&&!de&&l.value===ul&&(de=!0,w(s.location).catch(Ae=>{}));const se={};for(const Ae in ul)Object.defineProperty(se,Ae,{get:()=>l.value[Ae],enumerable:!0});K.provide(Lb,J),K.provide(AO,mI(se)),K.provide(S5,l);const ae=K.unmount;ee.add(K),K.unmount=function(){ee.delete(K),ee.size<1&&(h=ul,R&&R(),R=null,l.value=ul,de=!1,N=!1),ae()}}};function $(K){return K.reduce((J,se)=>J.then(()=>A(se)),Promise.resolve())}return le}function GH(e,t){const i=[],r=[],s=[],a=Math.max(t.matched.length,e.matched.length);for(let n=0;n<a;n++){const o=t.matched[n];o&&(e.matched.find(h=>Eu(h,o))?r.push(o):i.push(o));const l=e.matched[n];l&&(t.matched.find(h=>Eu(h,l))||s.push(l))}return[i,r,s]}const al=(e,t)=>{const i=e.__vccOpts||e;for(const[r,s]of t)i[r]=s;return i},HH=qi({__name:"App",setup(e){return(t,i)=>(It(),fi(sr,null,[i[0]||(i[0]=Et("header",null,null,-1)),$t(Si(MO))],64))}}),WH=al(HH,[["__scopeId","data-v-c4c42b04"]]);var qH=Object.defineProperty,XH=(e,t,i)=>t in e?qH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Vt=(e,t,i)=>XH(e,typeof t!="symbol"?t+"":t,i),YH=class{requestAnimationFrame(t){return requestAnimationFrame(t)}cancelAnimationFrame(t){cancelAnimationFrame(t)}},KH=class{constructor(){Vt(this,"_lastHandleId",0),Vt(this,"_lastImmediate",null)}requestAnimationFrame(t){return this._lastHandleId>=Number.MAX_SAFE_INTEGER&&(this._lastHandleId=0),this._lastHandleId+=1,this._lastImmediate=setImmediate(()=>{t(Date.now())}),this._lastHandleId}cancelAnimationFrame(t){this._lastImmediate&&clearImmediate(this._lastImmediate)}},QH=class{constructor(){Vt(this,"_strategy"),this._strategy=typeof requestAnimationFrame=="function"?new YH:new KH}requestAnimationFrame(t){return this._strategy.requestAnimationFrame(t)}cancelAnimationFrame(t){this._strategy.cancelAnimationFrame(t)}},R1=typeof window<"u"&&typeof window.document<"u",T4=new Uint8Array([80,75,3,4]),ZH=["v","ip","op","layers","fr","w","h"],CO="0.49.0",EO="@lottiefiles/dotlottie-web",JH=.75,$H=4,eW=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return function(t={}){var i,r=t,s,a,n=new Promise((P,I)=>{s=P,a=I}),o=Object.assign({},r),l="./this.program",h="",c;typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),e&&(h=e),h.startsWith("blob:")?h="":h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1),c=async P=>{if(P=await fetch(P,{credentials:"same-origin"}),P.ok)return P.arrayBuffer();throw Error(P.status+" : "+P.url)};var u=r.print||console.log.bind(console),d=r.printErr||console.error.bind(console);Object.assign(r,o),o=null,r.thisProgram&&(l=r.thisProgram);var f=r.wasmBinary,p,m=!1,g,v,y,x,w,_,b,M,S;function A(){var P=p.buffer;r.HEAP8=v=new Int8Array(P),r.HEAP16=x=new Int16Array(P),r.HEAPU8=y=new Uint8Array(P),r.HEAPU16=w=new Uint16Array(P),r.HEAP32=_=new Int32Array(P),r.HEAPU32=b=new Uint32Array(P),r.HEAPF32=M=new Float32Array(P),r.HEAPF64=S=new Float64Array(P)}var C=[],T=[],D=[];function R(){var P=r.preRun.shift();C.unshift(P)}var O=0,j=null;function X(P){throw r.onAbort?.(P),P="Aborted("+P+")",d(P),m=!0,P=new WebAssembly.RuntimeError(P+". Build with -sASSERTIONS for more info."),a(P),P}var N=P=>P.startsWith("data:application/octet-stream;base64,"),k;async function ne(P){if(!f)try{var I=await c(P);return new Uint8Array(I)}catch{}if(P==k&&f)P=new Uint8Array(f);else throw"both async and sync fetching of the wasm failed";return P}async function te(P,I){try{var H=await ne(P);return await WebAssembly.instantiate(H,I)}catch(q){d(`failed to asynchronously prepare wasm: ${q}`),X(q)}}async function Q(P){var I=k;if(!f&&typeof WebAssembly.instantiateStreaming=="function"&&!N(I)&&typeof fetch=="function")try{var H=fetch(I,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(H,P)}catch(q){d(`wasm streaming compile failed: ${q}`),d("falling back to ArrayBuffer instantiation")}return te(I,P)}class Z{constructor(I){Vt(this,"name","ExitStatus"),this.message=`Program terminated with exit(${I})`,this.status=I}}var de=P=>{for(;0<P.length;)P.shift()(r)},ee=r.noExitRuntime||!0,le=typeof TextDecoder<"u"?new TextDecoder:void 0,$=(P,I=0,H=NaN)=>{var q=I+H;for(H=I;P[H]&&!(H>=q);)++H;if(16<H-I&&P.buffer&&le)return le.decode(P.subarray(I,H));for(q="";I<H;){var ce=P[I++];if(ce&128){var be=P[I++]&63;if((ce&224)==192)q+=String.fromCharCode((ce&31)<<6|be);else{var Ne=P[I++]&63;ce=(ce&240)==224?(ce&15)<<12|be<<6|Ne:(ce&7)<<18|be<<12|Ne<<6|P[I++]&63,65536>ce?q+=String.fromCharCode(ce):(ce-=65536,q+=String.fromCharCode(55296|ce>>10,56320|ce&1023))}}else q+=String.fromCharCode(ce)}return q},K=0;class J{constructor(I){this.Oa=I-24}}var se=()=>{var P=[],I=K;if(!I)return A0(0),0;var H=new J(I);b[H.Oa+16>>2]=I;var q=b[H.Oa+4>>2];if(!q)return A0(0),I;for(var ce of P){if(ce===0||ce===q)break;if(g7(ce,q,H.Oa+16))return A0(ce),I}return A0(q),I},ae=(P,I,H)=>{var q=y;if(0<H){H=I+H-1;for(var ce=0;ce<P.length;++ce){var be=P.charCodeAt(ce);if(55296<=be&&57343>=be){var Ne=P.charCodeAt(++ce);be=65536+((be&1023)<<10)|Ne&1023}if(127>=be){if(I>=H)break;q[I++]=be}else{if(2047>=be){if(I+1>=H)break;q[I++]=192|be>>6}else{if(65535>=be){if(I+2>=H)break;q[I++]=224|be>>12}else{if(I+3>=H)break;q[I++]=240|be>>18,q[I++]=128|be>>12&63}q[I++]=128|be>>6&63}q[I++]=128|be&63}}q[I]=0}},Ae={},F=P=>{for(;P.length;){var I=P.pop();P.pop()(I)}};function V(P){return this.fromWireType(b[P>>2])}var ie={},ue={},ve={},ge,_e=(P,I,H)=>{function q(ze){if(ze=H(ze),ze.length!==P.length)throw new ge("Mismatched type converter count");for(var it=0;it<P.length;++it)L(P[it],ze[it])}P.forEach(ze=>ve[ze]=I);var ce=Array(I.length),be=[],Ne=0;I.forEach((ze,it)=>{ue.hasOwnProperty(ze)?ce[it]=ue[ze]:(be.push(ze),ie.hasOwnProperty(ze)||(ie[ze]=[]),ie[ze].push(()=>{ce[it]=ue[ze],++Ne,Ne===be.length&&q(ce)}))}),be.length===0&&q(ce)},ye,Se=P=>{for(var I="";y[P];)I+=ye[y[P++]];return I},pe;function G(P,I,H={}){var q=I.name;if(!P)throw new pe(`type "${q}" must have a positive integer typeid pointer`);if(ue.hasOwnProperty(P)){if(H.ub)return;throw new pe(`Cannot register type '${q}' twice`)}ue[P]=I,delete ve[P],ie.hasOwnProperty(P)&&(I=ie[P],delete ie[P],I.forEach(ce=>ce()))}function L(P,I,H={}){return G(P,I,H)}var he=P=>{throw new pe(P.Na.Qa.Pa.name+" instance already deleted")},Ce=!1,B=()=>{},Le=(P,I,H)=>I===H?P:H.Ta===void 0?null:(P=Le(P,I,H.Ta),P===null?null:H.nb(P)),Ue={},je={},Ee=(P,I)=>{if(I===void 0)throw new pe("ptr should not be undefined");for(;P.Ta;)I=P.cb(I),P=P.Ta;return je[I]},qe=(P,I)=>{if(!I.Qa||!I.Oa)throw new ge("makeClassHandle requires ptr and ptrType");if(!!I.Ua!=!!I.Sa)throw new ge("Both smartPtrType and smartPtr must be specified");return I.count={value:1},Ge(Object.create(P,{Na:{value:I,writable:!0}}))},Ge=P=>typeof FinalizationRegistry>"u"?(Ge=I=>I,P):(Ce=new FinalizationRegistry(I=>{I=I.Na,--I.count.value,I.count.value===0&&(I.Sa?I.Ua.Xa(I.Sa):I.Qa.Pa.Xa(I.Oa))}),Ge=I=>{var H=I.Na;return H.Sa&&Ce.register(I,{Na:H},I),I},B=I=>{Ce.unregister(I)},Ge(P));function Je(){}var ot=(P,I)=>Object.defineProperty(I,"name",{value:P}),Qe=(P,I,H)=>{if(P[I].Ra===void 0){var q=P[I];P[I]=function(...ce){if(!P[I].Ra.hasOwnProperty(ce.length))throw new pe(`Function '${H}' called with an invalid number of arguments (${ce.length}) - expects one of (${P[I].Ra})!`);return P[I].Ra[ce.length].apply(this,ce)},P[I].Ra=[],P[I].Ra[q.$a]=q}},et=(P,I,H)=>{if(r.hasOwnProperty(P)){if(H===void 0||r[P].Ra!==void 0&&r[P].Ra[H]!==void 0)throw new pe(`Cannot register public name '${P}' twice`);if(Qe(r,P,P),r[P].Ra.hasOwnProperty(H))throw new pe(`Cannot register multiple overloads of a function with the same number of arguments (${H})!`);r[P].Ra[H]=I}else r[P]=I,r[P].$a=H},oi=P=>{P=P.replace(/[^a-zA-Z0-9_]/g,"$");var I=P.charCodeAt(0);return 48<=I&&57>=I?`_${P}`:P};function Mi(P,I,H,q,ce,be,Ne,ze){this.name=P,this.constructor=I,this.Za=H,this.Xa=q,this.Ta=ce,this.pb=be,this.cb=Ne,this.nb=ze,this.wb=[]}var fe=(P,I,H)=>{for(;I!==H;){if(!I.cb)throw new pe(`Expected null or instance of ${H.name}, got an instance of ${I.name}`);P=I.cb(P),I=I.Ta}return P};function Ie(P,I){if(I===null){if(this.gb)throw new pe(`null is not a valid ${this.name}`);return 0}if(!I.Na)throw new pe(`Cannot pass "${Jt(I)}" as a ${this.name}`);if(!I.Na.Oa)throw new pe(`Cannot pass deleted object as a pointer of type ${this.name}`);return fe(I.Na.Oa,I.Na.Qa.Pa,this.Pa)}function ke(P,I){if(I===null){if(this.gb)throw new pe(`null is not a valid ${this.name}`);if(this.fb){var H=this.hb();return P!==null&&P.push(this.Xa,H),H}return 0}if(!I||!I.Na)throw new pe(`Cannot pass "${Jt(I)}" as a ${this.name}`);if(!I.Na.Oa)throw new pe(`Cannot pass deleted object as a pointer of type ${this.name}`);if(!this.eb&&I.Na.Qa.eb)throw new pe(`Cannot convert argument of type ${I.Na.Ua?I.Na.Ua.name:I.Na.Qa.name} to parameter type ${this.name}`);if(H=fe(I.Na.Oa,I.Na.Qa.Pa,this.Pa),this.fb){if(I.Na.Sa===void 0)throw new pe("Passing raw pointer to smart pointer is illegal");switch(this.Bb){case 0:if(I.Na.Ua===this)H=I.Na.Sa;else throw new pe(`Cannot convert argument of type ${I.Na.Ua?I.Na.Ua.name:I.Na.Qa.name} to parameter type ${this.name}`);break;case 1:H=I.Na.Sa;break;case 2:if(I.Na.Ua===this)H=I.Na.Sa;else{var q=I.clone();H=this.xb(H,tt(()=>q.delete())),P!==null&&P.push(this.Xa,H)}break;default:throw new pe("Unsupporting sharing policy")}}return H}function Ye(P,I){if(I===null){if(this.gb)throw new pe(`null is not a valid ${this.name}`);return 0}if(!I.Na)throw new pe(`Cannot pass "${Jt(I)}" as a ${this.name}`);if(!I.Na.Oa)throw new pe(`Cannot pass deleted object as a pointer of type ${this.name}`);if(I.Na.Qa.eb)throw new pe(`Cannot convert argument of type ${I.Na.Qa.name} to parameter type ${this.name}`);return fe(I.Na.Oa,I.Na.Qa.Pa,this.Pa)}function ct(P,I,H,q,ce,be,Ne,ze,it,lt,ut){this.name=P,this.Pa=I,this.gb=H,this.eb=q,this.fb=ce,this.vb=be,this.Bb=Ne,this.lb=ze,this.hb=it,this.xb=lt,this.Xa=ut,ce||I.Ta!==void 0?this.toWireType=ke:(this.toWireType=q?Ie:Ye,this.Wa=null)}var Gt=(P,I,H)=>{if(!r.hasOwnProperty(P))throw new ge("Replacing nonexistent public symbol");r[P].Ra!==void 0&&H!==void 0?r[P].Ra[H]=I:(r[P]=I,r[P].$a=H)},qt,br=(P,I,H=[])=>(P.includes("j")?(P=P.replace(/p/g,"i"),I=(0,r["dynCall_"+P])(I,...H)):I=qt.get(I)(...H),I),Ys=(P,I)=>(...H)=>br(P,I,H),Nt=(P,I)=>{P=Se(P);var H=P.includes("j")?Ys(P,I):qt.get(I);if(typeof H!="function")throw new pe(`unknown function pointer with signature ${P}: ${I}`);return H},ls,h1=P=>{P=p7(P);var I=Se(P);return ro(P),I},Ta=(P,I)=>{function H(be){ce[be]||ue[be]||(ve[be]?ve[be].forEach(H):(q.push(be),ce[be]=!0))}var q=[],ce={};throw I.forEach(H),new ls(`${P}: `+q.map(h1).join([", "]))},Ph=(P,I)=>{for(var H=[],q=0;q<P;q++)H.push(b[I+4*q>>2]);return H};function _0(P){for(var I=1;I<P.length;++I)if(P[I]!==null&&P[I].Wa===void 0)return!0;return!1}function io(P,I,H,q,ce){var be=I.length;if(2>be)throw new pe("argTypes array size mismatch! Must at least get return value and 'this' types!");var Ne=I[1]!==null&&H!==null,ze=_0(I),it=I[0].name!=="void",lt=be-2,ut=Array(lt),Wt=[],Di=[];return ot(P,function(...Is){if(Di.length=0,Wt.length=Ne?2:1,Wt[0]=ce,Ne){var cr=I[1].toWireType(Di,this);Wt[1]=cr}for(var wr=0;wr<lt;++wr)ut[wr]=I[wr+2].toWireType(Di,Is[wr]),Wt.push(ut[wr]);if(Is=q(...Wt),ze)F(Di);else for(wr=Ne?1:2;wr<I.length;wr++){var Da=wr===1?cr:ut[wr-2];I[wr].Wa!==null&&I[wr].Wa(Da)}return cr=it?I[0].fromWireType(Is):void 0,cr})}var Y=P=>{P=P.trim();let I=P.indexOf("(");return I!==-1?P.substr(0,I):P},Me=[],Pe=[],xe=P=>{9<P&&--Pe[P+1]===0&&(Pe[P]=void 0,Me.push(P))},Oe=P=>{if(!P)throw new pe("Cannot use deleted val. handle = "+P);return Pe[P]},tt=P=>{switch(P){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let I=Me.pop()||Pe.length;return Pe[I]=P,Pe[I+1]=1,I}},St={name:"emscripten::val",fromWireType:P=>{var I=Oe(P);return xe(P),I},toWireType:(P,I)=>tt(I),Va:8,readValueFromPointer:V,Wa:null},Ct=(P,I,H)=>{switch(I){case 1:return H?function(q){return this.fromWireType(v[q])}:function(q){return this.fromWireType(y[q])};case 2:return H?function(q){return this.fromWireType(x[q>>1])}:function(q){return this.fromWireType(w[q>>1])};case 4:return H?function(q){return this.fromWireType(_[q>>2])}:function(q){return this.fromWireType(b[q>>2])};default:throw new TypeError(`invalid integer width (${I}): ${P}`)}},ht=(P,I)=>{var H=ue[P];if(H===void 0)throw P=`${I} has unknown type ${h1(P)}`,new pe(P);return H},Jt=P=>{if(P===null)return"null";var I=typeof P;return I==="object"||I==="array"||I==="function"?P.toString():""+P},kt=(P,I)=>{switch(I){case 4:return function(H){return this.fromWireType(M[H>>2])};case 8:return function(H){return this.fromWireType(S[H>>3])};default:throw new TypeError(`invalid float width (${I}): ${P}`)}},Ft=(P,I,H)=>{switch(I){case 1:return H?q=>v[q]:q=>y[q];case 2:return H?q=>x[q>>1]:q=>w[q>>1];case 4:return H?q=>_[q>>2]:q=>b[q>>2];default:throw new TypeError(`invalid integer width (${I}): ${P}`)}},Pt=Object.assign({optional:!0},St),er=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,hs=(P,I)=>{for(var H=P>>1,q=H+I/2;!(H>=q)&&w[H];)++H;if(H<<=1,32<H-P&&er)return er.decode(y.subarray(P,H));for(H="",q=0;!(q>=I/2);++q){var ce=x[P+2*q>>1];if(ce==0)break;H+=String.fromCharCode(ce)}return H},Pa=(P,I,H)=>{if(H??(H=2147483647),2>H)return 0;H-=2;var q=I;H=H<2*P.length?H/2:P.length;for(var ce=0;ce<H;++ce)x[I>>1]=P.charCodeAt(ce),I+=2;return x[I>>1]=0,I-q},Gi=P=>2*P.length,Ht=(P,I)=>{for(var H=0,q="";!(H>=I/4);){var ce=_[P+4*H>>2];if(ce==0)break;++H,65536<=ce?(ce-=65536,q+=String.fromCharCode(55296|ce>>10,56320|ce&1023)):q+=String.fromCharCode(ce)}return q},Ts=(P,I,H)=>{if(H??(H=2147483647),4>H)return 0;var q=I;H=q+H-4;for(var ce=0;ce<P.length;++ce){var be=P.charCodeAt(ce);if(55296<=be&&57343>=be){var Ne=P.charCodeAt(++ce);be=65536+((be&1023)<<10)|Ne&1023}if(_[I>>2]=be,I+=4,I+4>H)break}return _[I>>2]=0,I-q},Ut=P=>{for(var I=0,H=0;H<P.length;++H){var q=P.charCodeAt(H);55296<=q&&57343>=q&&++H,I+=4}return I},Ps=0,ln=(P,I,H)=>{var q=[];return P=P.toWireType(q,H),q.length&&(b[I>>2]=tt(q)),P},Ks=[],Qs=P=>{var I=Ks.length;return Ks.push(P),I},z=(P,I)=>{for(var H=Array(P),q=0;q<P;++q)H[q]=ht(b[I+4*q>>2],"parameter "+q);return H},U=Reflect.construct,oe={},W=P=>{if(!(P instanceof Z||P=="unwind"))throw P},me=P=>{throw g=P,ee||0<Ps||(r.onExit?.(P),m=!0),new Z(P)},Ve=P=>{if(!m)try{if(P(),!(ee||0<Ps))try{g=P=g,me(P)}catch(I){W(I)}}catch(I){W(I)}},Ds={},Qc=()=>{if(!hl){var P={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"},I;for(I in Ds)Ds[I]===void 0?delete P[I]:P[I]=Ds[I];var H=[];for(I in P)H.push(`${I}=${P[I]}`);hl=H}return hl},hl,S0=[null,[],[]],Zc=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return P=>crypto.getRandomValues(P);X("initRandomDevice")},Jc=P=>(Jc=Zc())(P);ge=r.InternalError=class extends Error{constructor(P){super(P),this.name="InternalError"}};for(var f7=Array(256),Pf=0;256>Pf;++Pf)f7[Pf]=String.fromCharCode(Pf);ye=f7,pe=r.BindingError=class extends Error{constructor(P){super(P),this.name="BindingError"}},Object.assign(Je.prototype,{isAliasOf:function(P){if(!(this instanceof Je&&P instanceof Je))return!1;var I=this.Na.Qa.Pa,H=this.Na.Oa;P.Na=P.Na;var q=P.Na.Qa.Pa;for(P=P.Na.Oa;I.Ta;)H=I.cb(H),I=I.Ta;for(;q.Ta;)P=q.cb(P),q=q.Ta;return I===q&&H===P},clone:function(){if(this.Na.Oa||he(this),this.Na.bb)return this.Na.count.value+=1,this;var P=Ge,I=Object,H=I.create,q=Object.getPrototypeOf(this),ce=this.Na;return P=P(H.call(I,q,{Na:{value:{count:ce.count,ab:ce.ab,bb:ce.bb,Oa:ce.Oa,Qa:ce.Qa,Sa:ce.Sa,Ua:ce.Ua}}})),P.Na.count.value+=1,P.Na.ab=!1,P},delete(){if(this.Na.Oa||he(this),this.Na.ab&&!this.Na.bb)throw new pe("Object already scheduled for deletion");B(this);var P=this.Na;--P.count.value,P.count.value===0&&(P.Sa?P.Ua.Xa(P.Sa):P.Qa.Pa.Xa(P.Oa)),this.Na.bb||(this.Na.Sa=void 0,this.Na.Oa=void 0)},isDeleted:function(){return!this.Na.Oa},deleteLater:function(){if(this.Na.Oa||he(this),this.Na.ab&&!this.Na.bb)throw new pe("Object already scheduled for deletion");return this.Na.ab=!0,this}}),Object.assign(ct.prototype,{qb(P){return this.lb&&(P=this.lb(P)),P},jb(P){this.Xa?.(P)},Va:8,readValueFromPointer:V,fromWireType:function(P){function I(){return this.fb?qe(this.Pa.Za,{Qa:this.vb,Oa:H,Ua:this,Sa:P}):qe(this.Pa.Za,{Qa:this,Oa:P})}var H=this.qb(P);if(!H)return this.jb(P),null;var q=Ee(this.Pa,H);if(q!==void 0)return q.Na.count.value===0?(q.Na.Oa=H,q.Na.Sa=P,q.clone()):(q=q.clone(),this.jb(P),q);if(q=this.Pa.pb(H),q=Ue[q],!q)return I.call(this);q=this.eb?q.mb:q.pointerType;var ce=Le(H,this.Pa,q.Pa);return ce===null?I.call(this):this.fb?qe(q.Pa.Za,{Qa:q,Oa:ce,Ua:this,Sa:P}):qe(q.Pa.Za,{Qa:q,Oa:ce})}}),ls=r.UnboundTypeError=((P,I)=>{var H=ot(I,function(q){this.name=I,this.message=q,q=Error(q).stack,q!==void 0&&(this.stack=this.toString()+`
`+q.replace(/^Error(:[^\n]*)?\n/,""))});return H.prototype=Object.create(P.prototype),H.prototype.constructor=H,H.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},H})(Error,"UnboundTypeError"),Pe.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=()=>Pe.length/2-5-Me.length;var jU={c:(P,I,H,q)=>X(`Assertion failed: ${P?$(y,P):""}, at: `+[I?I?$(y,I):"":"unknown filename",H,q?q?$(y,q):"":"unknown function"]),d:()=>se(),n:(P,I,H)=>{var q=new J(P);throw b[q.Oa+16>>2]=0,b[q.Oa+4>>2]=I,b[q.Oa+8>>2]=H,K=P,K},e:P=>{throw K||(K=P),K},S:()=>{},P:()=>{},Q:()=>{},U:function(){},R:()=>{},W:()=>X(""),w:P=>{var I=Ae[P];delete Ae[P];var H=I.hb,q=I.Xa,ce=I.kb,be=ce.map(Ne=>Ne.tb).concat(ce.map(Ne=>Ne.zb));_e([P],be,Ne=>{var ze={};return ce.forEach((it,lt)=>{var ut=Ne[lt],Wt=it.rb,Di=it.sb,Is=Ne[lt+ce.length],cr=it.yb,wr=it.Ab;ze[it.ob]={read:Da=>ut.fromWireType(Wt(Di,Da)),write:(Da,M0)=>{var Os=[];cr(wr,Da,Is.toWireType(Os,M0)),F(Os)}}}),[{name:I.name,fromWireType:it=>{var lt={},ut;for(ut in ze)lt[ut]=ze[ut].read(it);return q(it),lt},toWireType:(it,lt)=>{for(var ut in ze)if(!(ut in lt))throw new TypeError(`Missing field: "${ut}"`);var Wt=H();for(ut in ze)ze[ut].write(Wt,lt[ut]);return it!==null&&it.push(q,Wt),Wt},Va:8,readValueFromPointer:V,Wa:q}]})},H:()=>{},ea:(P,I,H,q)=>{I=Se(I),L(P,{name:I,fromWireType:function(ce){return!!ce},toWireType:function(ce,be){return be?H:q},Va:8,readValueFromPointer:function(ce){return this.fromWireType(y[ce])},Wa:null})},u:(P,I,H,q,ce,be,Ne,ze,it,lt,ut,Wt,Di)=>{ut=Se(ut),be=Nt(ce,be),ze&&(ze=Nt(Ne,ze)),lt&&(lt=Nt(it,lt)),Di=Nt(Wt,Di);var Is=oi(ut);et(Is,function(){Ta(`Cannot construct ${ut} due to unbound types`,[q])}),_e([P,I,H],q?[q]:[],cr=>{if(cr=cr[0],q)var wr=cr.Pa,Da=wr.Za;else Da=Je.prototype;cr=ot(ut,function(...p4){if(Object.getPrototypeOf(this)!==M0)throw new pe("Use 'new' to construct "+ut);if(Os.Ya===void 0)throw new pe(ut+" has no accessible constructor");var x7=Os.Ya[p4.length];if(x7===void 0)throw new pe(`Tried to invoke ctor of ${ut} with invalid number of parameters (${p4.length}) - expected (${Object.keys(Os.Ya).toString()}) parameters instead!`);return x7.apply(this,p4)});var M0=Object.create(Da,{constructor:{value:cr}});cr.prototype=M0;var Os=new Mi(ut,cr,M0,Di,wr,be,ze,lt);if(Os.Ta){var C0;(C0=Os.Ta).ib??(C0.ib=[]),Os.Ta.ib.push(Os)}return wr=new ct(ut,Os,!0,!1,!1),C0=new ct(ut+"*",Os,!1,!1,!1),Da=new ct(ut+" const*",Os,!1,!0,!1),Ue[P]={pointerType:C0,mb:Da},Gt(Is,cr),[wr,C0,Da]})},t:(P,I,H,q,ce,be)=>{var Ne=Ph(I,H);ce=Nt(q,ce),_e([],[P],ze=>{ze=ze[0];var it=`constructor ${ze.name}`;if(ze.Pa.Ya===void 0&&(ze.Pa.Ya=[]),ze.Pa.Ya[I-1]!==void 0)throw new pe(`Cannot register multiple constructors with identical number of parameters (${I-1}) for class '${ze.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return ze.Pa.Ya[I-1]=()=>{Ta(`Cannot construct ${ze.name} due to unbound types`,Ne)},_e([],Ne,lt=>(lt.splice(1,0,null),ze.Pa.Ya[I-1]=io(it,lt,null,ce,be),[])),[]})},h:(P,I,H,q,ce,be,Ne,ze)=>{var it=Ph(H,q);I=Se(I),I=Y(I),be=Nt(ce,be),_e([],[P],lt=>{function ut(){Ta(`Cannot call ${Wt} due to unbound types`,it)}lt=lt[0];var Wt=`${lt.name}.${I}`;I.startsWith("@@")&&(I=Symbol[I.substring(2)]),ze&&lt.Pa.wb.push(I);var Di=lt.Pa.Za,Is=Di[I];return Is===void 0||Is.Ra===void 0&&Is.className!==lt.name&&Is.$a===H-2?(ut.$a=H-2,ut.className=lt.name,Di[I]=ut):(Qe(Di,I,Wt),Di[I].Ra[H-2]=ut),_e([],it,cr=>(cr=io(Wt,cr,lt,be,Ne),Di[I].Ra===void 0?(cr.$a=H-2,Di[I]=cr):Di[I].Ra[H-2]=cr,[])),[]})},ca:P=>L(P,St),y:(P,I,H,q)=>{function ce(){}I=Se(I),ce.values={},L(P,{name:I,constructor:ce,fromWireType:function(be){return this.constructor.values[be]},toWireType:(be,Ne)=>Ne.value,Va:8,readValueFromPointer:Ct(I,H,q),Wa:null}),et(I,ce)},l:(P,I,H)=>{var q=ht(P,"enum");I=Se(I),P=q.constructor,q=Object.create(q.constructor.prototype,{value:{value:H},constructor:{value:ot(`${q.name}_${I}`,function(){})}}),P.values[H]=q,P[I]=q},E:(P,I,H)=>{I=Se(I),L(P,{name:I,fromWireType:q=>q,toWireType:(q,ce)=>ce,Va:8,readValueFromPointer:kt(I,H),Wa:null})},v:(P,I,H,q,ce,be)=>{var Ne=Ph(I,H);P=Se(P),P=Y(P),ce=Nt(q,ce),et(P,function(){Ta(`Cannot call ${P} due to unbound types`,Ne)},I-1),_e([],Ne,ze=>(Gt(P,io(P,[ze[0],null].concat(ze.slice(1)),null,ce,be),I-1),[]))},p:(P,I,H,q,ce)=>{if(I=Se(I),ce===-1&&(ce=4294967295),ce=ze=>ze,q===0){var be=32-8*H;ce=ze=>ze<<be>>>be}var Ne=I.includes("unsigned")?function(ze,it){return it>>>0}:function(ze,it){return it};L(P,{name:I,fromWireType:ce,toWireType:Ne,Va:8,readValueFromPointer:Ft(I,H,q!==0),Wa:null})},k:(P,I,H)=>{function q(be){return new ce(v.buffer,b[be+4>>2],b[be>>2])}var ce=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][I];H=Se(H),L(P,{name:H,fromWireType:q,Va:8,readValueFromPointer:q},{ub:!0})},x:P=>{L(P,Pt)},ka:(P,I,H,q,ce,be,Ne,ze,it,lt,ut,Wt)=>{H=Se(H),be=Nt(ce,be),ze=Nt(Ne,ze),lt=Nt(it,lt),Wt=Nt(ut,Wt),_e([P],[I],Di=>(Di=Di[0],[new ct(H,Di.Pa,!1,!1,!0,Di,q,be,ze,lt,Wt)]))},da:(P,I)=>{I=Se(I),L(P,{name:I,fromWireType:function(H){for(var q=b[H>>2],ce=H+4,be,Ne=ce,ze=0;ze<=q;++ze){var it=ce+ze;(ze==q||y[it]==0)&&(Ne=Ne?$(y,Ne,it-Ne):"",be===void 0?be=Ne:(be+="\0",be+=Ne),Ne=it+1)}return ro(H),be},toWireType:function(H,q){q instanceof ArrayBuffer&&(q=new Uint8Array(q));var ce,be=typeof q=="string";if(!(be||q instanceof Uint8Array||q instanceof Uint8ClampedArray||q instanceof Int8Array))throw new pe("Cannot pass non-string to std::string");if(be)for(var Ne=ce=0;Ne<q.length;++Ne){var ze=q.charCodeAt(Ne);127>=ze?ce++:2047>=ze?ce+=2:55296<=ze&&57343>=ze?(ce+=4,++Ne):ce+=3}else ce=q.length;if(Ne=f4(4+ce+1),ze=Ne+4,b[Ne>>2]=ce,be)ae(q,ze,ce+1);else if(be)for(be=0;be<ce;++be){var it=q.charCodeAt(be);if(255<it)throw ro(ze),new pe("String has UTF-16 code units that do not fit in 8 bits");y[ze+be]=it}else for(be=0;be<ce;++be)y[ze+be]=q[be];return H!==null&&H.push(ro,Ne),Ne},Va:8,readValueFromPointer:V,Wa(H){ro(H)}})},A:(P,I,H)=>{if(H=Se(H),I===2)var q=hs,ce=Pa,be=Gi,Ne=ze=>w[ze>>1];else I===4&&(q=Ht,ce=Ts,be=Ut,Ne=ze=>b[ze>>2]);L(P,{name:H,fromWireType:ze=>{for(var it=b[ze>>2],lt,ut=ze+4,Wt=0;Wt<=it;++Wt){var Di=ze+4+Wt*I;(Wt==it||Ne(Di)==0)&&(ut=q(ut,Di-ut),lt===void 0?lt=ut:(lt+="\0",lt+=ut),ut=Di+I)}return ro(ze),lt},toWireType:(ze,it)=>{if(typeof it!="string")throw new pe(`Cannot pass non-string to C++ string type ${H}`);var lt=be(it),ut=f4(4+lt+I);return b[ut>>2]=lt/I,ce(it,ut+4,lt+I),ze!==null&&ze.push(ro,ut),ut},Va:8,readValueFromPointer:V,Wa(ze){ro(ze)}})},s:(P,I,H,q,ce,be)=>{Ae[P]={name:Se(I),hb:Nt(H,q),Xa:Nt(ce,be),kb:[]}},m:(P,I,H,q,ce,be,Ne,ze,it,lt)=>{Ae[P].kb.push({ob:Se(I),tb:H,rb:Nt(q,ce),sb:be,zb:Ne,yb:Nt(ze,it),Ab:lt})},fa:(P,I)=>{I=Se(I),L(P,{Cb:!0,name:I,Va:0,fromWireType:()=>{},toWireType:()=>{}})},N:()=>{ee=!1,Ps=0},I:()=>{throw 1/0},F:(P,I,H)=>(P=Oe(P),I=ht(I,"emval::as"),ln(I,H,P)),ia:(P,I,H,q)=>(P=Ks[P],I=Oe(I),P(null,I,H,q)),L:xe,ha:(P,I,H)=>{var q=z(P,I),ce=q.shift();P--;var be=Array(P);return I=`methodCaller<(${q.map(Ne=>Ne.name).join(", ")}) => ${ce.name}>`,Qs(ot(I,(Ne,ze,it,lt)=>{for(var ut=0,Wt=0;Wt<P;++Wt)be[Wt]=q[Wt].readValueFromPointer(lt+ut),ut+=q[Wt].Va;return Ne=H===1?U(ze,be):ze.apply(Ne,be),ln(ce,it,Ne)}))},ja:P=>{9<P&&(Pe[P+1]+=1)},ga:P=>{var I=Oe(P);F(I),xe(P)},r:(P,I)=>(P=ht(P,"_emval_take_value"),P=P.readValueFromPointer(I),tt(P)),J:(P,I)=>{if(oe[P]&&(clearTimeout(oe[P].id),delete oe[P]),!I)return 0;var H=setTimeout(()=>{delete oe[P],Ve(()=>m7(P,performance.now()))},I);return oe[P]={id:H,Db:I},0},K:(P,I,H,q)=>{var ce=new Date().getFullYear(),be=new Date(ce,0,1).getTimezoneOffset();ce=new Date(ce,6,1).getTimezoneOffset(),b[P>>2]=60*Math.max(be,ce),_[I>>2]=+(be!=ce),I=Ne=>{var ze=Math.abs(Ne);return`UTC${0<=Ne?"-":"+"}${String(Math.floor(ze/60)).padStart(2,"0")}${String(ze%60).padStart(2,"0")}`},P=I(be),I=I(ce),ce<be?(ae(P,H,17),ae(I,q,17)):(ae(P,q,17),ae(I,H,17))},ba:()=>performance.now(),M:P=>{var I=y.length;if(P>>>=0,2147483648<P)return!1;for(var H=1;4>=H;H*=2){var q=I*(1+.2/H);q=Math.min(q,P+100663296);e:{q=(Math.min(2147483648,65536*Math.ceil(Math.max(P,q)/65536))-p.buffer.byteLength+65535)/65536|0;try{p.grow(q),A();var ce=1;break e}catch{}ce=void 0}if(ce)return!0}return!1},Y:(P,I)=>{var H=0;return Qc().forEach((q,ce)=>{var be=I+H;for(ce=b[P+4*ce>>2]=be,be=0;be<q.length;++be)v[ce++]=q.charCodeAt(be);v[ce]=0,H+=q.length+1}),0},Z:(P,I)=>{var H=Qc();b[P>>2]=H.length;var q=0;return H.forEach(ce=>q+=ce.length+1),b[I>>2]=q,0},V:()=>52,T:()=>52,B:(P,I,H,q)=>{for(var ce=0,be=0;be<H;be++){var Ne=b[I>>2],ze=b[I+4>>2];I+=8;for(var it=0;it<ze;it++){var lt=P,ut=y[Ne+it],Wt=S0[lt];ut===0||ut===10?((lt===1?u:d)($(Wt)),Wt.length=0):Wt.push(ut)}ce+=ze}return b[q>>2]=ce,0},$:tV,_:iV,j:XU,i:$U,g:JU,aa:HU,z:eV,C:ZU,D:KU,a:GU,b:WU,f:qU,o:QU,q:YU,G:rV,X:me,O:(P,I)=>(Jc(y.subarray(P,P+I)),0)},pi;(async function(){function P(q){return pi=q.exports,p=pi.la,A(),qt=pi.qa,T.unshift(pi.ma),O--,r.monitorRunDependencies?.(O),O==0&&j&&(q=j,j=null,q()),pi}O++,r.monitorRunDependencies?.(O);var I={a:jU};if(r.instantiateWasm)try{return r.instantiateWasm(I,P)}catch(q){d(`Module.instantiateWasm callback failed with error: ${q}`),a(q)}k??(k=N("DotLottiePlayer.wasm")?"DotLottiePlayer.wasm":r.locateFile?r.locateFile("DotLottiePlayer.wasm",h):h+"DotLottiePlayer.wasm");try{var H=await Q(I);return P(H.instance),H}catch(q){a(q)}})();var f4=P=>(f4=pi.na)(P),p7=P=>(p7=pi.oa)(P),ro=P=>(ro=pi.pa)(P),m7=(P,I)=>(m7=pi.ra)(P,I),E1=(P,I)=>(E1=pi.sa)(P,I),A0=P=>(A0=pi.ta)(P),T1=P=>(T1=pi.ua)(P),P1=()=>(P1=pi.va)(),g7=(P,I,H)=>(g7=pi.wa)(P,I,H);r.dynCall_iijj=(P,I,H,q,ce,be)=>(r.dynCall_iijj=pi.xa)(P,I,H,q,ce,be),r.dynCall_vijj=(P,I,H,q,ce,be)=>(r.dynCall_vijj=pi.ya)(P,I,H,q,ce,be),r.dynCall_jiii=(P,I,H,q)=>(r.dynCall_jiii=pi.za)(P,I,H,q);var v7=r.dynCall_vijjjj=(P,I,H,q,ce,be,Ne,ze,it,lt)=>(v7=r.dynCall_vijjjj=pi.Aa)(P,I,H,q,ce,be,Ne,ze,it,lt);r.dynCall_jii=(P,I,H)=>(r.dynCall_jii=pi.Ba)(P,I,H),r.dynCall_vjii=(P,I,H,q,ce)=>(r.dynCall_vjii=pi.Ca)(P,I,H,q,ce),r.dynCall_vjfii=(P,I,H,q,ce,be)=>(r.dynCall_vjfii=pi.Da)(P,I,H,q,ce,be),r.dynCall_vjiii=(P,I,H,q,ce,be)=>(r.dynCall_vjiii=pi.Ea)(P,I,H,q,ce,be),r.dynCall_vj=(P,I,H)=>(r.dynCall_vj=pi.Fa)(P,I,H),r.dynCall_vjiiiii=(P,I,H,q,ce,be,Ne,ze)=>(r.dynCall_vjiiiii=pi.Ga)(P,I,H,q,ce,be,Ne,ze),r.dynCall_vjiffii=(P,I,H,q,ce,be,Ne,ze)=>(r.dynCall_vjiffii=pi.Ha)(P,I,H,q,ce,be,Ne,ze),r.dynCall_vjiiii=(P,I,H,q,ce,be,Ne)=>(r.dynCall_vjiiii=pi.Ia)(P,I,H,q,ce,be,Ne),r.dynCall_viijii=(P,I,H,q,ce,be,Ne)=>(r.dynCall_viijii=pi.Ja)(P,I,H,q,ce,be,Ne),r.dynCall_iiiiij=(P,I,H,q,ce,be,Ne)=>(r.dynCall_iiiiij=pi.Ka)(P,I,H,q,ce,be,Ne),r.dynCall_iiiiijj=(P,I,H,q,ce,be,Ne,ze,it)=>(r.dynCall_iiiiijj=pi.La)(P,I,H,q,ce,be,Ne,ze,it),r.dynCall_iiiiiijj=(P,I,H,q,ce,be,Ne,ze,it,lt)=>(r.dynCall_iiiiiijj=pi.Ma)(P,I,H,q,ce,be,Ne,ze,it,lt);function GU(P,I){var H=P1();try{qt.get(P)(I)}catch(q){if(T1(H),q!==q+0)throw q;E1(1,0)}}function HU(P,I,H,q,ce){var be=P1();try{return qt.get(P)(I,H,q,ce)}catch(Ne){if(T1(be),Ne!==Ne+0)throw Ne;E1(1,0)}}function WU(P,I,H){var q=P1();try{qt.get(P)(I,H)}catch(ce){if(T1(q),ce!==ce+0)throw ce;E1(1,0)}}function qU(P,I,H,q){var ce=P1();try{qt.get(P)(I,H,q)}catch(be){if(T1(ce),be!==be+0)throw be;E1(1,0)}}function XU(P,I){var H=P1();try{return qt.get(P)(I)}catch(q){if(T1(H),q!==q+0)throw q;E1(1,0)}}function YU(P,I,H,q,ce,be){var Ne=P1();try{qt.get(P)(I,H,q,ce,be)}catch(ze){if(T1(Ne),ze!==ze+0)throw ze;E1(1,0)}}function KU(P){var I=P1();try{qt.get(P)()}catch(H){if(T1(I),H!==H+0)throw H;E1(1,0)}}function QU(P,I,H,q,ce){var be=P1();try{qt.get(P)(I,H,q,ce)}catch(Ne){if(T1(be),Ne!==Ne+0)throw Ne;E1(1,0)}}function ZU(P,I,H,q,ce,be,Ne,ze){var it=P1();try{return qt.get(P)(I,H,q,ce,be,Ne,ze)}catch(lt){if(T1(it),lt!==lt+0)throw lt;E1(1,0)}}function JU(P,I,H,q){var ce=P1();try{return qt.get(P)(I,H,q)}catch(be){if(T1(ce),be!==be+0)throw be;E1(1,0)}}function $U(P,I,H){var q=P1();try{return qt.get(P)(I,H)}catch(ce){if(T1(q),ce!==ce+0)throw ce;E1(1,0)}}function eV(P,I,H,q,ce,be){var Ne=P1();try{return qt.get(P)(I,H,q,ce,be)}catch(ze){if(T1(Ne),ze!==ze+0)throw ze;E1(1,0)}}function tV(P,I){var H=P1();try{return qt.get(P)(I)}catch(q){if(T1(H),q!==q+0)throw q;E1(1,0)}}function iV(P,I,H,q){var ce=P1();try{return qt.get(P)(I,H,q)}catch(be){if(T1(ce),be!==be+0)throw be;E1(1,0)}}function rV(P,I,H,q,ce,be,Ne,ze,it,lt){var ut=P1();try{v7(P,I,H,q,ce,be,Ne,ze,it,lt)}catch(Wt){if(T1(ut),Wt!==Wt+0)throw Wt;E1(1,0)}}var Df;j=function P(){Df||y7(),Df||(j=P)};function y7(){function P(){if(!Df&&(Df=!0,r.calledRun=!0,!m)){if(de(T),s(r),r.onRuntimeInitialized?.(),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var I=r.postRun.shift();D.unshift(I)}de(D)}}if(!(0<O)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)R();de(C),0<O||(r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),P()},1)):P())}}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();return y7(),i=n,i}})(),tW=eW,Jm=class{constructor(){throw new Error("RendererLoader is a static class and cannot be instantiated.")}static async _tryLoad(e){return await tW({locateFile:()=>e})}static async _loadWithBackup(){return this._ModulePromise||(this._ModulePromise=this._tryLoad(this._wasmURL).catch(async e=>{let t=`https://unpkg.com/${EO}@${CO}/dist/dotlottie-player.wasm`;console.warn(`Primary WASM load failed from ${this._wasmURL}. Error: ${e.message}`),console.warn(`Attempting to load WASM from backup URL: ${t}`);try{return await this._tryLoad(t)}catch(i){throw console.error(`Primary WASM URL failed: ${e.message}`),console.error(`Backup WASM URL failed: ${i.message}`),new Error("WASM loading failed from all sources.")}})),this._ModulePromise}static async load(){return this._loadWithBackup()}static setWasmUrl(e){e!==this._wasmURL&&(this._wasmURL=e,this._ModulePromise=null)}};Vt(Jm,"_ModulePromise",null),Vt(Jm,"_wasmURL",`https://cdn.jsdelivr.net/npm/${EO}@${CO}/dist/dotlottie-player.wasm`);var TO=class{constructor(){Vt(this,"_eventListeners",new Map)}addEventListener(t,i){let r=this._eventListeners.get(t);r||(r=new Set,this._eventListeners.set(t,r)),r.add(i)}removeEventListener(t,i){let r=this._eventListeners.get(t);r&&(i?(r.delete(i),r.size===0&&this._eventListeners.delete(t)):this._eventListeners.delete(t))}dispatch(t){this._eventListeners.get(t.type)?.forEach(i=>i(t))}removeAllEventListeners(){this._eventListeners.clear()}},Bn=class{static _initializeObserver(){if(this._observer)return;let e=t=>{t.forEach(i=>{let r=this._observedCanvases.get(i.target);r&&(i.isIntersecting?r.unfreeze():r.freeze())})};this._observer=new IntersectionObserver(e,{threshold:0})}static observe(e,t){this._initializeObserver(),!this._observedCanvases.has(e)&&(this._observedCanvases.set(e,t),this._observer?.observe(e))}static unobserve(e){this._observer?.unobserve(e),this._observedCanvases.delete(e),this._observedCanvases.size===0&&(this._observer?.disconnect(),this._observer=null)}};Vt(Bn,"_observer",null),Vt(Bn,"_observedCanvases",new Map);var kn=class{static _initializeObserver(){if(this._observer)return;let e=t=>{t.forEach(i=>{let r=this._observedCanvases.get(i.target);if(!r)return;let[s,a]=r;clearTimeout(a);let n=setTimeout(()=>{s.resize()},100);this._observedCanvases.set(i.target,[s,n])})};this._observer=new ResizeObserver(e)}static observe(e,t){this._initializeObserver(),!this._observedCanvases.has(e)&&(this._observedCanvases.set(e,[t,0]),this._observer?.observe(e))}static unobserve(e){let t=this._observedCanvases.get(e);if(t){let i=t[1];i&&clearTimeout(i)}this._observer?.unobserve(e),this._observedCanvases.delete(e),!this._observedCanvases.size&&this._observer&&(this._observer.disconnect(),this._observer=null)}};Vt(kn,"_observer",null),Vt(kn,"_observedCanvases",new Map);function iW(e){return/^#([\da-f]{6}|[\da-f]{8})$/iu.test(e)}function rW(e){if(!iW(e))return 0;let t=e.replace("#","");return t=t.length===6?`${t}ff`:t,parseInt(t,16)}function SS(e){if(e.byteLength<4)return!1;let t=new Uint8Array(e.slice(0,T4.byteLength));for(let i=0;i<T4.length;i+=1)if(T4[i]!==t[i])return!1;return!0}function AS(e){return ZH.every(t=>Object.prototype.hasOwnProperty.call(e,t))}function MS(e){if(typeof e=="string")try{return AS(JSON.parse(e))}catch{return!1}else return AS(e)}function $h(){return 1+((R1?window.devicePixelRatio:1)-1)*JH}function PO(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}var P4=(e,t)=>e==="reverse"?t.Mode.Reverse:e==="bounce"?t.Mode.Bounce:e==="reverse-bounce"?t.Mode.ReverseBounce:t.Mode.Forward,sW=(e,t)=>e==="contain"?t.Fit.Contain:e==="cover"?t.Fit.Cover:e==="fill"?t.Fit.Fill:e==="fit-height"?t.Fit.FitHeight:e==="fit-width"?t.Fit.FitWidth:t.Fit.None,aW=(e,t)=>{let i=new t.VectorFloat;return i.push_back(e[0]),i.push_back(e[1]),i},D4=(e,t)=>{let i=new t.VectorFloat;return e.length!==2||(i.push_back(e[0]),i.push_back(e[1])),i},I4=(e,t)=>e?{align:aW(e.align??[.5,.5],t),fit:sW(e.fit??"contain",t)}:t.createDefaultLayout(),DO=class Ci{constructor(t){Vt(this,"_canvas"),Vt(this,"_context",null),Vt(this,"_eventManager"),Vt(this,"_animationFrameId",null),Vt(this,"_frameManager"),Vt(this,"_dotLottieCore",null),Vt(this,"_renderConfig",{}),Vt(this,"_isFrozen",!1),Vt(this,"_backgroundColor",null),Vt(this,"_pointerUpMethod"),Vt(this,"_pointerDownMethod"),Vt(this,"_pointerMoveMethod"),Vt(this,"_pointerEnterMethod"),Vt(this,"_pointerExitMethod"),this._canvas=t.canvas,this._eventManager=new TO,this._frameManager=new QH,this._renderConfig={...t.renderConfig,devicePixelRatio:t.renderConfig?.devicePixelRatio||$h(),freezeOnOffscreen:t.renderConfig?.freezeOnOffscreen??!0},Jm.load().then(i=>{Ci._wasmModule=i,this._dotLottieCore=new i.DotLottiePlayer({animationId:t.animationId??"",themeId:t.themeId??"",stateMachineId:"",autoplay:t.autoplay??!1,backgroundColor:0,loopAnimation:t.loop??!1,mode:P4(t.mode??"forward",i),segment:D4(t.segment??[],i),speed:t.speed??1,useFrameInterpolation:t.useFrameInterpolation??!0,marker:t.marker??"",layout:I4(t.layout,i)}),this._eventManager.dispatch({type:"ready"}),t.data?this._loadFromData(t.data):t.src&&this._loadFromSrc(t.src),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor)}).catch(i=>{this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to load wasm module: ${i}`)})}),this._pointerUpMethod=this._onPointerUp.bind(this),this._pointerDownMethod=this._onPointerDown.bind(this),this._pointerMoveMethod=this._onPointerMove.bind(this),this._pointerEnterMethod=this._onPointerEnter.bind(this),this._pointerExitMethod=this._onPointerLeave.bind(this)}_dispatchError(t){console.error(t),this._eventManager.dispatch({type:"loadError",error:new Error(t)})}async _fetchData(t){let i=await fetch(t);if(!i.ok)throw new Error(`Failed to fetch animation data from URL: ${t}. ${i.status}: ${i.statusText}`);let r=await i.arrayBuffer();return SS(r)?r:new TextDecoder().decode(r)}_loadFromData(t){if(this._dotLottieCore===null)return;let i=this._canvas.width,r=this._canvas.height,s=!1;if(typeof t=="string"){if(!MS(t)){this._dispatchError("Invalid Lottie JSON string: The provided string does not conform to the Lottie JSON format.");return}s=this._dotLottieCore.loadAnimationData(t,i,r)}else if(t instanceof ArrayBuffer){if(!SS(t)){this._dispatchError("Invalid dotLottie ArrayBuffer: The provided ArrayBuffer does not conform to the dotLottie format.");return}s=this._dotLottieCore.loadDotLottieData(t,i,r)}else if(typeof t=="object"){if(!MS(t)){this._dispatchError("Invalid Lottie JSON object: The provided object does not conform to the Lottie JSON format.");return}s=this._dotLottieCore.loadAnimationData(JSON.stringify(t),i,r)}else{this._dispatchError(`Unsupported data type for animation data. Expected: 
          - string (Lottie JSON),
          - ArrayBuffer (dotLottie),
          - object (Lottie JSON). 
          Received: ${typeof t}`);return}s?(this._eventManager.dispatch({type:"load"}),R1&&this.resize(),this._eventManager.dispatch({type:"frame",currentFrame:this.currentFrame}),this._render(),this._dotLottieCore.config().autoplay&&(this._dotLottieCore.play(),this._dotLottieCore.isPlaying()?(this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))):console.error("something went wrong, the animation was suppose to autoplay")),R1&&this._canvas instanceof HTMLCanvasElement&&(this._renderConfig.freezeOnOffscreen&&Bn.observe(this._canvas,this),this._renderConfig.autoResize&&kn.observe(this._canvas,this))):this._dispatchError("Failed to load animation data")}_loadFromSrc(t){this._fetchData(t).then(i=>this._loadFromData(i)).catch(i=>this._dispatchError(`Failed to load animation data from URL: ${t}. ${i}`))}get buffer(){return this._dotLottieCore?this._dotLottieCore.buffer():null}get activeAnimationId(){return this._dotLottieCore?.activeAnimationId()}get activeThemeId(){return this._dotLottieCore?.activeThemeId()}get layout(){let t=this._dotLottieCore?.config().layout;if(t)return{align:[t.align.get(0),t.align.get(1)],fit:(()=>{switch(t.fit){case Ci._wasmModule?.Fit.Contain:return"contain";case Ci._wasmModule?.Fit.Cover:return"cover";case Ci._wasmModule?.Fit.Fill:return"fill";case Ci._wasmModule?.Fit.FitHeight:return"fit-height";case Ci._wasmModule?.Fit.FitWidth:return"fit-width";case Ci._wasmModule?.Fit.None:return"none";default:return"contain"}})()}}get marker(){return this._dotLottieCore?.config().marker}get manifest(){try{let t=this._dotLottieCore?.manifestString();if(this._dotLottieCore===null||!t)return null;let i=JSON.parse(t);return Object.keys(i).length===0?null:i}catch{return null}}get renderConfig(){return this._renderConfig}get segment(){let t=this._dotLottieCore?.config().segment;if(t&&t.size()===2)return[t.get(0),t.get(1)]}get loop(){return this._dotLottieCore?.config().loopAnimation??!1}get mode(){let t=this._dotLottieCore?.config().mode;return t===Ci._wasmModule?.Mode.Reverse?"reverse":t===Ci._wasmModule?.Mode.Bounce?"bounce":t===Ci._wasmModule?.Mode.ReverseBounce?"reverse-bounce":"forward"}get isFrozen(){return this._isFrozen}get backgroundColor(){return this._backgroundColor??""}get autoplay(){return this._dotLottieCore?.config().autoplay??!1}get useFrameInterpolation(){return this._dotLottieCore?.config().useFrameInterpolation??!1}get speed(){return this._dotLottieCore?.config().speed??0}get isReady(){return this._dotLottieCore!==null}get isLoaded(){return this._dotLottieCore?.isLoaded()??!1}get isPlaying(){return this._dotLottieCore?.isPlaying()??!1}get isPaused(){return this._dotLottieCore?.isPaused()??!1}get isStopped(){return this._dotLottieCore?.isStopped()??!1}get currentFrame(){return this._dotLottieCore?Math.round(this._dotLottieCore.currentFrame()*100)/100:0}get loopCount(){return this._dotLottieCore?.loopCount()??0}get totalFrames(){return this._dotLottieCore?.totalFrames()??0}get duration(){return this._dotLottieCore?.duration()??0}get segmentDuration(){return this._dotLottieCore?.segmentDuration()??0}get canvas(){return this._canvas}load(t){this._dotLottieCore===null||Ci._wasmModule===null||(this._animationFrameId!==null&&(this._frameManager.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null),this._isFrozen=!1,this._dotLottieCore.setConfig({animationId:t.animationId??"",themeId:t.themeId??"",stateMachineId:"",autoplay:t.autoplay??!1,backgroundColor:0,loopAnimation:t.loop??!1,mode:P4(t.mode??"forward",Ci._wasmModule),segment:D4(t.segment??[],Ci._wasmModule),speed:t.speed??1,useFrameInterpolation:t.useFrameInterpolation??!0,marker:t.marker??"",layout:I4(t.layout,Ci._wasmModule)}),t.data?this._loadFromData(t.data):t.src&&this._loadFromSrc(t.src),this.setBackgroundColor(t.backgroundColor??""))}_render(){if(this._dotLottieCore===null)return!1;if(!this._context&&"getContext"in this._canvas&&typeof this._canvas.getContext=="function"&&(this._context=this._canvas.getContext("2d")),this._dotLottieCore.render()){if(this._context){let t=this._dotLottieCore.buffer(),i=this._canvas.width*this._canvas.height*$H;if(t.byteLength!==i)return console.warn(`Buffer size mismatch: got ${t.byteLength}, expected ${i}`),!1;let r=null,s=new Uint8ClampedArray(t,0,t.byteLength);typeof ImageData>"u"?(r=this._context.createImageData(this._canvas.width,this._canvas.height),r.data.set(s)):r=new ImageData(s,this._canvas.width,this._canvas.height),this._context.putImageData(r,0,0)}return this._eventManager.dispatch({type:"render",currentFrame:this.currentFrame}),!0}return!1}_draw(){if(!(this._dotLottieCore===null||!this._dotLottieCore.isPlaying()))try{if(this._dotLottieCore.isTweening())this._dotLottieCore.tweenUpdate()&&this._render();else{let t=Math.round(this._dotLottieCore.requestFrame()*1e3)/1e3;if(this._dotLottieCore.setFrame(t)&&(this._eventManager.dispatch({type:"frame",currentFrame:this.currentFrame}),this._render()&&this._dotLottieCore.isComplete()))if(this._dotLottieCore.config().loopAnimation)this._eventManager.dispatch({type:"loop",loopCount:this._dotLottieCore.loopCount()});else{this._eventManager.dispatch({type:"complete"});return}}this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))}catch(t){console.error("Error in animation frame:",t),this._eventManager.dispatch({type:"renderError",error:t}),t instanceof WebAssembly.RuntimeError&&this.destroy()}}play(){this._dotLottieCore!==null&&(this._animationFrameId!==null&&(this._frameManager.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null),(this._dotLottieCore.play()||this._dotLottieCore.isPlaying())&&(this._isFrozen=!1,this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))),R1&&this._canvas instanceof HTMLCanvasElement&&this._renderConfig.freezeOnOffscreen&&!PO(this._canvas)&&this.freeze())}pause(){this._dotLottieCore!==null&&(this._dotLottieCore.pause()||this._dotLottieCore.isPaused())&&this._eventManager.dispatch({type:"pause"})}stop(){this._dotLottieCore!==null&&this._dotLottieCore.stop()&&(this._eventManager.dispatch({type:"frame",currentFrame:this.currentFrame}),this._render(),this._eventManager.dispatch({type:"stop"}))}setFrame(t){this._dotLottieCore===null||t<0||t>this._dotLottieCore.totalFrames()||this._dotLottieCore.seek(t)&&(this._eventManager.dispatch({type:"frame",currentFrame:this.currentFrame}),this._render())}setSpeed(t){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),speed:t})}setBackgroundColor(t){this._dotLottieCore!==null&&(R1&&this._canvas instanceof HTMLCanvasElement?this._canvas.style.backgroundColor=t:this._dotLottieCore.setConfig({...this._dotLottieCore.config(),backgroundColor:rW(t)}),this._backgroundColor=t)}setLoop(t){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),loopAnimation:t})}setUseFrameInterpolation(t){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),useFrameInterpolation:t})}addEventListener(t,i){this._eventManager.addEventListener(t,i)}removeEventListener(t,i){this._eventManager.removeEventListener(t,i)}destroy(){this._animationFrameId!==null&&(this._frameManager.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null),R1&&this._canvas instanceof HTMLCanvasElement&&(Bn.unobserve(this._canvas),kn.unobserve(this._canvas)),this._dotLottieCore?.delete(),this._dotLottieCore=null,this._context=null,this._eventManager.dispatch({type:"destroy"}),this._eventManager.removeAllEventListeners(),this._cleanupStateMachineListeners()}freeze(){this._animationFrameId!==null&&(this._frameManager.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null,this._isFrozen=!0,this._eventManager.dispatch({type:"freeze"}))}unfreeze(){this._animationFrameId===null&&(this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)),this._isFrozen=!1,this._eventManager.dispatch({type:"unfreeze"}))}resize(){if(!(!this._dotLottieCore||!this.isLoaded)){if(R1&&this._canvas instanceof HTMLCanvasElement){let t=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1,{height:i,width:r}=this._canvas.getBoundingClientRect();i!==0&&r!==0&&(this._canvas.width=r*t,this._canvas.height=i*t)}this._dotLottieCore.resize(this._canvas.width,this._canvas.height)&&this._render()}}setSegment(t,i){this._dotLottieCore===null||Ci._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),segment:D4([t,i],Ci._wasmModule)})}setMode(t){this._dotLottieCore===null||Ci._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),mode:P4(t,Ci._wasmModule)})}setRenderConfig(t){let{devicePixelRatio:i,freezeOnOffscreen:r,...s}=t;this._renderConfig={...this._renderConfig,...s,devicePixelRatio:i||$h(),freezeOnOffscreen:r??!0},R1&&this._canvas instanceof HTMLCanvasElement&&(this._renderConfig.autoResize?kn.observe(this._canvas,this):kn.unobserve(this._canvas),this._renderConfig.freezeOnOffscreen?Bn.observe(this._canvas,this):(Bn.unobserve(this._canvas),this._isFrozen&&this.unfreeze()))}loadAnimation(t){this._dotLottieCore===null||this._dotLottieCore.activeAnimationId()===t||(this._dotLottieCore.loadAnimation(t,this._canvas.width,this._canvas.height)?(this._eventManager.dispatch({type:"load"}),this.resize()):this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to animation :${t}`)}))}setMarker(t){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),marker:t})}markers(){let t=this._dotLottieCore?.markers();if(t){let i=[];for(let r=0;r<t.size();r+=1){let s=t.get(r);i.push({name:s.name,time:s.time,duration:s.duration})}return i}return[]}setTheme(t){if(this._dotLottieCore===null)return!1;let i=this._dotLottieCore.setTheme(t);return this._render(),i}resetTheme(){return this._dotLottieCore===null?!1:this._dotLottieCore.resetTheme()}setThemeData(t){if(this._dotLottieCore===null)return!1;let i=this._dotLottieCore.setThemeData(t);return this._render(),i}setSlots(t){this._dotLottieCore!==null&&this._dotLottieCore.setSlots(t)}setLayout(t){this._dotLottieCore===null||Ci._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),layout:I4(t,Ci._wasmModule)})}setViewport(t,i,r,s){return this._dotLottieCore===null?!1:this._dotLottieCore.setViewport(t,i,r,s)}static setWasmUrl(t){Jm.setWasmUrl(t)}loadStateMachine(t){return this._dotLottieCore?.stateMachineLoad(t)??!1}startStateMachine(){if(Ci._wasmModule===null||this._dotLottieCore===null)return!1;let t=Ci._wasmModule.createDefaultOpenURL(),i=this._dotLottieCore.stateMachineStart(t);return i&&this._setupStateMachineListeners(),i}stopStateMachine(){let t=this._dotLottieCore?.stateMachineStop()??!1;return t&&this._cleanupStateMachineListeners(),t}_getPointerPosition(t){let i=this._canvas.getBoundingClientRect(),r=this._canvas.width/i.width,s=this._canvas.height/i.height,a=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1,n=(t.clientX-i.left)*r/a,o=(t.clientY-i.top)*s/a;return{x:n,y:o}}_onPointerUp(t){let{x:i,y:r}=this._getPointerPosition(t);this.postPointerUpEvent(i,r)}_onPointerDown(t){let{x:i,y:r}=this._getPointerPosition(t);this.postPointerDownEvent(i,r)}_onPointerMove(t){let{x:i,y:r}=this._getPointerPosition(t);this.postPointerMoveEvent(i,r)}_onPointerEnter(t){let{x:i,y:r}=this._getPointerPosition(t);this.postPointerEnterEvent(i,r)}_onPointerLeave(t){let{x:i,y:r}=this._getPointerPosition(t);this.postPointerExitEvent(i,r)}postPointerUpEvent(t,i){return this._dotLottieCore?.stateMachinePostPointerUpEvent(t,i)}postPointerDownEvent(t,i){return this._dotLottieCore?.stateMachinePostPointerDownEvent(t,i)}postPointerMoveEvent(t,i){return this._dotLottieCore?.stateMachinePostPointerMoveEvent(t,i)}postPointerEnterEvent(t,i){return this._dotLottieCore?.stateMachinePostPointerEnterEvent(t,i)}postPointerExitEvent(t,i){return this._dotLottieCore?.stateMachinePostPointerExitEvent(t,i)}getStateMachineListeners(){if(!this._dotLottieCore)return[];let t=this._dotLottieCore.stateMachineFrameworkSetup(),i=[];for(let r=0;r<t.size();r+=1)i.push(t.get(r));return i}_setupStateMachineListeners(){if(R1&&this._canvas instanceof HTMLCanvasElement&&this._dotLottieCore!==null&&this.isLoaded){let t=this.getStateMachineListeners();t.includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._pointerUpMethod),t.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._pointerDownMethod),t.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._pointerMoveMethod),t.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._pointerEnterMethod),t.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._pointerExitMethod)}}_cleanupStateMachineListeners(){R1&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._pointerUpMethod),this._canvas.removeEventListener("pointerdown",this._pointerDownMethod),this._canvas.removeEventListener("pointermove",this._pointerMoveMethod),this._canvas.removeEventListener("pointerenter",this._pointerEnterMethod),this._canvas.removeEventListener("pointerleave",this._pointerExitMethod))}loadStateMachineData(t){return this._dotLottieCore?.stateMachineLoadData(t)??!1}animationSize(){let t=this._dotLottieCore?.animationSize().get(0)??0,i=this._dotLottieCore?.animationSize().get(1)??0;return{width:t,height:i}}setStateMachineBooleanContext(t,i){return this._dotLottieCore?.stateMachineSetBooleanInput(t,i)??!1}setStateMachineNumericContext(t,i){return this._dotLottieCore?.stateMachineSetNumericInput(t,i)??!1}setStateMachineStringContext(t,i){return this._dotLottieCore?.stateMachineSetStringInput(t,i)??!1}getLayerBoundingBox(t){let i=this._dotLottieCore?.getLayerBounds(t);if(!i||i.size()!==8)return;let r=[];for(let s=0;s<8;s+=1)r.push(i.get(s));return r}tween(t,i){if(!Ci._wasmModule)return!1;let r=[0,0,1,1],s=new Ci._wasmModule.VectorFloat;for(let a of r)s.push_back(a);return this._dotLottieCore?.tween(t,i,s)??!1}tweenToMarker(t,i){if(!Ci._wasmModule)return!1;let r=[0,0,1,1],s=new Ci._wasmModule.VectorFloat;for(let a of r)s.push_back(a);return this._dotLottieCore?.tweenToMarker(t,i,s)??!1}static transformThemeToLottieSlots(t,i){return Ci._wasmModule?.transformThemeToLottieSlots(t,i)??""}};Vt(DO,"_wasmModule",null);var nW=DO,oW=class{constructor(){if(typeof Worker>"u")throw new Error("Worker is not supported in this environment.");let t=new Blob([new Uint8Array([34,117,115,101,32,115,116,114,105,99,116,34,59,10,40,40,41,32,61,62,32,123,10,32,32,118,97,114,32,95,95,100,101,102,80,114,111,112,32,61,32,79,98,106,101,99,116,46,100,101,102,105,110,101,80,114,111,112,101,114,116,121,59,10,32,32,118,97,114,32,95,95,100,101,102,78,111,114,109,97,108,80,114,111,112,32,61,32,40,111,98,106,44,32,107,101,121,44,32,118,97,108,117,101,41,32,61,62,32,107,101,121,32,105,110,32,111,98,106,32,63,32,95,95,100,101,102,80,114,111,112,40,111,98,106,44,32,107,101,121,44,32,123,32,101,110,117,109,101,114,97,98,108,101,58,32,116,114,117,101,44,32,99,111,110,102,105,103,117,114,97,98,108,101,58,32,116,114,117,101,44,32,119,114,105,116,97,98,108,101,58,32,116,114,117,101,44,32,118,97,108,117,101,32,125,41,32,58,32,111,98,106,91,107,101,121,93,32,61,32,118,97,108,117,101,59,10,32,32,118,97,114,32,95,95,112,117,98,108,105,99,70,105,101,108,100,32,61,32,40,111,98,106,44,32,107,101,121,44,32,118,97,108,117,101,41,32,61,62,32,95,95,100,101,102,78,111,114,109,97,108,80,114,111,112,40,111,98,106,44,32,116,121,112,101,111,102,32,107,101,121,32,33,61,61,32,34,115,121,109,98,111,108,34,32,63,32,107,101,121,32,43,32,34,34,32,58,32,107,101,121,44,32,118,97,108,117,101,41,59,10,10,32,32,47,47,32,115,114,99,47,97,110,105,109,97,116,105,111,110,45,102,114,97,109,101,45,109,97,110,97,103,101,114,46,116,115,10,32,32,118,97,114,32,87,101,98,65,110,105,109,97,116,105,111,110,70,114,97,109,101,83,116,114,97,116,101,103,121,32,61,32,99,108,97,115,115,32,123,10,32,32,32,32,114,101,113,117,101,115,116,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,99,97,108,108,98,97,99,107,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,114,101,113,117,101,115,116,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,99,97,108,108,98,97,99,107,41,59,10,32,32,32,32,125,10,32,32,32,32,99,97,110,99,101,108,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,105,100,41,32,123,10,32,32,32,32,32,32,99,97,110,99,101,108,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,105,100,41,59,10,32,32,32,32,125,10,32,32,125,59,10,32,32,118,97,114,32,78,111,100,101,65,110,105,109,97,116,105,111,110,70,114,97,109,101,83,116,114,97,116,101,103,121,32,61,32,99,108,97,115,115,32,123,10,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,40,41,32,123,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,108,97,115,116,72,97,110,100,108,101,73,100,34,44,32,48,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,108,97,115,116,73,109,109,101,100,105,97,116,101,34,44,32,110,117,108,108,41,59,10,32,32,32,32,125,10,32,32,32,32,114,101,113,117,101,115,116,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,99,97,108,108,98,97,99,107,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,108,97,115,116,72,97,110,100,108,101,73,100,32,62,61,32,78,117,109,98,101,114,46,77,65,88,95,83,65,70,69,95,73,78,84,69,71,69,82,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,108,97,115,116,72,97,110,100,108,101,73,100,32,61,32,48,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,116,104,105,115,46,95,108,97,115,116,72,97,110,100,108,101,73,100,32,43,61,32,49,59,10,32,32,32,32,32,32,116,104,105,115,46,95,108,97,115,116,73,109,109,101,100,105,97,116,101,32,61,32,115,101,116,73,109,109,101,100,105,97,116,101,40,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,99,97,108,108,98,97,99,107,40,68,97,116,101,46,110,111,119,40,41,41,59,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,108,97,115,116,72,97,110,100,108,101,73,100,59,10,32,32,32,32,125,10,32,32,32,32,99,97,110,99,101,108,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,95,105,100,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,108,97,115,116,73,109,109,101,100,105,97,116,101,41,32,123,10,32,32,32,32,32,32,32,32,99,108,101,97,114,73,109,109,101,100,105,97,116,101,40,116,104,105,115,46,95,108,97,115,116,73,109,109,101,100,105,97,116,101,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,125,59,10,32,32,118,97,114,32,65,110,105,109,97,116,105,111,110,70,114,97,109,101,77,97,110,97,103,101,114,32,61,32,99,108,97,115,115,32,123,10,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,40,41,32,123,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,115,116,114,97,116,101,103,121,34,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,115,116,114,97,116,101,103,121,32,61,32,116,121,112,101,111,102,32,114,101,113,117,101,115,116,65,110,105,109,97,116,105,111,110,70,114,97,109,101,32,61,61,61,32,34,102,117,110,99,116,105,111,110,34,32,63,32,110,101,119,32,87,101,98,65,110,105,109,97,116,105,111,110,70,114,97,109,101,83,116,114,97,116,101,103,121,40,41,32,58,32,110,101,119,32,78,111,100,101,65,110,105,109,97,116,105,111,110,70,114,97,109,101,83,116,114,97,116,101,103,121,40,41,59,10,32,32,32,32,125,10,32,32,32,32,114,101,113,117,101,115,116,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,99,97,108,108,98,97,99,107,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,115,116,114,97,116,101,103,121,46,114,101,113,117,101,115,116,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,99,97,108,108,98,97,99,107,41,59,10,32,32,32,32,125,10,32,32,32,32,99,97,110,99,101,108,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,105,100,41,32,123,10,32,32,32,32,32,32,116,104,105,115,46,95,115,116,114,97,116,101,103,121,46,99,97,110,99,101,108,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,105,100,41,59,10,32,32,32,32,125,10,32,32,125,59,10,10,32,32,47,47,32,115,114,99,47,99,111,110,115,116,97,110,116,115,46,116,115,10,32,32,118,97,114,32,73,83,95,66,82,79,87,83,69,82,32,61,32,116,121,112,101,111,102,32,119,105,110,100,111,119,32,33,61,61,32,34,117,110,100,101,102,105,110,101,100,34,32,38,38,32,116,121,112,101,111,102,32,119,105,110,100,111,119,46,100,111,99,117,109,101,110,116,32,33,61,61,32,34,117,110,100,101,102,105,110,101,100,34,59,10,32,32,118,97,114,32,90,73,80,95,83,73,71,78,65,84,85,82,69,32,61,32,110,101,119,32,85,105,110,116,56,65,114,114,97,121,40,91,56,48,44,32,55,53,44,32,51,44,32,52,93,41,59,10,32,32,118,97,114,32,76,79,84,84,73,69,95,74,83,79,78,95,77,65,78,68,65,84,79,82,89,95,70,73,69,76,68,83,32,61,32,91,34,118,34,44,32,34,105,112,34,44,32,34,111,112,34,44,32,34,108,97,121,101,114,115,34,44,32,34,102,114,34,44,32,34,119,34,44,32,34,104,34,93,59,10,32,32,118,97,114,32,80,65,67,75,65,71,69,95,86,69,82,83,73,79,78,32,61,32,34,48,46,52,57,46,48,34,59,10,32,32,118,97,114,32,80,65,67,75,65,71,69,95,78,65,77,69,32,61,32,34,64,108,111,116,116,105,101,102,105,108,101,115,47,100,111,116,108,111,116,116,105,101,45,119,101,98,34,59,10,32,32,118,97,114,32,68,69,70,65,85,76,84,95,68,80,82,95,70,65,67,84,79,82,32,61,32,48,46,55,53,59,10,32,32,118,97,114,32,66,89,84,69,83,95,80,69,82,95,80,73,88,69,76,32,61,32,52,59,10,10,32,32,47,47,32,115,114,99,47,99,111,114,101,47,100,111,116,108,111,116,116,105,101,45,112,108,97,121,101,114,46,106,115,10,32,32,118,97,114,32,99,114,101,97,116,101,68,111,116,76,111,116,116,105,101,80,108,97,121,101,114,77,111,100,117,108,101,32,61,32,40,40,41,32,61,62,32,123,10,32,32,32,32,118,97,114,32,95,115,99,114,105,112,116,78,97,109,101,32,61,32,116,121,112,101,111,102,32,100,111,99,117,109,101,110,116,32,33,61,32,34,117,110,100,101,102,105,110,101,100,34,32,63,32,100,111,99,117,109,101,110,116,46,99,117,114,114,101,110,116,83,99,114,105,112,116,63,46,115,114,99,32,58,32,118,111,105,100,32,48,59,10,32,32,32,32,114,101,116,117,114,110,32,102,117,110,99,116,105,111,110,40,109,111,100,117,108,101,65,114,103,32,61,32,123,125,41,32,123,10,32,32,32,32,32,32,118,97,114,32,109,111,100,117,108,101,82,116,110,59,10,32,32,32,32,32,32,118,97,114,32,107,32,61,32,109,111,100,117,108,101,65,114,103,44,32,97,97,44,32,98,97,44,32,99,97,32,61,32,110,101,119,32,80,114,111,109,105,115,101,40,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,97,97,32,61,32,97,59,10,32,32,32,32,32,32,32,32,98,97,32,61,32,98,59,10,32,32,32,32,32,32,125,41,44,32,100,97,32,61,32,79,98,106,101,99,116,46,97,115,115,105,103,110,40,123,125,44,32,107,41,44,32,101,97,32,61,32,34,46,47,116,104,105,115,46,112,114,111,103,114,97,109,34,44,32,113,32,61,32,34,34,44,32,105,97,59,10,32,32,32,32,32,32,34,117,110,100,101,102,105,110,101,100,34,32,33,61,32,116,121,112,101,111,102,32,100,111,99,117,109,101,110,116,32,38,38,32,100,111,99,117,109,101,110,116,46,99,117,114,114,101,110,116,83,99,114,105,112,116,32,38,38,32,40,113,32,61,32,100,111,99,117,109,101,110,116,46,99,117,114,114,101,110,116,83,99,114,105,112,116,46,115,114,99,41,59,10,32,32,32,32,32,32,95,115,99,114,105,112,116,78,97,109,101,32,38,38,32,40,113,32,61,32,95,115,99,114,105,112,116,78,97,109,101,41,59,10,32,32,32,32,32,32,113,46,115,116,97,114,116,115,87,105,116,104,40,34,98,108,111,98,58,34,41,32,63,32,113,32,61,32,34,34,32,58,32,113,32,61,32,113,46,115,117,98,115,116,114,40,48,44,32,113,46,114,101,112,108,97,99,101,40,47,91,63,35,93,46,42,47,44,32,34,34,41,46,108,97,115,116,73,110,100,101,120,79,102,40,34,47,34,41,32,43,32,49,41,59,10,32,32,32,32,32,32,105,97,32,61,32,97,115,121,110,99,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,97,32,61,32,97,119,97,105,116,32,102,101,116,99,104,40,97,44,32,123,32,99,114,101,100,101,110,116,105,97,108,115,58,32,34,115,97,109,101,45,111,114,105,103,105,110,34,32,125,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,97,46,111,107,41,32,114,101,116,117,114,110,32,97,46,97,114,114,97,121,66,117,102,102,101,114,40,41,59,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,69,114,114,111,114,40,97,46,115,116,97,116,117,115,32,43,32,34,32,58,32,34,32,43,32,97,46,117,114,108,41,59,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,118,97,114,32,106,97,32,61,32,107,46,112,114,105,110,116,32,124,124,32,99,111,110,115,111,108,101,46,108,111,103,46,98,105,110,100,40,99,111,110,115,111,108,101,41,44,32,114,32,61,32,107,46,112,114,105,110,116,69,114,114,32,124,124,32,99,111,110,115,111,108,101,46,101,114,114,111,114,46,98,105,110,100,40,99,111,110,115,111,108,101,41,59,10,32,32,32,32,32,32,79,98,106,101,99,116,46,97,115,115,105,103,110,40,107,44,32,100,97,41,59,10,32,32,32,32,32,32,100,97,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,107,46,116,104,105,115,80,114,111,103,114,97,109,32,38,38,32,40,101,97,32,61,32,107,46,116,104,105,115,80,114,111,103,114,97,109,41,59,10,32,32,32,32,32,32,118,97,114,32,107,97,32,61,32,107,46,119,97,115,109,66,105,110,97,114,121,44,32,108,97,44,32,109,97,32,61,32,102,97,108,115,101,44,32,110,97,44,32,117,44,32,120,44,32,121,44,32,122,44,32,65,44,32,66,44,32,111,97,44,32,112,97,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,113,97,40,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,97,32,61,32,108,97,46,98,117,102,102,101,114,59,10,32,32,32,32,32,32,32,32,107,46,72,69,65,80,56,32,61,32,117,32,61,32,110,101,119,32,73,110,116,56,65,114,114,97,121,40,97,41,59,10,32,32,32,32,32,32,32,32,107,46,72,69,65,80,49,54,32,61,32,121,32,61,32,110,101,119,32,73,110,116,49,54,65,114,114,97,121,40,97,41,59,10,32,32,32,32,32,32,32,32,107,46,72,69,65,80,85,56,32,61,32,120,32,61,32,110,101,119,32,85,105,110,116,56,65,114,114,97,121,40,97,41,59,10,32,32,32,32,32,32,32,32,107,46,72,69,65,80,85,49,54,32,61,32,122,32,61,32,110,101,119,32,85,105,110,116,49,54,65,114,114,97,121,40,97,41,59,10,32,32,32,32,32,32,32,32,107,46,72,69,65,80,51,50,32,61,32,65,32,61,32,110,101,119,32,73,110,116,51,50,65,114,114,97,121,40,97,41,59,10,32,32,32,32,32,32,32,32,107,46,72,69,65,80,85,51,50,32,61,32,66,32,61,32,110,101,119,32,85,105,110,116,51,50,65,114,114,97,121,40,97,41,59,10,32,32,32,32,32,32,32,32,107,46,72,69,65,80,70,51,50,32,61,32,111,97,32,61,32,110,101,119,32,70,108,111,97,116,51,50,65,114,114,97,121,40,97,41,59,10,32,32,32,32,32,32,32,32,107,46,72,69,65,80,70,54,52,32,61,32,112,97,32,61,32,110,101,119,32,70,108,111,97,116,54,52,65,114,114,97,121,40,97,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,114,97,32,61,32,91,93,44,32,115,97,32,61,32,91,93,44,32,116,97,32,61,32,91,93,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,117,97,40,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,97,32,61,32,107,46,112,114,101,82,117,110,46,115,104,105,102,116,40,41,59,10,32,32,32,32,32,32,32,32,114,97,46,117,110,115,104,105,102,116,40,97,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,67,32,61,32,48,44,32,68,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,118,97,40,97,41,32,123,10,32,32,32,32,32,32,32,32,107,46,111,110,65,98,111,114,116,63,46,40,97,41,59,10,32,32,32,32,32,32,32,32,97,32,61,32,34,65,98,111,114,116,101,100,40,34,32,43,32,97,32,43,32,34,41,34,59,10,32,32,32,32,32,32,32,32,114,40,97,41,59,10,32,32,32,32,32,32,32,32,109,97,32,61,32,116,114,117,101,59,10,32,32,32,32,32,32,32,32,97,32,61,32,110,101,119,32,87,101,98,65,115,115,101,109,98,108,121,46,82,117,110,116,105,109,101,69,114,114,111,114,40,97,32,43,32,34,46,32,66,117,105,108,100,32,119,105,116,104,32,45,115,65,83,83,69,82,84,73,79,78,83,32,102,111,114,32,109,111,114,101,32,105,110,102,111,46,34,41,59,10,32,32,32,32,32,32,32,32,98,97,40,97,41,59,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,97,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,119,97,32,61,32,40,97,41,32,61,62,32,97,46,115,116,97,114,116,115,87,105,116,104,40,34,100,97,116,97,58,97,112,112,108,105,99,97,116,105,111,110,47,111,99,116,101,116,45,115,116,114,101,97,109,59,98,97,115,101,54,52,44,34,41,44,32,120,97,59,10,32,32,32,32,32,32,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,121,97,40,97,41,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,33,107,97,41,10,32,32,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,97,119,97,105,116,32,105,97,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,110,101,119,32,85,105,110,116,56,65,114,114,97,121,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,123,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,97,32,61,61,32,120,97,32,38,38,32,107,97,41,32,97,32,61,32,110,101,119,32,85,105,110,116,56,65,114,114,97,121,40,107,97,41,59,10,32,32,32,32,32,32,32,32,101,108,115,101,32,116,104,114,111,119,32,34,98,111,116,104,32,97,115,121,110,99,32,97,110,100,32,115,121,110,99,32,102,101,116,99,104,105,110,103,32,111,102,32,116,104,101,32,119,97,115,109,32,102,97,105,108,101,100,34,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,122,97,40,97,44,32,98,41,32,123,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,97,119,97,105,116,32,121,97,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,119,97,105,116,32,87,101,98,65,115,115,101,109,98,108,121,46,105,110,115,116,97,110,116,105,97,116,101,40,99,44,32,98,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,114,40,96,102,97,105,108,101,100,32,116,111,32,97,115,121,110,99,104,114,111,110,111,117,115,108,121,32,112,114,101,112,97,114,101,32,119,97,115,109,58,32,36,123,100,125,96,41,44,32,118,97,40,100,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,97,115,121,110,99,32,102,117,110,99,116,105,111,110,32,65,97,40,97,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,120,97,59,10,32,32,32,32,32,32,32,32,105,102,32,40,33,107,97,32,38,38,32,34,102,117,110,99,116,105,111,110,34,32,61,61,32,116,121,112,101,111,102,32,87,101,98,65,115,115,101,109,98,108,121,46,105,110,115,116,97,110,116,105,97,116,101,83,116,114,101,97,109,105,110,103,32,38,38,32,33,119,97,40,98,41,32,38,38,32,34,102,117,110,99,116,105,111,110,34,32,61,61,32,116,121,112,101,111,102,32,102,101,116,99,104,41,10,32,32,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,102,101,116,99,104,40,98,44,32,123,32,99,114,101,100,101,110,116,105,97,108,115,58,32,34,115,97,109,101,45,111,114,105,103,105,110,34,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,119,97,105,116,32,87,101,98,65,115,115,101,109,98,108,121,46,105,110,115,116,97,110,116,105,97,116,101,83,116,114,101,97,109,105,110,103,40,99,44,32,97,41,59,10,32,32,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,114,40,96,119,97,115,109,32,115,116,114,101,97,109,105,110,103,32,99,111,109,112,105,108,101,32,102,97,105,108,101,100,58,32,36,123,100,125,96,41,44,32,114,40,34,102,97,108,108,105,110,103,32,98,97,99,107,32,116,111,32,65,114,114,97,121,66,117,102,102,101,114,32,105,110,115,116,97,110,116,105,97,116,105,111,110,34,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,122,97,40,98,44,32,97,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,99,108,97,115,115,32,66,97,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,40,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,110,97,109,101,34,44,32,34,69,120,105,116,83,116,97,116,117,115,34,41,59,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,109,101,115,115,97,103,101,32,61,32,96,80,114,111,103,114,97,109,32,116,101,114,109,105,110,97,116,101,100,32,119,105,116,104,32,101,120,105,116,40,36,123,97,125,41,96,59,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,115,116,97,116,117,115,32,61,32,97,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,67,97,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,102,111,114,32,40,59,32,48,32,60,32,97,46,108,101,110,103,116,104,59,32,41,32,97,46,115,104,105,102,116,40,41,40,107,41,59,10,32,32,32,32,32,32,125,44,32,68,97,32,61,32,107,46,110,111,69,120,105,116,82,117,110,116,105,109,101,32,124,124,32,116,114,117,101,44,32,69,97,32,61,32,34,117,110,100,101,102,105,110,101,100,34,32,33,61,32,116,121,112,101,111,102,32,84,101,120,116,68,101,99,111,100,101,114,32,63,32,110,101,119,32,84,101,120,116,68,101,99,111,100,101,114,40,41,32,58,32,118,111,105,100,32,48,44,32,71,32,61,32,40,97,44,32,98,32,61,32,48,44,32,99,32,61,32,78,97,78,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,98,32,43,32,99,59,10,32,32,32,32,32,32,32,32,102,111,114,32,40,99,32,61,32,98,59,32,97,91,99,93,32,38,38,32,33,40,99,32,62,61,32,100,41,59,32,41,32,43,43,99,59,10,32,32,32,32,32,32,32,32,105,102,32,40,49,54,32,60,32,99,32,45,32,98,32,38,38,32,97,46,98,117,102,102,101,114,32,38,38,32,69,97,41,32,114,101,116,117,114,110,32,69,97,46,100,101,99,111,100,101,40,97,46,115,117,98,97,114,114,97,121,40,98,44,32,99,41,41,59,10,32,32,32,32,32,32,32,32,102,111,114,32,40,100,32,61,32,34,34,59,32,98,32,60,32,99,59,32,41,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,97,91,98,43,43,93,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,101,32,38,32,49,50,56,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,102,32,61,32,97,91,98,43,43,93,32,38,32,54,51,59,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,49,57,50,32,61,61,32,40,101,32,38,32,50,50,52,41,41,32,100,32,43,61,32,83,116,114,105,110,103,46,102,114,111,109,67,104,97,114,67,111,100,101,40,40,101,32,38,32,51,49,41,32,60,60,32,54,32,124,32,102,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,97,91,98,43,43,93,32,38,32,54,51,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,32,61,32,50,50,52,32,61,61,32,40,101,32,38,32,50,52,48,41,32,63,32,40,101,32,38,32,49,53,41,32,60,60,32,49,50,32,124,32,102,32,60,60,32,54,32,124,32,104,32,58,32,40,101,32,38,32,55,41,32,60,60,32,49,56,32,124,32,102,32,60,60,32,49,50,32,124,32,104,32,60,60,32,54,32,124,32,97,91,98,43,43,93,32,38,32,54,51,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,54,53,53,51,54,32,62,32,101,32,63,32,100,32,43,61,32,83,116,114,105,110,103,46,102,114,111,109,67,104,97,114,67,111,100,101,40,101,41,32,58,32,40,101,32,45,61,32,54,53,53,51,54,44,32,100,32,43,61,32,83,116,114,105,110,103,46,102,114,111,109,67,104,97,114,67,111,100,101,40,53,53,50,57,54,32,124,32,101,32,62,62,32,49,48,44,32,53,54,51,50,48,32,124,32,101,32,38,32,49,48,50,51,41,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,100,32,43,61,32,83,116,114,105,110,103,46,102,114,111,109,67,104,97,114,67,111,100,101,40,101,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,100,59,10,32,32,32,32,32,32,125,44,32,73,32,61,32,48,59,10,32,32,32,32,32,32,99,108,97,115,115,32,70,97,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,40,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,79,97,32,61,32,97,32,45,32,50,52,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,72,97,32,61,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,97,32,61,32,91,93,44,32,98,32,61,32,73,59,10,32,32,32,32,32,32,32,32,105,102,32,40,33,98,41,32,114,101,116,117,114,110,32,74,40,48,41,44,32,48,59,10,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,110,101,119,32,70,97,40,98,41,59,10,32,32,32,32,32,32,32,32,66,91,99,46,79,97,32,43,32,49,54,32,62,62,32,50,93,32,61,32,98,59,10,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,66,91,99,46,79,97,32,43,32,52,32,62,62,32,50,93,59,10,32,32,32,32,32,32,32,32,105,102,32,40,33,100,41,32,114,101,116,117,114,110,32,74,40,48,41,44,32,98,59,10,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,101,32,111,102,32,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,48,32,61,61,61,32,101,32,124,124,32,101,32,61,61,61,32,100,41,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,71,97,40,101,44,32,100,44,32,99,46,79,97,32,43,32,49,54,41,41,32,114,101,116,117,114,110,32,74,40,101,41,44,32,98,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,74,40,100,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,59,10,32,32,32,32,32,32,125,44,32,73,97,32,61,32,48,44,32,75,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,120,59,10,32,32,32,32,32,32,32,32,105,102,32,40,48,32,60,32,99,41,32,123,10,32,32,32,32,32,32,32,32,32,32,99,32,61,32,98,32,43,32,99,32,45,32,49,59,10,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,101,32,61,32,48,59,32,101,32,60,32,97,46,108,101,110,103,116,104,59,32,43,43,101,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,102,32,61,32,97,46,99,104,97,114,67,111,100,101,65,116,40,101,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,53,53,50,57,54,32,60,61,32,102,32,38,38,32,53,55,51,52,51,32,62,61,32,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,97,46,99,104,97,114,67,111,100,101,65,116,40,43,43,101,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,32,61,32,54,53,53,51,54,32,43,32,40,40,102,32,38,32,49,48,50,51,41,32,60,60,32,49,48,41,32,124,32,104,32,38,32,49,48,50,51,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,49,50,55,32,62,61,32,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,98,32,62,61,32,99,41,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,91,98,43,43,93,32,61,32,102,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,50,48,52,55,32,62,61,32,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,98,32,43,32,49,32,62,61,32,99,41,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,91,98,43,43,93,32,61,32,49,57,50,32,124,32,102,32,62,62,32,54,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,54,53,53,51,53,32,62,61,32,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,98,32,43,32,50,32,62,61,32,99,41,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,91,98,43,43,93,32,61,32,50,50,52,32,124,32,102,32,62,62,32,49,50,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,98,32,43,32,51,32,62,61,32,99,41,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,91,98,43,43,93,32,61,32,50,52,48,32,124,32,102,32,62,62,32,49,56,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,91,98,43,43,93,32,61,32,49,50,56,32,124,32,102,32,62,62,32,49,50,32,38,32,54,51,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,91,98,43,43,93,32,61,32,49,50,56,32,124,32,102,32,62,62,32,54,32,38,32,54,51,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,91,98,43,43,93,32,61,32,49,50,56,32,124,32,102,32,38,32,54,51,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,100,91,98,93,32,61,32,48,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,44,32,74,97,32,61,32,123,125,44,32,75,97,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,102,111,114,32,40,59,32,97,46,108,101,110,103,116,104,59,32,41,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,97,46,112,111,112,40,41,59,10,32,32,32,32,32,32,32,32,32,32,97,46,112,111,112,40,41,40,98,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,76,40,97,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,114,111,109,87,105,114,101,84,121,112,101,40,66,91,97,32,62,62,32,50,93,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,77,32,61,32,123,125,44,32,78,32,61,32,123,125,44,32,76,97,32,61,32,123,125,44,32,77,97,44,32,80,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,100,40,103,41,32,123,10,32,32,32,32,32,32,32,32,32,32,103,32,61,32,99,40,103,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,103,46,108,101,110,103,116,104,32,33,61,61,32,97,46,108,101,110,103,116,104,41,32,116,104,114,111,119,32,110,101,119,32,77,97,40,34,77,105,115,109,97,116,99,104,101,100,32,116,121,112,101,32,99,111,110,118,101,114,116,101,114,32,99,111,117,110,116,34,41,59,10,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,108,32,61,32,48,59,32,108,32,60,32,97,46,108,101,110,103,116,104,59,32,43,43,108,41,32,79,40,97,91,108,93,44,32,103,91,108,93,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,97,46,102,111,114,69,97,99,104,40,40,103,41,32,61,62,32,76,97,91,103,93,32,61,32,98,41,59,10,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,65,114,114,97,121,40,98,46,108,101,110,103,116,104,41,44,32,102,32,61,32,91,93,44,32,104,32,61,32,48,59,10,32,32,32,32,32,32,32,32,98,46,102,111,114,69,97,99,104,40,40,103,44,32,108,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,78,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,103,41,32,63,32,101,91,108,93,32,61,32,78,91,103,93,32,58,32,40,102,46,112,117,115,104,40,103,41,44,32,77,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,103,41,32,124,124,32,40,77,91,103,93,32,61,32,91,93,41,44,32,77,91,103,93,46,112,117,115,104,40,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,101,91,108,93,32,61,32,78,91,103,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,43,43,104,59,10,32,32,32,32,32,32,32,32,32,32,32,32,104,32,61,61,61,32,102,46,108,101,110,103,116,104,32,38,38,32,100,40,101,41,59,10,32,32,32,32,32,32,32,32,32,32,125,41,41,59,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,48,32,61,61,61,32,102,46,108,101,110,103,116,104,32,38,38,32,100,40,101,41,59,10,32,32,32,32,32,32,125,44,32,78,97,44,32,81,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,98,32,61,32,34,34,59,32,120,91,97,93,59,32,41,32,98,32,43,61,32,78,97,91,120,91,97,43,43,93,93,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,59,10,32,32,32,32,32,32,125,44,32,82,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,79,97,40,97,44,32,98,44,32,99,32,61,32,123,125,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,98,46,110,97,109,101,59,10,32,32,32,32,32,32,32,32,105,102,32,40,33,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,116,121,112,101,32,34,36,123,100,125,34,32,109,117,115,116,32,104,97,118,101,32,97,32,112,111,115,105,116,105,118,101,32,105,110,116,101,103,101,114,32,116,121,112,101,105,100,32,112,111,105,110,116,101,114,96,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,78,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,97,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,99,46,117,98,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,114,101,103,105,115,116,101,114,32,116,121,112,101,32,39,36,123,100,125,39,32,116,119,105,99,101,96,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,78,91,97,93,32,61,32,98,59,10,32,32,32,32,32,32,32,32,100,101,108,101,116,101,32,76,97,91,97,93,59,10,32,32,32,32,32,32,32,32,77,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,97,41,32,38,38,32,40,98,32,61,32,77,91,97,93,44,32,100,101,108,101,116,101,32,77,91,97,93,44,32,98,46,102,111,114,69,97,99,104,40,40,101,41,32,61,62,32,101,40,41,41,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,79,40,97,44,32,98,44,32,99,32,61,32,123,125,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,79,97,40,97,44,32,98,44,32,99,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,81,97,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,97,46,78,97,46,81,97,46,80,97,46,110,97,109,101,32,43,32,34,32,105,110,115,116,97,110,99,101,32,97,108,114,101,97,100,121,32,100,101,108,101,116,101,100,34,41,59,10,32,32,32,32,32,32,125,44,32,82,97,32,61,32,102,97,108,115,101,44,32,83,97,32,61,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,125,44,32,84,97,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,98,32,61,61,61,32,99,41,32,114,101,116,117,114,110,32,97,59,10,32,32,32,32,32,32,32,32,105,102,32,40,118,111,105,100,32,48,32,61,61,61,32,99,46,84,97,41,32,114,101,116,117,114,110,32,110,117,108,108,59,10,32,32,32,32,32,32,32,32,97,32,61,32,84,97,40,97,44,32,98,44,32,99,46,84,97,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,110,117,108,108,32,61,61,61,32,97,32,63,32,110,117,108,108,32,58,32,99,46,110,98,40,97,41,59,10,32,32,32,32,32,32,125,44,32,85,97,32,61,32,123,125,44,32,86,97,32,61,32,123,125,44,32,87,97,32,61,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,118,111,105,100,32,48,32,61,61,61,32,98,41,32,116,104,114,111,119,32,110,101,119,32,82,40,34,112,116,114,32,115,104,111,117,108,100,32,110,111,116,32,98,101,32,117,110,100,101,102,105,110,101,100,34,41,59,10,32,32,32,32,32,32,32,32,102,111,114,32,40,59,32,97,46,84,97,59,32,41,32,98,32,61,32,97,46,99,98,40,98,41,44,32,97,32,61,32,97,46,84,97,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,86,97,91,98,93,59,10,32,32,32,32,32,32,125,44,32,89,97,32,61,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,33,98,46,81,97,32,124,124,32,33,98,46,79,97,41,32,116,104,114,111,119,32,110,101,119,32,77,97,40,34,109,97,107,101,67,108,97,115,115,72,97,110,100,108,101,32,114,101,113,117,105,114,101,115,32,112,116,114,32,97,110,100,32,112,116,114,84,121,112,101,34,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,33,33,98,46,85,97,32,33,61,61,32,33,33,98,46,83,97,41,32,116,104,114,111,119,32,110,101,119,32,77,97,40,34,66,111,116,104,32,115,109,97,114,116,80,116,114,84,121,112,101,32,97,110,100,32,115,109,97,114,116,80,116,114,32,109,117,115,116,32,98,101,32,115,112,101,99,105,102,105,101,100,34,41,59,10,32,32,32,32,32,32,32,32,98,46,99,111,117,110,116,32,61,32,123,32,118,97,108,117,101,58,32,49,32,125,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,88,97,40,79,98,106,101,99,116,46,99,114,101,97,116,101,40,97,44,32,123,32,78,97,58,32,123,32,118,97,108,117,101,58,32,98,44,32,119,114,105,116,97,98,108,101,58,32,116,114,117,101,32,125,32,125,41,41,59,10,32,32,32,32,32,32,125,44,32,88,97,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,34,117,110,100,101,102,105,110,101,100,34,32,61,61,61,32,116,121,112,101,111,102,32,70,105,110,97,108,105,122,97,116,105,111,110,82,101,103,105,115,116,114,121,41,32,114,101,116,117,114,110,32,88,97,32,61,32,40,98,41,32,61,62,32,98,44,32,97,59,10,32,32,32,32,32,32,32,32,82,97,32,61,32,110,101,119,32,70,105,110,97,108,105,122,97,116,105,111,110,82,101,103,105,115,116,114,121,40,40,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,98,46,78,97,59,10,32,32,32,32,32,32,32,32,32,32,45,45,98,46,99,111,117,110,116,46,118,97,108,117,101,59,10,32,32,32,32,32,32,32,32,32,32,48,32,61,61,61,32,98,46,99,111,117,110,116,46,118,97,108,117,101,32,38,38,32,40,98,46,83,97,32,63,32,98,46,85,97,46,88,97,40,98,46,83,97,41,32,58,32,98,46,81,97,46,80,97,46,88,97,40,98,46,79,97,41,41,59,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,88,97,32,61,32,40,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,98,46,78,97,59,10,32,32,32,32,32,32,32,32,32,32,99,46,83,97,32,38,38,32,82,97,46,114,101,103,105,115,116,101,114,40,98,44,32,123,32,78,97,58,32,99,32,125,44,32,98,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,59,10,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,83,97,32,61,32,40,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,82,97,46,117,110,114,101,103,105,115,116,101,114,40,98,41,59,10,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,88,97,40,97,41,59,10,32,32,32,32,32,32,125,44,32,90,97,32,61,32,91,93,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,36,97,40,41,32,123,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,97,98,32,61,32,40,97,44,32,98,41,32,61,62,32,79,98,106,101,99,116,46,100,101,102,105,110,101,80,114,111,112,101,114,116,121,40,98,44,32,34,110,97,109,101,34,44,32,123,32,118,97,108,117,101,58,32,97,32,125,41,44,32,98,98,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,118,111,105,100,32,48,32,61,61,61,32,97,91,98,93,46,82,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,97,91,98,93,59,10,32,32,32,32,32,32,32,32,32,32,97,91,98,93,32,61,32,102,117,110,99,116,105,111,110,40,46,46,46,101,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,33,97,91,98,93,46,82,97,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,101,46,108,101,110,103,116,104,41,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,96,70,117,110,99,116,105,111,110,32,39,36,123,99,125,39,32,99,97,108,108,101,100,32,119,105,116,104,32,97,110,32,105,110,118,97,108,105,100,32,110,117,109,98,101,114,32,111,102,32,97,114,103,117,109,101,110,116,115,32,40,36,123,101,46,108,101,110,103,116,104,125,41,32,45,32,101,120,112,101,99,116,115,32,111,110,101,32,111,102,32,40,36,123,97,91,98,93,46,82,97,125,41,33,96,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,91,98,93,46,82,97,91,101,46,108,101,110,103,116,104,93,46,97,112,112,108,121,40,116,104,105,115,44,32,101,41,59,10,32,32,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,32,32,97,91,98,93,46,82,97,32,61,32,91,93,59,10,32,32,32,32,32,32,32,32,32,32,97,91,98,93,46,82,97,91,100,46,36,97,93,32,61,32,100,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,44,32,99,98,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,107,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,97,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,118,111,105,100,32,48,32,61,61,61,32,99,32,124,124,32,118,111,105,100,32,48,32,33,61,61,32,107,91,97,93,46,82,97,32,38,38,32,118,111,105,100,32,48,32,33,61,61,32,107,91,97,93,46,82,97,91,99,93,41,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,114,101,103,105,115,116,101,114,32,112,117,98,108,105,99,32,110,97,109,101,32,39,36,123,97,125,39,32,116,119,105,99,101,96,41,59,10,32,32,32,32,32,32,32,32,32,32,98,98,40,107,44,32,97,44,32,97,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,107,91,97,93,46,82,97,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,99,41,41,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,114,101,103,105,115,116,101,114,32,109,117,108,116,105,112,108,101,32,111,118,101,114,108,111,97,100,115,32,111,102,32,97,32,102,117,110,99,116,105,111,110,32,119,105,116,104,32,116,104,101,32,115,97,109,101,32,110,117,109,98,101,114,32,111,102,32,97,114,103,117,109,101,110,116,115,32,40,36,123,99,125,41,33,96,41,59,10,32,32,32,32,32,32,32,32,32,32,107,91,97,93,46,82,97,91,99,93,32,61,32,98,59,10,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,107,91,97,93,32,61,32,98,44,32,107,91,97,93,46,36,97,32,61,32,99,59,10,32,32,32,32,32,32,125,44,32,100,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,97,32,61,32,97,46,114,101,112,108,97,99,101,40,47,91,94,97,45,122,65,45,90,48,45,57,95,93,47,103,44,32,34,36,34,41,59,10,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,97,46,99,104,97,114,67,111,100,101,65,116,40,48,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,52,56,32,60,61,32,98,32,38,38,32,53,55,32,62,61,32,98,32,63,32,96,95,36,123,97,125,96,32,58,32,97,59,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,101,98,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,110,97,109,101,32,61,32,97,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,99,111,110,115,116,114,117,99,116,111,114,32,61,32,98,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,90,97,32,61,32,99,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,88,97,32,61,32,100,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,84,97,32,61,32,101,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,112,98,32,61,32,102,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,99,98,32,61,32,104,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,110,98,32,61,32,103,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,119,98,32,61,32,91,93,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,102,98,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,102,111,114,32,40,59,32,98,32,33,61,61,32,99,59,32,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,33,98,46,99,98,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,69,120,112,101,99,116,101,100,32,110,117,108,108,32,111,114,32,105,110,115,116,97,110,99,101,32,111,102,32,36,123,99,46,110,97,109,101,125,44,32,103,111,116,32,97,110,32,105,110,115,116,97,110,99,101,32,111,102,32,36,123,98,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,97,32,61,32,98,46,99,98,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,98,46,84,97,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,59,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,103,98,40,97,44,32,98,41,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,110,117,108,108,32,61,61,61,32,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,103,98,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,110,117,108,108,32,105,115,32,110,111,116,32,97,32,118,97,108,105,100,32,36,123,116,104,105,115,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,33,98,46,78,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,112,97,115,115,32,34,36,123,104,98,40,98,41,125,34,32,97,115,32,97,32,36,123,116,104,105,115,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,33,98,46,78,97,46,79,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,112,97,115,115,32,100,101,108,101,116,101,100,32,111,98,106,101,99,116,32,97,115,32,97,32,112,111,105,110,116,101,114,32,111,102,32,116,121,112,101,32,36,123,116,104,105,115,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,98,40,98,46,78,97,46,79,97,44,32,98,46,78,97,46,81,97,46,80,97,44,32,116,104,105,115,46,80,97,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,105,98,40,97,44,32,98,41,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,110,117,108,108,32,61,61,61,32,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,103,98,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,110,117,108,108,32,105,115,32,110,111,116,32,97,32,118,97,108,105,100,32,36,123,116,104,105,115,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,102,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,116,104,105,115,46,104,98,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,110,117,108,108,32,33,61,61,32,97,32,38,38,32,97,46,112,117,115,104,40,116,104,105,115,46,88,97,44,32,99,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,33,98,32,124,124,32,33,98,46,78,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,112,97,115,115,32,34,36,123,104,98,40,98,41,125,34,32,97,115,32,97,32,36,123,116,104,105,115,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,33,98,46,78,97,46,79,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,112,97,115,115,32,100,101,108,101,116,101,100,32,111,98,106,101,99,116,32,97,115,32,97,32,112,111,105,110,116,101,114,32,111,102,32,116,121,112,101,32,36,123,116,104,105,115,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,33,116,104,105,115,46,101,98,32,38,38,32,98,46,78,97,46,81,97,46,101,98,41,10,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,10,32,32,32,32,32,32,32,32,32,32,32,32,96,67,97,110,110,111,116,32,99,111,110,118,101,114,116,32,97,114,103,117,109,101,110,116,32,111,102,32,116,121,112,101,32,36,123,98,46,78,97,46,85,97,32,63,32,98,46,78,97,46,85,97,46,110,97,109,101,32,58,32,98,46,78,97,46,81,97,46,110,97,109,101,125,32,116,111,32,112,97,114,97,109,101,116,101,114,32,116,121,112,101,32,36,123,116,104,105,115,46,110,97,109,101,125,96,10,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,99,32,61,32,102,98,40,98,46,78,97,46,79,97,44,32,98,46,78,97,46,81,97,46,80,97,44,32,116,104,105,115,46,80,97,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,102,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,118,111,105,100,32,48,32,61,61,61,32,98,46,78,97,46,83,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,34,80,97,115,115,105,110,103,32,114,97,119,32,112,111,105,110,116,101,114,32,116,111,32,115,109,97,114,116,32,112,111,105,110,116,101,114,32,105,115,32,105,108,108,101,103,97,108,34,41,59,10,32,32,32,32,32,32,32,32,32,32,115,119,105,116,99,104,32,40,116,104,105,115,46,66,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,48,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,98,46,78,97,46,85,97,32,61,61,61,32,116,104,105,115,41,32,99,32,61,32,98,46,78,97,46,83,97,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,108,115,101,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,96,67,97,110,110,111,116,32,99,111,110,118,101,114,116,32,97,114,103,117,109,101,110,116,32,111,102,32,116,121,112,101,32,36,123,98,46,78,97,46,85,97,32,63,32,98,46,78,97,46,85,97,46,110,97,109,101,32,58,32,98,46,78,97,46,81,97,46,110,97,109,101,125,32,116,111,32,112,97,114,97,109,101,116,101,114,32,116,121,112,101,32,36,123,116,104,105,115,46,110,97,109,101,125,96,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,49,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,32,61,32,98,46,78,97,46,83,97,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,50,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,98,46,78,97,46,85,97,32,61,61,61,32,116,104,105,115,41,32,99,32,61,32,98,46,78,97,46,83,97,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,98,46,99,108,111,110,101,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,32,61,32,116,104,105,115,46,120,98,40,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,106,98,40,40,41,32,61,62,32,100,91,34,100,101,108,101,116,101,34,93,40,41,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,110,117,108,108,32,33,61,61,32,97,32,38,38,32,97,46,112,117,115,104,40,116,104,105,115,46,88,97,44,32,99,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,32,32,32,32,100,101,102,97,117,108,116,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,34,85,110,115,117,112,112,111,114,116,105,110,103,32,115,104,97,114,105,110,103,32,112,111,108,105,99,121,34,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,107,98,40,97,44,32,98,41,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,110,117,108,108,32,61,61,61,32,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,103,98,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,110,117,108,108,32,105,115,32,110,111,116,32,97,32,118,97,108,105,100,32,36,123,116,104,105,115,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,33,98,46,78,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,112,97,115,115,32,34,36,123,104,98,40,98,41,125,34,32,97,115,32,97,32,36,123,116,104,105,115,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,33,98,46,78,97,46,79,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,112,97,115,115,32,100,101,108,101,116,101,100,32,111,98,106,101,99,116,32,97,115,32,97,32,112,111,105,110,116,101,114,32,111,102,32,116,121,112,101,32,36,123,116,104,105,115,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,98,46,78,97,46,81,97,46,101,98,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,99,111,110,118,101,114,116,32,97,114,103,117,109,101,110,116,32,111,102,32,116,121,112,101,32,36,123,98,46,78,97,46,81,97,46,110,97,109,101,125,32,116,111,32,112,97,114,97,109,101,116,101,114,32,116,121,112,101,32,36,123,116,104,105,115,46,110,97,109,101,125,96,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,98,40,98,46,78,97,46,79,97,44,32,98,46,78,97,46,81,97,46,80,97,44,32,116,104,105,115,46,80,97,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,108,98,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,44,32,109,44,32,110,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,110,97,109,101,32,61,32,97,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,80,97,32,61,32,98,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,103,98,32,61,32,99,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,101,98,32,61,32,100,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,102,98,32,61,32,101,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,118,98,32,61,32,102,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,66,98,32,61,32,104,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,108,98,32,61,32,103,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,104,98,32,61,32,108,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,120,98,32,61,32,109,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,88,97,32,61,32,110,59,10,32,32,32,32,32,32,32,32,101,32,124,124,32,118,111,105,100,32,48,32,33,61,61,32,98,46,84,97,32,63,32,116,104,105,115,46,116,111,87,105,114,101,84,121,112,101,32,61,32,105,98,32,58,32,40,116,104,105,115,46,116,111,87,105,114,101,84,121,112,101,32,61,32,100,32,63,32,103,98,32,58,32,107,98,44,32,116,104,105,115,46,87,97,32,61,32,110,117,108,108,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,109,98,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,33,107,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,97,41,41,32,116,104,114,111,119,32,110,101,119,32,77,97,40,34,82,101,112,108,97,99,105,110,103,32,110,111,110,101,120,105,115,116,101,110,116,32,112,117,98,108,105,99,32,115,121,109,98,111,108,34,41,59,10,32,32,32,32,32,32,32,32,118,111,105,100,32,48,32,33,61,61,32,107,91,97,93,46,82,97,32,38,38,32,118,111,105,100,32,48,32,33,61,61,32,99,32,63,32,107,91,97,93,46,82,97,91,99,93,32,61,32,98,32,58,32,40,107,91,97,93,32,61,32,98,44,32,107,91,97,93,46,36,97,32,61,32,99,41,59,10,32,32,32,32,32,32,125,44,32,83,44,32,110,98,32,61,32,40,97,44,32,98,44,32,99,32,61,32,91,93,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,97,46,105,110,99,108,117,100,101,115,40,34,106,34,41,32,63,32,40,97,32,61,32,97,46,114,101,112,108,97,99,101,40,47,112,47,103,44,32,34,105,34,41,44,32,98,32,61,32,40,48,44,32,107,91,34,100,121,110,67,97,108,108,95,34,32,43,32,97,93,41,40,98,44,32,46,46,46,99,41,41,32,58,32,98,32,61,32,83,46,103,101,116,40,98,41,40,46,46,46,99,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,59,10,32,32,32,32,32,32,125,44,32,111,98,32,61,32,40,97,44,32,98,41,32,61,62,32,40,46,46,46,99,41,32,61,62,32,110,98,40,97,44,32,98,44,32,99,41,44,32,84,32,61,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,97,32,61,32,81,40,97,41,59,10,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,97,46,105,110,99,108,117,100,101,115,40,34,106,34,41,32,63,32,111,98,40,97,44,32,98,41,32,58,32,83,46,103,101,116,40,98,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,34,102,117,110,99,116,105,111,110,34,32,33,61,32,116,121,112,101,111,102,32,99,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,117,110,107,110,111,119,110,32,102,117,110,99,116,105,111,110,32,112,111,105,110,116,101,114,32,119,105,116,104,32,115,105,103,110,97,116,117,114,101,32,36,123,97,125,58,32,36,123,98,125,96,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,59,10,32,32,32,32,32,32,125,44,32,112,98,44,32,114,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,97,32,61,32,113,98,40,97,41,59,10,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,81,40,97,41,59,10,32,32,32,32,32,32,32,32,85,40,97,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,59,10,32,32,32,32,32,32,125,44,32,115,98,32,61,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,99,40,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,101,91,102,93,32,124,124,32,78,91,102,93,32,124,124,32,40,76,97,91,102,93,32,63,32,76,97,91,102,93,46,102,111,114,69,97,99,104,40,99,41,32,58,32,40,100,46,112,117,115,104,40,102,41,44,32,101,91,102,93,32,61,32,116,114,117,101,41,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,91,93,44,32,101,32,61,32,123,125,59,10,32,32,32,32,32,32,32,32,98,46,102,111,114,69,97,99,104,40,99,41,59,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,112,98,40,96,36,123,97,125,58,32,96,32,43,32,100,46,109,97,112,40,114,98,41,46,106,111,105,110,40,91,34,44,32,34,93,41,41,59,10,32,32,32,32,32,32,125,44,32,116,98,32,61,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,99,32,61,32,91,93,44,32,100,32,61,32,48,59,32,100,32,60,32,97,59,32,100,43,43,41,32,99,46,112,117,115,104,40,66,91,98,32,43,32,52,32,42,32,100,32,62,62,32,50,93,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,59,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,117,98,40,97,41,32,123,10,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,98,32,61,32,49,59,32,98,32,60,32,97,46,108,101,110,103,116,104,59,32,43,43,98,41,32,105,102,32,40,110,117,108,108,32,33,61,61,32,97,91,98,93,32,38,38,32,118,111,105,100,32,48,32,61,61,61,32,97,91,98,93,46,87,97,41,32,114,101,116,117,114,110,32,116,114,117,101,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,118,98,40,97,44,32,98,44,32,99,44,32,100,44,32,101,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,102,32,61,32,98,46,108,101,110,103,116,104,59,10,32,32,32,32,32,32,32,32,105,102,32,40,50,32,62,32,102,41,32,116,104,114,111,119,32,110,101,119,32,82,40,34,97,114,103,84,121,112,101,115,32,97,114,114,97,121,32,115,105,122,101,32,109,105,115,109,97,116,99,104,33,32,77,117,115,116,32,97,116,32,108,101,97,115,116,32,103,101,116,32,114,101,116,117,114,110,32,118,97,108,117,101,32,97,110,100,32,39,116,104,105,115,39,32,116,121,112,101,115,33,34,41,59,10,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,110,117,108,108,32,33,61,61,32,98,91,49,93,32,38,38,32,110,117,108,108,32,33,61,61,32,99,44,32,103,32,61,32,117,98,40,98,41,44,32,108,32,61,32,34,118,111,105,100,34,32,33,61,61,32,98,91,48,93,46,110,97,109,101,44,32,109,32,61,32,102,32,45,32,50,44,32,110,32,61,32,65,114,114,97,121,40,109,41,44,32,112,32,61,32,91,93,44,32,116,32,61,32,91,93,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,98,40,97,44,32,102,117,110,99,116,105,111,110,40,46,46,46,69,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,46,108,101,110,103,116,104,32,61,32,48,59,10,32,32,32,32,32,32,32,32,32,32,112,46,108,101,110,103,116,104,32,61,32,104,32,63,32,50,32,58,32,49,59,10,32,32,32,32,32,32,32,32,32,32,112,91,48,93,32,61,32,101,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,104,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,118,32,61,32,98,91,49,93,46,116,111,87,105,114,101,84,121,112,101,40,116,44,32,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,112,91,49,93,32,61,32,118,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,119,32,61,32,48,59,32,119,32,60,32,109,59,32,43,43,119,41,32,110,91,119,93,32,61,32,98,91,119,32,43,32,50,93,46,116,111,87,105,114,101,84,121,112,101,40,116,44,32,69,91,119,93,41,44,32,112,46,112,117,115,104,40,110,91,119,93,41,59,10,32,32,32,32,32,32,32,32,32,32,69,32,61,32,100,40,46,46,46,112,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,103,41,32,75,97,40,116,41,59,10,32,32,32,32,32,32,32,32,32,32,101,108,115,101,10,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,119,32,61,32,104,32,63,32,49,32,58,32,50,59,32,119,32,60,32,98,46,108,101,110,103,116,104,59,32,119,43,43,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,72,32,61,32,49,32,61,61,61,32,119,32,63,32,118,32,58,32,110,91,119,32,45,32,50,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,110,117,108,108,32,33,61,61,32,98,91,119,93,46,87,97,32,38,38,32,98,91,119,93,46,87,97,40,72,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,118,32,61,32,108,32,63,32,98,91,48,93,46,102,114,111,109,87,105,114,101,84,121,112,101,40,69,41,32,58,32,118,111,105,100,32,48,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,118,59,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,119,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,97,32,61,32,97,46,116,114,105,109,40,41,59,10,32,32,32,32,32,32,32,32,99,111,110,115,116,32,98,32,61,32,97,46,105,110,100,101,120,79,102,40,34,40,34,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,45,49,32,33,61,61,32,98,32,63,32,97,46,115,117,98,115,116,114,40,48,44,32,98,41,32,58,32,97,59,10,32,32,32,32,32,32,125,44,32,121,98,32,61,32,91,93,44,32,86,32,61,32,91,93,44,32,122,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,57,32,60,32,97,32,38,38,32,48,32,61,61,61,32,45,45,86,91,97,32,43,32,49,93,32,38,38,32,40,86,91,97,93,32,61,32,118,111,105,100,32,48,44,32,121,98,46,112,117,115,104,40,97,41,41,59,10,32,32,32,32,32,32,125,44,32,65,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,33,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,34,67,97,110,110,111,116,32,117,115,101,32,100,101,108,101,116,101,100,32,118,97,108,46,32,104,97,110,100,108,101,32,61,32,34,32,43,32,97,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,86,91,97,93,59,10,32,32,32,32,32,32,125,44,32,106,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,115,119,105,116,99,104,32,40,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,118,111,105,100,32,48,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,50,59,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,110,117,108,108,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,52,59,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,116,114,117,101,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,54,59,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,102,97,108,115,101,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,56,59,10,32,32,32,32,32,32,32,32,32,32,100,101,102,97,117,108,116,58,10,32,32,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,98,32,61,32,121,98,46,112,111,112,40,41,32,124,124,32,86,46,108,101,110,103,116,104,59,10,32,32,32,32,32,32,32,32,32,32,32,32,86,91,98,93,32,61,32,97,59,10,32,32,32,32,32,32,32,32,32,32,32,32,86,91,98,32,43,32,49,93,32,61,32,49,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,44,32,66,98,32,61,32,123,10,32,32,32,32,32,32,32,32,110,97,109,101,58,32,34,101,109,115,99,114,105,112,116,101,110,58,58,118,97,108,34,44,10,32,32,32,32,32,32,32,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,65,98,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,122,98,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,116,111,87,105,114,101,84,121,112,101,58,32,40,97,44,32,98,41,32,61,62,32,106,98,40,98,41,44,10,32,32,32,32,32,32,32,32,86,97,58,32,56,44,10,32,32,32,32,32,32,32,32,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,58,32,76,44,10,32,32,32,32,32,32,32,32,87,97,58,32,110,117,108,108,10,32,32,32,32,32,32,125,44,32,67,98,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,115,119,105,116,99,104,32,40,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,49,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,32,63,32,102,117,110,99,116,105,111,110,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,114,111,109,87,105,114,101,84,121,112,101,40,117,91,100,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,32,58,32,102,117,110,99,116,105,111,110,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,114,111,109,87,105,114,101,84,121,112,101,40,120,91,100,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,50,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,32,63,32,102,117,110,99,116,105,111,110,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,114,111,109,87,105,114,101,84,121,112,101,40,121,91,100,32,62,62,32,49,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,32,58,32,102,117,110,99,116,105,111,110,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,114,111,109,87,105,114,101,84,121,112,101,40,122,91,100,32,62,62,32,49,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,52,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,32,63,32,102,117,110,99,116,105,111,110,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,114,111,109,87,105,114,101,84,121,112,101,40,65,91,100,32,62,62,32,50,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,32,58,32,102,117,110,99,116,105,111,110,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,114,111,109,87,105,114,101,84,121,112,101,40,66,91,100,32,62,62,32,50,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,32,32,100,101,102,97,117,108,116,58,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,84,121,112,101,69,114,114,111,114,40,96,105,110,118,97,108,105,100,32,105,110,116,101,103,101,114,32,119,105,100,116,104,32,40,36,123,98,125,41,58,32,36,123,97,125,96,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,44,32,68,98,32,61,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,78,91,97,93,59,10,32,32,32,32,32,32,32,32,105,102,32,40,118,111,105,100,32,48,32,61,61,61,32,99,41,32,116,104,114,111,119,32,97,32,61,32,96,36,123,98,125,32,104,97,115,32,117,110,107,110,111,119,110,32,116,121,112,101,32,36,123,114,98,40,97,41,125,96,44,32,110,101,119,32,82,40,97,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,59,10,32,32,32,32,32,32,125,44,32,104,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,110,117,108,108,32,61,61,61,32,97,41,32,114,101,116,117,114,110,32,34,110,117,108,108,34,59,10,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,116,121,112,101,111,102,32,97,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,111,98,106,101,99,116,34,32,61,61,61,32,98,32,124,124,32,34,97,114,114,97,121,34,32,61,61,61,32,98,32,124,124,32,34,102,117,110,99,116,105,111,110,34,32,61,61,61,32,98,32,63,32,97,46,116,111,83,116,114,105,110,103,40,41,32,58,32,34,34,32,43,32,97,59,10,32,32,32,32,32,32,125,44,32,69,98,32,61,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,115,119,105,116,99,104,32,40,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,52,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,117,110,99,116,105,111,110,40,99,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,114,111,109,87,105,114,101,84,121,112,101,40,111,97,91,99,32,62,62,32,50,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,56,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,117,110,99,116,105,111,110,40,99,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,114,111,109,87,105,114,101,84,121,112,101,40,112,97,91,99,32,62,62,32,51,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,32,32,100,101,102,97,117,108,116,58,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,84,121,112,101,69,114,114,111,114,40,96,105,110,118,97,108,105,100,32,102,108,111,97,116,32,119,105,100,116,104,32,40,36,123,98,125,41,58,32,36,123,97,125,96,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,44,32,70,98,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,115,119,105,116,99,104,32,40,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,49,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,32,63,32,40,100,41,32,61,62,32,117,91,100,93,32,58,32,40,100,41,32,61,62,32,120,91,100,93,59,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,50,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,32,63,32,40,100,41,32,61,62,32,121,91,100,32,62,62,32,49,93,32,58,32,40,100,41,32,61,62,32,122,91,100,32,62,62,32,49,93,59,10,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,52,58,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,32,63,32,40,100,41,32,61,62,32,65,91,100,32,62,62,32,50,93,32,58,32,40,100,41,32,61,62,32,66,91,100,32,62,62,32,50,93,59,10,32,32,32,32,32,32,32,32,32,32,100,101,102,97,117,108,116,58,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,84,121,112,101,69,114,114,111,114,40,96,105,110,118,97,108,105,100,32,105,110,116,101,103,101,114,32,119,105,100,116,104,32,40,36,123,98,125,41,58,32,36,123,97,125,96,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,44,32,71,98,32,61,32,79,98,106,101,99,116,46,97,115,115,105,103,110,40,123,32,111,112,116,105,111,110,97,108,58,32,116,114,117,101,32,125,44,32,66,98,41,44,32,72,98,32,61,32,34,117,110,100,101,102,105,110,101,100,34,32,33,61,32,116,121,112,101,111,102,32,84,101,120,116,68,101,99,111,100,101,114,32,63,32,110,101,119,32,84,101,120,116,68,101,99,111,100,101,114,40,34,117,116,102,45,49,54,108,101,34,41,32,58,32,118,111,105,100,32,48,44,32,73,98,32,61,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,97,32,62,62,32,49,59,10,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,100,32,61,32,99,32,43,32,98,32,47,32,50,59,32,33,40,99,32,62,61,32,100,41,32,38,38,32,122,91,99,93,59,32,41,32,43,43,99,59,10,32,32,32,32,32,32,32,32,99,32,60,60,61,32,49,59,10,32,32,32,32,32,32,32,32,105,102,32,40,51,50,32,60,32,99,32,45,32,97,32,38,38,32,72,98,41,32,114,101,116,117,114,110,32,72,98,46,100,101,99,111,100,101,40,120,46,115,117,98,97,114,114,97,121,40,97,44,32,99,41,41,59,10,32,32,32,32,32,32,32,32,99,32,61,32,34,34,59,10,32,32,32,32,32,32,32,32,102,111,114,32,40,100,32,61,32,48,59,32,33,40,100,32,62,61,32,98,32,47,32,50,41,59,32,43,43,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,121,91,97,32,43,32,50,32,42,32,100,32,62,62,32,49,93,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,48,32,61,61,32,101,41,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,32,32,99,32,43,61,32,83,116,114,105,110,103,46,102,114,111,109,67,104,97,114,67,111,100,101,40,101,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,59,10,32,32,32,32,32,32,125,44,32,74,98,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,99,32,63,63,32,40,99,32,61,32,50,49,52,55,52,56,51,54,52,55,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,50,32,62,32,99,41,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,99,32,45,61,32,50,59,10,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,98,59,10,32,32,32,32,32,32,32,32,99,32,61,32,99,32,60,32,50,32,42,32,97,46,108,101,110,103,116,104,32,63,32,99,32,47,32,50,32,58,32,97,46,108,101,110,103,116,104,59,10,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,101,32,61,32,48,59,32,101,32,60,32,99,59,32,43,43,101,41,32,121,91,98,32,62,62,32,49,93,32,61,32,97,46,99,104,97,114,67,111,100,101,65,116,40,101,41,44,32,98,32,43,61,32,50,59,10,32,32,32,32,32,32,32,32,121,91,98,32,62,62,32,49,93,32,61,32,48,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,32,45,32,100,59,10,32,32,32,32,32,32,125,44,32,75,98,32,61,32,40,97,41,32,61,62,32,50,32,42,32,97,46,108,101,110,103,116,104,44,32,76,98,32,61,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,99,32,61,32,48,44,32,100,32,61,32,34,34,59,32,33,40,99,32,62,61,32,98,32,47,32,52,41,59,32,41,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,65,91,97,32,43,32,52,32,42,32,99,32,62,62,32,50,93,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,48,32,61,61,32,101,41,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,32,32,43,43,99,59,10,32,32,32,32,32,32,32,32,32,32,54,53,53,51,54,32,60,61,32,101,32,63,32,40,101,32,45,61,32,54,53,53,51,54,44,32,100,32,43,61,32,83,116,114,105,110,103,46,102,114,111,109,67,104,97,114,67,111,100,101,40,53,53,50,57,54,32,124,32,101,32,62,62,32,49,48,44,32,53,54,51,50,48,32,124,32,101,32,38,32,49,48,50,51,41,41,32,58,32,100,32,43,61,32,83,116,114,105,110,103,46,102,114,111,109,67,104,97,114,67,111,100,101,40,101,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,100,59,10,32,32,32,32,32,32,125,44,32,77,98,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,99,32,63,63,32,40,99,32,61,32,50,49,52,55,52,56,51,54,52,55,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,52,32,62,32,99,41,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,98,59,10,32,32,32,32,32,32,32,32,99,32,61,32,100,32,43,32,99,32,45,32,52,59,10,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,101,32,61,32,48,59,32,101,32,60,32,97,46,108,101,110,103,116,104,59,32,43,43,101,41,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,102,32,61,32,97,46,99,104,97,114,67,111,100,101,65,116,40,101,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,53,53,50,57,54,32,60,61,32,102,32,38,38,32,53,55,51,52,51,32,62,61,32,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,97,46,99,104,97,114,67,111,100,101,65,116,40,43,43,101,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,102,32,61,32,54,53,53,51,54,32,43,32,40,40,102,32,38,32,49,48,50,51,41,32,60,60,32,49,48,41,32,124,32,104,32,38,32,49,48,50,51,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,65,91,98,32,62,62,32,50,93,32,61,32,102,59,10,32,32,32,32,32,32,32,32,32,32,98,32,43,61,32,52,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,98,32,43,32,52,32,62,32,99,41,32,98,114,101,97,107,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,65,91,98,32,62,62,32,50,93,32,61,32,48,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,32,45,32,100,59,10,32,32,32,32,32,32,125,44,32,78,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,98,32,61,32,48,44,32,99,32,61,32,48,59,32,99,32,60,32,97,46,108,101,110,103,116,104,59,32,43,43,99,41,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,97,46,99,104,97,114,67,111,100,101,65,116,40,99,41,59,10,32,32,32,32,32,32,32,32,32,32,53,53,50,57,54,32,60,61,32,100,32,38,38,32,53,55,51,52,51,32,62,61,32,100,32,38,38,32,43,43,99,59,10,32,32,32,32,32,32,32,32,32,32,98,32,43,61,32,52,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,59,10,32,32,32,32,32,32,125,44,32,79,98,32,61,32,48,44,32,80,98,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,91,93,59,10,32,32,32,32,32,32,32,32,97,32,61,32,97,46,116,111,87,105,114,101,84,121,112,101,40,100,44,32,99,41,59,10,32,32,32,32,32,32,32,32,100,46,108,101,110,103,116,104,32,38,38,32,40,66,91,98,32,62,62,32,50,93,32,61,32,106,98,40,100,41,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,59,10,32,32,32,32,32,32,125,44,32,81,98,32,61,32,91,93,44,32,82,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,81,98,46,108,101,110,103,116,104,59,10,32,32,32,32,32,32,32,32,81,98,46,112,117,115,104,40,97,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,59,10,32,32,32,32,32,32,125,44,32,83,98,32,61,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,99,32,61,32,65,114,114,97,121,40,97,41,44,32,100,32,61,32,48,59,32,100,32,60,32,97,59,32,43,43,100,41,32,99,91,100,93,32,61,32,68,98,40,66,91,98,32,43,32,52,32,42,32,100,32,62,62,32,50,93,44,32,34,112,97,114,97,109,101,116,101,114,32,34,32,43,32,100,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,59,10,32,32,32,32,32,32,125,44,32,84,98,32,61,32,82,101,102,108,101,99,116,46,99,111,110,115,116,114,117,99,116,44,32,85,98,32,61,32,123,125,44,32,86,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,33,40,97,32,105,110,115,116,97,110,99,101,111,102,32,66,97,32,124,124,32,34,117,110,119,105,110,100,34,32,61,61,32,97,41,41,32,116,104,114,111,119,32,97,59,10,32,32,32,32,32,32,125,44,32,87,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,110,97,32,61,32,97,59,10,32,32,32,32,32,32,32,32,68,97,32,124,124,32,48,32,60,32,79,98,32,124,124,32,40,107,46,111,110,69,120,105,116,63,46,40,97,41,44,32,109,97,32,61,32,116,114,117,101,41,59,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,66,97,40,97,41,59,10,32,32,32,32,32,32,125,44,32,88,98,32,61,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,33,109,97,41,10,32,32,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,97,40,41,44,32,33,40,68,97,32,124,124,32,48,32,60,32,79,98,41,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,110,97,32,61,32,97,32,61,32,110,97,44,32,87,98,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,86,98,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,86,98,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,44,32,89,98,32,61,32,123,125,44,32,36,98,32,61,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,33,90,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,97,32,61,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,85,83,69,82,58,32,34,119,101,98,95,117,115,101,114,34,44,10,32,32,32,32,32,32,32,32,32,32,32,32,76,79,71,78,65,77,69,58,32,34,119,101,98,95,117,115,101,114,34,44,10,32,32,32,32,32,32,32,32,32,32,32,32,80,65,84,72,58,32,34,47,34,44,10,32,32,32,32,32,32,32,32,32,32,32,32,80,87,68,58,32,34,47,34,44,10,32,32,32,32,32,32,32,32,32,32,32,32,72,79,77,69,58,32,34,47,104,111,109,101,47,119,101,98,95,117,115,101,114,34,44,10,32,32,32,32,32,32,32,32,32,32,32,32,76,65,78,71,58,32,40,34,111,98,106,101,99,116,34,32,61,61,32,116,121,112,101,111,102,32,110,97,118,105,103,97,116,111,114,32,38,38,32,110,97,118,105,103,97,116,111,114,46,108,97,110,103,117,97,103,101,115,32,38,38,32,110,97,118,105,103,97,116,111,114,46,108,97,110,103,117,97,103,101,115,91,48,93,32,124,124,32,34,67,34,41,46,114,101,112,108,97,99,101,40,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,34,45,34,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,34,95,34,10,32,32,32,32,32,32,32,32,32,32,32,32,41,32,43,32,34,46,85,84,70,45,56,34,44,10,32,32,32,32,32,32,32,32,32,32,32,32,95,58,32,101,97,32,124,124,32,34,46,47,116,104,105,115,46,112,114,111,103,114,97,109,34,10,32,32,32,32,32,32,32,32,32,32,125,44,32,98,59,10,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,98,32,105,110,32,89,98,41,32,118,111,105,100,32,48,32,61,61,61,32,89,98,91,98,93,32,63,32,100,101,108,101,116,101,32,97,91,98,93,32,58,32,97,91,98,93,32,61,32,89,98,91,98,93,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,91,93,59,10,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,98,32,105,110,32,97,41,32,99,46,112,117,115,104,40,96,36,123,98,125,61,36,123,97,91,98,93,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,90,98,32,61,32,99,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,90,98,59,10,32,32,32,32,32,32,125,44,32,90,98,44,32,97,99,32,61,32,91,110,117,108,108,44,32,91,93,44,32,91,93,93,44,32,98,99,32,61,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,34,111,98,106,101,99,116,34,32,61,61,32,116,121,112,101,111,102,32,99,114,121,112,116,111,32,38,38,32,34,102,117,110,99,116,105,111,110,34,32,61,61,32,116,121,112,101,111,102,32,99,114,121,112,116,111,46,103,101,116,82,97,110,100,111,109,86,97,108,117,101,115,41,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,40,97,41,32,61,62,32,99,114,121,112,116,111,46,103,101,116,82,97,110,100,111,109,86,97,108,117,101,115,40,97,41,59,10,32,32,32,32,32,32,32,32,118,97,40,34,105,110,105,116,82,97,110,100,111,109,68,101,118,105,99,101,34,41,59,10,32,32,32,32,32,32,125,44,32,99,99,32,61,32,40,97,41,32,61,62,32,40,99,99,32,61,32,98,99,40,41,41,40,97,41,59,10,32,32,32,32,32,32,77,97,32,61,32,107,46,73,110,116,101,114,110,97,108,69,114,114,111,114,32,61,32,99,108,97,115,115,32,101,120,116,101,110,100,115,32,69,114,114,111,114,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,40,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,115,117,112,101,114,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,110,97,109,101,32,61,32,34,73,110,116,101,114,110,97,108,69,114,114,111,114,34,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,100,99,32,61,32,65,114,114,97,121,40,50,53,54,41,44,32,101,99,32,61,32,48,59,32,50,53,54,32,62,32,101,99,59,32,43,43,101,99,41,32,100,99,91,101,99,93,32,61,32,83,116,114,105,110,103,46,102,114,111,109,67,104,97,114,67,111,100,101,40,101,99,41,59,10,32,32,32,32,32,32,78,97,32,61,32,100,99,59,10,32,32,32,32,32,32,82,32,61,32,107,46,66,105,110,100,105,110,103,69,114,114,111,114,32,61,32,99,108,97,115,115,32,101,120,116,101,110,100,115,32,69,114,114,111,114,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,40,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,115,117,112,101,114,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,110,97,109,101,32,61,32,34,66,105,110,100,105,110,103,69,114,114,111,114,34,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,79,98,106,101,99,116,46,97,115,115,105,103,110,40,36,97,46,112,114,111,116,111,116,121,112,101,44,32,123,10,32,32,32,32,32,32,32,32,105,115,65,108,105,97,115,79,102,58,32,102,117,110,99,116,105,111,110,40,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,33,40,116,104,105,115,32,105,110,115,116,97,110,99,101,111,102,32,36,97,32,38,38,32,97,32,105,110,115,116,97,110,99,101,111,102,32,36,97,41,41,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,116,104,105,115,46,78,97,46,81,97,46,80,97,44,32,99,32,61,32,116,104,105,115,46,78,97,46,79,97,59,10,32,32,32,32,32,32,32,32,32,32,97,46,78,97,32,61,32,97,46,78,97,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,97,46,78,97,46,81,97,46,80,97,59,10,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,97,32,61,32,97,46,78,97,46,79,97,59,32,98,46,84,97,59,32,41,32,99,32,61,32,98,46,99,98,40,99,41,44,32,98,32,61,32,98,46,84,97,59,10,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,59,32,100,46,84,97,59,32,41,32,97,32,61,32,100,46,99,98,40,97,41,44,32,100,32,61,32,100,46,84,97,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,98,32,61,61,61,32,100,32,38,38,32,99,32,61,61,61,32,97,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,99,108,111,110,101,58,32,102,117,110,99,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,78,97,46,79,97,32,124,124,32,81,97,40,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,78,97,46,98,98,41,32,114,101,116,117,114,110,32,116,104,105,115,46,78,97,46,99,111,117,110,116,46,118,97,108,117,101,32,43,61,32,49,44,32,116,104,105,115,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,97,32,61,32,88,97,44,32,98,32,61,32,79,98,106,101,99,116,44,32,99,32,61,32,98,46,99,114,101,97,116,101,44,32,100,32,61,32,79,98,106,101,99,116,46,103,101,116,80,114,111,116,111,116,121,112,101,79,102,40,116,104,105,115,41,44,32,101,32,61,32,116,104,105,115,46,78,97,59,10,32,32,32,32,32,32,32,32,32,32,97,32,61,32,97,40,10,32,32,32,32,32,32,32,32,32,32,32,32,99,46,99,97,108,108,40,98,44,32,100,44,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,78,97,58,32,123,32,118,97,108,117,101,58,32,123,32,99,111,117,110,116,58,32,101,46,99,111,117,110,116,44,32,97,98,58,32,101,46,97,98,44,32,98,98,58,32,101,46,98,98,44,32,79,97,58,32,101,46,79,97,44,32,81,97,58,32,101,46,81,97,44,32,83,97,58,32,101,46,83,97,44,32,85,97,58,32,101,46,85,97,32,125,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,125,41,10,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,32,32,97,46,78,97,46,99,111,117,110,116,46,118,97,108,117,101,32,43,61,32,49,59,10,32,32,32,32,32,32,32,32,32,32,97,46,78,97,46,97,98,32,61,32,102,97,108,115,101,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,91,34,100,101,108,101,116,101,34,93,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,78,97,46,79,97,32,124,124,32,81,97,40,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,78,97,46,97,98,32,38,38,32,33,116,104,105,115,46,78,97,46,98,98,41,32,116,104,114,111,119,32,110,101,119,32,82,40,34,79,98,106,101,99,116,32,97,108,114,101,97,100,121,32,115,99,104,101,100,117,108,101,100,32,102,111,114,32,100,101,108,101,116,105,111,110,34,41,59,10,32,32,32,32,32,32,32,32,32,32,83,97,40,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,97,32,61,32,116,104,105,115,46,78,97,59,10,32,32,32,32,32,32,32,32,32,32,45,45,97,46,99,111,117,110,116,46,118,97,108,117,101,59,10,32,32,32,32,32,32,32,32,32,32,48,32,61,61,61,32,97,46,99,111,117,110,116,46,118,97,108,117,101,32,38,38,32,40,97,46,83,97,32,63,32,97,46,85,97,46,88,97,40,97,46,83,97,41,32,58,32,97,46,81,97,46,80,97,46,88,97,40,97,46,79,97,41,41,59,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,78,97,46,98,98,32,124,124,32,40,116,104,105,115,46,78,97,46,83,97,32,61,32,118,111,105,100,32,48,44,32,116,104,105,115,46,78,97,46,79,97,32,61,32,118,111,105,100,32,48,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,105,115,68,101,108,101,116,101,100,58,32,102,117,110,99,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,33,116,104,105,115,46,78,97,46,79,97,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,100,101,108,101,116,101,76,97,116,101,114,58,32,102,117,110,99,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,78,97,46,79,97,32,124,124,32,81,97,40,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,78,97,46,97,98,32,38,38,32,33,116,104,105,115,46,78,97,46,98,98,41,32,116,104,114,111,119,32,110,101,119,32,82,40,34,79,98,106,101,99,116,32,97,108,114,101,97,100,121,32,115,99,104,101,100,117,108,101,100,32,102,111,114,32,100,101,108,101,116,105,111,110,34,41,59,10,32,32,32,32,32,32,32,32,32,32,90,97,46,112,117,115,104,40,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,78,97,46,97,98,32,61,32,116,114,117,101,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,79,98,106,101,99,116,46,97,115,115,105,103,110,40,108,98,46,112,114,111,116,111,116,121,112,101,44,32,123,10,32,32,32,32,32,32,32,32,113,98,40,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,108,98,32,38,38,32,40,97,32,61,32,116,104,105,115,46,108,98,40,97,41,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,106,98,40,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,88,97,63,46,40,97,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,86,97,58,32,56,44,10,32,32,32,32,32,32,32,32,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,58,32,76,44,10,32,32,32,32,32,32,32,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,102,117,110,99,116,105,111,110,40,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,98,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,98,32,63,32,89,97,40,116,104,105,115,46,80,97,46,90,97,44,32,123,32,81,97,58,32,116,104,105,115,46,118,98,44,32,79,97,58,32,99,44,32,85,97,58,32,116,104,105,115,44,32,83,97,58,32,97,32,125,41,32,58,32,89,97,40,116,104,105,115,46,80,97,46,90,97,44,32,123,32,81,97,58,32,116,104,105,115,44,32,79,97,58,32,97,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,116,104,105,115,46,113,98,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,33,99,41,32,114,101,116,117,114,110,32,116,104,105,115,46,106,98,40,97,41,44,32,110,117,108,108,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,87,97,40,116,104,105,115,46,80,97,44,32,99,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,118,111,105,100,32,48,32,33,61,61,32,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,48,32,61,61,61,32,100,46,78,97,46,99,111,117,110,116,46,118,97,108,117,101,41,32,114,101,116,117,114,110,32,100,46,78,97,46,79,97,32,61,32,99,44,32,100,46,78,97,46,83,97,32,61,32,97,44,32,100,46,99,108,111,110,101,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,100,32,61,32,100,46,99,108,111,110,101,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,106,98,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,100,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,100,32,61,32,116,104,105,115,46,80,97,46,112,98,40,99,41,59,10,32,32,32,32,32,32,32,32,32,32,100,32,61,32,85,97,91,100,93,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,33,100,41,32,114,101,116,117,114,110,32,98,46,99,97,108,108,40,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,32,32,100,32,61,32,116,104,105,115,46,101,98,32,63,32,100,46,109,98,32,58,32,100,46,112,111,105,110,116,101,114,84,121,112,101,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,84,97,40,99,44,32,116,104,105,115,46,80,97,44,32,100,46,80,97,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,110,117,108,108,32,61,61,61,32,101,32,63,32,98,46,99,97,108,108,40,116,104,105,115,41,32,58,32,116,104,105,115,46,102,98,32,63,32,89,97,40,100,46,80,97,46,90,97,44,32,123,32,81,97,58,32,100,44,32,79,97,58,32,101,44,32,85,97,58,32,116,104,105,115,44,32,83,97,58,32,97,32,125,41,32,58,32,89,97,40,100,46,80,97,46,90,97,44,32,123,32,81,97,58,32,100,44,32,79,97,58,32,101,32,125,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,112,98,32,61,32,107,46,85,110,98,111,117,110,100,84,121,112,101,69,114,114,111,114,32,61,32,40,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,97,98,40,98,44,32,102,117,110,99,116,105,111,110,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,110,97,109,101,32,61,32,98,59,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,109,101,115,115,97,103,101,32,61,32,100,59,10,32,32,32,32,32,32,32,32,32,32,100,32,61,32,69,114,114,111,114,40,100,41,46,115,116,97,99,107,59,10,32,32,32,32,32,32,32,32,32,32,118,111,105,100,32,48,32,33,61,61,32,100,32,38,38,32,40,116,104,105,115,46,115,116,97,99,107,32,61,32,116,104,105,115,46,116,111,83,116,114,105,110,103,40,41,32,43,32,34,92,110,34,32,43,32,100,46,114,101,112,108,97,99,101,40,47,94,69,114,114,111,114,40,58,91,94,92,110,93,42,41,63,92,110,47,44,32,34,34,41,41,59,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,99,46,112,114,111,116,111,116,121,112,101,32,61,32,79,98,106,101,99,116,46,99,114,101,97,116,101,40,97,46,112,114,111,116,111,116,121,112,101,41,59,10,32,32,32,32,32,32,32,32,99,46,112,114,111,116,111,116,121,112,101,46,99,111,110,115,116,114,117,99,116,111,114,32,61,32,99,59,10,32,32,32,32,32,32,32,32,99,46,112,114,111,116,111,116,121,112,101,46,116,111,83,116,114,105,110,103,32,61,32,102,117,110,99,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,118,111,105,100,32,48,32,61,61,61,32,116,104,105,115,46,109,101,115,115,97,103,101,32,63,32,116,104,105,115,46,110,97,109,101,32,58,32,96,36,123,116,104,105,115,46,110,97,109,101,125,58,32,36,123,116,104,105,115,46,109,101,115,115,97,103,101,125,96,59,10,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,59,10,32,32,32,32,32,32,125,41,40,69,114,114,111,114,44,32,34,85,110,98,111,117,110,100,84,121,112,101,69,114,114,111,114,34,41,59,10,32,32,32,32,32,32,86,46,112,117,115,104,40,48,44,32,49,44,32,118,111,105,100,32,48,44,32,49,44,32,110,117,108,108,44,32,49,44,32,116,114,117,101,44,32,49,44,32,102,97,108,115,101,44,32,49,41,59,10,32,32,32,32,32,32,107,46,99,111,117,110,116,95,101,109,118,97,108,95,104,97,110,100,108,101,115,32,61,32,40,41,32,61,62,32,86,46,108,101,110,103,116,104,32,47,32,50,32,45,32,53,32,45,32,121,98,46,108,101,110,103,116,104,59,10,32,32,32,32,32,32,118,97,114,32,119,99,32,61,32,123,10,32,32,32,32,32,32,32,32,99,58,32,40,97,44,32,98,44,32,99,44,32,100,41,32,61,62,32,118,97,40,10,32,32,32,32,32,32,32,32,32,32,96,65,115,115,101,114,116,105,111,110,32,102,97,105,108,101,100,58,32,36,123,97,32,63,32,71,40,120,44,32,97,41,32,58,32,34,34,125,44,32,97,116,58,32,96,32,43,32,91,98,32,63,32,98,32,63,32,71,40,120,44,32,98,41,32,58,32,34,34,32,58,32,34,117,110,107,110,111,119,110,32,102,105,108,101,110,97,109,101,34,44,32,99,44,32,100,32,63,32,100,32,63,32,71,40,120,44,32,100,41,32,58,32,34,34,32,58,32,34,117,110,107,110,111,119,110,32,102,117,110,99,116,105,111,110,34,93,10,32,32,32,32,32,32,32,32,41,44,10,32,32,32,32,32,32,32,32,100,58,32,40,41,32,61,62,32,72,97,40,41,44,10,32,32,32,32,32,32,32,32,110,58,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,110,101,119,32,70,97,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,66,91,100,46,79,97,32,43,32,49,54,32,62,62,32,50,93,32,61,32,48,59,10,32,32,32,32,32,32,32,32,32,32,66,91,100,46,79,97,32,43,32,52,32,62,62,32,50,93,32,61,32,98,59,10,32,32,32,32,32,32,32,32,32,32,66,91,100,46,79,97,32,43,32,56,32,62,62,32,50,93,32,61,32,99,59,10,32,32,32,32,32,32,32,32,32,32,73,32,61,32,97,59,10,32,32,32,32,32,32,32,32,32,32,73,97,43,43,59,10,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,73,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,101,58,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,73,32,124,124,32,40,73,32,61,32,97,41,59,10,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,73,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,83,58,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,80,58,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,81,58,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,85,58,32,102,117,110,99,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,82,58,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,87,58,32,40,41,32,61,62,32,118,97,40,34,34,41,44,10,32,32,32,32,32,32,32,32,119,58,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,74,97,91,97,93,59,10,32,32,32,32,32,32,32,32,32,32,100,101,108,101,116,101,32,74,97,91,97,93,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,98,46,104,98,44,32,100,32,61,32,98,46,88,97,44,32,101,32,61,32,98,46,107,98,44,32,102,32,61,32,101,46,109,97,112,40,40,104,41,32,61,62,32,104,46,116,98,41,46,99,111,110,99,97,116,40,101,46,109,97,112,40,40,104,41,32,61,62,32,104,46,122,98,41,41,59,10,32,32,32,32,32,32,32,32,32,32,80,40,91,97,93,44,32,102,44,32,40,104,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,103,32,61,32,123,125,59,10,32,32,32,32,32,32,32,32,32,32,32,32,101,46,102,111,114,69,97,99,104,40,40,108,44,32,109,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,110,32,61,32,104,91,109,93,44,32,112,32,61,32,108,46,114,98,44,32,116,32,61,32,108,46,115,98,44,32,69,32,61,32,104,91,109,32,43,32,101,46,108,101,110,103,116,104,93,44,32,118,32,61,32,108,46,121,98,44,32,119,32,61,32,108,46,65,98,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,103,91,108,46,111,98,93,32,61,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,97,100,58,32,40,72,41,32,61,62,32,110,46,102,114,111,109,87,105,114,101,84,121,112,101,40,112,40,116,44,32,72,41,41,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,119,114,105,116,101,58,32,40,72,44,32,102,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,70,32,61,32,91,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,40,119,44,32,72,44,32,69,46,116,111,87,105,114,101,84,121,112,101,40,70,44,32,102,97,41,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,75,97,40,70,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,91,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,110,97,109,101,58,32,98,46,110,97,109,101,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,40,108,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,109,32,61,32,123,125,44,32,110,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,110,32,105,110,32,103,41,32,109,91,110,93,32,61,32,103,91,110,93,46,114,101,97,100,40,108,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,40,108,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,109,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,111,87,105,114,101,84,121,112,101,58,32,40,108,44,32,109,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,110,32,105,110,32,103,41,32,105,102,32,40,33,40,110,32,105,110,32,109,41,41,32,116,104,114,111,119,32,110,101,119,32,84,121,112,101,69,114,114,111,114,40,96,77,105,115,115,105,110,103,32,102,105,101,108,100,58,32,34,36,123,110,125,34,96,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,112,32,61,32,99,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,110,32,105,110,32,103,41,32,103,91,110,93,46,119,114,105,116,101,40,112,44,32,109,91,110,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,110,117,108,108,32,33,61,61,32,108,32,38,38,32,108,46,112,117,115,104,40,100,44,32,112,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,112,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,86,97,58,32,56,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,58,32,76,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,87,97,58,32,100,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,93,59,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,72,58,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,101,97,58,32,40,97,44,32,98,44,32,99,44,32,100,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,81,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,79,40,97,44,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,110,97,109,101,58,32,98,44,10,32,32,32,32,32,32,32,32,32,32,32,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,102,117,110,99,116,105,111,110,40,101,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,33,33,101,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,116,111,87,105,114,101,84,121,112,101,58,32,102,117,110,99,116,105,111,110,40,101,44,32,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,32,63,32,99,32,58,32,100,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,86,97,58,32,56,44,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,58,32,102,117,110,99,116,105,111,110,40,101,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,102,114,111,109,87,105,114,101,84,121,112,101,40,120,91,101,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,87,97,58,32,110,117,108,108,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,117,58,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,44,32,109,44,32,110,44,32,112,44,32,116,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,110,32,61,32,81,40,110,41,59,10,32,32,32,32,32,32,32,32,32,32,102,32,61,32,84,40,101,44,32,102,41,59,10,32,32,32,32,32,32,32,32,32,32,103,32,38,38,32,40,103,32,61,32,84,40,104,44,32,103,41,41,59,10,32,32,32,32,32,32,32,32,32,32,109,32,38,38,32,40,109,32,61,32,84,40,108,44,32,109,41,41,59,10,32,32,32,32,32,32,32,32,32,32,116,32,61,32,84,40,112,44,32,116,41,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,69,32,61,32,100,98,40,110,41,59,10,32,32,32,32,32,32,32,32,32,32,99,98,40,69,44,32,102,117,110,99,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,115,98,40,96,67,97,110,110,111,116,32,99,111,110,115,116,114,117,99,116,32,36,123,110,125,32,100,117,101,32,116,111,32,117,110,98,111,117,110,100,32,116,121,112,101,115,96,44,32,91,100,93,41,59,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,80,40,91,97,44,32,98,44,32,99,93,44,32,100,32,63,32,91,100,93,32,58,32,91,93,44,32,40,118,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,32,61,32,118,91,48,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,119,32,61,32,118,46,80,97,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,72,32,61,32,119,46,90,97,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,72,32,61,32,36,97,46,112,114,111,116,111,116,121,112,101,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,32,61,32,97,98,40,110,44,32,102,117,110,99,116,105,111,110,40,46,46,46,80,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,79,98,106,101,99,116,46,103,101,116,80,114,111,116,111,116,121,112,101,79,102,40,116,104,105,115,41,32,33,61,61,32,102,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,34,85,115,101,32,39,110,101,119,39,32,116,111,32,99,111,110,115,116,114,117,99,116,32,34,32,43,32,110,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,118,111,105,100,32,48,32,61,61,61,32,70,46,89,97,41,32,116,104,114,111,119,32,110,101,119,32,82,40,110,32,43,32,34,32,104,97,115,32,110,111,32,97,99,99,101,115,115,105,98,108,101,32,99,111,110,115,116,114,117,99,116,111,114,34,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,120,98,32,61,32,70,46,89,97,91,80,97,46,108,101,110,103,116,104,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,118,111,105,100,32,48,32,61,61,61,32,120,98,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,96,84,114,105,101,100,32,116,111,32,105,110,118,111,107,101,32,99,116,111,114,32,111,102,32,36,123,110,125,32,119,105,116,104,32,105,110,118,97,108,105,100,32,110,117,109,98,101,114,32,111,102,32,112,97,114,97,109,101,116,101,114,115,32,40,36,123,80,97,46,108,101,110,103,116,104,125,41,32,45,32,101,120,112,101,99,116,101,100,32,40,36,123,79,98,106,101,99,116,46,107,101,121,115,40,70,46,89,97,41,46,116,111,83,116,114,105,110,103,40,41,125,41,32,112,97,114,97,109,101,116,101,114,115,32,105,110,115,116,101,97,100,33,96,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,120,98,46,97,112,112,108,121,40,116,104,105,115,44,32,80,97,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,102,97,32,61,32,79,98,106,101,99,116,46,99,114,101,97,116,101,40,72,44,32,123,32,99,111,110,115,116,114,117,99,116,111,114,58,32,123,32,118,97,108,117,101,58,32,118,32,125,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,46,112,114,111,116,111,116,121,112,101,32,61,32,102,97,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,70,32,61,32,110,101,119,32,101,98,40,110,44,32,118,44,32,102,97,44,32,116,44,32,119,44,32,102,44,32,103,44,32,109,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,70,46,84,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,104,97,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,40,104,97,32,61,32,70,46,84,97,41,46,105,98,32,63,63,32,40,104,97,46,105,98,32,61,32,91,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,70,46,84,97,46,105,98,46,112,117,115,104,40,70,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,119,32,61,32,110,101,119,32,108,98,40,110,44,32,70,44,32,116,114,117,101,44,32,102,97,108,115,101,44,32,102,97,108,115,101,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,104,97,32,61,32,110,101,119,32,108,98,40,110,32,43,32,34,42,34,44,32,70,44,32,102,97,108,115,101,44,32,102,97,108,115,101,44,32,102,97,108,115,101,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,72,32,61,32,110,101,119,32,108,98,40,110,32,43,32,34,32,99,111,110,115,116,42,34,44,32,70,44,32,102,97,108,115,101,44,32,116,114,117,101,44,32,102,97,108,115,101,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,85,97,91,97,93,32,61,32,123,32,112,111,105,110,116,101,114,84,121,112,101,58,32,104,97,44,32,109,98,58,32,72,32,125,59,10,32,32,32,32,32,32,32,32,32,32,32,32,109,98,40,69,44,32,118,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,91,119,44,32,104,97,44,32,72,93,59,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,116,58,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,116,98,40,98,44,32,99,41,59,10,32,32,32,32,32,32,32,32,32,32,101,32,61,32,84,40,100,44,32,101,41,59,10,32,32,32,32,32,32,32,32,32,32,80,40,91,93,44,32,91,97,93,44,32,40,103,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,103,32,61,32,103,91,48,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,108,32,61,32,96,99,111,110,115,116,114,117,99,116,111,114,32,36,123,103,46,110,97,109,101,125,96,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,111,105,100,32,48,32,61,61,61,32,103,46,80,97,46,89,97,32,38,38,32,40,103,46,80,97,46,89,97,32,61,32,91,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,118,111,105,100,32,48,32,33,61,61,32,103,46,80,97,46,89,97,91,98,32,45,32,49,93,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,96,67,97,110,110,111,116,32,114,101,103,105,115,116,101,114,32,109,117,108,116,105,112,108,101,32,99,111,110,115,116,114,117,99,116,111,114,115,32,119,105,116,104,32,105,100,101,110,116,105,99,97,108,32,110,117,109,98,101,114,32,111,102,32,112,97,114,97,109,101,116,101,114,115,32,40,36,123,98,32,45,32,49,125,41,32,102,111,114,32,99,108,97,115,115,32,39,36,123,103,46,110,97,109,101,125,39,33,32,79,118,101,114,108,111,97,100,32,114,101,115,111,108,117,116,105,111,110,32,105,115,32,99,117,114,114,101,110,116,108,121,32,111,110,108,121,32,112,101,114,102,111,114,109,101,100,32,117,115,105,110,103,32,116,104,101,32,112,97,114,97,109,101,116,101,114,32,99,111,117,110,116,44,32,110,111,116,32,97,99,116,117,97,108,32,116,121,112,101,32,105,110,102,111,33,96,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,103,46,80,97,46,89,97,91,98,32,45,32,49,93,32,61,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,115,98,40,96,67,97,110,110,111,116,32,99,111,110,115,116,114,117,99,116,32,36,123,103,46,110,97,109,101,125,32,100,117,101,32,116,111,32,117,110,98,111,117,110,100,32,116,121,112,101,115,96,44,32,104,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,32,32,32,32,80,40,91,93,44,32,104,44,32,40,109,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,109,46,115,112,108,105,99,101,40,49,44,32,48,44,32,110,117,108,108,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,103,46,80,97,46,89,97,91,98,32,45,32,49,93,32,61,32,118,98,40,108,44,32,109,44,32,110,117,108,108,44,32,101,44,32,102,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,91,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,91,93,59,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,104,58,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,108,32,61,32,116,98,40,99,44,32,100,41,59,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,81,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,119,98,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,102,32,61,32,84,40,101,44,32,102,41,59,10,32,32,32,32,32,32,32,32,32,32,80,40,91,93,44,32,91,97,93,44,32,40,109,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,110,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,115,98,40,96,67,97,110,110,111,116,32,99,97,108,108,32,36,123,112,125,32,100,117,101,32,116,111,32,117,110,98,111,117,110,100,32,116,121,112,101,115,96,44,32,108,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,109,32,61,32,109,91,48,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,112,32,61,32,96,36,123,109,46,110,97,109,101,125,46,36,123,98,125,96,59,10,32,32,32,32,32,32,32,32,32,32,32,32,98,46,115,116,97,114,116,115,87,105,116,104,40,34,64,64,34,41,32,38,38,32,40,98,32,61,32,83,121,109,98,111,108,91,98,46,115,117,98,115,116,114,105,110,103,40,50,41,93,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,103,32,38,38,32,109,46,80,97,46,119,98,46,112,117,115,104,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,116,32,61,32,109,46,80,97,46,90,97,44,32,69,32,61,32,116,91,98,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,111,105,100,32,48,32,61,61,61,32,69,32,124,124,32,118,111,105,100,32,48,32,61,61,61,32,69,46,82,97,32,38,38,32,69,46,99,108,97,115,115,78,97,109,101,32,33,61,61,32,109,46,110,97,109,101,32,38,38,32,69,46,36,97,32,61,61,61,32,99,32,45,32,50,32,63,32,40,110,46,36,97,32,61,32,99,32,45,32,50,44,32,110,46,99,108,97,115,115,78,97,109,101,32,61,32,109,46,110,97,109,101,44,32,116,91,98,93,32,61,32,110,41,32,58,32,40,98,98,40,116,44,32,98,44,32,112,41,44,32,116,91,98,93,46,82,97,91,99,32,45,32,50,93,32,61,32,110,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,80,40,91,93,44,32,108,44,32,40,118,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,32,61,32,118,98,40,112,44,32,118,44,32,109,44,32,102,44,32,104,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,111,105,100,32,48,32,61,61,61,32,116,91,98,93,46,82,97,32,63,32,40,118,46,36,97,32,61,32,99,32,45,32,50,44,32,116,91,98,93,32,61,32,118,41,32,58,32,116,91,98,93,46,82,97,91,99,32,45,32,50,93,32,61,32,118,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,91,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,91,93,59,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,99,97,58,32,40,97,41,32,61,62,32,79,40,97,44,32,66,98,41,44,10,32,32,32,32,32,32,32,32,121,58,32,40,97,44,32,98,44,32,99,44,32,100,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,101,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,81,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,101,46,118,97,108,117,101,115,32,61,32,123,125,59,10,32,32,32,32,32,32,32,32,32,32,79,40,97,44,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,110,97,109,101,58,32,98,44,10,32,32,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,58,32,101,44,10,32,32,32,32,32,32,32,32,32,32,32,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,102,117,110,99,116,105,111,110,40,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,99,111,110,115,116,114,117,99,116,111,114,46,118,97,108,117,101,115,91,102,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,116,111,87,105,114,101,84,121,112,101,58,32,40,102,44,32,104,41,32,61,62,32,104,46,118,97,108,117,101,44,10,32,32,32,32,32,32,32,32,32,32,32,32,86,97,58,32,56,44,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,58,32,67,98,40,98,44,32,99,44,32,100,41,44,10,32,32,32,32,32,32,32,32,32,32,32,32,87,97,58,32,110,117,108,108,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,99,98,40,98,44,32,101,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,108,58,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,68,98,40,97,44,32,34,101,110,117,109,34,41,59,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,81,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,97,32,61,32,100,46,99,111,110,115,116,114,117,99,116,111,114,59,10,32,32,32,32,32,32,32,32,32,32,100,32,61,32,79,98,106,101,99,116,46,99,114,101,97,116,101,40,100,46,99,111,110,115,116,114,117,99,116,111,114,46,112,114,111,116,111,116,121,112,101,44,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,108,117,101,58,32,123,32,118,97,108,117,101,58,32,99,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,58,32,123,32,118,97,108,117,101,58,32,97,98,40,96,36,123,100,46,110,97,109,101,125,95,36,123,98,125,96,44,32,102,117,110,99,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,125,41,32,125,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,97,46,118,97,108,117,101,115,91,99,93,32,61,32,100,59,10,32,32,32,32,32,32,32,32,32,32,97,91,98,93,32,61,32,100,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,69,58,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,81,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,79,40,97,44,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,110,97,109,101,58,32,98,44,10,32,32,32,32,32,32,32,32,32,32,32,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,40,100,41,32,61,62,32,100,44,10,32,32,32,32,32,32,32,32,32,32,32,32,116,111,87,105,114,101,84,121,112,101,58,32,40,100,44,32,101,41,32,61,62,32,101,44,10,32,32,32,32,32,32,32,32,32,32,32,32,86,97,58,32,56,44,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,58,32,69,98,40,98,44,32,99,41,44,10,32,32,32,32,32,32,32,32,32,32,32,32,87,97,58,32,110,117,108,108,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,118,58,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,116,98,40,98,44,32,99,41,59,10,32,32,32,32,32,32,32,32,32,32,97,32,61,32,81,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,97,32,61,32,119,98,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,101,32,61,32,84,40,100,44,32,101,41,59,10,32,32,32,32,32,32,32,32,32,32,99,98,40,10,32,32,32,32,32,32,32,32,32,32,32,32,97,44,10,32,32,32,32,32,32,32,32,32,32,32,32,102,117,110,99,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,115,98,40,96,67,97,110,110,111,116,32,99,97,108,108,32,36,123,97,125,32,100,117,101,32,116,111,32,117,110,98,111,117,110,100,32,116,121,112,101,115,96,44,32,104,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,98,32,45,32,49,10,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,32,32,80,40,91,93,44,32,104,44,32,40,103,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,109,98,40,97,44,32,118,98,40,97,44,32,91,103,91,48,93,44,32,110,117,108,108,93,46,99,111,110,99,97,116,40,103,46,115,108,105,99,101,40,49,41,41,44,32,110,117,108,108,44,32,101,44,32,102,41,44,32,98,32,45,32,49,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,91,93,59,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,112,58,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,81,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,45,49,32,61,61,61,32,101,32,38,38,32,40,101,32,61,32,52,50,57,52,57,54,55,50,57,53,41,59,10,32,32,32,32,32,32,32,32,32,32,101,32,61,32,40,103,41,32,61,62,32,103,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,48,32,61,61,61,32,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,102,32,61,32,51,50,32,45,32,56,32,42,32,99,59,10,32,32,32,32,32,32,32,32,32,32,32,32,101,32,61,32,40,103,41,32,61,62,32,103,32,60,60,32,102,32,62,62,62,32,102,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,98,46,105,110,99,108,117,100,101,115,40,34,117,110,115,105,103,110,101,100,34,41,32,63,32,102,117,110,99,116,105,111,110,40,103,44,32,108,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,108,32,62,62,62,32,48,59,10,32,32,32,32,32,32,32,32,32,32,125,32,58,32,102,117,110,99,116,105,111,110,40,103,44,32,108,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,108,59,10,32,32,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,32,32,79,40,97,44,32,123,32,110,97,109,101,58,32,98,44,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,101,44,32,116,111,87,105,114,101,84,121,112,101,58,32,104,44,32,86,97,58,32,56,44,32,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,58,32,70,98,40,98,44,32,99,44,32,48,32,33,61,61,32,100,41,44,32,87,97,58,32,110,117,108,108,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,107,58,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,100,40,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,110,101,119,32,101,40,117,46,98,117,102,102,101,114,44,32,66,91,102,32,43,32,52,32,62,62,32,50,93,44,32,66,91,102,32,62,62,32,50,93,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,91,73,110,116,56,65,114,114,97,121,44,32,85,105,110,116,56,65,114,114,97,121,44,32,73,110,116,49,54,65,114,114,97,121,44,32,85,105,110,116,49,54,65,114,114,97,121,44,32,73,110,116,51,50,65,114,114,97,121,44,32,85,105,110,116,51,50,65,114,114,97,121,44,32,70,108,111,97,116,51,50,65,114,114,97,121,44,32,70,108,111,97,116,54,52,65,114,114,97,121,93,91,98,93,59,10,32,32,32,32,32,32,32,32,32,32,99,32,61,32,81,40,99,41,59,10,32,32,32,32,32,32,32,32,32,32,79,40,97,44,32,123,32,110,97,109,101,58,32,99,44,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,100,44,32,86,97,58,32,56,44,32,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,58,32,100,32,125,44,32,123,32,117,98,58,32,116,114,117,101,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,120,58,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,79,40,97,44,32,71,98,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,107,97,58,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,44,32,109,44,32,110,44,32,112,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,99,32,61,32,81,40,99,41,59,10,32,32,32,32,32,32,32,32,32,32,102,32,61,32,84,40,101,44,32,102,41,59,10,32,32,32,32,32,32,32,32,32,32,103,32,61,32,84,40,104,44,32,103,41,59,10,32,32,32,32,32,32,32,32,32,32,109,32,61,32,84,40,108,44,32,109,41,59,10,32,32,32,32,32,32,32,32,32,32,112,32,61,32,84,40,110,44,32,112,41,59,10,32,32,32,32,32,32,32,32,32,32,80,40,91,97,93,44,32,91,98,93,44,32,40,116,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,116,32,61,32,116,91,48,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,91,110,101,119,32,108,98,40,99,44,32,116,46,80,97,44,32,102,97,108,115,101,44,32,102,97,108,115,101,44,32,116,114,117,101,44,32,116,44,32,100,44,32,102,44,32,103,44,32,109,44,32,112,41,93,59,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,100,97,58,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,81,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,79,40,97,44,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,110,97,109,101,58,32,98,44,10,32,32,32,32,32,32,32,32,32,32,32,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,102,117,110,99,116,105,111,110,40,99,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,100,32,61,32,66,91,99,32,62,62,32,50,93,44,32,101,32,61,32,99,32,43,32,52,44,32,102,44,32,104,32,61,32,101,44,32,103,32,61,32,48,59,32,103,32,60,61,32,100,59,32,43,43,103,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,108,32,61,32,101,32,43,32,103,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,103,32,61,61,32,100,32,124,124,32,48,32,61,61,32,120,91,108,93,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,104,32,61,32,104,32,63,32,71,40,120,44,32,104,44,32,108,32,45,32,104,41,32,58,32,34,34,44,32,118,111,105,100,32,48,32,61,61,61,32,102,32,63,32,102,32,61,32,104,32,58,32,40,102,32,43,61,32,83,116,114,105,110,103,46,102,114,111,109,67,104,97,114,67,111,100,101,40,48,41,44,32,102,32,43,61,32,104,41,44,32,104,32,61,32,108,32,43,32,49,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,85,40,99,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,116,111,87,105,114,101,84,121,112,101,58,32,102,117,110,99,116,105,111,110,40,99,44,32,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,32,105,110,115,116,97,110,99,101,111,102,32,65,114,114,97,121,66,117,102,102,101,114,32,38,38,32,40,100,32,61,32,110,101,119,32,85,105,110,116,56,65,114,114,97,121,40,100,41,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,101,44,32,102,32,61,32,34,115,116,114,105,110,103,34,32,61,61,32,116,121,112,101,111,102,32,100,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,33,40,102,32,124,124,32,100,32,105,110,115,116,97,110,99,101,111,102,32,85,105,110,116,56,65,114,114,97,121,32,124,124,32,100,32,105,110,115,116,97,110,99,101,111,102,32,85,105,110,116,56,67,108,97,109,112,101,100,65,114,114,97,121,32,124,124,32,100,32,105,110,115,116,97,110,99,101,111,102,32,73,110,116,56,65,114,114,97,121,41,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,82,40,34,67,97,110,110,111,116,32,112,97,115,115,32,110,111,110,45,115,116,114,105,110,103,32,116,111,32,115,116,100,58,58,115,116,114,105,110,103,34,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,102,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,104,32,61,32,101,32,61,32,48,59,32,104,32,60,32,100,46,108,101,110,103,116,104,59,32,43,43,104,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,103,32,61,32,100,46,99,104,97,114,67,111,100,101,65,116,40,104,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,49,50,55,32,62,61,32,103,32,63,32,101,43,43,32,58,32,50,48,52,55,32,62,61,32,103,32,63,32,101,32,43,61,32,50,32,58,32,53,53,50,57,54,32,60,61,32,103,32,38,38,32,53,55,51,52,51,32,62,61,32,103,32,63,32,40,101,32,43,61,32,52,44,32,43,43,104,41,32,58,32,101,32,43,61,32,51,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,108,115,101,32,101,32,61,32,100,46,108,101,110,103,116,104,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,104,32,61,32,102,99,40,52,32,43,32,101,32,43,32,49,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,103,32,61,32,104,32,43,32,52,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,66,91,104,32,62,62,32,50,93,32,61,32,101,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,102,41,32,75,40,100,44,32,103,44,32,101,32,43,32,49,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,108,115,101,32,105,102,32,40,102,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,102,32,61,32,48,59,32,102,32,60,32,101,59,32,43,43,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,108,32,61,32,100,46,99,104,97,114,67,111,100,101,65,116,40,102,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,50,53,53,32,60,32,108,41,32,116,104,114,111,119,32,85,40,103,41,44,32,110,101,119,32,82,40,34,83,116,114,105,110,103,32,104,97,115,32,85,84,70,45,49,54,32,99,111,100,101,32,117,110,105,116,115,32,116,104,97,116,32,100,111,32,110,111,116,32,102,105,116,32,105,110,32,56,32,98,105,116,115,34,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,120,91,103,32,43,32,102,93,32,61,32,108,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,108,115,101,32,102,111,114,32,40,102,32,61,32,48,59,32,102,32,60,32,101,59,32,43,43,102,41,32,120,91,103,32,43,32,102,93,32,61,32,100,91,102,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,110,117,108,108,32,33,61,61,32,99,32,38,38,32,99,46,112,117,115,104,40,85,44,32,104,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,104,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,86,97,58,32,56,44,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,58,32,76,44,10,32,32,32,32,32,32,32,32,32,32,32,32,87,97,40,99,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,85,40,99,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,65,58,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,99,32,61,32,81,40,99,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,50,32,61,61,61,32,98,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,73,98,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,74,98,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,102,32,61,32,75,98,59,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,40,103,41,32,61,62,32,122,91,103,32,62,62,32,49,93,59,10,32,32,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,52,32,61,61,61,32,98,32,38,38,32,40,100,32,61,32,76,98,44,32,101,32,61,32,77,98,44,32,102,32,61,32,78,98,44,32,104,32,61,32,40,103,41,32,61,62,32,66,91,103,32,62,62,32,50,93,41,59,10,32,32,32,32,32,32,32,32,32,32,79,40,97,44,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,110,97,109,101,58,32,99,44,10,32,32,32,32,32,32,32,32,32,32,32,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,40,103,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,108,32,61,32,66,91,103,32,62,62,32,50,93,44,32,109,44,32,110,32,61,32,103,32,43,32,52,44,32,112,32,61,32,48,59,32,112,32,60,61,32,108,59,32,43,43,112,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,116,32,61,32,103,32,43,32,52,32,43,32,112,32,42,32,98,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,112,32,61,61,32,108,32,124,124,32,48,32,61,61,32,104,40,116,41,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,110,32,61,32,100,40,110,44,32,116,32,45,32,110,41,44,32,118,111,105,100,32,48,32,61,61,61,32,109,32,63,32,109,32,61,32,110,32,58,32,40,109,32,43,61,32,83,116,114,105,110,103,46,102,114,111,109,67,104,97,114,67,111,100,101,40,48,41,44,32,109,32,43,61,32,110,41,44,32,110,32,61,32,116,32,43,32,98,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,85,40,103,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,109,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,116,111,87,105,114,101,84,121,112,101,58,32,40,103,44,32,108,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,34,115,116,114,105,110,103,34,32,33,61,32,116,121,112,101,111,102,32,108,41,32,116,104,114,111,119,32,110,101,119,32,82,40,96,67,97,110,110,111,116,32,112,97,115,115,32,110,111,110,45,115,116,114,105,110,103,32,116,111,32,67,43,43,32,115,116,114,105,110,103,32,116,121,112,101,32,36,123,99,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,109,32,61,32,102,40,108,41,44,32,110,32,61,32,102,99,40,52,32,43,32,109,32,43,32,98,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,66,91,110,32,62,62,32,50,93,32,61,32,109,32,47,32,98,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,40,108,44,32,110,32,43,32,52,44,32,109,32,43,32,98,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,110,117,108,108,32,33,61,61,32,103,32,38,38,32,103,46,112,117,115,104,40,85,44,32,110,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,110,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,32,32,32,32,86,97,58,32,56,44,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,58,32,76,44,10,32,32,32,32,32,32,32,32,32,32,32,32,87,97,40,103,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,85,40,103,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,115,58,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,74,97,91,97,93,32,61,32,123,32,110,97,109,101,58,32,81,40,98,41,44,32,104,98,58,32,84,40,99,44,32,100,41,44,32,88,97,58,32,84,40,101,44,32,102,41,44,32,107,98,58,32,91,93,32,125,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,109,58,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,44,32,109,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,74,97,91,97,93,46,107,98,46,112,117,115,104,40,123,32,111,98,58,32,81,40,98,41,44,32,116,98,58,32,99,44,32,114,98,58,32,84,40,100,44,32,101,41,44,32,115,98,58,32,102,44,32,122,98,58,32,104,44,32,121,98,58,32,84,40,103,44,32,108,41,44,32,65,98,58,32,109,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,102,97,58,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,81,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,79,40,97,44,32,123,32,67,98,58,32,116,114,117,101,44,32,110,97,109,101,58,32,98,44,32,86,97,58,32,48,44,32,102,114,111,109,87,105,114,101,84,121,112,101,58,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,125,44,32,116,111,87,105,114,101,84,121,112,101,58,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,125,32,125,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,78,58,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,68,97,32,61,32,102,97,108,115,101,59,10,32,32,32,32,32,32,32,32,32,32,79,98,32,61,32,48,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,73,58,32,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,73,110,102,105,110,105,116,121,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,70,58,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,97,32,61,32,65,98,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,68,98,40,98,44,32,34,101,109,118,97,108,58,58,97,115,34,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,80,98,40,98,44,32,99,44,32,97,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,105,97,58,32,40,97,44,32,98,44,32,99,44,32,100,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,97,32,61,32,81,98,91,97,93,59,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,65,98,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,40,110,117,108,108,44,32,98,44,32,99,44,32,100,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,76,58,32,122,98,44,10,32,32,32,32,32,32,32,32,104,97,58,32,40,97,44,32,98,44,32,99,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,83,98,40,97,44,32,98,41,44,32,101,32,61,32,100,46,115,104,105,102,116,40,41,59,10,32,32,32,32,32,32,32,32,32,32,97,45,45,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,102,32,61,32,65,114,114,97,121,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,96,109,101,116,104,111,100,67,97,108,108,101,114,60,40,36,123,100,46,109,97,112,40,40,104,41,32,61,62,32,104,46,110,97,109,101,41,46,106,111,105,110,40,34,44,32,34,41,125,41,32,61,62,32,36,123,101,46,110,97,109,101,125,62,96,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,82,98,40,10,32,32,32,32,32,32,32,32,32,32,32,32,97,98,40,98,44,32,40,104,44,32,103,44,32,108,44,32,109,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,110,32,61,32,48,44,32,112,32,61,32,48,59,32,112,32,60,32,97,59,32,43,43,112,41,32,102,91,112,93,32,61,32,100,91,112,93,46,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,40,109,32,43,32,110,41,44,32,110,32,43,61,32,100,91,112,93,46,86,97,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,104,32,61,32,49,32,61,61,61,32,99,32,63,32,84,98,40,103,44,32,102,41,32,58,32,103,46,97,112,112,108,121,40,104,44,32,102,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,80,98,40,101,44,32,108,44,32,104,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,41,10,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,106,97,58,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,57,32,60,32,97,32,38,38,32,40,86,91,97,32,43,32,49,93,32,43,61,32,49,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,103,97,58,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,65,98,40,97,41,59,10,32,32,32,32,32,32,32,32,32,32,75,97,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,122,98,40,97,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,114,58,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,97,32,61,32,68,98,40,97,44,32,34,95,101,109,118,97,108,95,116,97,107,101,95,118,97,108,117,101,34,41,59,10,32,32,32,32,32,32,32,32,32,32,97,32,61,32,97,46,114,101,97,100,86,97,108,117,101,70,114,111,109,80,111,105,110,116,101,114,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,106,98,40,97,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,74,58,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,85,98,91,97,93,32,38,38,32,40,99,108,101,97,114,84,105,109,101,111,117,116,40,85,98,91,97,93,46,105,100,41,44,32,100,101,108,101,116,101,32,85,98,91,97,93,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,33,98,41,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,115,101,116,84,105,109,101,111,117,116,40,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,100,101,108,101,116,101,32,85,98,91,97,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,88,98,40,40,41,32,61,62,32,103,99,40,97,44,32,112,101,114,102,111,114,109,97,110,99,101,46,110,111,119,40,41,41,41,59,10,32,32,32,32,32,32,32,32,32,32,125,44,32,98,41,59,10,32,32,32,32,32,32,32,32,32,32,85,98,91,97,93,32,61,32,123,32,105,100,58,32,99,44,32,68,98,58,32,98,32,125,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,75,58,32,40,97,44,32,98,44,32,99,44,32,100,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,40,47,42,32,64,95,95,80,85,82,69,95,95,32,42,47,32,110,101,119,32,68,97,116,101,40,41,41,46,103,101,116,70,117,108,108,89,101,97,114,40,41,44,32,102,32,61,32,110,101,119,32,68,97,116,101,40,101,44,32,48,44,32,49,41,46,103,101,116,84,105,109,101,122,111,110,101,79,102,102,115,101,116,40,41,59,10,32,32,32,32,32,32,32,32,32,32,101,32,61,32,110,101,119,32,68,97,116,101,40,101,44,32,54,44,32,49,41,46,103,101,116,84,105,109,101,122,111,110,101,79,102,102,115,101,116,40,41,59,10,32,32,32,32,32,32,32,32,32,32,66,91,97,32,62,62,32,50,93,32,61,32,54,48,32,42,32,77,97,116,104,46,109,97,120,40,102,44,32,101,41,59,10,32,32,32,32,32,32,32,32,32,32,65,91,98,32,62,62,32,50,93,32,61,32,78,117,109,98,101,114,40,102,32,33,61,32,101,41,59,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,40,104,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,103,32,61,32,77,97,116,104,46,97,98,115,40,104,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,96,85,84,67,36,123,48,32,60,61,32,104,32,63,32,34,45,34,32,58,32,34,43,34,125,36,123,83,116,114,105,110,103,40,77,97,116,104,46,102,108,111,111,114,40,103,32,47,32,54,48,41,41,46,112,97,100,83,116,97,114,116,40,50,44,32,34,48,34,41,125,36,123,83,116,114,105,110,103,40,103,32,37,32,54,48,41,46,112,97,100,83,116,97,114,116,40,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,50,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,34,48,34,10,32,32,32,32,32,32,32,32,32,32,32,32,41,125,96,59,10,32,32,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,32,32,32,32,97,32,61,32,98,40,102,41,59,10,32,32,32,32,32,32,32,32,32,32,98,32,61,32,98,40,101,41,59,10,32,32,32,32,32,32,32,32,32,32,101,32,60,32,102,32,63,32,40,75,40,97,44,32,99,44,32,49,55,41,44,32,75,40,98,44,32,100,44,32,49,55,41,41,32,58,32,40,75,40,97,44,32,100,44,32,49,55,41,44,32,75,40,98,44,32,99,44,32,49,55,41,41,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,98,97,58,32,40,41,32,61,62,32,112,101,114,102,111,114,109,97,110,99,101,46,110,111,119,40,41,44,10,32,32,32,32,32,32,32,32,77,58,32,40,97,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,120,46,108,101,110,103,116,104,59,10,32,32,32,32,32,32,32,32,32,32,97,32,62,62,62,61,32,48,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,50,49,52,55,52,56,51,54,52,56,32,60,32,97,41,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,99,32,61,32,49,59,32,52,32,62,61,32,99,59,32,99,32,42,61,32,50,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,98,32,42,32,40,49,32,43,32,48,46,50,32,47,32,99,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,100,32,61,32,77,97,116,104,46,109,105,110,40,100,44,32,97,32,43,32,49,48,48,54,54,51,50,57,54,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,97,58,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,32,61,32,40,77,97,116,104,46,109,105,110,40,50,49,52,55,52,56,51,54,52,56,44,32,54,53,53,51,54,32,42,32,77,97,116,104,46,99,101,105,108,40,77,97,116,104,46,109,97,120,40,97,44,32,100,41,32,47,32,54,53,53,51,54,41,41,32,45,32,108,97,46,98,117,102,102,101,114,46,98,121,116,101,76,101,110,103,116,104,32,43,32,54,53,53,51,53,41,32,47,32,54,53,53,51,54,32,124,32,48,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,108,97,46,103,114,111,119,40,100,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,113,97,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,49,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,98,114,101,97,107,32,97,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,32,61,32,118,111,105,100,32,48,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,101,41,32,114,101,116,117,114,110,32,116,114,117,101,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,89,58,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,48,59,10,32,32,32,32,32,32,32,32,32,32,36,98,40,41,46,102,111,114,69,97,99,104,40,40,100,44,32,101,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,102,32,61,32,98,32,43,32,99,59,10,32,32,32,32,32,32,32,32,32,32,32,32,101,32,61,32,66,91,97,32,43,32,52,32,42,32,101,32,62,62,32,50,93,32,61,32,102,59,10,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,102,32,61,32,48,59,32,102,32,60,32,100,46,108,101,110,103,116,104,59,32,43,43,102,41,32,117,91,101,43,43,93,32,61,32,100,46,99,104,97,114,67,111,100,101,65,116,40,102,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,117,91,101,93,32,61,32,48,59,10,32,32,32,32,32,32,32,32,32,32,32,32,99,32,43,61,32,100,46,108,101,110,103,116,104,32,43,32,49,59,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,90,58,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,36,98,40,41,59,10,32,32,32,32,32,32,32,32,32,32,66,91,97,32,62,62,32,50,93,32,61,32,99,46,108,101,110,103,116,104,59,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,48,59,10,32,32,32,32,32,32,32,32,32,32,99,46,102,111,114,69,97,99,104,40,40,101,41,32,61,62,32,100,32,43,61,32,101,46,108,101,110,103,116,104,32,43,32,49,41,59,10,32,32,32,32,32,32,32,32,32,32,66,91,98,32,62,62,32,50,93,32,61,32,100,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,86,58,32,40,41,32,61,62,32,53,50,44,10,32,32,32,32,32,32,32,32,84,58,32,40,41,32,61,62,32,53,50,44,10,32,32,32,32,32,32,32,32,66,58,32,40,97,44,32,98,44,32,99,44,32,100,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,101,32,61,32,48,44,32,102,32,61,32,48,59,32,102,32,60,32,99,59,32,102,43,43,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,66,91,98,32,62,62,32,50,93,44,32,103,32,61,32,66,91,98,32,43,32,52,32,62,62,32,50,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,98,32,43,61,32,56,59,10,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,118,97,114,32,108,32,61,32,48,59,32,108,32,60,32,103,59,32,108,43,43,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,109,32,61,32,97,44,32,110,32,61,32,120,91,104,32,43,32,108,93,44,32,112,32,61,32,97,99,91,109,93,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,48,32,61,61,61,32,110,32,124,124,32,49,48,32,61,61,61,32,110,32,63,32,40,40,49,32,61,61,61,32,109,32,63,32,106,97,32,58,32,114,41,40,71,40,112,41,41,44,32,112,46,108,101,110,103,116,104,32,61,32,48,41,32,58,32,112,46,112,117,115,104,40,110,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,101,32,43,61,32,103,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,66,91,100,32,62,62,32,50,93,32,61,32,101,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,125,44,10,32,32,32,32,32,32,32,32,36,58,32,104,99,44,10,32,32,32,32,32,32,32,32,95,58,32,105,99,44,10,32,32,32,32,32,32,32,32,106,58,32,106,99,44,10,32,32,32,32,32,32,32,32,105,58,32,107,99,44,10,32,32,32,32,32,32,32,32,103,58,32,108,99,44,10,32,32,32,32,32,32,32,32,97,97,58,32,109,99,44,10,32,32,32,32,32,32,32,32,122,58,32,110,99,44,10,32,32,32,32,32,32,32,32,67,58,32,111,99,44,10,32,32,32,32,32,32,32,32,68,58,32,112,99,44,10,32,32,32,32,32,32,32,32,97,58,32,113,99,44,10,32,32,32,32,32,32,32,32,98,58,32,114,99,44,10,32,32,32,32,32,32,32,32,102,58,32,115,99,44,10,32,32,32,32,32,32,32,32,111,58,32,116,99,44,10,32,32,32,32,32,32,32,32,113,58,32,117,99,44,10,32,32,32,32,32,32,32,32,71,58,32,118,99,44,10,32,32,32,32,32,32,32,32,88,58,32,87,98,44,10,32,32,32,32,32,32,32,32,79,58,32,40,97,44,32,98,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,99,99,40,120,46,115,117,98,97,114,114,97,121,40,97,44,32,97,32,43,32,98,41,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,44,32,87,59,10,32,32,32,32,32,32,40,97,115,121,110,99,32,102,117,110,99,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,97,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,87,32,61,32,100,46,101,120,112,111,114,116,115,59,10,32,32,32,32,32,32,32,32,32,32,108,97,32,61,32,87,46,108,97,59,10,32,32,32,32,32,32,32,32,32,32,113,97,40,41,59,10,32,32,32,32,32,32,32,32,32,32,83,32,61,32,87,46,113,97,59,10,32,32,32,32,32,32,32,32,32,32,115,97,46,117,110,115,104,105,102,116,40,87,46,109,97,41,59,10,32,32,32,32,32,32,32,32,32,32,67,45,45,59,10,32,32,32,32,32,32,32,32,32,32,107,46,109,111,110,105,116,111,114,82,117,110,68,101,112,101,110,100,101,110,99,105,101,115,63,46,40,67,41,59,10,32,32,32,32,32,32,32,32,32,32,48,32,61,61,32,67,32,38,38,32,68,32,38,38,32,40,100,32,61,32,68,44,32,68,32,61,32,110,117,108,108,44,32,100,40,41,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,87,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,67,43,43,59,10,32,32,32,32,32,32,32,32,107,46,109,111,110,105,116,111,114,82,117,110,68,101,112,101,110,100,101,110,99,105,101,115,63,46,40,67,41,59,10,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,123,32,97,58,32,119,99,32,125,59,10,32,32,32,32,32,32,32,32,105,102,32,40,107,46,105,110,115,116,97,110,116,105,97,116,101,87,97,115,109,41,10,32,32,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,107,46,105,110,115,116,97,110,116,105,97,116,101,87,97,115,109,40,98,44,32,97,41,59,10,32,32,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,114,40,96,77,111,100,117,108,101,46,105,110,115,116,97,110,116,105,97,116,101,87,97,115,109,32,99,97,108,108,98,97,99,107,32,102,97,105,108,101,100,32,119,105,116,104,32,101,114,114,111,114,58,32,36,123,100,125,96,41,44,32,98,97,40,100,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,120,97,32,63,63,32,40,120,97,32,61,32,119,97,40,34,68,111,116,76,111,116,116,105,101,80,108,97,121,101,114,46,119,97,115,109,34,41,32,63,32,34,68,111,116,76,111,116,116,105,101,80,108,97,121,101,114,46,119,97,115,109,34,32,58,32,107,46,108,111,99,97,116,101,70,105,108,101,32,63,32,107,46,108,111,99,97,116,101,70,105,108,101,40,34,68,111,116,76,111,116,116,105,101,80,108,97,121,101,114,46,119,97,115,109,34,44,32,113,41,32,58,32,113,32,43,32,34,68,111,116,76,111,116,116,105,101,80,108,97,121,101,114,46,119,97,115,109,34,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,97,119,97,105,116,32,65,97,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,97,40,99,46,105,110,115,116,97,110,99,101,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,99,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,98,97,40,100,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,41,40,41,59,10,32,32,32,32,32,32,118,97,114,32,102,99,32,61,32,40,97,41,32,61,62,32,40,102,99,32,61,32,87,46,110,97,41,40,97,41,44,32,113,98,32,61,32,40,97,41,32,61,62,32,40,113,98,32,61,32,87,46,111,97,41,40,97,41,44,32,85,32,61,32,40,97,41,32,61,62,32,40,85,32,61,32,87,46,112,97,41,40,97,41,44,32,103,99,32,61,32,40,97,44,32,98,41,32,61,62,32,40,103,99,32,61,32,87,46,114,97,41,40,97,44,32,98,41,44,32,88,32,61,32,40,97,44,32,98,41,32,61,62,32,40,88,32,61,32,87,46,115,97,41,40,97,44,32,98,41,44,32,74,32,61,32,40,97,41,32,61,62,32,40,74,32,61,32,87,46,116,97,41,40,97,41,44,32,89,32,61,32,40,97,41,32,61,62,32,40,89,32,61,32,87,46,117,97,41,40,97,41,44,32,90,32,61,32,40,41,32,61,62,32,40,90,32,61,32,87,46,118,97,41,40,41,44,32,71,97,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,40,71,97,32,61,32,87,46,119,97,41,40,97,44,32,98,44,32,99,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,105,105,106,106,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,105,105,106,106,32,61,32,87,46,120,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,118,105,106,106,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,118,105,106,106,32,61,32,87,46,121,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,106,105,105,105,32,61,32,40,97,44,32,98,44,32,99,44,32,100,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,106,105,105,105,32,61,32,87,46,122,97,41,40,97,44,32,98,44,32,99,44,32,100,41,59,10,32,32,32,32,32,32,118,97,114,32,120,99,32,61,32,107,46,100,121,110,67,97,108,108,95,118,105,106,106,106,106,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,44,32,109,41,32,61,62,32,40,120,99,32,61,32,107,46,100,121,110,67,97,108,108,95,118,105,106,106,106,106,32,61,32,87,46,65,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,44,32,109,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,106,105,105,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,106,105,105,32,61,32,87,46,66,97,41,40,97,44,32,98,44,32,99,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,118,106,105,105,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,118,106,105,105,32,61,32,87,46,67,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,118,106,102,105,105,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,118,106,102,105,105,32,61,32,87,46,68,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,118,106,105,105,105,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,118,106,105,105,105,32,61,32,87,46,69,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,118,106,32,61,32,40,97,44,32,98,44,32,99,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,118,106,32,61,32,87,46,70,97,41,40,97,44,32,98,44,32,99,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,118,106,105,105,105,105,105,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,118,106,105,105,105,105,105,32,61,32,87,46,71,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,118,106,105,102,102,105,105,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,118,106,105,102,102,105,105,32,61,32,87,46,72,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,118,106,105,105,105,105,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,118,106,105,105,105,105,32,61,32,87,46,73,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,118,105,105,106,105,105,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,118,105,105,106,105,105,32,61,32,87,46,74,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,105,105,105,105,105,106,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,105,105,105,105,105,106,32,61,32,87,46,75,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,105,105,105,105,105,106,106,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,105,105,105,105,105,106,106,32,61,32,87,46,76,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,41,59,10,32,32,32,32,32,32,107,46,100,121,110,67,97,108,108,95,105,105,105,105,105,105,106,106,32,61,32,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,44,32,109,41,32,61,62,32,40,107,46,100,121,110,67,97,108,108,95,105,105,105,105,105,105,106,106,32,61,32,87,46,77,97,41,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,44,32,109,41,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,113,99,40,97,44,32,98,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,83,46,103,101,116,40,97,41,40,98,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,99,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,100,32,33,61,61,32,100,32,43,32,48,41,32,116,104,114,111,119,32,100,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,109,99,40,97,44,32,98,44,32,99,44,32,100,44,32,101,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,102,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,83,46,103,101,116,40,97,41,40,98,44,32,99,44,32,100,44,32,101,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,104,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,102,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,104,32,33,61,61,32,104,32,43,32,48,41,32,116,104,114,111,119,32,104,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,114,99,40,97,44,32,98,44,32,99,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,83,46,103,101,116,40,97,41,40,98,44,32,99,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,101,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,100,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,101,32,33,61,61,32,101,32,43,32,48,41,32,116,104,114,111,119,32,101,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,115,99,40,97,44,32,98,44,32,99,44,32,100,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,83,46,103,101,116,40,97,41,40,98,44,32,99,44,32,100,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,101,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,102,32,33,61,61,32,102,32,43,32,48,41,32,116,104,114,111,119,32,102,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,106,99,40,97,44,32,98,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,83,46,103,101,116,40,97,41,40,98,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,99,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,100,32,33,61,61,32,100,32,43,32,48,41,32,116,104,114,111,119,32,100,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,117,99,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,83,46,103,101,116,40,97,41,40,98,44,32,99,44,32,100,44,32,101,44,32,102,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,103,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,104,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,103,32,33,61,61,32,103,32,43,32,48,41,32,116,104,114,111,119,32,103,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,112,99,40,97,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,83,46,103,101,116,40,97,41,40,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,99,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,99,32,33,61,61,32,99,32,43,32,48,41,32,116,104,114,111,119,32,99,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,116,99,40,97,44,32,98,44,32,99,44,32,100,44,32,101,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,102,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,83,46,103,101,116,40,97,41,40,98,44,32,99,44,32,100,44,32,101,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,104,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,102,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,104,32,33,61,61,32,104,32,43,32,48,41,32,116,104,114,111,119,32,104,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,111,99,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,108,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,83,46,103,101,116,40,97,41,40,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,109,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,108,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,109,32,33,61,61,32,109,32,43,32,48,41,32,116,104,114,111,119,32,109,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,108,99,40,97,44,32,98,44,32,99,44,32,100,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,83,46,103,101,116,40,97,41,40,98,44,32,99,44,32,100,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,101,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,102,32,33,61,61,32,102,32,43,32,48,41,32,116,104,114,111,119,32,102,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,107,99,40,97,44,32,98,44,32,99,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,100,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,83,46,103,101,116,40,97,41,40,98,44,32,99,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,101,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,100,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,101,32,33,61,61,32,101,32,43,32,48,41,32,116,104,114,111,119,32,101,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,110,99,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,104,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,83,46,103,101,116,40,97,41,40,98,44,32,99,44,32,100,44,32,101,44,32,102,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,103,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,104,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,103,32,33,61,61,32,103,32,43,32,48,41,32,116,104,114,111,119,32,103,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,104,99,40,97,44,32,98,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,99,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,83,46,103,101,116,40,97,41,40,98,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,99,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,100,32,33,61,61,32,100,32,43,32,48,41,32,116,104,114,111,119,32,100,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,105,99,40,97,44,32,98,44,32,99,44,32,100,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,101,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,83,46,103,101,116,40,97,41,40,98,44,32,99,44,32,100,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,102,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,101,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,102,32,33,61,61,32,102,32,43,32,48,41,32,116,104,114,111,119,32,102,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,118,99,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,44,32,109,41,32,123,10,32,32,32,32,32,32,32,32,118,97,114,32,110,32,61,32,90,40,41,59,10,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,120,99,40,97,44,32,98,44,32,99,44,32,100,44,32,101,44,32,102,44,32,104,44,32,103,44,32,108,44,32,109,41,59,10,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,112,41,32,123,10,32,32,32,32,32,32,32,32,32,32,89,40,110,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,112,32,33,61,61,32,112,32,43,32,48,41,32,116,104,114,111,119,32,112,59,10,32,32,32,32,32,32,32,32,32,32,88,40,49,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,118,97,114,32,121,99,59,10,32,32,32,32,32,32,68,32,61,32,102,117,110,99,116,105,111,110,32,122,99,40,41,32,123,10,32,32,32,32,32,32,32,32,121,99,32,124,124,32,65,99,40,41,59,10,32,32,32,32,32,32,32,32,121,99,32,124,124,32,40,68,32,61,32,122,99,41,59,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,65,99,40,41,32,123,10,32,32,32,32,32,32,32,32,102,117,110,99,116,105,111,110,32,97,40,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,33,121,99,32,38,38,32,40,121,99,32,61,32,116,114,117,101,44,32,107,46,99,97,108,108,101,100,82,117,110,32,61,32,116,114,117,101,44,32,33,109,97,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,67,97,40,115,97,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,97,97,40,107,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,107,46,111,110,82,117,110,116,105,109,101,73,110,105,116,105,97,108,105,122,101,100,63,46,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,107,46,112,111,115,116,82,117,110,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,111,114,32,40,34,102,117,110,99,116,105,111,110,34,32,61,61,32,116,121,112,101,111,102,32,107,46,112,111,115,116,82,117,110,32,38,38,32,40,107,46,112,111,115,116,82,117,110,32,61,32,91,107,46,112,111,115,116,82,117,110,93,41,59,32,107,46,112,111,115,116,82,117,110,46,108,101,110,103,116,104,59,32,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,118,97,114,32,98,32,61,32,107,46,112,111,115,116,82,117,110,46,115,104,105,102,116,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,97,46,117,110,115,104,105,102,116,40,98,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,67,97,40,116,97,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,33,40,48,32,60,32,67,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,107,46,112,114,101,82,117,110,41,32,102,111,114,32,40,34,102,117,110,99,116,105,111,110,34,32,61,61,32,116,121,112,101,111,102,32,107,46,112,114,101,82,117,110,32,38,38,32,40,107,46,112,114,101,82,117,110,32,61,32,91,107,46,112,114,101,82,117,110,93,41,59,32,107,46,112,114,101,82,117,110,46,108,101,110,103,116,104,59,32,41,32,117,97,40,41,59,10,32,32,32,32,32,32,32,32,32,32,67,97,40,114,97,41,59,10,32,32,32,32,32,32,32,32,32,32,48,32,60,32,67,32,124,124,32,40,107,46,115,101,116,83,116,97,116,117,115,32,63,32,40,107,46,115,101,116,83,116,97,116,117,115,40,34,82,117,110,110,105,110,103,46,46,46,34,41,44,32,115,101,116,84,105,109,101,111,117,116,40,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,115,101,116,84,105,109,101,111,117,116,40,40,41,32,61,62,32,107,46,115,101,116,83,116,97,116,117,115,40,34,34,41,44,32,49,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,97,40,41,59,10,32,32,32,32,32,32,32,32,32,32,125,44,32,49,41,41,32,58,32,97,40,41,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,102,32,40,107,46,112,114,101,73,110,105,116,41,10,32,32,32,32,32,32,32,32,102,111,114,32,40,34,102,117,110,99,116,105,111,110,34,32,61,61,32,116,121,112,101,111,102,32,107,46,112,114,101,73,110,105,116,32,38,38,32,40,107,46,112,114,101,73,110,105,116,32,61,32,91,107,46,112,114,101,73,110,105,116,93,41,59,32,48,32,60,32,107,46,112,114,101,73,110,105,116,46,108,101,110,103,116,104,59,32,41,32,107,46,112,114,101,73,110,105,116,46,112,111,112,40,41,40,41,59,10,32,32,32,32,32,32,65,99,40,41,59,10,32,32,32,32,32,32,109,111,100,117,108,101,82,116,110,32,61,32,99,97,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,82,116,110,59,10,32,32,32,32,125,59,10,32,32,125,41,40,41,59,10,32,32,118,97,114,32,100,111,116,108,111,116,116,105,101,95,112,108,97,121,101,114,95,100,101,102,97,117,108,116,32,61,32,99,114,101,97,116,101,68,111,116,76,111,116,116,105,101,80,108,97,121,101,114,77,111,100,117,108,101,59,10,10,32,32,47,47,32,115,114,99,47,99,111,114,101,47,100,111,116,108,111,116,116,105,101,45,119,97,115,109,45,108,111,97,100,101,114,46,116,115,10,32,32,118,97,114,32,68,111,116,76,111,116,116,105,101,87,97,115,109,76,111,97,100,101,114,32,61,32,99,108,97,115,115,32,123,10,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,40,41,32,123,10,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,34,82,101,110,100,101,114,101,114,76,111,97,100,101,114,32,105,115,32,97,32,115,116,97,116,105,99,32,99,108,97,115,115,32,97,110,100,32,99,97,110,110,111,116,32,98,101,32,105,110,115,116,97,110,116,105,97,116,101,100,46,34,41,59,10,32,32,32,32,125,10,32,32,32,32,115,116,97,116,105,99,32,97,115,121,110,99,32,95,116,114,121,76,111,97,100,40,117,114,108,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,109,111,100,117,108,101,32,61,32,97,119,97,105,116,32,100,111,116,108,111,116,116,105,101,95,112,108,97,121,101,114,95,100,101,102,97,117,108,116,40,123,32,108,111,99,97,116,101,70,105,108,101,58,32,40,41,32,61,62,32,117,114,108,32,125,41,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,59,10,32,32,32,32,125,10,32,32,32,32,47,42,42,10,32,32,32,32,32,42,32,84,114,105,101,115,32,116,111,32,108,111,97,100,32,116,104,101,32,87,65,83,77,32,109,111,100,117,108,101,32,102,114,111,109,32,116,104,101,32,112,114,105,109,97,114,121,32,85,82,76,44,32,102,97,108,108,105,110,103,32,98,97,99,107,32,116,111,32,97,32,98,97,99,107,117,112,32,85,82,76,32,105,102,32,110,101,99,101,115,115,97,114,121,46,10,32,32,32,32,32,42,32,84,104,114,111,119,115,32,97,110,32,101,114,114,111,114,32,105,102,32,98,111,116,104,32,85,82,76,115,32,102,97,105,108,32,116,111,32,108,111,97,100,32,116,104,101,32,109,111,100,117,108,101,46,10,32,32,32,32,32,42,32,64,114,101,116,117,114,110,115,32,80,114,111,109,105,115,101,60,77,111,100,117,108,101,62,32,45,32,65,32,112,114,111,109,105,115,101,32,116,104,97,116,32,114,101,115,111,108,118,101,115,32,116,111,32,116,104,101,32,108,111,97,100,101,100,32,109,111,100,117,108,101,46,10,32,32,32,32,32,42,47,10,32,32,32,32,115,116,97,116,105,99,32,97,115,121,110,99,32,95,108,111,97,100,87,105,116,104,66,97,99,107,117,112,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,33,116,104,105,115,46,95,77,111,100,117,108,101,80,114,111,109,105,115,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,77,111,100,117,108,101,80,114,111,109,105,115,101,32,61,32,116,104,105,115,46,95,116,114,121,76,111,97,100,40,116,104,105,115,46,95,119,97,115,109,85,82,76,41,46,99,97,116,99,104,40,97,115,121,110,99,32,40,105,110,105,116,105,97,108,69,114,114,111,114,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,98,97,99,107,117,112,85,114,108,32,61,32,96,104,116,116,112,115,58,47,47,117,110,112,107,103,46,99,111,109,47,36,123,80,65,67,75,65,71,69,95,78,65,77,69,125,64,36,123,80,65,67,75,65,71,69,95,86,69,82,83,73,79,78,125,47,100,105,115,116,47,100,111,116,108,111,116,116,105,101,45,112,108,97,121,101,114,46,119,97,115,109,96,59,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,111,108,101,46,119,97,114,110,40,96,80,114,105,109,97,114,121,32,87,65,83,77,32,108,111,97,100,32,102,97,105,108,101,100,32,102,114,111,109,32,36,123,116,104,105,115,46,95,119,97,115,109,85,82,76,125,46,32,69,114,114,111,114,58,32,36,123,105,110,105,116,105,97,108,69,114,114,111,114,46,109,101,115,115,97,103,101,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,111,108,101,46,119,97,114,110,40,96,65,116,116,101,109,112,116,105,110,103,32,116,111,32,108,111,97,100,32,87,65,83,77,32,102,114,111,109,32,98,97,99,107,117,112,32,85,82,76,58,32,36,123,98,97,99,107,117,112,85,114,108,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,97,119,97,105,116,32,116,104,105,115,46,95,116,114,121,76,111,97,100,40,98,97,99,107,117,112,85,114,108,41,59,10,32,32,32,32,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,98,97,99,107,117,112,69,114,114,111,114,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,99,111,110,115,111,108,101,46,101,114,114,111,114,40,96,80,114,105,109,97,114,121,32,87,65,83,77,32,85,82,76,32,102,97,105,108,101,100,58,32,36,123,105,110,105,116,105,97,108,69,114,114,111,114,46,109,101,115,115,97,103,101,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,99,111,110,115,111,108,101,46,101,114,114,111,114,40,96,66,97,99,107,117,112,32,87,65,83,77,32,85,82,76,32,102,97,105,108,101,100,58,32,36,123,98,97,99,107,117,112,69,114,114,111,114,46,109,101,115,115,97,103,101,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,34,87,65,83,77,32,108,111,97,100,105,110,103,32,102,97,105,108,101,100,32,102,114,111,109,32,97,108,108,32,115,111,117,114,99,101,115,46,34,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,77,111,100,117,108,101,80,114,111,109,105,115,101,59,10,32,32,32,32,125,10,32,32,32,32,47,42,42,10,32,32,32,32,32,42,32,80,117,98,108,105,99,32,109,101,116,104,111,100,32,116,111,32,108,111,97,100,32,116,104,101,32,87,101,98,65,115,115,101,109,98,108,121,32,109,111,100,117,108,101,46,10,32,32,32,32,32,42,32,85,116,105,108,105,122,101,115,32,97,32,112,114,105,109,97,114,121,32,97,110,100,32,98,97,99,107,117,112,32,85,82,76,32,102,111,114,32,114,111,98,117,115,116,110,101,115,115,46,10,32,32,32,32,32,42,32,64,114,101,116,117,114,110,115,32,80,114,111,109,105,115,101,60,77,111,100,117,108,101,62,32,45,32,65,32,112,114,111,109,105,115,101,32,116,104,97,116,32,114,101,115,111,108,118,101,115,32,116,111,32,116,104,101,32,108,111,97,100,101,100,32,109,111,100,117,108,101,46,10,32,32,32,32,32,42,47,10,32,32,32,32,115,116,97,116,105,99,32,97,115,121,110,99,32,108,111,97,100,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,108,111,97,100,87,105,116,104,66,97,99,107,117,112,40,41,59,10,32,32,32,32,125,10,32,32,32,32,47,42,42,10,32,32,32,32,32,42,32,83,101,116,115,32,97,32,110,101,119,32,85,82,76,32,102,111,114,32,116,104,101,32,87,65,83,77,32,102,105,108,101,32,97,110,100,32,105,110,118,97,108,105,100,97,116,101,115,32,116,104,101,32,99,117,114,114,101,110,116,32,109,111,100,117,108,101,32,112,114,111,109,105,115,101,46,10,32,32,32,32,32,42,10,32,32,32,32,32,42,32,64,112,97,114,97,109,32,115,116,114,105,110,103,32,45,32,32,84,104,101,32,110,101,119,32,85,82,76,32,102,111,114,32,116,104,101,32,87,65,83,77,32,102,105,108,101,46,10,32,32,32,32,32,42,47,10,32,32,32,32,115,116,97,116,105,99,32,115,101,116,87,97,115,109,85,114,108,40,117,114,108,41,32,123,10,32,32,32,32,32,32,105,102,32,40,117,114,108,32,61,61,61,32,116,104,105,115,46,95,119,97,115,109,85,82,76,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,119,97,115,109,85,82,76,32,61,32,117,114,108,59,10,32,32,32,32,32,32,116,104,105,115,46,95,77,111,100,117,108,101,80,114,111,109,105,115,101,32,61,32,110,117,108,108,59,10,32,32,32,32,125,10,32,32,125,59,10,32,32,47,47,32,101,115,108,105,110,116,45,100,105,115,97,98,108,101,45,110,101,120,116,45,108,105,110,101,32,64,116,121,112,101,115,99,114,105,112,116,45,101,115,108,105,110,116,47,110,97,109,105,110,103,45,99,111,110,118,101,110,116,105,111,110,10,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,68,111,116,76,111,116,116,105,101,87,97,115,109,76,111,97,100,101,114,44,32,34,95,77,111,100,117,108,101,80,114,111,109,105,115,101,34,44,32,110,117,108,108,41,59,10,32,32,47,47,32,85,82,76,32,102,111,114,32,116,104,101,32,87,65,83,77,32,102,105,108,101,44,32,99,111,110,115,116,114,117,99,116,101,100,32,117,115,105,110,103,32,112,97,99,107,97,103,101,32,105,110,102,111,114,109,97,116,105,111,110,10,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,68,111,116,76,111,116,116,105,101,87,97,115,109,76,111,97,100,101,114,44,32,34,95,119,97,115,109,85,82,76,34,44,32,96,104,116,116,112,115,58,47,47,99,100,110,46,106,115,100,101,108,105,118,114,46,110,101,116,47,110,112,109,47,36,123,80,65,67,75,65,71,69,95,78,65,77,69,125,64,36,123,80,65,67,75,65,71,69,95,86,69,82,83,73,79,78,125,47,100,105,115,116,47,100,111,116,108,111,116,116,105,101,45,112,108,97,121,101,114,46,119,97,115,109,96,41,59,10,10,32,32,47,47,32,115,114,99,47,101,118,101,110,116,45,109,97,110,97,103,101,114,46,116,115,10,32,32,118,97,114,32,69,118,101,110,116,77,97,110,97,103,101,114,32,61,32,99,108,97,115,115,32,123,10,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,40,41,32,123,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,101,118,101,110,116,76,105,115,116,101,110,101,114,115,34,44,32,47,42,32,64,95,95,80,85,82,69,95,95,32,42,47,32,110,101,119,32,77,97,112,40,41,41,59,10,32,32,32,32,125,10,32,32,32,32,97,100,100,69,118,101,110,116,76,105,115,116,101,110,101,114,40,116,121,112,101,44,32,108,105,115,116,101,110,101,114,41,32,123,10,32,32,32,32,32,32,108,101,116,32,108,105,115,116,101,110,101,114,115,32,61,32,116,104,105,115,46,95,101,118,101,110,116,76,105,115,116,101,110,101,114,115,46,103,101,116,40,116,121,112,101,41,59,10,32,32,32,32,32,32,105,102,32,40,33,108,105,115,116,101,110,101,114,115,41,32,123,10,32,32,32,32,32,32,32,32,108,105,115,116,101,110,101,114,115,32,61,32,47,42,32,64,95,95,80,85,82,69,95,95,32,42,47,32,110,101,119,32,83,101,116,40,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,76,105,115,116,101,110,101,114,115,46,115,101,116,40,116,121,112,101,44,32,108,105,115,116,101,110,101,114,115,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,108,105,115,116,101,110,101,114,115,46,97,100,100,40,108,105,115,116,101,110,101,114,41,59,10,32,32,32,32,125,10,32,32,32,32,114,101,109,111,118,101,69,118,101,110,116,76,105,115,116,101,110,101,114,40,116,121,112,101,44,32,108,105,115,116,101,110,101,114,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,108,105,115,116,101,110,101,114,115,32,61,32,116,104,105,115,46,95,101,118,101,110,116,76,105,115,116,101,110,101,114,115,46,103,101,116,40,116,121,112,101,41,59,10,32,32,32,32,32,32,105,102,32,40,33,108,105,115,116,101,110,101,114,115,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,105,102,32,40,108,105,115,116,101,110,101,114,41,32,123,10,32,32,32,32,32,32,32,32,108,105,115,116,101,110,101,114,115,46,100,101,108,101,116,101,40,108,105,115,116,101,110,101,114,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,108,105,115,116,101,110,101,114,115,46,115,105,122,101,32,61,61,61,32,48,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,76,105,115,116,101,110,101,114,115,46,100,101,108,101,116,101,40,116,121,112,101,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,76,105,115,116,101,110,101,114,115,46,100,101,108,101,116,101,40,116,121,112,101,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,100,105,115,112,97,116,99,104,40,101,118,101,110,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,108,105,115,116,101,110,101,114,115,32,61,32,116,104,105,115,46,95,101,118,101,110,116,76,105,115,116,101,110,101,114,115,46,103,101,116,40,101,118,101,110,116,46,116,121,112,101,41,59,10,32,32,32,32,32,32,108,105,115,116,101,110,101,114,115,63,46,102,111,114,69,97,99,104,40,40,108,105,115,116,101,110,101,114,41,32,61,62,32,108,105,115,116,101,110,101,114,40,101,118,101,110,116,41,41,59,10,32,32,32,32,125,10,32,32,32,32,114,101,109,111,118,101,65,108,108,69,118,101,110,116,76,105,115,116,101,110,101,114,115,40,41,32,123,10,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,76,105,115,116,101,110,101,114,115,46,99,108,101,97,114,40,41,59,10,32,32,32,32,125,10,32,32,125,59,10,10,32,32,47,47,32,115,114,99,47,111,102,102,115,99,114,101,101,110,45,111,98,115,101,114,118,101,114,46,116,115,10,32,32,118,97,114,32,79,102,102,115,99,114,101,101,110,79,98,115,101,114,118,101,114,32,61,32,99,108,97,115,115,32,123,10,32,32,32,32,115,116,97,116,105,99,32,95,105,110,105,116,105,97,108,105,122,101,79,98,115,101,114,118,101,114,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,111,98,115,101,114,118,101,114,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,116,101,114,115,101,99,116,105,111,110,79,98,115,101,114,118,101,114,67,97,108,108,98,97,99,107,32,61,32,40,101,110,116,114,105,101,115,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,101,110,116,114,105,101,115,46,102,111,114,69,97,99,104,40,40,101,110,116,114,121,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,103,101,116,40,101,110,116,114,121,46,116,97,114,103,101,116,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,101,110,116,114,121,46,105,115,73,110,116,101,114,115,101,99,116,105,110,103,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,117,110,102,114,101,101,122,101,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,102,114,101,101,122,101,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,32,61,32,110,101,119,32,73,110,116,101,114,115,101,99,116,105,111,110,79,98,115,101,114,118,101,114,40,105,110,116,101,114,115,101,99,116,105,111,110,79,98,115,101,114,118,101,114,67,97,108,108,98,97,99,107,44,32,123,10,32,32,32,32,32,32,32,32,116,104,114,101,115,104,111,108,100,58,32,48,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,115,116,97,116,105,99,32,111,98,115,101,114,118,101,40,99,97,110,118,97,115,44,32,100,111,116,76,111,116,116,105,101,73,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,116,104,105,115,46,95,105,110,105,116,105,97,108,105,122,101,79,98,115,101,114,118,101,114,40,41,59,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,104,97,115,40,99,97,110,118,97,115,41,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,115,101,116,40,99,97,110,118,97,115,44,32,100,111,116,76,111,116,116,105,101,73,110,115,116,97,110,99,101,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,63,46,111,98,115,101,114,118,101,40,99,97,110,118,97,115,41,59,10,32,32,32,32,125,10,32,32,32,32,115,116,97,116,105,99,32,117,110,111,98,115,101,114,118,101,40,99,97,110,118,97,115,41,32,123,10,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,63,46,117,110,111,98,115,101,114,118,101,40,99,97,110,118,97,115,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,100,101,108,101,116,101,40,99,97,110,118,97,115,41,59,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,115,105,122,101,32,61,61,61,32,48,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,63,46,100,105,115,99,111,110,110,101,99,116,40,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,125,59,10,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,79,102,102,115,99,114,101,101,110,79,98,115,101,114,118,101,114,44,32,34,95,111,98,115,101,114,118,101,114,34,44,32,110,117,108,108,41,59,10,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,79,102,102,115,99,114,101,101,110,79,98,115,101,114,118,101,114,44,32,34,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,34,44,32,47,42,32,64,95,95,80,85,82,69,95,95,32,42,47,32,110,101,119,32,77,97,112,40,41,41,59,10,10,32,32,47,47,32,115,114,99,47,114,101,115,105,122,101,45,111,98,115,101,114,118,101,114,46,116,115,10,32,32,118,97,114,32,82,69,83,73,90,69,95,68,69,66,79,85,78,67,69,95,84,73,77,69,32,61,32,49,48,48,59,10,32,32,118,97,114,32,67,97,110,118,97,115,82,101,115,105,122,101,79,98,115,101,114,118,101,114,32,61,32,99,108,97,115,115,32,123,10,32,32,32,32,115,116,97,116,105,99,32,95,105,110,105,116,105,97,108,105,122,101,79,98,115,101,114,118,101,114,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,111,98,115,101,114,118,101,114,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,105,122,101,72,97,110,100,108,101,114,32,61,32,40,101,110,116,114,105,101,115,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,101,110,116,114,105,101,115,46,102,111,114,69,97,99,104,40,40,101,110,116,114,121,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,101,108,101,109,101,110,116,32,61,32,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,103,101,116,40,101,110,116,114,121,46,116,97,114,103,101,116,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,33,101,108,101,109,101,110,116,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,91,100,111,116,76,111,116,116,105,101,73,110,115,116,97,110,99,101,44,32,116,105,109,101,111,117,116,93,32,61,32,101,108,101,109,101,110,116,59,10,32,32,32,32,32,32,32,32,32,32,99,108,101,97,114,84,105,109,101,111,117,116,40,116,105,109,101,111,117,116,41,59,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,110,101,119,84,105,109,101,111,117,116,32,61,32,115,101,116,84,105,109,101,111,117,116,40,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,100,111,116,76,111,116,116,105,101,73,110,115,116,97,110,99,101,46,114,101,115,105,122,101,40,41,59,10,32,32,32,32,32,32,32,32,32,32,125,44,32,82,69,83,73,90,69,95,68,69,66,79,85,78,67,69,95,84,73,77,69,41,59,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,115,101,116,40,101,110,116,114,121,46,116,97,114,103,101,116,44,32,91,100,111,116,76,111,116,116,105,101,73,110,115,116,97,110,99,101,44,32,110,101,119,84,105,109,101,111,117,116,93,41,59,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,32,61,32,110,101,119,32,82,101,115,105,122,101,79,98,115,101,114,118,101,114,40,114,101,115,105,122,101,72,97,110,100,108,101,114,41,59,10,32,32,32,32,125,10,32,32,32,32,115,116,97,116,105,99,32,111,98,115,101,114,118,101,40,99,97,110,118,97,115,44,32,100,111,116,76,111,116,116,105,101,73,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,116,104,105,115,46,95,105,110,105,116,105,97,108,105,122,101,79,98,115,101,114,118,101,114,40,41,59,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,104,97,115,40,99,97,110,118,97,115,41,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,115,101,116,40,99,97,110,118,97,115,44,32,91,100,111,116,76,111,116,116,105,101,73,110,115,116,97,110,99,101,44,32,48,93,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,63,46,111,98,115,101,114,118,101,40,99,97,110,118,97,115,41,59,10,32,32,32,32,125,10,32,32,32,32,115,116,97,116,105,99,32,117,110,111,98,115,101,114,118,101,40,99,97,110,118,97,115,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,101,108,101,109,101,110,116,32,61,32,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,103,101,116,40,99,97,110,118,97,115,41,59,10,32,32,32,32,32,32,105,102,32,40,101,108,101,109,101,110,116,41,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,116,32,116,105,109,101,111,117,116,73,100,32,61,32,101,108,101,109,101,110,116,91,49,93,59,10,32,32,32,32,32,32,32,32,105,102,32,40,116,105,109,101,111,117,116,73,100,41,32,99,108,101,97,114,84,105,109,101,111,117,116,40,116,105,109,101,111,117,116,73,100,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,63,46,117,110,111,98,115,101,114,118,101,40,99,97,110,118,97,115,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,100,101,108,101,116,101,40,99,97,110,118,97,115,41,59,10,32,32,32,32,32,32,105,102,32,40,33,116,104,105,115,46,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,46,115,105,122,101,32,38,38,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,46,100,105,115,99,111,110,110,101,99,116,40,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,111,98,115,101,114,118,101,114,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,125,59,10,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,67,97,110,118,97,115,82,101,115,105,122,101,79,98,115,101,114,118,101,114,44,32,34,95,111,98,115,101,114,118,101,114,34,44,32,110,117,108,108,41,59,10,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,67,97,110,118,97,115,82,101,115,105,122,101,79,98,115,101,114,118,101,114,44,32,34,95,111,98,115,101,114,118,101,100,67,97,110,118,97,115,101,115,34,44,32,47,42,32,64,95,95,80,85,82,69,95,95,32,42,47,32,110,101,119,32,77,97,112,40,41,41,59,10,10,32,32,47,47,32,115,114,99,47,117,116,105,108,115,46,116,115,10,32,32,102,117,110,99,116,105,111,110,32,105,115,72,101,120,67,111,108,111,114,40,99,111,108,111,114,41,32,123,10,32,32,32,32,114,101,116,117,114,110,32,47,94,35,40,91,92,100,97,45,102,93,123,54,125,124,91,92,100,97,45,102,93,123,56,125,41,36,47,105,117,46,116,101,115,116,40,99,111,108,111,114,41,59,10,32,32,125,10,32,32,102,117,110,99,116,105,111,110,32,104,101,120,83,116,114,105,110,103,84,111,82,71,66,65,73,110,116,40,99,111,108,111,114,72,101,120,41,32,123,10,32,32,32,32,105,102,32,40,33,105,115,72,101,120,67,111,108,111,114,40,99,111,108,111,114,72,101,120,41,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,125,10,32,32,32,32,108,101,116,32,104,101,120,32,61,32,99,111,108,111,114,72,101,120,46,114,101,112,108,97,99,101,40,34,35,34,44,32,34,34,41,59,10,32,32,32,32,104,101,120,32,61,32,104,101,120,46,108,101,110,103,116,104,32,61,61,61,32,54,32,63,32,96,36,123,104,101,120,125,102,102,96,32,58,32,104,101,120,59,10,32,32,32,32,114,101,116,117,114,110,32,112,97,114,115,101,73,110,116,40,104,101,120,44,32,49,54,41,59,10,32,32,125,10,32,32,102,117,110,99,116,105,111,110,32,105,115,68,111,116,76,111,116,116,105,101,40,102,105,108,101,68,97,116,97,41,32,123,10,32,32,32,32,105,102,32,40,102,105,108,101,68,97,116,97,46,98,121,116,101,76,101,110,103,116,104,32,60,32,52,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,99,111,110,115,116,32,102,105,108,101,83,105,103,110,97,116,117,114,101,32,61,32,110,101,119,32,85,105,110,116,56,65,114,114,97,121,40,102,105,108,101,68,97,116,97,46,115,108,105,99,101,40,48,44,32,90,73,80,95,83,73,71,78,65,84,85,82,69,46,98,121,116,101,76,101,110,103,116,104,41,41,59,10,32,32,32,32,102,111,114,32,40,108,101,116,32,105,32,61,32,48,59,32,105,32,60,32,90,73,80,95,83,73,71,78,65,84,85,82,69,46,108,101,110,103,116,104,59,32,105,32,43,61,32,49,41,32,123,10,32,32,32,32,32,32,105,102,32,40,90,73,80,95,83,73,71,78,65,84,85,82,69,91,105,93,32,33,61,61,32,102,105,108,101,83,105,103,110,97,116,117,114,101,91,105,93,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,114,101,116,117,114,110,32,116,114,117,101,59,10,32,32,125,10,32,32,102,117,110,99,116,105,111,110,32,105,115,76,111,116,116,105,101,74,83,79,78,40,106,115,111,110,41,32,123,10,32,32,32,32,114,101,116,117,114,110,32,76,79,84,84,73,69,95,74,83,79,78,95,77,65,78,68,65,84,79,82,89,95,70,73,69,76,68,83,46,101,118,101,114,121,40,40,102,105,101,108,100,41,32,61,62,32,79,98,106,101,99,116,46,112,114,111,116,111,116,121,112,101,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,46,99,97,108,108,40,106,115,111,110,44,32,102,105,101,108,100,41,41,59,10,32,32,125,10,32,32,102,117,110,99,116,105,111,110,32,105,115,76,111,116,116,105,101,40,102,105,108,101,68,97,116,97,41,32,123,10,32,32,32,32,105,102,32,40,116,121,112,101,111,102,32,102,105,108,101,68,97,116,97,32,61,61,61,32,34,115,116,114,105,110,103,34,41,32,123,10,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,105,115,76,111,116,116,105,101,74,83,79,78,40,74,83,79,78,46,112,97,114,115,101,40,102,105,108,101,68,97,116,97,41,41,59,10,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,95,101,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,115,76,111,116,116,105,101,74,83,79,78,40,102,105,108,101,68,97,116,97,41,59,10,32,32,32,32,125,10,32,32,125,10,32,32,102,117,110,99,116,105,111,110,32,103,101,116,68,101,102,97,117,108,116,68,80,82,40,41,32,123,10,32,32,32,32,99,111,110,115,116,32,100,112,114,32,61,32,73,83,95,66,82,79,87,83,69,82,32,63,32,119,105,110,100,111,119,46,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,32,58,32,49,59,10,32,32,32,32,114,101,116,117,114,110,32,49,32,43,32,40,100,112,114,32,45,32,49,41,32,42,32,68,69,70,65,85,76,84,95,68,80,82,95,70,65,67,84,79,82,59,10,32,32,125,10,32,32,102,117,110,99,116,105,111,110,32,105,115,69,108,101,109,101,110,116,73,110,86,105,101,119,112,111,114,116,40,101,108,101,109,101,110,116,41,32,123,10,32,32,32,32,99,111,110,115,116,32,114,101,99,116,32,61,32,101,108,101,109,101,110,116,46,103,101,116,66,111,117,110,100,105,110,103,67,108,105,101,110,116,82,101,99,116,40,41,59,10,32,32,32,32,114,101,116,117,114,110,32,114,101,99,116,46,116,111,112,32,62,61,32,48,32,38,38,32,114,101,99,116,46,108,101,102,116,32,62,61,32,48,32,38,38,32,114,101,99,116,46,98,111,116,116,111,109,32,60,61,32,40,119,105,110,100,111,119,46,105,110,110,101,114,72,101,105,103,104,116,32,124,124,32,100,111,99,117,109,101,110,116,46,100,111,99,117,109,101,110,116,69,108,101,109,101,110,116,46,99,108,105,101,110,116,72,101,105,103,104,116,41,32,38,38,32,114,101,99,116,46,114,105,103,104,116,32,60,61,32,40,119,105,110,100,111,119,46,105,110,110,101,114,87,105,100,116,104,32,124,124,32,100,111,99,117,109,101,110,116,46,100,111,99,117,109,101,110,116,69,108,101,109,101,110,116,46,99,108,105,101,110,116,87,105,100,116,104,41,59,10,32,32,125,10,10,32,32,47,47,32,115,114,99,47,100,111,116,108,111,116,116,105,101,46,116,115,10,32,32,118,97,114,32,99,114,101,97,116,101,67,111,114,101,77,111,100,101,32,61,32,40,109,111,100,101,44,32,109,111,100,117,108,101,41,32,61,62,32,123,10,32,32,32,32,105,102,32,40,109,111,100,101,32,61,61,61,32,34,114,101,118,101,114,115,101,34,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,77,111,100,101,46,82,101,118,101,114,115,101,59,10,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,109,111,100,101,32,61,61,61,32,34,98,111,117,110,99,101,34,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,77,111,100,101,46,66,111,117,110,99,101,59,10,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,109,111,100,101,32,61,61,61,32,34,114,101,118,101,114,115,101,45,98,111,117,110,99,101,34,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,77,111,100,101,46,82,101,118,101,114,115,101,66,111,117,110,99,101,59,10,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,77,111,100,101,46,70,111,114,119,97,114,100,59,10,32,32,32,32,125,10,32,32,125,59,10,32,32,118,97,114,32,99,114,101,97,116,101,67,111,114,101,70,105,116,32,61,32,40,102,105,116,44,32,109,111,100,117,108,101,41,32,61,62,32,123,10,32,32,32,32,105,102,32,40,102,105,116,32,61,61,61,32,34,99,111,110,116,97,105,110,34,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,70,105,116,46,67,111,110,116,97,105,110,59,10,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,102,105,116,32,61,61,61,32,34,99,111,118,101,114,34,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,70,105,116,46,67,111,118,101,114,59,10,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,102,105,116,32,61,61,61,32,34,102,105,108,108,34,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,70,105,116,46,70,105,108,108,59,10,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,102,105,116,32,61,61,61,32,34,102,105,116,45,104,101,105,103,104,116,34,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,70,105,116,46,70,105,116,72,101,105,103,104,116,59,10,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,102,105,116,32,61,61,61,32,34,102,105,116,45,119,105,100,116,104,34,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,70,105,116,46,70,105,116,87,105,100,116,104,59,10,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,70,105,116,46,78,111,110,101,59,10,32,32,32,32,125,10,32,32,125,59,10,32,32,118,97,114,32,99,114,101,97,116,101,67,111,114,101,65,108,105,103,110,32,61,32,40,97,108,105,103,110,44,32,109,111,100,117,108,101,41,32,61,62,32,123,10,32,32,32,32,99,111,110,115,116,32,99,111,114,101,65,108,105,103,110,32,61,32,110,101,119,32,109,111,100,117,108,101,46,86,101,99,116,111,114,70,108,111,97,116,40,41,59,10,32,32,32,32,99,111,114,101,65,108,105,103,110,46,112,117,115,104,95,98,97,99,107,40,97,108,105,103,110,91,48,93,41,59,10,32,32,32,32,99,111,114,101,65,108,105,103,110,46,112,117,115,104,95,98,97,99,107,40,97,108,105,103,110,91,49,93,41,59,10,32,32,32,32,114,101,116,117,114,110,32,99,111,114,101,65,108,105,103,110,59,10,32,32,125,59,10,32,32,118,97,114,32,99,114,101,97,116,101,67,111,114,101,83,101,103,109,101,110,116,32,61,32,40,115,101,103,109,101,110,116,44,32,109,111,100,117,108,101,41,32,61,62,32,123,10,32,32,32,32,99,111,110,115,116,32,99,111,114,101,115,101,103,109,101,110,116,32,61,32,110,101,119,32,109,111,100,117,108,101,46,86,101,99,116,111,114,70,108,111,97,116,40,41,59,10,32,32,32,32,105,102,32,40,115,101,103,109,101,110,116,46,108,101,110,103,116,104,32,33,61,61,32,50,41,32,114,101,116,117,114,110,32,99,111,114,101,115,101,103,109,101,110,116,59,10,32,32,32,32,99,111,114,101,115,101,103,109,101,110,116,46,112,117,115,104,95,98,97,99,107,40,115,101,103,109,101,110,116,91,48,93,41,59,10,32,32,32,32,99,111,114,101,115,101,103,109,101,110,116,46,112,117,115,104,95,98,97,99,107,40,115,101,103,109,101,110,116,91,49,93,41,59,10,32,32,32,32,114,101,116,117,114,110,32,99,111,114,101,115,101,103,109,101,110,116,59,10,32,32,125,59,10,32,32,118,97,114,32,99,114,101,97,116,101,67,111,114,101,76,97,121,111,117,116,32,61,32,40,108,97,121,111,117,116,44,32,109,111,100,117,108,101,41,32,61,62,32,123,10,32,32,32,32,105,102,32,40,33,108,97,121,111,117,116,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,111,100,117,108,101,46,99,114,101,97,116,101,68,101,102,97,117,108,116,76,97,121,111,117,116,40,41,59,10,32,32,32,32,125,10,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,97,108,105,103,110,58,32,99,114,101,97,116,101,67,111,114,101,65,108,105,103,110,40,108,97,121,111,117,116,46,97,108,105,103,110,32,63,63,32,91,48,46,53,44,32,48,46,53,93,44,32,109,111,100,117,108,101,41,44,10,32,32,32,32,32,32,102,105,116,58,32,99,114,101,97,116,101,67,111,114,101,70,105,116,40,108,97,121,111,117,116,46,102,105,116,32,63,63,32,34,99,111,110,116,97,105,110,34,44,32,109,111,100,117,108,101,41,10,32,32,32,32,125,59,10,32,32,125,59,10,32,32,118,97,114,32,95,68,111,116,76,111,116,116,105,101,32,61,32,99,108,97,115,115,32,95,68,111,116,76,111,116,116,105,101,32,123,10,32,32,32,32,99,111,110,115,116,114,117,99,116,111,114,40,99,111,110,102,105,103,41,32,123,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,99,97,110,118,97,115,34,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,99,111,110,116,101,120,116,34,44,32,110,117,108,108,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,101,118,101,110,116,77,97,110,97,103,101,114,34,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,34,44,32,110,117,108,108,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,102,114,97,109,101,77,97,110,97,103,101,114,34,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,100,111,116,76,111,116,116,105,101,67,111,114,101,34,44,32,110,117,108,108,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,114,101,110,100,101,114,67,111,110,102,105,103,34,44,32,123,125,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,105,115,70,114,111,122,101,110,34,44,32,102,97,108,115,101,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,34,44,32,110,117,108,108,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,112,111,105,110,116,101,114,85,112,77,101,116,104,111,100,34,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,112,111,105,110,116,101,114,68,111,119,110,77,101,116,104,111,100,34,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,112,111,105,110,116,101,114,77,111,118,101,77,101,116,104,111,100,34,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,112,111,105,110,116,101,114,69,110,116,101,114,77,101,116,104,111,100,34,41,59,10,32,32,32,32,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,116,104,105,115,44,32,34,95,112,111,105,110,116,101,114,69,120,105,116,77,101,116,104,111,100,34,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,32,61,32,99,111,110,102,105,103,46,99,97,110,118,97,115,59,10,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,32,61,32,110,101,119,32,69,118,101,110,116,77,97,110,97,103,101,114,40,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,102,114,97,109,101,77,97,110,97,103,101,114,32,61,32,110,101,119,32,65,110,105,109,97,116,105,111,110,70,114,97,109,101,77,97,110,97,103,101,114,40,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,32,61,32,123,10,32,32,32,32,32,32,32,32,46,46,46,99,111,110,102,105,103,46,114,101,110,100,101,114,67,111,110,102,105,103,44,10,32,32,32,32,32,32,32,32,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,58,32,99,111,110,102,105,103,46,114,101,110,100,101,114,67,111,110,102,105,103,63,46,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,32,124,124,32,103,101,116,68,101,102,97,117,108,116,68,80,82,40,41,44,10,32,32,32,32,32,32,32,32,47,47,32,102,114,101,101,122,101,79,110,79,102,102,115,99,114,101,101,110,32,105,115,32,116,114,117,101,32,98,121,32,100,101,102,97,117,108,116,32,116,111,32,112,114,101,118,101,110,116,32,117,110,110,101,99,101,115,115,97,114,121,32,114,101,110,100,101,114,105,110,103,32,119,104,101,110,32,116,104,101,32,99,97,110,118,97,115,32,105,115,32,111,102,102,115,99,114,101,101,110,10,32,32,32,32,32,32,32,32,102,114,101,101,122,101,79,110,79,102,102,115,99,114,101,101,110,58,32,99,111,110,102,105,103,46,114,101,110,100,101,114,67,111,110,102,105,103,63,46,102,114,101,101,122,101,79,110,79,102,102,115,99,114,101,101,110,32,63,63,32,116,114,117,101,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,68,111,116,76,111,116,116,105,101,87,97,115,109,76,111,97,100,101,114,46,108,111,97,100,40,41,46,116,104,101,110,40,40,109,111,100,117,108,101,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,32,61,32,109,111,100,117,108,101,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,32,110,101,119,32,109,111,100,117,108,101,46,68,111,116,76,111,116,116,105,101,80,108,97,121,101,114,40,123,10,32,32,32,32,32,32,32,32,32,32,97,110,105,109,97,116,105,111,110,73,100,58,32,99,111,110,102,105,103,46,97,110,105,109,97,116,105,111,110,73,100,32,63,63,32,34,34,44,10,32,32,32,32,32,32,32,32,32,32,116,104,101,109,101,73,100,58,32,99,111,110,102,105,103,46,116,104,101,109,101,73,100,32,63,63,32,34,34,44,10,32,32,32,32,32,32,32,32,32,32,115,116,97,116,101,77,97,99,104,105,110,101,73,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,32,32,97,117,116,111,112,108,97,121,58,32,99,111,110,102,105,103,46,97,117,116,111,112,108,97,121,32,63,63,32,102,97,108,115,101,44,10,32,32,32,32,32,32,32,32,32,32,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,58,32,48,44,10,32,32,32,32,32,32,32,32,32,32,108,111,111,112,65,110,105,109,97,116,105,111,110,58,32,99,111,110,102,105,103,46,108,111,111,112,32,63,63,32,102,97,108,115,101,44,10,32,32,32,32,32,32,32,32,32,32,109,111,100,101,58,32,99,114,101,97,116,101,67,111,114,101,77,111,100,101,40,99,111,110,102,105,103,46,109,111,100,101,32,63,63,32,34,102,111,114,119,97,114,100,34,44,32,109,111,100,117,108,101,41,44,10,32,32,32,32,32,32,32,32,32,32,115,101,103,109,101,110,116,58,32,99,114,101,97,116,101,67,111,114,101,83,101,103,109,101,110,116,40,99,111,110,102,105,103,46,115,101,103,109,101,110,116,32,63,63,32,91,93,44,32,109,111,100,117,108,101,41,44,10,32,32,32,32,32,32,32,32,32,32,115,112,101,101,100,58,32,99,111,110,102,105,103,46,115,112,101,101,100,32,63,63,32,49,44,10,32,32,32,32,32,32,32,32,32,32,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,58,32,99,111,110,102,105,103,46,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,32,63,63,32,116,114,117,101,44,10,32,32,32,32,32,32,32,32,32,32,109,97,114,107,101,114,58,32,99,111,110,102,105,103,46,109,97,114,107,101,114,32,63,63,32,34,34,44,10,32,32,32,32,32,32,32,32,32,32,108,97,121,111,117,116,58,32,99,114,101,97,116,101,67,111,114,101,76,97,121,111,117,116,40,99,111,110,102,105,103,46,108,97,121,111,117,116,44,32,109,111,100,117,108,101,41,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,114,101,97,100,121,34,32,125,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,99,111,110,102,105,103,46,100,97,116,97,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,108,111,97,100,70,114,111,109,68,97,116,97,40,99,111,110,102,105,103,46,100,97,116,97,41,59,10,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,99,111,110,102,105,103,46,115,114,99,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,108,111,97,100,70,114,111,109,83,114,99,40,99,111,110,102,105,103,46,115,114,99,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,99,111,110,102,105,103,46,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,115,101,116,66,97,99,107,103,114,111,117,110,100,67,111,108,111,114,40,99,111,110,102,105,103,46,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,41,46,99,97,116,99,104,40,40,101,114,114,111,114,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,10,32,32,32,32,32,32,32,32,32,32,116,121,112,101,58,32,34,108,111,97,100,69,114,114,111,114,34,44,10,32,32,32,32,32,32,32,32,32,32,101,114,114,111,114,58,32,110,101,119,32,69,114,114,111,114,40,96,70,97,105,108,101,100,32,116,111,32,108,111,97,100,32,119,97,115,109,32,109,111,100,117,108,101,58,32,36,123,101,114,114,111,114,125,96,41,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,112,111,105,110,116,101,114,85,112,77,101,116,104,111,100,32,61,32,116,104,105,115,46,95,111,110,80,111,105,110,116,101,114,85,112,46,98,105,110,100,40,116,104,105,115,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,112,111,105,110,116,101,114,68,111,119,110,77,101,116,104,111,100,32,61,32,116,104,105,115,46,95,111,110,80,111,105,110,116,101,114,68,111,119,110,46,98,105,110,100,40,116,104,105,115,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,112,111,105,110,116,101,114,77,111,118,101,77,101,116,104,111,100,32,61,32,116,104,105,115,46,95,111,110,80,111,105,110,116,101,114,77,111,118,101,46,98,105,110,100,40,116,104,105,115,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,112,111,105,110,116,101,114,69,110,116,101,114,77,101,116,104,111,100,32,61,32,116,104,105,115,46,95,111,110,80,111,105,110,116,101,114,69,110,116,101,114,46,98,105,110,100,40,116,104,105,115,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,112,111,105,110,116,101,114,69,120,105,116,77,101,116,104,111,100,32,61,32,116,104,105,115,46,95,111,110,80,111,105,110,116,101,114,76,101,97,118,101,46,98,105,110,100,40,116,104,105,115,41,59,10,32,32,32,32,125,10,32,32,32,32,95,100,105,115,112,97,116,99,104,69,114,114,111,114,40,109,101,115,115,97,103,101,41,32,123,10,32,32,32,32,32,32,99,111,110,115,111,108,101,46,101,114,114,111,114,40,109,101,115,115,97,103,101,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,108,111,97,100,69,114,114,111,114,34,44,32,101,114,114,111,114,58,32,110,101,119,32,69,114,114,111,114,40,109,101,115,115,97,103,101,41,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,97,115,121,110,99,32,95,102,101,116,99,104,68,97,116,97,40,115,114,99,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,97,119,97,105,116,32,102,101,116,99,104,40,115,114,99,41,59,10,32,32,32,32,32,32,105,102,32,40,33,114,101,115,112,111,110,115,101,46,111,107,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,70,97,105,108,101,100,32,116,111,32,102,101,116,99,104,32,97,110,105,109,97,116,105,111,110,32,100,97,116,97,32,102,114,111,109,32,85,82,76,58,32,36,123,115,114,99,125,46,32,36,123,114,101,115,112,111,110,115,101,46,115,116,97,116,117,115,125,58,32,36,123,114,101,115,112,111,110,115,101,46,115,116,97,116,117,115,84,101,120,116,125,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,99,111,110,115,116,32,100,97,116,97,32,61,32,97,119,97,105,116,32,114,101,115,112,111,110,115,101,46,97,114,114,97,121,66,117,102,102,101,114,40,41,59,10,32,32,32,32,32,32,105,102,32,40,105,115,68,111,116,76,111,116,116,105,101,40,100,97,116,97,41,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,100,97,116,97,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,110,101,119,32,84,101,120,116,68,101,99,111,100,101,114,40,41,46,100,101,99,111,100,101,40,100,97,116,97,41,59,10,32,32,32,32,125,10,32,32,32,32,95,108,111,97,100,70,114,111,109,68,97,116,97,40,100,97,116,97,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,99,111,110,115,116,32,119,105,100,116,104,32,61,32,116,104,105,115,46,95,99,97,110,118,97,115,46,119,105,100,116,104,59,10,32,32,32,32,32,32,99,111,110,115,116,32,104,101,105,103,104,116,32,61,32,116,104,105,115,46,95,99,97,110,118,97,115,46,104,101,105,103,104,116,59,10,32,32,32,32,32,32,108,101,116,32,108,111,97,100,101,100,32,61,32,102,97,108,115,101,59,10,32,32,32,32,32,32,105,102,32,40,116,121,112,101,111,102,32,100,97,116,97,32,61,61,61,32,34,115,116,114,105,110,103,34,41,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,33,105,115,76,111,116,116,105,101,40,100,97,116,97,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,100,105,115,112,97,116,99,104,69,114,114,111,114,40,10,32,32,32,32,32,32,32,32,32,32,32,32,34,73,110,118,97,108,105,100,32,76,111,116,116,105,101,32,74,83,79,78,32,115,116,114,105,110,103,58,32,84,104,101,32,112,114,111,118,105,100,101,100,32,115,116,114,105,110,103,32,100,111,101,115,32,110,111,116,32,99,111,110,102,111,114,109,32,116,111,32,116,104,101,32,76,111,116,116,105,101,32,74,83,79,78,32,102,111,114,109,97,116,46,34,10,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,108,111,97,100,101,100,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,108,111,97,100,65,110,105,109,97,116,105,111,110,68,97,116,97,40,100,97,116,97,44,32,119,105,100,116,104,44,32,104,101,105,103,104,116,41,59,10,32,32,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,100,97,116,97,32,105,110,115,116,97,110,99,101,111,102,32,65,114,114,97,121,66,117,102,102,101,114,41,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,33,105,115,68,111,116,76,111,116,116,105,101,40,100,97,116,97,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,100,105,115,112,97,116,99,104,69,114,114,111,114,40,10,32,32,32,32,32,32,32,32,32,32,32,32,34,73,110,118,97,108,105,100,32,100,111,116,76,111,116,116,105,101,32,65,114,114,97,121,66,117,102,102,101,114,58,32,84,104,101,32,112,114,111,118,105,100,101,100,32,65,114,114,97,121,66,117,102,102,101,114,32,100,111,101,115,32,110,111,116,32,99,111,110,102,111,114,109,32,116,111,32,116,104,101,32,100,111,116,76,111,116,116,105,101,32,102,111,114,109,97,116,46,34,10,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,108,111,97,100,101,100,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,108,111,97,100,68,111,116,76,111,116,116,105,101,68,97,116,97,40,100,97,116,97,44,32,119,105,100,116,104,44,32,104,101,105,103,104,116,41,59,10,32,32,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,116,121,112,101,111,102,32,100,97,116,97,32,61,61,61,32,34,111,98,106,101,99,116,34,41,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,33,105,115,76,111,116,116,105,101,40,100,97,116,97,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,100,105,115,112,97,116,99,104,69,114,114,111,114,40,10,32,32,32,32,32,32,32,32,32,32,32,32,34,73,110,118,97,108,105,100,32,76,111,116,116,105,101,32,74,83,79,78,32,111,98,106,101,99,116,58,32,84,104,101,32,112,114,111,118,105,100,101,100,32,111,98,106,101,99,116,32,100,111,101,115,32,110,111,116,32,99,111,110,102,111,114,109,32,116,111,32,116,104,101,32,76,111,116,116,105,101,32,74,83,79,78,32,102,111,114,109,97,116,46,34,10,32,32,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,108,111,97,100,101,100,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,108,111,97,100,65,110,105,109,97,116,105,111,110,68,97,116,97,40,74,83,79,78,46,115,116,114,105,110,103,105,102,121,40,100,97,116,97,41,44,32,119,105,100,116,104,44,32,104,101,105,103,104,116,41,59,10,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,100,105,115,112,97,116,99,104,69,114,114,111,114,40,10,32,32,32,32,32,32,32,32,32,32,96,85,110,115,117,112,112,111,114,116,101,100,32,100,97,116,97,32,116,121,112,101,32,102,111,114,32,97,110,105,109,97,116,105,111,110,32,100,97,116,97,46,32,69,120,112,101,99,116,101,100,58,32,10,32,32,32,32,32,32,32,32,32,32,45,32,115,116,114,105,110,103,32,40,76,111,116,116,105,101,32,74,83,79,78,41,44,10,32,32,32,32,32,32,32,32,32,32,45,32,65,114,114,97,121,66,117,102,102,101,114,32,40,100,111,116,76,111,116,116,105,101,41,44,10,32,32,32,32,32,32,32,32,32,32,45,32,111,98,106,101,99,116,32,40,76,111,116,116,105,101,32,74,83,79,78,41,46,32,10,32,32,32,32,32,32,32,32,32,32,82,101,99,101,105,118,101,100,58,32,36,123,116,121,112,101,111,102,32,100,97,116,97,125,96,10,32,32,32,32,32,32,32,32,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,102,32,40,108,111,97,100,101,100,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,108,111,97,100,34,32,125,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,73,83,95,66,82,79,87,83,69,82,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,114,101,115,105,122,101,40,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,10,32,32,32,32,32,32,32,32,32,32,116,121,112,101,58,32,34,102,114,97,109,101,34,44,10,32,32,32,32,32,32,32,32,32,32,99,117,114,114,101,110,116,70,114,97,109,101,58,32,116,104,105,115,46,99,117,114,114,101,110,116,70,114,97,109,101,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,114,101,110,100,101,114,40,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,111,110,102,105,103,40,41,46,97,117,116,111,112,108,97,121,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,112,108,97,121,40,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,105,115,80,108,97,121,105,110,103,40,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,112,108,97,121,34,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,61,32,116,104,105,115,46,95,102,114,97,109,101,77,97,110,97,103,101,114,46,114,101,113,117,101,115,116,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,116,104,105,115,46,95,100,114,97,119,46,98,105,110,100,40,116,104,105,115,41,41,59,10,32,32,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,99,111,110,115,111,108,101,46,101,114,114,111,114,40,34,115,111,109,101,116,104,105,110,103,32,119,101,110,116,32,119,114,111,110,103,44,32,116,104,101,32,97,110,105,109,97,116,105,111,110,32,119,97,115,32,115,117,112,112,111,115,101,32,116,111,32,97,117,116,111,112,108,97,121,34,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,73,83,95,66,82,79,87,83,69,82,32,38,38,32,116,104,105,115,46,95,99,97,110,118,97,115,32,105,110,115,116,97,110,99,101,111,102,32,72,84,77,76,67,97,110,118,97,115,69,108,101,109,101,110,116,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,46,102,114,101,101,122,101,79,110,79,102,102,115,99,114,101,101,110,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,79,102,102,115,99,114,101,101,110,79,98,115,101,114,118,101,114,46,111,98,115,101,114,118,101,40,116,104,105,115,46,95,99,97,110,118,97,115,44,32,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,46,97,117,116,111,82,101,115,105,122,101,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,67,97,110,118,97,115,82,101,115,105,122,101,79,98,115,101,114,118,101,114,46,111,98,115,101,114,118,101,40,116,104,105,115,46,95,99,97,110,118,97,115,44,32,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,100,105,115,112,97,116,99,104,69,114,114,111,114,40,34,70,97,105,108,101,100,32,116,111,32,108,111,97,100,32,97,110,105,109,97,116,105,111,110,32,100,97,116,97,34,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,95,108,111,97,100,70,114,111,109,83,114,99,40,115,114,99,41,32,123,10,32,32,32,32,32,32,116,104,105,115,46,95,102,101,116,99,104,68,97,116,97,40,115,114,99,41,46,116,104,101,110,40,40,100,97,116,97,41,32,61,62,32,116,104,105,115,46,95,108,111,97,100,70,114,111,109,68,97,116,97,40,100,97,116,97,41,41,46,99,97,116,99,104,40,40,101,114,114,111,114,41,32,61,62,32,116,104,105,115,46,95,100,105,115,112,97,116,99,104,69,114,114,111,114,40,96,70,97,105,108,101,100,32,116,111,32,108,111,97,100,32,97,110,105,109,97,116,105,111,110,32,100,97,116,97,32,102,114,111,109,32,85,82,76,58,32,36,123,115,114,99,125,46,32,36,123,101,114,114,111,114,125,96,41,41,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,98,117,102,102,101,114,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,33,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,41,32,114,101,116,117,114,110,32,110,117,108,108,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,98,117,102,102,101,114,40,41,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,97,99,116,105,118,101,65,110,105,109,97,116,105,111,110,73,100,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,97,99,116,105,118,101,65,110,105,109,97,116,105,111,110,73,100,40,41,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,97,99,116,105,118,101,84,104,101,109,101,73,100,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,97,99,116,105,118,101,84,104,101,109,101,73,100,40,41,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,108,97,121,111,117,116,40,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,108,97,121,111,117,116,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,99,111,110,102,105,103,40,41,46,108,97,121,111,117,116,59,10,32,32,32,32,32,32,105,102,32,40,108,97,121,111,117,116,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,32,32,32,32,97,108,105,103,110,58,32,91,108,97,121,111,117,116,46,97,108,105,103,110,46,103,101,116,40,48,41,44,32,108,97,121,111,117,116,46,97,108,105,103,110,46,103,101,116,40,49,41,93,44,10,32,32,32,32,32,32,32,32,32,32,102,105,116,58,32,40,40,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,115,119,105,116,99,104,32,40,108,97,121,111,117,116,46,102,105,116,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,63,46,70,105,116,46,67,111,110,116,97,105,110,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,99,111,110,116,97,105,110,34,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,63,46,70,105,116,46,67,111,118,101,114,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,99,111,118,101,114,34,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,63,46,70,105,116,46,70,105,108,108,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,102,105,108,108,34,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,63,46,70,105,116,46,70,105,116,72,101,105,103,104,116,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,102,105,116,45,104,101,105,103,104,116,34,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,63,46,70,105,116,46,70,105,116,87,105,100,116,104,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,102,105,116,45,119,105,100,116,104,34,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,97,115,101,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,63,46,70,105,116,46,78,111,110,101,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,110,111,110,101,34,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,101,102,97,117,108,116,58,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,99,111,110,116,97,105,110,34,59,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,125,41,40,41,10,32,32,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,118,111,105,100,32,48,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,109,97,114,107,101,114,40,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,109,97,114,107,101,114,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,99,111,110,102,105,103,40,41,46,109,97,114,107,101,114,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,109,97,114,107,101,114,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,109,97,110,105,102,101,115,116,40,41,32,123,10,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,116,32,109,97,110,105,102,101,115,116,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,109,97,110,105,102,101,115,116,83,116,114,105,110,103,40,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,32,124,124,32,33,109,97,110,105,102,101,115,116,41,32,114,101,116,117,114,110,32,110,117,108,108,59,10,32,32,32,32,32,32,32,32,99,111,110,115,116,32,109,97,110,105,102,101,115,116,74,115,111,110,32,61,32,74,83,79,78,46,112,97,114,115,101,40,109,97,110,105,102,101,115,116,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,79,98,106,101,99,116,46,107,101,121,115,40,109,97,110,105,102,101,115,116,74,115,111,110,41,46,108,101,110,103,116,104,32,61,61,61,32,48,41,32,114,101,116,117,114,110,32,110,117,108,108,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,109,97,110,105,102,101,115,116,74,115,111,110,59,10,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,95,101,114,114,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,110,117,108,108,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,114,101,110,100,101,114,67,111,110,102,105,103,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,115,101,103,109,101,110,116,40,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,115,101,103,109,101,110,116,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,99,111,110,102,105,103,40,41,46,115,101,103,109,101,110,116,59,10,32,32,32,32,32,32,105,102,32,40,115,101,103,109,101,110,116,32,38,38,32,115,101,103,109,101,110,116,46,115,105,122,101,40,41,32,61,61,61,32,50,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,91,115,101,103,109,101,110,116,46,103,101,116,40,48,41,44,32,115,101,103,109,101,110,116,46,103,101,116,40,49,41,93,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,118,111,105,100,32,48,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,108,111,111,112,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,99,111,110,102,105,103,40,41,46,108,111,111,112,65,110,105,109,97,116,105,111,110,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,109,111,100,101,40,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,109,111,100,101,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,99,111,110,102,105,103,40,41,46,109,111,100,101,59,10,32,32,32,32,32,32,105,102,32,40,109,111,100,101,32,61,61,61,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,63,46,77,111,100,101,46,82,101,118,101,114,115,101,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,114,101,118,101,114,115,101,34,59,10,32,32,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,109,111,100,101,32,61,61,61,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,63,46,77,111,100,101,46,66,111,117,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,98,111,117,110,99,101,34,59,10,32,32,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,109,111,100,101,32,61,61,61,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,63,46,77,111,100,101,46,82,101,118,101,114,115,101,66,111,117,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,114,101,118,101,114,115,101,45,98,111,117,110,99,101,34,59,10,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,34,102,111,114,119,97,114,100,34,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,105,115,70,114,111,122,101,110,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,105,115,70,114,111,122,101,110,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,32,63,63,32,34,34,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,97,117,116,111,112,108,97,121,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,99,111,110,102,105,103,40,41,46,97,117,116,111,112,108,97,121,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,99,111,110,102,105,103,40,41,46,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,115,112,101,101,100,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,99,111,110,102,105,103,40,41,46,115,112,101,101,100,32,63,63,32,48,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,105,115,82,101,97,100,121,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,33,61,61,32,110,117,108,108,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,105,115,76,111,97,100,101,100,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,105,115,76,111,97,100,101,100,40,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,105,115,80,108,97,121,105,110,103,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,105,115,80,108,97,121,105,110,103,40,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,105,115,80,97,117,115,101,100,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,105,115,80,97,117,115,101,100,40,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,105,115,83,116,111,112,112,101,100,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,105,115,83,116,111,112,112,101,100,40,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,99,117,114,114,101,110,116,70,114,97,109,101,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,33,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,41,32,114,101,116,117,114,110,32,48,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,77,97,116,104,46,114,111,117,110,100,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,117,114,114,101,110,116,70,114,97,109,101,40,41,32,42,32,49,48,48,41,32,47,32,49,48,48,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,108,111,111,112,67,111,117,110,116,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,108,111,111,112,67,111,117,110,116,40,41,32,63,63,32,48,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,116,111,116,97,108,70,114,97,109,101,115,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,116,111,116,97,108,70,114,97,109,101,115,40,41,32,63,63,32,48,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,100,117,114,97,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,100,117,114,97,116,105,111,110,40,41,32,63,63,32,48,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,115,101,103,109,101,110,116,68,117,114,97,116,105,111,110,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,101,103,109,101,110,116,68,117,114,97,116,105,111,110,40,41,32,63,63,32,48,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,32,99,97,110,118,97,115,40,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,99,97,110,118,97,115,59,10,32,32,32,32,125,10,32,32,32,32,108,111,97,100,40,99,111,110,102,105,103,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,32,124,124,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,33,61,61,32,110,117,108,108,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,102,114,97,109,101,77,97,110,97,103,101,114,46,99,97,110,99,101,108,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,116,104,105,115,46,95,105,115,70,114,111,122,101,110,32,61,32,102,97,108,115,101,59,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,67,111,110,102,105,103,40,123,10,32,32,32,32,32,32,32,32,97,110,105,109,97,116,105,111,110,73,100,58,32,99,111,110,102,105,103,46,97,110,105,109,97,116,105,111,110,73,100,32,63,63,32,34,34,44,10,32,32,32,32,32,32,32,32,116,104,101,109,101,73,100,58,32,99,111,110,102,105,103,46,116,104,101,109,101,73,100,32,63,63,32,34,34,44,10,32,32,32,32,32,32,32,32,115,116,97,116,101,77,97,99,104,105,110,101,73,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,97,117,116,111,112,108,97,121,58,32,99,111,110,102,105,103,46,97,117,116,111,112,108,97,121,32,63,63,32,102,97,108,115,101,44,10,32,32,32,32,32,32,32,32,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,58,32,48,44,10,32,32,32,32,32,32,32,32,108,111,111,112,65,110,105,109,97,116,105,111,110,58,32,99,111,110,102,105,103,46,108,111,111,112,32,63,63,32,102,97,108,115,101,44,10,32,32,32,32,32,32,32,32,109,111,100,101,58,32,99,114,101,97,116,101,67,111,114,101,77,111,100,101,40,99,111,110,102,105,103,46,109,111,100,101,32,63,63,32,34,102,111,114,119,97,114,100,34,44,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,41,44,10,32,32,32,32,32,32,32,32,115,101,103,109,101,110,116,58,32,99,114,101,97,116,101,67,111,114,101,83,101,103,109,101,110,116,40,99,111,110,102,105,103,46,115,101,103,109,101,110,116,32,63,63,32,91,93,44,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,41,44,10,32,32,32,32,32,32,32,32,115,112,101,101,100,58,32,99,111,110,102,105,103,46,115,112,101,101,100,32,63,63,32,49,44,10,32,32,32,32,32,32,32,32,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,58,32,99,111,110,102,105,103,46,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,32,63,63,32,116,114,117,101,44,10,32,32,32,32,32,32,32,32,109,97,114,107,101,114,58,32,99,111,110,102,105,103,46,109,97,114,107,101,114,32,63,63,32,34,34,44,10,32,32,32,32,32,32,32,32,108,97,121,111,117,116,58,32,99,114,101,97,116,101,67,111,114,101,76,97,121,111,117,116,40,99,111,110,102,105,103,46,108,97,121,111,117,116,44,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,41,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,105,102,32,40,99,111,110,102,105,103,46,100,97,116,97,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,108,111,97,100,70,114,111,109,68,97,116,97,40,99,111,110,102,105,103,46,100,97,116,97,41,59,10,32,32,32,32,32,32,125,32,101,108,115,101,32,105,102,32,40,99,111,110,102,105,103,46,115,114,99,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,108,111,97,100,70,114,111,109,83,114,99,40,99,111,110,102,105,103,46,115,114,99,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,116,104,105,115,46,115,101,116,66,97,99,107,103,114,111,117,110,100,67,111,108,111,114,40,99,111,110,102,105,103,46,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,32,63,63,32,34,34,41,59,10,32,32,32,32,125,10,32,32,32,32,95,114,101,110,100,101,114,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,105,102,32,40,33,116,104,105,115,46,95,99,111,110,116,101,120,116,32,38,38,32,34,103,101,116,67,111,110,116,101,120,116,34,32,105,110,32,116,104,105,115,46,95,99,97,110,118,97,115,32,38,38,32,116,121,112,101,111,102,32,116,104,105,115,46,95,99,97,110,118,97,115,46,103,101,116,67,111,110,116,101,120,116,32,61,61,61,32,34,102,117,110,99,116,105,111,110,34,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,111,110,116,101,120,116,32,61,32,116,104,105,115,46,95,99,97,110,118,97,115,46,103,101,116,67,111,110,116,101,120,116,40,34,50,100,34,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,110,100,101,114,101,100,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,114,101,110,100,101,114,40,41,59,10,32,32,32,32,32,32,105,102,32,40,114,101,110,100,101,114,101,100,41,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,99,111,110,116,101,120,116,41,32,123,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,98,117,102,102,101,114,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,98,117,102,102,101,114,40,41,59,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,101,120,112,101,99,116,101,100,76,101,110,103,116,104,32,61,32,116,104,105,115,46,95,99,97,110,118,97,115,46,119,105,100,116,104,32,42,32,116,104,105,115,46,95,99,97,110,118,97,115,46,104,101,105,103,104,116,32,42,32,66,89,84,69,83,95,80,69,82,95,80,73,88,69,76,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,98,117,102,102,101,114,46,98,121,116,101,76,101,110,103,116,104,32,33,61,61,32,101,120,112,101,99,116,101,100,76,101,110,103,116,104,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,99,111,110,115,111,108,101,46,119,97,114,110,40,96,66,117,102,102,101,114,32,115,105,122,101,32,109,105,115,109,97,116,99,104,58,32,103,111,116,32,36,123,98,117,102,102,101,114,46,98,121,116,101,76,101,110,103,116,104,125,44,32,101,120,112,101,99,116,101,100,32,36,123,101,120,112,101,99,116,101,100,76,101,110,103,116,104,125,96,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,108,101,116,32,105,109,97,103,101,68,97,116,97,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,99,108,97,109,112,101,100,66,117,102,102,101,114,32,61,32,110,101,119,32,85,105,110,116,56,67,108,97,109,112,101,100,65,114,114,97,121,40,98,117,102,102,101,114,44,32,48,44,32,98,117,102,102,101,114,46,98,121,116,101,76,101,110,103,116,104,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,121,112,101,111,102,32,73,109,97,103,101,68,97,116,97,32,61,61,61,32,34,117,110,100,101,102,105,110,101,100,34,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,105,109,97,103,101,68,97,116,97,32,61,32,116,104,105,115,46,95,99,111,110,116,101,120,116,46,99,114,101,97,116,101,73,109,97,103,101,68,97,116,97,40,116,104,105,115,46,95,99,97,110,118,97,115,46,119,105,100,116,104,44,32,116,104,105,115,46,95,99,97,110,118,97,115,46,104,101,105,103,104,116,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,105,109,97,103,101,68,97,116,97,46,100,97,116,97,46,115,101,116,40,99,108,97,109,112,101,100,66,117,102,102,101,114,41,59,10,32,32,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,105,109,97,103,101,68,97,116,97,32,61,32,110,101,119,32,73,109,97,103,101,68,97,116,97,40,99,108,97,109,112,101,100,66,117,102,102,101,114,44,32,116,104,105,115,46,95,99,97,110,118,97,115,46,119,105,100,116,104,44,32,116,104,105,115,46,95,99,97,110,118,97,115,46,104,101,105,103,104,116,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,111,110,116,101,120,116,46,112,117,116,73,109,97,103,101,68,97,116,97,40,105,109,97,103,101,68,97,116,97,44,32,48,44,32,48,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,10,32,32,32,32,32,32,32,32,32,32,116,121,112,101,58,32,34,114,101,110,100,101,114,34,44,10,32,32,32,32,32,32,32,32,32,32,99,117,114,114,101,110,116,70,114,97,109,101,58,32,116,104,105,115,46,99,117,114,114,101,110,116,70,114,97,109,101,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,116,114,117,101,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,95,100,114,97,119,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,32,124,124,32,33,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,105,115,80,108,97,121,105,110,103,40,41,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,105,115,84,119,101,101,110,105,110,103,40,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,116,119,101,101,110,85,112,100,97,116,101,40,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,114,101,110,100,101,114,40,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,110,101,120,116,70,114,97,109,101,32,61,32,77,97,116,104,46,114,111,117,110,100,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,114,101,113,117,101,115,116,70,114,97,109,101,40,41,32,42,32,49,101,51,41,32,47,32,49,101,51,59,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,117,112,100,97,116,101,100,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,70,114,97,109,101,40,110,101,120,116,70,114,97,109,101,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,117,112,100,97,116,101,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,121,112,101,58,32,34,102,114,97,109,101,34,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,117,114,114,101,110,116,70,114,97,109,101,58,32,116,104,105,115,46,99,117,114,114,101,110,116,70,114,97,109,101,10,32,32,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,114,101,110,100,101,114,101,100,32,61,32,116,104,105,115,46,95,114,101,110,100,101,114,40,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,114,101,110,100,101,114,101,100,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,105,115,67,111,109,112,108,101,116,101,40,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,111,110,102,105,103,40,41,46,108,111,111,112,65,110,105,109,97,116,105,111,110,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,121,112,101,58,32,34,108,111,111,112,34,44,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,108,111,111,112,67,111,117,110,116,58,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,108,111,111,112,67,111,117,110,116,40,41,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,99,111,109,112,108,101,116,101,34,32,125,41,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,61,32,116,104,105,115,46,95,102,114,97,109,101,77,97,110,97,103,101,114,46,114,101,113,117,101,115,116,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,116,104,105,115,46,95,100,114,97,119,46,98,105,110,100,40,116,104,105,115,41,41,59,10,32,32,32,32,32,32,125,32,99,97,116,99,104,32,40,101,114,114,111,114,41,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,111,108,101,46,101,114,114,111,114,40,34,69,114,114,111,114,32,105,110,32,97,110,105,109,97,116,105,111,110,32,102,114,97,109,101,58,34,44,32,101,114,114,111,114,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,114,101,110,100,101,114,69,114,114,111,114,34,44,32,101,114,114,111,114,32,125,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,101,114,114,111,114,32,105,110,115,116,97,110,99,101,111,102,32,87,101,98,65,115,115,101,109,98,108,121,46,82,117,110,116,105,109,101,69,114,114,111,114,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,100,101,115,116,114,111,121,40,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,112,108,97,121,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,33,61,61,32,110,117,108,108,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,102,114,97,109,101,77,97,110,97,103,101,114,46,99,97,110,99,101,108,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,99,111,110,115,116,32,111,107,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,112,108,97,121,40,41,59,10,32,32,32,32,32,32,105,102,32,40,111,107,32,124,124,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,105,115,80,108,97,121,105,110,103,40,41,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,105,115,70,114,111,122,101,110,32,61,32,102,97,108,115,101,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,112,108,97,121,34,32,125,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,61,32,116,104,105,115,46,95,102,114,97,109,101,77,97,110,97,103,101,114,46,114,101,113,117,101,115,116,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,116,104,105,115,46,95,100,114,97,119,46,98,105,110,100,40,116,104,105,115,41,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,102,32,40,73,83,95,66,82,79,87,83,69,82,32,38,38,32,116,104,105,115,46,95,99,97,110,118,97,115,32,105,110,115,116,97,110,99,101,111,102,32,72,84,77,76,67,97,110,118,97,115,69,108,101,109,101,110,116,32,38,38,32,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,46,102,114,101,101,122,101,79,110,79,102,102,115,99,114,101,101,110,32,38,38,32,33,105,115,69,108,101,109,101,110,116,73,110,86,105,101,119,112,111,114,116,40,116,104,105,115,46,95,99,97,110,118,97,115,41,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,102,114,101,101,122,101,40,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,112,97,117,115,101,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,99,111,110,115,116,32,111,107,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,112,97,117,115,101,40,41,59,10,32,32,32,32,32,32,105,102,32,40,111,107,32,124,124,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,105,115,80,97,117,115,101,100,40,41,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,112,97,117,115,101,34,32,125,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,115,116,111,112,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,99,111,110,115,116,32,111,107,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,116,111,112,40,41,59,10,32,32,32,32,32,32,105,102,32,40,111,107,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,102,114,97,109,101,34,44,32,99,117,114,114,101,110,116,70,114,97,109,101,58,32,116,104,105,115,46,99,117,114,114,101,110,116,70,114,97,109,101,32,125,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,114,101,110,100,101,114,40,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,115,116,111,112,34,32,125,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,115,101,116,70,114,97,109,101,40,102,114,97,109,101,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,105,102,32,40,102,114,97,109,101,32,60,32,48,32,124,124,32,102,114,97,109,101,32,62,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,116,111,116,97,108,70,114,97,109,101,115,40,41,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,99,111,110,115,116,32,111,107,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,101,107,40,102,114,97,109,101,41,59,10,32,32,32,32,32,32,105,102,32,40,111,107,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,102,114,97,109,101,34,44,32,99,117,114,114,101,110,116,70,114,97,109,101,58,32,116,104,105,115,46,99,117,114,114,101,110,116,70,114,97,109,101,32,125,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,114,101,110,100,101,114,40,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,115,101,116,83,112,101,101,100,40,115,112,101,101,100,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,67,111,110,102,105,103,40,123,10,32,32,32,32,32,32,32,32,46,46,46,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,111,110,102,105,103,40,41,44,10,32,32,32,32,32,32,32,32,115,112,101,101,100,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,66,97,99,107,103,114,111,117,110,100,67,111,108,111,114,40,99,111,108,111,114,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,105,102,32,40,73,83,95,66,82,79,87,83,69,82,32,38,38,32,116,104,105,115,46,95,99,97,110,118,97,115,32,105,110,115,116,97,110,99,101,111,102,32,72,84,77,76,67,97,110,118,97,115,69,108,101,109,101,110,116,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,115,116,121,108,101,46,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,32,61,32,99,111,108,111,114,59,10,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,67,111,110,102,105,103,40,123,10,32,32,32,32,32,32,32,32,32,32,46,46,46,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,111,110,102,105,103,40,41,44,10,32,32,32,32,32,32,32,32,32,32,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,58,32,104,101,120,83,116,114,105,110,103,84,111,82,71,66,65,73,110,116,40,99,111,108,111,114,41,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,116,104,105,115,46,95,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,32,61,32,99,111,108,111,114,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,76,111,111,112,40,108,111,111,112,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,67,111,110,102,105,103,40,123,10,32,32,32,32,32,32,32,32,46,46,46,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,111,110,102,105,103,40,41,44,10,32,32,32,32,32,32,32,32,108,111,111,112,65,110,105,109,97,116,105,111,110,58,32,108,111,111,112,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,85,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,40,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,67,111,110,102,105,103,40,123,10,32,32,32,32,32,32,32,32,46,46,46,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,111,110,102,105,103,40,41,44,10,32,32,32,32,32,32,32,32,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,97,100,100,69,118,101,110,116,76,105,115,116,101,110,101,114,40,116,121,112,101,44,32,108,105,115,116,101,110,101,114,41,32,123,10,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,97,100,100,69,118,101,110,116,76,105,115,116,101,110,101,114,40,116,121,112,101,44,32,108,105,115,116,101,110,101,114,41,59,10,32,32,32,32,125,10,32,32,32,32,114,101,109,111,118,101,69,118,101,110,116,76,105,115,116,101,110,101,114,40,116,121,112,101,44,32,108,105,115,116,101,110,101,114,41,32,123,10,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,114,101,109,111,118,101,69,118,101,110,116,76,105,115,116,101,110,101,114,40,116,121,112,101,44,32,108,105,115,116,101,110,101,114,41,59,10,32,32,32,32,125,10,32,32,32,32,100,101,115,116,114,111,121,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,33,61,61,32,110,117,108,108,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,102,114,97,109,101,77,97,110,97,103,101,114,46,99,97,110,99,101,108,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,102,32,40,73,83,95,66,82,79,87,83,69,82,32,38,38,32,116,104,105,115,46,95,99,97,110,118,97,115,32,105,110,115,116,97,110,99,101,111,102,32,72,84,77,76,67,97,110,118,97,115,69,108,101,109,101,110,116,41,32,123,10,32,32,32,32,32,32,32,32,79,102,102,115,99,114,101,101,110,79,98,115,101,114,118,101,114,46,117,110,111,98,115,101,114,118,101,40,116,104,105,115,46,95,99,97,110,118,97,115,41,59,10,32,32,32,32,32,32,32,32,67,97,110,118,97,115,82,101,115,105,122,101,79,98,115,101,114,118,101,114,46,117,110,111,98,115,101,114,118,101,40,116,104,105,115,46,95,99,97,110,118,97,115,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,100,101,108,101,116,101,40,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,116,104,105,115,46,95,99,111,110,116,101,120,116,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,10,32,32,32,32,32,32,32,32,116,121,112,101,58,32,34,100,101,115,116,114,111,121,34,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,114,101,109,111,118,101,65,108,108,69,118,101,110,116,76,105,115,116,101,110,101,114,115,40,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,99,108,101,97,110,117,112,83,116,97,116,101,77,97,99,104,105,110,101,76,105,115,116,101,110,101,114,115,40,41,59,10,32,32,32,32,125,10,32,32,32,32,102,114,101,101,122,101,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,102,114,97,109,101,77,97,110,97,103,101,114,46,99,97,110,99,101,108,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,61,32,110,117,108,108,59,10,32,32,32,32,32,32,116,104,105,115,46,95,105,115,70,114,111,122,101,110,32,61,32,116,114,117,101,59,10,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,102,114,101,101,122,101,34,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,117,110,102,114,101,101,122,101,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,33,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,97,110,105,109,97,116,105,111,110,70,114,97,109,101,73,100,32,61,32,116,104,105,115,46,95,102,114,97,109,101,77,97,110,97,103,101,114,46,114,101,113,117,101,115,116,65,110,105,109,97,116,105,111,110,70,114,97,109,101,40,116,104,105,115,46,95,100,114,97,119,46,98,105,110,100,40,116,104,105,115,41,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,105,115,70,114,111,122,101,110,32,61,32,102,97,108,115,101,59,10,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,117,110,102,114,101,101,122,101,34,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,114,101,115,105,122,101,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,33,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,124,124,32,33,116,104,105,115,46,105,115,76,111,97,100,101,100,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,105,102,32,40,73,83,95,66,82,79,87,83,69,82,32,38,38,32,116,104,105,115,46,95,99,97,110,118,97,115,32,105,110,115,116,97,110,99,101,111,102,32,72,84,77,76,67,97,110,118,97,115,69,108,101,109,101,110,116,41,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,116,32,100,112,114,32,61,32,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,46,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,32,124,124,32,119,105,110,100,111,119,46,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,32,124,124,32,49,59,10,32,32,32,32,32,32,32,32,99,111,110,115,116,32,123,32,104,101,105,103,104,116,58,32,99,108,105,101,110,116,72,101,105,103,104,116,44,32,119,105,100,116,104,58,32,99,108,105,101,110,116,87,105,100,116,104,32,125,32,61,32,116,104,105,115,46,95,99,97,110,118,97,115,46,103,101,116,66,111,117,110,100,105,110,103,67,108,105,101,110,116,82,101,99,116,40,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,99,108,105,101,110,116,72,101,105,103,104,116,32,33,61,61,32,48,32,38,38,32,99,108,105,101,110,116,87,105,100,116,104,32,33,61,61,32,48,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,119,105,100,116,104,32,61,32,99,108,105,101,110,116,87,105,100,116,104,32,42,32,100,112,114,59,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,104,101,105,103,104,116,32,61,32,99,108,105,101,110,116,72,101,105,103,104,116,32,42,32,100,112,114,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,99,111,110,115,116,32,111,107,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,114,101,115,105,122,101,40,116,104,105,115,46,95,99,97,110,118,97,115,46,119,105,100,116,104,44,32,116,104,105,115,46,95,99,97,110,118,97,115,46,104,101,105,103,104,116,41,59,10,32,32,32,32,32,32,105,102,32,40,111,107,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,114,101,110,100,101,114,40,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,115,101,116,83,101,103,109,101,110,116,40,115,116,97,114,116,70,114,97,109,101,44,32,101,110,100,70,114,97,109,101,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,32,124,124,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,67,111,110,102,105,103,40,123,10,32,32,32,32,32,32,32,32,46,46,46,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,111,110,102,105,103,40,41,44,10,32,32,32,32,32,32,32,32,115,101,103,109,101,110,116,58,32,99,114,101,97,116,101,67,111,114,101,83,101,103,109,101,110,116,40,91,115,116,97,114,116,70,114,97,109,101,44,32,101,110,100,70,114,97,109,101,93,44,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,41,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,77,111,100,101,40,109,111,100,101,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,32,124,124,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,67,111,110,102,105,103,40,123,10,32,32,32,32,32,32,32,32,46,46,46,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,111,110,102,105,103,40,41,44,10,32,32,32,32,32,32,32,32,109,111,100,101,58,32,99,114,101,97,116,101,67,111,114,101,77,111,100,101,40,109,111,100,101,44,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,41,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,82,101,110,100,101,114,67,111,110,102,105,103,40,99,111,110,102,105,103,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,123,32,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,44,32,102,114,101,101,122,101,79,110,79,102,102,115,99,114,101,101,110,44,32,46,46,46,114,101,115,116,67,111,110,102,105,103,32,125,32,61,32,99,111,110,102,105,103,59,10,32,32,32,32,32,32,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,32,61,32,123,10,32,32,32,32,32,32,32,32,46,46,46,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,44,10,32,32,32,32,32,32,32,32,46,46,46,114,101,115,116,67,111,110,102,105,103,44,10,32,32,32,32,32,32,32,32,47,47,32,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,32,105,115,32,97,32,115,112,101,99,105,97,108,32,99,97,115,101,44,32,105,116,32,115,104,111,117,108,100,32,98,101,32,115,101,116,32,116,111,32,116,104,101,32,100,101,102,97,117,108,116,32,118,97,108,117,101,32,105,102,32,105,116,39,115,32,110,111,116,32,112,114,111,118,105,100,101,100,10,32,32,32,32,32,32,32,32,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,58,32,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,32,124,124,32,103,101,116,68,101,102,97,117,108,116,68,80,82,40,41,44,10,32,32,32,32,32,32,32,32,102,114,101,101,122,101,79,110,79,102,102,115,99,114,101,101,110,58,32,102,114,101,101,122,101,79,110,79,102,102,115,99,114,101,101,110,32,63,63,32,116,114,117,101,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,105,102,32,40,73,83,95,66,82,79,87,83,69,82,32,38,38,32,116,104,105,115,46,95,99,97,110,118,97,115,32,105,110,115,116,97,110,99,101,111,102,32,72,84,77,76,67,97,110,118,97,115,69,108,101,109,101,110,116,41,32,123,10,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,46,97,117,116,111,82,101,115,105,122,101,41,32,123,10,32,32,32,32,32,32,32,32,32,32,67,97,110,118,97,115,82,101,115,105,122,101,79,98,115,101,114,118,101,114,46,111,98,115,101,114,118,101,40,116,104,105,115,46,95,99,97,110,118,97,115,44,32,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,67,97,110,118,97,115,82,101,115,105,122,101,79,98,115,101,114,118,101,114,46,117,110,111,98,115,101,114,118,101,40,116,104,105,115,46,95,99,97,110,118,97,115,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,46,102,114,101,101,122,101,79,110,79,102,102,115,99,114,101,101,110,41,32,123,10,32,32,32,32,32,32,32,32,32,32,79,102,102,115,99,114,101,101,110,79,98,115,101,114,118,101,114,46,111,98,115,101,114,118,101,40,116,104,105,115,46,95,99,97,110,118,97,115,44,32,116,104,105,115,41,59,10,32,32,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,32,32,79,102,102,115,99,114,101,101,110,79,98,115,101,114,118,101,114,46,117,110,111,98,115,101,114,118,101,40,116,104,105,115,46,95,99,97,110,118,97,115,41,59,10,32,32,32,32,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,105,115,70,114,111,122,101,110,41,32,123,10,32,32,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,117,110,102,114,101,101,122,101,40,41,59,10,32,32,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,108,111,97,100,65,110,105,109,97,116,105,111,110,40,97,110,105,109,97,116,105,111,110,73,100,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,32,124,124,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,97,99,116,105,118,101,65,110,105,109,97,116,105,111,110,73,100,40,41,32,61,61,61,32,97,110,105,109,97,116,105,111,110,73,100,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,99,111,110,115,116,32,108,111,97,100,101,100,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,108,111,97,100,65,110,105,109,97,116,105,111,110,40,97,110,105,109,97,116,105,111,110,73,100,44,32,116,104,105,115,46,95,99,97,110,118,97,115,46,119,105,100,116,104,44,32,116,104,105,115,46,95,99,97,110,118,97,115,46,104,101,105,103,104,116,41,59,10,32,32,32,32,32,32,105,102,32,40,108,111,97,100,101,100,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,32,116,121,112,101,58,32,34,108,111,97,100,34,32,125,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,114,101,115,105,122,101,40,41,59,10,32,32,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,101,118,101,110,116,77,97,110,97,103,101,114,46,100,105,115,112,97,116,99,104,40,123,10,32,32,32,32,32,32,32,32,32,32,116,121,112,101,58,32,34,108,111,97,100,69,114,114,111,114,34,44,10,32,32,32,32,32,32,32,32,32,32,101,114,114,111,114,58,32,110,101,119,32,69,114,114,111,114,40,96,70,97,105,108,101,100,32,116,111,32,97,110,105,109,97,116,105,111,110,32,58,36,123,97,110,105,109,97,116,105,111,110,73,100,125,96,41,10,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,115,101,116,77,97,114,107,101,114,40,109,97,114,107,101,114,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,67,111,110,102,105,103,40,123,10,32,32,32,32,32,32,32,32,46,46,46,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,111,110,102,105,103,40,41,44,10,32,32,32,32,32,32,32,32,109,97,114,107,101,114,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,109,97,114,107,101,114,115,40,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,109,97,114,107,101,114,115,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,109,97,114,107,101,114,115,40,41,59,10,32,32,32,32,32,32,105,102,32,40,109,97,114,107,101,114,115,41,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,117,108,116,32,61,32,91,93,59,10,32,32,32,32,32,32,32,32,102,111,114,32,40,108,101,116,32,105,32,61,32,48,59,32,105,32,60,32,109,97,114,107,101,114,115,46,115,105,122,101,40,41,59,32,105,32,43,61,32,49,41,32,123,10,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,32,109,97,114,107,101,114,32,61,32,109,97,114,107,101,114,115,46,103,101,116,40,105,41,59,10,32,32,32,32,32,32,32,32,32,32,114,101,115,117,108,116,46,112,117,115,104,40,123,10,32,32,32,32,32,32,32,32,32,32,32,32,110,97,109,101,58,32,109,97,114,107,101,114,46,110,97,109,101,44,10,32,32,32,32,32,32,32,32,32,32,32,32,116,105,109,101,58,32,109,97,114,107,101,114,46,116,105,109,101,44,10,32,32,32,32,32,32,32,32,32,32,32,32,100,117,114,97,116,105,111,110,58,32,109,97,114,107,101,114,46,100,117,114,97,116,105,111,110,10,32,32,32,32,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,114,101,116,117,114,110,32,114,101,115,117,108,116,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,91,93,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,84,104,101,109,101,40,116,104,101,109,101,73,100,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,99,111,110,115,116,32,108,111,97,100,101,100,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,84,104,101,109,101,40,116,104,101,109,101,73,100,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,114,101,110,100,101,114,40,41,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,108,111,97,100,101,100,59,10,32,32,32,32,125,10,32,32,32,32,114,101,115,101,116,84,104,101,109,101,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,114,101,115,101,116,84,104,101,109,101,40,41,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,84,104,101,109,101,68,97,116,97,40,116,104,101,109,101,68,97,116,97,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,99,111,110,115,116,32,108,111,97,100,101,100,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,84,104,101,109,101,68,97,116,97,40,116,104,101,109,101,68,97,116,97,41,59,10,32,32,32,32,32,32,116,104,105,115,46,95,114,101,110,100,101,114,40,41,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,108,111,97,100,101,100,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,83,108,111,116,115,40,115,108,111,116,115,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,83,108,111,116,115,40,115,108,111,116,115,41,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,76,97,121,111,117,116,40,108,97,121,111,117,116,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,32,124,124,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,67,111,110,102,105,103,40,123,10,32,32,32,32,32,32,32,32,46,46,46,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,99,111,110,102,105,103,40,41,44,10,32,32,32,32,32,32,32,32,108,97,121,111,117,116,58,32,99,114,101,97,116,101,67,111,114,101,76,97,121,111,117,116,40,108,97,121,111,117,116,44,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,41,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,86,105,101,119,112,111,114,116,40,120,44,32,121,44,32,119,105,100,116,104,44,32,104,101,105,103,104,116,41,32,123,10,32,32,32,32,32,32,105,102,32,40,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,101,116,86,105,101,119,112,111,114,116,40,120,44,32,121,44,32,119,105,100,116,104,44,32,104,101,105,103,104,116,41,59,10,32,32,32,32,125,10,32,32,32,32,115,116,97,116,105,99,32,115,101,116,87,97,115,109,85,114,108,40,117,114,108,41,32,123,10,32,32,32,32,32,32,68,111,116,76,111,116,116,105,101,87,97,115,109,76,111,97,100,101,114,46,115,101,116,87,97,115,109,85,114,108,40,117,114,108,41,59,10,32,32,32,32,125,10,32,32,32,32,108,111,97,100,83,116,97,116,101,77,97,99,104,105,110,101,40,115,116,97,116,101,77,97,99,104,105,110,101,73,100,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,76,111,97,100,40,115,116,97,116,101,77,97,99,104,105,110,101,73,100,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,115,116,97,114,116,83,116,97,116,101,77,97,99,104,105,110,101,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,32,61,61,61,32,110,117,108,108,32,124,124,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,61,61,61,32,110,117,108,108,41,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,99,111,110,115,116,32,111,112,101,110,85,114,108,32,61,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,46,99,114,101,97,116,101,68,101,102,97,117,108,116,79,112,101,110,85,82,76,40,41,59,10,32,32,32,32,32,32,99,111,110,115,116,32,115,116,97,114,116,101,100,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,116,97,116,101,77,97,99,104,105,110,101,83,116,97,114,116,40,111,112,101,110,85,114,108,41,59,10,32,32,32,32,32,32,105,102,32,40,115,116,97,114,116,101,100,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,115,101,116,117,112,83,116,97,116,101,77,97,99,104,105,110,101,76,105,115,116,101,110,101,114,115,40,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,115,116,97,114,116,101,100,59,10,32,32,32,32,125,10,32,32,32,32,115,116,111,112,83,116,97,116,101,77,97,99,104,105,110,101,40,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,115,116,111,112,112,101,100,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,83,116,111,112,40,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,32,32,105,102,32,40,115,116,111,112,112,101,100,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,108,101,97,110,117,112,83,116,97,116,101,77,97,99,104,105,110,101,76,105,115,116,101,110,101,114,115,40,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,115,116,111,112,112,101,100,59,10,32,32,32,32,125,10,32,32,32,32,95,103,101,116,80,111,105,110,116,101,114,80,111,115,105,116,105,111,110,40,101,118,101,110,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,99,116,32,61,32,116,104,105,115,46,95,99,97,110,118,97,115,46,103,101,116,66,111,117,110,100,105,110,103,67,108,105,101,110,116,82,101,99,116,40,41,59,10,32,32,32,32,32,32,99,111,110,115,116,32,115,99,97,108,101,88,32,61,32,116,104,105,115,46,95,99,97,110,118,97,115,46,119,105,100,116,104,32,47,32,114,101,99,116,46,119,105,100,116,104,59,10,32,32,32,32,32,32,99,111,110,115,116,32,115,99,97,108,101,89,32,61,32,116,104,105,115,46,95,99,97,110,118,97,115,46,104,101,105,103,104,116,32,47,32,114,101,99,116,46,104,101,105,103,104,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,32,61,32,116,104,105,115,46,95,114,101,110,100,101,114,67,111,110,102,105,103,46,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,32,124,124,32,119,105,110,100,111,119,46,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,32,124,124,32,49,59,10,32,32,32,32,32,32,99,111,110,115,116,32,120,32,61,32,40,101,118,101,110,116,46,99,108,105,101,110,116,88,32,45,32,114,101,99,116,46,108,101,102,116,41,32,42,32,115,99,97,108,101,88,32,47,32,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,59,10,32,32,32,32,32,32,99,111,110,115,116,32,121,32,61,32,40,101,118,101,110,116,46,99,108,105,101,110,116,89,32,45,32,114,101,99,116,46,116,111,112,41,32,42,32,115,99,97,108,101,89,32,47,32,100,101,118,105,99,101,80,105,120,101,108,82,97,116,105,111,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,32,32,120,44,10,32,32,32,32,32,32,32,32,121,10,32,32,32,32,32,32,125,59,10,32,32,32,32,125,10,32,32,32,32,95,111,110,80,111,105,110,116,101,114,85,112,40,101,118,101,110,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,123,32,120,44,32,121,32,125,32,61,32,116,104,105,115,46,95,103,101,116,80,111,105,110,116,101,114,80,111,115,105,116,105,111,110,40,101,118,101,110,116,41,59,10,32,32,32,32,32,32,116,104,105,115,46,112,111,115,116,80,111,105,110,116,101,114,85,112,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,10,32,32,32,32,95,111,110,80,111,105,110,116,101,114,68,111,119,110,40,101,118,101,110,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,123,32,120,44,32,121,32,125,32,61,32,116,104,105,115,46,95,103,101,116,80,111,105,110,116,101,114,80,111,115,105,116,105,111,110,40,101,118,101,110,116,41,59,10,32,32,32,32,32,32,116,104,105,115,46,112,111,115,116,80,111,105,110,116,101,114,68,111,119,110,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,10,32,32,32,32,95,111,110,80,111,105,110,116,101,114,77,111,118,101,40,101,118,101,110,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,123,32,120,44,32,121,32,125,32,61,32,116,104,105,115,46,95,103,101,116,80,111,105,110,116,101,114,80,111,115,105,116,105,111,110,40,101,118,101,110,116,41,59,10,32,32,32,32,32,32,116,104,105,115,46,112,111,115,116,80,111,105,110,116,101,114,77,111,118,101,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,10,32,32,32,32,95,111,110,80,111,105,110,116,101,114,69,110,116,101,114,40,101,118,101,110,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,123,32,120,44,32,121,32,125,32,61,32,116,104,105,115,46,95,103,101,116,80,111,105,110,116,101,114,80,111,115,105,116,105,111,110,40,101,118,101,110,116,41,59,10,32,32,32,32,32,32,116,104,105,115,46,112,111,115,116,80,111,105,110,116,101,114,69,110,116,101,114,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,10,32,32,32,32,95,111,110,80,111,105,110,116,101,114,76,101,97,118,101,40,101,118,101,110,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,123,32,120,44,32,121,32,125,32,61,32,116,104,105,115,46,95,103,101,116,80,111,105,110,116,101,114,80,111,115,105,116,105,111,110,40,101,118,101,110,116,41,59,10,32,32,32,32,32,32,116,104,105,115,46,112,111,115,116,80,111,105,110,116,101,114,69,120,105,116,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,10,32,32,32,32,112,111,115,116,80,111,105,110,116,101,114,85,112,69,118,101,110,116,40,120,44,32,121,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,80,111,115,116,80,111,105,110,116,101,114,85,112,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,10,32,32,32,32,112,111,115,116,80,111,105,110,116,101,114,68,111,119,110,69,118,101,110,116,40,120,44,32,121,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,80,111,115,116,80,111,105,110,116,101,114,68,111,119,110,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,10,32,32,32,32,112,111,115,116,80,111,105,110,116,101,114,77,111,118,101,69,118,101,110,116,40,120,44,32,121,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,80,111,115,116,80,111,105,110,116,101,114,77,111,118,101,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,10,32,32,32,32,112,111,115,116,80,111,105,110,116,101,114,69,110,116,101,114,69,118,101,110,116,40,120,44,32,121,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,80,111,115,116,80,111,105,110,116,101,114,69,110,116,101,114,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,10,32,32,32,32,112,111,115,116,80,111,105,110,116,101,114,69,120,105,116,69,118,101,110,116,40,120,44,32,121,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,80,111,115,116,80,111,105,110,116,101,114,69,120,105,116,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,10,32,32,32,32,103,101,116,83,116,97,116,101,77,97,99,104,105,110,101,76,105,115,116,101,110,101,114,115,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,33,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,41,32,114,101,116,117,114,110,32,91,93,59,10,32,32,32,32,32,32,99,111,110,115,116,32,108,105,115,116,101,110,101,114,115,86,101,99,116,111,114,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,46,115,116,97,116,101,77,97,99,104,105,110,101,70,114,97,109,101,119,111,114,107,83,101,116,117,112,40,41,59,10,32,32,32,32,32,32,99,111,110,115,116,32,108,105,115,116,101,110,101,114,115,32,61,32,91,93,59,10,32,32,32,32,32,32,102,111,114,32,40,108,101,116,32,105,32,61,32,48,59,32,105,32,60,32,108,105,115,116,101,110,101,114,115,86,101,99,116,111,114,46,115,105,122,101,40,41,59,32,105,32,43,61,32,49,41,32,123,10,32,32,32,32,32,32,32,32,108,105,115,116,101,110,101,114,115,46,112,117,115,104,40,108,105,115,116,101,110,101,114,115,86,101,99,116,111,114,46,103,101,116,40,105,41,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,108,105,115,116,101,110,101,114,115,59,10,32,32,32,32,125,10,32,32,32,32,95,115,101,116,117,112,83,116,97,116,101,77,97,99,104,105,110,101,76,105,115,116,101,110,101,114,115,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,73,83,95,66,82,79,87,83,69,82,32,38,38,32,116,104,105,115,46,95,99,97,110,118,97,115,32,105,110,115,116,97,110,99,101,111,102,32,72,84,77,76,67,97,110,118,97,115,69,108,101,109,101,110,116,32,38,38,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,32,33,61,61,32,110,117,108,108,32,38,38,32,116,104,105,115,46,105,115,76,111,97,100,101,100,41,32,123,10,32,32,32,32,32,32,32,32,99,111,110,115,116,32,108,105,115,116,101,110,101,114,115,32,61,32,116,104,105,115,46,103,101,116,83,116,97,116,101,77,97,99,104,105,110,101,76,105,115,116,101,110,101,114,115,40,41,59,10,32,32,32,32,32,32,32,32,105,102,32,40,108,105,115,116,101,110,101,114,115,46,105,110,99,108,117,100,101,115,40,34,80,111,105,110,116,101,114,85,112,34,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,97,100,100,69,118,101,110,116,76,105,115,116,101,110,101,114,40,34,112,111,105,110,116,101,114,117,112,34,44,32,116,104,105,115,46,95,112,111,105,110,116,101,114,85,112,77,101,116,104,111,100,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,108,105,115,116,101,110,101,114,115,46,105,110,99,108,117,100,101,115,40,34,80,111,105,110,116,101,114,68,111,119,110,34,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,97,100,100,69,118,101,110,116,76,105,115,116,101,110,101,114,40,34,112,111,105,110,116,101,114,100,111,119,110,34,44,32,116,104,105,115,46,95,112,111,105,110,116,101,114,68,111,119,110,77,101,116,104,111,100,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,108,105,115,116,101,110,101,114,115,46,105,110,99,108,117,100,101,115,40,34,80,111,105,110,116,101,114,77,111,118,101,34,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,97,100,100,69,118,101,110,116,76,105,115,116,101,110,101,114,40,34,112,111,105,110,116,101,114,109,111,118,101,34,44,32,116,104,105,115,46,95,112,111,105,110,116,101,114,77,111,118,101,77,101,116,104,111,100,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,108,105,115,116,101,110,101,114,115,46,105,110,99,108,117,100,101,115,40,34,80,111,105,110,116,101,114,69,110,116,101,114,34,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,97,100,100,69,118,101,110,116,76,105,115,116,101,110,101,114,40,34,112,111,105,110,116,101,114,101,110,116,101,114,34,44,32,116,104,105,115,46,95,112,111,105,110,116,101,114,69,110,116,101,114,77,101,116,104,111,100,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,32,32,105,102,32,40,108,105,115,116,101,110,101,114,115,46,105,110,99,108,117,100,101,115,40,34,80,111,105,110,116,101,114,69,120,105,116,34,41,41,32,123,10,32,32,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,97,100,100,69,118,101,110,116,76,105,115,116,101,110,101,114,40,34,112,111,105,110,116,101,114,108,101,97,118,101,34,44,32,116,104,105,115,46,95,112,111,105,110,116,101,114,69,120,105,116,77,101,116,104,111,100,41,59,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,95,99,108,101,97,110,117,112,83,116,97,116,101,77,97,99,104,105,110,101,76,105,115,116,101,110,101,114,115,40,41,32,123,10,32,32,32,32,32,32,105,102,32,40,73,83,95,66,82,79,87,83,69,82,32,38,38,32,116,104,105,115,46,95,99,97,110,118,97,115,32,105,110,115,116,97,110,99,101,111,102,32,72,84,77,76,67,97,110,118,97,115,69,108,101,109,101,110,116,41,32,123,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,114,101,109,111,118,101,69,118,101,110,116,76,105,115,116,101,110,101,114,40,34,112,111,105,110,116,101,114,117,112,34,44,32,116,104,105,115,46,95,112,111,105,110,116,101,114,85,112,77,101,116,104,111,100,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,114,101,109,111,118,101,69,118,101,110,116,76,105,115,116,101,110,101,114,40,34,112,111,105,110,116,101,114,100,111,119,110,34,44,32,116,104,105,115,46,95,112,111,105,110,116,101,114,68,111,119,110,77,101,116,104,111,100,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,114,101,109,111,118,101,69,118,101,110,116,76,105,115,116,101,110,101,114,40,34,112,111,105,110,116,101,114,109,111,118,101,34,44,32,116,104,105,115,46,95,112,111,105,110,116,101,114,77,111,118,101,77,101,116,104,111,100,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,114,101,109,111,118,101,69,118,101,110,116,76,105,115,116,101,110,101,114,40,34,112,111,105,110,116,101,114,101,110,116,101,114,34,44,32,116,104,105,115,46,95,112,111,105,110,116,101,114,69,110,116,101,114,77,101,116,104,111,100,41,59,10,32,32,32,32,32,32,32,32,116,104,105,115,46,95,99,97,110,118,97,115,46,114,101,109,111,118,101,69,118,101,110,116,76,105,115,116,101,110,101,114,40,34,112,111,105,110,116,101,114,108,101,97,118,101,34,44,32,116,104,105,115,46,95,112,111,105,110,116,101,114,69,120,105,116,77,101,116,104,111,100,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,125,10,32,32,32,32,108,111,97,100,83,116,97,116,101,77,97,99,104,105,110,101,68,97,116,97,40,115,116,97,116,101,77,97,99,104,105,110,101,68,97,116,97,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,76,111,97,100,68,97,116,97,40,115,116,97,116,101,77,97,99,104,105,110,101,68,97,116,97,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,97,110,105,109,97,116,105,111,110,83,105,122,101,40,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,119,105,100,116,104,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,97,110,105,109,97,116,105,111,110,83,105,122,101,40,41,46,103,101,116,40,48,41,32,63,63,32,48,59,10,32,32,32,32,32,32,99,111,110,115,116,32,104,101,105,103,104,116,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,97,110,105,109,97,116,105,111,110,83,105,122,101,40,41,46,103,101,116,40,49,41,32,63,63,32,48,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,32,32,119,105,100,116,104,44,10,32,32,32,32,32,32,32,32,104,101,105,103,104,116,10,32,32,32,32,32,32,125,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,83,116,97,116,101,77,97,99,104,105,110,101,66,111,111,108,101,97,110,67,111,110,116,101,120,116,40,110,97,109,101,44,32,118,97,108,117,101,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,83,101,116,66,111,111,108,101,97,110,73,110,112,117,116,40,110,97,109,101,44,32,118,97,108,117,101,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,83,116,97,116,101,77,97,99,104,105,110,101,78,117,109,101,114,105,99,67,111,110,116,101,120,116,40,110,97,109,101,44,32,118,97,108,117,101,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,83,101,116,78,117,109,101,114,105,99,73,110,112,117,116,40,110,97,109,101,44,32,118,97,108,117,101,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,115,101,116,83,116,97,116,101,77,97,99,104,105,110,101,83,116,114,105,110,103,67,111,110,116,101,120,116,40,110,97,109,101,44,32,118,97,108,117,101,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,115,116,97,116,101,77,97,99,104,105,110,101,83,101,116,83,116,114,105,110,103,73,110,112,117,116,40,110,97,109,101,44,32,118,97,108,117,101,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,47,42,42,10,32,32,32,32,32,42,32,71,101,116,32,116,104,101,32,79,114,105,101,110,116,101,100,32,66,111,117,110,100,105,110,103,32,66,111,120,32,40,79,66,66,41,32,112,111,105,110,116,115,32,111,102,32,97,32,108,97,121,101,114,32,98,121,32,105,116,115,32,110,97,109,101,10,32,32,32,32,32,42,32,64,112,97,114,97,109,32,108,97,121,101,114,78,97,109,101,32,45,32,84,104,101,32,110,97,109,101,32,111,102,32,116,104,101,32,108,97,121,101,114,10,32,32,32,32,32,42,32,64,114,101,116,117,114,110,115,32,65,110,32,97,114,114,97,121,32,111,102,32,56,32,110,117,109,98,101,114,115,32,114,101,112,114,101,115,101,110,116,105,110,103,32,52,32,112,111,105,110,116,115,32,40,120,44,121,41,32,111,102,32,116,104,101,32,79,66,66,32,105,110,32,99,108,111,99,107,119,105,115,101,32,111,114,100,101,114,32,115,116,97,114,116,105,110,103,32,102,114,111,109,32,116,111,112,45,108,101,102,116,10,32,32,32,32,32,42,32,32,32,32,32,32,32,32,32,32,91,120,48,44,32,121,48,44,32,120,49,44,32,121,49,44,32,120,50,44,32,121,50,44,32,120,51,44,32,121,51,93,10,32,32,32,32,32,42,10,32,32,32,32,32,42,32,64,101,120,97,109,112,108,101,10,32,32,32,32,32,42,32,96,96,96,116,121,112,101,115,99,114,105,112,116,10,32,32,32,32,32,42,32,47,47,32,68,114,97,119,32,97,32,112,111,108,121,103,111,110,32,97,114,111,117,110,100,32,116,104,101,32,108,97,121,101,114,32,39,76,97,121,101,114,32,49,39,10,32,32,32,32,32,42,32,100,111,116,76,111,116,116,105,101,46,97,100,100,69,118,101,110,116,76,105,115,116,101,110,101,114,40,39,114,101,110,100,101,114,39,44,32,40,41,32,61,62,32,123,10,32,32,32,32,32,42,32,32,32,99,111,110,115,116,32,111,98,98,80,111,105,110,116,115,32,61,32,100,111,116,76,111,116,116,105,101,46,103,101,116,76,97,121,101,114,66,111,117,110,100,105,110,103,66,111,120,40,39,76,97,121,101,114,32,49,39,41,59,10,32,32,32,32,32,42,10,32,32,32,32,32,42,32,32,32,105,102,32,40,111,98,98,80,111,105,110,116,115,41,32,123,10,32,32,32,32,32,42,32,32,32,32,32,99,111,110,116,101,120,116,46,98,101,103,105,110,80,97,116,104,40,41,59,10,32,32,32,32,32,42,32,32,32,32,32,99,111,110,116,101,120,116,46,109,111,118,101,84,111,40,111,98,98,80,111,105,110,116,115,91,48,93,44,32,111,98,98,80,111,105,110,116,115,91,49,93,41,59,32,47,47,32,70,105,114,115,116,32,112,111,105,110,116,10,32,32,32,32,32,42,32,32,32,32,32,99,111,110,116,101,120,116,46,108,105,110,101,84,111,40,111,98,98,80,111,105,110,116,115,91,50,93,44,32,111,98,98,80,111,105,110,116,115,91,51,93,41,59,32,47,47,32,83,101,99,111,110,100,32,112,111,105,110,116,10,32,32,32,32,32,42,32,32,32,32,32,99,111,110,116,101,120,116,46,108,105,110,101,84,111,40,111,98,98,80,111,105,110,116,115,91,52,93,44,32,111,98,98,80,111,105,110,116,115,91,53,93,41,59,32,47,47,32,84,104,105,114,100,32,112,111,105,110,116,10,32,32,32,32,32,42,32,32,32,32,32,99,111,110,116,101,120,116,46,108,105,110,101,84,111,40,111,98,98,80,111,105,110,116,115,91,54,93,44,32,111,98,98,80,111,105,110,116,115,91,55,93,41,59,32,47,47,32,70,111,117,114,116,104,32,112,111,105,110,116,10,32,32,32,32,32,42,32,32,32,32,32,99,111,110,116,101,120,116,46,99,108,111,115,101,80,97,116,104,40,41,59,10,32,32,32,32,32,42,32,32,32,32,32,99,111,110,116,101,120,116,46,115,116,114,111,107,101,40,41,59,10,32,32,32,32,32,42,32,32,32,125,10,32,32,32,32,32,42,32,125,41,59,10,32,32,32,32,32,42,32,96,96,96,10,32,32,32,32,32,42,47,10,32,32,32,32,103,101,116,76,97,121,101,114,66,111,117,110,100,105,110,103,66,111,120,40,108,97,121,101,114,78,97,109,101,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,98,111,117,110,100,115,32,61,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,103,101,116,76,97,121,101,114,66,111,117,110,100,115,40,108,97,121,101,114,78,97,109,101,41,59,10,32,32,32,32,32,32,105,102,32,40,33,98,111,117,110,100,115,41,32,114,101,116,117,114,110,32,118,111,105,100,32,48,59,10,32,32,32,32,32,32,105,102,32,40,98,111,117,110,100,115,46,115,105,122,101,40,41,32,33,61,61,32,56,41,32,114,101,116,117,114,110,32,118,111,105,100,32,48,59,10,32,32,32,32,32,32,99,111,110,115,116,32,112,111,105,110,116,115,32,61,32,91,93,59,10,32,32,32,32,32,32,102,111,114,32,40,108,101,116,32,105,32,61,32,48,59,32,105,32,60,32,56,59,32,105,32,43,61,32,49,41,32,123,10,32,32,32,32,32,32,32,32,112,111,105,110,116,115,46,112,117,115,104,40,98,111,117,110,100,115,46,103,101,116,40,105,41,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,112,111,105,110,116,115,59,10,32,32,32,32,125,10,32,32,32,32,47,42,42,10,32,32,32,32,32,42,32,64,101,120,112,101,114,105,109,101,110,116,97,108,10,32,32,32,32,32,42,32,83,116,97,114,116,32,97,32,116,119,101,101,110,32,97,110,105,109,97,116,105,111,110,32,98,101,116,119,101,101,110,32,116,119,111,32,102,114,97,109,101,32,118,97,108,117,101,115,32,119,105,116,104,32,99,117,115,116,111,109,32,101,97,115,105,110,103,10,32,32,32,32,32,42,32,64,112,97,114,97,109,32,102,114,97,109,101,32,45,32,83,116,97,114,116,105,110,103,32,102,114,97,109,101,32,118,97,108,117,101,10,32,32,32,32,32,42,32,64,112,97,114,97,109,32,100,117,114,97,116,105,111,110,32,45,32,68,117,114,97,116,105,111,110,32,111,102,32,116,104,101,32,116,119,101,101,110,32,105,110,32,115,101,99,111,110,100,115,10,32,32,32,32,32,42,32,64,114,101,116,117,114,110,115,32,116,114,117,101,32,105,102,32,116,119,101,101,110,32,119,97,115,32,115,116,97,114,116,101,100,32,115,117,99,99,101,115,115,102,117,108,108,121,10,32,32,32,32,32,42,47,10,32,32,32,32,116,119,101,101,110,40,102,114,97,109,101,44,32,100,117,114,97,116,105,111,110,41,32,123,10,32,32,32,32,32,32,105,102,32,40,33,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,41,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,99,111,110,115,116,32,101,97,115,105,110,103,32,61,32,91,48,44,32,48,44,32,49,44,32,49,93,59,10,32,32,32,32,32,32,99,111,110,115,116,32,101,97,115,105,110,103,86,101,99,116,111,114,32,61,32,110,101,119,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,46,86,101,99,116,111,114,70,108,111,97,116,40,41,59,10,32,32,32,32,32,32,102,111,114,32,40,99,111,110,115,116,32,118,97,108,32,111,102,32,101,97,115,105,110,103,41,32,123,10,32,32,32,32,32,32,32,32,101,97,115,105,110,103,86,101,99,116,111,114,46,112,117,115,104,95,98,97,99,107,40,118,97,108,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,116,119,101,101,110,40,102,114,97,109,101,44,32,100,117,114,97,116,105,111,110,44,32,101,97,115,105,110,103,86,101,99,116,111,114,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,47,42,42,10,32,32,32,32,32,42,32,64,101,120,112,101,114,105,109,101,110,116,97,108,10,32,32,32,32,32,42,32,83,116,97,114,116,32,97,32,116,119,101,101,110,32,97,110,105,109,97,116,105,111,110,32,116,111,32,97,32,115,112,101,99,105,102,105,99,32,109,97,114,107,101,114,10,32,32,32,32,32,42,32,64,112,97,114,97,109,32,109,97,114,107,101,114,32,45,32,84,104,101,32,109,97,114,107,101,114,32,110,97,109,101,32,116,111,32,116,119,101,101,110,32,116,111,10,32,32,32,32,32,42,32,64,114,101,116,117,114,110,115,32,116,114,117,101,32,105,102,32,116,119,101,101,110,32,119,97,115,32,115,116,97,114,116,101,100,32,115,117,99,99,101,115,115,102,117,108,108,121,10,32,32,32,32,32,42,47,10,32,32,32,32,116,119,101,101,110,84,111,77,97,114,107,101,114,40,109,97,114,107,101,114,44,32,100,117,114,97,116,105,111,110,41,32,123,10,32,32,32,32,32,32,105,102,32,40,33,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,41,32,114,101,116,117,114,110,32,102,97,108,115,101,59,10,32,32,32,32,32,32,99,111,110,115,116,32,101,97,115,105,110,103,32,61,32,91,48,44,32,48,44,32,49,44,32,49,93,59,10,32,32,32,32,32,32,99,111,110,115,116,32,101,97,115,105,110,103,86,101,99,116,111,114,32,61,32,110,101,119,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,46,86,101,99,116,111,114,70,108,111,97,116,40,41,59,10,32,32,32,32,32,32,102,111,114,32,40,99,111,110,115,116,32,118,97,108,32,111,102,32,101,97,115,105,110,103,41,32,123,10,32,32,32,32,32,32,32,32,101,97,115,105,110,103,86,101,99,116,111,114,46,112,117,115,104,95,98,97,99,107,40,118,97,108,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,116,104,105,115,46,95,100,111,116,76,111,116,116,105,101,67,111,114,101,63,46,116,119,101,101,110,84,111,77,97,114,107,101,114,40,109,97,114,107,101,114,44,32,100,117,114,97,116,105,111,110,44,32,101,97,115,105,110,103,86,101,99,116,111,114,41,32,63,63,32,102,97,108,115,101,59,10,32,32,32,32,125,10,32,32,32,32,115,116,97,116,105,99,32,116,114,97,110,115,102,111,114,109,84,104,101,109,101,84,111,76,111,116,116,105,101,83,108,111,116,115,40,116,104,101,109,101,44,32,115,108,111,116,115,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,95,68,111,116,76,111,116,116,105,101,46,95,119,97,115,109,77,111,100,117,108,101,63,46,116,114,97,110,115,102,111,114,109,84,104,101,109,101,84,111,76,111,116,116,105,101,83,108,111,116,115,40,116,104,101,109,101,44,32,115,108,111,116,115,41,32,63,63,32,34,34,59,10,32,32,32,32,125,10,32,32,125,59,10,32,32,95,95,112,117,98,108,105,99,70,105,101,108,100,40,95,68,111,116,76,111,116,116,105,101,44,32,34,95,119,97,115,109,77,111,100,117,108,101,34,44,32,110,117,108,108,41,59,10,32,32,118,97,114,32,68,111,116,76,111,116,116,105,101,32,61,32,95,68,111,116,76,111,116,116,105,101,59,10,10,32,32,47,47,32,115,114,99,47,119,111,114,107,101,114,47,100,111,116,108,111,116,116,105,101,46,119,111,114,107,101,114,46,116,115,10,32,32,118,97,114,32,105,110,115,116,97,110,99,101,115,77,97,112,32,61,32,47,42,32,64,95,95,80,85,82,69,95,95,32,42,47,32,110,101,119,32,77,97,112,40,41,59,10,32,32,118,97,114,32,101,118,101,110,116,72,97,110,100,108,101,114,77,97,112,32,61,32,123,10,32,32,32,32,114,101,97,100,121,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,82,101,97,100,121,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,99,111,109,112,108,101,116,101,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,67,111,109,112,108,101,116,101,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,108,111,97,100,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,108,111,97,100,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,76,111,97,100,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,108,111,97,100,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,108,111,97,100,69,114,114,111,114,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,108,111,97,100,69,114,114,111,114,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,76,111,97,100,69,114,114,111,114,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,108,111,97,100,69,114,114,111,114,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,114,101,110,100,101,114,69,114,114,111,114,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,110,100,101,114,69,114,114,111,114,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,82,101,110,100,101,114,69,114,114,111,114,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,114,101,110,100,101,114,69,114,114,111,114,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,108,111,111,112,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,108,111,111,112,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,76,111,111,112,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,108,111,111,112,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,112,108,97,121,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,112,108,97,121,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,80,108,97,121,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,112,108,97,121,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,112,97,117,115,101,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,112,97,117,115,101,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,80,97,117,115,101,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,112,97,117,115,101,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,116,111,112,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,115,116,111,112,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,83,116,111,112,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,115,116,111,112,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,102,114,97,109,101,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,102,114,97,109,101,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,70,114,97,109,101,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,102,114,97,109,101,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,114,101,110,100,101,114,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,110,100,101,114,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,82,101,110,100,101,114,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,114,101,110,100,101,114,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,102,114,101,101,122,101,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,102,114,101,101,122,101,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,70,114,101,101,122,101,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,102,114,101,101,122,101,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,117,110,102,114,101,101,122,101,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,117,110,102,114,101,101,122,101,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,85,110,102,114,101,101,122,101,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,117,110,102,114,101,101,122,101,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,100,101,115,116,114,111,121,58,32,40,105,110,115,116,97,110,99,101,73,100,41,32,61,62,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,100,101,115,116,114,111,121,69,118,101,110,116,32,61,32,101,118,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,34,34,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,34,111,110,68,101,115,116,114,111,121,34,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,58,32,123,10,32,32,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,44,10,32,32,32,32,32,32,32,32,32,32,101,118,101,110,116,58,32,100,101,115,116,114,111,121,69,118,101,110,116,10,32,32,32,32,32,32,32,32,125,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,10,32,32,125,59,10,32,32,118,97,114,32,99,111,109,109,97,110,100,115,32,61,32,123,10,32,32,32,32,103,101,116,68,111,116,76,111,116,116,105,101,73,110,115,116,97,110,99,101,83,116,97,116,101,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,99,111,110,115,116,32,115,116,97,116,101,32,61,32,123,10,32,32,32,32,32,32,32,32,108,111,111,112,67,111,117,110,116,58,32,105,110,115,116,97,110,99,101,46,108,111,111,112,67,111,117,110,116,44,10,32,32,32,32,32,32,32,32,105,115,76,111,97,100,101,100,58,32,105,110,115,116,97,110,99,101,46,105,115,76,111,97,100,101,100,44,10,32,32,32,32,32,32,32,32,105,115,80,97,117,115,101,100,58,32,105,110,115,116,97,110,99,101,46,105,115,80,97,117,115,101,100,44,10,32,32,32,32,32,32,32,32,105,115,80,108,97,121,105,110,103,58,32,105,110,115,116,97,110,99,101,46,105,115,80,108,97,121,105,110,103,44,10,32,32,32,32,32,32,32,32,105,115,83,116,111,112,112,101,100,58,32,105,110,115,116,97,110,99,101,46,105,115,83,116,111,112,112,101,100,44,10,32,32,32,32,32,32,32,32,105,115,70,114,111,122,101,110,58,32,105,110,115,116,97,110,99,101,46,105,115,70,114,111,122,101,110,44,10,32,32,32,32,32,32,32,32,108,111,111,112,58,32,105,110,115,116,97,110,99,101,46,108,111,111,112,44,10,32,32,32,32,32,32,32,32,109,111,100,101,58,32,105,110,115,116,97,110,99,101,46,109,111,100,101,44,10,32,32,32,32,32,32,32,32,115,112,101,101,100,58,32,105,110,115,116,97,110,99,101,46,115,112,101,101,100,44,10,32,32,32,32,32,32,32,32,99,117,114,114,101,110,116,70,114,97,109,101,58,32,105,110,115,116,97,110,99,101,46,99,117,114,114,101,110,116,70,114,97,109,101,44,10,32,32,32,32,32,32,32,32,116,111,116,97,108,70,114,97,109,101,115,58,32,105,110,115,116,97,110,99,101,46,116,111,116,97,108,70,114,97,109,101,115,44,10,32,32,32,32,32,32,32,32,100,117,114,97,116,105,111,110,58,32,105,110,115,116,97,110,99,101,46,100,117,114,97,116,105,111,110,44,10,32,32,32,32,32,32,32,32,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,58,32,105,110,115,116,97,110,99,101,46,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,44,10,32,32,32,32,32,32,32,32,114,101,110,100,101,114,67,111,110,102,105,103,58,32,105,110,115,116,97,110,99,101,46,114,101,110,100,101,114,67,111,110,102,105,103,44,10,32,32,32,32,32,32,32,32,109,97,114,107,101,114,58,32,105,110,115,116,97,110,99,101,46,109,97,114,107,101,114,44,10,32,32,32,32,32,32,32,32,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,58,32,105,110,115,116,97,110,99,101,46,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,44,10,32,32,32,32,32,32,32,32,109,97,114,107,101,114,115,58,32,105,110,115,116,97,110,99,101,46,109,97,114,107,101,114,115,40,41,44,10,32,32,32,32,32,32,32,32,97,99,116,105,118,101,65,110,105,109,97,116,105,111,110,73,100,58,32,105,110,115,116,97,110,99,101,46,97,99,116,105,118,101,65,110,105,109,97,116,105,111,110,73,100,44,10,32,32,32,32,32,32,32,32,97,99,116,105,118,101,84,104,101,109,101,73,100,58,32,105,110,115,116,97,110,99,101,46,97,99,116,105,118,101,84,104,101,109,101,73,100,44,10,32,32,32,32,32,32,32,32,97,117,116,111,112,108,97,121,58,32,105,110,115,116,97,110,99,101,46,97,117,116,111,112,108,97,121,44,10,32,32,32,32,32,32,32,32,115,101,103,109,101,110,116,58,32,105,110,115,116,97,110,99,101,46,115,101,103,109,101,110,116,44,10,32,32,32,32,32,32,32,32,108,97,121,111,117,116,58,32,105,110,115,116,97,110,99,101,46,108,97,121,111,117,116,44,10,32,32,32,32,32,32,32,32,115,101,103,109,101,110,116,68,117,114,97,116,105,111,110,58,32,105,110,115,116,97,110,99,101,46,115,101,103,109,101,110,116,68,117,114,97,116,105,111,110,44,10,32,32,32,32,32,32,32,32,105,115,82,101,97,100,121,58,32,105,110,115,116,97,110,99,101,46,105,115,82,101,97,100,121,44,10,32,32,32,32,32,32,32,32,109,97,110,105,102,101,115,116,58,32,105,110,115,116,97,110,99,101,46,109,97,110,105,102,101,115,116,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,32,32,115,116,97,116,101,10,32,32,32,32,32,32,125,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,76,97,121,111,117,116,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,108,97,121,111,117,116,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,108,97,121,111,117,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,101,116,76,97,121,111,117,116,40,108,97,121,111,117,116,41,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,32,32,115,117,99,99,101,115,115,58,32,116,114,117,101,10,32,32,32,32,32,32,125,59,10,32,32,32,32,125,44,10,32,32,32,32,103,101,116,83,116,97,116,101,77,97,99,104,105,110,101,76,105,115,116,101,110,101,114,115,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,103,101,116,83,116,97,116,101,77,97,99,104,105,110,101,76,105,115,116,101,110,101,114,115,40,41,59,10,32,32,32,32,125,44,10,32,32,32,32,112,111,115,116,80,111,105,110,116,101,114,68,111,119,110,69,118,101,110,116,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,120,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,120,59,10,32,32,32,32,32,32,99,111,110,115,116,32,121,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,121,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,112,111,115,116,80,111,105,110,116,101,114,68,111,119,110,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,44,10,32,32,32,32,112,111,115,116,80,111,105,110,116,101,114,69,110,116,101,114,69,118,101,110,116,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,120,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,120,59,10,32,32,32,32,32,32,99,111,110,115,116,32,121,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,121,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,112,111,115,116,80,111,105,110,116,101,114,69,110,116,101,114,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,44,10,32,32,32,32,112,111,115,116,80,111,105,110,116,101,114,69,120,105,116,69,118,101,110,116,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,120,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,120,59,10,32,32,32,32,32,32,99,111,110,115,116,32,121,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,121,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,112,111,115,116,80,111,105,110,116,101,114,69,120,105,116,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,44,10,32,32,32,32,112,111,115,116,80,111,105,110,116,101,114,77,111,118,101,69,118,101,110,116,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,120,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,120,59,10,32,32,32,32,32,32,99,111,110,115,116,32,121,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,121,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,112,111,115,116,80,111,105,110,116,101,114,77,111,118,101,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,44,10,32,32,32,32,112,111,115,116,80,111,105,110,116,101,114,85,112,69,118,101,110,116,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,120,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,120,59,10,32,32,32,32,32,32,99,111,110,115,116,32,121,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,121,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,112,111,115,116,80,111,105,110,116,101,114,85,112,69,118,101,110,116,40,120,44,32,121,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,116,97,114,116,83,116,97,116,101,77,97,99,104,105,110,101,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,115,116,97,114,116,83,116,97,116,101,77,97,99,104,105,110,101,40,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,116,111,112,83,116,97,116,101,77,97,99,104,105,110,101,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,115,116,111,112,83,116,97,116,101,77,97,99,104,105,110,101,40,41,59,10,32,32,32,32,125,44,10,32,32,32,32,108,111,97,100,83,116,97,116,101,77,97,99,104,105,110,101,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,115,116,97,116,101,77,97,99,104,105,110,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,115,116,97,116,101,77,97,99,104,105,110,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,108,111,97,100,83,116,97,116,101,77,97,99,104,105,110,101,40,115,116,97,116,101,77,97,99,104,105,110,101,73,100,41,59,10,32,32,32,32,125,44,10,32,32,32,32,108,111,97,100,83,116,97,116,101,77,97,99,104,105,110,101,68,97,116,97,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,115,116,97,116,101,77,97,99,104,105,110,101,68,97,116,97,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,115,116,97,116,101,77,97,99,104,105,110,101,68,97,116,97,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,108,111,97,100,83,116,97,116,101,77,97,99,104,105,110,101,68,97,116,97,40,115,116,97,116,101,77,97,99,104,105,110,101,68,97,116,97,41,59,10,32,32,32,32,125,44,10,32,32,32,32,99,114,101,97,116,101,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,99,111,110,102,105,103,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,99,111,110,102,105,103,59,10,32,32,32,32,32,32,99,111,110,115,116,32,119,105,100,116,104,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,119,105,100,116,104,59,10,32,32,32,32,32,32,99,111,110,115,116,32,104,101,105,103,104,116,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,104,101,105,103,104,116,59,10,32,32,32,32,32,32,105,102,32,40,105,110,115,116,97,110,99,101,115,77,97,112,46,104,97,115,40,105,110,115,116,97,110,99,101,73,100,41,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,97,108,114,101,97,100,121,32,101,120,105,115,116,115,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,110,101,119,32,68,111,116,76,111,116,116,105,101,40,99,111,110,102,105,103,41,59,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,99,97,110,118,97,115,46,104,101,105,103,104,116,32,61,32,104,101,105,103,104,116,59,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,99,97,110,118,97,115,46,119,105,100,116,104,32,61,32,119,105,100,116,104,59,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,115,77,97,112,46,115,101,116,40,105,110,115,116,97,110,99,101,73,100,44,32,105,110,115,116,97,110,99,101,41,59,10,32,32,32,32,32,32,99,111,110,115,116,32,101,118,101,110,116,115,32,61,32,91,10,32,32,32,32,32,32,32,32,34,99,111,109,112,108,101,116,101,34,44,10,32,32,32,32,32,32,32,32,34,102,114,97,109,101,34,44,10,32,32,32,32,32,32,32,32,34,108,111,97,100,34,44,10,32,32,32,32,32,32,32,32,34,108,111,97,100,69,114,114,111,114,34,44,10,32,32,32,32,32,32,32,32,34,114,101,110,100,101,114,69,114,114,111,114,34,44,10,32,32,32,32,32,32,32,32,34,108,111,111,112,34,44,10,32,32,32,32,32,32,32,32,34,112,97,117,115,101,34,44,10,32,32,32,32,32,32,32,32,34,112,108,97,121,34,44,10,32,32,32,32,32,32,32,32,34,115,116,111,112,34,44,10,32,32,32,32,32,32,32,32,34,100,101,115,116,114,111,121,34,44,10,32,32,32,32,32,32,32,32,34,102,114,101,101,122,101,34,44,10,32,32,32,32,32,32,32,32,34,117,110,102,114,101,101,122,101,34,44,10,32,32,32,32,32,32,32,32,34,114,101,110,100,101,114,34,44,10,32,32,32,32,32,32,32,32,34,114,101,97,100,121,34,10,32,32,32,32,32,32,93,59,10,32,32,32,32,32,32,101,118,101,110,116,115,46,102,111,114,69,97,99,104,40,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,97,100,100,69,118,101,110,116,76,105,115,116,101,110,101,114,40,101,118,101,110,116,44,32,101,118,101,110,116,72,97,110,100,108,101,114,77,97,112,91,101,118,101,110,116,93,40,105,110,115,116,97,110,99,101,73,100,41,41,59,10,32,32,32,32,32,32,125,41,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,32,32,105,110,115,116,97,110,99,101,73,100,10,32,32,32,32,32,32,125,59,10,32,32,32,32,125,44,10,32,32,32,32,100,101,115,116,114,111,121,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,114,101,116,117,114,110,59,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,100,101,115,116,114,111,121,40,41,59,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,115,77,97,112,46,100,101,108,101,116,101,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,125,44,10,32,32,32,32,102,114,101,101,122,101,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,102,114,101,101,122,101,40,41,59,10,32,32,32,32,125,44,10,32,32,32,32,108,111,97,100,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,99,111,110,102,105,103,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,99,111,110,102,105,103,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,108,111,97,100,40,99,111,110,102,105,103,41,59,10,32,32,32,32,125,44,10,32,32,32,32,108,111,97,100,65,110,105,109,97,116,105,111,110,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,97,110,105,109,97,116,105,111,110,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,97,110,105,109,97,116,105,111,110,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,108,111,97,100,65,110,105,109,97,116,105,111,110,40,97,110,105,109,97,116,105,111,110,73,100,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,84,104,101,109,101,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,116,104,101,109,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,116,104,101,109,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,115,101,116,84,104,101,109,101,40,116,104,101,109,101,73,100,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,84,104,101,109,101,68,97,116,97,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,116,104,101,109,101,68,97,116,97,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,116,104,101,109,101,68,97,116,97,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,115,101,116,84,104,101,109,101,68,97,116,97,40,116,104,101,109,101,68,97,116,97,41,59,10,32,32,32,32,125,44,10,32,32,32,32,112,97,117,115,101,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,112,97,117,115,101,40,41,59,10,32,32,32,32,125,44,10,32,32,32,32,112,108,97,121,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,112,108,97,121,40,41,59,10,32,32,32,32,125,44,10,32,32,32,32,114,101,115,105,122,101,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,119,105,100,116,104,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,119,105,100,116,104,59,10,32,32,32,32,32,32,99,111,110,115,116,32,104,101,105,103,104,116,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,104,101,105,103,104,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,99,97,110,118,97,115,46,104,101,105,103,104,116,32,61,32,104,101,105,103,104,116,59,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,99,97,110,118,97,115,46,119,105,100,116,104,32,61,32,119,105,100,116,104,59,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,114,101,115,105,122,101,40,41,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,32,32,115,117,99,99,101,115,115,58,32,116,114,117,101,10,32,32,32,32,32,32,125,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,66,97,99,107,103,114,111,117,110,100,67,111,108,111,114,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,101,116,66,97,99,107,103,114,111,117,110,100,67,111,108,111,114,40,98,97,99,107,103,114,111,117,110,100,67,111,108,111,114,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,70,114,97,109,101,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,102,114,97,109,101,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,102,114,97,109,101,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,101,116,70,114,97,109,101,40,102,114,97,109,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,77,111,100,101,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,109,111,100,101,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,109,111,100,101,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,101,116,77,111,100,101,40,109,111,100,101,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,82,101,110,100,101,114,67,111,110,102,105,103,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,110,100,101,114,67,111,110,102,105,103,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,114,101,110,100,101,114,67,111,110,102,105,103,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,101,116,82,101,110,100,101,114,67,111,110,102,105,103,40,114,101,110,100,101,114,67,111,110,102,105,103,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,83,101,103,109,101,110,116,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,115,101,103,109,101,110,116,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,115,101,103,109,101,110,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,101,116,83,101,103,109,101,110,116,40,115,101,103,109,101,110,116,91,48,93,44,32,115,101,103,109,101,110,116,91,49,93,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,83,112,101,101,100,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,115,112,101,101,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,115,112,101,101,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,101,116,83,112,101,101,100,40,115,112,101,101,100,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,85,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,101,116,85,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,40,117,115,101,70,114,97,109,101,73,110,116,101,114,112,111,108,97,116,105,111,110,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,87,97,115,109,85,114,108,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,68,111,116,76,111,116,116,105,101,46,115,101,116,87,97,115,109,85,114,108,40,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,117,114,108,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,116,111,112,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,116,111,112,40,41,59,10,32,32,32,32,125,44,10,32,32,32,32,117,110,102,114,101,101,122,101,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,117,110,102,114,101,101,122,101,40,41,59,10,32,32,32,32,125,44,10,32,32,32,32,116,119,101,101,110,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,102,114,97,109,101,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,102,114,97,109,101,59,10,32,32,32,32,32,32,99,111,110,115,116,32,100,117,114,97,116,105,111,110,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,100,117,114,97,116,105,111,110,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,116,119,101,101,110,40,102,114,97,109,101,44,32,100,117,114,97,116,105,111,110,41,59,10,32,32,32,32,125,44,10,32,32,32,32,116,119,101,101,110,84,111,77,97,114,107,101,114,58,32,40,114,101,113,117,101,115,116,41,32,61,62,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,109,97,114,107,101,114,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,109,97,114,107,101,114,59,10,32,32,32,32,32,32,99,111,110,115,116,32,100,117,114,97,116,105,111,110,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,100,117,114,97,116,105,111,110,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,116,119,101,101,110,84,111,77,97,114,107,101,114,40,109,97,114,107,101,114,44,32,100,117,114,97,116,105,111,110,41,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,86,105,101,119,112,111,114,116,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,120,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,120,59,10,32,32,32,32,32,32,99,111,110,115,116,32,121,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,121,59,10,32,32,32,32,32,32,99,111,110,115,116,32,119,105,100,116,104,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,119,105,100,116,104,59,10,32,32,32,32,32,32,99,111,110,115,116,32,104,101,105,103,104,116,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,104,101,105,103,104,116,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,114,101,116,117,114,110,32,105,110,115,116,97,110,99,101,46,115,101,116,86,105,101,119,112,111,114,116,40,120,44,32,121,44,32,119,105,100,116,104,44,32,104,101,105,103,104,116,41,59,10,32,32,32,32,125,44,10,32,32,32,32,97,110,105,109,97,116,105,111,110,83,105,122,101,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,99,111,110,115,116,32,123,32,104,101,105,103,104,116,44,32,119,105,100,116,104,32,125,32,61,32,105,110,115,116,97,110,99,101,46,97,110,105,109,97,116,105,111,110,83,105,122,101,40,41,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,32,32,104,101,105,103,104,116,44,10,32,32,32,32,32,32,32,32,119,105,100,116,104,10,32,32,32,32,32,32,125,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,77,97,114,107,101,114,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,109,97,114,107,101,114,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,109,97,114,107,101,114,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,101,116,77,97,114,107,101,114,40,109,97,114,107,101,114,41,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,32,32,115,117,99,99,101,115,115,58,32,116,114,117,101,10,32,32,32,32,32,32,125,59,10,32,32,32,32,125,44,10,32,32,32,32,115,101,116,76,111,111,112,40,114,101,113,117,101,115,116,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,73,100,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,105,110,115,116,97,110,99,101,73,100,59,10,32,32,32,32,32,32,99,111,110,115,116,32,108,111,111,112,32,61,32,114,101,113,117,101,115,116,46,112,97,114,97,109,115,46,108,111,111,112,59,10,32,32,32,32,32,32,99,111,110,115,116,32,105,110,115,116,97,110,99,101,32,61,32,105,110,115,116,97,110,99,101,115,77,97,112,46,103,101,116,40,105,110,115,116,97,110,99,101,73,100,41,59,10,32,32,32,32,32,32,105,102,32,40,33,105,110,115,116,97,110,99,101,41,32,123,10,32,32,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,73,110,115,116,97,110,99,101,32,119,105,116,104,32,105,100,32,36,123,105,110,115,116,97,110,99,101,73,100,125,32,100,111,101,115,32,110,111,116,32,101,120,105,115,116,46,96,41,59,10,32,32,32,32,32,32,125,10,32,32,32,32,32,32,105,110,115,116,97,110,99,101,46,115,101,116,76,111,111,112,40,108,111,111,112,41,59,10,32,32,32,32,32,32,114,101,116,117,114,110,32,123,10,32,32,32,32,32,32,32,32,115,117,99,99,101,115,115,58,32,116,114,117,101,10,32,32,32,32,32,32,125,59,10,32,32,32,32,125,10,32,32,125,59,10,32,32,102,117,110,99,116,105,111,110,32,101,120,101,99,117,116,101,67,111,109,109,97,110,100,40,114,112,99,82,101,113,117,101,115,116,41,32,123,10,32,32,32,32,99,111,110,115,116,32,109,101,116,104,111,100,32,61,32,114,112,99,82,101,113,117,101,115,116,46,109,101,116,104,111,100,59,10,32,32,32,32,105,102,32,40,116,121,112,101,111,102,32,99,111,109,109,97,110,100,115,91,109,101,116,104,111,100,93,32,61,61,61,32,34,102,117,110,99,116,105,111,110,34,41,32,123,10,32,32,32,32,32,32,114,101,116,117,114,110,32,99,111,109,109,97,110,100,115,91,109,101,116,104,111,100,93,40,114,112,99,82,101,113,117,101,115,116,41,59,10,32,32,32,32,125,32,101,108,115,101,32,123,10,32,32,32,32,32,32,116,104,114,111,119,32,110,101,119,32,69,114,114,111,114,40,96,77,101,116,104,111,100,32,36,123,109,101,116,104,111,100,125,32,105,115,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,32,105,110,32,99,111,109,109,97,110,100,115,46,96,41,59,10,32,32,32,32,125,10,32,32,125,10,32,32,115,101,108,102,46,111,110,109,101,115,115,97,103,101,32,61,32,40,101,118,101,110,116,41,32,61,62,32,123,10,32,32,32,32,116,114,121,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,117,108,116,32,61,32,101,120,101,99,117,116,101,67,111,109,109,97,110,100,40,101,118,101,110,116,46,100,97,116,97,41,59,10,32,32,32,32,32,32,99,111,110,115,116,32,114,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,101,118,101,110,116,46,100,97,116,97,46,105,100,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,101,118,101,110,116,46,100,97,116,97,46,109,101,116,104,111,100,44,10,32,32,32,32,32,32,32,32,114,101,115,117,108,116,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,114,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,32,99,97,116,99,104,32,40,101,114,114,111,114,41,32,123,10,32,32,32,32,32,32,99,111,110,115,116,32,101,114,114,111,114,82,101,115,112,111,110,115,101,32,61,32,123,10,32,32,32,32,32,32,32,32,105,100,58,32,101,118,101,110,116,46,100,97,116,97,46,105,100,44,10,32,32,32,32,32,32,32,32,109,101,116,104,111,100,58,32,101,118,101,110,116,46,100,97,116,97,46,109,101,116,104,111,100,44,10,32,32,32,32,32,32,32,32,101,114,114,111,114,58,32,101,114,114,111,114,46,109,101,115,115,97,103,101,10,32,32,32,32,32,32,125,59,10,32,32,32,32,32,32,115,101,108,102,46,112,111,115,116,77,101,115,115,97,103,101,40,101,114,114,111,114,82,101,115,112,111,110,115,101,41,59,10,32,32,32,32,125,10,32,32,125,59,10,32,32,118,97,114,32,100,117,109,109,121,32,61,32,34,34,59,10,32,32,118,97,114,32,100,111,116,108,111,116,116,105,101,95,119,111,114,107,101,114,95,100,101,102,97,117,108,116,32,61,32,100,117,109,109,121,59,10,125,41,40,41,59,10])],{type:"application/javascript"}),i=URL.createObjectURL(t),r=new Worker(i);return URL.revokeObjectURL(i),r}},lW=oW,hW=class{constructor(){Vt(this,"_workers",new Map),Vt(this,"_animationWorkerMap",new Map)}getWorker(t){return this._workers.has(t)||this._workers.set(t,new lW),this._workers.get(t)}assignAnimationToWorker(t,i){this._animationWorkerMap.set(t,i)}unassignAnimationFromWorker(t){this._animationWorkerMap.delete(t)}sendMessage(t,i,r){this.getWorker(t).postMessage(i,r||[])}terminateWorker(t){let i=this._workers.get(t);i&&(i.terminate(),this._workers.delete(t))}};function CS(e,t){if(e instanceof HTMLCanvasElement){let{height:i,width:r}=e.getBoundingClientRect();if(i!==0&&r!==0)return{width:r*t,height:i*t}}return{width:e.width,height:e.height}}function ES(){return Date.now().toString(36)+Math.random().toString(36).substr(2,9)}var TS=class qh{constructor(t){Vt(this,"_eventManager",new TO),Vt(this,"_id"),Vt(this,"_worker"),Vt(this,"_canvas"),Vt(this,"_dotLottieInstanceState",{loopCount:0,markers:[],autoplay:!1,backgroundColor:"",currentFrame:0,duration:0,loop:!1,mode:"forward",segment:[0,0],segmentDuration:0,speed:1,totalFrames:0,isLoaded:!1,isPlaying:!1,isPaused:!1,isStopped:!0,isFrozen:!1,useFrameInterpolation:!1,renderConfig:{devicePixelRatio:$h()},activeAnimationId:"",activeThemeId:"",layout:void 0,marker:void 0,isReady:!1,manifest:null}),Vt(this,"_created",!1),Vt(this,"_pointerUpMethod"),Vt(this,"_pointerDownMethod"),Vt(this,"_pointerMoveMethod"),Vt(this,"_pointerEnterMethod"),Vt(this,"_pointerExitMethod"),this._canvas=t.canvas,this._id=`dotlottie-${ES()}`;let i=t.workerId||"defaultWorker";this._worker=qh._workerManager.getWorker(i),qh._workerManager.assignAnimationToWorker(this._id,i),qh._wasmUrl&&this._sendMessage("setWasmUrl",{url:qh._wasmUrl}),this._create({...t,renderConfig:{...t.renderConfig,devicePixelRatio:t.renderConfig?.devicePixelRatio||$h(),freezeOnOffscreen:t.renderConfig?.freezeOnOffscreen??!0}}),this._worker.addEventListener("message",this._handleWorkerEvent.bind(this)),this._pointerUpMethod=this._onPointerUp.bind(this),this._pointerDownMethod=this._onPointerDown.bind(this),this._pointerMoveMethod=this._onPointerMove.bind(this),this._pointerEnterMethod=this._onPointerEnter.bind(this),this._pointerExitMethod=this._onPointerLeave.bind(this)}async _handleWorkerEvent(t){let i=t.data;i.id||(i.method==="onLoad"&&i.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(i.result.event),R1&&this._canvas instanceof HTMLCanvasElement&&(this._dotLottieInstanceState.renderConfig.freezeOnOffscreen&&Bn.observe(this._canvas,this),this._dotLottieInstanceState.renderConfig.autoResize&&kn.observe(this._canvas,this))),i.method==="onComplete"&&i.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(i.result.event)),i.method==="onDestroy"&&i.result.instanceId===this._id&&this._eventManager.dispatch(i.result.event),i.method==="onUnfreeze"&&i.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._dotLottieInstanceState.isFrozen=!1,this._eventManager.dispatch(i.result.event)),i.method==="onFrame"&&i.result.instanceId===this._id&&(this._dotLottieInstanceState.currentFrame=i.result.event.currentFrame,this._eventManager.dispatch(i.result.event)),i.method==="onRender"&&i.result.instanceId===this._id&&this._eventManager.dispatch(i.result.event),i.method==="onFreeze"&&i.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(i.result.event)),i.method==="onPause"&&i.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(i.result.event)),i.method==="onPlay"&&i.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(i.result.event)),i.method==="onStop"&&i.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(i.result.event)),i.method==="onLoadError"&&i.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(i.result.event)),i.method==="onRenderError"&&i.result.instanceId===this._id&&this._eventManager.dispatch(i.result.event),i.method==="onReady"&&i.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(i.result.event)),i.method==="onLoop"&&i.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(i.result.event)))}async _create(t){let i;this._canvas instanceof HTMLCanvasElement?i=this._canvas.transferControlToOffscreen():i=this._canvas;let{instanceId:r}=await this._sendMessage("create",{instanceId:this._id,config:{...t,canvas:i},...CS(this._canvas,t.renderConfig?.devicePixelRatio||$h())},[i]);if(r!==this._id)throw new Error("Instance ID mismatch");this._created=!0,await this._updateDotLottieInstanceState()}get loopCount(){return this._dotLottieInstanceState.loopCount}get isLoaded(){return this._dotLottieInstanceState.isLoaded}get isPlaying(){return this._dotLottieInstanceState.isPlaying}get isPaused(){return this._dotLottieInstanceState.isPaused}get isStopped(){return this._dotLottieInstanceState.isStopped}get currentFrame(){return this._dotLottieInstanceState.currentFrame}get isFrozen(){return this._dotLottieInstanceState.isFrozen}get segmentDuration(){return this._dotLottieInstanceState.segmentDuration}get totalFrames(){return this._dotLottieInstanceState.totalFrames}get segment(){return this._dotLottieInstanceState.segment}get speed(){return this._dotLottieInstanceState.speed}get duration(){return this._dotLottieInstanceState.duration}get isReady(){return this._dotLottieInstanceState.isReady}get mode(){return this._dotLottieInstanceState.mode}get canvas(){return this._canvas}get autoplay(){return this._dotLottieInstanceState.autoplay}get backgroundColor(){return this._dotLottieInstanceState.backgroundColor}get loop(){return this._dotLottieInstanceState.loop}get useFrameInterpolation(){return this._dotLottieInstanceState.useFrameInterpolation}get renderConfig(){return this._dotLottieInstanceState.renderConfig}get manifest(){return this._dotLottieInstanceState.manifest}get activeAnimationId(){return this._dotLottieInstanceState.activeAnimationId}get marker(){return this._dotLottieInstanceState.marker}get activeThemeId(){return this._dotLottieInstanceState.activeThemeId}get layout(){return this._dotLottieInstanceState.layout}async play(){this._created&&(await this._sendMessage("play",{instanceId:this._id}),await this._updateDotLottieInstanceState(),R1&&this._canvas instanceof HTMLCanvasElement&&this._dotLottieInstanceState.renderConfig.freezeOnOffscreen&&!PO(this._canvas)&&await this.freeze())}async pause(){this._created&&(await this._sendMessage("pause",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async stop(){this._created&&(await this._sendMessage("stop",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async setSpeed(t){this._created&&(await this._sendMessage("setSpeed",{instanceId:this._id,speed:t}),await this._updateDotLottieInstanceState())}async setMode(t){this._created&&(await this._sendMessage("setMode",{instanceId:this._id,mode:t}),await this._updateDotLottieInstanceState())}async setFrame(t){this._created&&(await this._sendMessage("setFrame",{frame:t,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setSegment(t,i){this._created&&(await this._sendMessage("setSegment",{instanceId:this._id,segment:[t,i]}),await this._updateDotLottieInstanceState())}async setRenderConfig(t){if(!this._created)return;let{devicePixelRatio:i,freezeOnOffscreen:r,...s}=t;await this._sendMessage("setRenderConfig",{instanceId:this._id,renderConfig:{...this._dotLottieInstanceState.renderConfig,...s,devicePixelRatio:i||$h(),freezeOnOffscreen:r??!0}}),await this._updateDotLottieInstanceState(),R1&&this._canvas instanceof HTMLCanvasElement&&(this._dotLottieInstanceState.renderConfig.autoResize?kn.observe(this._canvas,this):kn.unobserve(this._canvas),this._dotLottieInstanceState.renderConfig.freezeOnOffscreen?Bn.observe(this._canvas,this):(Bn.unobserve(this._canvas),this._dotLottieInstanceState.isFrozen&&await this.unfreeze()))}async setUseFrameInterpolation(t){this._created&&(await this._sendMessage("setUseFrameInterpolation",{instanceId:this._id,useFrameInterpolation:t}),await this._updateDotLottieInstanceState())}async setTheme(t){if(!this._created)return!1;let i=this._sendMessage("setTheme",{instanceId:this._id,themeId:t});return await this._updateDotLottieInstanceState(),i}async load(t){this._created&&(await this._sendMessage("load",{config:t,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setLoop(t){this._created&&(await this._sendMessage("setLoop",{instanceId:this._id,loop:t}),await this._updateDotLottieInstanceState())}async resize(){if(!this._created)return;let{height:t,width:i}=CS(this._canvas,this._dotLottieInstanceState.renderConfig.devicePixelRatio||$h());await this._sendMessage("resize",{height:t,instanceId:this._id,width:i}),await this._updateDotLottieInstanceState()}async destroy(){this._created&&(this._created=!1,await this._sendMessage("destroy",{instanceId:this._id}),this._cleanupStateMachineListeners(),qh._workerManager.unassignAnimationFromWorker(this._id),this._eventManager.removeAllEventListeners(),R1&&this._canvas instanceof HTMLCanvasElement&&(Bn.unobserve(this._canvas),kn.unobserve(this._canvas)))}async freeze(){this._created&&(await this._sendMessage("freeze",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async unfreeze(){this._created&&(await this._sendMessage("unfreeze",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async setBackgroundColor(t){this._created&&(await this._sendMessage("setBackgroundColor",{instanceId:this._id,backgroundColor:t}),await this._updateDotLottieInstanceState())}async loadAnimation(t){this._created&&(await this._sendMessage("loadAnimation",{animationId:t,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setLayout(t){this._created&&(await this._sendMessage("setLayout",{instanceId:this._id,layout:t}),await this._updateDotLottieInstanceState())}async _updateDotLottieInstanceState(){if(!this._created)return;let t=await this._sendMessage("getDotLottieInstanceState",{instanceId:this._id});this._dotLottieInstanceState=t.state}markers(){return this._dotLottieInstanceState.markers}async setMarker(t){this._created&&(await this._sendMessage("setMarker",{instanceId:this._id,marker:t}),await this._updateDotLottieInstanceState())}async setThemeData(t){if(!this._created)return!1;let i=await this._sendMessage("setThemeData",{instanceId:this._id,themeData:t});return await this._updateDotLottieInstanceState(),i}async setViewport(t,i,r,s){return this._created?this._sendMessage("setViewport",{x:t,y:i,width:r,height:s,instanceId:this._id}):!1}async animationSize(){return this._created?this._sendMessage("animationSize",{instanceId:this._id}):{height:0,width:0}}async tween(t,i){return this._created?this._sendMessage("tween",{instanceId:this._id,frame:t,duration:i}):!1}async tweenToMarker(t,i){return this._created?this._sendMessage("tweenToMarker",{instanceId:this._id,marker:t,duration:i}):!1}async _sendMessage(t,i,r){let s={id:`dotlottie-request-${ES()}`,method:t,params:i};return this._worker.postMessage(s,r||[]),new Promise((a,n)=>{let o=l=>{let h=l.data;h.id===s.id&&(this._worker.removeEventListener("message",o),h.error?n(new Error(`Failed to execute method ${t}: ${h.error}`)):a(h.result))};this._worker.addEventListener("message",o)})}addEventListener(t,i){this._eventManager.addEventListener(t,i)}removeEventListener(t,i){this._eventManager.removeEventListener(t,i)}static setWasmUrl(t){qh._wasmUrl=t}async loadStateMachine(t){if(!this._created)return!1;let i=await this._sendMessage("loadStateMachine",{instanceId:this._id,stateMachineId:t});return await this._updateDotLottieInstanceState(),i}async loadStateMachineData(t){if(!this._created)return!1;let i=await this._sendMessage("loadStateMachineData",{instanceId:this._id,stateMachineData:t});return await this._updateDotLottieInstanceState(),i}async startStateMachine(){if(!this._created)return!1;this._setupStateMachineListeners();let t=await this._sendMessage("startStateMachine",{instanceId:this._id});return await this._updateDotLottieInstanceState(),t}async stopStateMachine(){return this._created?(this._cleanupStateMachineListeners(),this._sendMessage("stopStateMachine",{instanceId:this._id})):!1}async getStateMachineListeners(){return this._created?this._sendMessage("getStateMachineListeners",{instanceId:this._id}):[]}_getPointerPosition(t){let i=this._canvas.getBoundingClientRect(),r=this._canvas.width/i.width,s=this._canvas.height/i.height,a=this._dotLottieInstanceState.renderConfig.devicePixelRatio||window.devicePixelRatio||1,n=(t.clientX-i.left)*r/a,o=(t.clientY-i.top)*s/a;return{x:n,y:o}}_onPointerUp(t){let{x:i,y:r}=this._getPointerPosition(t);this._sendMessage("postPointerUpEvent",{instanceId:this._id,x:i,y:r})}_onPointerDown(t){let{x:i,y:r}=this._getPointerPosition(t);this._sendMessage("postPointerDownEvent",{instanceId:this._id,x:i,y:r})}_onPointerMove(t){let{x:i,y:r}=this._getPointerPosition(t);this._sendMessage("postPointerMoveEvent",{instanceId:this._id,x:i,y:r})}_onPointerEnter(t){let{x:i,y:r}=this._getPointerPosition(t);this._sendMessage("postPointerEnterEvent",{instanceId:this._id,x:i,y:r})}_onPointerLeave(t){let{x:i,y:r}=this._getPointerPosition(t);this._sendMessage("postPointerExitEvent",{instanceId:this._id,x:i,y:r})}async _setupStateMachineListeners(){if(R1&&this._canvas instanceof HTMLCanvasElement&&this.isLoaded){let t=await this._sendMessage("getStateMachineListeners",{instanceId:this._id});t.includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._pointerUpMethod),t.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._pointerDownMethod),t.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._pointerMoveMethod),t.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._pointerEnterMethod),t.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._pointerExitMethod)}}_cleanupStateMachineListeners(){R1&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._pointerUpMethod),this._canvas.removeEventListener("pointerdown",this._pointerDownMethod),this._canvas.removeEventListener("pointermove",this._pointerMoveMethod),this._canvas.removeEventListener("pointerenter",this._pointerEnterMethod),this._canvas.removeEventListener("pointerleave",this._pointerExitMethod))}};Vt(TS,"_workerManager",new hW),Vt(TS,"_wasmUrl","");var cW=qi({props:{animationId:{type:String,required:!1},autoplay:{type:Boolean,required:!1},backgroundColor:{type:String,required:!1},data:{type:[String,ArrayBuffer],required:!1},loop:{type:Boolean,required:!1},mode:{type:String,required:!1},renderConfig:{type:Object,required:!1},segment:{type:Array,required:!1},speed:{type:Number,required:!1},src:{type:String,required:!1},useFrameInterpolation:{type:Boolean,required:!1},marker:{type:String,required:!1},playOnHover:{type:Boolean,required:!1},themeData:{type:String,required:!1},themeId:{type:String,required:!1},layout:{type:Object,required:!1}},setup(e,{attrs:t,expose:i}){const r=Yt(void 0),{animationId:s,backgroundColor:a,data:n,layout:o,loop:l,marker:h,mode:c,playOnHover:u,renderConfig:d,segment:f,speed:p,src:m,themeId:g,useFrameInterpolation:v}=jV(e);let y=null;const x=ci(()=>{let b=e.autoplay;return typeof u?.value<"u"&&u.value&&(b=!1),b}),w=(b={})=>{y!==null&&y.load({animationId:s?.value,backgroundColor:a?.value,data:n?.value,layout:o?.value,loop:l?.value,marker:h?.value,mode:c?.value,autoplay:x.value,renderConfig:d?.value,segment:f?.value,speed:p?.value,src:m?.value,themeId:g?.value,useFrameInterpolation:v?.value,...b})};Ni(()=>a?.value,b=>{y&&typeof b<"u"&&y.setBackgroundColor(b)}),Ni(()=>h?.value,b=>{y&&typeof b<"u"&&y.setMarker(b)}),Ni(()=>l?.value,b=>{y&&typeof b<"u"&&y.setLoop(b)}),Ni(()=>c?.value,b=>{y&&typeof b<"u"&&y.setMode(b)}),Ni(()=>f?.value,b=>{if(!y)return;const M=b?.[0],S=b?.[1];typeof M=="number"&&typeof S=="number"&&y.setSegment(M,S)}),Ni(()=>p?.value,b=>{y&&typeof b<"u"&&y.setSpeed(b)}),Ni(()=>v?.value,b=>{y&&typeof b<"u"&&y.setUseFrameInterpolation(b)}),Ni(()=>s?.value,b=>{y&&y.isLoaded&&typeof b<"u"&&b!==y.activeAnimationId&&y.loadAnimation(b)}),Ni(()=>e.themeData,b=>{y&&typeof b<"u"&&y.setTheme(b)}),Ni(()=>g?.value,b=>{y&&typeof b<"u"&&y.setTheme(b)});function _(b){b.type==="mouseenter"?y?.play():y?.pause()}return Ni(()=>u?.value,b=>{y&&typeof b<"u"&&b?(r.value?.addEventListener("mouseenter",_),r.value?.addEventListener("mouseleave",_)):(r.value?.removeEventListener("mouseenter",_),r.value?.removeEventListener("mouseleave",_))}),Ni(()=>o?.value,b=>{y&&typeof b<"u"&&y.setLayout(b)},{deep:!0}),Ni(()=>d?.value,b=>{y&&typeof b<"u"&&y.setRenderConfig(b)},{deep:!0}),Ni(()=>n?.value,b=>{y&&(typeof b=="object"||typeof b=="string")&&w({data:b})},{deep:!0}),Ni(()=>m?.value,b=>{y&&typeof b<"u"&&w({src:b})}),M1(()=>{r.value&&(y=new nW({canvas:r.value,...e,autoplay:x.value}),u?.value&&(r.value.addEventListener("mouseenter",_),r.value.addEventListener("mouseleave",_)))}),Ev(()=>{r.value?.addEventListener("mouseenter",_),r.value?.addEventListener("mouseleave",_),y?.destroy()}),i({getDotLottieInstance:()=>y}),()=>dh("div",{...t},dh("canvas",{style:"height: 100%; width: 100%",ref:r}))}});function So(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IO(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Hs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Pu={duration:.5,overwrite:!1,delay:0},zb,S1,Xi,fa=1e8,Ri=1/fa,A5=Math.PI*2,uW=A5/4,dW=0,OO=Math.sqrt,fW=Math.cos,pW=Math.sin,o1=function(t){return typeof t=="string"},lr=function(t){return typeof t=="function"},Xo=function(t){return typeof t=="number"},Bb=function(t){return typeof t>"u"},Yn=function(t){return typeof t=="object"},xs=function(t){return t!==!1},kb=function(){return typeof window<"u"},Bf=function(t){return lr(t)||o1(t)},RO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},U1=Array.isArray,M5=/(?:-?\.?\d|\.)+/gi,LO=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,q2=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,O4=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,zO=/[+-]=-?[.\d]+/,BO=/[^,'"\[\]\s]+/gi,mW=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Qi,Cn,C5,Fb,Ws={},$m={},kO,FO=function(t){return($m=Du(t,Ws))&&Ms},Nb=function(t,i){return console.warn("Invalid property",t,"set to",i,"Missing plugin? gsap.registerPlugin()")},xd=function(t,i){return!i&&console.warn(t)},NO=function(t,i){return t&&(Ws[t]=i)&&$m&&($m[t]=i)||Ws},bd=function(){return 0},gW={suppressEvents:!0,isStart:!0,kill:!1},ym={suppressEvents:!0,kill:!1},vW={suppressEvents:!0},Ub={},ih=[],E5={},UO,Bs={},R4={},PS=30,xm=[],Vb="",jb=function(t){var i=t[0],r,s;if(Yn(i)||lr(i)||(t=[t]),!(r=(i._gsap||{}).harness)){for(s=xm.length;s--&&!xm[s].targetTest(i););r=xm[s]}for(s=t.length;s--;)t[s]&&(t[s]._gsap||(t[s]._gsap=new cR(t[s],r)))||t.splice(s,1);return t},yc=function(t){return t._gsap||jb(pa(t))[0]._gsap},VO=function(t,i,r){return(r=t[i])&&lr(r)?t[i]():Bb(r)&&t.getAttribute&&t.getAttribute(i)||r},bs=function(t,i){return(t=t.split(",")).forEach(i)||t},mr=function(t){return Math.round(t*1e5)/1e5||0},Cr=function(t){return Math.round(t*1e7)/1e7||0},cu=function(t,i){var r=i.charAt(0),s=parseFloat(i.substr(2));return t=parseFloat(t),r==="+"?t+s:r==="-"?t-s:r==="*"?t*s:t/s},yW=function(t,i){for(var r=i.length,s=0;t.indexOf(i[s])<0&&++s<r;);return s<r},eg=function(){var t=ih.length,i=ih.slice(0),r,s;for(E5={},ih.length=0,r=0;r<t;r++)s=i[r],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},Gb=function(t){return!!(t._initted||t._startAt||t.add)},jO=function(t,i,r,s){ih.length&&!S1&&eg(),t.render(i,r,!!(S1&&i<0&&Gb(t))),ih.length&&!S1&&eg()},GO=function(t){var i=parseFloat(t);return(i||i===0)&&(t+"").match(BO).length<2?i:o1(t)?t.trim():t},HO=function(t){return t},qs=function(t,i){for(var r in i)r in t||(t[r]=i[r]);return t},xW=function(t){return function(i,r){for(var s in r)s in i||s==="duration"&&t||s==="ease"||(i[s]=r[s])}},Du=function(t,i){for(var r in i)t[r]=i[r];return t},DS=function e(t,i){for(var r in i)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=Yn(i[r])?e(t[r]||(t[r]={}),i[r]):i[r]);return t},tg=function(t,i){var r={},s;for(s in t)s in i||(r[s]=t[s]);return r},L3=function(t){var i=t.parent||Qi,r=t.keyframes?xW(U1(t.keyframes)):qs;if(xs(t.inherit))for(;i;)r(t,i.vars.defaults),i=i.parent||i._dp;return t},bW=function(t,i){for(var r=t.length,s=r===i.length;s&&r--&&t[r]===i[r];);return r<0},WO=function(t,i,r,s,a){var n=t[s],o;if(a)for(o=i[a];n&&n[a]>o;)n=n._prev;return n?(i._next=n._next,n._next=i):(i._next=t[r],t[r]=i),i._next?i._next._prev=i:t[s]=i,i._prev=n,i.parent=i._dp=t,i},Rv=function(t,i,r,s){r===void 0&&(r="_first"),s===void 0&&(s="_last");var a=i._prev,n=i._next;a?a._next=n:t[r]===i&&(t[r]=n),n?n._prev=a:t[s]===i&&(t[s]=a),i._next=i._prev=i.parent=null},ph=function(t,i){t.parent&&(!i||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},xc=function(t,i){if(t&&(!i||i._end>t._dur||i._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},wW=function(t){for(var i=t.parent;i&&i.parent;)i._dirty=1,i.totalDuration(),i=i.parent;return t},T5=function(t,i,r,s){return t._startAt&&(S1?t._startAt.revert(ym):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(i,!0,s))},_W=function e(t){return!t||t._ts&&e(t.parent)},IS=function(t){return t._repeat?Iu(t._tTime,t=t.duration()+t._rDelay)*t:0},Iu=function(t,i){var r=Math.floor(t=Cr(t/i));return t&&r===t?r-1:r},ig=function(t,i){return(t-i._start)*i._ts+(i._ts>=0?0:i._dirty?i.totalDuration():i._tDur)},Lv=function(t){return t._end=Cr(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ri)||0))},zv=function(t,i){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=Cr(r._time-(t._ts>0?i/t._ts:((t._dirty?t.totalDuration():t._tDur)-i)/-t._ts)),Lv(t),r._dirty||xc(r,t)),t},qO=function(t,i){var r;if((i._time||!i._dur&&i._initted||i._start<t._time&&(i._dur||!i.add))&&(r=ig(t.rawTime(),i),(!i._dur||of(0,i.totalDuration(),r)-i._tTime>Ri)&&i.render(r,!0)),xc(t,i)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-Ri}},On=function(t,i,r,s){return i.parent&&ph(i),i._start=Cr((Xo(r)?r:r||t!==Qi?aa(t,r,i):t._time)+i._delay),i._end=Cr(i._start+(i.totalDuration()/Math.abs(i.timeScale())||0)),WO(t,i,"_first","_last",t._sort?"_start":0),P5(i)||(t._recent=i),s||qO(t,i),t._ts<0&&zv(t,t._tTime),t},XO=function(t,i){return(Ws.ScrollTrigger||Nb("scrollTrigger",i))&&Ws.ScrollTrigger.create(i,t)},YO=function(t,i,r,s,a){if(Wb(t,i,a),!t._initted)return 1;if(!r&&t._pt&&!S1&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&UO!==Fs.frame)return ih.push(t),t._lazy=[a,s],1},SW=function e(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||e(i))},P5=function(t){var i=t.data;return i==="isFromStart"||i==="isStart"},AW=function(t,i,r,s){var a=t.ratio,n=i<0||!i&&(!t._start&&SW(t)&&!(!t._initted&&P5(t))||(t._ts<0||t._dp._ts<0)&&!P5(t))?0:1,o=t._rDelay,l=0,h,c,u;if(o&&t._repeat&&(l=of(0,t._tDur,i),c=Iu(l,o),t._yoyo&&c&1&&(n=1-n),c!==Iu(t._tTime,o)&&(a=1-n,t.vars.repeatRefresh&&t._initted&&t.invalidate())),n!==a||S1||s||t._zTime===Ri||!i&&t._zTime){if(!t._initted&&YO(t,i,s,r,l))return;for(u=t._zTime,t._zTime=i||(r?Ri:0),r||(r=i&&!u),t.ratio=n,t._from&&(n=1-n),t._time=0,t._tTime=l,h=t._pt;h;)h.r(n,h.d),h=h._next;i<0&&T5(t,i,r,!0),t._onUpdate&&!r&&Us(t,"onUpdate"),l&&t._repeat&&!r&&t.parent&&Us(t,"onRepeat"),(i>=t._tDur||i<0)&&t.ratio===n&&(n&&ph(t,1),!r&&!S1&&(Us(t,n?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=i)},MW=function(t,i,r){var s;if(r>i)for(s=t._first;s&&s._start<=r;){if(s.data==="isPause"&&s._start>i)return s;s=s._next}else for(s=t._last;s&&s._start>=r;){if(s.data==="isPause"&&s._start<i)return s;s=s._prev}},Ou=function(t,i,r,s){var a=t._repeat,n=Cr(i)||0,o=t._tTime/t._tDur;return o&&!s&&(t._time*=n/t._dur),t._dur=n,t._tDur=a?a<0?1e10:Cr(n*(a+1)+t._rDelay*a):n,o>0&&!s&&zv(t,t._tTime=t._tDur*o),t.parent&&Lv(t),r||xc(t.parent,t),t},OS=function(t){return t instanceof J1?xc(t):Ou(t,t._dur)},CW={_start:0,endTime:bd,totalDuration:bd},aa=function e(t,i,r){var s=t.labels,a=t._recent||CW,n=t.duration()>=fa?a.endTime(!1):t._dur,o,l,h;return o1(i)&&(isNaN(i)||i in s)?(l=i.charAt(0),h=i.substr(-1)==="%",o=i.indexOf("="),l==="<"||l===">"?(o>=0&&(i=i.replace(/=/,"")),(l==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(i.substr(1))||0)*(h?(o<0?a:r).totalDuration()/100:1)):o<0?(i in s||(s[i]=n),s[i]):(l=parseFloat(i.charAt(o-1)+i.substr(o+1)),h&&r&&(l=l/100*(U1(r)?r[0]:r).totalDuration()),o>1?e(t,i.substr(0,o-1),r)+l:n+l)):i==null?n:+i},z3=function(t,i,r){var s=Xo(i[1]),a=(s?2:1)+(t<2?0:1),n=i[a],o,l;if(s&&(n.duration=i[1]),n.parent=r,t){for(o=n,l=r;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=xs(l.vars.inherit)&&l.parent;n.immediateRender=xs(o.immediateRender),t<2?n.runBackwards=1:n.startAt=i[a-1]}return new Mr(i[0],n,i[a+1])},Sh=function(t,i){return t||t===0?i(t):i},of=function(t,i,r){return r<t?t:r>i?i:r},k1=function(t,i){return!o1(t)||!(i=mW.exec(t))?"":i[1]},EW=function(t,i,r){return Sh(r,function(s){return of(t,i,s)})},D5=[].slice,KO=function(t,i){return t&&Yn(t)&&"length"in t&&(!i&&!t.length||t.length-1 in t&&Yn(t[0]))&&!t.nodeType&&t!==Cn},TW=function(t,i,r){return r===void 0&&(r=[]),t.forEach(function(s){var a;return o1(s)&&!i||KO(s,1)?(a=r).push.apply(a,pa(s)):r.push(s)})||r},pa=function(t,i,r){return Xi&&!i&&Xi.selector?Xi.selector(t):o1(t)&&!r&&(C5||!Ru())?D5.call((i||Fb).querySelectorAll(t),0):U1(t)?TW(t,r):KO(t)?D5.call(t,0):t?[t]:[]},I5=function(t){return t=pa(t)[0]||xd("Invalid scope")||{},function(i){var r=t.current||t.nativeElement||t;return pa(i,r.querySelectorAll?r:r===t?xd("Invalid scope")||Fb.createElement("div"):t)}},QO=function(t){return t.sort(function(){return .5-Math.random()})},ZO=function(t){if(lr(t))return t;var i=Yn(t)?t:{each:t},r=bc(i.ease),s=i.from||0,a=parseFloat(i.base)||0,n={},o=s>0&&s<1,l=isNaN(s)||o,h=i.axis,c=s,u=s;return o1(s)?c=u={center:.5,edges:.5,end:1}[s]||0:!o&&l&&(c=s[0],u=s[1]),function(d,f,p){var m=(p||i).length,g=n[m],v,y,x,w,_,b,M,S,A;if(!g){if(A=i.grid==="auto"?0:(i.grid||[1,fa])[1],!A){for(M=-fa;M<(M=p[A++].getBoundingClientRect().left)&&A<m;);A<m&&A--}for(g=n[m]=[],v=l?Math.min(A,m)*c-.5:s%A,y=A===fa?0:l?m*u/A-.5:s/A|0,M=0,S=fa,b=0;b<m;b++)x=b%A-v,w=y-(b/A|0),g[b]=_=h?Math.abs(h==="y"?w:x):OO(x*x+w*w),_>M&&(M=_),_<S&&(S=_);s==="random"&&QO(g),g.max=M-S,g.min=S,g.v=m=(parseFloat(i.amount)||parseFloat(i.each)*(A>m?m-1:h?h==="y"?m/A:A:Math.max(A,m/A))||0)*(s==="edges"?-1:1),g.b=m<0?a-m:a,g.u=k1(i.amount||i.each)||0,r=r&&m<0?oR(r):r}return m=(g[d]-g.min)/g.max||0,Cr(g.b+(r?r(m):m)*g.v)+g.u}},O5=function(t){var i=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var s=Cr(Math.round(parseFloat(r)/t)*t*i);return(s-s%1)/i+(Xo(r)?0:k1(r))}},JO=function(t,i){var r=U1(t),s,a;return!r&&Yn(t)&&(s=r=t.radius||fa,t.values?(t=pa(t.values),(a=!Xo(t[0]))&&(s*=s)):t=O5(t.increment)),Sh(i,r?lr(t)?function(n){return a=t(n),Math.abs(a-n)<=s?a:n}:function(n){for(var o=parseFloat(a?n.x:n),l=parseFloat(a?n.y:0),h=fa,c=0,u=t.length,d,f;u--;)a?(d=t[u].x-o,f=t[u].y-l,d=d*d+f*f):d=Math.abs(t[u]-o),d<h&&(h=d,c=u);return c=!s||h<=s?t[c]:n,a||c===n||Xo(n)?c:c+k1(n)}:O5(t))},$O=function(t,i,r,s){return Sh(U1(t)?!i:r===!0?!!(r=0):!s,function(){return U1(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(s=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(i-t+r*.99))/r)*r*s)/s})},PW=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return function(s){return i.reduce(function(a,n){return n(a)},s)}},DW=function(t,i){return function(r){return t(parseFloat(r))+(i||k1(r))}},IW=function(t,i,r){return tR(t,i,0,1,r)},eR=function(t,i,r){return Sh(r,function(s){return t[~~i(s)]})},OW=function e(t,i,r){var s=i-t;return U1(t)?eR(t,e(0,t.length),i):Sh(r,function(a){return(s+(a-t)%s)%s+t})},RW=function e(t,i,r){var s=i-t,a=s*2;return U1(t)?eR(t,e(0,t.length-1),i):Sh(r,function(n){return n=(a+(n-t)%a)%a||0,t+(n>s?a-n:n)})},wd=function(t){for(var i=0,r="",s,a,n,o;~(s=t.indexOf("random(",i));)n=t.indexOf(")",s),o=t.charAt(s+7)==="[",a=t.substr(s+7,n-s-7).match(o?BO:M5),r+=t.substr(i,s-i)+$O(o?a:+a[0],o?0:+a[1],+a[2]||1e-5),i=n+1;return r+t.substr(i,t.length-i)},tR=function(t,i,r,s,a){var n=i-t,o=s-r;return Sh(a,function(l){return r+((l-t)/n*o||0)})},LW=function e(t,i,r,s){var a=isNaN(t+i)?0:function(f){return(1-f)*t+f*i};if(!a){var n=o1(t),o={},l,h,c,u,d;if(r===!0&&(s=1)&&(r=null),n)t={p:t},i={p:i};else if(U1(t)&&!U1(i)){for(c=[],u=t.length,d=u-2,h=1;h<u;h++)c.push(e(t[h-1],t[h]));u--,a=function(p){p*=u;var m=Math.min(d,~~p);return c[m](p-m)},r=i}else s||(t=Du(U1(t)?[]:{},t));if(!c){for(l in i)Hb.call(o,t,l,"get",i[l]);a=function(p){return Yb(p,o)||(n?t.p:t)}}}return Sh(r,a)},RS=function(t,i,r){var s=t.labels,a=fa,n,o,l;for(n in s)o=s[n]-i,o<0==!!r&&o&&a>(o=Math.abs(o))&&(l=n,a=o);return l},Us=function(t,i,r){var s=t.vars,a=s[i],n=Xi,o=t._ctx,l,h,c;if(a)return l=s[i+"Params"],h=s.callbackScope||t,r&&ih.length&&eg(),o&&(Xi=o),c=l?a.apply(h,l):a.call(h),Xi=n,c},c3=function(t){return ph(t),t.scrollTrigger&&t.scrollTrigger.kill(!!S1),t.progress()<1&&Us(t,"onInterrupt"),t},X2,iR=[],rR=function(t){if(t)if(t=!t.name&&t.default||t,kb()||t.headless){var i=t.name,r=lr(t),s=i&&!r&&t.init?function(){this._props=[]}:t,a={init:bd,render:Yb,add:Hb,kill:QW,modifier:KW,rawVars:0},n={targetTest:0,get:0,getSetter:Xb,aliases:{},register:0};if(Ru(),t!==s){if(Bs[i])return;qs(s,qs(tg(t,a),n)),Du(s.prototype,Du(a,tg(t,n))),Bs[s.prop=i]=s,t.targetTest&&(xm.push(s),Ub[i]=1),i=(i==="css"?"CSS":i.charAt(0).toUpperCase()+i.substr(1))+"Plugin"}NO(i,s),t.register&&t.register(Ms,s,ws)}else iR.push(t)},Ii=255,u3={aqua:[0,Ii,Ii],lime:[0,Ii,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ii],navy:[0,0,128],white:[Ii,Ii,Ii],olive:[128,128,0],yellow:[Ii,Ii,0],orange:[Ii,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ii,0,0],pink:[Ii,192,203],cyan:[0,Ii,Ii],transparent:[Ii,Ii,Ii,0]},L4=function(t,i,r){return t+=t<0?1:t>1?-1:0,(t*6<1?i+(r-i)*t*6:t<.5?r:t*3<2?i+(r-i)*(2/3-t)*6:i)*Ii+.5|0},sR=function(t,i,r){var s=t?Xo(t)?[t>>16,t>>8&Ii,t&Ii]:0:u3.black,a,n,o,l,h,c,u,d,f,p;if(!s){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),u3[t])s=u3[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),n=t.charAt(2),o=t.charAt(3),t="#"+a+a+n+n+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return s=parseInt(t.substr(1,6),16),[s>>16,s>>8&Ii,s&Ii,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),s=[t>>16,t>>8&Ii,t&Ii]}else if(t.substr(0,3)==="hsl"){if(s=p=t.match(M5),!i)l=+s[0]%360/360,h=+s[1]/100,c=+s[2]/100,n=c<=.5?c*(h+1):c+h-c*h,a=c*2-n,s.length>3&&(s[3]*=1),s[0]=L4(l+1/3,a,n),s[1]=L4(l,a,n),s[2]=L4(l-1/3,a,n);else if(~t.indexOf("="))return s=t.match(LO),r&&s.length<4&&(s[3]=1),s}else s=t.match(M5)||u3.transparent;s=s.map(Number)}return i&&!p&&(a=s[0]/Ii,n=s[1]/Ii,o=s[2]/Ii,u=Math.max(a,n,o),d=Math.min(a,n,o),c=(u+d)/2,u===d?l=h=0:(f=u-d,h=c>.5?f/(2-u-d):f/(u+d),l=u===a?(n-o)/f+(n<o?6:0):u===n?(o-a)/f+2:(a-n)/f+4,l*=60),s[0]=~~(l+.5),s[1]=~~(h*100+.5),s[2]=~~(c*100+.5)),r&&s.length<4&&(s[3]=1),s},aR=function(t){var i=[],r=[],s=-1;return t.split(rh).forEach(function(a){var n=a.match(q2)||[];i.push.apply(i,n),r.push(s+=n.length+1)}),i.c=r,i},LS=function(t,i,r){var s="",a=(t+s).match(rh),n=i?"hsla(":"rgba(",o=0,l,h,c,u;if(!a)return t;if(a=a.map(function(d){return(d=sR(d,i,1))&&n+(i?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),r&&(c=aR(t),l=r.c,l.join(s)!==c.c.join(s)))for(h=t.replace(rh,"1").split(q2),u=h.length-1;o<u;o++)s+=h[o]+(~l.indexOf(o)?a.shift()||n+"0,0,0,0)":(c.length?c:a.length?a:r).shift());if(!h)for(h=t.split(rh),u=h.length-1;o<u;o++)s+=h[o]+a[o];return s+h[u]},rh=function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in u3)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),zW=/hsl[a]?\(/,nR=function(t){var i=t.join(" "),r;if(rh.lastIndex=0,rh.test(i))return r=zW.test(i),t[1]=LS(t[1],r),t[0]=LS(t[0],r,aR(t[1])),!0},_d,Fs=function(){var e=Date.now,t=500,i=33,r=e(),s=r,a=1e3/240,n=a,o=[],l,h,c,u,d,f,p=function m(g){var v=e()-s,y=g===!0,x,w,_,b;if((v>t||v<0)&&(r+=v-i),s+=v,_=s-r,x=_-n,(x>0||y)&&(b=++u.frame,d=_-u.time*1e3,u.time=_=_/1e3,n+=x+(x>=a?4:a-x),w=1),y||(l=h(m)),w)for(f=0;f<o.length;f++)o[f](_,d,b,g)};return u={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){kO&&(!C5&&kb()&&(Cn=C5=window,Fb=Cn.document||{},Ws.gsap=Ms,(Cn.gsapVersions||(Cn.gsapVersions=[])).push(Ms.version),FO($m||Cn.GreenSockGlobals||!Cn.gsap&&Cn||{}),iR.forEach(rR)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&u.sleep(),h=c||function(g){return setTimeout(g,n-u.time*1e3+1|0)},_d=1,p(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(l),_d=0,h=bd},lagSmoothing:function(g,v){t=g||1/0,i=Math.min(v||33,t)},fps:function(g){a=1e3/(g||240),n=u.time*1e3+a},add:function(g,v,y){var x=v?function(w,_,b,M){g(w,_,b,M),u.remove(x)}:g;return u.remove(g),o[y?"unshift":"push"](x),Ru(),x},remove:function(g,v){~(v=o.indexOf(g))&&o.splice(v,1)&&f>=v&&f--},_listeners:o},u}(),Ru=function(){return!_d&&Fs.wake()},si={},BW=/^[\d.\-M][\d.\-,\s]/,kW=/["']/g,FW=function(t){for(var i={},r=t.substr(1,t.length-3).split(":"),s=r[0],a=1,n=r.length,o,l,h;a<n;a++)l=r[a],o=a!==n-1?l.lastIndexOf(","):l.length,h=l.substr(0,o),i[s]=isNaN(h)?h.replace(kW,"").trim():+h,s=l.substr(o+1).trim();return i},NW=function(t){var i=t.indexOf("(")+1,r=t.indexOf(")"),s=t.indexOf("(",i);return t.substring(i,~s&&s<r?t.indexOf(")",r+1):r)},UW=function(t){var i=(t+"").split("("),r=si[i[0]];return r&&i.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[FW(i[1])]:NW(t).split(",").map(GO)):si._CE&&BW.test(t)?si._CE("",t):r},oR=function(t){return function(i){return 1-t(1-i)}},lR=function e(t,i){for(var r=t._first,s;r;)r instanceof J1?e(r,i):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==i&&(r.timeline?e(r.timeline,i):(s=r._ease,r._ease=r._yEase,r._yEase=s,r._yoyo=i)),r=r._next},bc=function(t,i){return t&&(lr(t)?t:si[t]||UW(t))||i},Gc=function(t,i,r,s){r===void 0&&(r=function(l){return 1-i(1-l)}),s===void 0&&(s=function(l){return l<.5?i(l*2)/2:1-i((1-l)*2)/2});var a={easeIn:i,easeOut:r,easeInOut:s},n;return bs(t,function(o){si[o]=Ws[o]=a,si[n=o.toLowerCase()]=r;for(var l in a)si[n+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=si[o+"."+l]=a[l]}),a},hR=function(t){return function(i){return i<.5?(1-t(1-i*2))/2:.5+t((i-.5)*2)/2}},z4=function e(t,i,r){var s=i>=1?i:1,a=(r||(t?.3:.45))/(i<1?i:1),n=a/A5*(Math.asin(1/s)||0),o=function(c){return c===1?1:s*Math.pow(2,-10*c)*pW((c-n)*a)+1},l=t==="out"?o:t==="in"?function(h){return 1-o(1-h)}:hR(o);return a=A5/a,l.config=function(h,c){return e(t,h,c)},l},B4=function e(t,i){i===void 0&&(i=1.70158);var r=function(n){return n?--n*n*((i+1)*n+i)+1:0},s=t==="out"?r:t==="in"?function(a){return 1-r(1-a)}:hR(r);return s.config=function(a){return e(t,a)},s};bs("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var i=t<5?t+1:t;Gc(e+",Power"+(i-1),t?function(r){return Math.pow(r,i)}:function(r){return r},function(r){return 1-Math.pow(1-r,i)},function(r){return r<.5?Math.pow(r*2,i)/2:1-Math.pow((1-r)*2,i)/2})});si.Linear.easeNone=si.none=si.Linear.easeIn;Gc("Elastic",z4("in"),z4("out"),z4());(function(e,t){var i=1/t,r=2*i,s=2.5*i,a=function(o){return o<i?e*o*o:o<r?e*Math.pow(o-1.5/t,2)+.75:o<s?e*(o-=2.25/t)*o+.9375:e*Math.pow(o-2.625/t,2)+.984375};Gc("Bounce",function(n){return 1-a(1-n)},a)})(7.5625,2.75);Gc("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)});Gc("Circ",function(e){return-(OO(1-e*e)-1)});Gc("Sine",function(e){return e===1?1:-fW(e*uW)+1});Gc("Back",B4("in"),B4("out"),B4());si.SteppedEase=si.steps=Ws.SteppedEase={config:function(t,i){t===void 0&&(t=1);var r=1/t,s=t+(i?0:1),a=i?1:0,n=1-Ri;return function(o){return((s*of(0,n,o)|0)+a)*r}}};Pu.ease=si["quad.out"];bs("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return Vb+=e+","+e+"Params,"});var cR=function(t,i){this.id=dW++,t._gsap=this,this.target=t,this.harness=i,this.get=i?i.get:VO,this.set=i?i.getSetter:Xb},Sd=function(){function e(i){this.vars=i,this._delay=+i.delay||0,(this._repeat=i.repeat===1/0?-2:i.repeat||0)&&(this._rDelay=i.repeatDelay||0,this._yoyo=!!i.yoyo||!!i.yoyoEase),this._ts=1,Ou(this,+i.duration,1,1),this.data=i.data,Xi&&(this._ctx=Xi,Xi.data.push(this)),_d||Fs.wake()}var t=e.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,Ou(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,s){if(Ru(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(zv(this,r),!a._dp||a.parent||qO(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&On(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Ri||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),jO(this,r,s)),this},t.time=function(r,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+IS(this))%(this._dur+this._rDelay)||(r?this._dur:0),s):this._time},t.totalProgress=function(r,s){return arguments.length?this.totalTime(this.totalDuration()*r,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(r,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+IS(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(r,s){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*a,s):this._repeat?Iu(this._tTime,a)+1:1},t.timeScale=function(r,s){if(!arguments.length)return this._rts===-Ri?0:this._rts;if(this._rts===r)return this;var a=this.parent&&this._ts?ig(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Ri?0:this._rts,this.totalTime(of(-Math.abs(this._delay),this.totalDuration(),a),s!==!1),Lv(this),wW(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ru(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ri&&(this._tTime-=Ri)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&On(s,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(xs(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var s=this.parent||this._dp;return s?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ig(s.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=vW);var s=S1;return S1=r,Gb(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),S1=s,this},t.globalTime=function(r){for(var s=this,a=arguments.length?r:s.rawTime();s;)a=s._start+a/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(r):a},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,OS(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var s=this._time;return this._rDelay=r,OS(this),s?this.time(s):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,s){return this.totalTime(aa(this,r),xs(s))},t.restart=function(r,s){return this.play().totalTime(r?-this._delay:0,xs(s)),this._dur||(this._zTime=-Ri),this},t.play=function(r,s){return r!=null&&this.seek(r,s),this.reversed(!1).paused(!1)},t.reverse=function(r,s){return r!=null&&this.seek(r||this.totalDuration(),s),this.reversed(!0).paused(!1)},t.pause=function(r,s){return r!=null&&this.seek(r,s),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Ri:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ri,this},t.isActive=function(){var r=this.parent||this._dp,s=this._start,a;return!!(!r||this._ts&&this._initted&&r.isActive()&&(a=r.rawTime(!0))>=s&&a<this.endTime(!0)-Ri)},t.eventCallback=function(r,s,a){var n=this.vars;return arguments.length>1?(s?(n[r]=s,a&&(n[r+"Params"]=a),r==="onUpdate"&&(this._onUpdate=s)):delete n[r],this):n[r]},t.then=function(r){var s=this;return new Promise(function(a){var n=lr(r)?r:HO,o=function(){var h=s.then;s.then=null,lr(n)&&(n=n(s))&&(n.then||n===s)&&(s.then=h),a(n),s.then=h};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?o():s._prom=o})},t.kill=function(){c3(this)},e}();qs(Sd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ri,_prom:0,_ps:!1,_rts:1});var J1=function(e){IO(t,e);function t(r,s){var a;return r===void 0&&(r={}),a=e.call(this,r)||this,a.labels={},a.smoothChildTiming=!!r.smoothChildTiming,a.autoRemoveChildren=!!r.autoRemoveChildren,a._sort=xs(r.sortChildren),Qi&&On(r.parent||Qi,So(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),r.scrollTrigger&&XO(So(a),r.scrollTrigger),a}var i=t.prototype;return i.to=function(s,a,n){return z3(0,arguments,this),this},i.from=function(s,a,n){return z3(1,arguments,this),this},i.fromTo=function(s,a,n,o){return z3(2,arguments,this),this},i.set=function(s,a,n){return a.duration=0,a.parent=this,L3(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new Mr(s,a,aa(this,n),1),this},i.call=function(s,a,n){return On(this,Mr.delayedCall(0,s,a),n)},i.staggerTo=function(s,a,n,o,l,h,c){return n.duration=a,n.stagger=n.stagger||o,n.onComplete=h,n.onCompleteParams=c,n.parent=this,new Mr(s,n,aa(this,l)),this},i.staggerFrom=function(s,a,n,o,l,h,c){return n.runBackwards=1,L3(n).immediateRender=xs(n.immediateRender),this.staggerTo(s,a,n,o,l,h,c)},i.staggerFromTo=function(s,a,n,o,l,h,c,u){return o.startAt=n,L3(o).immediateRender=xs(o.immediateRender),this.staggerTo(s,a,o,l,h,c,u)},i.render=function(s,a,n){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,h=this._dur,c=s<=0?0:Cr(s),u=this._zTime<0!=s<0&&(this._initted||!h),d,f,p,m,g,v,y,x,w,_,b,M;if(this!==Qi&&c>l&&s>=0&&(c=l),c!==this._tTime||n||u){if(o!==this._time&&h&&(c+=this._time-o,s+=this._time-o),d=c,w=this._start,x=this._ts,v=!x,u&&(h||(o=this._zTime),(s||!a)&&(this._zTime=s)),this._repeat){if(b=this._yoyo,g=h+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(g*100+s,a,n);if(d=Cr(c%g),c===l?(m=this._repeat,d=h):(_=Cr(c/g),m=~~_,m&&m===_&&(d=h,m--),d>h&&(d=h)),_=Iu(this._tTime,g),!o&&this._tTime&&_!==m&&this._tTime-_*g-this._dur<=0&&(_=m),b&&m&1&&(d=h-d,M=1),m!==_&&!this._lock){var S=b&&_&1,A=S===(b&&m&1);if(m<_&&(S=!S),o=S?0:c%h?h:c,this._lock=1,this.render(o||(M?0:Cr(m*g)),a,!h)._lock=0,this._tTime=c,!a&&this.parent&&Us(this,"onRepeat"),this.vars.repeatRefresh&&!M&&(this.invalidate()._lock=1),o&&o!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,l=this._tDur,A&&(this._lock=2,o=S?h:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!M&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;lR(this,M)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=MW(this,Cr(o),Cr(d)),y&&(c-=d-(d=y._start))),this._tTime=c,this._time=d,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,o=0),!o&&c&&!a&&!_&&(Us(this,"onStart"),this._tTime!==c))return this;if(d>=o&&s>=0)for(f=this._first;f;){if(p=f._next,(f._act||d>=f._start)&&f._ts&&y!==f){if(f.parent!==this)return this.render(s,a,n);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,a,n),d!==this._time||!this._ts&&!v){y=0,p&&(c+=this._zTime=-Ri);break}}f=p}else{f=this._last;for(var C=s<0?s:d;f;){if(p=f._prev,(f._act||C<=f._end)&&f._ts&&y!==f){if(f.parent!==this)return this.render(s,a,n);if(f.render(f._ts>0?(C-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(C-f._start)*f._ts,a,n||S1&&Gb(f)),d!==this._time||!this._ts&&!v){y=0,p&&(c+=this._zTime=C?-Ri:Ri);break}}f=p}}if(y&&!a&&(this.pause(),y.render(d>=o?0:-Ri)._zTime=d>=o?1:-1,this._ts))return this._start=w,Lv(this),this.render(s,a,n);this._onUpdate&&!a&&Us(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&o)&&(w===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((s||!h)&&(c===l&&this._ts>0||!c&&this._ts<0)&&ph(this,1),!a&&!(s<0&&!o)&&(c||o||!l)&&(Us(this,c===l&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(s,a){var n=this;if(Xo(a)||(a=aa(this,a,s)),!(s instanceof Sd)){if(U1(s))return s.forEach(function(o){return n.add(o,a)}),this;if(o1(s))return this.addLabel(s,a);if(lr(s))s=Mr.delayedCall(0,s);else return this}return this!==s?On(this,s,a):this},i.getChildren=function(s,a,n,o){s===void 0&&(s=!0),a===void 0&&(a=!0),n===void 0&&(n=!0),o===void 0&&(o=-fa);for(var l=[],h=this._first;h;)h._start>=o&&(h instanceof Mr?a&&l.push(h):(n&&l.push(h),s&&l.push.apply(l,h.getChildren(!0,a,n)))),h=h._next;return l},i.getById=function(s){for(var a=this.getChildren(1,1,1),n=a.length;n--;)if(a[n].vars.id===s)return a[n]},i.remove=function(s){return o1(s)?this.removeLabel(s):lr(s)?this.killTweensOf(s):(s.parent===this&&Rv(this,s),s===this._recent&&(this._recent=this._last),xc(this))},i.totalTime=function(s,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Cr(Fs.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),e.prototype.totalTime.call(this,s,a),this._forcing=0,this):this._tTime},i.addLabel=function(s,a){return this.labels[s]=aa(this,a),this},i.removeLabel=function(s){return delete this.labels[s],this},i.addPause=function(s,a,n){var o=Mr.delayedCall(0,a||bd,n);return o.data="isPause",this._hasPause=1,On(this,o,aa(this,s))},i.removePause=function(s){var a=this._first;for(s=aa(this,s);a;)a._start===s&&a.data==="isPause"&&ph(a),a=a._next},i.killTweensOf=function(s,a,n){for(var o=this.getTweensOf(s,n),l=o.length;l--;)jl!==o[l]&&o[l].kill(s,a);return this},i.getTweensOf=function(s,a){for(var n=[],o=pa(s),l=this._first,h=Xo(a),c;l;)l instanceof Mr?yW(l._targets,o)&&(h?(!jl||l._initted&&l._ts)&&l.globalTime(0)<=a&&l.globalTime(l.totalDuration())>a:!a||l.isActive())&&n.push(l):(c=l.getTweensOf(o,a)).length&&n.push.apply(n,c),l=l._next;return n},i.tweenTo=function(s,a){a=a||{};var n=this,o=aa(n,s),l=a,h=l.startAt,c=l.onStart,u=l.onStartParams,d=l.immediateRender,f,p=Mr.to(n,qs({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:a.duration||Math.abs((o-(h&&"time"in h?h.time:n._time))/n.timeScale())||Ri,onStart:function(){if(n.pause(),!f){var g=a.duration||Math.abs((o-(h&&"time"in h?h.time:n._time))/n.timeScale());p._dur!==g&&Ou(p,g,0,1).render(p._time,!0,!0),f=1}c&&c.apply(p,u||[])}},a));return d?p.render(0):p},i.tweenFromTo=function(s,a,n){return this.tweenTo(a,qs({startAt:{time:aa(this,s)}},n))},i.recent=function(){return this._recent},i.nextLabel=function(s){return s===void 0&&(s=this._time),RS(this,aa(this,s))},i.previousLabel=function(s){return s===void 0&&(s=this._time),RS(this,aa(this,s),1)},i.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Ri)},i.shiftChildren=function(s,a,n){n===void 0&&(n=0);for(var o=this._first,l=this.labels,h;o;)o._start>=n&&(o._start+=s,o._end+=s),o=o._next;if(a)for(h in l)l[h]>=n&&(l[h]+=s);return xc(this)},i.invalidate=function(s){var a=this._first;for(this._lock=0;a;)a.invalidate(s),a=a._next;return e.prototype.invalidate.call(this,s)},i.clear=function(s){s===void 0&&(s=!0);for(var a=this._first,n;a;)n=a._next,this.remove(a),a=n;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),xc(this)},i.totalDuration=function(s){var a=0,n=this,o=n._last,l=fa,h,c,u;if(arguments.length)return n.timeScale((n._repeat<0?n.duration():n.totalDuration())/(n.reversed()?-s:s));if(n._dirty){for(u=n.parent;o;)h=o._prev,o._dirty&&o.totalDuration(),c=o._start,c>l&&n._sort&&o._ts&&!n._lock?(n._lock=1,On(n,o,c-o._delay,1)._lock=0):l=c,c<0&&o._ts&&(a-=c,(!u&&!n._dp||u&&u.smoothChildTiming)&&(n._start+=c/n._ts,n._time-=c,n._tTime-=c),n.shiftChildren(-c,!1,-1/0),l=0),o._end>a&&o._ts&&(a=o._end),o=h;Ou(n,n===Qi&&n._time>a?n._time:a,1,1),n._dirty=0}return n._tDur},t.updateRoot=function(s){if(Qi._ts&&(jO(Qi,ig(s,Qi)),UO=Fs.frame),Fs.frame>=PS){PS+=Hs.autoSleep||120;var a=Qi._first;if((!a||!a._ts)&&Hs.autoSleep&&Fs._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||Fs.sleep()}}},t}(Sd);qs(J1.prototype,{_lock:0,_hasPause:0,_forcing:0});var VW=function(t,i,r,s,a,n,o){var l=new ws(this._pt,t,i,0,1,gR,null,a),h=0,c=0,u,d,f,p,m,g,v,y;for(l.b=r,l.e=s,r+="",s+="",(v=~s.indexOf("random("))&&(s=wd(s)),n&&(y=[r,s],n(y,t,i),r=y[0],s=y[1]),d=r.match(O4)||[];u=O4.exec(s);)p=u[0],m=s.substring(h,u.index),f?f=(f+1)%5:m.substr(-5)==="rgba("&&(f=1),p!==d[c++]&&(g=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:m||c===1?m:",",s:g,c:p.charAt(1)==="="?cu(g,p)-g:parseFloat(p)-g,m:f&&f<4?Math.round:0},h=O4.lastIndex);return l.c=h<s.length?s.substring(h,s.length):"",l.fp=o,(zO.test(s)||v)&&(l.e=0),this._pt=l,l},Hb=function(t,i,r,s,a,n,o,l,h,c){lr(s)&&(s=s(a||0,t,n));var u=t[i],d=r!=="get"?r:lr(u)?h?t[i.indexOf("set")||!lr(t["get"+i.substr(3)])?i:"get"+i.substr(3)](h):t[i]():u,f=lr(u)?h?qW:pR:qb,p;if(o1(s)&&(~s.indexOf("random(")&&(s=wd(s)),s.charAt(1)==="="&&(p=cu(d,s)+(k1(d)||0),(p||p===0)&&(s=p))),!c||d!==s||R5)return!isNaN(d*s)&&s!==""?(p=new ws(this._pt,t,i,+d||0,s-(d||0),typeof u=="boolean"?YW:mR,0,f),h&&(p.fp=h),o&&p.modifier(o,this,t),this._pt=p):(!u&&!(i in t)&&Nb(i,s),VW.call(this,t,i,d,s,f,l||Hs.stringFilter,h))},jW=function(t,i,r,s,a){if(lr(t)&&(t=B3(t,a,i,r,s)),!Yn(t)||t.style&&t.nodeType||U1(t)||RO(t))return o1(t)?B3(t,a,i,r,s):t;var n={},o;for(o in t)n[o]=B3(t[o],a,i,r,s);return n},uR=function(t,i,r,s,a,n){var o,l,h,c;if(Bs[t]&&(o=new Bs[t]).init(a,o.rawVars?i[t]:jW(i[t],s,a,n,r),r,s,n)!==!1&&(r._pt=l=new ws(r._pt,a,t,0,1,o.render,o,0,o.priority),r!==X2))for(h=r._ptLookup[r._targets.indexOf(a)],c=o._props.length;c--;)h[o._props[c]]=l;return o},jl,R5,Wb=function e(t,i,r){var s=t.vars,a=s.ease,n=s.startAt,o=s.immediateRender,l=s.lazy,h=s.onUpdate,c=s.runBackwards,u=s.yoyoEase,d=s.keyframes,f=s.autoRevert,p=t._dur,m=t._startAt,g=t._targets,v=t.parent,y=v&&v.data==="nested"?v.vars.targets:g,x=t._overwrite==="auto"&&!zb,w=t.timeline,_,b,M,S,A,C,T,D,R,O,j,X,N;if(w&&(!d||!a)&&(a="none"),t._ease=bc(a,Pu.ease),t._yEase=u?oR(bc(u===!0?a:u,Pu.ease)):0,u&&t._yoyo&&!t._repeat&&(u=t._yEase,t._yEase=t._ease,t._ease=u),t._from=!w&&!!s.runBackwards,!w||d&&!s.stagger){if(D=g[0]?yc(g[0]).harness:0,X=D&&s[D.prop],_=tg(s,Ub),m&&(m._zTime<0&&m.progress(1),i<0&&c&&o&&!f?m.render(-1,!0):m.revert(c&&p?ym:gW),m._lazy=0),n){if(ph(t._startAt=Mr.set(g,qs({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:!m&&xs(l),startAt:null,delay:0,onUpdate:h&&function(){return Us(t,"onUpdate")},stagger:0},n))),t._startAt._dp=0,t._startAt._sat=t,i<0&&(S1||!o&&!f)&&t._startAt.revert(ym),o&&p&&i<=0&&r<=0){i&&(t._zTime=i);return}}else if(c&&p&&!m){if(i&&(o=!1),M=qs({overwrite:!1,data:"isFromStart",lazy:o&&!m&&xs(l),immediateRender:o,stagger:0,parent:v},_),X&&(M[D.prop]=X),ph(t._startAt=Mr.set(g,M)),t._startAt._dp=0,t._startAt._sat=t,i<0&&(S1?t._startAt.revert(ym):t._startAt.render(-1,!0)),t._zTime=i,!o)e(t._startAt,Ri,Ri);else if(!i)return}for(t._pt=t._ptCache=0,l=p&&xs(l)||l&&!p,b=0;b<g.length;b++){if(A=g[b],T=A._gsap||jb(g)[b]._gsap,t._ptLookup[b]=O={},E5[T.id]&&ih.length&&eg(),j=y===g?b:y.indexOf(A),D&&(R=new D).init(A,X||_,t,j,y)!==!1&&(t._pt=S=new ws(t._pt,A,R.name,0,1,R.render,R,0,R.priority),R._props.forEach(function(k){O[k]=S}),R.priority&&(C=1)),!D||X)for(M in _)Bs[M]&&(R=uR(M,_,t,j,A,y))?R.priority&&(C=1):O[M]=S=Hb.call(t,A,M,"get",_[M],j,y,0,s.stringFilter);t._op&&t._op[b]&&t.kill(A,t._op[b]),x&&t._pt&&(jl=t,Qi.killTweensOf(A,O,t.globalTime(i)),N=!t.parent,jl=0),t._pt&&l&&(E5[T.id]=1)}C&&vR(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!N,d&&i<=0&&w.render(fa,!0,!0)},GW=function(t,i,r,s,a,n,o,l){var h=(t._pt&&t._ptCache||(t._ptCache={}))[i],c,u,d,f;if(!h)for(h=t._ptCache[i]=[],d=t._ptLookup,f=t._targets.length;f--;){if(c=d[f][i],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==i&&c.fp!==i;)c=c._next;if(!c)return R5=1,t.vars[i]="+=0",Wb(t,o),R5=0,l?xd(i+" not eligible for reset"):1;h.push(c)}for(f=h.length;f--;)u=h[f],c=u._pt||u,c.s=(s||s===0)&&!a?s:c.s+(s||0)+n*c.c,c.c=r-c.s,u.e&&(u.e=mr(r)+k1(u.e)),u.b&&(u.b=c.s+k1(u.b))},HW=function(t,i){var r=t[0]?yc(t[0]).harness:0,s=r&&r.aliases,a,n,o,l;if(!s)return i;a=Du({},i);for(n in s)if(n in a)for(l=s[n].split(","),o=l.length;o--;)a[l[o]]=a[n];return a},WW=function(t,i,r,s){var a=i.ease||s||"power1.inOut",n,o;if(U1(i))o=r[t]||(r[t]=[]),i.forEach(function(l,h){return o.push({t:h/(i.length-1)*100,v:l,e:a})});else for(n in i)o=r[n]||(r[n]=[]),n==="ease"||o.push({t:parseFloat(t),v:i[n],e:a})},B3=function(t,i,r,s,a){return lr(t)?t.call(i,r,s,a):o1(t)&&~t.indexOf("random(")?wd(t):t},dR=Vb+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",fR={};bs(dR+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return fR[e]=1});var Mr=function(e){IO(t,e);function t(r,s,a,n){var o;typeof s=="number"&&(a.duration=s,s=a,a=null),o=e.call(this,n?s:L3(s))||this;var l=o.vars,h=l.duration,c=l.delay,u=l.immediateRender,d=l.stagger,f=l.overwrite,p=l.keyframes,m=l.defaults,g=l.scrollTrigger,v=l.yoyoEase,y=s.parent||Qi,x=(U1(r)||RO(r)?Xo(r[0]):"length"in s)?[r]:pa(r),w,_,b,M,S,A,C,T;if(o._targets=x.length?jb(x):xd("GSAP target "+r+" not found. https://gsap.com",!Hs.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=f,p||d||Bf(h)||Bf(c)){if(s=o.vars,w=o.timeline=new J1({data:"nested",defaults:m||{},targets:y&&y.data==="nested"?y.vars.targets:x}),w.kill(),w.parent=w._dp=So(o),w._start=0,d||Bf(h)||Bf(c)){if(M=x.length,C=d&&ZO(d),Yn(d))for(S in d)~dR.indexOf(S)&&(T||(T={}),T[S]=d[S]);for(_=0;_<M;_++)b=tg(s,fR),b.stagger=0,v&&(b.yoyoEase=v),T&&Du(b,T),A=x[_],b.duration=+B3(h,So(o),_,A,x),b.delay=(+B3(c,So(o),_,A,x)||0)-o._delay,!d&&M===1&&b.delay&&(o._delay=c=b.delay,o._start+=c,b.delay=0),w.to(A,b,C?C(_,A,x):0),w._ease=si.none;w.duration()?h=c=0:o.timeline=0}else if(p){L3(qs(w.vars.defaults,{ease:"none"})),w._ease=bc(p.ease||s.ease||"none");var D=0,R,O,j;if(U1(p))p.forEach(function(X){return w.to(x,X,">")}),w.duration();else{b={};for(S in p)S==="ease"||S==="easeEach"||WW(S,p[S],b,p.easeEach);for(S in b)for(R=b[S].sort(function(X,N){return X.t-N.t}),D=0,_=0;_<R.length;_++)O=R[_],j={ease:O.e,duration:(O.t-(_?R[_-1].t:0))/100*h},j[S]=O.v,w.to(x,j,D),D+=j.duration;w.duration()<h&&w.to({},{duration:h-w.duration()})}}h||o.duration(h=w.duration())}else o.timeline=0;return f===!0&&!zb&&(jl=So(o),Qi.killTweensOf(x),jl=0),On(y,So(o),a),s.reversed&&o.reverse(),s.paused&&o.paused(!0),(u||!h&&!p&&o._start===Cr(y._time)&&xs(u)&&_W(So(o))&&y.data!=="nested")&&(o._tTime=-Ri,o.render(Math.max(0,-c)||0)),g&&XO(So(o),g),o}var i=t.prototype;return i.render=function(s,a,n){var o=this._time,l=this._tDur,h=this._dur,c=s<0,u=s>l-Ri&&!c?l:s<Ri?0:s,d,f,p,m,g,v,y,x,w;if(!h)AW(this,s,a,n);else if(u!==this._tTime||!s||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c||this._lazy){if(d=u,x=this.timeline,this._repeat){if(m=h+this._rDelay,this._repeat<-1&&c)return this.totalTime(m*100+s,a,n);if(d=Cr(u%m),u===l?(p=this._repeat,d=h):(g=Cr(u/m),p=~~g,p&&p===g?(d=h,p--):d>h&&(d=h)),v=this._yoyo&&p&1,v&&(w=this._yEase,d=h-d),g=Iu(this._tTime,m),d===o&&!n&&this._initted&&p===g)return this._tTime=u,this;p!==g&&(x&&this._yEase&&lR(x,v),this.vars.repeatRefresh&&!v&&!this._lock&&d!==m&&this._initted&&(this._lock=n=1,this.render(Cr(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(YO(this,c?s:d,n,a,u))return this._tTime=0,this;if(o!==this._time&&!(n&&this.vars.repeatRefresh&&p!==g))return this;if(h!==this._dur)return this.render(s,a,n)}if(this._tTime=u,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(w||this._ease)(d/h),this._from&&(this.ratio=y=1-y),!o&&u&&!a&&!g&&(Us(this,"onStart"),this._tTime!==u))return this;for(f=this._pt;f;)f.r(y,f.d),f=f._next;x&&x.render(s<0?s:x._dur*x._ease(d/this._dur),a,n)||this._startAt&&(this._zTime=s),this._onUpdate&&!a&&(c&&T5(this,s,a,n),Us(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!a&&this.parent&&Us(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&T5(this,s,!0,!0),(s||!h)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&ph(this,1),!a&&!(c&&!o)&&(u||o||v)&&(Us(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},i.targets=function(){return this._targets},i.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),e.prototype.invalidate.call(this,s)},i.resetTo=function(s,a,n,o,l){_d||Fs.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||Wb(this,h),c=this._ease(h/this._dur),GW(this,s,a,n,o,c,h,l)?this.resetTo(s,a,n,o,1):(zv(this,0),this.parent||WO(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(s,a){if(a===void 0&&(a="all"),!s&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?c3(this):this.scrollTrigger&&this.scrollTrigger.kill(!!S1),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(s,a,jl&&jl.vars.overwrite!==!0)._first||c3(this),this.parent&&n!==this.timeline.totalDuration()&&Ou(this,this._dur*this.timeline._tDur/n,0,1),this}var o=this._targets,l=s?pa(s):o,h=this._ptLookup,c=this._pt,u,d,f,p,m,g,v;if((!a||a==="all")&&bW(o,l))return a==="all"&&(this._pt=0),c3(this);for(u=this._op=this._op||[],a!=="all"&&(o1(a)&&(m={},bs(a,function(y){return m[y]=1}),a=m),a=HW(o,a)),v=o.length;v--;)if(~l.indexOf(o[v])){d=h[v],a==="all"?(u[v]=a,p=d,f={}):(f=u[v]=u[v]||{},p=a);for(m in p)g=d&&d[m],g&&((!("kill"in g.d)||g.d.kill(m)===!0)&&Rv(this,g,"_pt"),delete d[m]),f!=="all"&&(f[m]=1)}return this._initted&&!this._pt&&c&&c3(this),this},t.to=function(s,a){return new t(s,a,arguments[2])},t.from=function(s,a){return z3(1,arguments)},t.delayedCall=function(s,a,n,o){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:a,onReverseComplete:a,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:o})},t.fromTo=function(s,a,n){return z3(2,arguments)},t.set=function(s,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(s,a)},t.killTweensOf=function(s,a,n){return Qi.killTweensOf(s,a,n)},t}(Sd);qs(Mr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});bs("staggerTo,staggerFrom,staggerFromTo",function(e){Mr[e]=function(){var t=new J1,i=D5.call(arguments,0);return i.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,i)}});var qb=function(t,i,r){return t[i]=r},pR=function(t,i,r){return t[i](r)},qW=function(t,i,r,s){return t[i](s.fp,r)},XW=function(t,i,r){return t.setAttribute(i,r)},Xb=function(t,i){return lr(t[i])?pR:Bb(t[i])&&t.setAttribute?XW:qb},mR=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e6)/1e6,i)},YW=function(t,i){return i.set(i.t,i.p,!!(i.s+i.c*t),i)},gR=function(t,i){var r=i._pt,s="";if(!t&&i.b)s=i.b;else if(t===1&&i.e)s=i.e;else{for(;r;)s=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+s,r=r._next;s+=i.c}i.set(i.t,i.p,s,i)},Yb=function(t,i){for(var r=i._pt;r;)r.r(t,r.d),r=r._next},KW=function(t,i,r,s){for(var a=this._pt,n;a;)n=a._next,a.p===s&&a.modifier(t,i,r),a=n},QW=function(t){for(var i=this._pt,r,s;i;)s=i._next,i.p===t&&!i.op||i.op===t?Rv(this,i,"_pt"):i.dep||(r=1),i=s;return!r},ZW=function(t,i,r,s){s.mSet(t,i,s.m.call(s.tween,r,s.mt),s)},vR=function(t){for(var i=t._pt,r,s,a,n;i;){for(r=i._next,s=a;s&&s.pr>i.pr;)s=s._next;(i._prev=s?s._prev:n)?i._prev._next=i:a=i,(i._next=s)?s._prev=i:n=i,i=r}t._pt=a},ws=function(){function e(i,r,s,a,n,o,l,h,c){this.t=r,this.s=a,this.c=n,this.p=s,this.r=o||mR,this.d=l||this,this.set=h||qb,this.pr=c||0,this._next=i,i&&(i._prev=this)}var t=e.prototype;return t.modifier=function(r,s,a){this.mSet=this.mSet||this.set,this.set=ZW,this.m=r,this.mt=a,this.tween=s},e}();bs(Vb+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Ub[e]=1});Ws.TweenMax=Ws.TweenLite=Mr;Ws.TimelineLite=Ws.TimelineMax=J1;Qi=new J1({sortChildren:!1,defaults:Pu,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Hs.stringFilter=nR;var wc=[],bm={},JW=[],zS=0,$W=0,k4=function(t){return(bm[t]||JW).map(function(i){return i()})},L5=function(){var t=Date.now(),i=[];t-zS>2&&(k4("matchMediaInit"),wc.forEach(function(r){var s=r.queries,a=r.conditions,n,o,l,h;for(o in s)n=Cn.matchMedia(s[o]).matches,n&&(l=1),n!==a[o]&&(a[o]=n,h=1);h&&(r.revert(),l&&i.push(r))}),k4("matchMediaRevert"),i.forEach(function(r){return r.onMatch(r,function(s){return r.add(null,s)})}),zS=t,k4("matchMedia"))},yR=function(){function e(i,r){this.selector=r&&I5(r),this.data=[],this._r=[],this.isReverted=!1,this.id=$W++,i&&this.add(i)}var t=e.prototype;return t.add=function(r,s,a){lr(r)&&(a=s,s=r,r=lr);var n=this,o=function(){var h=Xi,c=n.selector,u;return h&&h!==n&&h.data.push(n),a&&(n.selector=I5(a)),Xi=n,u=s.apply(n,arguments),lr(u)&&n._r.push(u),Xi=h,n.selector=c,n.isReverted=!1,u};return n.last=o,r===lr?o(n,function(l){return n.add(null,l)}):r?n[r]=o:o},t.ignore=function(r){var s=Xi;Xi=null,r(this),Xi=s},t.getTweens=function(){var r=[];return this.data.forEach(function(s){return s instanceof e?r.push.apply(r,s.getTweens()):s instanceof Mr&&!(s.parent&&s.parent.data==="nested")&&r.push(s)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,s){var a=this;if(r?function(){for(var o=a.getTweens(),l=a.data.length,h;l--;)h=a.data[l],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(c){return o.splice(o.indexOf(c),1)}));for(o.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,u){return u.g-c.g||-1/0}).forEach(function(c){return c.t.revert(r)}),l=a.data.length;l--;)h=a.data[l],h instanceof J1?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof Mr)&&h.revert&&h.revert(r);a._r.forEach(function(c){return c(r,a)}),a.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),s)for(var n=wc.length;n--;)wc[n].id===this.id&&wc.splice(n,1)},t.revert=function(r){this.kill(r||{})},e}(),eq=function(){function e(i){this.contexts=[],this.scope=i,Xi&&Xi.data.push(this)}var t=e.prototype;return t.add=function(r,s,a){Yn(r)||(r={matches:r});var n=new yR(0,a||this.scope),o=n.conditions={},l,h,c;Xi&&!n.selector&&(n.selector=Xi.selector),this.contexts.push(n),s=n.add("onMatch",s),n.queries=r;for(h in r)h==="all"?c=1:(l=Cn.matchMedia(r[h]),l&&(wc.indexOf(n)<0&&wc.push(n),(o[h]=l.matches)&&(c=1),l.addListener?l.addListener(L5):l.addEventListener("change",L5)));return c&&s(n,function(u){return n.add(null,u)}),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(s){return s.kill(r,!0)})},e}(),rg={registerPlugin:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];i.forEach(function(s){return rR(s)})},timeline:function(t){return new J1(t)},getTweensOf:function(t,i){return Qi.getTweensOf(t,i)},getProperty:function(t,i,r,s){o1(t)&&(t=pa(t)[0]);var a=yc(t||{}).get,n=r?HO:GO;return r==="native"&&(r=""),t&&(i?n((Bs[i]&&Bs[i].get||a)(t,i,r,s)):function(o,l,h){return n((Bs[o]&&Bs[o].get||a)(t,o,l,h))})},quickSetter:function(t,i,r){if(t=pa(t),t.length>1){var s=t.map(function(c){return Ms.quickSetter(c,i,r)}),a=s.length;return function(c){for(var u=a;u--;)s[u](c)}}t=t[0]||{};var n=Bs[i],o=yc(t),l=o.harness&&(o.harness.aliases||{})[i]||i,h=n?function(c){var u=new n;X2._pt=0,u.init(t,r?c+r:c,X2,0,[t]),u.render(1,u),X2._pt&&Yb(1,X2)}:o.set(t,l);return n?h:function(c){return h(t,l,r?c+r:c,o,1)}},quickTo:function(t,i,r){var s,a=Ms.to(t,qs((s={},s[i]="+=0.1",s.paused=!0,s.stagger=0,s),r||{})),n=function(l,h,c){return a.resetTo(i,l,h,c)};return n.tween=a,n},isTweening:function(t){return Qi.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=bc(t.ease,Pu.ease)),DS(Pu,t||{})},config:function(t){return DS(Hs,t||{})},registerEffect:function(t){var i=t.name,r=t.effect,s=t.plugins,a=t.defaults,n=t.extendTimeline;(s||"").split(",").forEach(function(o){return o&&!Bs[o]&&!Ws[o]&&xd(i+" effect requires "+o+" plugin.")}),R4[i]=function(o,l,h){return r(pa(o),qs(l||{},a),h)},n&&(J1.prototype[i]=function(o,l,h){return this.add(R4[i](o,Yn(l)?l:(h=l)&&{},this),h)})},registerEase:function(t,i){si[t]=bc(i)},parseEase:function(t,i){return arguments.length?bc(t,i):si},getById:function(t){return Qi.getById(t)},exportRoot:function(t,i){t===void 0&&(t={});var r=new J1(t),s,a;for(r.smoothChildTiming=xs(t.smoothChildTiming),Qi.remove(r),r._dp=0,r._time=r._tTime=Qi._time,s=Qi._first;s;)a=s._next,(i||!(!s._dur&&s instanceof Mr&&s.vars.onComplete===s._targets[0]))&&On(r,s,s._start-s._delay),s=a;return On(Qi,r,0),r},context:function(t,i){return t?new yR(t,i):Xi},matchMedia:function(t){return new eq(t)},matchMediaRefresh:function(){return wc.forEach(function(t){var i=t.conditions,r,s;for(s in i)i[s]&&(i[s]=!1,r=1);r&&t.revert()})||L5()},addEventListener:function(t,i){var r=bm[t]||(bm[t]=[]);~r.indexOf(i)||r.push(i)},removeEventListener:function(t,i){var r=bm[t],s=r&&r.indexOf(i);s>=0&&r.splice(s,1)},utils:{wrap:OW,wrapYoyo:RW,distribute:ZO,random:$O,snap:JO,normalize:IW,getUnit:k1,clamp:EW,splitColor:sR,toArray:pa,selector:I5,mapRange:tR,pipe:PW,unitize:DW,interpolate:LW,shuffle:QO},install:FO,effects:R4,ticker:Fs,updateRoot:J1.updateRoot,plugins:Bs,globalTimeline:Qi,core:{PropTween:ws,globals:NO,Tween:Mr,Timeline:J1,Animation:Sd,getCache:yc,_removeLinkedListItem:Rv,reverting:function(){return S1},context:function(t){return t&&Xi&&(Xi.data.push(t),t._ctx=Xi),Xi},suppressOverwrites:function(t){return zb=t}}};bs("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return rg[e]=Mr[e]});Fs.add(J1.updateRoot);X2=rg.to({},{duration:0});var tq=function(t,i){for(var r=t._pt;r&&r.p!==i&&r.op!==i&&r.fp!==i;)r=r._next;return r},iq=function(t,i){var r=t._targets,s,a,n;for(s in i)for(a=r.length;a--;)n=t._ptLookup[a][s],n&&(n=n.d)&&(n._pt&&(n=tq(n,s)),n&&n.modifier&&n.modifier(i[s],t,r[a],s))},F4=function(t,i){return{name:t,headless:1,rawVars:1,init:function(s,a,n){n._onInit=function(o){var l,h;if(o1(a)&&(l={},bs(a,function(c){return l[c]=1}),a=l),i){l={};for(h in a)l[h]=i(a[h]);a=l}iq(o,a)}}}},Ms=rg.registerPlugin({name:"attr",init:function(t,i,r,s,a){var n,o,l;this.tween=r;for(n in i)l=t.getAttribute(n)||"",o=this.add(t,"setAttribute",(l||0)+"",i[n],s,a,0,0,n),o.op=n,o.b=l,this._props.push(n)},render:function(t,i){for(var r=i._pt;r;)S1?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",headless:1,init:function(t,i){for(var r=i.length;r--;)this.add(t,r,t[r]||0,i[r],0,0,0,0,0,1)}},F4("roundProps",O5),F4("modifiers"),F4("snap",JO))||rg;Mr.version=J1.version=Ms.version="3.13.0";kO=1;kb()&&Ru();si.Power0;si.Power1;si.Power2;si.Power3;si.Power4;si.Linear;si.Quad;si.Cubic;si.Quart;si.Quint;si.Strong;si.Elastic;si.Back;si.SteppedEase;si.Bounce;si.Sine;si.Expo;si.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var BS,Gl,uu,Kb,nc,kS,Qb,rq=function(){return typeof window<"u"},Yo={},Xh=180/Math.PI,du=Math.PI/180,t2=Math.atan2,FS=1e8,Zb=/([A-Z])/g,sq=/(left|right|width|margin|padding|x)/i,aq=/[\s,\(]\S/,Fn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},z5=function(t,i){return i.set(i.t,i.p,Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},nq=function(t,i){return i.set(i.t,i.p,t===1?i.e:Math.round((i.s+i.c*t)*1e4)/1e4+i.u,i)},oq=function(t,i){return i.set(i.t,i.p,t?Math.round((i.s+i.c*t)*1e4)/1e4+i.u:i.b,i)},lq=function(t,i){var r=i.s+i.c*t;i.set(i.t,i.p,~~(r+(r<0?-.5:.5))+i.u,i)},xR=function(t,i){return i.set(i.t,i.p,t?i.e:i.b,i)},bR=function(t,i){return i.set(i.t,i.p,t!==1?i.b:i.e,i)},hq=function(t,i,r){return t.style[i]=r},cq=function(t,i,r){return t.style.setProperty(i,r)},uq=function(t,i,r){return t._gsap[i]=r},dq=function(t,i,r){return t._gsap.scaleX=t._gsap.scaleY=r},fq=function(t,i,r,s,a){var n=t._gsap;n.scaleX=n.scaleY=r,n.renderTransform(a,n)},pq=function(t,i,r,s,a){var n=t._gsap;n[i]=r,n.renderTransform(a,n)},Zi="transform",_s=Zi+"Origin",mq=function e(t,i){var r=this,s=this.target,a=s.style,n=s._gsap;if(t in Yo&&a){if(this.tfm=this.tfm||{},t!=="transform")t=Fn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(o){return r.tfm[o]=Co(s,o)}):this.tfm[t]=n.x?n[t]:Co(s,t),t===_s&&(this.tfm.zOrigin=n.zOrigin);else return Fn.transform.split(",").forEach(function(o){return e.call(r,o,i)});if(this.props.indexOf(Zi)>=0)return;n.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(_s,i,"")),t=Zi}(a||i)&&this.props.push(t,i,a[t])},wR=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},gq=function(){var t=this.props,i=this.target,r=i.style,s=i._gsap,a,n;for(a=0;a<t.length;a+=3)t[a+1]?t[a+1]===2?i[t[a]](t[a+2]):i[t[a]]=t[a+2]:t[a+2]?r[t[a]]=t[a+2]:r.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(Zb,"-$1").toLowerCase());if(this.tfm){for(n in this.tfm)s[n]=this.tfm[n];s.svg&&(s.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),a=Qb(),(!a||!a.isStart)&&!r[Zi]&&(wR(r),s.zOrigin&&r[_s]&&(r[_s]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},_R=function(t,i){var r={target:t,props:[],revert:gq,save:mq};return t._gsap||Ms.core.getCache(t),i&&t.style&&t.nodeType&&i.split(",").forEach(function(s){return r.save(s)}),r},SR,B5=function(t,i){var r=Gl.createElementNS?Gl.createElementNS((i||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Gl.createElement(t);return r&&r.style?r:Gl.createElement(t)},ma=function e(t,i,r){var s=getComputedStyle(t);return s[i]||s.getPropertyValue(i.replace(Zb,"-$1").toLowerCase())||s.getPropertyValue(i)||!r&&e(t,Lu(i)||i,1)||""},NS="O,Moz,ms,Ms,Webkit".split(","),Lu=function(t,i,r){var s=i||nc,a=s.style,n=5;if(t in a&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(NS[n]+t in a););return n<0?null:(n===3?"ms":n>=0?NS[n]:"")+t},k5=function(){rq()&&window.document&&(BS=window,Gl=BS.document,uu=Gl.documentElement,nc=B5("div")||{style:{}},B5("div"),Zi=Lu(Zi),_s=Zi+"Origin",nc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",SR=!!Lu("perspective"),Qb=Ms.core.reverting,Kb=1)},US=function(t){var i=t.ownerSVGElement,r=B5("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=t.cloneNode(!0),a;s.style.display="block",r.appendChild(s),uu.appendChild(r);try{a=s.getBBox()}catch{}return r.removeChild(s),uu.removeChild(r),a},VS=function(t,i){for(var r=i.length;r--;)if(t.hasAttribute(i[r]))return t.getAttribute(i[r])},AR=function(t){var i,r;try{i=t.getBBox()}catch{i=US(t),r=1}return i&&(i.width||i.height)||r||(i=US(t)),i&&!i.width&&!i.x&&!i.y?{x:+VS(t,["x","cx","x1"])||0,y:+VS(t,["y","cy","y1"])||0,width:0,height:0}:i},MR=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&AR(t))},Oc=function(t,i){if(i){var r=t.style,s;i in Yo&&i!==_s&&(i=Zi),r.removeProperty?(s=i.substr(0,2),(s==="ms"||i.substr(0,6)==="webkit")&&(i="-"+i),r.removeProperty(s==="--"?i:i.replace(Zb,"-$1").toLowerCase())):r.removeAttribute(i)}},Hl=function(t,i,r,s,a,n){var o=new ws(t._pt,i,r,0,1,n?bR:xR);return t._pt=o,o.b=s,o.e=a,t._props.push(r),o},jS={deg:1,rad:1,turn:1},vq={grid:1,flex:1},mh=function e(t,i,r,s){var a=parseFloat(r)||0,n=(r+"").trim().substr((a+"").length)||"px",o=nc.style,l=sq.test(i),h=t.tagName.toLowerCase()==="svg",c=(h?"client":"offset")+(l?"Width":"Height"),u=100,d=s==="px",f=s==="%",p,m,g,v;if(s===n||!a||jS[s]||jS[n])return a;if(n!=="px"&&!d&&(a=e(t,i,r,"px")),v=t.getCTM&&MR(t),(f||n==="%")&&(Yo[i]||~i.indexOf("adius")))return p=v?t.getBBox()[l?"width":"height"]:t[c],mr(f?a/p*u:a/100*p);if(o[l?"width":"height"]=u+(d?n:s),m=s!=="rem"&&~i.indexOf("adius")||s==="em"&&t.appendChild&&!h?t:t.parentNode,v&&(m=(t.ownerSVGElement||{}).parentNode),(!m||m===Gl||!m.appendChild)&&(m=Gl.body),g=m._gsap,g&&f&&g.width&&l&&g.time===Fs.time&&!g.uncache)return mr(a/g.width*u);if(f&&(i==="height"||i==="width")){var y=t.style[i];t.style[i]=u+s,p=t[c],y?t.style[i]=y:Oc(t,i)}else(f||n==="%")&&!vq[ma(m,"display")]&&(o.position=ma(t,"position")),m===t&&(o.position="static"),m.appendChild(nc),p=nc[c],m.removeChild(nc),o.position="absolute";return l&&f&&(g=yc(m),g.time=Fs.time,g.width=m[c]),mr(d?p*a/u:p&&a?u/p*a:0)},Co=function(t,i,r,s){var a;return Kb||k5(),i in Fn&&i!=="transform"&&(i=Fn[i],~i.indexOf(",")&&(i=i.split(",")[0])),Yo[i]&&i!=="transform"?(a=Md(t,s),a=i!=="transformOrigin"?a[i]:a.svg?a.origin:ag(ma(t,_s))+" "+a.zOrigin+"px"):(a=t.style[i],(!a||a==="auto"||s||~(a+"").indexOf("calc("))&&(a=sg[i]&&sg[i](t,i,r)||ma(t,i)||VO(t,i)||(i==="opacity"?1:0))),r&&!~(a+"").trim().indexOf(" ")?mh(t,i,a,r)+r:a},yq=function(t,i,r,s){if(!r||r==="none"){var a=Lu(i,t,1),n=a&&ma(t,a,1);n&&n!==r?(i=a,r=n):i==="borderColor"&&(r=ma(t,"borderTopColor"))}var o=new ws(this._pt,t.style,i,0,1,gR),l=0,h=0,c,u,d,f,p,m,g,v,y,x,w,_;if(o.b=r,o.e=s,r+="",s+="",s.substring(0,6)==="var(--"&&(s=ma(t,s.substring(4,s.indexOf(")")))),s==="auto"&&(m=t.style[i],t.style[i]=s,s=ma(t,i)||s,m?t.style[i]=m:Oc(t,i)),c=[r,s],nR(c),r=c[0],s=c[1],d=r.match(q2)||[],_=s.match(q2)||[],_.length){for(;u=q2.exec(s);)g=u[0],y=s.substring(l,u.index),p?p=(p+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(p=1),g!==(m=d[h++]||"")&&(f=parseFloat(m)||0,w=m.substr((f+"").length),g.charAt(1)==="="&&(g=cu(f,g)+w),v=parseFloat(g),x=g.substr((v+"").length),l=q2.lastIndex-x.length,x||(x=x||Hs.units[i]||w,l===s.length&&(s+=x,o.e+=x)),w!==x&&(f=mh(t,i,m,x)||0),o._pt={_next:o._pt,p:y||h===1?y:",",s:f,c:v-f,m:p&&p<4||i==="zIndex"?Math.round:0});o.c=l<s.length?s.substring(l,s.length):""}else o.r=i==="display"&&s==="none"?bR:xR;return zO.test(s)&&(o.e=0),this._pt=o,o},GS={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},xq=function(t){var i=t.split(" "),r=i[0],s=i[1]||"50%";return(r==="top"||r==="bottom"||s==="left"||s==="right")&&(t=r,r=s,s=t),i[0]=GS[r]||r,i[1]=GS[s]||s,i.join(" ")},bq=function(t,i){if(i.tween&&i.tween._time===i.tween._dur){var r=i.t,s=r.style,a=i.u,n=r._gsap,o,l,h;if(a==="all"||a===!0)s.cssText="",l=1;else for(a=a.split(","),h=a.length;--h>-1;)o=a[h],Yo[o]&&(l=1,o=o==="transformOrigin"?_s:Zi),Oc(r,o);l&&(Oc(r,Zi),n&&(n.svg&&r.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",Md(r,1),n.uncache=1,wR(s)))}},sg={clearProps:function(t,i,r,s,a){if(a.data!=="isFromStart"){var n=t._pt=new ws(t._pt,i,r,0,0,bq);return n.u=s,n.pr=-10,n.tween=a,t._props.push(r),1}}},Ad=[1,0,0,1,0,0],CR={},ER=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},HS=function(t){var i=ma(t,Zi);return ER(i)?Ad:i.substr(7).match(LO).map(mr)},Jb=function(t,i){var r=t._gsap||yc(t),s=t.style,a=HS(t),n,o,l,h;return r.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,a=[l.a,l.b,l.c,l.d,l.e,l.f],a.join(",")==="1,0,0,1,0,0"?Ad:a):(a===Ad&&!t.offsetParent&&t!==uu&&!r.svg&&(l=s.display,s.display="block",n=t.parentNode,(!n||!t.offsetParent&&!t.getBoundingClientRect().width)&&(h=1,o=t.nextElementSibling,uu.appendChild(t)),a=HS(t),l?s.display=l:Oc(t,"display"),h&&(o?n.insertBefore(t,o):n?n.appendChild(t):uu.removeChild(t))),i&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},F5=function(t,i,r,s,a,n){var o=t._gsap,l=a||Jb(t,!0),h=o.xOrigin||0,c=o.yOrigin||0,u=o.xOffset||0,d=o.yOffset||0,f=l[0],p=l[1],m=l[2],g=l[3],v=l[4],y=l[5],x=i.split(" "),w=parseFloat(x[0])||0,_=parseFloat(x[1])||0,b,M,S,A;r?l!==Ad&&(M=f*g-p*m)&&(S=w*(g/M)+_*(-m/M)+(m*y-g*v)/M,A=w*(-p/M)+_*(f/M)-(f*y-p*v)/M,w=S,_=A):(b=AR(t),w=b.x+(~x[0].indexOf("%")?w/100*b.width:w),_=b.y+(~(x[1]||x[0]).indexOf("%")?_/100*b.height:_)),s||s!==!1&&o.smooth?(v=w-h,y=_-c,o.xOffset=u+(v*f+y*m)-v,o.yOffset=d+(v*p+y*g)-y):o.xOffset=o.yOffset=0,o.xOrigin=w,o.yOrigin=_,o.smooth=!!s,o.origin=i,o.originIsAbsolute=!!r,t.style[_s]="0px 0px",n&&(Hl(n,o,"xOrigin",h,w),Hl(n,o,"yOrigin",c,_),Hl(n,o,"xOffset",u,o.xOffset),Hl(n,o,"yOffset",d,o.yOffset)),t.setAttribute("data-svg-origin",w+" "+_)},Md=function(t,i){var r=t._gsap||new cR(t);if("x"in r&&!i&&!r.uncache)return r;var s=t.style,a=r.scaleX<0,n="px",o="deg",l=getComputedStyle(t),h=ma(t,_s)||"0",c,u,d,f,p,m,g,v,y,x,w,_,b,M,S,A,C,T,D,R,O,j,X,N,k,ne,te,Q,Z,de,ee,le;return c=u=d=m=g=v=y=x=w=0,f=p=1,r.svg=!!(t.getCTM&&MR(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(s[Zi]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Zi]!=="none"?l[Zi]:"")),s.scale=s.rotate=s.translate="none"),M=Jb(t,r.svg),r.svg&&(r.uncache?(k=t.getBBox(),h=r.xOrigin-k.x+"px "+(r.yOrigin-k.y)+"px",N=""):N=!i&&t.getAttribute("data-svg-origin"),F5(t,N||h,!!N||r.originIsAbsolute,r.smooth!==!1,M)),_=r.xOrigin||0,b=r.yOrigin||0,M!==Ad&&(T=M[0],D=M[1],R=M[2],O=M[3],c=j=M[4],u=X=M[5],M.length===6?(f=Math.sqrt(T*T+D*D),p=Math.sqrt(O*O+R*R),m=T||D?t2(D,T)*Xh:0,y=R||O?t2(R,O)*Xh+m:0,y&&(p*=Math.abs(Math.cos(y*du))),r.svg&&(c-=_-(_*T+b*R),u-=b-(_*D+b*O))):(le=M[6],de=M[7],te=M[8],Q=M[9],Z=M[10],ee=M[11],c=M[12],u=M[13],d=M[14],S=t2(le,Z),g=S*Xh,S&&(A=Math.cos(-S),C=Math.sin(-S),N=j*A+te*C,k=X*A+Q*C,ne=le*A+Z*C,te=j*-C+te*A,Q=X*-C+Q*A,Z=le*-C+Z*A,ee=de*-C+ee*A,j=N,X=k,le=ne),S=t2(-R,Z),v=S*Xh,S&&(A=Math.cos(-S),C=Math.sin(-S),N=T*A-te*C,k=D*A-Q*C,ne=R*A-Z*C,ee=O*C+ee*A,T=N,D=k,R=ne),S=t2(D,T),m=S*Xh,S&&(A=Math.cos(S),C=Math.sin(S),N=T*A+D*C,k=j*A+X*C,D=D*A-T*C,X=X*A-j*C,T=N,j=k),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,v=180-v),f=mr(Math.sqrt(T*T+D*D+R*R)),p=mr(Math.sqrt(X*X+le*le)),S=t2(j,X),y=Math.abs(S)>2e-4?S*Xh:0,w=ee?1/(ee<0?-ee:ee):0),r.svg&&(N=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!ER(ma(t,Zi)),N&&t.setAttribute("transform",N))),Math.abs(y)>90&&Math.abs(y)<270&&(a?(f*=-1,y+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,y+=y<=0?180:-180)),i=i||r.uncache,r.x=c-((r.xPercent=c&&(!i&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+n,r.y=u-((r.yPercent=u&&(!i&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-u)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+n,r.z=d+n,r.scaleX=mr(f),r.scaleY=mr(p),r.rotation=mr(m)+o,r.rotationX=mr(g)+o,r.rotationY=mr(v)+o,r.skewX=y+o,r.skewY=x+o,r.transformPerspective=w+n,(r.zOrigin=parseFloat(h.split(" ")[2])||!i&&r.zOrigin||0)&&(s[_s]=ag(h)),r.xOffset=r.yOffset=0,r.force3D=Hs.force3D,r.renderTransform=r.svg?_q:SR?TR:wq,r.uncache=0,r},ag=function(t){return(t=t.split(" "))[0]+" "+t[1]},N4=function(t,i,r){var s=k1(i);return mr(parseFloat(i)+parseFloat(mh(t,"x",r+"px",s)))+s},wq=function(t,i){i.z="0px",i.rotationY=i.rotationX="0deg",i.force3D=0,TR(t,i)},Rh="0deg",D0="0px",Lh=") ",TR=function(t,i){var r=i||this,s=r.xPercent,a=r.yPercent,n=r.x,o=r.y,l=r.z,h=r.rotation,c=r.rotationY,u=r.rotationX,d=r.skewX,f=r.skewY,p=r.scaleX,m=r.scaleY,g=r.transformPerspective,v=r.force3D,y=r.target,x=r.zOrigin,w="",_=v==="auto"&&t&&t!==1||v===!0;if(x&&(u!==Rh||c!==Rh)){var b=parseFloat(c)*du,M=Math.sin(b),S=Math.cos(b),A;b=parseFloat(u)*du,A=Math.cos(b),n=N4(y,n,M*A*-x),o=N4(y,o,-Math.sin(b)*-x),l=N4(y,l,S*A*-x+x)}g!==D0&&(w+="perspective("+g+Lh),(s||a)&&(w+="translate("+s+"%, "+a+"%) "),(_||n!==D0||o!==D0||l!==D0)&&(w+=l!==D0||_?"translate3d("+n+", "+o+", "+l+") ":"translate("+n+", "+o+Lh),h!==Rh&&(w+="rotate("+h+Lh),c!==Rh&&(w+="rotateY("+c+Lh),u!==Rh&&(w+="rotateX("+u+Lh),(d!==Rh||f!==Rh)&&(w+="skew("+d+", "+f+Lh),(p!==1||m!==1)&&(w+="scale("+p+", "+m+Lh),y.style[Zi]=w||"translate(0, 0)"},_q=function(t,i){var r=i||this,s=r.xPercent,a=r.yPercent,n=r.x,o=r.y,l=r.rotation,h=r.skewX,c=r.skewY,u=r.scaleX,d=r.scaleY,f=r.target,p=r.xOrigin,m=r.yOrigin,g=r.xOffset,v=r.yOffset,y=r.forceCSS,x=parseFloat(n),w=parseFloat(o),_,b,M,S,A;l=parseFloat(l),h=parseFloat(h),c=parseFloat(c),c&&(c=parseFloat(c),h+=c,l+=c),l||h?(l*=du,h*=du,_=Math.cos(l)*u,b=Math.sin(l)*u,M=Math.sin(l-h)*-d,S=Math.cos(l-h)*d,h&&(c*=du,A=Math.tan(h-c),A=Math.sqrt(1+A*A),M*=A,S*=A,c&&(A=Math.tan(c),A=Math.sqrt(1+A*A),_*=A,b*=A)),_=mr(_),b=mr(b),M=mr(M),S=mr(S)):(_=u,S=d,b=M=0),(x&&!~(n+"").indexOf("px")||w&&!~(o+"").indexOf("px"))&&(x=mh(f,"x",n,"px"),w=mh(f,"y",o,"px")),(p||m||g||v)&&(x=mr(x+p-(p*_+m*M)+g),w=mr(w+m-(p*b+m*S)+v)),(s||a)&&(A=f.getBBox(),x=mr(x+s/100*A.width),w=mr(w+a/100*A.height)),A="matrix("+_+","+b+","+M+","+S+","+x+","+w+")",f.setAttribute("transform",A),y&&(f.style[Zi]=A)},Sq=function(t,i,r,s,a){var n=360,o=o1(a),l=parseFloat(a)*(o&&~a.indexOf("rad")?Xh:1),h=l-s,c=s+h+"deg",u,d;return o&&(u=a.split("_")[1],u==="short"&&(h%=n,h!==h%(n/2)&&(h+=h<0?n:-n)),u==="cw"&&h<0?h=(h+n*FS)%n-~~(h/n)*n:u==="ccw"&&h>0&&(h=(h-n*FS)%n-~~(h/n)*n)),t._pt=d=new ws(t._pt,i,r,s,h,nq),d.e=c,d.u="deg",t._props.push(r),d},WS=function(t,i){for(var r in i)t[r]=i[r];return t},Aq=function(t,i,r){var s=WS({},r._gsap),a="perspective,force3D,transformOrigin,svgOrigin",n=r.style,o,l,h,c,u,d,f,p;s.svg?(h=r.getAttribute("transform"),r.setAttribute("transform",""),n[Zi]=i,o=Md(r,1),Oc(r,Zi),r.setAttribute("transform",h)):(h=getComputedStyle(r)[Zi],n[Zi]=i,o=Md(r,1),n[Zi]=h);for(l in Yo)h=s[l],c=o[l],h!==c&&a.indexOf(l)<0&&(f=k1(h),p=k1(c),u=f!==p?mh(r,l,h,p):parseFloat(h),d=parseFloat(c),t._pt=new ws(t._pt,o,l,u,d-u,z5),t._pt.u=p||0,t._props.push(l));WS(o,s)};bs("padding,margin,Width,Radius",function(e,t){var i="Top",r="Right",s="Bottom",a="Left",n=(t<3?[i,r,s,a]:[i+a,i+r,s+r,s+a]).map(function(o){return t<2?e+o:"border"+o+e});sg[t>1?"border"+e:e]=function(o,l,h,c,u){var d,f;if(arguments.length<4)return d=n.map(function(p){return Co(o,p,h)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(c+"").split(" "),f={},n.forEach(function(p,m){return f[p]=d[m]=d[m]||d[(m-1)/2|0]}),o.init(l,f,u)}});var PR={name:"css",register:k5,targetTest:function(t){return t.style&&t.nodeType},init:function(t,i,r,s,a){var n=this._props,o=t.style,l=r.vars.startAt,h,c,u,d,f,p,m,g,v,y,x,w,_,b,M,S;Kb||k5(),this.styles=this.styles||_R(t),S=this.styles.props,this.tween=r;for(m in i)if(m!=="autoRound"&&(c=i[m],!(Bs[m]&&uR(m,i,r,s,t,a)))){if(f=typeof c,p=sg[m],f==="function"&&(c=c.call(r,s,t,a),f=typeof c),f==="string"&&~c.indexOf("random(")&&(c=wd(c)),p)p(this,t,m,c,r)&&(M=1);else if(m.substr(0,2)==="--")h=(getComputedStyle(t).getPropertyValue(m)+"").trim(),c+="",rh.lastIndex=0,rh.test(h)||(g=k1(h),v=k1(c)),v?g!==v&&(h=mh(t,m,h,v)+v):g&&(c+=g),this.add(o,"setProperty",h,c,s,a,0,0,m),n.push(m),S.push(m,0,o[m]);else if(f!=="undefined"){if(l&&m in l?(h=typeof l[m]=="function"?l[m].call(r,s,t,a):l[m],o1(h)&&~h.indexOf("random(")&&(h=wd(h)),k1(h+"")||h==="auto"||(h+=Hs.units[m]||k1(Co(t,m))||""),(h+"").charAt(1)==="="&&(h=Co(t,m))):h=Co(t,m),d=parseFloat(h),y=f==="string"&&c.charAt(1)==="="&&c.substr(0,2),y&&(c=c.substr(2)),u=parseFloat(c),m in Fn&&(m==="autoAlpha"&&(d===1&&Co(t,"visibility")==="hidden"&&u&&(d=0),S.push("visibility",0,o.visibility),Hl(this,o,"visibility",d?"inherit":"hidden",u?"inherit":"hidden",!u)),m!=="scale"&&m!=="transform"&&(m=Fn[m],~m.indexOf(",")&&(m=m.split(",")[0]))),x=m in Yo,x){if(this.styles.save(m),f==="string"&&c.substring(0,6)==="var(--"&&(c=ma(t,c.substring(4,c.indexOf(")"))),u=parseFloat(c)),w||(_=t._gsap,_.renderTransform&&!i.parseTransform||Md(t,i.parseTransform),b=i.smoothOrigin!==!1&&_.smooth,w=this._pt=new ws(this._pt,o,Zi,0,1,_.renderTransform,_,0,-1),w.dep=1),m==="scale")this._pt=new ws(this._pt,_,"scaleY",_.scaleY,(y?cu(_.scaleY,y+u):u)-_.scaleY||0,z5),this._pt.u=0,n.push("scaleY",m),m+="X";else if(m==="transformOrigin"){S.push(_s,0,o[_s]),c=xq(c),_.svg?F5(t,c,0,b,0,this):(v=parseFloat(c.split(" ")[2])||0,v!==_.zOrigin&&Hl(this,_,"zOrigin",_.zOrigin,v),Hl(this,o,m,ag(h),ag(c)));continue}else if(m==="svgOrigin"){F5(t,c,1,b,0,this);continue}else if(m in CR){Sq(this,_,m,d,y?cu(d,y+c):c);continue}else if(m==="smoothOrigin"){Hl(this,_,"smooth",_.smooth,c);continue}else if(m==="force3D"){_[m]=c;continue}else if(m==="transform"){Aq(this,c,t);continue}}else m in o||(m=Lu(m)||m);if(x||(u||u===0)&&(d||d===0)&&!aq.test(c)&&m in o)g=(h+"").substr((d+"").length),u||(u=0),v=k1(c)||(m in Hs.units?Hs.units[m]:g),g!==v&&(d=mh(t,m,h,v)),this._pt=new ws(this._pt,x?_:o,m,d,(y?cu(d,y+u):u)-d,!x&&(v==="px"||m==="zIndex")&&i.autoRound!==!1?lq:z5),this._pt.u=v||0,g!==v&&v!=="%"&&(this._pt.b=h,this._pt.r=oq);else if(m in o)yq.call(this,t,m,h,y?y+c:c);else if(m in t)this.add(t,m,h||t[m],y?y+c:c,s,a);else if(m!=="parseTransform"){Nb(m,c);continue}x||(m in o?S.push(m,0,o[m]):typeof t[m]=="function"?S.push(m,2,t[m]()):S.push(m,1,h||t[m])),n.push(m)}}M&&vR(this)},render:function(t,i){if(i.tween._time||!Qb())for(var r=i._pt;r;)r.r(t,r.d),r=r._next;else i.styles.revert()},get:Co,aliases:Fn,getSetter:function(t,i,r){var s=Fn[i];return s&&s.indexOf(",")<0&&(i=s),i in Yo&&i!==_s&&(t._gsap.x||Co(t,"x"))?r&&kS===r?i==="scale"?dq:uq:(kS=r||{})&&(i==="scale"?fq:pq):t.style&&!Bb(t.style[i])?hq:~i.indexOf("-")?cq:Xb(t,i)},core:{_removeProperty:Oc,_getMatrix:Jb}};Ms.utils.checkPrefix=Lu;Ms.core.getStyleSaver=_R;(function(e,t,i,r){var s=bs(e+","+t+","+i,function(a){Yo[a]=1});bs(t,function(a){Hs.units[a]="deg",CR[a]=1}),Fn[s[13]]=e+","+t,bs(r,function(a){var n=a.split(":");Fn[n[1]]=s[n[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");bs("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){Hs.units[e]="px"});Ms.registerPlugin(PR);var $b=Ms.registerPlugin(PR)||Ms;$b.core.Tween;const kf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Mq(e,t){let i=new Set,r=new Set,s=!1,a=!1;const n=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(c){n.has(c)&&(h.schedule(c),e()),c(o)}const h={schedule:(c,u=!1,d=!1)=>{const p=d&&s?i:r;return u&&n.add(c),p.has(c)||p.add(c),c},cancel:c=>{r.delete(c),n.delete(c)},process:c=>{if(o=c,s){a=!0;return}s=!0,[i,r]=[r,i],i.forEach(l),i.clear(),s=!1,a&&(a=!1,h.process(c))}};return h}const Ko={},Cq=40;function DR(e,t){let i=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>i=!0,n=kf.reduce((x,w)=>(x[w]=Mq(a),x),{}),{setup:o,read:l,resolveKeyframes:h,preUpdate:c,update:u,preRender:d,render:f,postRender:p}=n,m=()=>{const x=Ko.useManualTiming?s.timestamp:performance.now();i=!1,Ko.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(x-s.timestamp,Cq),1)),s.timestamp=x,s.isProcessing=!0,o.process(s),l.process(s),h.process(s),c.process(s),u.process(s),d.process(s),f.process(s),p.process(s),s.isProcessing=!1,i&&t&&(r=!1,e(m))},g=()=>{i=!0,r=!0,s.isProcessing||e(m)};return{schedule:kf.reduce((x,w)=>{const _=n[w];return x[w]=(b,M=!1,S=!1)=>(i||g(),_.schedule(b,M,S)),x},{}),cancel:x=>{for(let w=0;w<kf.length;w++)n[kf[w]].cancel(x)},state:s,steps:n}}const Ss=e=>e,{schedule:Vi,cancel:Qo,state:f1,steps:U4}=DR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ss,!0);let wm;function Eq(){wm=void 0}const gs={now:()=>(wm===void 0&&gs.set(f1.isProcessing||Ko.useManualTiming?f1.timestamp:performance.now()),wm),set:e=>{wm=e,queueMicrotask(Eq)}},Ka=e=>e*1e3,jn=e=>e/1e3;function Tq(e,t){const i=gs.now(),r=({timestamp:s})=>{const a=s-i;a>=t&&(Qo(r),e(a-t))};return Vi.setup(r,!0),()=>Qo(r)}const IR=e=>t=>typeof t=="string"&&t.startsWith(e),ew=IR("--"),Pq=IR("var(--"),tw=e=>Pq(e)?Dq.test(e.split("/*")[0].trim()):!1,Dq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Cd={};function OR(e){for(const t in e)Cd[t]=e[t],ew(t)&&(Cd[t].isCSSVariable=!0)}function lf(e,t){const i=typeof e=="string"&&!t?`${e}Context`:t,r=Symbol(i);return[n=>{const o=Vn(r,n);if(o===void 0)throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`);return o},n=>(D3(r,n),n)]}const[Iq,Oq]=lf("Motion"),[Rq,y7e]=lf("LayoutGroup");function qS(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}class nl{constructor(t){this.state=t}beforeMount(){}mount(){}unmount(){}update(){}beforeUpdate(){}beforeUnmount(){}}function k3(e,t,i){if(Array.isArray(e))return e.reduce((r,s)=>{const a=k3(s,t,i);return a?{...r,...a}:r},{});if(typeof e=="object")return e;if(e&&t){const r=t[e];return typeof r=="function"?r(i):r}}function Lq(e,t){return typeof e!=typeof t?!0:Array.isArray(e)&&Array.isArray(t)?!zq(e,t):e!==t}function zq(e,t){const i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0}function XS(e){return e?.startsWith("--")}const Bq=e=>e;function kq(e){return typeof e=="number"}const Fq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],Nq=new Set(Fq);function RR(e){return Nq.has(e)}class Uq{constructor(t){this.features=[];const{features:i=[],lazyMotionContext:r}=t.options,s=i.concat(r.features.value);this.features=s.map(n=>new n(t));const a=this.features;Ni(r.features,n=>{n.forEach(o=>{if(!s.includes(o)){s.push(o);const l=new o(t);a.push(l),t.isMounted()&&(l.beforeMount(),l.mount())}})},{flush:"pre"})}mount(){this.features.forEach(t=>t.mount())}beforeMount(){this.features.forEach(t=>{var i;return(i=t.beforeMount)==null?void 0:i.call(t)})}unmount(){this.features.forEach(t=>t.unmount())}update(){this.features.forEach(t=>{var i;return(i=t.update)==null?void 0:i.call(t)})}beforeUpdate(){this.features.forEach(t=>t.beforeUpdate())}beforeUnmount(){this.features.forEach(t=>t.beforeUnmount())}}const iw=new WeakMap,[Vq,x7e]=lf("AnimatePresenceContext");function jq(e){return typeof e=="string"||e===!1||Array.isArray(e)}const LR=new WeakMap;let Gq=0;const V4=new Set;class Hq{constructor(t,i){var r;this.element=null,this.isSafeToRemove=!1,this.isVShow=!1,this.children=new Set,this.activeStates={initial:!0,animate:!0},this.currentProcess=null,this._context=null,this.animateUpdates=Ss,this.id=`motion-state-${Gq++}`,this.options=t,this.parent=i,(r=i?.children)==null||r.add(this),this.depth=i?.depth+1||0;const a=(t.initial===void 0&&t.variants?this.context.initial:t.initial)===!1?["initial","animate"]:["initial"];this.initTarget(a),this.featureManager=new Uq(this),this.type=RR(this.options.as)?"svg":"html"}get context(){if(!this._context){const t={get:(i,r)=>{var s;return jq(this.options[r])?this.options[r]:(s=this.parent)==null?void 0:s.context[r]}};this._context=new Proxy({},t)}return this._context}initTarget(t){var i;const r=this.options.custom??((i=this.options.animatePresenceContext)==null?void 0:i.custom);this.baseTarget=t.reduce((s,a)=>({...s,...k3(this.options[a]||this.context[a],this.options.variants,r)}),{}),this.target={}}updateOptions(t){var i;this.options=t,(i=this.visualElement)==null||i.update({...this.options,whileTap:this.options.whilePress},{isPresent:!iw.has(this.element)})}beforeMount(){this.featureManager.beforeMount()}mount(t,i,r=!1){var s;this.element=t,this.updateOptions(i),this.featureManager.mount(),!r&&this.options.animate&&((s=this.startAnimation)==null||s.call(this)),this.options.layoutId&&(V4.add(this.options.layoutId),Vi.render(()=>{V4.clear()}))}clearAnimation(){var t,i;this.currentProcess&&Qo(this.currentProcess),this.currentProcess=null,(i=(t=this.visualElement)==null?void 0:t.variantChildren)==null||i.forEach(r=>{r.state.clearAnimation()})}startAnimation(){this.clearAnimation(),this.currentProcess=Vi.render(()=>{this.currentProcess=null,this.animateUpdates()})}beforeUnmount(){this.featureManager.beforeUnmount()}unmount(t=!1){const i=this.options.layoutId&&!V4.has(this.options.layoutId);(()=>{const s=()=>{var a,n,o;t&&Array.from(this.children).reverse().forEach(this.unmountChild),(n=(a=this.parent)==null?void 0:a.children)==null||n.delete(this),LR.delete(this.element),this.featureManager.unmount(),(o=this.visualElement)==null||o.unmount(),this.clearAnimation()};i?Promise.resolve().then(s):s()})()}unmountChild(t){t.unmount(!0)}beforeUpdate(){this.featureManager.beforeUpdate()}update(t){this.updateOptions(t),this.featureManager.update(),this.startAnimation()}setActive(t,i,r=!0){var s;!this.element||this.activeStates[t]===i||(this.activeStates[t]=i,(s=this.visualElement.variantChildren)==null||s.forEach(a=>{a.state.setActive(t,i,!1)}),r&&this.animateUpdates({isFallback:!i&&t!=="exit"&&this.visualElement.isControllingVariants,isExit:t==="exit"&&this.activeStates.exit}))}isMounted(){return!!this.element}willUpdate(t){var i;(this.options.layout||this.options.layoutId)&&((i=this.visualElement.projection)==null||i.willUpdate())}}const Rc=new WeakMap;function YS(e,t,i){return new CustomEvent(e,{detail:{target:t,isExit:i}})}const KS={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>`${e}deg`},Wq={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>`${e}px`},rotate:KS,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Bq},skew:KS},qq=["translate","scale","rotate","skew"],Xq=["","X","Y","Z"],rw=new Map,ng=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"];qq.forEach(e=>{Xq.forEach(t=>{ng.push(e+t),rw.set(e+t,Wq[e])})});const Yq=new Set(ng),Kq=e=>Yq.has(e),QS={x:"translateX",y:"translateY",z:"translateZ"};function Qq([e],[t]){return ng.indexOf(e)-ng.indexOf(t)}function Zq(e,[t,i]){return`${e} ${t}(${i})`}function Jq(e){return e.sort(Qq).reduce(Zq,"").trim()}const ZS={translate:[0,0],rotate:0,scale:1,skew:0,x:0,y:0,z:0},hf=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Pl=hf("deg"),Gn=hf("%"),At=hf("px"),$q=hf("vh"),eX=hf("vw"),JS={...Gn,parse:e=>Gn.parse(e)/100,transform:e=>Gn.transform(e*100)},Pr=e=>!!(e&&e.getVelocity),tX={get:(e,t)=>{let i=XS(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!i&&i!=="0"){const r=rw.get(t);r&&(i=r.initialValue)}return i},set:(e,t,i)=>{XS(t)?e.style.setProperty(t,i):e.style[t]=i}};function iX(e){var t;const i={},r=[];for(let s in e){let a=e[s];a=Pr(a)?a.get():a,Kq(s)&&s in QS&&(s=QS[s]);let n=Array.isArray(a)?a[0]:a;const o=rw.get(s);o?(n=kq(a)?(t=o.toDefaultUnit)==null?void 0:t.call(o,a):a,r.push([s,n])):i[s]=n}return r.length&&(i.transform=Jq(r)),Object.keys(i).length===0?null:i}const rX={fill:!0,stroke:!0,opacity:!0,"stroke-width":!0,"fill-opacity":!0,"stroke-opacity":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,cx:!0,cy:!0,r:!0,d:!0,x1:!0,y1:!0,x2:!0,y2:!0,points:!0,"path-length":!0,viewBox:!0,width:!0,height:!0,"preserve-aspect-ratio":!0,"clip-path":!0,filter:!0,mask:!0,"stop-color":!0,"stop-opacity":!0,"gradient-transform":!0,"gradient-units":!0,"spread-method":!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,"text-anchor":!0,"dominant-baseline":!0,"font-family":!0,"font-size":!0,"font-weight":!0,"letter-spacing":!0,"vector-effect":!0};function sX(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function aX(e,t,i=1,r=0){e.pathLength=1,delete e["path-length"],e["stroke-dashoffset"]=At.transform(-r);const s=At.transform(t),a=At.transform(i);e["stroke-dasharray"]=`${s} ${a}`}function nX(e){const t={},i={};for(const r in e){const s=sX(r);if(s in rX){const a=e[r];t[s]=Pr(a)?a.get():a}else i[r]=e[r]}return t["path-length"]!==void 0&&aX(t,t["path-length"],t["path-spacing"],t["path-offset"]),{attrs:t,style:i}}function zR(e){return eI()?(bV(e),!0):!1}const oX=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const N5=e=>typeof e<"u",lX=e=>e!=null,F3=()=>{};function hX(e,t){function i(...r){return new Promise((s,a)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(s).catch(a)})}return i}function cX(e,t={}){let i,r,s=F3;const a=l=>{clearTimeout(l),s(),s=F3};let n;return l=>{const h=ud(e),c=ud(t.maxWait);return i&&a(i),h<=0||c!==void 0&&c<=0?(r&&(a(r),r=void 0),Promise.resolve(l())):new Promise((u,d)=>{s=t.rejectOnCancel?d:u,n=l,c&&!r&&(r=setTimeout(()=>{i&&a(i),r=void 0,u(n())},c)),i=setTimeout(()=>{r&&a(r),r=void 0,u(l())},h)})}}function uX(e){return Array.isArray(e)?e:[e]}function BR(e,t=200,i={}){return hX(cX(t,i),e)}const kR=oX?window:void 0;function N3(e){var t;const i=ud(e);return(t=i?.$el)!=null?t:i}function dX(){const e=Mb(!1),t=_h();return t&&M1(()=>{e.value=!0},t),e}function FR(e){const t=dX();return ci(()=>(t.value,!!e()))}function fX(e){return JSON.parse(JSON.stringify(e))}function pX(e,t,i={}){const{window:r=kR,...s}=i;let a;const n=FR(()=>r&&"ResizeObserver"in r),o=()=>{a&&(a.disconnect(),a=void 0)},l=ci(()=>{const u=ud(e);return Array.isArray(u)?u.map(d=>N3(d)):[N3(u)]}),h=Ni(l,u=>{if(o(),n.value&&r){a=new ResizeObserver(t);for(const d of u)d&&a.observe(d,s)}},{immediate:!0,flush:"post"}),c=()=>{o(),h()};return zR(c),{isSupported:n,stop:c}}function mX(e,t,i={}){const{root:r,rootMargin:s="0px",threshold:a=0,window:n=kR,immediate:o=!0}=i,l=FR(()=>n&&"IntersectionObserver"in n),h=ci(()=>{const p=ud(e);return uX(p).map(N3).filter(lX)});let c=F3;const u=Mb(o),d=l.value?Ni(()=>[h.value,N3(r),u.value],([p,m])=>{if(c(),!u.value||!p.length)return;const g=new IntersectionObserver(t,{root:N3(m),rootMargin:s,threshold:a});p.forEach(v=>v&&g.observe(v)),c=()=>{g.disconnect(),c=F3}},{immediate:o,flush:"post"}):F3,f=()=>{c(),d(),u.value=!1};return zR(f),{isSupported:l,isActive:u,pause(){c(),u.value=!1},resume(){u.value=!0},stop:f}}function gX(e,t,i,r={}){var s,a,n;const{clone:o=!1,passive:l=!1,eventName:h,deep:c=!1,defaultValue:u,shouldEmit:d}=r,f=_h(),p=i||f?.emit||((s=f?.$emit)==null?void 0:s.bind(f))||((n=(a=f?.proxy)==null?void 0:a.$emit)==null?void 0:n.bind(f?.proxy));let m=h;m=m||`update:${t.toString()}`;const g=x=>o?typeof o=="function"?o(x):fX(x):x,v=()=>N5(e[t])?g(e[t]):u,y=x=>{d?d(x)&&p(m,x):p(m,x)};if(l){const x=v(),w=Yt(x);let _=!1;return Ni(()=>e[t],b=>{_||(_=!0,w.value=g(b),tf(()=>_=!1))}),Ni(w,b=>{!_&&(b!==e[t]||c)&&y(b)},{deep:c}),w}else return ci({get(){return v()},set(x){y(x)}})}function vX({top:e,left:t,right:i,bottom:r}){return{x:{min:t,max:i},y:{min:e,max:r}}}function yX(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:r.y,right:r.x}}function xX(e,t){return vX(yX(e.getBoundingClientRect(),t))}const $S={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},U5={};for(const e in $S)U5[e]={isEnabled:t=>$S[e].some(i=>!!t[i])};const eA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Y2=()=>({x:eA(),y:eA()}),tA=()=>({min:0,max:0}),pr=()=>({x:tA(),y:tA()}),bX=typeof window<"u",og={current:null},NR={current:!1};function wX(){if(NR.current=!0,!!bX)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>og.current=e.matches;e.addEventListener("change",t),t()}else og.current=!1}function _X(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function SX(e){return typeof e=="string"||Array.isArray(e)}const AX=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],MX=["initial",...AX];function UR(e){return _X(e.animate)||MX.some(t=>SX(e[t]))}function CX(e){return!!(UR(e)||e.variants)}function sw(e,t){e.indexOf(t)===-1&&e.push(t)}function Bv(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}class aw{constructor(){this.subscriptions=[]}add(t){return sw(this.subscriptions,t),()=>Bv(this.subscriptions,t)}notify(t,i,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,i,r);else for(let a=0;a<s;a++){const n=this.subscriptions[a];n&&n(t,i,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function VR(e,t){return t?e*(1e3/t):0}const iA=30,EX=e=>!isNaN(parseFloat(e));class TX{constructor(t,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var a,n;const o=gs.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();s&&((n=this.events.renderRequest)==null||n.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=gs.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=EX(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new aw);const r=this.events[t].add(i);return t==="change"?()=>{r(),Vi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t,i=!0){!i||!this.passiveEffect?this.updateAndNotify(t,i):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,i,r){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=gs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>iA)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,iA);return VR(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,i;(t=this.dependents)==null||t.clear(),(i=this.events.destroy)==null||i.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zu(e,t){return new TX(e,t)}function PX(e,t,i){for(const r in t){const s=t[r],a=i[r];if(Pr(s))e.addValue(r,s);else if(Pr(a))e.addValue(r,zu(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const n=e.getValue(r);n.liveStyle===!0?n.jump(s):n.hasAnimated||n.set(s)}else{const n=e.getStaticValue(r);e.addValue(r,zu(n!==void 0?n:s,{owner:e}))}}for(const r in i)t[r]===void 0&&e.removeValue(r);return t}function rA(e){const t=[{},{}];return e?.values.forEach((i,r)=>{t[0][r]=i.get(),t[1][r]=i.getVelocity()}),t}function jR(e,t,i,r){if(typeof t=="function"){const[s,a]=rA(r);t=t(i!==void 0?i:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=rA(r);t=t(i!==void 0?i:e.custom,s,a)}return t}function DX(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const oc=e=>e*180/Math.PI,V5=e=>{const t=oc(Math.atan2(e[1],e[0]));return j5(t)},IX={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:V5,rotateZ:V5,skewX:e=>oc(Math.atan(e[1])),skewY:e=>oc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},j5=e=>(e=e%360,e<0&&(e+=360),e),sA=V5,aA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),nA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),OX={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:aA,scaleY:nA,scale:e=>(aA(e)+nA(e))/2,rotateX:e=>j5(oc(Math.atan2(e[6],e[5]))),rotateY:e=>j5(oc(Math.atan2(-e[2],e[0]))),rotateZ:sA,rotate:sA,skewX:e=>oc(Math.atan(e[4])),skewY:e=>oc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function G5(e){return e.includes("scale")?1:0}function H5(e,t){if(!e||e==="none")return G5(t);const i=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(i)r=OX,s=i;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=IX,s=o}if(!s)return G5(t);const a=r[t],n=s[1].split(",").map(LX);return typeof a=="function"?a(n):n[a]}const RX=(e,t)=>{const{transform:i="none"}=getComputedStyle(e);return H5(i,t)};function LX(e){return parseFloat(e.trim())}const e0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],t0=new Set(e0),Zo=(e,t,i)=>i>t?t:i<e?e:i,i0={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ed={...i0,transform:e=>Zo(0,1,e)},Ff={...i0,default:1},oA=e=>e===i0||e===At,zX=new Set(["x","y","z"]),BX=e0.filter(e=>!zX.has(e));function kX(e){const t=[];return BX.forEach(i=>{const r=e.getValue(i);r!==void 0&&(t.push([i,r.get()]),r.set(i.startsWith("scale")?1:0))}),t}const _c={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>H5(t,"x"),y:(e,{transform:t})=>H5(t,"y")};_c.translateX=_c.x;_c.translateY=_c.y;const Sc=new Set;let W5=!1,q5=!1,X5=!1;function GR(){if(q5){const e=Array.from(Sc).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),i=new Map;t.forEach(r=>{const s=kX(r);s.length&&(i.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=i.get(r);s&&s.forEach(([a,n])=>{var o;(o=r.getValue(a))==null||o.set(n)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}q5=!1,W5=!1,Sc.forEach(e=>e.complete(X5)),Sc.clear()}function HR(){Sc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(q5=!0)})}function FX(){X5=!0,HR(),GR(),X5=!1}class nw{constructor(t,i,r,s,a,n=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=r,this.motionValue=s,this.element=a,this.isAsync=n}scheduleResolve(){this.state="scheduled",this.isAsync?(Sc.add(this),W5||(W5=!0,Vi.read(HR),Vi.resolveKeyframes(GR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:r,motionValue:s}=this;if(t[0]===null){const a=s?.get(),n=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&i){const o=r.readValue(i,n);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=n),s&&a===void 0&&s.set(t[0])}DX(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Sc.delete(this)}cancel(){this.state==="scheduled"&&(Sc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const WR=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),qR=e=>/^0[^.\s]+$/u.test(e),U3=e=>Math.round(e*1e5)/1e5,ow=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function NX(e){return e==null}const UX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lw=(e,t)=>i=>!!(typeof i=="string"&&UX.test(i)&&i.startsWith(e)||t&&!NX(i)&&Object.prototype.hasOwnProperty.call(i,t)),XR=(e,t,i)=>r=>{if(typeof r!="string")return r;const[s,a,n,o]=r.match(ow);return{[e]:parseFloat(s),[t]:parseFloat(a),[i]:parseFloat(n),alpha:o!==void 0?parseFloat(o):1}},VX=e=>Zo(0,255,e),j4={...i0,transform:e=>Math.round(VX(e))},lc={test:lw("rgb","red"),parse:XR("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:r=1})=>"rgba("+j4.transform(e)+", "+j4.transform(t)+", "+j4.transform(i)+", "+U3(Ed.transform(r))+")"};function jX(e){let t="",i="",r="",s="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,i+=i,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Y5={test:lw("#"),parse:jX,transform:lc.transform},K2={test:lw("hsl","hue"),parse:XR("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:r=1})=>"hsla("+Math.round(e)+", "+Gn.transform(U3(t))+", "+Gn.transform(U3(i))+", "+U3(Ed.transform(r))+")"},Ar={test:e=>lc.test(e)||Y5.test(e)||K2.test(e),parse:e=>lc.test(e)?lc.parse(e):K2.test(e)?K2.parse(e):Y5.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?lc.transform(e):K2.transform(e),getAnimatableNone:e=>{const t=Ar.parse(e);return t.alpha=0,Ar.transform(t)}},GX=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function HX(e){var t,i;return isNaN(e)&&typeof e=="string"&&(((t=e.match(ow))==null?void 0:t.length)||0)+(((i=e.match(GX))==null?void 0:i.length)||0)>0}const YR="number",KR="color",WX="var",qX="var(",lA="${}",XX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Td(e){const t=e.toString(),i=[],r={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(XX,l=>(Ar.test(l)?(r.color.push(a),s.push(KR),i.push(Ar.parse(l))):l.startsWith(qX)?(r.var.push(a),s.push(WX),i.push(l)):(r.number.push(a),s.push(YR),i.push(parseFloat(l))),++a,lA)).split(lA);return{values:i,split:o,indexes:r,types:s}}function QR(e){return Td(e).values}function ZR(e){const{split:t,types:i}=Td(e),r=t.length;return s=>{let a="";for(let n=0;n<r;n++)if(a+=t[n],s[n]!==void 0){const o=i[n];o===YR?a+=U3(s[n]):o===KR?a+=Ar.transform(s[n]):a+=s[n]}return a}}const YX=e=>typeof e=="number"?0:Ar.test(e)?Ar.getAnimatableNone(e):e;function KX(e){const t=QR(e);return ZR(e)(t.map(YX))}const gh={test:HX,parse:QR,createTransformer:ZR,getAnimatableNone:KX},QX={test:e=>e==="auto",parse:e=>e},JR=e=>t=>t.test(e),$R=[i0,At,Gn,Pl,eX,$q,QX],hA=e=>$R.find(JR(e)),ZX=[...$R,Ar,gh],JX=e=>ZX.find(JR(e)),$X=new Set(["brightness","contrast","saturate","opacity"]);function eY(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=i.match(ow)||[];if(!r)return e;const s=i.replace(r,"");let a=$X.has(t)?1:0;return r!==i&&(a*=100),t+"("+a+s+")"}const tY=/\b([a-z-]*)\(.*?\)/gu,K5={...gh,getAnimatableNone:e=>{const t=e.match(tY);return t?t.map(eY).join(" "):e}},cA={...i0,transform:Math.round},iY={rotate:Pl,rotateX:Pl,rotateY:Pl,rotateZ:Pl,scale:Ff,scaleX:Ff,scaleY:Ff,scaleZ:Ff,skew:Pl,skewX:Pl,skewY:Pl,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:Ed,originX:JS,originY:JS,originZ:At},hw={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,radius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,backgroundPositionX:At,backgroundPositionY:At,...iY,zIndex:cA,fillOpacity:Ed,strokeOpacity:Ed,numOctaves:cA},rY={...hw,color:Ar,backgroundColor:Ar,outlineColor:Ar,fill:Ar,stroke:Ar,borderColor:Ar,borderTopColor:Ar,borderRightColor:Ar,borderBottomColor:Ar,borderLeftColor:Ar,filter:K5,WebkitFilter:K5},eL=e=>rY[e];function tL(e,t){let i=eL(e);return i!==K5&&(i=gh),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const uA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class iL{scrapeMotionValuesFromProps(t,i,r){return{}}constructor({parent:t,props:i,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:n},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=gs.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,Vi.render(this.render,!1,!0))};const{latestValues:l,renderState:h}=n;this.latestValues=l,this.baseTarget={...l},this.initialValues=i.initial?{...l}:{},this.renderState=h,this.parent=t,this.props=i,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=UR(i),this.isVariantNode=CX(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(i,{},this);for(const d in u){const f=u[d];l[d]!==void 0&&Pr(f)&&f.set(l[d],!1)}}mount(t){this.current=t,Rc.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,r)=>this.bindToMotionValue(r,i)),NR.current||wX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:og.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Qo(this.notifyUpdate),Qo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const i=this.features[t];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(t,i){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=t0.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=i.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Vi.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=i.on("renderRequest",this.scheduleRender);let n;window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,t,i)),this.valueSubscriptions.set(t,()=>{s(),a(),n&&n(),i.owner&&i.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in U5){const i=U5[t];if(!i)continue;const{isEnabled:r,Feature:s}=i;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let r=0;r<uA.length;r++){const s=uA[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,n=t[a];n&&(this.propEventSubscriptions[s]=this.on(s,n))}this.prevMotionValues=PX(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){const r=this.values.get(t);i!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,i),this.values.set(t,i),this.latestValues[t]=i.get())}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&i!==void 0&&(r=zu(i===null?void 0:i,{owner:this}),this.addValue(t,r)),r}readValue(t,i){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(WR(r)||qR(r))?r=parseFloat(r):!JX(r)&&gh.test(i)&&(r=tL(t,i)),this.setBaseTarget(t,Pr(r)?r.get():r)),Pr(r)?r.get():r}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var i;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const n=jR(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);n&&(s=n[t])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Pr(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new aw),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}}const rL=new Set(["width","height","top","left","right","bottom",...e0]);let cw=()=>{};const sY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function aY(e){const t=sY.exec(e);if(!t)return[,];const[,i,r,s]=t;return[`--${i??r}`,s]}function sL(e,t,i=1){const[r,s]=aY(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const n=a.trim();return WR(n)?parseFloat(n):n}return tw(s)?sL(s,t,i+1):s}function nY(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||qR(e):!0}const oY=new Set(["auto","none","0"]);function lY(e,t,i){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!oY.has(a)&&Td(a).values.length&&(s=e[r]),r++}if(s&&i)for(const a of t)e[a]=tL(i,s)}class hY extends nw{constructor(t,i,r,s,a){super(t,i,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:r}=this;if(!i||!i.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let h=t[l];if(typeof h=="string"&&(h=h.trim(),tw(h))){const c=sL(h,i.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!rL.has(r)||t.length!==2)return;const[s,a]=t,n=hA(s),o=hA(a);if(n!==o)if(oA(n)&&oA(o))for(let l=0;l<t.length;l++){const h=t[l];typeof h=="string"&&(t[l]=parseFloat(h))}else _c[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||nY(t[s]))&&r.push(s);r.length&&lY(t,r,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_c[r](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const s=i[i.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var t;const{element:i,name:r,unresolvedKeyframes:s}=this;if(!i||!i.current)return;const a=i.getValue(r);a&&a.jump(this.measuredOrigin,!1);const n=s.length-1,o=s[n];s[n]=_c[r](i.measureViewportBox(),window.getComputedStyle(i.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(t=this.removedTransforms)!=null&&t.length&&this.removedTransforms.forEach(([l,h])=>{i.getValue(l).set(h)}),this.resolveNoneKeyframes()}}class aL extends iL{constructor(){super(...arguments),this.KeyframeResolver=hY}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){return t.style?t.style[i]:void 0}removeValueFromRenderState(t,{vars:i,style:r}){delete i[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Pr(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}const nL=(e,t)=>t&&typeof e=="number"?t.transform(e):e,cY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uY=e0.length;function dY(e,t,i){let r="",s=!0;for(let a=0;a<uY;a++){const n=e0[a],o=e[n];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(n.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||i){const h=nL(o,hw[n]);if(!l){s=!1;const c=cY[n]||n;r+=`${c}(${h}) `}i&&(t[n]=h)}}return r=r.trim(),i?r=i(t,s?"":r):s&&(r="none"),r}function oL(e,t,i){const{style:r,vars:s,transformOrigin:a}=e;let n=!1,o=!1;for(const l in t){const h=t[l];if(t0.has(l)){n=!0;continue}else if(ew(l)){s[l]=h;continue}else{const c=nL(h,hw[l]);l.startsWith("origin")?(o=!0,a[l]=c):r[l]=c}}if(t.transform||(n||i?r.transform=dY(t,e.transform,i):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:h="50%",originZ:c=0}=a;r.transformOrigin=`${l} ${h} ${c}`}}function lL(e,{style:t,vars:i},r,s){const a=e.style;let n;for(n in t)a[n]=t[n];s?.applyProjectionStyles(a,r);for(n in i)a.setProperty(n,i[n])}function fY(e,{layout:t,layoutId:i}){return t0.has(e)||e.startsWith("origin")||(t||i!==void 0)&&(!!Cd[e]||e==="opacity")}function hL(e,t,i){var r;const{style:s}=e,a={};for(const n in s)(Pr(s[n])||t.style&&Pr(t.style[n])||fY(n,e)||((r=i?.getValue(n))==null?void 0:r.liveStyle)!==void 0)&&(a[n]=s[n]);return a}function pY(e){return window.getComputedStyle(e)}class cL extends aL{constructor(){super(...arguments),this.type="html",this.renderInstance=lL}readValueFromInstance(t,i){var r;if(t0.has(i))return(r=this.projection)!=null&&r.isProjecting?G5(i):RX(t,i);{const s=pY(t),a=(ew(i)?s.getPropertyValue(i):s[i])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:i}){return xX(t,i)}build(t,i,r){oL(t,i,r.transformTemplate)}scrapeMotionValuesFromProps(t,i,r){return hL(t,i,r)}}const uw=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mY={offset:"stroke-dashoffset",array:"stroke-dasharray"},gY={offset:"strokeDashoffset",array:"strokeDasharray"};function vY(e,t,i=1,r=0,s=!0){e.pathLength=1;const a=s?mY:gY;e[a.offset]=At.transform(-r);const n=At.transform(t),o=At.transform(i);e[a.array]=`${n} ${o}`}function yY(e,{attrX:t,attrY:i,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:n=0,...o},l,h,c){if(oL(e,o,h),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:u,style:d}=e;u.transform&&(d.transform=u.transform,delete u.transform),(d.transform||u.transformOrigin)&&(d.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),d.transform&&(d.transformBox=c?.transformBox??"fill-box",delete u.transformBox),t!==void 0&&(u.x=t),i!==void 0&&(u.y=i),r!==void 0&&(u.scale=r),s!==void 0&&vY(u,s,a,n,!1)}const uL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),xY=e=>typeof e=="string"&&e.toLowerCase()==="svg";function bY(e,t,i,r){lL(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(uL.has(s)?s:uw(s),t.attrs[s])}function wY(e,t,i){const r=hL(e,t,i);for(const s in e)if(Pr(e[s])||Pr(t[s])){const a=e0.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}class dL extends aL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pr}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(t0.has(i)){const r=eL(i);return r&&r.default||0}return i=uL.has(i)?i:uw(i),t.getAttribute(i)}scrapeMotionValuesFromProps(t,i,r){return wY(t,i,r)}build(t,i,r){yY(t,i,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,i,r,s){bY(t,i,r,s)}mount(t){this.isSVGTag=xY(t.tagName),super.mount(t)}}function _Y(e,t){return RR(e)?new dL(t):new cL(t)}function dw(e){return typeof e=="object"&&!Array.isArray(e)}function fw(e,t,i){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=i?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function fL(e,t,i,r){return typeof e=="string"&&dw(t)?fw(e,i,r):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function SY(e,t,i){return e*(t+1)}function dA(e,t,i,r){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?i:t.startsWith("<")?Math.max(0,i+parseFloat(t.slice(1))):r.get(t)??e}const Yi=(e,t,i)=>e+(t-e)*i,AY=(e,t,i)=>{const r=t-e;return((i-e)%r+r)%r+e},pL=e=>Array.isArray(e)&&typeof e[0]!="number";function mL(e,t){return pL(e)?e[AY(0,e.length,t)]:e}function MY(e,t,i){for(let r=0;r<e.length;r++){const s=e[r];s.at>t&&s.at<i&&(Bv(e,s),r--)}}function CY(e,t,i,r,s,a){MY(e,s,a);for(let n=0;n<t.length;n++)e.push({value:t[n],at:Yi(s,a,r[n]),easing:mL(i,n)})}function EY(e,t){for(let i=0;i<e.length;i++)e[i]=e[i]/(t+1)}function TY(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const Bu=(e,t,i)=>{const r=t-e;return r===0?1:(i-e)/r};function gL(e,t){const i=e[e.length-1];for(let r=1;r<=t;r++){const s=Bu(0,t,r);e.push(Yi(i,1,s))}}function vL(e){const t=[0];return gL(t,e.length-1),t}const lg=2e4;function pw(e){let t=0;const i=50;let r=e.next(t);for(;!r.done&&t<lg;)t+=i,r=e.next(t);return t>=lg?1/0:t}function yL(e,t=100,i){const r=i({...e,keyframes:[0,t]}),s=Math.min(pw(r),lg);return{type:"keyframes",ease:a=>r.next(s*a).value/t,duration:jn(s)}}function mw(e){return typeof e=="function"&&"applyToOptions"in e}const PY="easeInOut";function DY(e,{defaultTransition:t={},...i}={},r,s){const a=t.duration||.3,n=new Map,o=new Map,l={},h=new Map;let c=0,u=0,d=0;for(let f=0;f<e.length;f++){const p=e[f];if(typeof p=="string"){h.set(p,u);continue}else if(!Array.isArray(p)){h.set(p.name,dA(u,p.at,c,h));continue}let[m,g,v={}]=p;v.at!==void 0&&(u=dA(u,v.at,c,h));let y=0;const x=(w,_,b,M=0,S=0)=>{const A=IY(w),{delay:C=0,times:T=vL(A),type:D="keyframes",repeat:R,repeatType:O,repeatDelay:j=0,...X}=_;let{ease:N=t.ease||"easeOut",duration:k}=_;const ne=typeof C=="function"?C(M,S):C,te=A.length,Q=mw(D)?D:s?.[D||"keyframes"];if(te<=2&&Q){let le=100;if(te===2&&LY(A)){const J=A[1]-A[0];le=Math.abs(J)}const $={...X};k!==void 0&&($.duration=Ka(k));const K=yL($,le,Q);N=K.ease,k=K.duration}k??(k=a);const Z=u+ne;T.length===1&&T[0]===0&&(T[1]=1);const de=T.length-A.length;if(de>0&&gL(T,de),A.length===1&&A.unshift(null),R){k=SY(k,R);const le=[...A],$=[...T];N=Array.isArray(N)?[...N]:[N];const K=[...N];for(let J=0;J<R;J++){A.push(...le);for(let se=0;se<le.length;se++)T.push($[se]+(J+1)),N.push(se===0?"linear":mL(K,se-1))}EY(T,R)}const ee=Z+k;CY(b,A,N,T,Z,ee),y=Math.max(ne+k,y),d=Math.max(ee,d)};if(Pr(m)){const w=fA(m,o);x(g,v,pA("default",w))}else{const w=fL(m,g,r,l),_=w.length;for(let b=0;b<_;b++){g=g,v=v;const M=w[b],S=fA(M,o);for(const A in g)x(g[A],OY(v,A),pA(A,S),b,_)}}c=u,u+=y}return o.forEach((f,p)=>{for(const m in f){const g=f[m];g.sort(TY);const v=[],y=[],x=[];for(let _=0;_<g.length;_++){const{at:b,value:M,easing:S}=g[_];v.push(M),y.push(Bu(0,d,b)),x.push(S||"easeOut")}y[0]!==0&&(y.unshift(0),v.unshift(v[0]),x.unshift(PY)),y[y.length-1]!==1&&(y.push(1),v.push(null)),n.has(p)||n.set(p,{keyframes:{},transition:{}});const w=n.get(p);w.keyframes[m]=v,w.transition[m]={...t,duration:d,ease:x,times:y,...i}}}),n}function fA(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function pA(e,t){return t[e]||(t[e]=[]),t[e]}function IY(e){return Array.isArray(e)?e:[e]}function OY(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const RY=e=>typeof e=="number",LY=e=>e.every(RY),zY=e=>Array.isArray(e);function BY(e,t,i){const r=e.getProps();return jR(r,t,r.custom,e)}function kY(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,zu(i))}function FY(e){return zY(e)?e[e.length-1]||0:e}function NY(e,t){const i=BY(e,t);let{transitionEnd:r={},transition:s={},...a}=i||{};a={...a,...r};for(const n in a){const o=FY(a[n]);kY(e,n,o)}}function UY(e){return!!(Pr(e)&&e.add)}function VY(e,t){const i=e.getValue("willChange");if(UY(i))return i.add(t);if(!i&&Ko.WillChange){const r=new Ko.WillChange("auto");e.addValue("willChange",r),r.add(t)}}const jY="framerAppearId",GY="data-"+uw(jY);function xL(e){return e.props[GY]}const HY=e=>e!==null;function WY(e,{repeat:t,repeatType:i="loop"},r){const s=e.filter(HY),a=t&&i!=="loop"&&t%2===1?0:s.length-1;return s[a]}const qY={type:"spring",stiffness:500,damping:25,restSpeed:10},XY=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),YY={type:"keyframes",duration:.8},KY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},QY=(e,{keyframes:t})=>t.length>2?YY:t0.has(e)?e.startsWith("scale")?XY(t[1]):qY:KY;function ZY({when:e,delay:t,delayChildren:i,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:n,repeatDelay:o,from:l,elapsed:h,...c}){return!!Object.keys(c).length}function gw(e,t){return e?.[t]??e?.default??e}function G4(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function JY({hue:e,saturation:t,lightness:i,alpha:r}){e/=360,t/=100,i/=100;let s=0,a=0,n=0;if(!t)s=a=n=i;else{const o=i<.5?i*(1+t):i+t-i*t,l=2*i-o;s=G4(l,o,e+1/3),a=G4(l,o,e),n=G4(l,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(n*255),alpha:r}}function hg(e,t){return i=>i>0?t:e}const H4=(e,t,i)=>{const r=e*e,s=i*(t*t-r)+r;return s<0?0:Math.sqrt(s)},$Y=[Y5,lc,K2],eK=e=>$Y.find(t=>t.test(e));function mA(e){const t=eK(e);if(!t)return!1;let i=t.parse(e);return t===K2&&(i=JY(i)),i}const gA=(e,t)=>{const i=mA(e),r=mA(t);if(!i||!r)return hg(e,t);const s={...i};return a=>(s.red=H4(i.red,r.red,a),s.green=H4(i.green,r.green,a),s.blue=H4(i.blue,r.blue,a),s.alpha=Yi(i.alpha,r.alpha,a),lc.transform(s))},Q5=new Set(["none","hidden"]);function tK(e,t){return Q5.has(e)?i=>i<=0?e:t:i=>i>=1?t:e}const iK=(e,t)=>i=>t(e(i)),cf=(...e)=>e.reduce(iK);function rK(e,t){return i=>Yi(e,t,i)}function vw(e){return typeof e=="number"?rK:typeof e=="string"?tw(e)?hg:Ar.test(e)?gA:nK:Array.isArray(e)?bL:typeof e=="object"?Ar.test(e)?gA:sK:hg}function bL(e,t){const i=[...e],r=i.length,s=e.map((a,n)=>vw(a)(a,t[n]));return a=>{for(let n=0;n<r;n++)i[n]=s[n](a);return i}}function sK(e,t){const i={...e,...t},r={};for(const s in i)e[s]!==void 0&&t[s]!==void 0&&(r[s]=vw(e[s])(e[s],t[s]));return s=>{for(const a in r)i[a]=r[a](s);return i}}function aK(e,t){const i=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],n=e.indexes[a][r[a]],o=e.values[n]??0;i[s]=o,r[a]++}return i}const nK=(e,t)=>{const i=gh.createTransformer(t),r=Td(e),s=Td(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Q5.has(e)&&!s.values.length||Q5.has(t)&&!r.values.length?tK(e,t):cf(bL(aK(r,s),s.values),i):hg(e,t)};function wL(e,t,i){return typeof e=="number"&&typeof t=="number"&&typeof i=="number"?Yi(e,t,i):vw(e)(e,t)}const oK=e=>{const t=({timestamp:i})=>e(i);return{start:(i=!0)=>Vi.update(t,i),stop:()=>Qo(t),now:()=>f1.isProcessing?f1.timestamp:gs.now()}},_L=(e,t,i=10)=>{let r="";const s=Math.max(Math.round(t/i),2);for(let a=0;a<s;a++)r+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},lK=5;function SL(e,t,i){const r=Math.max(t-lK,0);return VR(i-e(r),t-r)}const rr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},W4=.001;function hK({duration:e=rr.duration,bounce:t=rr.bounce,velocity:i=rr.velocity,mass:r=rr.mass}){let s,a,n=1-t;n=Zo(rr.minDamping,rr.maxDamping,n),e=Zo(rr.minDuration,rr.maxDuration,jn(e)),n<1?(s=h=>{const c=h*n,u=c*e,d=c-i,f=Z5(h,n),p=Math.exp(-u);return W4-d/f*p},a=h=>{const u=h*n*e,d=u*i+i,f=Math.pow(n,2)*Math.pow(h,2)*e,p=Math.exp(-u),m=Z5(Math.pow(h,2),n);return(-s(h)+W4>0?-1:1)*((d-f)*p)/m}):(s=h=>{const c=Math.exp(-h*e),u=(h-i)*e+1;return-W4+c*u},a=h=>{const c=Math.exp(-h*e),u=(i-h)*(e*e);return c*u});const o=5/e,l=uK(s,a,o);if(e=Ka(e),isNaN(l))return{stiffness:rr.stiffness,damping:rr.damping,duration:e};{const h=Math.pow(l,2)*r;return{stiffness:h,damping:n*2*Math.sqrt(r*h),duration:e}}}const cK=12;function uK(e,t,i){let r=i;for(let s=1;s<cK;s++)r=r-e(r)/t(r);return r}function Z5(e,t){return e*Math.sqrt(1-t*t)}const dK=["duration","bounce"],fK=["stiffness","damping","mass"];function vA(e,t){return t.some(i=>e[i]!==void 0)}function pK(e){let t={velocity:rr.velocity,stiffness:rr.stiffness,damping:rr.damping,mass:rr.mass,isResolvedFromDuration:!1,...e};if(!vA(e,fK)&&vA(e,dK))if(e.visualDuration){const i=e.visualDuration,r=2*Math.PI/(i*1.2),s=r*r,a=2*Zo(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:rr.mass,stiffness:s,damping:a}}else{const i=hK(e);t={...t,...i,mass:rr.mass},t.isResolvedFromDuration=!0}return t}function Pd(e=rr.visualDuration,t=rr.bounce){const i=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=i;const a=i.keyframes[0],n=i.keyframes[i.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:h,mass:c,duration:u,velocity:d,isResolvedFromDuration:f}=pK({...i,velocity:-jn(i.velocity||0)}),p=d||0,m=h/(2*Math.sqrt(l*c)),g=n-a,v=jn(Math.sqrt(l/c)),y=Math.abs(g)<5;r||(r=y?rr.restSpeed.granular:rr.restSpeed.default),s||(s=y?rr.restDelta.granular:rr.restDelta.default);let x;if(m<1){const _=Z5(v,m);x=b=>{const M=Math.exp(-m*v*b);return n-M*((p+m*v*g)/_*Math.sin(_*b)+g*Math.cos(_*b))}}else if(m===1)x=_=>n-Math.exp(-v*_)*(g+(p+v*g)*_);else{const _=v*Math.sqrt(m*m-1);x=b=>{const M=Math.exp(-m*v*b),S=Math.min(_*b,300);return n-M*((p+m*v*g)*Math.sinh(S)+_*g*Math.cosh(S))/_}}const w={calculatedDuration:f&&u||null,next:_=>{const b=x(_);if(f)o.done=_>=u;else{let M=_===0?p:0;m<1&&(M=_===0?Ka(p):SL(x,_,b));const S=Math.abs(M)<=r,A=Math.abs(n-b)<=s;o.done=S&&A}return o.value=o.done?n:b,o},toString:()=>{const _=Math.min(pw(w),lg),b=_L(M=>w.next(_*M).value,_,30);return _+"ms "+b},toTransition:()=>{}};return w}Pd.applyToOptions=e=>{const t=yL(e,100,Pd);return e.ease=t.ease,e.duration=Ka(t.duration),e.type="keyframes",e};function J5({keyframes:e,velocity:t=0,power:i=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:n,min:o,max:l,restDelta:h=.5,restSpeed:c}){const u=e[0],d={done:!1,value:u},f=S=>o!==void 0&&S<o||l!==void 0&&S>l,p=S=>o===void 0?l:l===void 0||Math.abs(o-S)<Math.abs(l-S)?o:l;let m=i*t;const g=u+m,v=n===void 0?g:n(g);v!==g&&(m=v-u);const y=S=>-m*Math.exp(-S/r),x=S=>v+y(S),w=S=>{const A=y(S),C=x(S);d.done=Math.abs(A)<=h,d.value=d.done?v:C};let _,b;const M=S=>{f(d.value)&&(_=S,b=Pd({keyframes:[d.value,p(d.value)],velocity:SL(x,S,d.value),damping:s,stiffness:a,restDelta:h,restSpeed:c}))};return M(0),{calculatedDuration:null,next:S=>{let A=!1;return!b&&_===void 0&&(A=!0,w(S),M(S)),_!==void 0&&S>=_?b.next(S-_):(!A&&w(S),d)}}}function mK(e,t,i){const r=[],s=i||Ko.mix||wL,a=e.length-1;for(let n=0;n<a;n++){let o=s(e[n],e[n+1]);if(t){const l=Array.isArray(t)?t[n]||Ss:t;o=cf(l,o)}r.push(o)}return r}function gK(e,t,{clamp:i=!0,ease:r,mixer:s}={}){const a=e.length;if(cw(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const n=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=mK(t,r,s),l=o.length,h=c=>{if(n&&c<e[0])return t[0];let u=0;if(l>1)for(;u<e.length-2&&!(c<e[u+1]);u++);const d=Bu(e[u],e[u+1],c);return o[u](d)};return i?c=>h(Zo(e[0],e[a-1],c)):h}function vK(e,t){return e.map(i=>i*t)}const AL=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,yK=1e-7,xK=12;function bK(e,t,i,r,s){let a,n,o=0;do n=t+(i-t)/2,a=AL(n,r,s)-e,a>0?i=n:t=n;while(Math.abs(a)>yK&&++o<xK);return n}function uf(e,t,i,r){if(e===t&&i===r)return Ss;const s=a=>bK(a,0,1,e,i);return a=>a===0||a===1?a:AL(s(a),t,r)}const wK=uf(.42,0,1,1),_K=uf(0,0,.58,1),ML=uf(.42,0,.58,1),CL=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,EL=e=>t=>1-e(1-t),TL=uf(.33,1.53,.69,.99),yw=EL(TL),PL=CL(yw),DL=e=>(e*=2)<1?.5*yw(e):.5*(2-Math.pow(2,-10*(e-1))),xw=e=>1-Math.sin(Math.acos(e)),IL=EL(xw),OL=CL(xw),RL=e=>Array.isArray(e)&&typeof e[0]=="number",SK={linear:Ss,easeIn:wK,easeInOut:ML,easeOut:_K,circIn:xw,circInOut:OL,circOut:IL,backIn:yw,backInOut:PL,backOut:TL,anticipate:DL},AK=e=>typeof e=="string",yA=e=>{if(RL(e)){cw(e.length===4);const[t,i,r,s]=e;return uf(t,i,r,s)}else if(AK(e))return SK[e];return e};function MK(e,t){return e.map(()=>t||ML).splice(0,e.length-1)}function V3({duration:e=300,keyframes:t,times:i,ease:r="easeInOut"}){const s=pL(r)?r.map(yA):yA(r),a={done:!1,value:t[0]},n=vK(i&&i.length===t.length?i:vL(t),e),o=gK(n,t,{ease:Array.isArray(s)?s:MK(t,s)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const CK=e=>e!==null;function bw(e,{repeat:t,repeatType:i="loop"},r,s=1){const a=e.filter(CK),o=s<0||t&&i!=="loop"&&t%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const EK={decay:J5,inertia:J5,tween:V3,keyframes:V3,spring:Pd};function LL(e){typeof e.type=="string"&&(e.type=EK[e.type])}class ww{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,i){return this.finished.then(t,i)}}const TK=e=>e/100;class _w extends ww{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,r;const{motionValue:s}=this.options;s&&s.updatedAt!==gs.now()&&this.tick(gs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(i=this.options).onStop)==null||r.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;LL(t);const{type:i=V3,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:n=0}=t;let{keyframes:o}=t;const l=i||V3;l!==V3&&typeof o[0]!="number"&&(this.mixKeyframes=cf(TK,wL(o[0],o[1])),o=[0,100]);const h=l({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-n})),h.calculatedDuration===null&&(h.calculatedDuration=pw(h));const{calculatedDuration:c}=h;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(t){const i=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(t,i=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:n,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:f,type:p,onUpdate:m,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),i?this.currentTime=t:this.updateTime(t);const v=this.currentTime-h*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let x=this.currentTime,w=r;if(u){const S=Math.min(this.currentTime,s)/o;let A=Math.floor(S),C=S%1;!C&&S>=1&&(C=1),C===1&&A--,A=Math.min(A,u+1),!!(A%2)&&(d==="reverse"?(C=1-C,f&&(C-=f/o)):d==="mirror"&&(w=n)),x=Zo(0,1,C)*o}const _=y?{done:!1,value:c[0]}:w.next(x);a&&(_.value=a(_.value));let{done:b}=_;!y&&l!==null&&(b=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return M&&p!==J5&&(_.value=bw(c,this.options,g,this.speed)),m&&m(_.value),M&&this.finish(),_}then(t,i){return this.finished.then(t,i)}get duration(){return jn(this.calculatedDuration)}get time(){return jn(this.currentTime)}set time(t){var i;t=Ka(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(i=this.driver)==null||i.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(gs.now());const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=jn(this.currentTime))}play(){var t,i;if(this.isStopped)return;const{driver:r=oK,startTime:s}=this.options;this.driver||(this.driver=r(n=>this.tick(n))),(i=(t=this.options).onPlay)==null||i.call(t);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=s??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(gs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,i;this.notifyFinished(),this.teardown(),this.state="finished",(i=(t=this.options).onComplete)==null||i.call(t)}cancel(){var t,i;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(i=(t=this.options).onCancel)==null||i.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var i;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(i=this.driver)==null||i.stop(),t.observe(this)}}const PK=e=>e.startsWith("--");function DK(e,t,i){PK(t)?e.style.setProperty(t,i):e.style[t]=i}function Sw(e){let t;return()=>(t===void 0&&(t=e()),t)}const IK=Sw(()=>window.ScrollTimeline!==void 0),OK={};function RK(e,t){const i=Sw(e);return()=>OK[t]??i()}const zL=RK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),d3=([e,t,i,r])=>`cubic-bezier(${e}, ${t}, ${i}, ${r})`,xA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:d3([0,.65,.55,1]),circOut:d3([.55,0,1,.45]),backIn:d3([.31,.01,.66,-.59]),backOut:d3([.33,1.53,.69,.99])};function BL(e,t){if(e)return typeof e=="function"?zL()?_L(e,t):"ease-out":RL(e)?d3(e):Array.isArray(e)?e.map(i=>BL(i,t)||xA.easeOut):xA[e]}function LK(e,t,i,{delay:r=0,duration:s=300,repeat:a=0,repeatType:n="loop",ease:o="easeOut",times:l}={},h=void 0){const c={[t]:i};l&&(c.offset=l);const u=BL(o,s);Array.isArray(u)&&(c.easing=u);const d={delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:n==="reverse"?"alternate":"normal"};return h&&(d.pseudoElement=h),e.animate(c,d)}function zK({type:e,...t}){return mw(e)&&zL()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class BK extends ww{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:i,name:r,keyframes:s,pseudoElement:a,allowFlatten:n=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!a,this.allowFlatten=n,this.options=t,cw(typeof t.type!="string");const h=zK(t);this.animation=LK(i,r,s,h,a),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const c=bw(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(c):DK(i,r,c),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,i;(i=(t=this.animation).finish)==null||i.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,i;this.isPseudoElement||(i=(t=this.animation).commitStyles)==null||i.call(t)}get duration(){var t,i;const r=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return jn(Number(r))}get time(){return jn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ka(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:i}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&IK()?(this.animation.timeline=t,Ss):i(this)}}const kL={anticipate:DL,backInOut:PL,circInOut:OL};function kK(e){return e in kL}function FK(e){typeof e.ease=="string"&&kK(e.ease)&&(e.ease=kL[e.ease])}const bA=10;class NK extends BK{constructor(t){FK(t),LL(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:i,onUpdate:r,onComplete:s,element:a,...n}=this.options;if(!i)return;if(t!==void 0){i.set(t);return}const o=new _w({...n,autoplay:!1}),l=Ka(this.finishedTime??this.time);i.setWithVelocity(o.sample(l-bA).value,o.sample(l).value,bA),o.stop()}}const wA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(gh.test(e)||e==="0")&&!e.startsWith("url("));function UK(e){const t=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}function VK(e,t,i,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],n=wA(s,t),o=wA(a,t);return!n||!o?!1:UK(e)||(i==="spring"||mw(i))&&r}function FL(e){return typeof e=="object"&&e!==null}function NL(e){return FL(e)&&"offsetHeight"in e}const jK=new Set(["opacity","clipPath","filter","transform"]),GK=Sw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function HK(e){var t;const{motionValue:i,name:r,repeatDelay:s,repeatType:a,damping:n,type:o}=e;if(!NL((t=i?.owner)==null?void 0:t.current))return!1;const{onUpdate:l,transformTemplate:h}=i.owner.getProps();return GK()&&r&&jK.has(r)&&(r!=="transform"||!h)&&!l&&!s&&a!=="mirror"&&n!==0&&o!=="inertia"}const WK=40;class qK extends ww{constructor({autoplay:t=!0,delay:i=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:n="loop",keyframes:o,name:l,motionValue:h,element:c,...u}){var d;super(),this.stop=()=>{var m,g;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(g=this.keyframeResolver)==null||g.cancel()},this.createdAt=gs.now();const f={autoplay:t,delay:i,type:r,repeat:s,repeatDelay:a,repeatType:n,name:l,motionValue:h,element:c,...u},p=c?.KeyframeResolver||nw;this.keyframeResolver=new p(o,(m,g,v)=>this.onKeyframesResolved(m,g,f,!v),l,h,c),(d=this.keyframeResolver)==null||d.scheduleResolve()}onKeyframesResolved(t,i,r,s){this.keyframeResolver=void 0;const{name:a,type:n,velocity:o,delay:l,isHandoff:h,onUpdate:c}=r;this.resolvedAt=gs.now(),VK(t,a,n,o)||((Ko.instantAnimations||!l)&&c?.(bw(t,r,i)),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const d={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>WK?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...r,keyframes:t},f=!h&&HK(d)?new NK({...d,element:d.motionValue.owner.current}):new _w(d);f.finished.then(()=>this.notifyFinished()).catch(Ss),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(t,i){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),FX()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Aw=(e,t,i,r={},s,a)=>n=>{const o=gw(r,e)||{},l=o.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Ka(l);const c={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-h,onUpdate:d=>{t.set(d),o.onUpdate&&o.onUpdate(d)},onComplete:()=>{n(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};ZY(o)||Object.assign(c,QY(e,c)),c.duration&&(c.duration=Ka(c.duration)),c.repeatDelay&&(c.repeatDelay=Ka(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let u=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(u=!0)),(Ko.instantAnimations||Ko.skipAnimations)&&(u=!0,c.duration=0,c.delay=0),c.allowFlatten=!o.type&&!o.ease,u&&!a&&t.get()!==void 0){const d=WY(c.keyframes,o);if(d!==void 0){Vi.update(()=>{c.onUpdate(d),c.onComplete()});return}}return o.isSync?new _w(c):new qK(c)};function XK({protectedKeys:e,needsAnimating:t},i){const r=e.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,r}function YK(e,t,{delay:i=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:n,...o}=t;r&&(a=r);const l=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const c in o){const u=e.getValue(c,e.latestValues[c]??null),d=o[c];if(d===void 0||h&&XK(h,c))continue;const f={delay:i,...gw(a||{},c)},p=u.get();if(p!==void 0&&!u.isAnimating&&!Array.isArray(d)&&d===p&&!f.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const v=xL(e);if(v){const y=window.MotionHandoffAnimation(v,c,Vi);y!==null&&(f.startTime=y,m=!0)}}VY(e,c),u.start(Aw(c,u,d,e.shouldReduceMotion&&rL.has(c)?{type:!1}:f,e,m));const g=u.animation;g&&l.push(g)}return n&&Promise.all(l).then(()=>{Vi.update(()=>{n&&NY(e,n)})}),l}function KK(e,t){return e in t}class QK extends iL{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,i){if(KK(i,t)){const r=t[i];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(t,i){delete i.output[t]}measureInstanceViewportBox(){return pr()}build(t,i){Object.assign(t.output,i)}renderInstance(t,{output:i}){Object.assign(t,i)}sortInstanceNodePosition(){return 0}}function Mw(e){return FL(e)&&"ownerSVGElement"in e}function UL(e){return Mw(e)&&e.tagName==="svg"}function ZK(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},i=Mw(e)&&!UL(e)?new dL(t):new cL(t);i.mount(e),Rc.set(e,i)}function JK(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},i=new QK(t);i.mount(e),Rc.set(e,i)}function VL(e,t,i){const r=Pr(e)?e:zu(e);return r.start(Aw("",r,t,i)),r.animation}function $K(e,t){return Pr(e)||typeof e=="number"||typeof e=="string"&&!dw(t)}function jL(e,t,i,r){const s=[];if($K(e,t))s.push(VL(e,dw(t)&&t.default||t,i&&(i.default||i)));else{const a=fL(e,t,r),n=a.length;for(let o=0;o<n;o++){const l=a[o],h=l instanceof Element?ZK:JK;Rc.has(l)||h(l);const c=Rc.get(l),u={...i};"delay"in u&&typeof u.delay=="function"&&(u.delay=u.delay(o,n)),s.push(...YK(c,{...t,transition:u},{}))}}return s}function eQ(e,t,i){const r=[];return DY(e,t,i,{spring:Pd}).forEach(({keyframes:a,transition:n},o)=>{r.push(...jL(o,a,n))}),r}class tQ{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,i){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=i}attachTimeline(t){const i=this.animations.map(r=>r.attachTimeline(t));return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let i=0;i<this.animations.length;i++)t=Math.max(t,this.animations[i].duration);return t}runAll(t){this.animations.forEach(i=>i[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class iQ extends tQ{then(t,i){return this.finished.finally(t).then(()=>{})}}function rQ(e){return Array.isArray(e)&&e.some(Array.isArray)}function sQ(e){function t(i,r,s){let a=[];return rQ(i)?a=eQ(i,r,e):a=jL(i,r,s,e),new iQ(a)}return t}const aQ=sQ(),nQ=["initial","animate","whileInView","whileHover","whilePress","whileDrag","whileFocus","exit"];class oQ extends nl{constructor(t){var i;super(t),this.animateUpdates=({controlActiveState:r,directAnimate:s,directTransition:a,controlDelay:n=0,isFallback:o,isExit:l}={})=>{const{reducedMotion:h}=this.state.options.motionConfig;this.state.visualElement.shouldReduceMotion=h==="always"||h==="user"&&!!og.current;const c=this.state.target;this.state.target={...this.state.baseTarget};let u={};u=this.resolveStateAnimation({controlActiveState:r,directAnimate:s,directTransition:a});const d=this.createAnimationFactories(c,u,n),{getChildAnimations:f}=this.setupChildAnimations(u,this.state.activeStates,o);return this.executeAnimations({factories:d,getChildAnimations:f,transition:u,controlActiveState:r,isExit:l})},this.state.visualElement=_Y(this.state.options.as,{presenceContext:null,parent:(i=this.state.parent)==null?void 0:i.visualElement,props:{...this.state.options,whileTap:this.state.options.whilePress},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{...this.state.baseTarget}},reducedMotionConfig:this.state.options.motionConfig.reducedMotion}),this.state.animateUpdates=this.animateUpdates,this.state.isMounted()&&this.state.startAnimation()}updateAnimationControlsSubscription(){const{animate:t}=this.state.options;qS(t)&&(this.unmountControls=t.subscribe(this.state))}executeAnimations({factories:t,getChildAnimations:i,transition:r,controlActiveState:s,isExit:a=!1}){const n=()=>Promise.all(t.map(u=>u()).filter(Boolean)),o={...this.state.target},l=this.state.element,h=u=>{var d,f;l.dispatchEvent(YS("motionstart",o)),(f=(d=this.state.options).onAnimationStart)==null||f.call(d,o),u.then(()=>{var p,m;l.dispatchEvent(YS("motioncomplete",o,a)),(m=(p=this.state.options).onAnimationComplete)==null||m.call(p,o)}).catch(Ss)},c=()=>{const u=r?.when?(r.when==="beforeChildren"?n():i()).then(()=>r.when==="beforeChildren"?i():n()):Promise.all([n(),i()]);return h(u),u};return s?c:c()}setupChildAnimations(t,i,r){var s;const a=this.state.visualElement;if(!((s=a.variantChildren)!=null&&s.size)||!i)return{getChildAnimations:()=>Promise.resolve()};const{staggerChildren:n=0,staggerDirection:o=1,delayChildren:l=0}=t||{},h=a.variantChildren.size,c=(h-1)*n,u=typeof l=="function",d=u?p=>l(p,h):o===1?(p=0)=>p*n:(p=0)=>c-p*n,f=Array.from(a.variantChildren).map((p,m)=>p.state.animateUpdates({controlActiveState:i,controlDelay:(u?0:l)+d(m)}));return{getChildAnimations:()=>Promise.all(f.map(p=>p()))}}createAnimationFactories(t,i,r){const s=[];return Object.keys(this.state.target).forEach(a=>{var n;if(!Lq(t[a],this.state.target[a]))return;(n=this.state.baseTarget)[a]??(n[a]=tX.get(this.state.element,a));const o=this.state.target[a]==="none"&&N5(ZS[a])?ZS[a]:this.state.target[a];s.push(()=>{var l;return aQ(this.state.element,{[a]:o},{...i?.[a]||i,delay:(((l=i?.[a])==null?void 0:l.delay)||i?.delay||0)+r})})}),s}resolveStateAnimation({controlActiveState:t,directAnimate:i,directTransition:r}){let s=this.state.options.transition,a={};const{variants:n,custom:o,transition:l,animatePresenceContext:h}=this.state.options,c=o??h?.custom;return this.state.activeStates={...this.state.activeStates,...t},nQ.forEach(u=>{if(!this.state.activeStates[u]||qS(this.state.options[u]))return;const d=this.state.options[u];let f=N5(d)?k3(d,n,c):void 0;if(this.state.visualElement.isVariantNode){const p=k3(this.state.context[u],n,c);f=p?Object.assign(p||{},f):a}f&&(u!=="initial"&&(s=f.transition||this.state.options.transition||{}),a=Object.assign(a,f))}),i&&(a=k3(i,n,c),s=a.transition||r||l),Object.entries(a).forEach(([u,d])=>{u!=="transition"&&(this.state.target[u]=d)}),s}mount(){const{element:t}=this.state;LR.set(t,this.state),Rc.get(t)||(this.state.visualElement.mount(t),Rc.set(t,this.state.visualElement)),this.state.visualElement.state=this.state,this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.state.options,{animate:i}=this.state.visualElement.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){var t;(t=this.unmountControls)==null||t.call(this)}}const lQ={y:!1};function hQ(){return lQ.y}const GL=(e,t)=>t?e===t?!0:GL(e,t.parentElement):!1,cQ=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function HL(e,t){const i=fw(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[i,s,()=>r.abort()]}const uQ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dQ(e){return uQ.has(e.tagName)||e.tabIndex!==-1}const _m=new WeakSet;function _A(e){return t=>{t.key==="Enter"&&e(t)}}function q4(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const fQ=(e,t)=>{const i=e.currentTarget;if(!i)return;const r=_A(()=>{if(_m.has(i))return;q4(i,"down");const s=_A(()=>{q4(i,"up")}),a=()=>q4(i,"cancel");i.addEventListener("keyup",s,t),i.addEventListener("blur",a,t)});i.addEventListener("keydown",r,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",r),t)};function SA(e){return cQ(e)&&!0}function pQ(e,t,i={}){const[r,s,a]=HL(e,i),n=o=>{const l=o.currentTarget;if(!SA(o))return;_m.add(l);const h=t(l,o),c=(f,p)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",d),_m.has(l)&&_m.delete(l),SA(f)&&typeof h=="function"&&h(f,{success:p})},u=f=>{c(f,l===window||l===document||i.useGlobalTarget||GL(l,f.target))},d=f=>{c(f,!1)};window.addEventListener("pointerup",u,s),window.addEventListener("pointercancel",d,s)};return r.forEach(o=>{(i.useGlobalTarget?window:o).addEventListener("pointerdown",n,s),NL(o)&&(o.addEventListener("focus",h=>fQ(h,s)),!dQ(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function WL(e){return{point:{x:e.pageX,y:e.pageY}}}function AA(e,t,i){const r=e.options;r.whilePress&&e.setActive("whilePress",i==="Start");const s=`onPress${i==="End"?"":i}`,a=r[s];a&&Vi.postRender(()=>a(t,WL(t)))}class mQ extends nl{isActive(){const{whilePress:t,onPress:i,onPressCancel:r,onPressStart:s}=this.state.options;return!!(t||i||r||s)}constructor(t){super(t)}mount(){this.register()}update(){const{whilePress:t,onPress:i,onPressCancel:r,onPressStart:s}=this.state.options;t||i||r||s||this.register()}register(){const t=this.state.element;!t||!this.isActive()||(this.unmount(),this.unmount=pQ(t,(i,r)=>(AA(this.state,r,"Start"),(s,{success:a})=>AA(this.state,s,a?"End":"Cancel")),{useGlobalTarget:this.state.options.globalPressTarget}))}}function MA(e){return!(e.pointerType==="touch"||hQ())}function gQ(e,t,i={}){const[r,s,a]=HL(e,i),n=o=>{if(!MA(o))return;const{target:l}=o,h=t(l,o);if(typeof h!="function"||!l)return;const c=u=>{MA(u)&&(h(u),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,s)};return r.forEach(o=>{o.addEventListener("pointerenter",n,s)}),a}function CA(e,t,i){const r=e.options;r.whileHover&&e.setActive("whileHover",i==="Start");const s=`onHover${i}`,a=r[s];a&&Vi.postRender(()=>a(t,WL(t)))}class vQ extends nl{isActive(){const{whileHover:t,onHoverStart:i,onHoverEnd:r}=this.state.options;return!!(t||i||r)}constructor(t){super(t)}mount(){this.register()}update(){const{whileHover:t,onHoverStart:i,onHoverEnd:r}=this.state.visualElement.prevProps;t||i||r||this.register()}register(){const t=this.state.element;!t||!this.isActive()||(this.unmount(),this.unmount=gQ(t,(i,r)=>(CA(this.state,r,"Start"),s=>{CA(this.state,s,"End")})))}}const yQ={some:0,all:1};function xQ(e,t,{root:i,margin:r,amount:s="some"}={}){const a=fw(e),n=new WeakMap,o=h=>{h.forEach(c=>{const u=n.get(c.target);if(c.isIntersecting!==!!u)if(c.isIntersecting){const d=t(c.target,c);typeof d=="function"?n.set(c.target,d):l.unobserve(c.target)}else typeof u=="function"&&(u(c),n.delete(c.target))})},l=new IntersectionObserver(o,{root:i,rootMargin:r,threshold:typeof s=="number"?s:yQ[s]});return a.forEach(h=>l.observe(h)),()=>l.disconnect()}function EA(e,t,i){const r=e.options;r.whileInView&&e.setActive("whileInView",i==="Enter");const s=`onViewport${i}`,a=r[s];a&&Vi.postRender(()=>a(t))}class bQ extends nl{isActive(){const{whileInView:t,onViewportEnter:i,onViewportLeave:r}=this.state.options;return!!(t||i||r)}constructor(t){super(t)}startObserver(){const t=this.state.element;if(!t||!this.isActive())return;this.unmount();const{once:i,...r}=this.state.options.inViewOptions||{};this.unmount=xQ(t,(s,a)=>{if(EA(this.state,a,"Enter"),!i)return n=>{EA(this.state,a,"Leave")}},r)}mount(){this.startObserver()}update(){const{props:t,prevProps:i}=this.state.visualElement;["amount","margin","root"].some(wQ(t,i))&&this.startObserver()}}function wQ({inViewOptions:e={}},{inViewOptions:t={}}={}){return i=>e[i]!==t[i]}function cg(e,t,i,r={passive:!0}){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i)}class _Q extends nl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.state.element.matches(":focus-visible")}catch{t=!0}t&&(this.state.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&(this.state.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cf(cg(this.state.element,"focus",()=>this.onFocus()),cg(this.state.element,"blur",()=>this.onBlur()))}}const SQ=(e,t)=>e.depth-t.depth;class AQ{constructor(){this.children=[],this.isDirty=!1}add(t){sw(this.children,t),this.isDirty=!0}remove(t){Bv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(SQ),this.isDirty=!1,this.children.forEach(t)}}function X4(e){return Pr(e)?e.get():e}const qL=["TopLeft","TopRight","BottomLeft","BottomRight"],MQ=qL.length,TA=e=>typeof e=="string"?parseFloat(e):e,PA=e=>typeof e=="number"||At.test(e);function CQ(e,t,i,r,s,a){s?(e.opacity=Yi(0,i.opacity??1,EQ(r)),e.opacityExit=Yi(t.opacity??1,0,TQ(r))):a&&(e.opacity=Yi(t.opacity??1,i.opacity??1,r));for(let n=0;n<MQ;n++){const o=`border${qL[n]}Radius`;let l=DA(t,o),h=DA(i,o);if(l===void 0&&h===void 0)continue;l||(l=0),h||(h=0),l===0||h===0||PA(l)===PA(h)?(e[o]=Math.max(Yi(TA(l),TA(h),r),0),(Gn.test(h)||Gn.test(l))&&(e[o]+="%")):e[o]=h}(t.rotate||i.rotate)&&(e.rotate=Yi(t.rotate||0,i.rotate||0,r))}function DA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const EQ=XL(0,.5,IL),TQ=XL(.5,.95,Ss);function XL(e,t,i){return r=>r<e?0:r>t?1:i(Bu(e,t,r))}function IA(e,t){e.min=t.min,e.max=t.max}function Js(e,t){IA(e.x,t.x),IA(e.y,t.y)}function OA(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Y4(e){return e===void 0||e===1}function $5({scale:e,scaleX:t,scaleY:i}){return!Y4(e)||!Y4(t)||!Y4(i)}function Yh(e){return $5(e)||YL(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function YL(e){return RA(e.x)||RA(e.y)}function RA(e){return e&&e!=="0%"}function ug(e,t,i){const r=e-i,s=t*r;return i+s}function LA(e,t,i,r,s){return s!==void 0&&(e=ug(e,s,r)),ug(e,i,r)+t}function e6(e,t=0,i=1,r,s){e.min=LA(e.min,t,i,r,s),e.max=LA(e.max,t,i,r,s)}function KL(e,{x:t,y:i}){e6(e.x,t.translate,t.scale,t.originPoint),e6(e.y,i.translate,i.scale,i.originPoint)}const zA=.999999999999,BA=1.0000000000001;function PQ(e,t,i,r=!1){const s=i.length;if(!s)return;t.x=t.y=1;let a,n;for(let o=0;o<s;o++){a=i[o],n=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Q2(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),n&&(t.x*=n.x.scale,t.y*=n.y.scale,KL(e,n)),r&&Yh(a.latestValues)&&Q2(e,a.latestValues))}t.x<BA&&t.x>zA&&(t.x=1),t.y<BA&&t.y>zA&&(t.y=1)}function Nf(e,t){e.min=e.min+t,e.max=e.max+t}function kA(e,t,i,r,s=.5){const a=Yi(e.min,e.max,s);e6(e,t,i,a,r)}function Q2(e,t){kA(e.x,t.x,t.scaleX,t.scale,t.originX),kA(e.y,t.y,t.scaleY,t.scale,t.originY)}const QL=1e-4,DQ=1-QL,IQ=1+QL,ZL=.01,OQ=0-ZL,RQ=0+ZL;function ga(e){return e.max-e.min}function LQ(e,t,i){return Math.abs(e-t)<=i}function FA(e,t,i,r=.5){e.origin=r,e.originPoint=Yi(t.min,t.max,e.origin),e.scale=ga(i)/ga(t),e.translate=Yi(i.min,i.max,e.origin)-e.originPoint,(e.scale>=DQ&&e.scale<=IQ||isNaN(e.scale))&&(e.scale=1),(e.translate>=OQ&&e.translate<=RQ||isNaN(e.translate))&&(e.translate=0)}function j3(e,t,i,r){FA(e.x,t.x,i.x,r?r.originX:void 0),FA(e.y,t.y,i.y,r?r.originY:void 0)}function NA(e,t,i){e.min=i.min+t.min,e.max=e.min+ga(t)}function zQ(e,t,i){NA(e.x,t.x,i.x),NA(e.y,t.y,i.y)}function UA(e,t,i){e.min=t.min-i.min,e.max=e.min+ga(t)}function G3(e,t,i){UA(e.x,t.x,i.x),UA(e.y,t.y,i.y)}function VA(e,t,i,r,s){return e-=t,e=ug(e,1/i,r),s!==void 0&&(e=ug(e,1/s,r)),e}function BQ(e,t=0,i=1,r=.5,s,a=e,n=e){if(Gn.test(t)&&(t=parseFloat(t),t=Yi(n.min,n.max,t/100)-n.min),typeof t!="number")return;let o=Yi(a.min,a.max,r);e===a&&(o-=t),e.min=VA(e.min,t,i,o,s),e.max=VA(e.max,t,i,o,s)}function jA(e,t,[i,r,s],a,n){BQ(e,t[i],t[r],t[s],t.scale,a,n)}const kQ=["x","scaleX","originX"],FQ=["y","scaleY","originY"];function GA(e,t,i,r){jA(e.x,t,kQ,i?i.x:void 0,r?r.x:void 0),jA(e.y,t,FQ,i?i.y:void 0,r?r.y:void 0)}function HA(e){return e.translate===0&&e.scale===1}function JL(e){return HA(e.x)&&HA(e.y)}function WA(e,t){return e.min===t.min&&e.max===t.max}function NQ(e,t){return WA(e.x,t.x)&&WA(e.y,t.y)}function qA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function $L(e,t){return qA(e.x,t.x)&&qA(e.y,t.y)}function XA(e){return ga(e.x)/ga(e.y)}function YA(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class UQ{constructor(){this.members=[]}add(t){sw(this.members,t),t.scheduleRender()}remove(t){if(Bv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(s=>t===s);if(i===0)return!1;let r;for(let s=i;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,i){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,i&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:r}=t;i.onExitComplete&&i.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function VQ(e,t,i){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,n=i?.z||0;if((s||a||n)&&(r=`translate3d(${s}px, ${a}px, ${n}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),i){const{transformPerspective:h,rotate:c,rotateX:u,rotateY:d,skewX:f,skewY:p}=i;h&&(r=`perspective(${h}px) ${r}`),c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),d&&(r+=`rotateY(${d}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}function KA(e){return[e("x"),e("y")]}const Sm={hasAnimatedSinceResize:!0,hasEverUpdated:!1},{schedule:jQ}=DR(queueMicrotask,!1),K4=["","X","Y","Z"],GQ=1e3;let HQ=0;function Q4(e,t,i,r){const{latestValues:s}=t;s[e]&&(i[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function ez(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const i=xL(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",Vi,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&ez(r)}function tz({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(n={},o=t?.()){this.id=HQ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XQ),this.nodes.forEach(ZQ),this.nodes.forEach(JQ),this.nodes.forEach(YQ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=n,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new AQ)}addEventListener(n,o){return this.eventHandlers.has(n)||this.eventHandlers.set(n,new aw),this.eventHandlers.get(n).add(o)}notifyListeners(n,...o){const l=this.eventHandlers.get(n);l&&l.notify(...o)}hasListeners(n){return this.eventHandlers.has(n)}mount(n){if(this.instance)return;this.isSVG=Mw(n)&&!UL(n),this.instance=n;const{layoutId:o,layout:l,visualElement:h}=this.options;if(h&&!h.current&&h.mount(n),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let c,u=0;const d=()=>this.root.updateBlockedByResize=!1;Vi.read(()=>{u=window.innerWidth}),e(n,()=>{const f=window.innerWidth;f!==u&&(u=f,this.root.updateBlockedByResize=!0,c&&c(),c=Tq(d,250),Sm.hasAnimatedSinceResize&&(Sm.hasAnimatedSinceResize=!1,this.nodes.forEach(JA)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&h&&(o||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u,hasRelativeLayoutChanged:d,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||h.getDefaultTransition()||rZ,{onLayoutAnimationStart:m,onLayoutAnimationComplete:g}=h.getProps(),v=!this.targetLayout||!$L(this.targetLayout,f),y=!u&&d;if(this.options.layoutRoot||this.resumeFrom||y||u&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...gw(p,"layout"),onPlay:m,onComplete:g};(h.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(c,y)}else u||JA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const n=this.getStack();n&&n.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Qo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($Q),this.animationId++)}getTransformTemplate(){const{visualElement:n}=this.options;return n&&n.getProps().transformTemplate}willUpdate(n=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ez(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const u=this.path[c];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),n&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ZA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QQ),this.nodes.forEach(WQ),this.nodes.forEach(qQ)):this.nodes.forEach(ZA),this.clearAllSnapshots();const o=gs.now();f1.delta=Zo(0,1e3/60,o-f1.timestamp),f1.timestamp=o,f1.isProcessing=!0,U4.update.process(f1),U4.preRender.process(f1),U4.render.process(f1),f1.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jQ.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KQ),this.sharedNodes.forEach(eZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Vi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Vi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ga(this.snapshot.measuredBox.x)&&!ga(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const n=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,n?n.layoutBox:void 0)}updateScroll(n="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===n&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:n,isRoot:l,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const n=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!JL(this.projectionDelta),l=this.getTransformTemplate(),h=l?l(this.latestValues,""):void 0,c=h!==this.prevTransformTemplateValue;n&&this.instance&&(o||Yh(this.latestValues)||c)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(n=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return n&&(l=this.removeTransform(l)),sZ(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var n;const{visualElement:o}=this.options;if(!o)return pr();const l=o.measureViewportBox();if(!(((n=this.scroll)==null?void 0:n.wasRoot)||this.path.some(aZ))){const{scroll:c}=this.root;c&&(Nf(l.x,c.offset.x),Nf(l.y,c.offset.y))}return l}removeElementScroll(n){var o;const l=pr();if(Js(l,n),(o=this.scroll)!=null&&o.wasRoot)return l;for(let h=0;h<this.path.length;h++){const c=this.path[h],{scroll:u,options:d}=c;c!==this.root&&u&&d.layoutScroll&&(u.wasRoot&&Js(l,n),Nf(l.x,u.offset.x),Nf(l.y,u.offset.y))}return l}applyTransform(n,o=!1){const l=pr();Js(l,n);for(let h=0;h<this.path.length;h++){const c=this.path[h];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Q2(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Yh(c.latestValues)&&Q2(l,c.latestValues)}return Yh(this.latestValues)&&Q2(l,this.latestValues),l}removeTransform(n){const o=pr();Js(o,n);for(let l=0;l<this.path.length;l++){const h=this.path[l];if(!h.instance||!Yh(h.latestValues))continue;$5(h.latestValues)&&h.updateSnapshot();const c=pr(),u=h.measurePageBox();Js(c,u),GA(o,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,c)}return Yh(this.latestValues)&&GA(o,this.latestValues),o}setTargetDelta(n){this.targetDelta=n,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(n){this.options={...this.options,...n,crossfade:n.crossfade!==void 0?n.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==f1.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(n=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==l;if(!(n||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(o=this.parent)!=null&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=f1.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pr(),this.relativeTargetOrigin=pr(),G3(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Js(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=pr(),this.targetWithTransforms=pr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zQ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Js(this.target,this.layout.layoutBox),KL(this.target,this.targetDelta)):Js(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pr(),this.relativeTargetOrigin=pr(),G3(this.relativeTargetOrigin,this.target,f.target),Js(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$5(this.parent.latestValues)||YL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var n;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let h=!0;if((this.isProjectionDirty||(n=this.parent)!=null&&n.isProjectionDirty)&&(h=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===f1.timestamp&&(h=!1),h)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Js(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;PQ(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=pr());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OA(this.prevProjectionDelta.x,this.projectionDelta.x),OA(this.prevProjectionDelta.y,this.projectionDelta.y)),j3(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!YA(this.projectionDelta.x,this.prevProjectionDelta.x)||!YA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(n=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),n){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Y2(),this.projectionDelta=Y2(),this.projectionDeltaWithTransform=Y2()}setAnimationOrigin(n,o=!1){const l=this.snapshot,h=l?l.latestValues:{},c={...this.latestValues},u=Y2();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=pr(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,g=this.getStack(),v=!g||g.members.length<=1,y=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(iZ));this.animationProgress=0;let x;this.mixTargetDelta=w=>{const _=w/1e3;$A(u.x,n.x,_),$A(u.y,n.y,_),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(G3(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tZ(this.relativeTarget,this.relativeTargetOrigin,d,_),x&&NQ(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=pr()),Js(x,this.relativeTarget)),m&&(this.animationValues=c,CQ(c,h,this.latestValues,_,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(n){var o,l,h;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(h=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Qo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Vi.update(()=>{Sm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=zu(0)),this.currentAnimation=VL(this.motionValue,[0,1e3],{...n,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),n.onUpdate&&n.onUpdate(c)},onStop:()=>{},onComplete:()=>{n.onComplete&&n.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const n=this.getStack();n&&n.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GQ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const n=this.getLead();let{targetWithTransforms:o,target:l,layout:h,latestValues:c}=n;if(!(!o||!l||!h)){if(this!==n&&this.layout&&h&&iz(this.options.animationType,this.layout.layoutBox,h.layoutBox)){l=this.target||pr();const u=ga(this.layout.layoutBox.x);l.x.min=n.target.x.min,l.x.max=l.x.min+u;const d=ga(this.layout.layoutBox.y);l.y.min=n.target.y.min,l.y.max=l.y.min+d}Js(o,l),Q2(o,c),j3(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(n,o){this.sharedNodes.has(n)||this.sharedNodes.set(n,new UQ),this.sharedNodes.get(n).add(o);const h=o.options.initialPromotionConfig;o.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(o):void 0})}isLead(){const n=this.getStack();return n?n.lead===this:!0}getLead(){var n;const{layoutId:o}=this.options;return o?((n=this.getStack())==null?void 0:n.lead)||this:this}getPrevLead(){var n;const{layoutId:o}=this.options;return o?(n=this.getStack())==null?void 0:n.prevLead:void 0}getStack(){const{layoutId:n}=this.options;if(n)return this.root.sharedNodes.get(n)}promote({needsReset:n,transition:o,preserveFollowOpacity:l}={}){const h=this.getStack();h&&h.promote(this,l),n&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const n=this.getStack();return n?n.relegate(this):!1}resetSkewAndRotation(){const{visualElement:n}=this.options;if(!n)return;let o=!1;const{latestValues:l}=n;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const h={};l.z&&Q4("z",n,h,this.animationValues);for(let c=0;c<K4.length;c++)Q4(`rotate${K4[c]}`,n,h,this.animationValues),Q4(`skew${K4[c]}`,n,h,this.animationValues);n.render();for(const c in h)n.setStaticValue(c,h[c]),this.animationValues&&(this.animationValues[c]=h[c]);n.scheduleRender()}applyProjectionStyles(n,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){n.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,n.visibility="",n.opacity="",n.pointerEvents=X4(o?.pointerEvents)||"",n.transform=l?l(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(n.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,n.pointerEvents=X4(o?.pointerEvents)||""),this.hasProjected&&!Yh(this.latestValues)&&(n.transform=l?l({},""):"none",this.hasProjected=!1);return}n.visibility="";const c=h.animationValues||h.latestValues;this.applyTransformsToTarget();let u=VQ(this.projectionDeltaWithTransform,this.treeScale,c);l&&(u=l(c,u)),n.transform=u;const{x:d,y:f}=this.projectionDelta;n.transformOrigin=`${d.origin*100}% ${f.origin*100}% 0`,h.animationValues?n.opacity=h===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:n.opacity=h===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in Cd){if(c[p]===void 0)continue;const{correct:m,applyTo:g,isCSSVariable:v}=Cd[p],y=u==="none"?c[p]:m(c[p],h);if(g){const x=g.length;for(let w=0;w<x;w++)n[g[w]]=y}else v?this.options.visualElement.renderState.vars[p]=y:n[p]=y}this.options.layoutId&&(n.pointerEvents=h===this?X4(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(n=>{var o;return(o=n.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(QA),this.root.sharedNodes.clear()}}}function WQ(e){e.updateLayout()}function qQ(e){var t;const i=((t=e.resumeFrom)==null?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:a}=e.options,n=i.source!==e.layout.source;a==="size"?KA(u=>{const d=n?i.measuredBox[u]:i.layoutBox[u],f=ga(d);d.min=r[u].min,d.max=d.min+f}):iz(a,i.layoutBox,r)&&KA(u=>{const d=n?i.measuredBox[u]:i.layoutBox[u],f=ga(r[u]);d.max=d.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+f)});const o=Y2();j3(o,r,i.layoutBox);const l=Y2();n?j3(l,e.applyTransform(s,!0),i.measuredBox):j3(l,r,i.layoutBox);const h=!JL(o);let c=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:d,layout:f}=u;if(d&&f){const p=pr();G3(p,i.layoutBox,d.layoutBox);const m=pr();G3(m,r,f.layoutBox),$L(p,m)||(c=!0),u.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=p,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:i,delta:l,layoutDelta:o,hasLayoutChanged:h,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function XQ(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function YQ(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function KQ(e){e.clearSnapshot()}function QA(e){e.clearMeasurements()}function ZA(e){e.isLayoutDirty=!1}function QQ(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function JA(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ZQ(e){e.resolveTargetDelta()}function JQ(e){e.calcProjection()}function $Q(e){e.resetSkewAndRotation()}function eZ(e){e.removeLeadSnapshot()}function $A(e,t,i){e.translate=Yi(t.translate,0,i),e.scale=Yi(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function eM(e,t,i,r){e.min=Yi(t.min,i.min,r),e.max=Yi(t.max,i.max,r)}function tZ(e,t,i,r){eM(e.x,t.x,i.x,r),eM(e.y,t.y,i.y,r)}function iZ(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const rZ={duration:.45,ease:[.4,0,.1,1]},tM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),iM=tM("applewebkit/")&&!tM("chrome/")?Math.round:Ss;function rM(e){e.min=iM(e.min),e.max=iM(e.max)}function sZ(e){rM(e.x),rM(e.y)}function iz(e,t,i){return e==="position"||e==="preserve-aspect"&&!LQ(XA(t),XA(i),.2)}function aZ(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}function nZ(e,t,i,r={passive:!0}){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i)}const oZ=tz({attachResizeListener:(e,t)=>nZ(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Z4={current:void 0},lZ=tz({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Z4.current){const e=new oZ({});e.mount(window),e.setOptions({layoutScroll:!0}),Z4.current=e}return Z4.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"});function rz(e){if(e)return e.options.allowProjection!==!1?e.projection:rz(e.parent)}function sM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const I0={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(At.test(e))e=parseFloat(e);else return e;const i=sM(e,t.target.x),r=sM(e,t.target.y);return`${i}% ${r}%`}},hZ={correct:(e,{treeScale:t,projectionDelta:i})=>{const r=e,s=gh.parse(e);if(s.length>5)return r;const a=gh.createTransformer(e),n=typeof s[0]!="number"?1:0,o=i.x.scale*t.x,l=i.y.scale*t.y;s[0+n]/=o,s[1+n]/=l;const h=Yi(o,l,.5);return typeof s[2+n]=="number"&&(s[2+n]/=h),typeof s[3+n]=="number"&&(s[3+n]/=h),a(s)}},sz={borderRadius:{...I0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:I0,borderTopRightRadius:I0,borderBottomLeftRadius:I0,borderBottomRightRadius:I0,boxShadow:hZ};function f3(e){return typeof e=="object"&&e!==null&&"nodeType"in e}class cZ extends nl{constructor(t){super(t),OR(sz)}initProjection(){const t=this.state.options;this.state.visualElement.projection=new lZ(this.state.visualElement.latestValues,t["data-framer-portal-id"]?void 0:rz(this.state.visualElement.parent)),this.state.visualElement.projection.isPresent=!0,this.setOptions()}beforeMount(){this.initProjection()}setOptions(){const t=this.state.options;this.state.visualElement.projection.setOptions({layout:t.layout,layoutId:t.layoutId,alwaysMeasureLayout:!!t.drag||t.dragConstraints&&f3(t.dragConstraints),visualElement:this.state.visualElement,animationType:typeof t.layout=="string"?t.layout:"both",layoutRoot:t.layoutRoot,layoutScroll:t.layoutScroll,crossfade:t.crossfade,onExitComplete:()=>{var i;if(!((i=this.state.visualElement.projection)!=null&&i.isPresent)){const r=iw.get(this.state.element);this.state.isSafeToRemove=!0,r&&r({detail:{isExit:!0}},!0)}}})}update(){this.setOptions()}mount(){var t;(t=this.state.visualElement.projection)==null||t.mount(this.state.element)}}function az(e){return e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1}function Cw(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}function uZ(e){return t=>az(t)&&e(t,Cw(t))}function H3(e,t,i,r){return cg(e,t,uZ(i),r)}function nz(e){let t=null;return()=>{const i=()=>{t=null};return t===null?(t=e,i):!1}}const aM=nz("dragHorizontal"),nM=nz("dragVertical");function dZ(e){let t=!1;if(e==="y")t=nM();else if(e==="x")t=aM();else{const i=aM(),r=nM();i&&r?t=()=>{i(),r()}:(i&&i(),r&&r())}return t}function t6(e){return e.max-e.min}function fZ(e,{min:t,max:i},r){return t!==void 0&&e<t?e=r?Yi(t,e,r.min):Math.max(e,t):i!==void 0&&e>i&&(e=r?Yi(i,e,r.max):Math.min(e,i)),e}const i6=.35;function pZ(e,{top:t,left:i,bottom:r,right:s}){return{x:oM(e.x,i,s),y:oM(e.y,t,r)}}function oM(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function mZ(e=i6){return e===!1?e=0:e===!0&&(e=i6),{x:lM(e,"left","right"),y:lM(e,"top","bottom")}}function lM(e,t,i){return{min:hM(e,t),max:hM(e,i)}}function hM(e,t){return typeof e=="number"?e:e[t]||0}function gZ(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}function vZ(e,t){return{x:cM(e.x,t.x),y:cM(e.y,t.y)}}function cM(e,t){let i=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,r]=[r,i]),{min:i,max:r}}function yZ(e,t){let i=.5;const r=t6(e),s=t6(t);return s>r?i=Bu(t.min,t.max-r,e.min):r>s&&(i=Bu(e.min,e.max-s,t.min)),Zo(0,1,i)}const uM=(e,t)=>Math.abs(e-t);function xZ(e,t){const i=uM(e.x,t.x),r=uM(e.y,t.y);return Math.sqrt(i**2+r**2)}class oz{constructor(t,i,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=$4(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=xZ(u.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:p}=u,{timestamp:m}=f1;this.history.push({...p,timestamp:m});const{onStart:g,onMove:v}=this.handlers;d||(g&&g(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,d)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=J4(d,this.transformPagePoint),Vi.update(this.updatePoint,!0)},this.handlePointerUp=(u,d)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=$4(u.type==="pointercancel"?this.lastMoveEventInfo:J4(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(u,g),p&&p(u,g)},!az(t))return;this.dragSnapToOrigin=a,this.handlers=i,this.transformPagePoint=r,this.contextWindow=s||window;const n=Cw(t),o=J4(n,this.transformPagePoint),{point:l}=o,{timestamp:h}=f1;this.history=[{...l,timestamp:h}];const{onSessionStart:c}=i;c&&c(t,$4(o,this.history)),this.removeListeners=cf(H3(this.contextWindow,"pointermove",this.handlePointerMove),H3(this.contextWindow,"pointerup",this.handlePointerUp),H3(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Qo(this.updatePoint)}}function J4(e,t){return t?{point:t(e.point)}:e}function dM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $4({point:e},t){return{point:e,delta:dM(e,lz(t)),offset:dM(e,bZ(t)),velocity:wZ(t,.1)}}function bZ(e){return e[0]}function lz(e){return e[e.length-1]}function wZ(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,r=null;const s=lz(e);for(;i>=0&&(r=e[i],!(s.timestamp-r.timestamp>Ka(t)));)i--;if(!r)return{x:0,y:0};const a=jn(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const n={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return n.x===1/0&&(n.x=0),n.y===1/0&&(n.y=0),n}const fM=()=>({min:0,max:0});function _Z(){return{x:fM(),y:fM()}}function cn(e){return[e("x"),e("y")]}function SZ(e){return!!(Pr(e)&&e.add)}function pM(e,t){const i=e.getValue("willChange");if(SZ(i))return i.add(t)}function hz({top:e,left:t,right:i,bottom:r}){return{x:{min:t,max:i},y:{min:e,max:r}}}function AZ(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:r.y,right:r.x}}function MZ({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function mM(e,t){e.min=e.min+t,e.max=e.max+t}function CZ(e,t){return hz(AZ(e.getBoundingClientRect(),t))}function EZ(e,t,i){const r=CZ(e,i),{scroll:s}=t;return s&&(mM(r.x,s.offset.x),mM(r.y,s.offset.y)),r}function gM(e){return!iw.has(e.current)}function cz({current:e}){return e?e.ownerDocument.defaultView:null}const TZ=new WeakMap;class PZ{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_Z(),this.visualElement=t}start(t,{snapToCursor:i=!1}={}){if(!gM(this.visualElement))return;const r=h=>{const{dragSnapToOrigin:c}=this.getProps();c?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(Cw(h,"page").point)},s=(h,c)=>{const{drag:u,dragPropagation:d,onDragStart:f}=this.getProps();if(u&&!d&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=dZ(u),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cn(m=>{let g=this.getAxisMotionValue(m).get()||0;if(Gn.test(g)){const{projection:v}=this.visualElement;if(v&&v.layout){const y=v.layout.layoutBox[m];y&&(g=t6(y)*(parseFloat(g)/100))}}this.originPoint[m]=g}),f&&Vi.postRender(()=>f(h,c)),pM(this.visualElement,"transform"),this.visualElement.state.setActive("whileDrag",!0)},a=(h,c)=>{const{dragPropagation:u,dragDirectionLock:d,onDirectionLock:f,onDrag:p}=this.getProps();if(!u&&!this.openGlobalLock)return;const{offset:m}=c;if(d&&this.currentDirection===null){this.currentDirection=DZ(m),this.currentDirection!==null&&f&&f(this.currentDirection);return}this.updateAxis("x",c.point,m),this.updateAxis("y",c.point,m),this.visualElement.render(),p&&p(h,c)},n=(h,c)=>this.stop(h,c),o=()=>cn(h=>{var c;return this.getAnimationState(h)==="paused"&&((c=this.getAxisMotionValue(h).animation)==null?void 0:c.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new oz(t,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:n,resumeAnimation:o},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:cz(this.visualElement)})}stop(t,i){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&Vi.postRender(()=>a(t,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),this.visualElement.state.setActive("whileDrag",!1)}updateAxis(t,i,r){const{drag:s}=this.getProps();if(!r||!Uf(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let n=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(n=fZ(n,this.constraints[t],this.elastic[t])),a.set(n)}resolveConstraints(){var t;const{dragConstraints:i,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)==null?void 0:t.layout,a=this.constraints;i&&f3(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&s?this.constraints=pZ(s.layoutBox,i):this.constraints=!1,this.elastic=mZ(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&cn(n=>{this.constraints!==!1&&this.getAxisMotionValue(n)&&(this.constraints[n]=gZ(s.layoutBox[n],this.constraints[n]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!f3(t))return!1;const r=t,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=EZ(r,s.root,this.visualElement.getTransformPagePoint());let n=vZ(s.layout.layoutBox,a);if(i){const o=i(MZ(n));this.hasMutatedConstraints=!!o,o&&(n=hz(o))}return n}startAnimation(t){const{drag:i,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:n,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},h=cn(c=>{if(!Uf(c,i,this.currentDirection))return;let u=l&&l[c]||{};n&&(u={min:0,max:0});const d=s?200:1e6,f=s?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...a,...u};return this.startAxisValueAnimation(c,p)});return Promise.all(h).then(o)}startAxisValueAnimation(t,i){const r=this.getAxisMotionValue(t);return pM(this.visualElement,t),r.start(Aw(t,r,0,i,this.visualElement,!1))}stopAnimation(){gM(this.visualElement)&&cn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){cn(t=>{var i;return(i=this.getAxisMotionValue(t).animation)==null?void 0:i.pause()})}getAnimationState(t){var i;return(i=this.getAxisMotionValue(t).animation)==null?void 0:i.state}getAxisMotionValue(t){const i=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps();return r[i]||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){cn(i=>{const{drag:r}=this.getProps();if(!Uf(i,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(i);if(s&&s.layout){const{min:n,max:o}=s.layout.layoutBox[i];a.set(t[i]-Yi(n,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:r}=this.visualElement;if(!f3(i)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};cn(n=>{const o=this.getAxisMotionValue(n);if(o&&this.constraints!==!1){const l=o.get();s[n]=yZ({min:l,max:l},this.constraints[n])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),cn(n=>{if(!Uf(n,t,null))return;const o=this.getAxisMotionValue(n),{min:l,max:h}=this.constraints[n];o.set(Yi(l,h,s[n]))})}addListeners(){if(!this.visualElement.current)return;TZ.set(this.visualElement,this);const t=this.visualElement.current,i=H3(t,"pointerdown",l=>{const{drag:h,dragListener:c=!0}=this.getProps();h&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();f3(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Vi.read(r);const n=cg(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:h})=>{this.isDragging&&h&&(cn(c=>{const u=this.getAxisMotionValue(c);u&&(this.originPoint[c]+=l[c].translate,u.set(u.get()+l[c].translate))}),this.visualElement.render())});return()=>{n(),i(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:n=i6,dragMomentum:o=!0}=t;return{...t,drag:i,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:n,dragMomentum:o}}}function Uf(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function DZ(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class IZ extends nl{constructor(t){super(t),this.removeGroupControls=Ss,this.removeListeners=Ss,this.controls=new PZ(t.visualElement)}mount(){const{dragControls:t}=this.state.options;t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ss}unmount(){this.removeGroupControls(),this.removeListeners()}}class OZ extends nl{constructor(t){super(t),OR(sz)}beforeUpdate(){this.state.willUpdate("beforeUpdate")}update(){this.didUpdate()}didUpdate(){var t,i;(this.state.options.layout||this.state.options.layoutId||this.state.options.drag)&&((i=(t=this.state.visualElement.projection)==null?void 0:t.root)==null||i.didUpdate())}mount(){var t;const i=this.state.options,r=this.state.options.layoutGroup;if(i.layout||i.layoutId){const s=this.state.visualElement.projection;s&&(s.promote(),(t=r?.group)==null||t.add(s)),Sm.hasEverUpdated=!0}this.didUpdate()}beforeUnmount(){const t=this.state.visualElement.projection;t&&(this.state.willUpdate("beforeUnmount"),this.state.options.layoutId?(t.isPresent=!1,t.relegate()):this.state.options.layout&&(this.state.isSafeToRemove=!0))}unmount(){const t=this.state.options.layoutGroup,i=this.state.visualElement.projection;i&&(t?.group&&(this.state.options.layout||this.state.options.layoutId)&&t.group.remove(i),this.didUpdate())}}function vM(e){return(t,i)=>{e&&Vi.postRender(()=>e(t,i))}}class RZ extends nl{constructor(){super(...arguments),this.removePointerDownListener=Ss}onPointerDown(t){this.session=new oz(t,this.createPanHandlers(),{transformPagePoint:this.state.visualElement.getTransformPagePoint(),contextWindow:cz(this.state.visualElement)})}createPanHandlers(){return{onSessionStart:vM((t,i)=>{const{onPanSessionStart:r}=this.state.options;r&&r(t,i)}),onStart:vM((t,i)=>{const{onPanStart:r}=this.state.options;r&&r(t,i)}),onMove:(t,i)=>{const{onPan:r}=this.state.options;r&&r(t,i)},onEnd:(t,i)=>{const{onPanEnd:r}=this.state.options;delete this.session,r&&Vi.postRender(()=>r(t,i))}}}mount(){this.removePointerDownListener=H3(this.state.element,"pointerdown",this.onPointerDown.bind(this))}update(){}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const LZ=[oQ,mQ,vQ,bQ,_Q,cZ,RZ,IZ,OZ],zZ={reducedMotion:"never",transition:void 0,nonce:void 0},[BZ,w7e]=lf("MotionConfig");function kZ(){return BZ(ci(()=>zZ))}function dg(e){if(e)return e.nodeType===3||e.nodeType===8?dg(e.nextSibling):e}const[FZ,_7e]=lf("LazyMotionContext");function NZ(e){const t=Iq(null),i=Rq({}),r=kZ(),s=Vq({}),a=FZ({features:Yt([]),strict:!1}),n=LI();function o(){return i.id&&e.layoutId?`${i.id}-${e.layoutId}`:e.layoutId||void 0}function l(){return{...e,lazyMotionContext:a,layoutId:o(),transition:e.transition??r.value.transition,layoutGroup:i,motionConfig:r.value,inViewOptions:e.inViewOptions??r.value.inViewOptions,animatePresenceContext:s,initial:s.initial===!1?s.initial:e.initial===!0?void 0:e.initial}}function h(){return{...n,...l()}}const c=new Hq(h(),t);Oq(c);function u(){var f;const p=c.type==="svg",m={...n};Object.keys(n).forEach(y=>{Pr(n[y])&&(m[y]=n[y].get())});let g={...e.style,...p?{}:((f=c.visualElement)==null?void 0:f.latestValues)||c.baseTarget};if(p){const{attrs:y,style:x}=nX({...c.isMounted()?c.target:c.baseTarget,...g});(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=x.transformBox??"fill-box",delete y.transformBox),Object.assign(m,y),g=x}e.drag&&e.dragListener!==!1&&Object.assign(g,{userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",touchAction:e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`});const v=iX(g);return v&&(m.style=v),m}const d=_h().proxy;return DI(()=>{c.beforeMount()}),M1(()=>{c.mount(dg(d.$el),h(),VZ(d))}),Ev(()=>c.beforeUnmount()),$u(()=>{const f=dg(d.$el);f?.isConnected||c.unmount()}),Eb(()=>{c.beforeUpdate()}),Tb(()=>{c.update(h())}),{getProps:l,getAttrs:u,layoutGroup:i,state:c}}const UZ={ignoreStrict:{type:Boolean},forwardMotionProps:{type:Boolean,default:!1},asChild:{type:Boolean,default:!1},hover:{type:[String,Array,Object]},press:{type:[String,Array,Object]},inView:{type:[String,Array,Object]},focus:{type:[String,Array,Object]},whileDrag:{type:[String,Array,Object]},whileHover:{type:[String,Array,Object],default:({hover:e})=>e},whilePress:{type:[String,Array,Object],default:({press:e})=>e},whileInView:{type:[String,Array,Object],default:({inView:e})=>e},whileFocus:{type:[String,Array,Object],default:({focus:e})=>e},custom:{type:[String,Number,Object,Array]},initial:{type:[String,Array,Object,Boolean],default:void 0},animate:{type:[String,Array,Object],default:void 0},exit:{type:[String,Array,Object]},variants:{type:Object},inherit:{type:Boolean},style:{type:Object},transformTemplate:{type:Function},transition:{type:Object},layoutGroup:{type:Object},motionConfig:{type:Object},onAnimationComplete:{type:Function},onUpdate:{type:Function},layout:{type:[Boolean,String],default:!1},layoutId:{type:String,default:void 0},layoutScroll:{type:Boolean,default:!1},layoutRoot:{type:Boolean,default:!1},"data-framer-portal-id":{type:String},crossfade:{type:Boolean,default:!0},layoutDependency:{type:[String,Number,Object,Array]},onBeforeLayoutMeasure:{type:Function},onLayoutMeasure:{type:Function},onLayoutAnimationStart:{type:Function},onLayoutAnimationComplete:{type:Function},globalPressTarget:{type:Boolean},onPressStart:{type:Function},onPress:{type:Function},onPressCancel:{type:Function},onHoverStart:{type:Function},onHoverEnd:{type:Function},inViewOptions:{type:Object},onViewportEnter:{type:Function},onViewportLeave:{type:Function},drag:{type:[Boolean,String]},dragSnapToOrigin:{type:Boolean},dragDirectionLock:{type:Boolean},dragPropagation:{type:Boolean},dragConstraints:{type:[Boolean,Object]},dragElastic:{type:[Boolean,Number,Object],default:.5},dragMomentum:{type:Boolean,default:!0},dragTransition:{type:Object},dragListener:{type:Boolean,default:!0},dragControls:{type:Object},onDragStart:{type:Function},onDragEnd:{type:Function},onDrag:{type:Function},onDirectionLock:{type:Function},onDragTransitionEnd:{type:Function},onMeasureDragConstraints:{type:Function},onPanSessionStart:{type:Function},onPanStart:{type:Function},onPan:{type:Function},onPanEnd:{type:Function}};function VZ(e){var t;const i=((t=dg(e.$el))==null?void 0:t.style.display)==="none";return e.$.vnode.transition&&i}const jZ=new Map,GZ=new Map;function HZ(e){if(!Array.isArray(e))return[e];const t=[];for(const i of e)Array.isArray(i)?t.push(...i):t.push(i);return t}const WZ=["area","img","input"];function qZ(e,t,i){var r,s;if(typeof e=="string"&&WZ.includes(e))return dh(e,t);if(e==="template"){if(!i.default)return null;const a=HZ(i.default()),n=a.findIndex(c=>c.type!==$a);if(n===-1)return a;const o=a[n];(r=o.props)==null||delete r.ref;const l=o.props?af(t,o.props):t;t.class&&((s=o.props)!=null&&s.class)&&delete o.props.class;const h=uh(o,l);for(const c in l)c.startsWith("on")&&(h.props||(h.props={}),h.props[c]=l[c]);return a.length===1?h:(a[n]=h,a)}return null}function yM(e,t={}){var i;const r=typeof e=="string",s=r?e:e.name||"",a=((i=t.features)==null?void 0:i.length)>0?jZ:GZ;if(r&&a?.has(e))return a.get(e);const n=qi({inheritAttrs:!1,props:{...UZ,features:{type:Object,default:()=>t.features||[]},as:{type:[String,Object],default:e||"div"}},name:s?`motion.${s}`:"Motion",setup(o,{slots:l}){const{getProps:h,getAttrs:c,state:u}=NZ(o);function d(){const f=u.element;if((!(typeof o.as=="object")||o.asChild)&&f){const{style:m}=c();if(m)for(const[g,v]of Object.entries(m))f.style[g]=v}}return()=>{const f=h(),p=c(),m=o.asChild?"template":o.as,g={...t.forwardMotionProps||o.forwardMotionProps?f:{},...p,onVnodeUpdated:d},v=qZ(m,g,l);return v!==null?v:dh(m,{...g},l)}}});return r&&a?.set(e,n),n}function XZ(e=[]){return new Proxy({},{get(t,i){return i==="create"?(r,s)=>yM(r,{...s,features:e}):yM(i,{features:e})}})}const YZ=XZ(LZ),kv=YZ.create("div"),KZ={class:"group relative -mr-4",style:{display:"flex","flex-direction":"row"}},QZ={class:"relative z-30 text-base font-bold text-white"},Am=qi({__name:"LocaleItem",props:{tipUp:{default:"Your Grant"},tipDown:{default:"↓"},showTip:{default:!1},tipDirection:{default:"top"},xClass:{default:""},yClass:{default:""},extraMotionClasses:{default:""}},setup(e){const t=e,i=ci(()=>{switch(t.tipDirection){case"top":{let s=t.xClass.length>0?t.xClass:"left-1/2",a=t.yClass.length>0?t.yClass:"-top-16";return`absolute ${s} ${a} z-50 flex -translate-x-1/2 flex-col items-center justify-center whitespace-nowrap rounded-md bg-black px-4 py-2 text-xs shadow-xl`}case"left":{let s=t.xClass.length>0?t.xClass:"-left-1/3",a=t.yClass.length>0?t.yClass:"top-1/5";return`absolute ${s} ${a} z-50 flex -translate-x flex-row items-center justify-center whitespace-nowrap rounded-md bg-black px-4 py-2 text-xs shadow-xl`}}}),r=ci(()=>i.value+" "+t.extraMotionClasses);return(s,a)=>(It(),fi("div",KZ,[e.showTip?(It(),ss(Si(kv),{key:0,initial:{opacity:0,y:20,scale:.6},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:10},exit:{opacity:0,y:20,scale:.6},class:rs(r.value)},{default:da(()=>[a[0]||(a[0]=Et("div",{class:"absolute right-1/2 translate-x-1/2 -bottom-px z-30 h-px w-2/5 me-1 bg-gradient-to-r from-transparent via-emerald-500 to-transparent"},null,-1)),a[1]||(a[1]=Et("div",{class:"absolute left-1/2 -translate-x-1/2 -bottom-px z-30 h-px w-2/5 ms-1 bg-gradient-to-r from-transparent via-sky-500 to-transparent"},null,-1)),Et("div",QZ,Hr(e.tipUp),1),Et("div",{class:"text-xs text-white",style:Aa({marginLeft:e.tipDirection=="left"?"0.5rem":0})},Hr(e.tipDown),5)]),_:1,__:[0,1]},8,["class"])):Dv("",!0),sf(s.$slots,"default")]))}});function uz(e,t){let i=e.classList;if(i){if("animateClasses"in e){let s=e.animateClasses;i.remove(...s),e.animateClasses=[]}i.contains("animate__animated")||i.add("animate__animated");let r=`animate__${t}`;"animateClasses"in e||(e.animateClasses=[]),e.animateClasses.push(r),i.add(r)}}function W3(e){e=e.$el?e.$el:e,$b.set(e,{opacity:0})}function Wl(e,t){e=e.$el?e.$el:e,$b.set(e,{opacity:1,onComplete:()=>{uz(e,t)}})}function zl(e,t){e=e.$el?e.$el:e,uz(e,t),setTimeout(()=>{W3(e)},500)}function xM(e){return e%10===1&&e%100!==11?e+"st":e%10===2&&e%100!==12?e+"nd":e%10===3&&e%100!==13?e+"rd":e+"th"}function bM(e,t="span",i=document){const r=e,s=document.getElementsByTagName(t);for(let a=0;a<s.length;a++){const n=s[a];if(n.textContent.trim()===r)return n}return null}function wM(e,t){const i=document.createElement("div");uO({render(){return t}}).mount(i);let s=i.firstChild;return e.parentNode.replaceChild(s,e),s}function dz(e){var t,i,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(i=dz(e[t]))&&(r&&(r+=" "),r+=i)}else for(i in e)e[i]&&(r&&(r+=" "),r+=i);return r}function ZZ(){for(var e,t,i=0,r="",s=arguments.length;i<s;i++)(e=arguments[i])&&(t=dz(e))&&(r&&(r+=" "),r+=t);return r}const Ew="-",JZ=e=>{const t=eJ(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:n=>{const o=n.split(Ew);return o[0]===""&&o.length!==1&&o.shift(),fz(o,t)||$Z(n)},getConflictingClassGroupIds:(n,o)=>{const l=i[n]||[];return o&&r[n]?[...l,...r[n]]:l}}},fz=(e,t)=>{if(e.length===0)return t.classGroupId;const i=e[0],r=t.nextPart.get(i),s=r?fz(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Ew);return t.validators.find(({validator:n})=>n(a))?.classGroupId},_M=/^\[(.+)\]$/,$Z=e=>{if(_M.test(e)){const t=_M.exec(e)[1],i=t?.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}},eJ=e=>{const{theme:t,classGroups:i}=e,r={nextPart:new Map,validators:[]};for(const s in i)r6(i[s],r,s,t);return r},r6=(e,t,i,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:SM(t,s);a.classGroupId=i;return}if(typeof s=="function"){if(tJ(s)){r6(s(r),t,i,r);return}t.validators.push({validator:s,classGroupId:i});return}Object.entries(s).forEach(([a,n])=>{r6(n,SM(t,a),i,r)})})},SM=(e,t)=>{let i=e;return t.split(Ew).forEach(r=>{i.nextPart.has(r)||i.nextPart.set(r,{nextPart:new Map,validators:[]}),i=i.nextPart.get(r)}),i},tJ=e=>e.isThemeGetter,iJ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=new Map,r=new Map;const s=(a,n)=>{i.set(a,n),t++,t>e&&(t=0,r=i,i=new Map)};return{get(a){let n=i.get(a);if(n!==void 0)return n;if((n=r.get(a))!==void 0)return s(a,n),n},set(a,n){i.has(a)?i.set(a,n):s(a,n)}}},s6="!",a6=":",rJ=a6.length,sJ=e=>{const{prefix:t,experimentalParseClassName:i}=e;let r=s=>{const a=[];let n=0,o=0,l=0,h;for(let p=0;p<s.length;p++){let m=s[p];if(n===0&&o===0){if(m===a6){a.push(s.slice(l,p)),l=p+rJ;continue}if(m==="/"){h=p;continue}}m==="["?n++:m==="]"?n--:m==="("?o++:m===")"&&o--}const c=a.length===0?s:s.substring(l),u=aJ(c),d=u!==c,f=h&&h>l?h-l:void 0;return{modifiers:a,hasImportantModifier:d,baseClassName:u,maybePostfixModifierPosition:f}};if(t){const s=t+a6,a=r;r=n=>n.startsWith(s)?a(n.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:n,maybePostfixModifierPosition:void 0}}if(i){const s=r;r=a=>i({className:a,parseClassName:s})}return r},aJ=e=>e.endsWith(s6)?e.substring(0,e.length-1):e.startsWith(s6)?e.substring(1):e,nJ=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let a=[];return r.forEach(n=>{n[0]==="["||t[n]?(s.push(...a.sort(),n),a=[]):a.push(n)}),s.push(...a.sort()),s}},oJ=e=>({cache:iJ(e.cacheSize),parseClassName:sJ(e),sortModifiers:nJ(e),...JZ(e)}),lJ=/\s+/,hJ=(e,t)=>{const{parseClassName:i,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=t,n=[],o=e.trim().split(lJ);let l="";for(let h=o.length-1;h>=0;h-=1){const c=o[h],{isExternal:u,modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=i(c);if(u){l=c+(l.length>0?" "+l:l);continue}let g=!!m,v=r(g?p.substring(0,m):p);if(!v){if(!g){l=c+(l.length>0?" "+l:l);continue}if(v=r(p),!v){l=c+(l.length>0?" "+l:l);continue}g=!1}const y=a(d).join(":"),x=f?y+s6:y,w=x+v;if(n.includes(w))continue;n.push(w);const _=s(v,g);for(let b=0;b<_.length;++b){const M=_[b];n.push(x+M)}l=c+(l.length>0?" "+l:l)}return l};function cJ(){let e=0,t,i,r="";for(;e<arguments.length;)(t=arguments[e++])&&(i=pz(t))&&(r&&(r+=" "),r+=i);return r}const pz=e=>{if(typeof e=="string")return e;let t,i="";for(let r=0;r<e.length;r++)e[r]&&(t=pz(e[r]))&&(i&&(i+=" "),i+=t);return i};function uJ(e,...t){let i,r,s,a=n;function n(l){const h=t.reduce((c,u)=>u(c),e());return i=oJ(h),r=i.cache.get,s=i.cache.set,a=o,o(l)}function o(l){const h=r(l);if(h)return h;const c=hJ(l,i);return s(l,c),c}return function(){return a(cJ.apply(null,arguments))}}const zr=e=>{const t=i=>i[e]||[];return t.isThemeGetter=!0,t},mz=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,gz=/^\((?:(\w[\w-]*):)?(.+)\)$/i,dJ=/^\d+\/\d+$/,fJ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pJ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mJ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,gJ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vJ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,i2=e=>dJ.test(e),Xt=e=>!!e&&!Number.isNaN(Number(e)),dl=e=>!!e&&Number.isInteger(Number(e)),ey=e=>e.endsWith("%")&&Xt(e.slice(0,-1)),no=e=>fJ.test(e),yJ=()=>!0,xJ=e=>pJ.test(e)&&!mJ.test(e),vz=()=>!1,bJ=e=>gJ.test(e),wJ=e=>vJ.test(e),_J=e=>!st(e)&&!at(e),SJ=e=>r0(e,bz,vz),st=e=>mz.test(e),zh=e=>r0(e,wz,xJ),ty=e=>r0(e,TJ,Xt),AM=e=>r0(e,yz,vz),AJ=e=>r0(e,xz,wJ),Vf=e=>r0(e,_z,bJ),at=e=>gz.test(e),O0=e=>s0(e,wz),MJ=e=>s0(e,PJ),MM=e=>s0(e,yz),CJ=e=>s0(e,bz),EJ=e=>s0(e,xz),jf=e=>s0(e,_z,!0),r0=(e,t,i)=>{const r=mz.exec(e);return r?r[1]?t(r[1]):i(r[2]):!1},s0=(e,t,i=!1)=>{const r=gz.exec(e);return r?r[1]?t(r[1]):i:!1},yz=e=>e==="position"||e==="percentage",xz=e=>e==="image"||e==="url",bz=e=>e==="length"||e==="size"||e==="bg-size",wz=e=>e==="length",TJ=e=>e==="number",PJ=e=>e==="family-name",_z=e=>e==="shadow",DJ=()=>{const e=zr("color"),t=zr("font"),i=zr("text"),r=zr("font-weight"),s=zr("tracking"),a=zr("leading"),n=zr("breakpoint"),o=zr("container"),l=zr("spacing"),h=zr("radius"),c=zr("shadow"),u=zr("inset-shadow"),d=zr("text-shadow"),f=zr("drop-shadow"),p=zr("blur"),m=zr("perspective"),g=zr("aspect"),v=zr("ease"),y=zr("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],_=()=>[...w(),at,st],b=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],S=()=>[at,st,l],A=()=>[i2,"full","auto",...S()],C=()=>[dl,"none","subgrid",at,st],T=()=>["auto",{span:["full",dl,at,st]},dl,at,st],D=()=>[dl,"auto",at,st],R=()=>["auto","min","max","fr",at,st],O=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],j=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...S()],N=()=>[i2,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],k=()=>[e,at,st],ne=()=>[...w(),MM,AM,{position:[at,st]}],te=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",CJ,SJ,{size:[at,st]}],Z=()=>[ey,O0,zh],de=()=>["","none","full",h,at,st],ee=()=>["",Xt,O0,zh],le=()=>["solid","dashed","dotted","double"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>[Xt,ey,MM,AM],J=()=>["","none",p,at,st],se=()=>["none",Xt,at,st],ae=()=>["none",Xt,at,st],Ae=()=>[Xt,at,st],F=()=>[i2,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[no],breakpoint:[no],color:[yJ],container:[no],"drop-shadow":[no],ease:["in","out","in-out"],font:[_J],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[no],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[no],shadow:[no],spacing:["px",Xt],text:[no],"text-shadow":[no],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",i2,st,at,g]}],container:["container"],columns:[{columns:[Xt,st,at,o]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:_()}],overflow:[{overflow:b()}],"overflow-x":[{"overflow-x":b()}],"overflow-y":[{"overflow-y":b()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[dl,"auto",at,st]}],basis:[{basis:[i2,"full","auto",o,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Xt,i2,"auto","initial","none",st]}],grow:[{grow:["",Xt,at,st]}],shrink:[{shrink:["",Xt,at,st]}],order:[{order:[dl,"first","last","none",at,st]}],"grid-cols":[{"grid-cols":C()}],"col-start-end":[{col:T()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":C()}],"row-start-end":[{row:T()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...O(),"normal"]}],"justify-items":[{"justify-items":[...j(),"normal"]}],"justify-self":[{"justify-self":["auto",...j()]}],"align-content":[{content:["normal",...O()]}],"align-items":[{items:[...j(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...j(),{baseline:["","last"]}]}],"place-content":[{"place-content":O()}],"place-items":[{"place-items":[...j(),"baseline"]}],"place-self":[{"place-self":["auto",...j()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:N()}],w:[{w:[o,"screen",...N()]}],"min-w":[{"min-w":[o,"screen","none",...N()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[n]},...N()]}],h:[{h:["screen","lh",...N()]}],"min-h":[{"min-h":["screen","lh","none",...N()]}],"max-h":[{"max-h":["screen","lh",...N()]}],"font-size":[{text:["base",i,O0,zh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,at,ty]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ey,st]}],"font-family":[{font:[MJ,st,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,at,st]}],"line-clamp":[{"line-clamp":[Xt,"none",at,ty]}],leading:[{leading:[a,...S()]}],"list-image":[{"list-image":["none",at,st]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",at,st]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:k()}],"text-color":[{text:k()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:[Xt,"from-font","auto",at,zh]}],"text-decoration-color":[{decoration:k()}],"underline-offset":[{"underline-offset":[Xt,"auto",at,st]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",at,st]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",at,st]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ne()}],"bg-repeat":[{bg:te()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},dl,at,st],radial:["",at,st],conic:[dl,at,st]},EJ,AJ]}],"bg-color":[{bg:k()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:k()}],"gradient-via":[{via:k()}],"gradient-to":[{to:k()}],rounded:[{rounded:de()}],"rounded-s":[{"rounded-s":de()}],"rounded-e":[{"rounded-e":de()}],"rounded-t":[{"rounded-t":de()}],"rounded-r":[{"rounded-r":de()}],"rounded-b":[{"rounded-b":de()}],"rounded-l":[{"rounded-l":de()}],"rounded-ss":[{"rounded-ss":de()}],"rounded-se":[{"rounded-se":de()}],"rounded-ee":[{"rounded-ee":de()}],"rounded-es":[{"rounded-es":de()}],"rounded-tl":[{"rounded-tl":de()}],"rounded-tr":[{"rounded-tr":de()}],"rounded-br":[{"rounded-br":de()}],"rounded-bl":[{"rounded-bl":de()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...le(),"hidden","none"]}],"divide-style":[{divide:[...le(),"hidden","none"]}],"border-color":[{border:k()}],"border-color-x":[{"border-x":k()}],"border-color-y":[{"border-y":k()}],"border-color-s":[{"border-s":k()}],"border-color-e":[{"border-e":k()}],"border-color-t":[{"border-t":k()}],"border-color-r":[{"border-r":k()}],"border-color-b":[{"border-b":k()}],"border-color-l":[{"border-l":k()}],"divide-color":[{divide:k()}],"outline-style":[{outline:[...le(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Xt,at,st]}],"outline-w":[{outline:["",Xt,O0,zh]}],"outline-color":[{outline:k()}],shadow:[{shadow:["","none",c,jf,Vf]}],"shadow-color":[{shadow:k()}],"inset-shadow":[{"inset-shadow":["none",u,jf,Vf]}],"inset-shadow-color":[{"inset-shadow":k()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:k()}],"ring-offset-w":[{"ring-offset":[Xt,zh]}],"ring-offset-color":[{"ring-offset":k()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":k()}],"text-shadow":[{"text-shadow":["none",d,jf,Vf]}],"text-shadow-color":[{"text-shadow":k()}],opacity:[{opacity:[Xt,at,st]}],"mix-blend":[{"mix-blend":[...$(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":$()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Xt]}],"mask-image-linear-from-pos":[{"mask-linear-from":K()}],"mask-image-linear-to-pos":[{"mask-linear-to":K()}],"mask-image-linear-from-color":[{"mask-linear-from":k()}],"mask-image-linear-to-color":[{"mask-linear-to":k()}],"mask-image-t-from-pos":[{"mask-t-from":K()}],"mask-image-t-to-pos":[{"mask-t-to":K()}],"mask-image-t-from-color":[{"mask-t-from":k()}],"mask-image-t-to-color":[{"mask-t-to":k()}],"mask-image-r-from-pos":[{"mask-r-from":K()}],"mask-image-r-to-pos":[{"mask-r-to":K()}],"mask-image-r-from-color":[{"mask-r-from":k()}],"mask-image-r-to-color":[{"mask-r-to":k()}],"mask-image-b-from-pos":[{"mask-b-from":K()}],"mask-image-b-to-pos":[{"mask-b-to":K()}],"mask-image-b-from-color":[{"mask-b-from":k()}],"mask-image-b-to-color":[{"mask-b-to":k()}],"mask-image-l-from-pos":[{"mask-l-from":K()}],"mask-image-l-to-pos":[{"mask-l-to":K()}],"mask-image-l-from-color":[{"mask-l-from":k()}],"mask-image-l-to-color":[{"mask-l-to":k()}],"mask-image-x-from-pos":[{"mask-x-from":K()}],"mask-image-x-to-pos":[{"mask-x-to":K()}],"mask-image-x-from-color":[{"mask-x-from":k()}],"mask-image-x-to-color":[{"mask-x-to":k()}],"mask-image-y-from-pos":[{"mask-y-from":K()}],"mask-image-y-to-pos":[{"mask-y-to":K()}],"mask-image-y-from-color":[{"mask-y-from":k()}],"mask-image-y-to-color":[{"mask-y-to":k()}],"mask-image-radial":[{"mask-radial":[at,st]}],"mask-image-radial-from-pos":[{"mask-radial-from":K()}],"mask-image-radial-to-pos":[{"mask-radial-to":K()}],"mask-image-radial-from-color":[{"mask-radial-from":k()}],"mask-image-radial-to-color":[{"mask-radial-to":k()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":w()}],"mask-image-conic-pos":[{"mask-conic":[Xt]}],"mask-image-conic-from-pos":[{"mask-conic-from":K()}],"mask-image-conic-to-pos":[{"mask-conic-to":K()}],"mask-image-conic-from-color":[{"mask-conic-from":k()}],"mask-image-conic-to-color":[{"mask-conic-to":k()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ne()}],"mask-repeat":[{mask:te()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",at,st]}],filter:[{filter:["","none",at,st]}],blur:[{blur:J()}],brightness:[{brightness:[Xt,at,st]}],contrast:[{contrast:[Xt,at,st]}],"drop-shadow":[{"drop-shadow":["","none",f,jf,Vf]}],"drop-shadow-color":[{"drop-shadow":k()}],grayscale:[{grayscale:["",Xt,at,st]}],"hue-rotate":[{"hue-rotate":[Xt,at,st]}],invert:[{invert:["",Xt,at,st]}],saturate:[{saturate:[Xt,at,st]}],sepia:[{sepia:["",Xt,at,st]}],"backdrop-filter":[{"backdrop-filter":["","none",at,st]}],"backdrop-blur":[{"backdrop-blur":J()}],"backdrop-brightness":[{"backdrop-brightness":[Xt,at,st]}],"backdrop-contrast":[{"backdrop-contrast":[Xt,at,st]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Xt,at,st]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Xt,at,st]}],"backdrop-invert":[{"backdrop-invert":["",Xt,at,st]}],"backdrop-opacity":[{"backdrop-opacity":[Xt,at,st]}],"backdrop-saturate":[{"backdrop-saturate":[Xt,at,st]}],"backdrop-sepia":[{"backdrop-sepia":["",Xt,at,st]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",at,st]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Xt,"initial",at,st]}],ease:[{ease:["linear","initial",v,at,st]}],delay:[{delay:[Xt,at,st]}],animate:[{animate:["none",y,at,st]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,at,st]}],"perspective-origin":[{"perspective-origin":_()}],rotate:[{rotate:se()}],"rotate-x":[{"rotate-x":se()}],"rotate-y":[{"rotate-y":se()}],"rotate-z":[{"rotate-z":se()}],scale:[{scale:ae()}],"scale-x":[{"scale-x":ae()}],"scale-y":[{"scale-y":ae()}],"scale-z":[{"scale-z":ae()}],"scale-3d":["scale-3d"],skew:[{skew:Ae()}],"skew-x":[{"skew-x":Ae()}],"skew-y":[{"skew-y":Ae()}],transform:[{transform:[at,st,"","none","gpu","cpu"]}],"transform-origin":[{origin:_()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:F()}],"translate-x":[{"translate-x":F()}],"translate-y":[{"translate-y":F()}],"translate-z":[{"translate-z":F()}],"translate-none":["translate-none"],accent:[{accent:k()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:k()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",at,st]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",at,st]}],fill:[{fill:["none",...k()]}],"stroke-w":[{stroke:[Xt,O0,zh,ty]}],stroke:[{stroke:["none",...k()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},IJ=uJ(DJ);function Ma(...e){return IJ(ZZ(e))}const OJ=qi({__name:"FallingStarsBg",props:{color:{default:"#FFF"},count:{default:100},class:{}},setup(e){const t=e,i=Yt(null);let r=0,s=[],a=null;M1(()=>{const c=i.value;if(c){window.addEventListener("resize",h),h(),r=c.width/2,s=[];for(let u=0;u<t.count;u++)s.push({x:(Math.random()-.5)*2*c.width,y:(Math.random()-.5)*2*c.height,z:Math.random()*c.width,speed:Math.random()*5+2});l()}});function n(){let c=t.color.replace(/^#/,"");c.length===3&&(c=c.split("").map(m=>m+m).join(""));const u=parseInt(c,16),d=u>>16&255,f=u>>8&255,p=u&255;return{r:d,g:f,b:p}}function o(c){const u=i.value;if(!u||(a=u.getContext("2d"),!a))return;const d=r/(r+c.z),f=u.width/2+c.x*d,p=u.height/2+c.y*d,m=Math.max(d*3,.5),g=r/(r+c.z+c.speed*15),v=u.width/2+c.x*g,y=u.height/2+c.y*g,x=n();a.save(),a.strokeStyle=`rgba(${x.r}, ${x.g}, ${x.b}, 0.2)`,a.lineWidth=m*2.5,a.shadowBlur=35,a.shadowColor=`rgba(${x.r}, ${x.g}, ${x.b}, 0.8)`,a.beginPath(),a.moveTo(f,p),a.lineTo(v,y),a.stroke(),a.restore(),a.strokeStyle=`rgba(${x.r}, ${x.g}, ${x.b}, 0.6)`,a.lineWidth=m,a.beginPath(),a.moveTo(f,p),a.lineTo(v,y),a.stroke(),a.fillStyle=`rgba(${x.r}, ${x.g}, ${x.b}, 1)`,a.beginPath(),a.arc(f,p,m/4,0,Math.PI*2),a.fill()}function l(){const c=i.value;c&&(a=c.getContext("2d"),a&&(a.clearRect(0,0,c.width,c.height),s.forEach(u=>{o(u),u.z-=u.speed,u.z<=0&&(u.z=c.width,u.x=(Math.random()-.5)*2*c.width,u.y=(Math.random()-.5)*2*c.height)}),requestAnimationFrame(l)))}function h(){const c=i.value;c&&(c.width=c.clientWidth,c.height=c.clientHeight)}return(c,u)=>(It(),fi("canvas",{ref_key:"starsCanvas",ref:i,class:rs(Si(Ma)("absolute inset-0 w-full h-full",c.$props.class))},null,2))}}),RJ={class:"relative inline-block"},LJ=["fill"],zJ=qi({__name:"SparklesText",props:{text:{},sparklesCount:{default:10},colors:{default:()=>({first:"#9E7AFF",second:"#FE8BBB"})},class:{}},setup(e){const t=e,i=Yt([]);function r(){const o=`${Math.random()*100}%`,l=`${Math.random()*100}%`,h=Math.random()>.5?t.colors.first:t.colors.second,c=Math.random()*2,u=Math.random()*1+.3,d=Math.random()*10+5;return{id:`${o}-${l}-${Date.now()}`,x:o,y:l,color:h,delay:c,scale:u,lifespan:d}}function s(){i.value=Array.from({length:t.sparklesCount},r)}function a(){i.value=i.value.map(o=>o.lifespan<=0?r():{...o,lifespan:o.lifespan-.1})}let n;return M1(()=>{s(),n=window.setInterval(a,100)}),$u(()=>{n&&clearInterval(n)}),(o,l)=>(It(),fi("div",{class:rs(["text-6xl font-bold",t.class])},[Et("span",RJ,[(It(!0),fi(sr,null,rf(i.value,h=>(It(),ss(Si(kv),{key:h.id,initial:{opacity:0,scale:0,rotate:75},animate:{opacity:[0,1,0],scale:[0,h.scale,0],rotate:[75,120,150]},transition:{duration:.8,repeat:1/0,delay:h.delay},as:"svg",class:"pointer-events-none absolute z-20",style:Aa({left:h.x,top:h.y,opacity:0}),width:"21",height:"21",viewBox:"0 0 21 21"},{default:da(()=>[Et("path",{d:"M9.82531 0.843845C10.0553 0.215178 10.9446 0.215178 11.1746 0.843845L11.8618 2.72026C12.4006 4.19229 12.3916 6.39157 13.5 7.5C14.6084 8.60843 16.8077 8.59935 18.2797 9.13822L20.1561 9.82534C20.7858 10.0553 20.7858 10.9447 20.1561 11.1747L18.2797 11.8618C16.8077 12.4007 14.6084 12.3916 13.5 13.5C12.3916 14.6084 12.4006 16.8077 11.8618 18.2798L11.1746 20.1562C10.9446 20.7858 10.0553 20.7858 9.82531 20.1562L9.13819 18.2798C8.59932 16.8077 8.60843 14.6084 7.5 13.5C6.39157 12.3916 4.19225 12.4007 2.72023 11.8618L0.843814 11.1747C0.215148 10.9447 0.215148 10.0553 0.843814 9.82534L2.72023 9.13822C4.19225 8.59935 6.39157 8.60843 7.5 7.5C8.60843 6.39157 8.59932 4.19229 9.13819 2.72026L9.82531 0.843845Z",fill:h.color},null,8,LJ)]),_:2},1032,["animate","transition","style"]))),128)),Ib(" "+Hr(o.text),1)])],2))}}),BJ={key:0},kJ={key:1,class:"flex flex-row"},FJ=qi({__name:"RankText",props:{value:{type:Number,default:2},spark:{type:Boolean,default:!0},suffixSize:{default:"medium"}},setup(e){const t=e;return(i,r)=>t.spark?(It(),fi("span",kJ,[Et("span",null,[$t(zJ,{text:t.value.toString(),colors:{first:"#9E7AFF",second:"#FE8BBB"},"sparkles-count":10,style:{"font-size":"2.4rem"}},null,8,["text"])]),Et("span",{class:"rank-text-suffix",style:Aa({fontSize:e.suffixSize})},Hr(Si(xM)(t.value).replace(t.value.toString(),"")),5)])):(It(),fi("span",BJ,[Ib(Hr(t.value),1),Et("span",{class:"rank-text-suffix",style:Aa({fontSize:e.suffixSize})},Hr(Si(xM)(t.value).replace(t.value.toString(),"")),5)]))}}),Sz=al(FJ,[["__scopeId","data-v-5b48e69f"]]),NJ={class:"flex justify-center"},UJ={key:0},VJ={key:1},jJ=qi({__name:"LetterPullup",props:{class:{},words:{},delay:{}},setup(e){const t=e,i=t.words.split(""),r={initial:{y:100,opacity:0},animate:{y:0,opacity:1}};return(s,a)=>(It(),fi("div",NJ,[(It(!0),fi(sr,null,rf(Si(i),(n,o)=>(It(),fi("div",{key:n},[$t(Si(kv),{as:"h1",initial:r.initial,animate:r.animate,transition:{delay:o*(t.delay?t.delay:.05)},class:rs(Si(Ma)("font-display text-center text-4xl font-bold tracking-[-0.02em] text-black drop-shadow-sm md:text-4xl md:leading-[5rem]",t.class))},{default:da(()=>[n===" "?(It(),fi("span",UJ," ")):(It(),fi("span",VJ,Hr(n),1))]),_:2},1032,["initial","animate","transition","class"])]))),128))]))}}),GJ=qi({__name:"TextHighlight",props:{delay:{default:0},duration:{default:2e3},class:{},textEndColor:{}},setup(e){lG(s=>({"081abd9c":s.textEndColor,"10eabbbe":r.value,"7ed907bc":i.value}));const t=e,i=ci(()=>`${t.delay}ms`),r=ci(()=>`${t.duration}ms`);return(s,a)=>(It(),fi("span",{class:rs(Si(Ma)("inline-block px-1 pb-1",t.class))},[sf(s.$slots,"default",{},void 0,!0)],2))}}),HJ=al(GJ,[["__scopeId","data-v-269b6945"]]),WJ=qi({__name:"AnimatedList",props:{class:{},delay:{default:1e3}},setup(e){const t=_h(),i=e,r=RI(),s=Yt([]),a=Yt(0);M1(n);async function n(){const h=r.default?r.default()[0].children??[]:[];if(!h.length)return;let c=h.length-h.findIndex(d=>{let f=d;return"show-tip"in f.props&&f.props["show-tip"]})-1;for(;s.value.length<h.length;)s.value.push({node:h[h.length-a.value-1],id:`${a.value}-${Date.now()}`}),a.value=(a.value+1)%h.length,await l(i.delay);let u=Object.entries(t.refs).find(d=>d[0].startsWith(`node${c}`))[1];setTimeout(()=>{u[0].$el.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{u[0].startShowTip()},400)},2500)}const o=ci(()=>s.value);async function l(h){return new Promise(c=>setTimeout(c,h))}return(h,c)=>(It(),fi("div",{class:rs(Si(Ma)("flex flex-col items-center gap-4",h.$props.class))},[$t(SG,{name:"list",tag:"div",class:"flex flex-col-reverse items-center gap-3","move-class":"move"},{default:da(()=>[(It(!0),fi(sr,null,rf(o.value,u=>(It(),ss(Si(kv),{key:u.id,as:"div",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,y:0},exit:{scale:0,opacity:0,y:0},transition:{type:"spring",stiffness:350,damping:40},class:rs(Si(Ma)("mx-auto w-full"))},{default:da(()=>[(It(),ss(uj(u.node),{ref_for:!0,ref:`node${u.id}`},null,512))]),_:2},1032,["class"]))),128))]),_:1})],2))}}),qJ=al(WJ,[["__scopeId","data-v-bfa2582e"]]),XJ=qi({__name:"GlowBorder",props:{borderRadius:{default:10},color:{default:"#FFF"},borderWidth:{default:2},duration:{default:10},class:{}},setup(e){const t=e,i=ci(()=>({"--border-radius":`${t.borderRadius}px`,"--border-width":`${t.borderWidth}px`,"--duration":`${t.duration}s`,backgroundImage:`radial-gradient(transparent,transparent, ${Array.isArray(t.color)?t.color.join(","):t.color},transparent,transparent)`,backgroundSize:"300% 300%",mask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor",maskComposite:"exclude",padding:"var(--border-width)",borderRadius:"var(--border-radius)"}));return(r,s)=>(It(),fi("div",{style:Aa(i.value),class:rs(Si(Ma)("pointer-events-none absolute inset-0 size-full rounded-[inherit] will-change-[background-position] motion-safe:animate-glow",t.class))},null,6))}}),YJ={class:"flex flex-row items-center gap-3"},KJ={style:{"font-size":"1.8rem",position:"relative",left:"100%"}},QJ={class:"flex flex-col overflow-hidden"},ZJ={class:"flex flex-row items-center whitespace-pre font-medium dark:text-white"},JJ={class:"text-sm sm:text-lg",style:{padding:"0 3rem","text-align":"left"}},$J={key:1,class:"flex justify-center items-center font-extrabold",style:{"font-size":"2rem","line-height":"2rem","margin-top":"-1rem"}},e$=qi({__name:"Notification",props:{name:{default:""},showTip:{type:Boolean,default:!1},rank:{default:2},color:{default:""}},setup(e,{expose:t}){const i=Yt(!1);function r(){i.value=!0}return M1(()=>{}),t({startShowTip:r}),(s,a)=>s.rank>0?(It(),ss(Am,{key:0,"show-tip":i.value,"tip-direction":"left","tip-down":"→"},{default:da(()=>[Et("div",{class:rs(Si(Ma)("relative mx-auto min-h-fit w-full cursor-pointer overflow-hidden rounded-2xl p-4","transition-all duration-200 ease-in-out hover:scale-[103%]","bg-white [box-shadow:0_0_0_1px_rgba(0,0,0,.03),0_2px_4px_rgba(0,0,0,.05),0_12px_24px_rgba(0,0,0,.05)]","transform-gpu dark:bg-transparent dark:backdrop-blur-md dark:[border:1px_solid_rgba(255,255,255,.1)] dark:[box-shadow:0_-20px_80px_-20px_#ffffff1f_inset]"))},[Et("div",YJ,[Et("div",{class:"flex size-10 items-center justify-center rounded-2xl",style:Aa(`background-color: ${s.color}`)},[Et("h1",KJ,[$t(Sz,{value:s.rank,spark:!1,"suffix-size":"1rem"},null,8,["value"])])],4),Et("div",QJ,[Et("div",ZJ,[Et("span",JJ,Hr(s.name),1)])])])],2),i.value?(It(),ss(XJ,{key:0,color:["#A07CFE","#FE8FB5","#FFBE7B"],"border-radius":10,"border-width":5})):Dv("",!0)]),_:1},8,["show-tip"])):(It(),fi("div",$J," ... "))}}),t$=qi({__name:"Meteors",props:{count:{type:Number,default:20},class:String},setup(e){return(t,i)=>(It(!0),fi(sr,null,rf(e.count,r=>(It(),fi("span",{key:"meteor "+r,class:rs(Si(Ma)("animate-meteor-effect absolute h-0.5 w-0.5 rotate-[45deg] rounded-[9999px] bg-slate-500 shadow-[0_0_0_1px_#ffffff10]","before:absolute before:top-1/2 before:h-[1px] before:w-[50px] before:-translate-y-[50%] before:transform before:bg-gradient-to-r before:from-[#64748b] before:to-transparent before:content-['']",t.$props.class)),style:Aa({top:0,left:Math.floor(Math.random()*800+-400)+"px",animationDelay:Math.random()*(.8-.2)+.2+"s",animationDuration:Math.floor(Math.random()*8+2)+"s"})},null,6))),128))}}),Az=al(t$,[["__scopeId","data-v-651cd45e"]]),i$={class:"flex flex-col justify-center items-center",style:{"margin-bottom":"3rem"}},r$={class:"fixed top-0",style:{width:"100%","z-index":"1000"}},s$={class:"flex w-full flex-col items-center justify-center"},a$={class:"relative w-full"},n$={class:"relative flex h-full flex-col items-center justify-end overflow-hidden rounded border border-gray-800 bg-gray-900 px-4 py-2 shadow-xl"},o$={class:"relative z-50 text-white"},l$={class:"podium-names flex flex-row justify-center",style:{"margin-top":"4rem"}},h$=qi({__name:"RankView",props:{topRanks:{type:Array,default:["Microsoft","Apple","Nvidia","OpenAI","SpaceX","Amazon","Tesla","Facebook"]},target:{default:{score:6,rank:13,name:"211"}}},setup(e){const t=e,i=Yt(null),r=Yt(null),s=Yt(null),a=Yt(null),n=Yt(null),o=hh([!1,!1,!1]),l=ci(()=>{let p=t.topRanks.slice(3).map((m,g)=>({name:m,rank:g+4,color:"",showTip:m==t.target.name}));return t.target.rank>t.topRanks.length&&(t.target.rank!==t.topRanks.length+1&&p.push({name:"",rank:-1,color:"",showTip:!1}),p.push({name:t.target.name,rank:t.target.rank,color:"",showTip:!0})),p});function h(p,m=0,g="zoomInUp"){setTimeout(()=>{Wl(p,g)},800+m)}function c(){i.value.getDotLottieInstance().play(),h(r.value),h(s.value,500),h(a.value,1e3),setTimeout(()=>{f()},2600)}function u(){let p=bM("$","span",n.value.$el);wM(p,dh(Sz,{value:t.target.rank})).parentNode.parentNode.classList.add("flex","items-center")}function d(){let p=bM("@","span",n.value.$el);wM(p,dh(HJ,{class:"bg-gradient-to-r from-indigo-300 to-purple-300",style:"line-height: 2.5rem; padding: 0 0.5rem;"},t.target.score.toString()))}function f(){t.topRanks.length>0&&t.topRanks[0]==t.target.name?o[0]=!0:t.topRanks.length>1&&t.topRanks[1]==t.target.name?o[1]=!0:t.topRanks.length>2&&t.topRanks[2]==t.target.name&&(o[2]=!0)}return M1(()=>{W3(r.value),W3(s.value),W3(a.value),d(),u(),setTimeout(()=>{c()},1e3)}),(p,m)=>(It(),fi(sr,null,[Et("div",i$,[Et("div",r$,[Et("div",s$,[Et("div",a$,[m[0]||(m[0]=Et("div",{class:"absolute inset-0 size-full scale-[0.80] rounded-full bg-red-500 bg-gradient-to-r from-blue-500 to-teal-500 blur-3xl"},null,-1)),Et("div",n$,[Et("span",o$,[$t(jJ,{ref_key:"pullupRef",ref:n,words:"Your grant achieved a score of @ and ranked $",delay:.02,class:"text-white"},null,512)]),$t(Az)])])])]),Et("div",l$,[$t(Am,{class:"podium-name second-price-name","show-tip":o[1]},{default:da(()=>[Et("h1",{ref_key:"secondPriceNameRef",ref:s},Hr(t.topRanks.length>1?t.topRanks[1]:""),513)]),_:1},8,["show-tip"]),$t(Am,{class:"podium-name first-price-name","show-tip":o[0]},{default:da(()=>[Et("h1",{ref_key:"firstPriceNameRef",ref:r},Hr(t.topRanks.length>0?t.topRanks[0]:""),513)]),_:1},8,["show-tip"]),$t(Am,{class:"podium-name third-price-name","show-tip":o[2]},{default:da(()=>[Et("h1",{ref_key:"thirdPriceNameRef",ref:a},Hr(t.topRanks.length>2?t.topRanks[2]:""),513)]),_:1},8,["show-tip"])]),$t(Si(cW),{ref_key:"podiumAnimPlayerRef",ref:i,style:{height:"28rem",width:"38rem"},speed:1.8,src:"/grant-evaluation-web/podium.lottie"},null,512),$t(qJ,{delay:150},{default:da(()=>[(It(!0),fi(sr,null,rf(l.value,(g,v)=>(It(),ss(e$,{key:v,name:g.name,rank:g.rank,color:g.color,"show-tip":g.showTip},null,8,["name","rank","color","show-tip"]))),128))]),_:1})]),$t(OJ,{color:"#7f6f6f56",style:{"z-index":"-1 !important"}})],64))}}),c$=al(h$,[["__scopeId","data-v-c7166a1b"]]),u$={class:"flex items-center gap-2"},d$={key:0,class:"size-2 scale-100 rounded-lg bg-primary transition-all duration-300 group-hover:scale-[100.8]"},f$={key:1},p$={class:"inline-block whitespace-nowrap transition-all duration-300 group-hover:translate-x-12 group-hover:opacity-0"},m$={class:"absolute top-0 z-10 flex size-full translate-x-12 items-center justify-center gap-2 text-primary-foreground opacity-0 transition-all duration-300 group-hover:-translate-x-5 group-hover:opacity-100"},g$={class:"whitespace-nowrap"},fg=qi({__name:"InteractiveHoverButton",props:{text:{default:"Button"},class:{}},setup(e){const t=e,i=Yt();return M1(()=>{}),(r,s)=>(It(),fi("button",{ref_key:"buttonRef",ref:i,class:rs(Si(Ma)("group relative w-auto cursor-pointer overflow-hidden rounded-full border bg-background p-2 px-6 text-center font-semibold",t.class))},[Et("div",u$,[RI().icon?(It(),fi("div",f$,[sf(r.$slots,"icon")])):(It(),fi("div",d$)),Et("span",p$,Hr(r.text),1)]),Et("div",m$,[Et("span",g$,Hr(r.text),1),s[0]||(s[0]=Et("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-arrow-right"},[Et("path",{d:"M5 12h14"}),Et("path",{d:"m12 5 7 7-7 7"})],-1))])],2))}}),v$=qi({__name:"ResultPage",props:{topRanks:Array,target:{default:{name:"",score:-1,rank:-1}}},emits:["click-retest"],setup(e,{emit:t}){const i=t;function r(){i("click-retest")}return(s,a)=>(It(),fi("div",null,[$t(c$,{"top-ranks":e.topRanks,target:e.target},null,8,["top-ranks","target"]),$t(fg,{text:"Re-test",class:"retest-button",ref:"noButtonRef",onClick:r},null,512)]))}}),y$=al(v$,[["__scopeId","data-v-ec653a14"]]),x$="modulepreload",b$=function(e){return"/grant-evaluation-web/"+e},CM={},Ah=function(t,i,r){let s=Promise.resolve();if(i&&i.length>0){let h=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};var n=h;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=h(i.map(c=>{if(c=b$(c),c in CM)return;CM[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":x$,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};var w$=Object.create,Fv=Object.defineProperty,_$=Object.getOwnPropertyDescriptor,S$=Object.getOwnPropertyNames,A$=Object.getPrototypeOf,M$=Object.prototype.hasOwnProperty,C$=(e,t,i)=>t in e?Fv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Hc=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),E$=(e,t)=>{for(var i in t)Fv(e,i,{get:t[i],enumerable:!0})},T$=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of S$(t))!M$.call(e,s)&&s!==i&&Fv(e,s,{get:()=>t[s],enumerable:!(r=_$(t,s))||r.enumerable});return e},Mh=(e,t,i)=>(i=e!=null?w$(A$(e)):{},T$(t||!e||!e.__esModule?Fv(i,"default",{value:e,enumerable:!0}):i,e)),p3=(e,t,i)=>(C$(e,typeof t!="symbol"?t+"":t,i),i),P$=Hc((e,t)=>{(function(i,r){typeof e=="object"?t.exports=r():typeof define=="function"&&define.amd?define(r):i.Alea=r()})(e,function(){return i.importState=function(s){var a=new i;return a.importState(s),a},i;function i(){return function(s){var a=0,n=0,o=0,l=1;s.length==0&&(s=[+new Date]);var h=r();a=h(" "),n=h(" "),o=h(" ");for(var c=0;c<s.length;c++)a-=h(s[c]),a<0&&(a+=1),n-=h(s[c]),n<0&&(n+=1),o-=h(s[c]),o<0&&(o+=1);h=null;var u=function(){var d=2091639*a+l*23283064365386963e-26;return a=n,n=o,o=d-(l=d|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=s,u.exportState=function(){return[a,n,o,l]},u.importState=function(d){a=+d[0]||0,n=+d[1]||0,o=+d[2]||0,l=+d[3]||0},u}(Array.prototype.slice.call(arguments))}function r(){var s=4022871197,a=function(n){n=n.toString();for(var o=0;o<n.length;o++){s+=n.charCodeAt(o);var l=.02519603282416938*s;s=l>>>0,l-=s,l*=s,s=l>>>0,l-=s,s+=l*4294967296}return(s>>>0)*23283064365386963e-26};return a.version="Mash 0.9",a}})}),Mz=Hc((e,t)=>{(function(i,r){typeof e=="object"&&typeof t<"u"?r(e):typeof define=="function"&&define.amd?define(["exports"],r):r((i=typeof globalThis<"u"?globalThis:i||self).SVDJS={})})(e,function(i){i.SVD=function(r,s,a,n,o){if(s=s===void 0||s,a=a===void 0||a,o=1e-64/(n=n||Math.pow(2,-52)),!r)throw new TypeError("Matrix a is not defined");var l,h,c,u,d,f,p,m,g,v,y,x,w=r[0].length,_=r.length;if(_<w)throw new TypeError("Invalid matrix: m < n");for(var b=[],M=[],S=[],A=s==="f"?_:w,C=v=p=0;C<_;C++)M[C]=new Array(A).fill(0);for(C=0;C<w;C++)S[C]=new Array(w).fill(0);var T,D=new Array(w).fill(0);for(C=0;C<_;C++)for(l=0;l<w;l++)M[C][l]=r[C][l];for(C=0;C<w;C++){for(b[C]=p,g=0,c=C+1,l=C;l<_;l++)g+=Math.pow(M[l][C],2);if(g<o)p=0;else for(m=(f=M[C][C])*(p=f<0?Math.sqrt(g):-Math.sqrt(g))-g,M[C][C]=f-p,l=c;l<w;l++){for(g=0,h=C;h<_;h++)g+=M[h][C]*M[h][l];for(f=g/m,h=C;h<_;h++)M[h][l]=M[h][l]+f*M[h][C]}for(D[C]=p,g=0,l=c;l<w;l++)g+=Math.pow(M[C][l],2);if(g<o)p=0;else{for(m=(f=M[C][C+1])*(p=f<0?Math.sqrt(g):-Math.sqrt(g))-g,M[C][C+1]=f-p,l=c;l<w;l++)b[l]=M[C][l]/m;for(l=c;l<_;l++){for(g=0,h=c;h<w;h++)g+=M[l][h]*M[C][h];for(h=c;h<w;h++)M[l][h]=M[l][h]+g*b[h]}}v<(y=Math.abs(D[C])+Math.abs(b[C]))&&(v=y)}if(a)for(C=w-1;0<=C;C--){if(p!==0){for(m=M[C][C+1]*p,l=c;l<w;l++)S[l][C]=M[C][l]/m;for(l=c;l<w;l++){for(g=0,h=c;h<w;h++)g+=M[C][h]*S[h][l];for(h=c;h<w;h++)S[h][l]=S[h][l]+g*S[h][C]}}for(l=c;l<w;l++)S[C][l]=0,S[l][C]=0;S[C][C]=1,p=b[C],c=C}if(s){if(s==="f")for(C=w;C<_;C++){for(l=w;l<_;l++)M[C][l]=0;M[C][C]=1}for(C=w-1;0<=C;C--){for(c=C+1,p=D[C],l=c;l<A;l++)M[C][l]=0;if(p!==0){for(m=M[C][C]*p,l=c;l<A;l++){for(g=0,h=c;h<_;h++)g+=M[h][C]*M[h][l];for(f=g/m,h=C;h<_;h++)M[h][l]=M[h][l]+f*M[h][C]}for(l=C;l<_;l++)M[l][C]=M[l][C]/p}else for(l=C;l<_;l++)M[l][C]=0;M[C][C]=M[C][C]+1}}for(n*=v,h=w-1;0<=h;h--)for(var R=0;R<50;R++){for(T=!1,c=h;0<=c;c--){if(Math.abs(b[c])<=n){T=!0;break}if(Math.abs(D[c-1])<=n)break}if(!T){for(d=0,u=c-(g=1),C=c;C<h+1&&(f=g*b[C],b[C]=d*b[C],!(Math.abs(f)<=n));C++)if(p=D[C],D[C]=Math.sqrt(f*f+p*p),d=p/(m=D[C]),g=-f/m,s)for(l=0;l<_;l++)y=M[l][u],x=M[l][C],M[l][u]=y*d+x*g,M[l][C]=-y*g+x*d}if(x=D[h],c===h){if(x<0&&(D[h]=-x,a))for(l=0;l<w;l++)S[l][h]=-S[l][h];break}for(v=D[c],f=(((y=D[h-1])-x)*(y+x)+((p=b[h-1])-(m=b[h]))*(p+m))/(2*m*y),p=Math.sqrt(f*f+1),f=((v-x)*(v+x)+m*(y/(f<0?f-p:f+p)-m))/v,C=c+(g=d=1);C<h+1;C++){if(p=b[C],y=D[C],m=g*p,p*=d,x=Math.sqrt(f*f+m*m),f=v*(d=f/(b[C-1]=x))+p*(g=m/x),p=-v*g+p*d,m=y*g,y*=d,a)for(l=0;l<w;l++)v=S[l][C-1],x=S[l][C],S[l][C-1]=v*d+x*g,S[l][C]=-v*g+x*d;if(x=Math.sqrt(f*f+m*m),f=(d=f/(D[C-1]=x))*p+(g=m/x)*y,v=-g*p+d*y,s)for(l=0;l<_;l++)y=M[l][C-1],x=M[l][C],M[l][C-1]=y*d+x*g,M[l][C]=-y*g+x*d}b[c]=0,b[h]=f,D[h]=v}for(C=0;C<w;C++)D[C]<n&&(D[C]=0);return{u:M,q:D,v:S}},i.VERSION="1.1.1",Object.defineProperty(i,"__esModule",{value:!0})})}),D$=Hc((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;function i(r){if(r===null||r===!0||r===!1)return NaN;var s=Number(r);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}t.exports=e.default}),I$=Hc((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;function i(r){var s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),r.getTime()-s.getTime()}t.exports=e.default}),O$=Hc((e,t)=>{function i(a,n){function o(){this.constructor=a}o.prototype=n.prototype,a.prototype=new o}function r(a,n,o,l){this.message=a,this.expected=n,this.found=o,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,r)}i(r,Error),r.buildMessage=function(a,n){var o={literal:function(p){return'"'+h(p.text)+'"'},class:function(p){var m="",g;for(g=0;g<p.parts.length;g++)m+=p.parts[g]instanceof Array?c(p.parts[g][0])+"-"+c(p.parts[g][1]):c(p.parts[g]);return"["+(p.inverted?"^":"")+m+"]"},any:function(p){return"any character"},end:function(p){return"end of input"},other:function(p){return p.description}};function l(p){return p.charCodeAt(0).toString(16).toUpperCase()}function h(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+l(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+l(m)})}function c(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+l(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+l(m)})}function u(p){return o[p.type](p)}function d(p){var m=new Array(p.length),g,v;for(g=0;g<p.length;g++)m[g]=u(p[g]);if(m.sort(),m.length>0){for(g=1,v=1;g<m.length;g++)m[g-1]!==m[g]&&(m[v]=m[g],v++);m.length=v}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function f(p){return p?'"'+h(p)+'"':"end of input"}return"Expected "+d(a)+" but "+f(n)+" found."};function s(a,n){n=n!==void 0?n:{};var o={},l={svg_path:Mi},h=Mi,c=function(z){if(!z)return[];for(var U=[],oe=0;oe<z.length;oe++)U=U.concat.apply(U,z[oe]);var W=U[0];return W&&W.code=="m"&&(delete W.relative,W.code="M"),U},u=function(z,U){return Ps(z,U)},d=/^[Mm]/,f=Ge(["M","m"],!1,!1),p=function(z,U,oe){var W=Qs(z,[U]);return oe&&(W=W.concat(Qs(z=="M"?"L":"l",oe[1]))),W},m=/^[Zz]/,g=Ge(["Z","z"],!1,!1),v=function(){return Qs("Z")},y=/^[Ll]/,x=Ge(["L","l"],!1,!1),w=function(z,U){return Qs(z,U)},_=/^[Hh]/,b=Ge(["H","h"],!1,!1),M=function(z,U){return Qs(z,U.map(function(oe){return{x:oe}}))},S=/^[Vv]/,A=Ge(["V","v"],!1,!1),C=function(z,U){return Qs(z,U.map(function(oe){return{y:oe}}))},T=/^[Cc]/,D=Ge(["C","c"],!1,!1),R=function(z,U,oe){return{x1:z.x,y1:z.y,x2:U.x,y2:U.y,x:oe.x,y:oe.y}},O=/^[Ss]/,j=Ge(["S","s"],!1,!1),X=function(z,U){return{x2:z.x,y2:z.y,x:U.x,y:U.y}},N=/^[Qq]/,k=Ge(["Q","q"],!1,!1),ne=function(z,U){return{x1:z.x,y1:z.y,x:U.x,y:U.y}},te=/^[Tt]/,Q=Ge(["T","t"],!1,!1),Z=/^[Aa]/,de=Ge(["A","a"],!1,!1),ee=function(z,U,oe,W,me,Ve){return{rx:z,ry:U,xAxisRotation:oe,largeArc:W,sweep:me,x:Ve.x,y:Ve.y}},le=function(z,U){return{x:z,y:U}},$=function(z){return z*1},K=function(z){return z.join("")*1},J=/^[01]/,se=Ge(["0","1"],!1,!1),ae=function(z){return z=="1"},Ae=function(){return""},F=",",V=qe(",",!1),ie=function(z){return z.join("")},ue=".",ve=qe(".",!1),ge=/^[eE]/,_e=Ge(["e","E"],!1,!1),ye=/^[+\-]/,Se=Ge(["+","-"],!1,!1),pe=/^[0-9]/,G=Ge([["0","9"]],!1,!1),L=function(z){return z.join("")},he=/^[ \t\n\r]/,Ce=Ge([" ","	",`
`,"\r"],!1,!1),B=0,Le=[{line:1,column:1}],Ue=0,je=[],Ee;if("startRule"in n){if(!(n.startRule in l))throw new Error(`Can't start parsing from rule "`+n.startRule+'".');h=l[n.startRule]}function qe(z,U){return{type:"literal",text:z,ignoreCase:U}}function Ge(z,U,oe){return{type:"class",parts:z,inverted:U,ignoreCase:oe}}function Je(){return{type:"end"}}function ot(z){var U=Le[z],oe;if(U)return U;for(oe=z-1;!Le[oe];)oe--;for(U=Le[oe],U={line:U.line,column:U.column};oe<z;)a.charCodeAt(oe)===10?(U.line++,U.column=1):U.column++,oe++;return Le[z]=U,U}function Qe(z,U){var oe=ot(z),W=ot(U);return{start:{offset:z,line:oe.line,column:oe.column},end:{offset:U,line:W.line,column:W.column}}}function et(z){B<Ue||(B>Ue&&(Ue=B,je=[]),je.push(z))}function oi(z,U,oe){return new r(r.buildMessage(z,U),z,U,oe)}function Mi(){var z,U,oe,W,me;for(z=B,U=[],oe=Ut();oe!==o;)U.push(oe),oe=Ut();if(U!==o)if(oe=fe(),oe===o&&(oe=null),oe!==o){for(W=[],me=Ut();me!==o;)W.push(me),me=Ut();W!==o?(U=c(oe),z=U):(B=z,z=o)}else B=z,z=o;else B=z,z=o;return z}function fe(){var z,U,oe,W,me,Ve;if(z=B,U=Ie(),U!==o){for(oe=[],W=B,me=[],Ve=Ut();Ve!==o;)me.push(Ve),Ve=Ut();for(me!==o?(Ve=Ie(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);W!==o;){for(oe.push(W),W=B,me=[],Ve=Ut();Ve!==o;)me.push(Ve),Ve=Ut();me!==o?(Ve=Ie(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o)}oe!==o?(U=u(U,oe),z=U):(B=z,z=o)}else B=z,z=o;return z}function Ie(){var z,U,oe,W,me,Ve;if(z=B,U=Ye(),U!==o){for(oe=[],W=B,me=[],Ve=Ut();Ve!==o;)me.push(Ve),Ve=Ut();for(me!==o?(Ve=ke(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);W!==o;){for(oe.push(W),W=B,me=[],Ve=Ut();Ve!==o;)me.push(Ve),Ve=Ut();me!==o?(Ve=ke(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o)}oe!==o?(U=u(U,oe),z=U):(B=z,z=o)}else B=z,z=o;return z}function ke(){var z;return z=ct(),z===o&&(z=Gt(),z===o&&(z=br(),z===o&&(z=Nt(),z===o&&(z=ls(),z===o&&(z=Ph(),z===o&&(z=Y(),z===o&&(z=xe(),z===o&&(z=tt())))))))),z}function Ye(){var z,U,oe,W,me,Ve,Ds;if(z=B,d.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(f)),U!==o){for(oe=[],W=Ut();W!==o;)oe.push(W),W=Ut();oe!==o?(W=ht(),W!==o?(me=B,Ve=Pt(),Ve===o&&(Ve=null),Ve!==o?(Ds=qt(),Ds!==o?(Ve=[Ve,Ds],me=Ve):(B=me,me=o)):(B=me,me=o),me===o&&(me=null),me!==o?(U=p(U,W,me),z=U):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)}else B=z,z=o;return z}function ct(){var z,U;return z=B,m.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(g)),U!==o&&(U=v()),z=U,z}function Gt(){var z,U,oe,W;if(z=B,y.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(x)),U!==o){for(oe=[],W=Ut();W!==o;)oe.push(W),W=Ut();oe!==o?(W=qt(),W!==o?(U=w(U,W),z=U):(B=z,z=o)):(B=z,z=o)}else B=z,z=o;return z}function qt(){var z,U,oe,W,me,Ve;if(z=B,U=ht(),U!==o){for(oe=[],W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=ht(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);W!==o;)oe.push(W),W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=ht(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);oe!==o?(U=u(U,oe),z=U):(B=z,z=o)}else B=z,z=o;return z}function br(){var z,U,oe,W;if(z=B,_.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(b)),U!==o){for(oe=[],W=Ut();W!==o;)oe.push(W),W=Ut();oe!==o?(W=Ys(),W!==o?(U=M(U,W),z=U):(B=z,z=o)):(B=z,z=o)}else B=z,z=o;return z}function Ys(){var z,U,oe,W,me,Ve;if(z=B,U=kt(),U!==o){for(oe=[],W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=kt(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);W!==o;)oe.push(W),W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=kt(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);oe!==o?(U=u(U,oe),z=U):(B=z,z=o)}else B=z,z=o;return z}function Nt(){var z,U,oe,W;if(z=B,S.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(A)),U!==o){for(oe=[],W=Ut();W!==o;)oe.push(W),W=Ut();oe!==o?(W=Ys(),W!==o?(U=C(U,W),z=U):(B=z,z=o)):(B=z,z=o)}else B=z,z=o;return z}function ls(){var z,U,oe,W;if(z=B,T.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(D)),U!==o){for(oe=[],W=Ut();W!==o;)oe.push(W),W=Ut();oe!==o?(W=h1(),W!==o?(U=w(U,W),z=U):(B=z,z=o)):(B=z,z=o)}else B=z,z=o;return z}function h1(){var z,U,oe,W,me,Ve;if(z=B,U=Ta(),U!==o){for(oe=[],W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=Ta(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);W!==o;)oe.push(W),W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=Ta(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);oe!==o?(U=u(U,oe),z=U):(B=z,z=o)}else B=z,z=o;return z}function Ta(){var z,U,oe,W,me,Ve;return z=B,U=ht(),U!==o?(oe=Pt(),oe===o&&(oe=null),oe!==o?(W=ht(),W!==o?(me=Pt(),me===o&&(me=null),me!==o?(Ve=ht(),Ve!==o?(U=R(U,W,Ve),z=U):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)):(B=z,z=o),z}function Ph(){var z,U,oe,W;if(z=B,O.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(j)),U!==o){for(oe=[],W=Ut();W!==o;)oe.push(W),W=Ut();oe!==o?(W=_0(),W!==o?(U=w(U,W),z=U):(B=z,z=o)):(B=z,z=o)}else B=z,z=o;return z}function _0(){var z,U,oe,W,me,Ve;if(z=B,U=io(),U!==o){for(oe=[],W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=io(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);W!==o;)oe.push(W),W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=io(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);oe!==o?(U=u(U,oe),z=U):(B=z,z=o)}else B=z,z=o;return z}function io(){var z,U,oe,W;return z=B,U=ht(),U!==o?(oe=Pt(),oe===o&&(oe=null),oe!==o?(W=ht(),W!==o?(U=X(U,W),z=U):(B=z,z=o)):(B=z,z=o)):(B=z,z=o),z}function Y(){var z,U,oe,W;if(z=B,N.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(k)),U!==o){for(oe=[],W=Ut();W!==o;)oe.push(W),W=Ut();oe!==o?(W=Me(),W!==o?(U=w(U,W),z=U):(B=z,z=o)):(B=z,z=o)}else B=z,z=o;return z}function Me(){var z,U,oe,W,me,Ve;if(z=B,U=Pe(),U!==o){for(oe=[],W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=Pe(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);W!==o;)oe.push(W),W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=Pe(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);oe!==o?(U=u(U,oe),z=U):(B=z,z=o)}else B=z,z=o;return z}function Pe(){var z,U,oe,W;return z=B,U=ht(),U!==o?(oe=Pt(),oe===o&&(oe=null),oe!==o?(W=ht(),W!==o?(U=ne(U,W),z=U):(B=z,z=o)):(B=z,z=o)):(B=z,z=o),z}function xe(){var z,U,oe,W;if(z=B,te.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(Q)),U!==o){for(oe=[],W=Ut();W!==o;)oe.push(W),W=Ut();oe!==o?(W=Oe(),W!==o?(U=w(U,W),z=U):(B=z,z=o)):(B=z,z=o)}else B=z,z=o;return z}function Oe(){var z,U,oe,W,me,Ve;if(z=B,U=ht(),U!==o){for(oe=[],W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=ht(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);W!==o;)oe.push(W),W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=ht(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);oe!==o?(U=u(U,oe),z=U):(B=z,z=o)}else B=z,z=o;return z}function tt(){var z,U,oe,W;if(z=B,Z.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(de)),U!==o){for(oe=[],W=Ut();W!==o;)oe.push(W),W=Ut();oe!==o?(W=St(),W!==o?(U=w(U,W),z=U):(B=z,z=o)):(B=z,z=o)}else B=z,z=o;return z}function St(){var z,U,oe,W,me,Ve;if(z=B,U=Ct(),U!==o){for(oe=[],W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=Ct(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);W!==o;)oe.push(W),W=B,me=Pt(),me===o&&(me=null),me!==o?(Ve=Ct(),Ve!==o?(me=[me,Ve],W=me):(B=W,W=o)):(B=W,W=o);oe!==o?(U=u(U,oe),z=U):(B=z,z=o)}else B=z,z=o;return z}function Ct(){var z,U,oe,W,me,Ve,Ds,Qc,hl,S0,Zc,Jc;return z=B,U=Jt(),U!==o?(oe=Pt(),oe===o&&(oe=null),oe!==o?(W=Jt(),W!==o?(me=Pt(),me===o&&(me=null),me!==o?(Ve=kt(),Ve!==o?(Ds=Pt(),Ds!==o?(Qc=Ft(),Qc!==o?(hl=Pt(),hl===o&&(hl=null),hl!==o?(S0=Ft(),S0!==o?(Zc=Pt(),Zc===o&&(Zc=null),Zc!==o?(Jc=ht(),Jc!==o?(U=ee(U,W,Ve,Qc,S0,Jc),z=U):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)):(B=z,z=o)):(B=z,z=o),z}function ht(){var z,U,oe,W;return z=B,U=kt(),U!==o?(oe=Pt(),oe===o&&(oe=null),oe!==o?(W=kt(),W!==o?(U=le(U,W),z=U):(B=z,z=o)):(B=z,z=o)):(B=z,z=o),z}function Jt(){var z,U;return z=B,U=hs(),U===o&&(U=Ts()),U!==o&&(U=$(U)),z=U,z}function kt(){var z,U,oe,W;return z=B,U=B,oe=Ht(),oe===o&&(oe=null),oe!==o?(W=hs(),W!==o?(oe=[oe,W],U=oe):(B=U,U=o)):(B=U,U=o),U===o&&(U=B,oe=Ht(),oe===o&&(oe=null),oe!==o?(W=Ts(),W!==o?(oe=[oe,W],U=oe):(B=U,U=o)):(B=U,U=o)),U!==o&&(U=K(U)),z=U,z}function Ft(){var z,U;return z=B,J.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(se)),U!==o&&(U=ae(U)),z=U,z}function Pt(){var z,U,oe,W,me;if(z=B,U=[],oe=Ut(),oe!==o)for(;oe!==o;)U.push(oe),oe=Ut();else U=o;if(U!==o)if(oe=er(),oe===o&&(oe=null),oe!==o){for(W=[],me=Ut();me!==o;)W.push(me),me=Ut();W!==o?(U=[U,oe,W],z=U):(B=z,z=o)}else B=z,z=o;else B=z,z=o;if(z===o){if(z=B,U=B,oe=er(),oe!==o){for(W=[],me=Ut();me!==o;)W.push(me),me=Ut();W!==o?(oe=[oe,W],U=oe):(B=U,U=o)}else B=U,U=o;U!==o&&(U=Ae()),z=U}return z}function er(){var z;return a.charCodeAt(B)===44?(z=F,B++):(z=o,et(V)),z}function hs(){var z,U,oe,W;return z=B,U=B,oe=Pa(),oe!==o?(W=Gi(),W===o&&(W=null),W!==o?(oe=[oe,W],U=oe):(B=U,U=o)):(B=U,U=o),U===o&&(U=B,oe=Ts(),oe!==o?(W=Gi(),W!==o?(oe=[oe,W],U=oe):(B=U,U=o)):(B=U,U=o)),U!==o&&(U=ie(U)),z=U,z}function Pa(){var z,U,oe,W,me;return z=B,U=B,oe=Ts(),oe===o&&(oe=null),oe!==o?(a.charCodeAt(B)===46?(W=ue,B++):(W=o,et(ve)),W!==o?(me=Ts(),me!==o?(oe=[oe,W,me],U=oe):(B=U,U=o)):(B=U,U=o)):(B=U,U=o),U===o&&(U=B,oe=Ts(),oe!==o?(a.charCodeAt(B)===46?(W=ue,B++):(W=o,et(ve)),W!==o?(oe=[oe,W],U=oe):(B=U,U=o)):(B=U,U=o)),U!==o&&(U=ie(U)),z=U,z}function Gi(){var z,U,oe,W,me;return z=B,U=B,ge.test(a.charAt(B))?(oe=a.charAt(B),B++):(oe=o,et(_e)),oe!==o?(W=Ht(),W===o&&(W=null),W!==o?(me=Ts(),me!==o?(oe=[oe,W,me],U=oe):(B=U,U=o)):(B=U,U=o)):(B=U,U=o),U!==o&&(U=ie(U)),z=U,z}function Ht(){var z;return ye.test(a.charAt(B))?(z=a.charAt(B),B++):(z=o,et(Se)),z}function Ts(){var z,U,oe;if(z=B,U=[],pe.test(a.charAt(B))?(oe=a.charAt(B),B++):(oe=o,et(G)),oe!==o)for(;oe!==o;)U.push(oe),pe.test(a.charAt(B))?(oe=a.charAt(B),B++):(oe=o,et(G));else U=o;return U!==o&&(U=L(U)),z=U,z}function Ut(){var z,U;return z=B,he.test(a.charAt(B))?(U=a.charAt(B),B++):(U=o,et(Ce)),U!==o&&(U=Ae()),z=U,z}function Ps(z,U){if(!U)return[z];for(var oe=[z],W=0,me=U.length;W<me;W++)oe[W+1]=U[W][1];return oe}var ln={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var Ks in ln)ln[Ks.toUpperCase()]=ln[Ks];function Qs(z,U){U||(U=[{}]);for(var oe=U.length;oe--;){var W={code:z,command:ln[z]};z==z.toLowerCase()&&(W.relative=!0);for(var me in U[oe])W[me]=U[oe][me];U[oe]=W}return U}if(Ee=h(),Ee!==o&&B===a.length)return Ee;throw Ee!==o&&B<a.length&&et(Je()),oi(je,Ue<a.length?a.charAt(Ue):null,Ue<a.length?Qe(Ue,Ue+1):Qe(Ue,Ue))}t.exports={SyntaxError:r,parse:s}}),Cz=Hc((e,t)=>{var i=O$().parse;i.parseSVG=i,i.makeAbsolute=r,t.exports=i;function r(s){var a,n={x:0,y:0},o={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return s.forEach(function(l){l.command==="moveto"&&(a=l),l.x0=n.x,l.y0=n.y;for(var h in o)h in l&&(l[h]+=l.relative?l[o[h]]:0);"x"in l||(l.x=n.x),"y"in l||(l.y=n.y),l.relative=!1,l.code=l.code.toUpperCase(),l.command=="closepath"&&(l.x=a.x,l.y=a.y),n=l}),s}}),R$=Hc((e,t)=>{t.exports=function(i,r){for(var s=i.split("."),a=r.split("."),n=0;n<3;n++){var o=Number(s[n]),l=Number(a[n]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return 0}}),a0="149",$s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},L$=0,EM=1,z$=2,Tw=1,B$=2,m3=3,tn=0,r1=1,N1=2,Or=0,Ac=1,TM=2,PM=3,DM=4,k$=5,F2=100,F$=101,N$=102,IM=103,OM=104,U$=200,V$=201,j$=202,G$=203,Ez=204,Tz=205,H$=206,W$=207,q$=208,X$=209,Y$=210,K$=0,Q$=1,Z$=2,n6=3,J$=4,$$=5,eee=6,tee=7,Pz=0,iee=1,ree=2,Hn=0,see=1,aee=2,nee=3,oee=4,lee=5,Dz=300,Lc=301,zc=302,o6=303,l6=304,df=306,Bo=1e3,Wi=1001,h6=1002,jt=1003,RM=1004,iy=1005,Bt=1006,hee=1007,ku=1008,j1=1009,cee=1010,uee=1011,Iz=1012,dee=1013,ko=1014,bi=1015,Jo=1016,fee=1017,pee=1018,Mc=1020,mee=1021,Ki=1023,gee=1024,vee=1025,Cc=1026,Bc=1027,Mm=1028,yee=1029,pg=1030,xee=1031,Oz=1033,ry=33776,sy=33777,ay=33778,ny=33779,LM=35840,zM=35841,BM=35842,kM=35843,bee=36196,FM=37492,NM=37496,UM=37808,VM=37809,jM=37810,GM=37811,HM=37812,WM=37813,qM=37814,XM=37815,YM=37816,KM=37817,QM=37818,ZM=37819,JM=37820,$M=37821,oy=36492,wee=36283,eC=36284,tC=36285,iC=36286,Rz=2200,Lz=2201,Pw=2202,mg=2300,gg=2301,ly=2302,Z2=2400,J2=2401,vg=2402,Dw=2500,_ee=2501,rn=3e3,Rt=3001,ol=3200,zz=3201,See=0,Aee=1,En="srgb",yg="srgb-linear",hy=7680,Mee=519,c6=35044,Cee=35048,u6="300 es",d6=1035,C1=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let i=this._listeners[e];if(i!==void 0){let r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let i=t.slice(0);for(let r=0,s=i.length;r<s;r++)i[r].call(this,e);e.target=null}}},D1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],rC=1234567,q3=Math.PI/180,Dd=180/Math.PI;function ba(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(D1[e&255]+D1[e>>8&255]+D1[e>>16&255]+D1[e>>24&255]+"-"+D1[t&255]+D1[t>>8&255]+"-"+D1[t>>16&15|64]+D1[t>>24&255]+"-"+D1[i&63|128]+D1[i>>8&255]+"-"+D1[i>>16&255]+D1[i>>24&255]+D1[r&255]+D1[r>>8&255]+D1[r>>16&255]+D1[r>>24&255]).toLowerCase()}function Er(e,t,i){return Math.max(t,Math.min(i,e))}function Iw(e,t){return(e%t+t)%t}function Eee(e,t,i,r,s){return r+(e-t)*(s-r)/(i-t)}function Tee(e,t,i){return e!==t?(i-e)/(t-e):0}function X3(e,t,i){return(1-i)*e+i*t}function Pee(e,t,i,r){return X3(e,t,1-Math.exp(-i*r))}function Dee(e,t=1){return t-Math.abs(Iw(e,t*2)-t)}function Iee(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))}function Oee(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(e*6-15)+10))}function Ree(e,t){return e+Math.floor(Math.random()*(t-e+1))}function Lee(e,t){return e+Math.random()*(t-e)}function zee(e){return e*(.5-Math.random())}function Bee(e){e!==void 0&&(rC=e);let t=rC+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function kee(e){return e*q3}function Fee(e){return e*Dd}function f6(e){return(e&e-1)===0&&e!==0}function Bz(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function xg(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Nee(e,t,i,r,s){let a=Math.cos,n=Math.sin,o=a(i/2),l=n(i/2),h=a((t+r)/2),c=n((t+r)/2),u=a((t-r)/2),d=n((t-r)/2),f=a((r-t)/2),p=n((r-t)/2);switch(s){case"XYX":e.set(o*c,l*u,l*d,o*h);break;case"YZY":e.set(l*d,o*c,l*u,o*h);break;case"ZXZ":e.set(l*u,l*d,o*c,o*h);break;case"XZX":e.set(o*c,l*p,l*f,o*h);break;case"YXY":e.set(l*f,o*c,l*p,o*h);break;case"ZYZ":e.set(l*p,l*f,o*c,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Fo(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Oi(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var Ke=Object.freeze({__proto__:null,DEG2RAD:q3,RAD2DEG:Dd,ceilPowerOfTwo:Bz,clamp:Er,damp:Pee,degToRad:kee,denormalize:Fo,euclideanModulo:Iw,floorPowerOfTwo:xg,generateUUID:ba,inverseLerp:Tee,isPowerOfTwo:f6,lerp:X3,mapLinear:Eee,normalize:Oi,pingpong:Dee,radToDeg:Fee,randFloat:Lee,randFloatSpread:zee,randInt:Ree,seededRandom:Bee,setQuaternionFromProperEuler:Nee,smootherstep:Oee,smoothstep:Iee}),re=class{constructor(e=0,t=0){re.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Dr=class{constructor(){Dr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,a,n,o,l){let h=this.elements;return h[0]=e,h[1]=r,h[2]=n,h[3]=t,h[4]=s,h[5]=o,h[6]=i,h[7]=a,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,a=i[0],n=i[3],o=i[6],l=i[1],h=i[4],c=i[7],u=i[2],d=i[5],f=i[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],x=r[7],w=r[2],_=r[5],b=r[8];return s[0]=a*p+n*v+o*w,s[3]=a*m+n*y+o*_,s[6]=a*g+n*x+o*b,s[1]=l*p+h*v+c*w,s[4]=l*m+h*y+c*_,s[7]=l*g+h*x+c*b,s[2]=u*p+d*v+f*w,s[5]=u*m+d*y+f*_,s[8]=u*g+d*x+f*b,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],n=e[5],o=e[6],l=e[7],h=e[8];return t*a*h-t*n*l-i*s*h+i*n*o+r*s*l-r*a*o}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],n=e[5],o=e[6],l=e[7],h=e[8],c=h*a-n*l,u=n*o-h*s,d=l*s-a*o,f=t*c+i*u+r*d;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let p=1/f;return e[0]=c*p,e[1]=(r*l-h*i)*p,e[2]=(n*i-r*a)*p,e[3]=u*p,e[4]=(h*t-r*o)*p,e[5]=(r*s-n*t)*p,e[6]=d*p,e[7]=(i*o-l*t)*p,e[8]=(a*t-i*s)*p,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,n){let o=Math.cos(s),l=Math.sin(s);return this.set(i*o,i*l,-i*(o*a+l*n)+a+e,-r*l,r*o,-r*(-l*a+o*n)+n+t,0,0,1),this}scale(e,t){return this.premultiply(cy.makeScale(e,t)),this}rotate(e){return this.premultiply(cy.makeRotation(-e)),this}translate(e,t){return this.premultiply(cy.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},cy=new Dr;function kz(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var Uee={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Gf(e,t){return new Uee[e](t)}function Id(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Vee(e,t,i){return new Promise(function(r,s){function a(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:s();break;case e.TIMEOUT_EXPIRED:setTimeout(a,i);break;default:r()}}setTimeout(a,i)})}function Ec(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function Cm(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var uy={[En]:{[yg]:Ec},[yg]:{[En]:Cm}},H1={legacyMode:!0,get workingColorSpace(){return yg},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,i){if(this.legacyMode||t===i||!t||!i)return e;if(uy[t]&&uy[t][i]!==void 0){let r=uy[t][i];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Fz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Br={r:0,g:0,b:0},Ia={h:0,s:0,l:0},Hf={h:0,s:0,l:0};function dy(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*6*(2/3-i):e}function Wf(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var pt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=En){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,H1.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=H1.workingColorSpace){return this.r=e,this.g=t,this.b=i,H1.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=H1.workingColorSpace){if(e=Iw(e,1),t=Er(t,0,1),i=Er(i,0,1),t===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=dy(a,s,e+1/3),this.g=dy(a,s,e),this.b=dy(a,s,e-1/3)}return H1.toWorkingColorSpace(this,r),this}setStyle(e,t=En){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s,a=r[1],n=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,H1.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,H1.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n)){let o=parseFloat(s[1])/360,l=parseFloat(s[2])/100,h=parseFloat(s[3])/100;return i(s[4]),this.setHSL(o,l,h,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,H1.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,H1.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=En){let i=Fz[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ec(e.r),this.g=Ec(e.g),this.b=Ec(e.b),this}copyLinearToSRGB(e){return this.r=Cm(e.r),this.g=Cm(e.g),this.b=Cm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=En){return H1.fromWorkingColorSpace(Wf(this,Br),e),Er(Br.r*255,0,255)<<16^Er(Br.g*255,0,255)<<8^Er(Br.b*255,0,255)<<0}getHexString(e=En){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=H1.workingColorSpace){H1.fromWorkingColorSpace(Wf(this,Br),t);let i=Br.r,r=Br.g,s=Br.b,a=Math.max(i,r,s),n=Math.min(i,r,s),o,l,h=(n+a)/2;if(n===a)o=0,l=0;else{let c=a-n;switch(l=h<=.5?c/(a+n):c/(2-a-n),a){case i:o=(r-s)/c+(r<s?6:0);break;case r:o=(s-i)/c+2;break;case s:o=(i-r)/c+4;break}o/=6}return e.h=o,e.s=l,e.l=h,e}getRGB(e,t=H1.workingColorSpace){return H1.fromWorkingColorSpace(Wf(this,Br),t),e.r=Br.r,e.g=Br.g,e.b=Br.b,e}getStyle(e=En){return H1.fromWorkingColorSpace(Wf(this,Br),e),e!==En?`color(${e} ${Br.r} ${Br.g} ${Br.b})`:`rgb(${Br.r*255|0},${Br.g*255|0},${Br.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Ia),Ia.h+=e,Ia.s+=t,Ia.l+=i,this.setHSL(Ia.h,Ia.s,Ia.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ia),e.getHSL(Hf);let i=X3(Ia.h,Hf.h,t),r=X3(Ia.s,Hf.s,t),s=X3(Ia.l,Hf.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};pt.NAMES=Fz;var r2,Nz=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{r2===void 0&&(r2=Id("canvas")),r2.width=e.width,r2.height=e.height;let i=r2.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=r2}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Id("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Ec(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ec(t[i]/255)*255):t[i]=Ec(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Uz=class{constructor(e=null){this.isSource=!0,this.uuid=ba(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,n=r.length;a<n;a++)r[a].isDataTexture?s.push(fy(r[a].image)):s.push(fy(r[a]))}else s=fy(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function fy(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?Nz.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var jee=0,$i=class extends C1{constructor(e=$i.DEFAULT_IMAGE,t=$i.DEFAULT_MAPPING,i=Wi,r=Wi,s=Bt,a=ku,n=Ki,o=j1,l=$i.DEFAULT_ANISOTROPY,h=rn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jee++}),this.uuid=ba(),this.name="",this.source=new Uz(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=l,this.format=n,this.internalFormat=null,this.type=o,this.offset=new re(0,0),this.repeat=new re(1,1),this.center=new re(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Dz)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Bo:e.x=e.x-Math.floor(e.x);break;case Wi:e.x=e.x<0?0:1;break;case h6:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Bo:e.y=e.y-Math.floor(e.y);break;case Wi:e.y=e.y<0?0:1;break;case h6:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};$i.DEFAULT_IMAGE=null;$i.DEFAULT_MAPPING=Dz;$i.DEFAULT_ANISOTROPY=1;var Mt=class{constructor(e=0,t=0,i=0,r=1){Mt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s,a=e.elements,n=a[0],o=a[4],l=a[8],h=a[1],c=a[5],u=a[9],d=a[2],f=a[6],p=a[10];if(Math.abs(o-h)<.01&&Math.abs(l-d)<.01&&Math.abs(u-f)<.01){if(Math.abs(o+h)<.1&&Math.abs(l+d)<.1&&Math.abs(u+f)<.1&&Math.abs(n+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(n+1)/2,v=(c+1)/2,y=(p+1)/2,x=(o+h)/4,w=(l+d)/4,_=(u+f)/4;return g>v&&g>y?g<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(g),r=x/i,s=w/i):v>y?v<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(v),i=x/r,s=_/r):y<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(y),i=w/s,r=_/s),this.set(i,r,s,t),this}let m=Math.sqrt((f-u)*(f-u)+(l-d)*(l-d)+(h-o)*(h-o));return Math.abs(m)<.001&&(m=1),this.x=(f-u)/m,this.y=(l-d)/m,this.z=(h-o)/m,this.w=Math.acos((n+c+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},ei=class extends C1{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Mt(0,0,e,t),this.scissorTest=!1,this.viewport=new Mt(0,0,e,t);let r={width:e,height:t,depth:1};this.texture=new $i(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Bt,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Uz(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Vz=class extends $i{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=jt,this.minFilter=jt,this.wrapR=Wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Gee=class extends $i{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=jt,this.minFilter=jt,this.wrapR=Wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},jz=class extends ei{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;let s=this.texture;this.texture=[];for(let a=0;a<i;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},wt=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,n){let o=i[r+0],l=i[r+1],h=i[r+2],c=i[r+3],u=s[a+0],d=s[a+1],f=s[a+2],p=s[a+3];if(n===0){e[t+0]=o,e[t+1]=l,e[t+2]=h,e[t+3]=c;return}if(n===1){e[t+0]=u,e[t+1]=d,e[t+2]=f,e[t+3]=p;return}if(c!==p||o!==u||l!==d||h!==f){let m=1-n,g=o*u+l*d+h*f+c*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let w=Math.sqrt(y),_=Math.atan2(w,g*v);m=Math.sin(m*_)/w,n=Math.sin(n*_)/w}let x=n*v;if(o=o*m+u*x,l=l*m+d*x,h=h*m+f*x,c=c*m+p*x,m===1-n){let w=1/Math.sqrt(o*o+l*l+h*h+c*c);o*=w,l*=w,h*=w,c*=w}}e[t]=o,e[t+1]=l,e[t+2]=h,e[t+3]=c}static multiplyQuaternionsFlat(e,t,i,r,s,a){let n=i[r],o=i[r+1],l=i[r+2],h=i[r+3],c=s[a],u=s[a+1],d=s[a+2],f=s[a+3];return e[t]=n*f+h*c+o*d-l*u,e[t+1]=o*f+h*u+l*c-n*d,e[t+2]=l*f+h*d+n*u-o*c,e[t+3]=h*f-n*c-o*u-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let i=e._x,r=e._y,s=e._z,a=e._order,n=Math.cos,o=Math.sin,l=n(i/2),h=n(r/2),c=n(s/2),u=o(i/2),d=o(r/2),f=o(s/2);switch(a){case"XYZ":this._x=u*h*c+l*d*f,this._y=l*d*c-u*h*f,this._z=l*h*f+u*d*c,this._w=l*h*c-u*d*f;break;case"YXZ":this._x=u*h*c+l*d*f,this._y=l*d*c-u*h*f,this._z=l*h*f-u*d*c,this._w=l*h*c+u*d*f;break;case"ZXY":this._x=u*h*c-l*d*f,this._y=l*d*c+u*h*f,this._z=l*h*f+u*d*c,this._w=l*h*c-u*d*f;break;case"ZYX":this._x=u*h*c-l*d*f,this._y=l*d*c+u*h*f,this._z=l*h*f-u*d*c,this._w=l*h*c+u*d*f;break;case"YZX":this._x=u*h*c+l*d*f,this._y=l*d*c+u*h*f,this._z=l*h*f-u*d*c,this._w=l*h*c-u*d*f;break;case"XZY":this._x=u*h*c-l*d*f,this._y=l*d*c-u*h*f,this._z=l*h*f+u*d*c,this._w=l*h*c+u*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],n=t[5],o=t[9],l=t[2],h=t[6],c=t[10],u=i+n+c;if(u>0){let d=.5/Math.sqrt(u+1);this._w=.25/d,this._x=(h-o)*d,this._y=(s-l)*d,this._z=(a-r)*d}else if(i>n&&i>c){let d=2*Math.sqrt(1+i-n-c);this._w=(h-o)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(s+l)/d}else if(n>c){let d=2*Math.sqrt(1+n-i-c);this._w=(s-l)/d,this._x=(r+a)/d,this._y=.25*d,this._z=(o+h)/d}else{let d=2*Math.sqrt(1+c-i-n);this._w=(a-r)/d,this._x=(s+l)/d,this._y=(o+h)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Er(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,s=e._z,a=e._w,n=t._x,o=t._y,l=t._z,h=t._w;return this._x=i*h+a*n+r*l-s*o,this._y=r*h+a*o+s*n-i*l,this._z=s*h+a*l+i*o-r*n,this._w=a*h-i*n-r*o-s*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,s=this._z,a=this._w,n=a*e._w+i*e._x+r*e._y+s*e._z;if(n<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,n=-n):this.copy(e),n>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;let o=1-n*n;if(o<=Number.EPSILON){let d=1-t;return this._w=d*a+t*this._w,this._x=d*i+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),h=Math.atan2(l,n),c=Math.sin((1-t)*h)/l,u=Math.sin(t*h)/l;return this._w=a*c+this._w*u,this._x=i*c+this._x*u,this._y=r*c+this._y*u,this._z=s*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},E=class{constructor(t=0,i=0,r=0){E.prototype.isVector3=!0,this.x=t,this.y=i,this.z=r}set(t,i,r){return r===void 0&&(r=this.z),this.x=t,this.y=i,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(sC.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(sC.setFromAxisAngle(t,i))}applyMatrix3(t){let i=this.x,r=this.y,s=this.z,a=t.elements;return this.x=a[0]*i+a[3]*r+a[6]*s,this.y=a[1]*i+a[4]*r+a[7]*s,this.z=a[2]*i+a[5]*r+a[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let i=this.x,r=this.y,s=this.z,a=t.elements,n=1/(a[3]*i+a[7]*r+a[11]*s+a[15]);return this.x=(a[0]*i+a[4]*r+a[8]*s+a[12])*n,this.y=(a[1]*i+a[5]*r+a[9]*s+a[13])*n,this.z=(a[2]*i+a[6]*r+a[10]*s+a[14])*n,this}applyQuaternion(t){let i=this.x,r=this.y,s=this.z,a=t.x,n=t.y,o=t.z,l=t.w,h=l*i+n*s-o*r,c=l*r+o*i-a*s,u=l*s+a*r-n*i,d=-a*i-n*r-o*s;return this.x=h*l+d*-a+c*-o-u*-n,this.y=c*l+d*-n+u*-a-h*-o,this.z=u*l+d*-o+h*-n-c*-a,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let i=this.x,r=this.y,s=this.z,a=t.elements;return this.x=a[0]*i+a[4]*r+a[8]*s,this.y=a[1]*i+a[5]*r+a[9]*s,this.z=a[2]*i+a[6]*r+a[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){let r=t.x,s=t.y,a=t.z,n=i.x,o=i.y,l=i.z;return this.x=s*l-a*o,this.y=a*n-r*l,this.z=r*o-s*n,this}projectOnVector(t){let i=t.lengthSq();if(i===0)return this.set(0,0,0);let r=t.dot(this)/i;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return py.copy(this).projectOnVector(t),this.sub(py)}reflect(t){return this.sub(py.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;let r=this.dot(t)/i;return Math.acos(Er(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let i=this.x-t.x,r=this.y-t.y,s=this.z-t.z;return i*i+r*r+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,r){let s=Math.sin(i)*t;return this.x=s*Math.sin(r),this.y=Math.cos(i)*t,this.z=s*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,r){return this.x=t*Math.sin(i),this.y=r,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){let i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){let i=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=r,this.z=s,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=(Math.random()-.5)*2,i=Math.random()*Math.PI*2,r=Math.sqrt(1-t**2);return this.x=r*Math.cos(i),this.y=r*Math.sin(i),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},py=new E,sC=new wt,yr=class{constructor(e=new E(1/0,1/0,1/0),t=new E(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,n=-1/0;for(let o=0,l=e.length;o<l;o+=3){let h=e[o],c=e[o+1],u=e[o+2];h<t&&(t=h),c<i&&(i=c),u<r&&(r=u),h>s&&(s=h),c>a&&(a=c),u>n&&(n=u)}return this.min.set(t,i,r),this.max.set(s,a,n),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,n=-1/0;for(let o=0,l=e.count;o<l;o++){let h=e.getX(o),c=e.getY(o),u=e.getZ(o);h<t&&(t=h),c<i&&(i=c),u<r&&(r=u),h>s&&(s=h),c>a&&(a=c),u>n&&(n=u)}return this.min.set(t,i,r),this.max.set(s,a,n),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Bh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){let s=i.attributes.position;for(let a=0,n=s.count;a<n;a++)Bh.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Bh)}else i.boundingBox===null&&i.computeBoundingBox(),my.copy(i.boundingBox),my.applyMatrix4(e.matrixWorld),this.union(my);let r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Bh),Bh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(R0),qf.subVectors(this.max,R0),s2.subVectors(e.a,R0),a2.subVectors(e.b,R0),n2.subVectors(e.c,R0),fl.subVectors(a2,s2),pl.subVectors(n2,a2),kh.subVectors(s2,n2);let t=[0,-fl.z,fl.y,0,-pl.z,pl.y,0,-kh.z,kh.y,fl.z,0,-fl.x,pl.z,0,-pl.x,kh.z,0,-kh.x,-fl.y,fl.x,0,-pl.y,pl.x,0,-kh.y,kh.x,0];return!gy(t,s2,a2,n2,qf)||(t=[1,0,0,0,1,0,0,0,1],!gy(t,s2,a2,n2,qf))?!1:(Xf.crossVectors(fl,pl),t=[Xf.x,Xf.y,Xf.z],gy(t,s2,a2,n2,qf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Bh.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Bh).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(oo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),oo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),oo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),oo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),oo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),oo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),oo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),oo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(oo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},oo=[new E,new E,new E,new E,new E,new E,new E,new E],Bh=new E,my=new yr,s2=new E,a2=new E,n2=new E,fl=new E,pl=new E,kh=new E,R0=new E,qf=new E,Xf=new E,Fh=new E;function gy(e,t,i,r,s){for(let a=0,n=e.length-3;a<=n;a+=3){Fh.fromArray(e,a);let o=s.x*Math.abs(Fh.x)+s.y*Math.abs(Fh.y)+s.z*Math.abs(Fh.z),l=t.dot(Fh),h=i.dot(Fh),c=r.dot(Fh);if(Math.max(-Math.max(l,h,c),Math.min(l,h,c))>o)return!1}return!0}var Hee=new yr,L0=new E,vy=new E,Cs=class{constructor(e=new E,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):Hee.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;L0.subVectors(e,this.center);let t=L0.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(L0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(vy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(L0.copy(e.center).add(vy)),this.expandByPoint(L0.copy(e.center).sub(vy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},lo=new E,yy=new E,Yf=new E,ml=new E,xy=new E,Kf=new E,by=new E,n0=class{constructor(e=new E,t=new E(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,lo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=lo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(lo.copy(this.direction).multiplyScalar(t).add(this.origin),lo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){yy.copy(e).add(t).multiplyScalar(.5),Yf.copy(t).sub(e).normalize(),ml.copy(this.origin).sub(yy);let s=e.distanceTo(t)*.5,a=-this.direction.dot(Yf),n=ml.dot(this.direction),o=-ml.dot(Yf),l=ml.lengthSq(),h=Math.abs(1-a*a),c,u,d,f;if(h>0)if(c=a*o-n,u=a*n-o,f=s*h,c>=0)if(u>=-f)if(u<=f){let p=1/h;c*=p,u*=p,d=c*(c+a*u+2*n)+u*(a*c+u+2*o)+l}else u=s,c=Math.max(0,-(a*u+n)),d=-c*c+u*(u+2*o)+l;else u=-s,c=Math.max(0,-(a*u+n)),d=-c*c+u*(u+2*o)+l;else u<=-f?(c=Math.max(0,-(-a*s+n)),u=c>0?-s:Math.min(Math.max(-s,-o),s),d=-c*c+u*(u+2*o)+l):u<=f?(c=0,u=Math.min(Math.max(-s,-o),s),d=u*(u+2*o)+l):(c=Math.max(0,-(a*s+n)),u=c>0?s:Math.min(Math.max(-s,-o),s),d=-c*c+u*(u+2*o)+l);else u=a>0?-s:s,c=Math.max(0,-(a*u+n)),d=-c*c+u*(u+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(Yf).multiplyScalar(u).add(yy),d}intersectSphere(e,t){lo.subVectors(e.center,this.origin);let i=lo.dot(this.direction),r=lo.dot(lo)-i*i,s=e.radius*e.radius;if(r>s)return null;let a=Math.sqrt(s-r),n=i-a,o=i+a;return n<0&&o<0?null:n<0?this.at(o,t):this.at(n,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,n,o,l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(i=(e.min.x-u.x)*l,r=(e.max.x-u.x)*l):(i=(e.max.x-u.x)*l,r=(e.min.x-u.x)*l),h>=0?(s=(e.min.y-u.y)*h,a=(e.max.y-u.y)*h):(s=(e.max.y-u.y)*h,a=(e.min.y-u.y)*h),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),c>=0?(n=(e.min.z-u.z)*c,o=(e.max.z-u.z)*c):(n=(e.max.z-u.z)*c,o=(e.min.z-u.z)*c),i>o||n>r)||((n>i||i!==i)&&(i=n),(o<r||r!==r)&&(r=o),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,lo)!==null}intersectTriangle(e,t,i,r,s){xy.subVectors(t,e),Kf.subVectors(i,e),by.crossVectors(xy,Kf);let a=this.direction.dot(by),n;if(a>0){if(r)return null;n=1}else if(a<0)n=-1,a=-a;else return null;ml.subVectors(this.origin,e);let o=n*this.direction.dot(Kf.crossVectors(ml,Kf));if(o<0)return null;let l=n*this.direction.dot(xy.cross(ml));if(l<0||o+l>a)return null;let h=-n*ml.dot(by);return h<0?null:this.at(h/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Fe=class{constructor(){Fe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,a,n,o,l,h,c,u,d,f,p,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=a,g[9]=n,g[13]=o,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Fe().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/o2.setFromMatrixColumn(e,0).length(),s=1/o2.setFromMatrixColumn(e,1).length(),a=1/o2.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),n=Math.sin(i),o=Math.cos(r),l=Math.sin(r),h=Math.cos(s),c=Math.sin(s);if(e.order==="XYZ"){let u=a*h,d=a*c,f=n*h,p=n*c;t[0]=o*h,t[4]=-o*c,t[8]=l,t[1]=d+f*l,t[5]=u-p*l,t[9]=-n*o,t[2]=p-u*l,t[6]=f+d*l,t[10]=a*o}else if(e.order==="YXZ"){let u=o*h,d=o*c,f=l*h,p=l*c;t[0]=u+p*n,t[4]=f*n-d,t[8]=a*l,t[1]=a*c,t[5]=a*h,t[9]=-n,t[2]=d*n-f,t[6]=p+u*n,t[10]=a*o}else if(e.order==="ZXY"){let u=o*h,d=o*c,f=l*h,p=l*c;t[0]=u-p*n,t[4]=-a*c,t[8]=f+d*n,t[1]=d+f*n,t[5]=a*h,t[9]=p-u*n,t[2]=-a*l,t[6]=n,t[10]=a*o}else if(e.order==="ZYX"){let u=a*h,d=a*c,f=n*h,p=n*c;t[0]=o*h,t[4]=f*l-d,t[8]=u*l+p,t[1]=o*c,t[5]=p*l+u,t[9]=d*l-f,t[2]=-l,t[6]=n*o,t[10]=a*o}else if(e.order==="YZX"){let u=a*o,d=a*l,f=n*o,p=n*l;t[0]=o*h,t[4]=p-u*c,t[8]=f*c+d,t[1]=c,t[5]=a*h,t[9]=-n*h,t[2]=-l*h,t[6]=d*c+f,t[10]=u-p*c}else if(e.order==="XZY"){let u=a*o,d=a*l,f=n*o,p=n*l;t[0]=o*h,t[4]=-c,t[8]=l*h,t[1]=u*c+p,t[5]=a*h,t[9]=d*c-f,t[2]=f*c-d,t[6]=n*h,t[10]=p*c+u}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Wee,e,qee)}lookAt(e,t,i){let r=this.elements;return Rs.subVectors(e,t),Rs.lengthSq()===0&&(Rs.z=1),Rs.normalize(),gl.crossVectors(i,Rs),gl.lengthSq()===0&&(Math.abs(i.z)===1?Rs.x+=1e-4:Rs.z+=1e-4,Rs.normalize(),gl.crossVectors(i,Rs)),gl.normalize(),Qf.crossVectors(Rs,gl),r[0]=gl.x,r[4]=Qf.x,r[8]=Rs.x,r[1]=gl.y,r[5]=Qf.y,r[9]=Rs.y,r[2]=gl.z,r[6]=Qf.z,r[10]=Rs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,a=i[0],n=i[4],o=i[8],l=i[12],h=i[1],c=i[5],u=i[9],d=i[13],f=i[2],p=i[6],m=i[10],g=i[14],v=i[3],y=i[7],x=i[11],w=i[15],_=r[0],b=r[4],M=r[8],S=r[12],A=r[1],C=r[5],T=r[9],D=r[13],R=r[2],O=r[6],j=r[10],X=r[14],N=r[3],k=r[7],ne=r[11],te=r[15];return s[0]=a*_+n*A+o*R+l*N,s[4]=a*b+n*C+o*O+l*k,s[8]=a*M+n*T+o*j+l*ne,s[12]=a*S+n*D+o*X+l*te,s[1]=h*_+c*A+u*R+d*N,s[5]=h*b+c*C+u*O+d*k,s[9]=h*M+c*T+u*j+d*ne,s[13]=h*S+c*D+u*X+d*te,s[2]=f*_+p*A+m*R+g*N,s[6]=f*b+p*C+m*O+g*k,s[10]=f*M+p*T+m*j+g*ne,s[14]=f*S+p*D+m*X+g*te,s[3]=v*_+y*A+x*R+w*N,s[7]=v*b+y*C+x*O+w*k,s[11]=v*M+y*T+x*j+w*ne,s[15]=v*S+y*D+x*X+w*te,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],n=e[5],o=e[9],l=e[13],h=e[2],c=e[6],u=e[10],d=e[14],f=e[3],p=e[7],m=e[11],g=e[15];return f*(+s*o*c-r*l*c-s*n*u+i*l*u+r*n*d-i*o*d)+p*(+t*o*d-t*l*u+s*a*u-r*a*d+r*l*h-s*o*h)+m*(+t*l*c-t*n*d-s*a*c+i*a*d+s*n*h-i*l*h)+g*(-r*n*h-t*o*c+t*n*u+r*a*c-i*a*u+i*o*h)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],n=e[5],o=e[6],l=e[7],h=e[8],c=e[9],u=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=c*m*l-p*u*l+p*o*d-n*m*d-c*o*g+n*u*g,y=f*u*l-h*m*l-f*o*d+a*m*d+h*o*g-a*u*g,x=h*p*l-f*c*l+f*n*d-a*p*d-h*n*g+a*c*g,w=f*c*o-h*p*o-f*n*u+a*p*u+h*n*m-a*c*m,_=t*v+i*y+r*x+s*w;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let b=1/_;return e[0]=v*b,e[1]=(p*u*s-c*m*s-p*r*d+i*m*d+c*r*g-i*u*g)*b,e[2]=(n*m*s-p*o*s+p*r*l-i*m*l-n*r*g+i*o*g)*b,e[3]=(c*o*s-n*u*s-c*r*l+i*u*l+n*r*d-i*o*d)*b,e[4]=y*b,e[5]=(h*m*s-f*u*s+f*r*d-t*m*d-h*r*g+t*u*g)*b,e[6]=(f*o*s-a*m*s-f*r*l+t*m*l+a*r*g-t*o*g)*b,e[7]=(a*u*s-h*o*s+h*r*l-t*u*l-a*r*d+t*o*d)*b,e[8]=x*b,e[9]=(f*c*s-h*p*s-f*i*d+t*p*d+h*i*g-t*c*g)*b,e[10]=(a*p*s-f*n*s+f*i*l-t*p*l-a*i*g+t*n*g)*b,e[11]=(h*n*s-a*c*s-h*i*l+t*c*l+a*i*d-t*n*d)*b,e[12]=w*b,e[13]=(h*p*r-f*c*r+f*i*u-t*p*u-h*i*m+t*c*m)*b,e[14]=(f*n*r-a*p*r-f*i*o+t*p*o+a*i*m-t*n*m)*b,e[15]=(a*c*r-h*n*r+h*i*o-t*c*o-a*i*u+t*n*u)*b,this}scale(e){let t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,n=e.y,o=e.z,l=s*a,h=s*n;return this.set(l*a+i,l*n-r*o,l*o+r*n,0,l*n+r*o,h*n+i,h*o-r*a,0,l*o-r*n,h*o+r*a,s*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,s=t._x,a=t._y,n=t._z,o=t._w,l=s+s,h=a+a,c=n+n,u=s*l,d=s*h,f=s*c,p=a*h,m=a*c,g=n*c,v=o*l,y=o*h,x=o*c,w=i.x,_=i.y,b=i.z;return r[0]=(1-(p+g))*w,r[1]=(d+x)*w,r[2]=(f-y)*w,r[3]=0,r[4]=(d-x)*_,r[5]=(1-(u+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(f+y)*b,r[9]=(m-v)*b,r[10]=(1-(u+p))*b,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,s=o2.set(r[0],r[1],r[2]).length(),a=o2.set(r[4],r[5],r[6]).length(),n=o2.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Oa.copy(this);let o=1/s,l=1/a,h=1/n;return Oa.elements[0]*=o,Oa.elements[1]*=o,Oa.elements[2]*=o,Oa.elements[4]*=l,Oa.elements[5]*=l,Oa.elements[6]*=l,Oa.elements[8]*=h,Oa.elements[9]*=h,Oa.elements[10]*=h,t.setFromRotationMatrix(Oa),i.x=s,i.y=a,i.z=n,this}makePerspective(e,t,i,r,s,a){let n=this.elements,o=2*s/(t-e),l=2*s/(i-r),h=(t+e)/(t-e),c=(i+r)/(i-r),u=-(a+s)/(a-s),d=-2*a*s/(a-s);return n[0]=o,n[4]=0,n[8]=h,n[12]=0,n[1]=0,n[5]=l,n[9]=c,n[13]=0,n[2]=0,n[6]=0,n[10]=u,n[14]=d,n[3]=0,n[7]=0,n[11]=-1,n[15]=0,this}makeOrthographic(e,t,i,r,s,a){let n=this.elements,o=1/(t-e),l=1/(i-r),h=1/(a-s),c=(t+e)*o,u=(i+r)*l,d=(a+s)*h;return n[0]=2*o,n[4]=0,n[8]=0,n[12]=-c,n[1]=0,n[5]=2*l,n[9]=0,n[13]=-u,n[2]=0,n[6]=0,n[10]=-2*h,n[14]=-d,n[3]=0,n[7]=0,n[11]=0,n[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},o2=new E,Oa=new Fe,Wee=new E(0,0,0),qee=new E(1,1,1),gl=new E,Qf=new E,Rs=new E,aC=new Fe,nC=new wt,Vr=class{constructor(e=0,t=0,i=0,r=Vr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){let r=e.elements,s=r[0],a=r[4],n=r[8],o=r[1],l=r[5],h=r[9],c=r[2],u=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Er(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Er(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(n,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,s),this._z=0);break;case"ZXY":this._x=Math.asin(Er(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,s));break;case"ZYX":this._y=Math.asin(-Er(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(o,s)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Er(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,s)):(this._x=0,this._y=Math.atan2(n,d));break;case"XZY":this._z=Math.asin(-Er(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(n,s)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return aC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return nC.setFromEuler(this),this.setFromQuaternion(nC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Vr.DEFAULT_ORDER="XYZ";var Ow=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Xee=0,oC=new E,l2=new wt,ho=new Fe,Zf=new E,z0=new E,Yee=new E,Kee=new wt,lC=new E(1,0,0),hC=new E(0,1,0),cC=new E(0,0,1),Qee={type:"added"},uC={type:"removed"},yi=class extends C1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Xee++}),this.uuid=ba(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yi.DEFAULT_UP.clone();let e=new E,t=new Vr,i=new wt,r=new E(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Fe},normalMatrix:{value:new Dr}}),this.matrix=new Fe,this.matrixWorld=new Fe,this.matrixAutoUpdate=yi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=yi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ow,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return l2.setFromAxisAngle(e,t),this.quaternion.multiply(l2),this}rotateOnWorldAxis(e,t){return l2.setFromAxisAngle(e,t),this.quaternion.premultiply(l2),this}rotateX(e){return this.rotateOnAxis(lC,e)}rotateY(e){return this.rotateOnAxis(hC,e)}rotateZ(e){return this.rotateOnAxis(cC,e)}translateOnAxis(e,t){return oC.copy(e).applyQuaternion(this.quaternion),this.position.add(oC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(lC,e)}translateY(e){return this.translateOnAxis(hC,e)}translateZ(e){return this.translateOnAxis(cC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ho.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Zf.copy(e):Zf.set(e,t,i);let r=this.parent;this.updateWorldMatrix(!0,!1),z0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ho.lookAt(z0,Zf,this.up):ho.lookAt(Zf,z0,this.up),this.quaternion.setFromRotationMatrix(ho),r&&(ho.extractRotation(r.matrixWorld),l2.setFromRotationMatrix(ho),this.quaternion.premultiply(l2.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Qee)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(uC)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(uC)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ho.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ho.multiply(e.parent.matrixWorld)),e.applyMatrix4(ho),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){let s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){let a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(i=i.concat(a))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(z0,e,Yee),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(z0,Kee,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let i=0,r=t.length;i<r;i++){let s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let r=this.children;for(let s=0,a=r.length;s<a;s++){let n=r[s];n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(n,o){return n[o.uuid]===void 0&&(n[o.uuid]=o.toJSON(e)),o.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);let n=this.geometry.parameters;if(n!==void 0&&n.shapes!==void 0){let o=n.shapes;if(Array.isArray(o))for(let l=0,h=o.length;l<h;l++){let c=o[l];s(e.shapes,c)}else s(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let n=[];for(let o=0,l=this.material.length;o<l;o++)n.push(s(e.materials,this.material[o]));r.material=n}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let n=0;n<this.children.length;n++)r.children.push(this.children[n].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let n=0;n<this.animations.length;n++){let o=this.animations[n];r.animations.push(s(e.animations,o))}}if(t){let n=a(e.geometries),o=a(e.materials),l=a(e.textures),h=a(e.images),c=a(e.shapes),u=a(e.skeletons),d=a(e.animations),f=a(e.nodes);n.length>0&&(i.geometries=n),o.length>0&&(i.materials=o),l.length>0&&(i.textures=l),h.length>0&&(i.images=h),c.length>0&&(i.shapes=c),u.length>0&&(i.skeletons=u),d.length>0&&(i.animations=d),f.length>0&&(i.nodes=f)}return i.object=r,i;function a(n){let o=[];for(let l in n){let h=n[l];delete h.metadata,o.push(h)}return o}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){let r=e.children[i];this.add(r.clone())}return this}};yi.DEFAULT_UP=new E(0,1,0);yi.DEFAULT_MATRIX_AUTO_UPDATE=!0;yi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Ra=new E,co=new E,wy=new E,uo=new E,h2=new E,c2=new E,dC=new E,_y=new E,Sy=new E,Ay=new E,y1=class{constructor(e=new E,t=new E,i=new E){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ra.subVectors(e,t),r.cross(Ra);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Ra.subVectors(r,t),co.subVectors(i,t),wy.subVectors(e,t);let a=Ra.dot(Ra),n=Ra.dot(co),o=Ra.dot(wy),l=co.dot(co),h=co.dot(wy),c=a*l-n*n;if(c===0)return s.set(-2,-1,-1);let u=1/c,d=(l*o-n*h)*u,f=(a*h-n*o)*u;return s.set(1-d-f,f,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,uo),uo.x>=0&&uo.y>=0&&uo.x+uo.y<=1}static getUV(e,t,i,r,s,a,n,o){return this.getBarycoord(e,t,i,r,uo),o.set(0,0),o.addScaledVector(s,uo.x),o.addScaledVector(a,uo.y),o.addScaledVector(n,uo.z),o}static isFrontFacing(e,t,i,r){return Ra.subVectors(i,t),co.subVectors(e,t),Ra.cross(co).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ra.subVectors(this.c,this.b),co.subVectors(this.a,this.b),Ra.cross(co).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return y1.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return y1.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return y1.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return y1.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return y1.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,s=this.c,a,n;h2.subVectors(r,i),c2.subVectors(s,i),_y.subVectors(e,i);let o=h2.dot(_y),l=c2.dot(_y);if(o<=0&&l<=0)return t.copy(i);Sy.subVectors(e,r);let h=h2.dot(Sy),c=c2.dot(Sy);if(h>=0&&c<=h)return t.copy(r);let u=o*c-h*l;if(u<=0&&o>=0&&h<=0)return a=o/(o-h),t.copy(i).addScaledVector(h2,a);Ay.subVectors(e,s);let d=h2.dot(Ay),f=c2.dot(Ay);if(f>=0&&d<=f)return t.copy(s);let p=d*l-o*f;if(p<=0&&l>=0&&f<=0)return n=l/(l-f),t.copy(i).addScaledVector(c2,n);let m=h*f-d*c;if(m<=0&&c-h>=0&&d-f>=0)return dC.subVectors(s,r),n=(c-h)/(c-h+(d-f)),t.copy(r).addScaledVector(dC,n);let g=1/(m+p+u);return a=p*g,n=u*g,t.copy(i).addScaledVector(h2,a).addScaledVector(c2,n)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Zee=0,ff=class extends C1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Zee++}),this.uuid=ba(),this.name="",this.type="Material",this.blending=Ac,this.side=tn,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ez,this.blendDst=Tz,this.blendEquation=F2,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=n6,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Mee,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hy,this.stencilZFail=hy,this.stencilZPass=hy,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ac&&(i.blending=this.blending),this.side!==tn&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){let a=[];for(let n in s){let o=s[n];delete o.metadata,a.push(o)}return a}if(t){let s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},$o=class extends ff{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pz,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},_r=new E,Jf=new re,mt=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=c6,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Jf.fromBufferAttribute(this,t),Jf.applyMatrix3(e),this.setXY(t,Jf.x,Jf.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)_r.fromBufferAttribute(this,t),_r.applyMatrix3(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)_r.fromBufferAttribute(this,t),_r.applyMatrix4(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)_r.fromBufferAttribute(this,t),_r.applyNormalMatrix(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)_r.fromBufferAttribute(this,t),_r.transformDirection(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Fo(t,this.array)),t}setX(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Fo(t,this.array)),t}setY(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Fo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Fo(t,this.array)),t}setW(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array),r=Oi(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array),r=Oi(r,this.array),s=Oi(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==c6&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},Gz=class extends mt{constructor(e,t,i){super(new Uint16Array(e),t,i)}},fu=class extends mt{constructor(e,t,i){super(new Uint32Array(e),t,i)}},Xe=class extends mt{constructor(t,i,r){super(new Float32Array(t),i,r)}},Jee=0,ea=new Fe,My=new yi,u2=new E,Ls=new yr,B0=new yr,Kr=new E,rt=class extends C1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Jee++}),this.uuid=ba(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(kz(e)?fu:Gz)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new Dr().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ea.makeRotationFromQuaternion(e),this.applyMatrix4(ea),this}rotateX(e){return ea.makeRotationX(e),this.applyMatrix4(ea),this}rotateY(e){return ea.makeRotationY(e),this.applyMatrix4(ea),this}rotateZ(e){return ea.makeRotationZ(e),this.applyMatrix4(ea),this}translate(e,t,i){return ea.makeTranslation(e,t,i),this.applyMatrix4(ea),this}scale(e,t,i){return ea.makeScale(e,t,i),this.applyMatrix4(ea),this}lookAt(e){return My.lookAt(e),My.updateMatrix(),this.applyMatrix4(My.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(u2).negate(),this.translate(u2.x,u2.y,u2.z),this}setFromPoints(e){let t=[];for(let i=0,r=e.length;i<r;i++){let s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Xe(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new yr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new E(-1/0,-1/0,-1/0),new E(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let s=t[i];Ls.setFromBufferAttribute(s),this.morphTargetsRelative?(Kr.addVectors(this.boundingBox.min,Ls.min),this.boundingBox.expandByPoint(Kr),Kr.addVectors(this.boundingBox.max,Ls.max),this.boundingBox.expandByPoint(Kr)):(this.boundingBox.expandByPoint(Ls.min),this.boundingBox.expandByPoint(Ls.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cs);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new E,1/0);return}if(e){let i=this.boundingSphere.center;if(Ls.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){let n=t[s];B0.setFromBufferAttribute(n),this.morphTargetsRelative?(Kr.addVectors(Ls.min,B0.min),Ls.expandByPoint(Kr),Kr.addVectors(Ls.max,B0.max),Ls.expandByPoint(Kr)):(Ls.expandByPoint(B0.min),Ls.expandByPoint(B0.max))}Ls.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Kr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Kr));if(t)for(let s=0,a=t.length;s<a;s++){let n=t[s],o=this.morphTargetsRelative;for(let l=0,h=n.count;l<h;l++)Kr.fromBufferAttribute(n,l),o&&(u2.fromBufferAttribute(e,l),Kr.add(u2)),r=Math.max(r,i.distanceToSquared(Kr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,n=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new mt(new Float32Array(4*n),4));let o=this.getAttribute("tangent").array,l=[],h=[];for(let A=0;A<n;A++)l[A]=new E,h[A]=new E;let c=new E,u=new E,d=new E,f=new re,p=new re,m=new re,g=new E,v=new E;function y(A,C,T){c.fromArray(r,A*3),u.fromArray(r,C*3),d.fromArray(r,T*3),f.fromArray(a,A*2),p.fromArray(a,C*2),m.fromArray(a,T*2),u.sub(c),d.sub(c),p.sub(f),m.sub(f);let D=1/(p.x*m.y-m.x*p.y);!isFinite(D)||(g.copy(u).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(D),v.copy(d).multiplyScalar(p.x).addScaledVector(u,-m.x).multiplyScalar(D),l[A].add(g),l[C].add(g),l[T].add(g),h[A].add(v),h[C].add(v),h[T].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:i.length}]);for(let A=0,C=x.length;A<C;++A){let T=x[A],D=T.start,R=T.count;for(let O=D,j=D+R;O<j;O+=3)y(i[O+0],i[O+1],i[O+2])}let w=new E,_=new E,b=new E,M=new E;function S(A){b.fromArray(s,A*3),M.copy(b);let C=l[A];w.copy(C),w.sub(b.multiplyScalar(b.dot(C))).normalize(),_.crossVectors(M,C);let T=_.dot(h[A])<0?-1:1;o[A*4]=w.x,o[A*4+1]=w.y,o[A*4+2]=w.z,o[A*4+3]=T}for(let A=0,C=x.length;A<C;++A){let T=x[A],D=T.start,R=T.count;for(let O=D,j=D+R;O<j;O+=3)S(i[O+0]),S(i[O+1]),S(i[O+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new mt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let u=0,d=i.count;u<d;u++)i.setXYZ(u,0,0,0);let r=new E,s=new E,a=new E,n=new E,o=new E,l=new E,h=new E,c=new E;if(e)for(let u=0,d=e.count;u<d;u+=3){let f=e.getX(u+0),p=e.getX(u+1),m=e.getX(u+2);r.fromBufferAttribute(t,f),s.fromBufferAttribute(t,p),a.fromBufferAttribute(t,m),h.subVectors(a,s),c.subVectors(r,s),h.cross(c),n.fromBufferAttribute(i,f),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),n.add(h),o.add(h),l.add(h),i.setXYZ(f,n.x,n.y,n.z),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z)}else for(let u=0,d=t.count;u<d;u+=3)r.fromBufferAttribute(t,u+0),s.fromBufferAttribute(t,u+1),a.fromBufferAttribute(t,u+2),h.subVectors(a,s),c.subVectors(r,s),h.cross(c),i.setXYZ(u+0,h.x,h.y,h.z),i.setXYZ(u+1,h.x,h.y,h.z),i.setXYZ(u+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Kr.fromBufferAttribute(e,t),Kr.normalize(),e.setXYZ(t,Kr.x,Kr.y,Kr.z)}toNonIndexed(){function e(n,o){let l=n.array,h=n.itemSize,c=n.normalized,u=new l.constructor(o.length*h),d=0,f=0;for(let p=0,m=o.length;p<m;p++){n.isInterleavedBufferAttribute?d=o[p]*n.data.stride+n.offset:d=o[p]*h;for(let g=0;g<h;g++)u[f++]=l[d++]}return new mt(u,h,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new rt,i=this.index.array,r=this.attributes;for(let n in r){let o=r[n],l=e(o,i);t.setAttribute(n,l)}let s=this.morphAttributes;for(let n in s){let o=[],l=s[n];for(let h=0,c=l.length;h<c;h++){let u=l[h],d=e(u,i);o.push(d)}t.morphAttributes[n]=o}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let n=0,o=a.length;n<o;n++){let l=a[n];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let o=this.parameters;for(let l in o)o[l]!==void 0&&(e[l]=o[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let o in i){let l=i[o];e.data.attributes[o]=l.toJSON(e.data)}let r={},s=!1;for(let o in this.morphAttributes){let l=this.morphAttributes[o],h=[];for(let c=0,u=l.length;c<u;c++){let d=l[c];h.push(d.toJSON(e.data))}h.length>0&&(r[o]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let n=this.boundingSphere;return n!==null&&(e.data.boundingSphere={center:n.center.toArray(),radius:n.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let r=e.attributes;for(let l in r){let h=r[l];this.setAttribute(l,h.clone(t))}let s=e.morphAttributes;for(let l in s){let h=[],c=s[l];for(let u=0,d=c.length;u<d;u++)h.push(c[u].clone(t));this.morphAttributes[l]=h}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let l=0,h=a.length;l<h;l++){let c=a[l];this.addGroup(c.start,c.count,c.materialIndex)}let n=e.boundingBox;n!==null&&(this.boundingBox=n.clone());let o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},fC=new Fe,d2=new n0,Cy=new Cs,k0=new E,F0=new E,N0=new E,Ey=new E,$f=new E,ep=new re,tp=new re,ip=new re,Ty=new E,rp=new E,zi=class extends yi{constructor(e=new rt,t=new $o){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){let a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let n=this.morphTargetInfluences;if(s&&n){$f.set(0,0,0);for(let o=0,l=s.length;o<l;o++){let h=n[o],c=s[o];h!==0&&(Ey.fromBufferAttribute(c,e),a?$f.addScaledVector(Ey,h):$f.addScaledVector(Ey.sub(t),h))}t.add($f)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Cy.copy(i.boundingSphere),Cy.applyMatrix4(s),e.ray.intersectsSphere(Cy)===!1)||(fC.copy(s).invert(),d2.copy(e.ray).applyMatrix4(fC),i.boundingBox!==null&&d2.intersectsBox(i.boundingBox)===!1))return;let a,n=i.index,o=i.attributes.position,l=i.attributes.uv,h=i.attributes.uv2,c=i.groups,u=i.drawRange;if(n!==null)if(Array.isArray(r))for(let d=0,f=c.length;d<f;d++){let p=c[d],m=r[p.materialIndex],g=Math.max(p.start,u.start),v=Math.min(n.count,Math.min(p.start+p.count,u.start+u.count));for(let y=g,x=v;y<x;y+=3){let w=n.getX(y),_=n.getX(y+1),b=n.getX(y+2);a=sp(this,m,e,d2,l,h,w,_,b),a&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{let d=Math.max(0,u.start),f=Math.min(n.count,u.start+u.count);for(let p=d,m=f;p<m;p+=3){let g=n.getX(p),v=n.getX(p+1),y=n.getX(p+2);a=sp(this,r,e,d2,l,h,g,v,y),a&&(a.faceIndex=Math.floor(p/3),t.push(a))}}else if(o!==void 0)if(Array.isArray(r))for(let d=0,f=c.length;d<f;d++){let p=c[d],m=r[p.materialIndex],g=Math.max(p.start,u.start),v=Math.min(o.count,Math.min(p.start+p.count,u.start+u.count));for(let y=g,x=v;y<x;y+=3){let w=y,_=y+1,b=y+2;a=sp(this,m,e,d2,l,h,w,_,b),a&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{let d=Math.max(0,u.start),f=Math.min(o.count,u.start+u.count);for(let p=d,m=f;p<m;p+=3){let g=p,v=p+1,y=p+2;a=sp(this,r,e,d2,l,h,g,v,y),a&&(a.faceIndex=Math.floor(p/3),t.push(a))}}}};function $ee(e,t,i,r,s,a,n,o){let l;if(t.side===r1?l=r.intersectTriangle(n,a,s,!0,o):l=r.intersectTriangle(s,a,n,t.side===tn,o),l===null)return null;rp.copy(o),rp.applyMatrix4(e.matrixWorld);let h=i.ray.origin.distanceTo(rp);return h<i.near||h>i.far?null:{distance:h,point:rp.clone(),object:e}}function sp(e,t,i,r,s,a,n,o,l){e.getVertexPosition(n,k0),e.getVertexPosition(o,F0),e.getVertexPosition(l,N0);let h=$ee(e,t,i,r,k0,F0,N0,Ty);if(h){s&&(ep.fromBufferAttribute(s,n),tp.fromBufferAttribute(s,o),ip.fromBufferAttribute(s,l),h.uv=y1.getUV(Ty,k0,F0,N0,ep,tp,ip,new re)),a&&(ep.fromBufferAttribute(a,n),tp.fromBufferAttribute(a,o),ip.fromBufferAttribute(a,l),h.uv2=y1.getUV(Ty,k0,F0,N0,ep,tp,ip,new re));let c={a:n,b:o,c:l,normal:new E,materialIndex:0};y1.getNormal(k0,F0,N0,c.normal),h.face=c}return h}var sn=class extends rt{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};let n=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);let o=[],l=[],h=[],c=[],u=0,d=0;f("z","y","x",-1,-1,i,t,e,a,s,0),f("z","y","x",1,-1,i,t,-e,a,s,1),f("x","z","y",1,1,e,i,t,r,a,2),f("x","z","y",1,-1,e,i,-t,r,a,3),f("x","y","z",1,-1,e,t,i,r,s,4),f("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(o),this.setAttribute("position",new Xe(l,3)),this.setAttribute("normal",new Xe(h,3)),this.setAttribute("uv",new Xe(c,2));function f(p,m,g,v,y,x,w,_,b,M,S){let A=x/b,C=w/M,T=x/2,D=w/2,R=_/2,O=b+1,j=M+1,X=0,N=0,k=new E;for(let ne=0;ne<j;ne++){let te=ne*C-D;for(let Q=0;Q<O;Q++){let Z=Q*A-T;k[p]=Z*v,k[m]=te*y,k[g]=R,l.push(k.x,k.y,k.z),k[p]=0,k[m]=0,k[g]=_>0?1:-1,h.push(k.x,k.y,k.z),c.push(Q/b),c.push(1-ne/M),X+=1}}for(let ne=0;ne<M;ne++)for(let te=0;te<b;te++){let Q=u+te+O*ne,Z=u+te+O*(ne+1),de=u+(te+1)+O*(ne+1),ee=u+(te+1)+O*ne;o.push(Q,Z,ee),o.push(Z,de,ee),N+=6}n.addGroup(d,N,S),d+=N,u+=X}}static fromJSON(e){return new sn(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Fu(e){let t={};for(let i in e){t[i]={};for(let r in e[i]){let s=e[i][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?t[i][r]=s.clone():Array.isArray(s)?t[i][r]=s.slice():t[i][r]=s}}return t}function K1(e){let t={};for(let i=0;i<e.length;i++){let r=Fu(e[i]);for(let s in r)t[s]=r[s]}return t}function ete(e){let t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}function Hz(e){return e.getRenderTarget()===null&&e.outputEncoding===Rt?En:yg}var o0={clone:Fu,merge:K1},tte=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ite=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,ti=class extends ff{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=tte,this.fragmentShader=ite,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fu(e.uniforms),this.uniformsGroups=ete(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Ch=class extends yi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Fe,this.projectionMatrix=new Fe,this.projectionMatrixInverse=new Fe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},z1=class extends Ch{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Dd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(q3*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Dd*2*Math.atan(Math.tan(q3*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(q3*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r,a=this.view;if(this.view!==null&&this.view.enabled){let o=a.fullWidth,l=a.fullHeight;s+=a.offsetX*r/o,t-=a.offsetY*i/l,r*=a.width/o,i*=a.height/l}let n=this.filmOffset;n!==0&&(s+=e*n/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},f2=-90,p2=1,rte=class extends yi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;let r=new z1(f2,p2,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);let s=new z1(f2,p2,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);let a=new z1(f2,p2,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);let n=new z1(f2,p2,e,t);n.layers=this.layers,n.up.set(0,0,1),n.lookAt(0,-1,0),this.add(n);let o=new z1(f2,p2,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);let l=new z1(f2,p2,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let i=this.renderTarget,[r,s,a,n,o,l]=this.children,h=e.getRenderTarget(),c=e.toneMapping,u=e.xr.enabled;e.toneMapping=Hn,e.xr.enabled=!1;let d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,n),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=d,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(h),e.toneMapping=c,e.xr.enabled=u,i.texture.needsPMREMUpdate=!0}},Rw=class extends $i{constructor(e,t,i,r,s,a,n,o,l,h){e=e!==void 0?e:[],t=t!==void 0?t:Lc,super(e,t,i,r,s,a,n,o,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},ste=class extends ei{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Rw(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Bt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new sn(5,5,5),s=new ti({name:"CubemapFromEquirect",uniforms:Fu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:r1,blending:Or});s.uniforms.tEquirect.value=t;let a=new zi(r,s),n=t.minFilter;return t.minFilter===ku&&(t.minFilter=Bt),new rte(1,10,this).update(e,a),t.minFilter=n,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){let s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}},Py=new E,ate=new E,nte=new Dr,ds=class{constructor(e=new E(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=Py.subVectors(i,t).cross(ate.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let i=e.delta(Py),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||nte.getNormalMatrix(e),r=this.coplanarPoint(Py).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},m2=new Cs,ap=new E,Lw=class{constructor(e=new ds,t=new ds,i=new ds,r=new ds,s=new ds,a=new ds){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){let n=this.planes;return n[0].copy(e),n[1].copy(t),n[2].copy(i),n[3].copy(r),n[4].copy(s),n[5].copy(a),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],n=i[3],o=i[4],l=i[5],h=i[6],c=i[7],u=i[8],d=i[9],f=i[10],p=i[11],m=i[12],g=i[13],v=i[14],y=i[15];return t[0].setComponents(n-r,c-o,p-u,y-m).normalize(),t[1].setComponents(n+r,c+o,p+u,y+m).normalize(),t[2].setComponents(n+s,c+l,p+d,y+g).normalize(),t[3].setComponents(n-s,c-l,p-d,y-g).normalize(),t[4].setComponents(n-a,c-h,p-f,y-v).normalize(),t[5].setComponents(n+a,c+h,p+f,y+v).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),m2.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(m2)}intersectsSprite(e){return m2.center.set(0,0,0),m2.radius=.7071067811865476,m2.applyMatrix4(e.matrixWorld),this.intersectsSphere(m2)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(ap.x=r.normal.x>0?e.max.x:e.min.x,ap.y=r.normal.y>0?e.max.y:e.min.y,ap.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ap)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Wz(){let e=null,t=!1,i=null,r=null;function s(a,n){i(a,n),r=e.requestAnimationFrame(s)}return{start:function(){t!==!0&&i!==null&&(r=e.requestAnimationFrame(s),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(a){i=a},setContext:function(a){e=a}}}function ote(e,t){let i=t.isWebGL2,r=new WeakMap;function s(h,c){let u=h.array,d=h.usage,f=e.createBuffer();e.bindBuffer(c,f),e.bufferData(c,u,d),h.onUploadCallback();let p;if(u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(i)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else if(u instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:h.version}}function a(h,c,u){let d=c.array,f=c.updateRange;e.bindBuffer(u,h),f.count===-1?e.bufferSubData(u,0,d):(i?e.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):e.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),c.onUploadCallback()}function n(h){return h.isInterleavedBufferAttribute&&(h=h.data),r.get(h)}function o(h){h.isInterleavedBufferAttribute&&(h=h.data);let c=r.get(h);c&&(e.deleteBuffer(c.buffer),r.delete(h))}function l(h,c){if(h.isGLBufferAttribute){let d=r.get(h);(!d||d.version<h.version)&&r.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);let u=r.get(h);u===void 0?r.set(h,s(h,c)):u.version<h.version&&(a(u.buffer,h,c),u.version=h.version)}return{get:n,remove:o,update:l}}var Kn=class extends rt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let s=e/2,a=t/2,n=Math.floor(i),o=Math.floor(r),l=n+1,h=o+1,c=e/n,u=t/o,d=[],f=[],p=[],m=[];for(let g=0;g<h;g++){let v=g*u-a;for(let y=0;y<l;y++){let x=y*c-s;f.push(x,-v,0),p.push(0,0,1),m.push(y/n),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let v=0;v<n;v++){let y=v+l*g,x=v+l*(g+1),w=v+1+l*(g+1),_=v+1+l*g;d.push(y,x,_),d.push(x,w,_)}this.setIndex(d),this.setAttribute("position",new Xe(f,3)),this.setAttribute("normal",new Xe(p,3)),this.setAttribute("uv",new Xe(m,2))}static fromJSON(e){return new Kn(e.width,e.height,e.widthSegments,e.heightSegments)}},lte=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,hte=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cte=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,ute=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,dte=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,fte=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,pte="vec3 transformed = vec3( position );",mte=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,gte=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,vte=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,yte=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,xte=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,bte=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,wte=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,_te=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Ste=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Ate=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Mte=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Cte=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Ete=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Tte=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Pte=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Dte=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Ite=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Ote=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Rte=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Lte="gl_FragColor = linearToOutputTexel( gl_FragColor );",zte=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Bte=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,kte=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Fte=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Nte=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ute=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Vte=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,jte=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Gte=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Hte=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Wte=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,qte=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Xte=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Yte=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Kte=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Qte=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Zte=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Jte=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,$te=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,eie=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,tie=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,iie=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,rie=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,sie=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,aie=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,nie=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,oie=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,lie=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hie=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,cie=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,uie=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,die=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,fie=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,pie=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,mie=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,gie=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,vie=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,yie=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,xie=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,bie=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,wie=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,_ie=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Sie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Aie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Mie=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Cie=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Eie=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Tie=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Pie=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Die=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Iie=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Oie=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Rie=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Lie=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,zie=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Bie=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,kie=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Fie=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Nie=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Uie=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Vie=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,jie=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Gie=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Hie=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Wie=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,qie=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Xie=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Yie=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Kie=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Qie=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Zie=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Jie=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,$ie=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,ere=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,tre=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,ire=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,rre=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,sre=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,are=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,nre=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ore=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,lre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hre=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ure=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,dre=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fre=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,pre=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,mre=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,gre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,vre=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,yre=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xre=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,bre=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,wre=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_re=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sre=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Are=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Mre=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cre=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Ere=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Tre=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Pre=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dre=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ire=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ore=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Rre=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lre=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,zre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Bre=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kre=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Fre=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Nre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Lt={alphamap_fragment:lte,alphamap_pars_fragment:hte,alphatest_fragment:cte,alphatest_pars_fragment:ute,aomap_fragment:dte,aomap_pars_fragment:fte,begin_vertex:pte,beginnormal_vertex:mte,bsdfs:gte,iridescence_fragment:vte,bumpmap_pars_fragment:yte,clipping_planes_fragment:xte,clipping_planes_pars_fragment:bte,clipping_planes_pars_vertex:wte,clipping_planes_vertex:_te,color_fragment:Ste,color_pars_fragment:Ate,color_pars_vertex:Mte,color_vertex:Cte,common:Ete,cube_uv_reflection_fragment:Tte,defaultnormal_vertex:Pte,displacementmap_pars_vertex:Dte,displacementmap_vertex:Ite,emissivemap_fragment:Ote,emissivemap_pars_fragment:Rte,encodings_fragment:Lte,encodings_pars_fragment:zte,envmap_fragment:Bte,envmap_common_pars_fragment:kte,envmap_pars_fragment:Fte,envmap_pars_vertex:Nte,envmap_physical_pars_fragment:Zte,envmap_vertex:Ute,fog_vertex:Vte,fog_pars_vertex:jte,fog_fragment:Gte,fog_pars_fragment:Hte,gradientmap_pars_fragment:Wte,lightmap_fragment:qte,lightmap_pars_fragment:Xte,lights_lambert_fragment:Yte,lights_lambert_pars_fragment:Kte,lights_pars_begin:Qte,lights_toon_fragment:Jte,lights_toon_pars_fragment:$te,lights_phong_fragment:eie,lights_phong_pars_fragment:tie,lights_physical_fragment:iie,lights_physical_pars_fragment:rie,lights_fragment_begin:sie,lights_fragment_maps:aie,lights_fragment_end:nie,logdepthbuf_fragment:oie,logdepthbuf_pars_fragment:lie,logdepthbuf_pars_vertex:hie,logdepthbuf_vertex:cie,map_fragment:uie,map_pars_fragment:die,map_particle_fragment:fie,map_particle_pars_fragment:pie,metalnessmap_fragment:mie,metalnessmap_pars_fragment:gie,morphcolor_vertex:vie,morphnormal_vertex:yie,morphtarget_pars_vertex:xie,morphtarget_vertex:bie,normal_fragment_begin:wie,normal_fragment_maps:_ie,normal_pars_fragment:Sie,normal_pars_vertex:Aie,normal_vertex:Mie,normalmap_pars_fragment:Cie,clearcoat_normal_fragment_begin:Eie,clearcoat_normal_fragment_maps:Tie,clearcoat_pars_fragment:Pie,iridescence_pars_fragment:Die,output_fragment:Iie,packing:Oie,premultiplied_alpha_fragment:Rie,project_vertex:Lie,dithering_fragment:zie,dithering_pars_fragment:Bie,roughnessmap_fragment:kie,roughnessmap_pars_fragment:Fie,shadowmap_pars_fragment:Nie,shadowmap_pars_vertex:Uie,shadowmap_vertex:Vie,shadowmask_pars_fragment:jie,skinbase_vertex:Gie,skinning_pars_vertex:Hie,skinning_vertex:Wie,skinnormal_vertex:qie,specularmap_fragment:Xie,specularmap_pars_fragment:Yie,tonemapping_fragment:Kie,tonemapping_pars_fragment:Qie,transmission_fragment:Zie,transmission_pars_fragment:Jie,uv_pars_fragment:$ie,uv_pars_vertex:ere,uv_vertex:tre,uv2_pars_fragment:ire,uv2_pars_vertex:rre,uv2_vertex:sre,worldpos_vertex:are,background_vert:nre,background_frag:ore,backgroundCube_vert:lre,backgroundCube_frag:hre,cube_vert:cre,cube_frag:ure,depth_vert:dre,depth_frag:fre,distanceRGBA_vert:pre,distanceRGBA_frag:mre,equirect_vert:gre,equirect_frag:vre,linedashed_vert:yre,linedashed_frag:xre,meshbasic_vert:bre,meshbasic_frag:wre,meshlambert_vert:_re,meshlambert_frag:Sre,meshmatcap_vert:Are,meshmatcap_frag:Mre,meshnormal_vert:Cre,meshnormal_frag:Ere,meshphong_vert:Tre,meshphong_frag:Pre,meshphysical_vert:Dre,meshphysical_frag:Ire,meshtoon_vert:Ore,meshtoon_frag:Rre,points_vert:Lre,points_frag:zre,shadow_vert:Bre,shadow_frag:kre,sprite_vert:Fre,sprite_frag:Nre},He={common:{diffuse:{value:new pt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Dr},uv2Transform:{value:new Dr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new re(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Dr}},sprite:{diffuse:{value:new pt(16777215)},opacity:{value:1},center:{value:new re(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Dr}}},Dn={basic:{uniforms:K1([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.fog]),vertexShader:Lt.meshbasic_vert,fragmentShader:Lt.meshbasic_frag},lambert:{uniforms:K1([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.fog,He.lights,{emissive:{value:new pt(0)}}]),vertexShader:Lt.meshlambert_vert,fragmentShader:Lt.meshlambert_frag},phong:{uniforms:K1([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.fog,He.lights,{emissive:{value:new pt(0)},specular:{value:new pt(1118481)},shininess:{value:30}}]),vertexShader:Lt.meshphong_vert,fragmentShader:Lt.meshphong_frag},standard:{uniforms:K1([He.common,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.roughnessmap,He.metalnessmap,He.fog,He.lights,{emissive:{value:new pt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag},toon:{uniforms:K1([He.common,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.gradientmap,He.fog,He.lights,{emissive:{value:new pt(0)}}]),vertexShader:Lt.meshtoon_vert,fragmentShader:Lt.meshtoon_frag},matcap:{uniforms:K1([He.common,He.bumpmap,He.normalmap,He.displacementmap,He.fog,{matcap:{value:null}}]),vertexShader:Lt.meshmatcap_vert,fragmentShader:Lt.meshmatcap_frag},points:{uniforms:K1([He.points,He.fog]),vertexShader:Lt.points_vert,fragmentShader:Lt.points_frag},dashed:{uniforms:K1([He.common,He.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lt.linedashed_vert,fragmentShader:Lt.linedashed_frag},depth:{uniforms:K1([He.common,He.displacementmap]),vertexShader:Lt.depth_vert,fragmentShader:Lt.depth_frag},normal:{uniforms:K1([He.common,He.bumpmap,He.normalmap,He.displacementmap,{opacity:{value:1}}]),vertexShader:Lt.meshnormal_vert,fragmentShader:Lt.meshnormal_frag},sprite:{uniforms:K1([He.sprite,He.fog]),vertexShader:Lt.sprite_vert,fragmentShader:Lt.sprite_frag},background:{uniforms:{uvTransform:{value:new Dr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Lt.background_vert,fragmentShader:Lt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Lt.backgroundCube_vert,fragmentShader:Lt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Lt.cube_vert,fragmentShader:Lt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lt.equirect_vert,fragmentShader:Lt.equirect_frag},distanceRGBA:{uniforms:K1([He.common,He.displacementmap,{referencePosition:{value:new E},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lt.distanceRGBA_vert,fragmentShader:Lt.distanceRGBA_frag},shadow:{uniforms:K1([He.lights,He.fog,{color:{value:new pt(0)},opacity:{value:1}}]),vertexShader:Lt.shadow_vert,fragmentShader:Lt.shadow_frag}};Dn.physical={uniforms:K1([Dn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new re(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new pt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new re},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new pt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new pt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag};var np={r:0,b:0,g:0};function Ure(e,t,i,r,s,a,n){let o=new pt(0),l=a===!0?0:1,h,c,u=null,d=0,f=null;function p(g,v){let y=!1,x=v.isScene===!0?v.background:null;x&&x.isTexture&&(x=(v.backgroundBlurriness>0?i:t).get(x));let w=e.xr,_=w.getSession&&w.getSession();_&&_.environmentBlendMode==="additive"&&(x=null),x===null?m(o,l):x&&x.isColor&&(m(x,1),y=!0),(e.autoClear||y)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),x&&(x.isCubeTexture||x.mapping===df)?(c===void 0&&(c=new zi(new sn(1,1,1),new ti({name:"BackgroundCubeMaterial",uniforms:Fu(Dn.backgroundCube.uniforms),vertexShader:Dn.backgroundCube.vertexShader,fragmentShader:Dn.backgroundCube.fragmentShader,side:r1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(b,M,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(c)),c.material.uniforms.envMap.value=x,c.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=x.encoding!==Rt,(u!==x||d!==x.version||f!==e.toneMapping)&&(c.material.needsUpdate=!0,u=x,d=x.version,f=e.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):x&&x.isTexture&&(h===void 0&&(h=new zi(new Kn(2,2),new ti({name:"BackgroundMaterial",uniforms:Fu(Dn.background.uniforms),vertexShader:Dn.background.vertexShader,fragmentShader:Dn.background.fragmentShader,side:tn,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(h)),h.material.uniforms.t2D.value=x,h.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,h.material.toneMapped=x.encoding!==Rt,x.matrixAutoUpdate===!0&&x.updateMatrix(),h.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||d!==x.version||f!==e.toneMapping)&&(h.material.needsUpdate=!0,u=x,d=x.version,f=e.toneMapping),h.layers.enableAll(),g.unshift(h,h.geometry,h.material,0,0,null))}function m(g,v){g.getRGB(np,Hz(e)),r.buffers.color.setClear(np.r,np.g,np.b,v,n)}return{getClearColor:function(){return o},setClearColor:function(g,v=1){o.set(g),l=v,m(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(o,l)},render:p}}function Vre(e,t,i,r){let s=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),n=r.isWebGL2||a!==null,o={},l=g(null),h=l,c=!1;function u(O,j,X,N,k){let ne=!1;if(n){let te=m(N,X,j);h!==te&&(h=te,f(h.object)),ne=v(O,N,X,k),ne&&y(O,N,X,k)}else{let te=j.wireframe===!0;(h.geometry!==N.id||h.program!==X.id||h.wireframe!==te)&&(h.geometry=N.id,h.program=X.id,h.wireframe=te,ne=!0)}k!==null&&i.update(k,34963),(ne||c)&&(c=!1,S(O,j,X,N),k!==null&&e.bindBuffer(34963,i.get(k).buffer))}function d(){return r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function f(O){return r.isWebGL2?e.bindVertexArray(O):a.bindVertexArrayOES(O)}function p(O){return r.isWebGL2?e.deleteVertexArray(O):a.deleteVertexArrayOES(O)}function m(O,j,X){let N=X.wireframe===!0,k=o[O.id];k===void 0&&(k={},o[O.id]=k);let ne=k[j.id];ne===void 0&&(ne={},k[j.id]=ne);let te=ne[N];return te===void 0&&(te=g(d()),ne[N]=te),te}function g(O){let j=[],X=[],N=[];for(let k=0;k<s;k++)j[k]=0,X[k]=0,N[k]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:X,attributeDivisors:N,object:O,attributes:{},index:null}}function v(O,j,X,N){let k=h.attributes,ne=j.attributes,te=0,Q=X.getAttributes();for(let Z in Q)if(Q[Z].location>=0){let de=k[Z],ee=ne[Z];if(ee===void 0&&(Z==="instanceMatrix"&&O.instanceMatrix&&(ee=O.instanceMatrix),Z==="instanceColor"&&O.instanceColor&&(ee=O.instanceColor)),de===void 0||de.attribute!==ee||ee&&de.data!==ee.data)return!0;te++}return h.attributesNum!==te||h.index!==N}function y(O,j,X,N){let k={},ne=j.attributes,te=0,Q=X.getAttributes();for(let Z in Q)if(Q[Z].location>=0){let de=ne[Z];de===void 0&&(Z==="instanceMatrix"&&O.instanceMatrix&&(de=O.instanceMatrix),Z==="instanceColor"&&O.instanceColor&&(de=O.instanceColor));let ee={};ee.attribute=de,de&&de.data&&(ee.data=de.data),k[Z]=ee,te++}h.attributes=k,h.attributesNum=te,h.index=N}function x(){let O=h.newAttributes;for(let j=0,X=O.length;j<X;j++)O[j]=0}function w(O){_(O,0)}function _(O,j){let X=h.newAttributes,N=h.enabledAttributes,k=h.attributeDivisors;X[O]=1,N[O]===0&&(e.enableVertexAttribArray(O),N[O]=1),k[O]!==j&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,j),k[O]=j)}function b(){let O=h.newAttributes,j=h.enabledAttributes;for(let X=0,N=j.length;X<N;X++)j[X]!==O[X]&&(e.disableVertexAttribArray(X),j[X]=0)}function M(O,j,X,N,k,ne){r.isWebGL2===!0&&(X===5124||X===5125)?e.vertexAttribIPointer(O,j,X,k,ne):e.vertexAttribPointer(O,j,X,N,k,ne)}function S(O,j,X,N){if(r.isWebGL2===!1&&(O.isInstancedMesh||N.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;x();let k=N.attributes,ne=X.getAttributes(),te=j.defaultAttributeValues;for(let Q in ne){let Z=ne[Q];if(Z.location>=0){let de=k[Q];if(de===void 0&&(Q==="instanceMatrix"&&O.instanceMatrix&&(de=O.instanceMatrix),Q==="instanceColor"&&O.instanceColor&&(de=O.instanceColor)),de!==void 0){let ee=de.normalized,le=de.itemSize,$=i.get(de);if($===void 0)continue;let K=$.buffer,J=$.type,se=$.bytesPerElement;if(de.isInterleavedBufferAttribute){let ae=de.data,Ae=ae.stride,F=de.offset;if(ae.isInstancedInterleavedBuffer){for(let V=0;V<Z.locationSize;V++)_(Z.location+V,ae.meshPerAttribute);O.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let V=0;V<Z.locationSize;V++)w(Z.location+V);e.bindBuffer(34962,K);for(let V=0;V<Z.locationSize;V++)M(Z.location+V,le/Z.locationSize,J,ee,Ae*se,(F+le/Z.locationSize*V)*se)}else{if(de.isInstancedBufferAttribute){for(let ae=0;ae<Z.locationSize;ae++)_(Z.location+ae,de.meshPerAttribute);O.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let ae=0;ae<Z.locationSize;ae++)w(Z.location+ae);e.bindBuffer(34962,K);for(let ae=0;ae<Z.locationSize;ae++)M(Z.location+ae,le/Z.locationSize,J,ee,le*se,le/Z.locationSize*ae*se)}}else if(te!==void 0){let ee=te[Q];if(ee!==void 0)switch(ee.length){case 2:e.vertexAttrib2fv(Z.location,ee);break;case 3:e.vertexAttrib3fv(Z.location,ee);break;case 4:e.vertexAttrib4fv(Z.location,ee);break;default:e.vertexAttrib1fv(Z.location,ee)}}}}b()}function A(){D();for(let O in o){let j=o[O];for(let X in j){let N=j[X];for(let k in N)p(N[k].object),delete N[k];delete j[X]}delete o[O]}}function C(O){if(o[O.id]===void 0)return;let j=o[O.id];for(let X in j){let N=j[X];for(let k in N)p(N[k].object),delete N[k];delete j[X]}delete o[O.id]}function T(O){for(let j in o){let X=o[j];if(X[O.id]===void 0)continue;let N=X[O.id];for(let k in N)p(N[k].object),delete N[k];delete X[O.id]}}function D(){R(),c=!0,h!==l&&(h=l,f(h.object))}function R(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:D,resetDefaultState:R,dispose:A,releaseStatesOfGeometry:C,releaseStatesOfProgram:T,initAttributes:x,enableAttribute:w,disableUnusedAttributes:b}}function jre(e,t,i,r){let s=r.isWebGL2,a;function n(h){a=h}function o(h,c){e.drawArrays(a,h,c),i.update(c,a,1)}function l(h,c,u){if(u===0)return;let d,f;if(s)d=e,f="drawArraysInstanced";else if(d=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](a,h,c,u),i.update(c,a,u)}this.setMode=n,this.render=o,this.renderInstances=l}function Gre(e,t,i){let r;function s(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let M=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(M){if(M==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";M="mediump"}return M==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let n=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,o=i.precision!==void 0?i.precision:"highp",l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let h=n||t.has("WEBGL_draw_buffers"),c=i.logarithmicDepthBuffer===!0,u=e.getParameter(34930),d=e.getParameter(35660),f=e.getParameter(3379),p=e.getParameter(34076),m=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),y=e.getParameter(36349),x=d>0,w=n||t.has("OES_texture_float"),_=x&&w,b=n?e.getParameter(36183):0;return{isWebGL2:n,drawBuffers:h,getMaxAnisotropy:s,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:w,floatVertexTextures:_,maxSamples:b}}function Hre(e){let t=this,i=null,r=0,s=!1,a=!1,n=new ds,o=new Dr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d){let f=u.length!==0||d||r!==0||s;return s=d,r=u.length,f},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(u,d){i=c(u,d,0)},this.setState=function(u,d,f){let p=u.clippingPlanes,m=u.clipIntersection,g=u.clipShadows,v=e.get(u);if(!s||p===null||p.length===0||a&&!g)a?c(null):h();else{let y=a?0:r,x=y*4,w=v.clippingState||null;l.value=w,w=c(p,d,x,f);for(let _=0;_!==x;++_)w[_]=i[_];v.clippingState=w,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function h(){l.value!==i&&(l.value=i,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(u,d,f,p){let m=u!==null?u.length:0,g=null;if(m!==0){if(g=l.value,p!==!0||g===null){let v=f+m*4,y=d.matrixWorldInverse;o.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let x=0,w=f;x!==m;++x,w+=4)n.copy(u[x]).applyMatrix4(y,o),n.normal.toArray(g,w),g[w+3]=n.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=m,t.numIntersection=0,g}}function Wre(e){let t=new WeakMap;function i(n,o){return o===o6?n.mapping=Lc:o===l6&&(n.mapping=zc),n}function r(n){if(n&&n.isTexture&&n.isRenderTargetTexture===!1){let o=n.mapping;if(o===o6||o===l6)if(t.has(n)){let l=t.get(n).texture;return i(l,n.mapping)}else{let l=n.image;if(l&&l.height>0){let h=new ste(l.height/2);return h.fromEquirectangularTexture(e,n),t.set(n,h),n.addEventListener("dispose",s),i(h.texture,n.mapping)}else return null}}return n}function s(n){let o=n.target;o.removeEventListener("dispose",s);let l=t.get(o);l!==void 0&&(t.delete(o),l.dispose())}function a(){t=new WeakMap}return{get:r,dispose:a}}var Nv=class extends Ch{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=i-e,a=i+e,n=r+t,o=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,a=s+l*this.view.width,n-=h*this.view.offsetY,o=n-h*this.view.height}this.projectionMatrix.makeOrthographic(s,a,n,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},$2=4,pC=[.125,.215,.35,.446,.526,.582],ec=20,Dy=new Nv,mC=new pt,Iy=null,Kh=(1+Math.sqrt(5))/2,g2=1/Kh,gC=[new E(1,1,1),new E(-1,1,1),new E(1,1,-1),new E(-1,1,-1),new E(0,Kh,g2),new E(0,Kh,-g2),new E(g2,0,Kh),new E(-g2,0,Kh),new E(Kh,g2,0),new E(-Kh,g2,0)],vC=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Iy=this._renderer.getRenderTarget(),this._setSize(256);let s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=bC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=xC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Iy),e.scissorTest=!1,op(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Lc||e.mapping===zc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Iy=this._renderer.getRenderTarget();let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Bt,minFilter:Bt,generateMipmaps:!1,type:Jo,format:Ki,encoding:rn,depthBuffer:!1},r=yC(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=yC(e,t,i);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=qre(s)),this._blurMaterial=Xre(s,e,t)}return r}_compileMaterial(e){let t=new zi(this._lodPlanes[0],e);this._renderer.compile(t,Dy)}_sceneToCubeUV(e,t,i,r){let s=new z1(90,1,t,i),a=[1,-1,1,1,1,1],n=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,h=o.toneMapping;o.getClearColor(mC),o.toneMapping=Hn,o.autoClear=!1;let c=new $o({name:"PMREM.Background",side:r1,depthWrite:!1,depthTest:!1}),u=new zi(new sn,c),d=!1,f=e.background;f?f.isColor&&(c.color.copy(f),e.background=null,d=!0):(c.color.copy(mC),d=!0);for(let p=0;p<6;p++){let m=p%3;m===0?(s.up.set(0,a[p],0),s.lookAt(n[p],0,0)):m===1?(s.up.set(0,0,a[p]),s.lookAt(0,n[p],0)):(s.up.set(0,a[p],0),s.lookAt(0,0,n[p]));let g=this._cubeSize;op(r,m*g,p>2?g:0,g,g),o.setRenderTarget(r),d&&o.render(u,s),o.render(e,s)}u.geometry.dispose(),u.material.dispose(),o.toneMapping=h,o.autoClear=l,e.background=f}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Lc||e.mapping===zc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=bC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=xC());let s=r?this._cubemapMaterial:this._equirectMaterial,a=new zi(this._lodPlanes[0],s),n=s.uniforms;n.envMap.value=e;let o=this._cubeSize;op(t,0,0,3*o,2*o),i.setRenderTarget(t),i.render(a,Dy)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=gC[(r-1)%gC.length];this._blur(e,r-1,r,s,a)}t.autoClear=i}_blur(e,t,i,r,s){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,n){let o=this._renderer,l=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let h=3,c=new zi(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[i]-1,f=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*ec-1),p=s/f,m=isFinite(s)?1+Math.floor(h*p):ec;m>ec&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${ec}`);let g=[],v=0;for(let b=0;b<ec;++b){let M=b/p,S=Math.exp(-M*M/2);g.push(S),b===0?v+=S:b<m&&(v+=2*S)}for(let b=0;b<g.length;b++)g[b]=g[b]/v;u.envMap.value=e.texture,u.samples.value=m,u.weights.value=g,u.latitudinal.value=a==="latitudinal",n&&(u.poleAxis.value=n);let{_lodMax:y}=this;u.dTheta.value=f,u.mipInt.value=y-i;let x=this._sizeLods[r],w=3*x*(r>y-$2?r-y+$2:0),_=4*(this._cubeSize-x);op(t,w,_,3*x,2*x),o.setRenderTarget(t),o.render(c,Dy)}};function qre(e){let t=[],i=[],r=[],s=e,a=e-$2+1+pC.length;for(let n=0;n<a;n++){let o=Math.pow(2,s);i.push(o);let l=1/o;n>e-$2?l=pC[n-e+$2-1]:n===0&&(l=0),r.push(l);let h=1/(o-2),c=-h,u=1+h,d=[c,c,u,c,u,u,c,c,u,u,c,u],f=6,p=6,m=3,g=2,v=1,y=new Float32Array(m*p*f),x=new Float32Array(g*p*f),w=new Float32Array(v*p*f);for(let b=0;b<f;b++){let M=b%3*2/3-1,S=b>2?0:-1,A=[M,S,0,M+2/3,S,0,M+2/3,S+1,0,M,S,0,M+2/3,S+1,0,M,S+1,0];y.set(A,m*p*b),x.set(d,g*p*b);let C=[b,b,b,b,b,b];w.set(C,v*p*b)}let _=new rt;_.setAttribute("position",new mt(y,m)),_.setAttribute("uv",new mt(x,g)),_.setAttribute("faceIndex",new mt(w,v)),t.push(_),s>$2&&s--}return{lodPlanes:t,sizeLods:i,sigmas:r}}function yC(e,t,i){let r=new ei(e,t,i);return r.texture.mapping=df,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function op(e,t,i,r,s){e.viewport.set(t,i,r,s),e.scissor.set(t,i,r,s)}function Xre(e,t,i){let r=new Float32Array(ec),s=new E(0,1,0);return new ti({name:"SphericalGaussianBlur",defines:{n:ec,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:zw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Or,depthTest:!1,depthWrite:!1})}function xC(){return new ti({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:zw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Or,depthTest:!1,depthWrite:!1})}function bC(){return new ti({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:zw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Or,depthTest:!1,depthWrite:!1})}function zw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Yre(e){let t=new WeakMap,i=null;function r(o){if(o&&o.isTexture){let l=o.mapping,h=l===o6||l===l6,c=l===Lc||l===zc;if(h||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let u=t.get(o);return i===null&&(i=new vC(e)),u=h?i.fromEquirectangular(o,u):i.fromCubemap(o,u),t.set(o,u),u.texture}else{if(t.has(o))return t.get(o).texture;{let u=o.image;if(h&&u&&u.height>0||c&&u&&s(u)){i===null&&(i=new vC(e));let d=h?i.fromEquirectangular(o):i.fromCubemap(o);return t.set(o,d),o.addEventListener("dispose",a),d.texture}else return null}}}return o}function s(o){let l=0,h=6;for(let c=0;c<h;c++)o[c]!==void 0&&l++;return l===h}function a(o){let l=o.target;l.removeEventListener("dispose",a);let h=t.get(l);h!==void 0&&(t.delete(l),h.dispose())}function n(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:r,dispose:n}}function Kre(e){let t={};function i(r){if(t[r]!==void 0)return t[r];let s;switch(r){case"WEBGL_depth_texture":s=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=e.getExtension(r)}return t[r]=s,s}return{has:function(r){return i(r)!==null},init:function(r){r.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(r){let s=i(r);return s===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function Qre(e,t,i,r){let s={},a=new WeakMap;function n(u){let d=u.target;d.index!==null&&t.remove(d.index);for(let p in d.attributes)t.remove(d.attributes[p]);d.removeEventListener("dispose",n),delete s[d.id];let f=a.get(d);f&&(t.remove(f),a.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,i.memory.geometries--}function o(u,d){return s[d.id]===!0||(d.addEventListener("dispose",n),s[d.id]=!0,i.memory.geometries++),d}function l(u){let d=u.attributes;for(let p in d)t.update(d[p],34962);let f=u.morphAttributes;for(let p in f){let m=f[p];for(let g=0,v=m.length;g<v;g++)t.update(m[g],34962)}}function h(u){let d=[],f=u.index,p=u.attributes.position,m=0;if(f!==null){let y=f.array;m=f.version;for(let x=0,w=y.length;x<w;x+=3){let _=y[x+0],b=y[x+1],M=y[x+2];d.push(_,b,b,M,M,_)}}else{let y=p.array;m=p.version;for(let x=0,w=y.length/3-1;x<w;x+=3){let _=x+0,b=x+1,M=x+2;d.push(_,b,b,M,M,_)}}let g=new(kz(d)?fu:Gz)(d,1);g.version=m;let v=a.get(u);v&&t.remove(v),a.set(u,g)}function c(u){let d=a.get(u);if(d){let f=u.index;f!==null&&d.version<f.version&&h(u)}else h(u);return a.get(u)}return{get:o,update:l,getWireframeAttribute:c}}function Zre(e,t,i,r){let s=r.isWebGL2,a;function n(d){a=d}let o,l;function h(d){o=d.type,l=d.bytesPerElement}function c(d,f){e.drawElements(a,f,o,d*l),i.update(f,a,1)}function u(d,f,p){if(p===0)return;let m,g;if(s)m=e,g="drawElementsInstanced";else if(m=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](a,f,o,d*l,p),i.update(f,a,p)}this.setMode=n,this.setIndex=h,this.render=c,this.renderInstances=u}function Jre(e){let t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,n,o){switch(i.calls++,n){case 4:i.triangles+=o*(a/3);break;case 1:i.lines+=o*(a/2);break;case 3:i.lines+=o*(a-1);break;case 2:i.lines+=o*a;break;case 0:i.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n);break}}function s(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:s,update:r}}function $re(e,t){return e[0]-t[0]}function e1e(e,t){return Math.abs(t[1])-Math.abs(e[1])}function t1e(e,t,i){let r={},s=new Float32Array(8),a=new WeakMap,n=new Mt,o=[];for(let h=0;h<8;h++)o[h]=[h,0];function l(h,c,u,d){let f=h.morphTargetInfluences;if(t.isWebGL2===!0){let p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,m=p!==void 0?p.length:0,g=a.get(c);if(g===void 0||g.count!==m){let x=function(){O.dispose(),a.delete(c),c.removeEventListener("dispose",x)};g!==void 0&&g.texture.dispose();let w=c.morphAttributes.position!==void 0,_=c.morphAttributes.normal!==void 0,b=c.morphAttributes.color!==void 0,M=c.morphAttributes.position||[],S=c.morphAttributes.normal||[],A=c.morphAttributes.color||[],C=0;w===!0&&(C=1),_===!0&&(C=2),b===!0&&(C=3);let T=c.attributes.position.count*C,D=1;T>t.maxTextureSize&&(D=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);let R=new Float32Array(T*D*4*m),O=new Vz(R,T,D,m);O.type=bi,O.needsUpdate=!0;let j=C*4;for(let X=0;X<m;X++){let N=M[X],k=S[X],ne=A[X],te=T*D*4*X;for(let Q=0;Q<N.count;Q++){let Z=Q*j;w===!0&&(n.fromBufferAttribute(N,Q),R[te+Z+0]=n.x,R[te+Z+1]=n.y,R[te+Z+2]=n.z,R[te+Z+3]=0),_===!0&&(n.fromBufferAttribute(k,Q),R[te+Z+4]=n.x,R[te+Z+5]=n.y,R[te+Z+6]=n.z,R[te+Z+7]=0),b===!0&&(n.fromBufferAttribute(ne,Q),R[te+Z+8]=n.x,R[te+Z+9]=n.y,R[te+Z+10]=n.z,R[te+Z+11]=ne.itemSize===4?n.w:1)}}g={count:m,texture:O,size:new re(T,D)},a.set(c,g),c.addEventListener("dispose",x)}let v=0;for(let x=0;x<f.length;x++)v+=f[x];let y=c.morphTargetsRelative?1:1-v;d.getUniforms().setValue(e,"morphTargetBaseInfluence",y),d.getUniforms().setValue(e,"morphTargetInfluences",f),d.getUniforms().setValue(e,"morphTargetsTexture",g.texture,i),d.getUniforms().setValue(e,"morphTargetsTextureSize",g.size)}else{let p=f===void 0?0:f.length,m=r[c.id];if(m===void 0||m.length!==p){m=[];for(let w=0;w<p;w++)m[w]=[w,0];r[c.id]=m}for(let w=0;w<p;w++){let _=m[w];_[0]=w,_[1]=f[w]}m.sort(e1e);for(let w=0;w<8;w++)w<p&&m[w][1]?(o[w][0]=m[w][0],o[w][1]=m[w][1]):(o[w][0]=Number.MAX_SAFE_INTEGER,o[w][1]=0);o.sort($re);let g=c.morphAttributes.position,v=c.morphAttributes.normal,y=0;for(let w=0;w<8;w++){let _=o[w],b=_[0],M=_[1];b!==Number.MAX_SAFE_INTEGER&&M?(g&&c.getAttribute("morphTarget"+w)!==g[b]&&c.setAttribute("morphTarget"+w,g[b]),v&&c.getAttribute("morphNormal"+w)!==v[b]&&c.setAttribute("morphNormal"+w,v[b]),s[w]=M,y+=M):(g&&c.hasAttribute("morphTarget"+w)===!0&&c.deleteAttribute("morphTarget"+w),v&&c.hasAttribute("morphNormal"+w)===!0&&c.deleteAttribute("morphNormal"+w),s[w]=0)}let x=c.morphTargetsRelative?1:1-y;d.getUniforms().setValue(e,"morphTargetBaseInfluence",x),d.getUniforms().setValue(e,"morphTargetInfluences",s)}}return{update:l}}function i1e(e,t,i,r){let s=new WeakMap;function a(l){let h=r.render.frame,c=l.geometry,u=t.get(l,c);return s.get(u)!==h&&(t.update(u),s.set(u,h)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.update(l.instanceMatrix,34962),l.instanceColor!==null&&i.update(l.instanceColor,34962)),u}function n(){s=new WeakMap}function o(l){let h=l.target;h.removeEventListener("dispose",o),i.remove(h.instanceMatrix),h.instanceColor!==null&&i.remove(h.instanceColor)}return{update:a,dispose:n}}var qz=new $i,Xz=new Vz,Yz=new Gee,Kz=new Rw,wC=[],_C=[],SC=new Float32Array(16),AC=new Float32Array(9),MC=new Float32Array(4);function l0(e,t,i){let r=e[0];if(r==null||r<=0||r>0)return e;let s=t*i,a=wC[s];if(a===void 0&&(a=new Float32Array(s),wC[s]=a),t!==0){r.toArray(a,0);for(let n=1,o=0;n!==t;++n)o+=i,e[n].toArray(a,o)}return a}function qr(e,t){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(e[i]!==t[i])return!1;return!0}function Xr(e,t){for(let i=0,r=t.length;i<r;i++)e[i]=t[i]}function Uv(e,t){let i=_C[t];i===void 0&&(i=new Int32Array(t),_C[t]=i);for(let r=0;r!==t;++r)i[r]=e.allocateTextureUnit();return i}function r1e(e,t){let i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function s1e(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(qr(i,t))return;e.uniform2fv(this.addr,t),Xr(i,t)}}function a1e(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(qr(i,t))return;e.uniform3fv(this.addr,t),Xr(i,t)}}function n1e(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(qr(i,t))return;e.uniform4fv(this.addr,t),Xr(i,t)}}function o1e(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(qr(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),Xr(i,t)}else{if(qr(i,r))return;MC.set(r),e.uniformMatrix2fv(this.addr,!1,MC),Xr(i,r)}}function l1e(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(qr(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),Xr(i,t)}else{if(qr(i,r))return;AC.set(r),e.uniformMatrix3fv(this.addr,!1,AC),Xr(i,r)}}function h1e(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(qr(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),Xr(i,t)}else{if(qr(i,r))return;SC.set(r),e.uniformMatrix4fv(this.addr,!1,SC),Xr(i,r)}}function c1e(e,t){let i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function u1e(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(qr(i,t))return;e.uniform2iv(this.addr,t),Xr(i,t)}}function d1e(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(qr(i,t))return;e.uniform3iv(this.addr,t),Xr(i,t)}}function f1e(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(qr(i,t))return;e.uniform4iv(this.addr,t),Xr(i,t)}}function p1e(e,t){let i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function m1e(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(qr(i,t))return;e.uniform2uiv(this.addr,t),Xr(i,t)}}function g1e(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(qr(i,t))return;e.uniform3uiv(this.addr,t),Xr(i,t)}}function v1e(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(qr(i,t))return;e.uniform4uiv(this.addr,t),Xr(i,t)}}function y1e(e,t,i){let r=this.cache,s=i.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),i.setTexture2D(t||qz,s)}function x1e(e,t,i){let r=this.cache,s=i.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),i.setTexture3D(t||Yz,s)}function b1e(e,t,i){let r=this.cache,s=i.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),i.setTextureCube(t||Kz,s)}function w1e(e,t,i){let r=this.cache,s=i.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),i.setTexture2DArray(t||Xz,s)}function _1e(e){switch(e){case 5126:return r1e;case 35664:return s1e;case 35665:return a1e;case 35666:return n1e;case 35674:return o1e;case 35675:return l1e;case 35676:return h1e;case 5124:case 35670:return c1e;case 35667:case 35671:return u1e;case 35668:case 35672:return d1e;case 35669:case 35673:return f1e;case 5125:return p1e;case 36294:return m1e;case 36295:return g1e;case 36296:return v1e;case 35678:case 36198:case 36298:case 36306:case 35682:return y1e;case 35679:case 36299:case 36307:return x1e;case 35680:case 36300:case 36308:case 36293:return b1e;case 36289:case 36303:case 36311:case 36292:return w1e}}function S1e(e,t){e.uniform1fv(this.addr,t)}function A1e(e,t){let i=l0(t,this.size,2);e.uniform2fv(this.addr,i)}function M1e(e,t){let i=l0(t,this.size,3);e.uniform3fv(this.addr,i)}function C1e(e,t){let i=l0(t,this.size,4);e.uniform4fv(this.addr,i)}function E1e(e,t){let i=l0(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function T1e(e,t){let i=l0(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function P1e(e,t){let i=l0(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function D1e(e,t){e.uniform1iv(this.addr,t)}function I1e(e,t){e.uniform2iv(this.addr,t)}function O1e(e,t){e.uniform3iv(this.addr,t)}function R1e(e,t){e.uniform4iv(this.addr,t)}function L1e(e,t){e.uniform1uiv(this.addr,t)}function z1e(e,t){e.uniform2uiv(this.addr,t)}function B1e(e,t){e.uniform3uiv(this.addr,t)}function k1e(e,t){e.uniform4uiv(this.addr,t)}function F1e(e,t,i){let r=this.cache,s=t.length,a=Uv(i,s);qr(r,a)||(e.uniform1iv(this.addr,a),Xr(r,a));for(let n=0;n!==s;++n)i.setTexture2D(t[n]||qz,a[n])}function N1e(e,t,i){let r=this.cache,s=t.length,a=Uv(i,s);qr(r,a)||(e.uniform1iv(this.addr,a),Xr(r,a));for(let n=0;n!==s;++n)i.setTexture3D(t[n]||Yz,a[n])}function U1e(e,t,i){let r=this.cache,s=t.length,a=Uv(i,s);qr(r,a)||(e.uniform1iv(this.addr,a),Xr(r,a));for(let n=0;n!==s;++n)i.setTextureCube(t[n]||Kz,a[n])}function V1e(e,t,i){let r=this.cache,s=t.length,a=Uv(i,s);qr(r,a)||(e.uniform1iv(this.addr,a),Xr(r,a));for(let n=0;n!==s;++n)i.setTexture2DArray(t[n]||Xz,a[n])}function j1e(e){switch(e){case 5126:return S1e;case 35664:return A1e;case 35665:return M1e;case 35666:return C1e;case 35674:return E1e;case 35675:return T1e;case 35676:return P1e;case 5124:case 35670:return D1e;case 35667:case 35671:return I1e;case 35668:case 35672:return O1e;case 35669:case 35673:return R1e;case 5125:return L1e;case 36294:return z1e;case 36295:return B1e;case 36296:return k1e;case 35678:case 36198:case 36298:case 36306:case 35682:return F1e;case 35679:case 36299:case 36307:return N1e;case 35680:case 36300:case 36308:case 36293:return U1e;case 36289:case 36303:case 36311:case 36292:return V1e}}var G1e=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=_1e(t.type)}},H1e=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=j1e(t.type)}},W1e=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){if(t===void 0)return;let r=this.seq;for(let s=0,a=r.length;s!==a;++s){let n=r[s];n.setValue(e,t[n.id],i)}}},Oy=/(\w+)(\])?(\[|\.)?/g;function CC(e,t){e.seq.push(t),e.map[t.id]=t}function q1e(e,t,i){let r=e.name,s=r.length;for(Oy.lastIndex=0;;){let a=Oy.exec(r),n=Oy.lastIndex,o=a[1],l=a[2]==="]",h=a[3];if(l&&(o=o|0),h===void 0||h==="["&&n+2===s){CC(i,h===void 0?new G1e(o,e,t):new H1e(o,e,t));break}else{let c=i.map[o];c===void 0&&(c=new W1e(o),CC(i,c)),i=c}}}var Em=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){let s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);q1e(s,a,this)}}setValue(e,t,i,r){let s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){let n=t[s],o=i[n.id];o.needsUpdate!==!1&&n.setValue(e,o.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,s=e.length;r!==s;++r){let a=e[r];a.id in t&&i.push(a)}return i}};function EC(e,t,i){let r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),r}var X1e=0;function Y1e(e,t){let i=e.split(`
`),r=[],s=Math.max(t-6,0),a=Math.min(t+6,i.length);for(let n=s;n<a;n++){let o=n+1;r.push(`${o===t?">":" "} ${o}: ${i[n]}`)}return r.join(`
`)}function K1e(e){switch(e){case rn:return["Linear","( value )"];case Rt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function TC(e,t,i){let r=e.getShaderParameter(t,35713),s=e.getShaderInfoLog(t).trim();if(r&&s==="")return"";let a=/ERROR: 0:(\d+)/.exec(s);if(a){let n=parseInt(a[1]);return i.toUpperCase()+`

`+s+`

`+Y1e(e.getShaderSource(t),n)}else return s}function Q1e(e,t){let i=K1e(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Z1e(e,t){let i;switch(t){case see:i="Linear";break;case aee:i="Reinhard";break;case nee:i="OptimizedCineon";break;case oee:i="ACESFilmic";break;case lee:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function J1e(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(g3).join(`
`)}function $1e(e){let t=[];for(let i in e){let r=e[i];r!==!1&&t.push("#define "+i+" "+r)}return t.join(`
`)}function ese(e,t){let i={},r=e.getProgramParameter(t,35721);for(let s=0;s<r;s++){let a=e.getActiveAttrib(t,s),n=a.name,o=1;a.type===35674&&(o=2),a.type===35675&&(o=3),a.type===35676&&(o=4),i[n]={type:a.type,location:e.getAttribLocation(t,n),locationSize:o}}return i}function g3(e){return e!==""}function PC(e,t){let i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function DC(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var tse=/^[ \t]*#include +<([\w\d./]+)>/gm;function p6(e){return e.replace(tse,ise)}function ise(e,t){let i=Lt[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return p6(i)}var rse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function IC(e){return e.replace(rse,sse)}function sse(e,t,i,r){let s="";for(let a=parseInt(t);a<parseInt(i);a++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function OC(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function ase(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Tw?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===B$?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===m3&&(t="SHADOWMAP_TYPE_VSM"),t}function nse(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Lc:case zc:t="ENVMAP_TYPE_CUBE";break;case df:t="ENVMAP_TYPE_CUBE_UV";break}return t}function ose(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case zc:t="ENVMAP_MODE_REFRACTION";break}return t}function lse(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Pz:t="ENVMAP_BLENDING_MULTIPLY";break;case iee:t="ENVMAP_BLENDING_MIX";break;case ree:t="ENVMAP_BLENDING_ADD";break}return t}function hse(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let i=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:r,maxMip:i}}function cse(e,t,i,r){let s=e.getContext(),a=i.defines,n=i.vertexShader,o=i.fragmentShader,l=ase(i),h=nse(i),c=ose(i),u=lse(i),d=hse(i),f=i.isWebGL2?"":J1e(i),p=$1e(a),m=s.createProgram(),g,v,y=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(g=[p].filter(g3).join(`
`),g.length>0&&(g+=`
`),v=[f,p].filter(g3).join(`
`),v.length>0&&(v+=`
`)):(g=[OC(i),"#define SHADER_NAME "+i.shaderName,p,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(g3).join(`
`),v=[f,OC(i),"#define SHADER_NAME "+i.shaderName,p,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.envMap?"#define "+c:"",i.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Hn?"#define TONE_MAPPING":"",i.toneMapping!==Hn?Lt.tonemapping_pars_fragment:"",i.toneMapping!==Hn?Z1e("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Lt.encodings_pars_fragment,Q1e("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(g3).join(`
`)),n=p6(n),n=PC(n,i),n=DC(n,i),o=p6(o),o=PC(o,i),o=DC(o,i),n=IC(n),o=IC(o),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",i.glslVersion===u6?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===u6?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let x=y+g+n,w=y+v+o,_=EC(s,35633,x),b=EC(s,35632,w);if(s.attachShader(m,_),s.attachShader(m,b),i.index0AttributeName!==void 0?s.bindAttribLocation(m,0,i.index0AttributeName):i.morphTargets===!0&&s.bindAttribLocation(m,0,"position"),s.linkProgram(m),e.debug.checkShaderErrors){let A=s.getProgramInfoLog(m).trim(),C=s.getShaderInfoLog(_).trim(),T=s.getShaderInfoLog(b).trim(),D=!0,R=!0;if(s.getProgramParameter(m,35714)===!1){D=!1;let O=TC(s,_,"vertex"),j=TC(s,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(m,35715)+`

Program Info Log: `+A+`
`+O+`
`+j)}else A!==""?console.warn("THREE.WebGLProgram: Program Info Log:",A):(C===""||T==="")&&(R=!1);R&&(this.diagnostics={runnable:D,programLog:A,vertexShader:{log:C,prefix:g},fragmentShader:{log:T,prefix:v}})}s.deleteShader(_),s.deleteShader(b);let M;this.getUniforms=function(){return M===void 0&&(M=new Em(s,m)),M};let S;return this.getAttributes=function(){return S===void 0&&(S=ese(s,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(m),this.program=void 0},this.name=i.shaderName,this.id=X1e++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=b,this}var use=0,dse=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new fse(e),t.set(e,i)),i}},fse=class{constructor(e){this.id=use++,this.code=e,this.usedTimes=0}};function pse(e,t,i,r,s,a,n){let o=new Ow,l=new dse,h=[],c=s.isWebGL2,u=s.logarithmicDepthBuffer,d=s.vertexTextures,f=s.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(S,A,C,T,D){let R=T.fog,O=D.geometry,j=S.isMeshStandardMaterial?T.environment:null,X=(S.isMeshStandardMaterial?i:t).get(S.envMap||j),N=X&&X.mapping===df?X.image.height:null,k=p[S.type];S.precision!==null&&(f=s.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));let ne=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,te=ne!==void 0?ne.length:0,Q=0;O.morphAttributes.position!==void 0&&(Q=1),O.morphAttributes.normal!==void 0&&(Q=2),O.morphAttributes.color!==void 0&&(Q=3);let Z,de,ee,le;if(k){let ae=Dn[k];Z=ae.vertexShader,de=ae.fragmentShader}else Z=S.vertexShader,de=S.fragmentShader,l.update(S),ee=l.getVertexShaderID(S),le=l.getFragmentShaderID(S);let $=e.getRenderTarget(),K=S.alphaTest>0,J=S.clearcoat>0,se=S.iridescence>0;return{isWebGL2:c,shaderID:k,shaderName:S.type,vertexShader:Z,fragmentShader:de,defines:S.defines,customVertexShaderID:ee,customFragmentShaderID:le,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:f,instancing:D.isInstancedMesh===!0,instancingColor:D.isInstancedMesh===!0&&D.instanceColor!==null,supportsVertexTextures:d,outputEncoding:$===null?e.outputEncoding:$.isXRRenderTarget===!0?$.texture.encoding:rn,map:!!S.map,matcap:!!S.matcap,envMap:!!X,envMapMode:X&&X.mapping,envMapCubeUVHeight:N,lightMap:!!S.lightMap,aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===Aee,tangentSpaceNormalMap:S.normalMapType===See,decodeVideoTexture:!!S.map&&S.map.isVideoTexture===!0&&S.map.encoding===Rt,clearcoat:J,clearcoatMap:J&&!!S.clearcoatMap,clearcoatRoughnessMap:J&&!!S.clearcoatRoughnessMap,clearcoatNormalMap:J&&!!S.clearcoatNormalMap,iridescence:se,iridescenceMap:se&&!!S.iridescenceMap,iridescenceThicknessMap:se&&!!S.iridescenceThicknessMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,specularIntensityMap:!!S.specularIntensityMap,specularColorMap:!!S.specularColorMap,opaque:S.transparent===!1&&S.blending===Ac,alphaMap:!!S.alphaMap,alphaTest:K,gradientMap:!!S.gradientMap,sheen:S.sheen>0,sheenColorMap:!!S.sheenColorMap,sheenRoughnessMap:!!S.sheenRoughnessMap,transmission:S.transmission>0,transmissionMap:!!S.transmissionMap,thicknessMap:!!S.thicknessMap,combine:S.combine,vertexTangents:!!S.normalMap&&!!O.attributes.tangent,vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!O.attributes.color&&O.attributes.color.itemSize===4,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.iridescenceMap||!!S.iridescenceThicknessMap||!!S.displacementMap||!!S.transmissionMap||!!S.thicknessMap||!!S.specularIntensityMap||!!S.specularColorMap||!!S.sheenColorMap||!!S.sheenRoughnessMap,uvsVertexOnly:!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatNormalMap||S.iridescenceMap||S.iridescenceThicknessMap||S.transmission>0||S.transmissionMap||S.thicknessMap||S.specularIntensityMap||S.specularColorMap||S.sheen>0||S.sheenColorMap||S.sheenRoughnessMap)&&!!S.displacementMap,fog:!!R,useFog:S.fog===!0,fogExp2:R&&R.isFogExp2,flatShading:!!S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:u,skinning:D.isSkinnedMesh===!0,morphTargets:O.morphAttributes.position!==void 0,morphNormals:O.morphAttributes.normal!==void 0,morphColors:O.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:Q,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numClippingPlanes:n.numPlanes,numClipIntersection:n.numIntersection,dithering:S.dithering,shadowMapEnabled:e.shadowMap.enabled&&C.length>0,shadowMapType:e.shadowMap.type,toneMapping:S.toneMapped?e.toneMapping:Hn,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===N1,flipSided:S.side===r1,useDepthPacking:!!S.depthPacking,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function g(S){let A=[];if(S.shaderID?A.push(S.shaderID):(A.push(S.customVertexShaderID),A.push(S.customFragmentShaderID)),S.defines!==void 0)for(let C in S.defines)A.push(C),A.push(S.defines[C]);return S.isRawShaderMaterial===!1&&(v(A,S),y(A,S),A.push(e.outputEncoding)),A.push(S.customProgramCacheKey),A.join()}function v(S,A){S.push(A.precision),S.push(A.outputEncoding),S.push(A.envMapMode),S.push(A.envMapCubeUVHeight),S.push(A.combine),S.push(A.vertexUvs),S.push(A.fogExp2),S.push(A.sizeAttenuation),S.push(A.morphTargetsCount),S.push(A.morphAttributeCount),S.push(A.numDirLights),S.push(A.numPointLights),S.push(A.numSpotLights),S.push(A.numSpotLightMaps),S.push(A.numHemiLights),S.push(A.numRectAreaLights),S.push(A.numDirLightShadows),S.push(A.numPointLightShadows),S.push(A.numSpotLightShadows),S.push(A.numSpotLightShadowsWithMaps),S.push(A.shadowMapType),S.push(A.toneMapping),S.push(A.numClippingPlanes),S.push(A.numClipIntersection),S.push(A.depthPacking)}function y(S,A){o.disableAll(),A.isWebGL2&&o.enable(0),A.supportsVertexTextures&&o.enable(1),A.instancing&&o.enable(2),A.instancingColor&&o.enable(3),A.map&&o.enable(4),A.matcap&&o.enable(5),A.envMap&&o.enable(6),A.lightMap&&o.enable(7),A.aoMap&&o.enable(8),A.emissiveMap&&o.enable(9),A.bumpMap&&o.enable(10),A.normalMap&&o.enable(11),A.objectSpaceNormalMap&&o.enable(12),A.tangentSpaceNormalMap&&o.enable(13),A.clearcoat&&o.enable(14),A.clearcoatMap&&o.enable(15),A.clearcoatRoughnessMap&&o.enable(16),A.clearcoatNormalMap&&o.enable(17),A.iridescence&&o.enable(18),A.iridescenceMap&&o.enable(19),A.iridescenceThicknessMap&&o.enable(20),A.displacementMap&&o.enable(21),A.specularMap&&o.enable(22),A.roughnessMap&&o.enable(23),A.metalnessMap&&o.enable(24),A.gradientMap&&o.enable(25),A.alphaMap&&o.enable(26),A.alphaTest&&o.enable(27),A.vertexColors&&o.enable(28),A.vertexAlphas&&o.enable(29),A.vertexUvs&&o.enable(30),A.vertexTangents&&o.enable(31),A.uvsVertexOnly&&o.enable(32),S.push(o.mask),o.disableAll(),A.fog&&o.enable(0),A.useFog&&o.enable(1),A.flatShading&&o.enable(2),A.logarithmicDepthBuffer&&o.enable(3),A.skinning&&o.enable(4),A.morphTargets&&o.enable(5),A.morphNormals&&o.enable(6),A.morphColors&&o.enable(7),A.premultipliedAlpha&&o.enable(8),A.shadowMapEnabled&&o.enable(9),A.physicallyCorrectLights&&o.enable(10),A.doubleSided&&o.enable(11),A.flipSided&&o.enable(12),A.useDepthPacking&&o.enable(13),A.dithering&&o.enable(14),A.specularIntensityMap&&o.enable(15),A.specularColorMap&&o.enable(16),A.transmission&&o.enable(17),A.transmissionMap&&o.enable(18),A.thicknessMap&&o.enable(19),A.sheen&&o.enable(20),A.sheenColorMap&&o.enable(21),A.sheenRoughnessMap&&o.enable(22),A.decodeVideoTexture&&o.enable(23),A.opaque&&o.enable(24),S.push(o.mask)}function x(S){let A=p[S.type],C;if(A){let T=Dn[A];C=o0.clone(T.uniforms)}else C=S.uniforms;return C}function w(S,A){let C;for(let T=0,D=h.length;T<D;T++){let R=h[T];if(R.cacheKey===A){C=R,++C.usedTimes;break}}return C===void 0&&(C=new cse(e,A,S,a),h.push(C)),C}function _(S){if(--S.usedTimes===0){let A=h.indexOf(S);h[A]=h[h.length-1],h.pop(),S.destroy()}}function b(S){l.remove(S)}function M(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:x,acquireProgram:w,releaseProgram:_,releaseShaderCache:b,programs:h,dispose:M}}function mse(){let e=new WeakMap;function t(a){let n=e.get(a);return n===void 0&&(n={},e.set(a,n)),n}function i(a){e.delete(a)}function r(a,n,o){e.get(a)[n]=o}function s(){e=new WeakMap}return{get:t,remove:i,update:r,dispose:s}}function gse(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function RC(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function LC(){let e=[],t=0,i=[],r=[],s=[];function a(){t=0,i.length=0,r.length=0,s.length=0}function n(u,d,f,p,m,g){let v=e[t];return v===void 0?(v={id:u.id,object:u,geometry:d,material:f,groupOrder:p,renderOrder:u.renderOrder,z:m,group:g},e[t]=v):(v.id=u.id,v.object=u,v.geometry=d,v.material=f,v.groupOrder=p,v.renderOrder=u.renderOrder,v.z=m,v.group=g),t++,v}function o(u,d,f,p,m,g){let v=n(u,d,f,p,m,g);f.transmission>0?r.push(v):f.transparent===!0?s.push(v):i.push(v)}function l(u,d,f,p,m,g){let v=n(u,d,f,p,m,g);f.transmission>0?r.unshift(v):f.transparent===!0?s.unshift(v):i.unshift(v)}function h(u,d){i.length>1&&i.sort(u||gse),r.length>1&&r.sort(d||RC),s.length>1&&s.sort(d||RC)}function c(){for(let u=t,d=e.length;u<d;u++){let f=e[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:i,transmissive:r,transparent:s,init:a,push:o,unshift:l,finish:c,sort:h}}function vse(){let e=new WeakMap;function t(r,s){let a=e.get(r),n;return a===void 0?(n=new LC,e.set(r,[n])):s>=a.length?(n=new LC,a.push(n)):n=a[s],n}function i(){e=new WeakMap}return{get:t,dispose:i}}function yse(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new E,color:new pt};break;case"SpotLight":i={position:new E,direction:new E,color:new pt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new E,color:new pt,distance:0,decay:0};break;case"HemisphereLight":i={direction:new E,skyColor:new pt,groundColor:new pt};break;case"RectAreaLight":i={color:new pt,position:new E,halfWidth:new E,halfHeight:new E};break}return e[t.id]=i,i}}}function xse(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new re};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new re};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new re,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=i,i}}}var bse=0;function wse(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function _se(e,t){let i=new yse,r=xse(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)s.probe.push(new E);let a=new E,n=new Fe,o=new Fe;function l(c,u){let d=0,f=0,p=0;for(let T=0;T<9;T++)s.probe[T].set(0,0,0);let m=0,g=0,v=0,y=0,x=0,w=0,_=0,b=0,M=0,S=0;c.sort(wse);let A=u!==!0?Math.PI:1;for(let T=0,D=c.length;T<D;T++){let R=c[T],O=R.color,j=R.intensity,X=R.distance,N=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)d+=O.r*j*A,f+=O.g*j*A,p+=O.b*j*A;else if(R.isLightProbe)for(let k=0;k<9;k++)s.probe[k].addScaledVector(R.sh.coefficients[k],j);else if(R.isDirectionalLight){let k=i.get(R);if(k.color.copy(R.color).multiplyScalar(R.intensity*A),R.castShadow){let ne=R.shadow,te=r.get(R);te.shadowBias=ne.bias,te.shadowNormalBias=ne.normalBias,te.shadowRadius=ne.radius,te.shadowMapSize=ne.mapSize,s.directionalShadow[m]=te,s.directionalShadowMap[m]=N,s.directionalShadowMatrix[m]=R.shadow.matrix,w++}s.directional[m]=k,m++}else if(R.isSpotLight){let k=i.get(R);k.position.setFromMatrixPosition(R.matrixWorld),k.color.copy(O).multiplyScalar(j*A),k.distance=X,k.coneCos=Math.cos(R.angle),k.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),k.decay=R.decay,s.spot[v]=k;let ne=R.shadow;if(R.map&&(s.spotLightMap[M]=R.map,M++,ne.updateMatrices(R),R.castShadow&&S++),s.spotLightMatrix[v]=ne.matrix,R.castShadow){let te=r.get(R);te.shadowBias=ne.bias,te.shadowNormalBias=ne.normalBias,te.shadowRadius=ne.radius,te.shadowMapSize=ne.mapSize,s.spotShadow[v]=te,s.spotShadowMap[v]=N,b++}v++}else if(R.isRectAreaLight){let k=i.get(R);k.color.copy(O).multiplyScalar(j),k.halfWidth.set(R.width*.5,0,0),k.halfHeight.set(0,R.height*.5,0),s.rectArea[y]=k,y++}else if(R.isPointLight){let k=i.get(R);if(k.color.copy(R.color).multiplyScalar(R.intensity*A),k.distance=R.distance,k.decay=R.decay,R.castShadow){let ne=R.shadow,te=r.get(R);te.shadowBias=ne.bias,te.shadowNormalBias=ne.normalBias,te.shadowRadius=ne.radius,te.shadowMapSize=ne.mapSize,te.shadowCameraNear=ne.camera.near,te.shadowCameraFar=ne.camera.far,s.pointShadow[g]=te,s.pointShadowMap[g]=N,s.pointShadowMatrix[g]=R.shadow.matrix,_++}s.point[g]=k,g++}else if(R.isHemisphereLight){let k=i.get(R);k.skyColor.copy(R.color).multiplyScalar(j*A),k.groundColor.copy(R.groundColor).multiplyScalar(j*A),s.hemi[x]=k,x++}}y>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=He.LTC_FLOAT_1,s.rectAreaLTC2=He.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=He.LTC_HALF_1,s.rectAreaLTC2=He.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=d,s.ambient[1]=f,s.ambient[2]=p;let C=s.hash;(C.directionalLength!==m||C.pointLength!==g||C.spotLength!==v||C.rectAreaLength!==y||C.hemiLength!==x||C.numDirectionalShadows!==w||C.numPointShadows!==_||C.numSpotShadows!==b||C.numSpotMaps!==M)&&(s.directional.length=m,s.spot.length=v,s.rectArea.length=y,s.point.length=g,s.hemi.length=x,s.directionalShadow.length=w,s.directionalShadowMap.length=w,s.pointShadow.length=_,s.pointShadowMap.length=_,s.spotShadow.length=b,s.spotShadowMap.length=b,s.directionalShadowMatrix.length=w,s.pointShadowMatrix.length=_,s.spotLightMatrix.length=b+M-S,s.spotLightMap.length=M,s.numSpotLightShadowsWithMaps=S,C.directionalLength=m,C.pointLength=g,C.spotLength=v,C.rectAreaLength=y,C.hemiLength=x,C.numDirectionalShadows=w,C.numPointShadows=_,C.numSpotShadows=b,C.numSpotMaps=M,s.version=bse++)}function h(c,u){let d=0,f=0,p=0,m=0,g=0,v=u.matrixWorldInverse;for(let y=0,x=c.length;y<x;y++){let w=c[y];if(w.isDirectionalLight){let _=s.directional[d];_.direction.setFromMatrixPosition(w.matrixWorld),a.setFromMatrixPosition(w.target.matrixWorld),_.direction.sub(a),_.direction.transformDirection(v),d++}else if(w.isSpotLight){let _=s.spot[p];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),_.direction.setFromMatrixPosition(w.matrixWorld),a.setFromMatrixPosition(w.target.matrixWorld),_.direction.sub(a),_.direction.transformDirection(v),p++}else if(w.isRectAreaLight){let _=s.rectArea[m];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),o.identity(),n.copy(w.matrixWorld),n.premultiply(v),o.extractRotation(n),_.halfWidth.set(w.width*.5,0,0),_.halfHeight.set(0,w.height*.5,0),_.halfWidth.applyMatrix4(o),_.halfHeight.applyMatrix4(o),m++}else if(w.isPointLight){let _=s.point[f];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),f++}else if(w.isHemisphereLight){let _=s.hemi[g];_.direction.setFromMatrixPosition(w.matrixWorld),_.direction.transformDirection(v),g++}}}return{setup:l,setupView:h,state:s}}function zC(e,t){let i=new _se(e,t),r=[],s=[];function a(){r.length=0,s.length=0}function n(c){r.push(c)}function o(c){s.push(c)}function l(c){i.setup(r,c)}function h(c){i.setupView(r,c)}return{init:a,state:{lightsArray:r,shadowsArray:s,lights:i},setupLights:l,setupLightsView:h,pushLight:n,pushShadow:o}}function Sse(e,t){let i=new WeakMap;function r(a,n=0){let o=i.get(a),l;return o===void 0?(l=new zC(e,t),i.set(a,[l])):n>=o.length?(l=new zC(e,t),o.push(l)):l=o[n],l}function s(){i=new WeakMap}return{get:r,dispose:s}}var Qz=class extends ff{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ol,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Ase=class extends ff{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new E,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Mse=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Cse=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ese(e,t,i){let r=new Lw,s=new re,a=new re,n=new Mt,o=new Qz({depthPacking:zz}),l=new Ase,h={},c=i.maxTextureSize,u={[tn]:r1,[r1]:tn,[N1]:N1},d=new ti({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new re},radius:{value:4}},vertexShader:Mse,fragmentShader:Cse}),f=d.clone();f.defines.HORIZONTAL_PASS=1;let p=new rt;p.setAttribute("position",new mt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new zi(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Tw,this.render=function(w,_,b){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||w.length===0)return;let M=e.getRenderTarget(),S=e.getActiveCubeFace(),A=e.getActiveMipmapLevel(),C=e.state;C.setBlending(Or),C.buffers.color.setClear(1,1,1,1),C.buffers.depth.setTest(!0),C.setScissorTest(!1);for(let T=0,D=w.length;T<D;T++){let R=w[T],O=R.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",R,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;s.copy(O.mapSize);let j=O.getFrameExtents();if(s.multiply(j),a.copy(O.mapSize),(s.x>c||s.y>c)&&(s.x>c&&(a.x=Math.floor(c/j.x),s.x=a.x*j.x,O.mapSize.x=a.x),s.y>c&&(a.y=Math.floor(c/j.y),s.y=a.y*j.y,O.mapSize.y=a.y)),O.map===null){let N=this.type!==m3?{minFilter:jt,magFilter:jt}:{};O.map=new ei(s.x,s.y,N),O.map.texture.name=R.name+".shadowMap",O.camera.updateProjectionMatrix()}e.setRenderTarget(O.map),e.clear();let X=O.getViewportCount();for(let N=0;N<X;N++){let k=O.getViewport(N);n.set(a.x*k.x,a.y*k.y,a.x*k.z,a.y*k.w),C.viewport(n),O.updateMatrices(R,N),r=O.getFrustum(),x(_,b,O.camera,R,this.type)}O.isPointLightShadow!==!0&&this.type===m3&&v(O,b),O.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(M,S,A)};function v(w,_){let b=t.update(m);d.defines.VSM_SAMPLES!==w.blurSamples&&(d.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new ei(s.x,s.y)),d.uniforms.shadow_pass.value=w.map.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,e.setRenderTarget(w.mapPass),e.clear(),e.renderBufferDirect(_,null,b,d,m,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,e.setRenderTarget(w.map),e.clear(),e.renderBufferDirect(_,null,b,f,m,null)}function y(w,_,b,M,S,A){let C=null,T=b.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(T!==void 0)C=T;else if(C=b.isPointLight===!0?l:o,e.localClippingEnabled&&_.clipShadows===!0&&Array.isArray(_.clippingPlanes)&&_.clippingPlanes.length!==0||_.displacementMap&&_.displacementScale!==0||_.alphaMap&&_.alphaTest>0||_.map&&_.alphaTest>0){let D=C.uuid,R=_.uuid,O=h[D];O===void 0&&(O={},h[D]=O);let j=O[R];j===void 0&&(j=C.clone(),O[R]=j),C=j}return C.visible=_.visible,C.wireframe=_.wireframe,A===m3?C.side=_.shadowSide!==null?_.shadowSide:_.side:C.side=_.shadowSide!==null?_.shadowSide:u[_.side],C.alphaMap=_.alphaMap,C.alphaTest=_.alphaTest,C.map=_.map,C.clipShadows=_.clipShadows,C.clippingPlanes=_.clippingPlanes,C.clipIntersection=_.clipIntersection,C.displacementMap=_.displacementMap,C.displacementScale=_.displacementScale,C.displacementBias=_.displacementBias,C.wireframeLinewidth=_.wireframeLinewidth,C.linewidth=_.linewidth,b.isPointLight===!0&&C.isMeshDistanceMaterial===!0&&(C.referencePosition.setFromMatrixPosition(b.matrixWorld),C.nearDistance=M,C.farDistance=S),C}function x(w,_,b,M,S){if(w.visible===!1)return;if(w.layers.test(_.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&S===m3)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,w.matrixWorld);let C=t.update(w),T=w.material;if(Array.isArray(T)){let D=C.groups;for(let R=0,O=D.length;R<O;R++){let j=D[R],X=T[j.materialIndex];if(X&&X.visible){let N=y(w,X,M,b.near,b.far,S);e.renderBufferDirect(b,null,C,N,w,j)}}}else if(T.visible){let D=y(w,T,M,b.near,b.far,S);e.renderBufferDirect(b,null,C,D,w,null)}}let A=w.children;for(let C=0,T=A.length;C<T;C++)x(A[C],_,b,M,S)}}function Tse(e,t,i){let r=i.isWebGL2;function s(){let fe=!1,Ie=new Mt,ke=null,Ye=new Mt(0,0,0,0);return{setMask:function(ct){ke!==ct&&!fe&&(e.colorMask(ct,ct,ct,ct),ke=ct)},setLocked:function(ct){fe=ct},setClear:function(ct,Gt,qt,br,Ys){Ys===!0&&(ct*=br,Gt*=br,qt*=br),Ie.set(ct,Gt,qt,br),Ye.equals(Ie)===!1&&(e.clearColor(ct,Gt,qt,br),Ye.copy(Ie))},reset:function(){fe=!1,ke=null,Ye.set(-1,0,0,0)}}}function a(){let fe=!1,Ie=null,ke=null,Ye=null;return{setTest:function(ct){ct?K(2929):J(2929)},setMask:function(ct){Ie!==ct&&!fe&&(e.depthMask(ct),Ie=ct)},setFunc:function(ct){if(ke!==ct){switch(ct){case K$:e.depthFunc(512);break;case Q$:e.depthFunc(519);break;case Z$:e.depthFunc(513);break;case n6:e.depthFunc(515);break;case J$:e.depthFunc(514);break;case $$:e.depthFunc(518);break;case eee:e.depthFunc(516);break;case tee:e.depthFunc(517);break;default:e.depthFunc(515)}ke=ct}},setLocked:function(ct){fe=ct},setClear:function(ct){Ye!==ct&&(e.clearDepth(ct),Ye=ct)},reset:function(){fe=!1,Ie=null,ke=null,Ye=null}}}function n(){let fe=!1,Ie=null,ke=null,Ye=null,ct=null,Gt=null,qt=null,br=null,Ys=null;return{setTest:function(Nt){fe||(Nt?K(2960):J(2960))},setMask:function(Nt){Ie!==Nt&&!fe&&(e.stencilMask(Nt),Ie=Nt)},setFunc:function(Nt,ls,h1){(ke!==Nt||Ye!==ls||ct!==h1)&&(e.stencilFunc(Nt,ls,h1),ke=Nt,Ye=ls,ct=h1)},setOp:function(Nt,ls,h1){(Gt!==Nt||qt!==ls||br!==h1)&&(e.stencilOp(Nt,ls,h1),Gt=Nt,qt=ls,br=h1)},setLocked:function(Nt){fe=Nt},setClear:function(Nt){Ys!==Nt&&(e.clearStencil(Nt),Ys=Nt)},reset:function(){fe=!1,Ie=null,ke=null,Ye=null,ct=null,Gt=null,qt=null,br=null,Ys=null}}}let o=new s,l=new a,h=new n,c=new WeakMap,u=new WeakMap,d={},f={},p=new WeakMap,m=[],g=null,v=!1,y=null,x=null,w=null,_=null,b=null,M=null,S=null,A=!1,C=null,T=null,D=null,R=null,O=null,j=e.getParameter(35661),X=!1,N=0,k=e.getParameter(7938);k.indexOf("WebGL")!==-1?(N=parseFloat(/^WebGL (\d)/.exec(k)[1]),X=N>=1):k.indexOf("OpenGL ES")!==-1&&(N=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),X=N>=2);let ne=null,te={},Q=e.getParameter(3088),Z=e.getParameter(2978),de=new Mt().fromArray(Q),ee=new Mt().fromArray(Z);function le(fe,Ie,ke){let Ye=new Uint8Array(4),ct=e.createTexture();e.bindTexture(fe,ct),e.texParameteri(fe,10241,9728),e.texParameteri(fe,10240,9728);for(let Gt=0;Gt<ke;Gt++)e.texImage2D(Ie+Gt,0,6408,1,1,0,6408,5121,Ye);return ct}let $={};$[3553]=le(3553,3553,1),$[34067]=le(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),h.setClear(0),K(2929),l.setFunc(n6),ve(!1),ge(EM),K(2884),ie(Or);function K(fe){d[fe]!==!0&&(e.enable(fe),d[fe]=!0)}function J(fe){d[fe]!==!1&&(e.disable(fe),d[fe]=!1)}function se(fe,Ie){return f[fe]!==Ie?(e.bindFramebuffer(fe,Ie),f[fe]=Ie,r&&(fe===36009&&(f[36160]=Ie),fe===36160&&(f[36009]=Ie)),!0):!1}function ae(fe,Ie){let ke=m,Ye=!1;if(fe)if(ke=p.get(Ie),ke===void 0&&(ke=[],p.set(Ie,ke)),fe.isWebGLMultipleRenderTargets){let ct=fe.texture;if(ke.length!==ct.length||ke[0]!==36064){for(let Gt=0,qt=ct.length;Gt<qt;Gt++)ke[Gt]=36064+Gt;ke.length=ct.length,Ye=!0}}else ke[0]!==36064&&(ke[0]=36064,Ye=!0);else ke[0]!==1029&&(ke[0]=1029,Ye=!0);Ye&&(i.isWebGL2?e.drawBuffers(ke):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(ke))}function Ae(fe){return g!==fe?(e.useProgram(fe),g=fe,!0):!1}let F={[F2]:32774,[F$]:32778,[N$]:32779};if(r)F[IM]=32775,F[OM]=32776;else{let fe=t.get("EXT_blend_minmax");fe!==null&&(F[IM]=fe.MIN_EXT,F[OM]=fe.MAX_EXT)}let V={[U$]:0,[V$]:1,[j$]:768,[Ez]:770,[Y$]:776,[q$]:774,[H$]:772,[G$]:769,[Tz]:771,[X$]:775,[W$]:773};function ie(fe,Ie,ke,Ye,ct,Gt,qt,br){if(fe===Or){v===!0&&(J(3042),v=!1);return}if(v===!1&&(K(3042),v=!0),fe!==k$){if(fe!==y||br!==A){if((x!==F2||b!==F2)&&(e.blendEquation(32774),x=F2,b=F2),br)switch(fe){case Ac:e.blendFuncSeparate(1,771,1,771);break;case TM:e.blendFunc(1,1);break;case PM:e.blendFuncSeparate(0,769,0,1);break;case DM:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}else switch(fe){case Ac:e.blendFuncSeparate(770,771,1,771);break;case TM:e.blendFunc(770,1);break;case PM:e.blendFuncSeparate(0,769,0,1);break;case DM:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}w=null,_=null,M=null,S=null,y=fe,A=br}return}ct=ct||Ie,Gt=Gt||ke,qt=qt||Ye,(Ie!==x||ct!==b)&&(e.blendEquationSeparate(F[Ie],F[ct]),x=Ie,b=ct),(ke!==w||Ye!==_||Gt!==M||qt!==S)&&(e.blendFuncSeparate(V[ke],V[Ye],V[Gt],V[qt]),w=ke,_=Ye,M=Gt,S=qt),y=fe,A=!1}function ue(fe,Ie){fe.side===N1?J(2884):K(2884);let ke=fe.side===r1;Ie&&(ke=!ke),ve(ke),fe.blending===Ac&&fe.transparent===!1?ie(Or):ie(fe.blending,fe.blendEquation,fe.blendSrc,fe.blendDst,fe.blendEquationAlpha,fe.blendSrcAlpha,fe.blendDstAlpha,fe.premultipliedAlpha),l.setFunc(fe.depthFunc),l.setTest(fe.depthTest),l.setMask(fe.depthWrite),o.setMask(fe.colorWrite);let Ye=fe.stencilWrite;h.setTest(Ye),Ye&&(h.setMask(fe.stencilWriteMask),h.setFunc(fe.stencilFunc,fe.stencilRef,fe.stencilFuncMask),h.setOp(fe.stencilFail,fe.stencilZFail,fe.stencilZPass)),ye(fe.polygonOffset,fe.polygonOffsetFactor,fe.polygonOffsetUnits),fe.alphaToCoverage===!0?K(32926):J(32926)}function ve(fe){C!==fe&&(fe?e.frontFace(2304):e.frontFace(2305),C=fe)}function ge(fe){fe!==L$?(K(2884),fe!==T&&(fe===EM?e.cullFace(1029):fe===z$?e.cullFace(1028):e.cullFace(1032))):J(2884),T=fe}function _e(fe){fe!==D&&(X&&e.lineWidth(fe),D=fe)}function ye(fe,Ie,ke){fe?(K(32823),(R!==Ie||O!==ke)&&(e.polygonOffset(Ie,ke),R=Ie,O=ke)):J(32823)}function Se(fe){fe?K(3089):J(3089)}function pe(fe){fe===void 0&&(fe=33984+j-1),ne!==fe&&(e.activeTexture(fe),ne=fe)}function G(fe,Ie,ke){ke===void 0&&(ne===null?ke=33984+j-1:ke=ne);let Ye=te[ke];Ye===void 0&&(Ye={type:void 0,texture:void 0},te[ke]=Ye),(Ye.type!==fe||Ye.texture!==Ie)&&(ne!==ke&&(e.activeTexture(ke),ne=ke),e.bindTexture(fe,Ie||$[fe]),Ye.type=fe,Ye.texture=Ie)}function L(){let fe=te[ne];fe!==void 0&&fe.type!==void 0&&(e.bindTexture(fe.type,null),fe.type=void 0,fe.texture=void 0)}function he(){try{e.compressedTexImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ce(){try{e.compressedTexImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function B(){try{e.texSubImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Le(){try{e.texSubImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ue(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function je(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ee(){try{e.texStorage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function qe(){try{e.texStorage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ge(){try{e.texImage2D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Je(){try{e.texImage3D.apply(e,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function ot(fe){de.equals(fe)===!1&&(e.scissor(fe.x,fe.y,fe.z,fe.w),de.copy(fe))}function Qe(fe){ee.equals(fe)===!1&&(e.viewport(fe.x,fe.y,fe.z,fe.w),ee.copy(fe))}function et(fe,Ie){let ke=u.get(Ie);ke===void 0&&(ke=new WeakMap,u.set(Ie,ke));let Ye=ke.get(fe);Ye===void 0&&(Ye=e.getUniformBlockIndex(Ie,fe.name),ke.set(fe,Ye))}function oi(fe,Ie){let ke=u.get(Ie).get(fe);c.get(Ie)!==ke&&(e.uniformBlockBinding(Ie,ke,fe.__bindingPointIndex),c.set(Ie,ke))}function Mi(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),r===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},ne=null,te={},f={},p=new WeakMap,m=[],g=null,v=!1,y=null,x=null,w=null,_=null,b=null,M=null,S=null,A=!1,C=null,T=null,D=null,R=null,O=null,de.set(0,0,e.canvas.width,e.canvas.height),ee.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),h.reset()}return{buffers:{color:o,depth:l,stencil:h},enable:K,disable:J,bindFramebuffer:se,drawBuffers:ae,useProgram:Ae,setBlending:ie,setMaterial:ue,setFlipSided:ve,setCullFace:ge,setLineWidth:_e,setPolygonOffset:ye,setScissorTest:Se,activeTexture:pe,bindTexture:G,unbindTexture:L,compressedTexImage2D:he,compressedTexImage3D:Ce,texImage2D:Ge,texImage3D:Je,updateUBOMapping:et,uniformBlockBinding:oi,texStorage2D:Ee,texStorage3D:qe,texSubImage2D:B,texSubImage3D:Le,compressedTexSubImage2D:Ue,compressedTexSubImage3D:je,scissor:ot,viewport:Qe,reset:Mi}}function Pse(e,t,i,r,s,a,n){let o=s.isWebGL2,l=s.maxTextures,h=s.maxCubemapSize,c=s.maxTextureSize,u=s.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap,m,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(G,L){return v?new OffscreenCanvas(G,L):Id("canvas")}function x(G,L,he,Ce){let B=1;if((G.width>Ce||G.height>Ce)&&(B=Ce/Math.max(G.width,G.height)),B<1||L===!0)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){let Le=L?xg:Math.floor,Ue=Le(B*G.width),je=Le(B*G.height);m===void 0&&(m=y(Ue,je));let Ee=he?y(Ue,je):m;return Ee.width=Ue,Ee.height=je,Ee.getContext("2d").drawImage(G,0,0,Ue,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+Ue+"x"+je+")."),Ee}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function w(G){return f6(G.width)&&f6(G.height)}function _(G){return o?!1:G.wrapS!==Wi||G.wrapT!==Wi||G.minFilter!==jt&&G.minFilter!==Bt}function b(G,L){return G.generateMipmaps&&L&&G.minFilter!==jt&&G.minFilter!==Bt}function M(G){e.generateMipmap(G)}function S(G,L,he,Ce,B=!1){if(o===!1)return L;if(G!==null){if(e[G]!==void 0)return e[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let Le=L;return L===6403&&(he===5126&&(Le=33326),he===5131&&(Le=33325),he===5121&&(Le=33321)),L===33319&&(he===5126&&(Le=33328),he===5131&&(Le=33327),he===5121&&(Le=33323)),L===6408&&(he===5126&&(Le=34836),he===5131&&(Le=34842),he===5121&&(Le=Ce===Rt&&B===!1?35907:32856),he===32819&&(Le=32854),he===32820&&(Le=32855)),(Le===33325||Le===33326||Le===33327||Le===33328||Le===34842||Le===34836)&&t.get("EXT_color_buffer_float"),Le}function A(G,L,he){return b(G,he)===!0||G.isFramebufferTexture&&G.minFilter!==jt&&G.minFilter!==Bt?Math.log2(Math.max(L.width,L.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?L.mipmaps.length:1}function C(G){return G===jt||G===RM||G===iy?9728:9729}function T(G){let L=G.target;L.removeEventListener("dispose",T),R(L),L.isVideoTexture&&p.delete(L)}function D(G){let L=G.target;L.removeEventListener("dispose",D),j(L)}function R(G){let L=r.get(G);if(L.__webglInit===void 0)return;let he=G.source,Ce=g.get(he);if(Ce){let B=Ce[L.__cacheKey];B.usedTimes--,B.usedTimes===0&&O(G),Object.keys(Ce).length===0&&g.delete(he)}r.remove(G)}function O(G){let L=r.get(G);e.deleteTexture(L.__webglTexture);let he=G.source,Ce=g.get(he);delete Ce[L.__cacheKey],n.memory.textures--}function j(G){let L=G.texture,he=r.get(G),Ce=r.get(L);if(Ce.__webglTexture!==void 0&&(e.deleteTexture(Ce.__webglTexture),n.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let B=0;B<6;B++)e.deleteFramebuffer(he.__webglFramebuffer[B]),he.__webglDepthbuffer&&e.deleteRenderbuffer(he.__webglDepthbuffer[B]);else{if(e.deleteFramebuffer(he.__webglFramebuffer),he.__webglDepthbuffer&&e.deleteRenderbuffer(he.__webglDepthbuffer),he.__webglMultisampledFramebuffer&&e.deleteFramebuffer(he.__webglMultisampledFramebuffer),he.__webglColorRenderbuffer)for(let B=0;B<he.__webglColorRenderbuffer.length;B++)he.__webglColorRenderbuffer[B]&&e.deleteRenderbuffer(he.__webglColorRenderbuffer[B]);he.__webglDepthRenderbuffer&&e.deleteRenderbuffer(he.__webglDepthRenderbuffer)}if(G.isWebGLMultipleRenderTargets)for(let B=0,Le=L.length;B<Le;B++){let Ue=r.get(L[B]);Ue.__webglTexture&&(e.deleteTexture(Ue.__webglTexture),n.memory.textures--),r.remove(L[B])}r.remove(L),r.remove(G)}let X=0;function N(){X=0}function k(){let G=X;return G>=l&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+l),X+=1,G}function ne(G){let L=[];return L.push(G.wrapS),L.push(G.wrapT),L.push(G.wrapR||0),L.push(G.magFilter),L.push(G.minFilter),L.push(G.anisotropy),L.push(G.internalFormat),L.push(G.format),L.push(G.type),L.push(G.generateMipmaps),L.push(G.premultiplyAlpha),L.push(G.flipY),L.push(G.unpackAlignment),L.push(G.encoding),L.join()}function te(G,L){let he=r.get(G);if(G.isVideoTexture&&Se(G),G.isRenderTargetTexture===!1&&G.version>0&&he.__version!==G.version){let Ce=G.image;if(Ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{J(he,G,L);return}}i.bindTexture(3553,he.__webglTexture,33984+L)}function Q(G,L){let he=r.get(G);if(G.version>0&&he.__version!==G.version){J(he,G,L);return}i.bindTexture(35866,he.__webglTexture,33984+L)}function Z(G,L){let he=r.get(G);if(G.version>0&&he.__version!==G.version){J(he,G,L);return}i.bindTexture(32879,he.__webglTexture,33984+L)}function de(G,L){let he=r.get(G);if(G.version>0&&he.__version!==G.version){se(he,G,L);return}i.bindTexture(34067,he.__webglTexture,33984+L)}let ee={[Bo]:10497,[Wi]:33071,[h6]:33648},le={[jt]:9728,[RM]:9984,[iy]:9986,[Bt]:9729,[hee]:9985,[ku]:9987};function $(G,L,he){if(he?(e.texParameteri(G,10242,ee[L.wrapS]),e.texParameteri(G,10243,ee[L.wrapT]),(G===32879||G===35866)&&e.texParameteri(G,32882,ee[L.wrapR]),e.texParameteri(G,10240,le[L.magFilter]),e.texParameteri(G,10241,le[L.minFilter])):(e.texParameteri(G,10242,33071),e.texParameteri(G,10243,33071),(G===32879||G===35866)&&e.texParameteri(G,32882,33071),(L.wrapS!==Wi||L.wrapT!==Wi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(G,10240,C(L.magFilter)),e.texParameteri(G,10241,C(L.minFilter)),L.minFilter!==jt&&L.minFilter!==Bt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let Ce=t.get("EXT_texture_filter_anisotropic");if(L.magFilter===jt||L.minFilter!==iy&&L.minFilter!==ku||L.type===bi&&t.has("OES_texture_float_linear")===!1||o===!1&&L.type===Jo&&t.has("OES_texture_half_float_linear")===!1)return;(L.anisotropy>1||r.get(L).__currentAnisotropy)&&(e.texParameterf(G,Ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,s.getMaxAnisotropy())),r.get(L).__currentAnisotropy=L.anisotropy)}}function K(G,L){let he=!1;G.__webglInit===void 0&&(G.__webglInit=!0,L.addEventListener("dispose",T));let Ce=L.source,B=g.get(Ce);B===void 0&&(B={},g.set(Ce,B));let Le=ne(L);if(Le!==G.__cacheKey){B[Le]===void 0&&(B[Le]={texture:e.createTexture(),usedTimes:0},n.memory.textures++,he=!0),B[Le].usedTimes++;let Ue=B[G.__cacheKey];Ue!==void 0&&(B[G.__cacheKey].usedTimes--,Ue.usedTimes===0&&O(L)),G.__cacheKey=Le,G.__webglTexture=B[Le].texture}return he}function J(G,L,he){let Ce=3553;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(Ce=35866),L.isData3DTexture&&(Ce=32879);let B=K(G,L),Le=L.source;i.bindTexture(Ce,G.__webglTexture,33984+he);let Ue=r.get(Le);if(Le.version!==Ue.__version||B===!0){i.activeTexture(33984+he),e.pixelStorei(37440,L.flipY),e.pixelStorei(37441,L.premultiplyAlpha),e.pixelStorei(3317,L.unpackAlignment),e.pixelStorei(37443,0);let je=_(L)&&w(L.image)===!1,Ee=x(L.image,je,!1,c);Ee=pe(L,Ee);let qe=w(Ee)||o,Ge=a.convert(L.format,L.encoding),Je=a.convert(L.type),ot=S(L.internalFormat,Ge,Je,L.encoding,L.isVideoTexture);$(Ce,L,qe);let Qe,et=L.mipmaps,oi=o&&L.isVideoTexture!==!0,Mi=Ue.__version===void 0||B===!0,fe=A(L,Ee,qe);if(L.isDepthTexture)ot=6402,o?L.type===bi?ot=36012:L.type===ko?ot=33190:L.type===Mc?ot=35056:ot=33189:L.type===bi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),L.format===Cc&&ot===6402&&L.type!==Iz&&L.type!==ko&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),L.type=ko,Je=a.convert(L.type)),L.format===Bc&&ot===6402&&(ot=34041,L.type!==Mc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),L.type=Mc,Je=a.convert(L.type))),Mi&&(oi?i.texStorage2D(3553,1,ot,Ee.width,Ee.height):i.texImage2D(3553,0,ot,Ee.width,Ee.height,0,Ge,Je,null));else if(L.isDataTexture)if(et.length>0&&qe){oi&&Mi&&i.texStorage2D(3553,fe,ot,et[0].width,et[0].height);for(let Ie=0,ke=et.length;Ie<ke;Ie++)Qe=et[Ie],oi?i.texSubImage2D(3553,Ie,0,0,Qe.width,Qe.height,Ge,Je,Qe.data):i.texImage2D(3553,Ie,ot,Qe.width,Qe.height,0,Ge,Je,Qe.data);L.generateMipmaps=!1}else oi?(Mi&&i.texStorage2D(3553,fe,ot,Ee.width,Ee.height),i.texSubImage2D(3553,0,0,0,Ee.width,Ee.height,Ge,Je,Ee.data)):i.texImage2D(3553,0,ot,Ee.width,Ee.height,0,Ge,Je,Ee.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){oi&&Mi&&i.texStorage3D(35866,fe,ot,et[0].width,et[0].height,Ee.depth);for(let Ie=0,ke=et.length;Ie<ke;Ie++)Qe=et[Ie],L.format!==Ki?Ge!==null?oi?i.compressedTexSubImage3D(35866,Ie,0,0,0,Qe.width,Qe.height,Ee.depth,Ge,Qe.data,0,0):i.compressedTexImage3D(35866,Ie,ot,Qe.width,Qe.height,Ee.depth,0,Qe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oi?i.texSubImage3D(35866,Ie,0,0,0,Qe.width,Qe.height,Ee.depth,Ge,Je,Qe.data):i.texImage3D(35866,Ie,ot,Qe.width,Qe.height,Ee.depth,0,Ge,Je,Qe.data)}else{oi&&Mi&&i.texStorage2D(3553,fe,ot,et[0].width,et[0].height);for(let Ie=0,ke=et.length;Ie<ke;Ie++)Qe=et[Ie],L.format!==Ki?Ge!==null?oi?i.compressedTexSubImage2D(3553,Ie,0,0,Qe.width,Qe.height,Ge,Qe.data):i.compressedTexImage2D(3553,Ie,ot,Qe.width,Qe.height,0,Qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oi?i.texSubImage2D(3553,Ie,0,0,Qe.width,Qe.height,Ge,Je,Qe.data):i.texImage2D(3553,Ie,ot,Qe.width,Qe.height,0,Ge,Je,Qe.data)}else if(L.isDataArrayTexture)oi?(Mi&&i.texStorage3D(35866,fe,ot,Ee.width,Ee.height,Ee.depth),i.texSubImage3D(35866,0,0,0,0,Ee.width,Ee.height,Ee.depth,Ge,Je,Ee.data)):i.texImage3D(35866,0,ot,Ee.width,Ee.height,Ee.depth,0,Ge,Je,Ee.data);else if(L.isData3DTexture)oi?(Mi&&i.texStorage3D(32879,fe,ot,Ee.width,Ee.height,Ee.depth),i.texSubImage3D(32879,0,0,0,0,Ee.width,Ee.height,Ee.depth,Ge,Je,Ee.data)):i.texImage3D(32879,0,ot,Ee.width,Ee.height,Ee.depth,0,Ge,Je,Ee.data);else if(L.isFramebufferTexture){if(Mi)if(oi)i.texStorage2D(3553,fe,ot,Ee.width,Ee.height);else{let Ie=Ee.width,ke=Ee.height;for(let Ye=0;Ye<fe;Ye++)i.texImage2D(3553,Ye,ot,Ie,ke,0,Ge,Je,null),Ie>>=1,ke>>=1}}else if(et.length>0&&qe){oi&&Mi&&i.texStorage2D(3553,fe,ot,et[0].width,et[0].height);for(let Ie=0,ke=et.length;Ie<ke;Ie++)Qe=et[Ie],oi?i.texSubImage2D(3553,Ie,0,0,Ge,Je,Qe):i.texImage2D(3553,Ie,ot,Ge,Je,Qe);L.generateMipmaps=!1}else oi?(Mi&&i.texStorage2D(3553,fe,ot,Ee.width,Ee.height),i.texSubImage2D(3553,0,0,0,Ge,Je,Ee)):i.texImage2D(3553,0,ot,Ge,Je,Ee);b(L,qe)&&M(Ce),Ue.__version=Le.version,L.onUpdate&&L.onUpdate(L)}G.__version=L.version}function se(G,L,he){if(L.image.length!==6)return;let Ce=K(G,L),B=L.source;i.bindTexture(34067,G.__webglTexture,33984+he);let Le=r.get(B);if(B.version!==Le.__version||Ce===!0){i.activeTexture(33984+he),e.pixelStorei(37440,L.flipY),e.pixelStorei(37441,L.premultiplyAlpha),e.pixelStorei(3317,L.unpackAlignment),e.pixelStorei(37443,0);let Ue=L.isCompressedTexture||L.image[0].isCompressedTexture,je=L.image[0]&&L.image[0].isDataTexture,Ee=[];for(let Ie=0;Ie<6;Ie++)!Ue&&!je?Ee[Ie]=x(L.image[Ie],!1,!0,h):Ee[Ie]=je?L.image[Ie].image:L.image[Ie],Ee[Ie]=pe(L,Ee[Ie]);let qe=Ee[0],Ge=w(qe)||o,Je=a.convert(L.format,L.encoding),ot=a.convert(L.type),Qe=S(L.internalFormat,Je,ot,L.encoding),et=o&&L.isVideoTexture!==!0,oi=Le.__version===void 0||Ce===!0,Mi=A(L,qe,Ge);$(34067,L,Ge);let fe;if(Ue){et&&oi&&i.texStorage2D(34067,Mi,Qe,qe.width,qe.height);for(let Ie=0;Ie<6;Ie++){fe=Ee[Ie].mipmaps;for(let ke=0;ke<fe.length;ke++){let Ye=fe[ke];L.format!==Ki?Je!==null?et?i.compressedTexSubImage2D(34069+Ie,ke,0,0,Ye.width,Ye.height,Je,Ye.data):i.compressedTexImage2D(34069+Ie,ke,Qe,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):et?i.texSubImage2D(34069+Ie,ke,0,0,Ye.width,Ye.height,Je,ot,Ye.data):i.texImage2D(34069+Ie,ke,Qe,Ye.width,Ye.height,0,Je,ot,Ye.data)}}}else{fe=L.mipmaps,et&&oi&&(fe.length>0&&Mi++,i.texStorage2D(34067,Mi,Qe,Ee[0].width,Ee[0].height));for(let Ie=0;Ie<6;Ie++)if(je){et?i.texSubImage2D(34069+Ie,0,0,0,Ee[Ie].width,Ee[Ie].height,Je,ot,Ee[Ie].data):i.texImage2D(34069+Ie,0,Qe,Ee[Ie].width,Ee[Ie].height,0,Je,ot,Ee[Ie].data);for(let ke=0;ke<fe.length;ke++){let Ye=fe[ke].image[Ie].image;et?i.texSubImage2D(34069+Ie,ke+1,0,0,Ye.width,Ye.height,Je,ot,Ye.data):i.texImage2D(34069+Ie,ke+1,Qe,Ye.width,Ye.height,0,Je,ot,Ye.data)}}else{et?i.texSubImage2D(34069+Ie,0,0,0,Je,ot,Ee[Ie]):i.texImage2D(34069+Ie,0,Qe,Je,ot,Ee[Ie]);for(let ke=0;ke<fe.length;ke++){let Ye=fe[ke];et?i.texSubImage2D(34069+Ie,ke+1,0,0,Je,ot,Ye.image[Ie]):i.texImage2D(34069+Ie,ke+1,Qe,Je,ot,Ye.image[Ie])}}}b(L,Ge)&&M(34067),Le.__version=B.version,L.onUpdate&&L.onUpdate(L)}G.__version=L.version}function ae(G,L,he,Ce,B){let Le=a.convert(he.format,he.encoding),Ue=a.convert(he.type),je=S(he.internalFormat,Le,Ue,he.encoding);r.get(L).__hasExternalTextures||(B===32879||B===35866?i.texImage3D(B,0,je,L.width,L.height,L.depth,0,Le,Ue,null):i.texImage2D(B,0,je,L.width,L.height,0,Le,Ue,null)),i.bindFramebuffer(36160,G),ye(L)?d.framebufferTexture2DMultisampleEXT(36160,Ce,B,r.get(he).__webglTexture,0,_e(L)):(B===3553||B>=34069&&B<=34074)&&e.framebufferTexture2D(36160,Ce,B,r.get(he).__webglTexture,0),i.bindFramebuffer(36160,null)}function Ae(G,L,he){if(e.bindRenderbuffer(36161,G),L.depthBuffer&&!L.stencilBuffer){let Ce=33189;if(he||ye(L)){let B=L.depthTexture;B&&B.isDepthTexture&&(B.type===bi?Ce=36012:B.type===ko&&(Ce=33190));let Le=_e(L);ye(L)?d.renderbufferStorageMultisampleEXT(36161,Le,Ce,L.width,L.height):e.renderbufferStorageMultisample(36161,Le,Ce,L.width,L.height)}else e.renderbufferStorage(36161,Ce,L.width,L.height);e.framebufferRenderbuffer(36160,36096,36161,G)}else if(L.depthBuffer&&L.stencilBuffer){let Ce=_e(L);he&&ye(L)===!1?e.renderbufferStorageMultisample(36161,Ce,35056,L.width,L.height):ye(L)?d.renderbufferStorageMultisampleEXT(36161,Ce,35056,L.width,L.height):e.renderbufferStorage(36161,34041,L.width,L.height),e.framebufferRenderbuffer(36160,33306,36161,G)}else{let Ce=L.isWebGLMultipleRenderTargets===!0?L.texture:[L.texture];for(let B=0;B<Ce.length;B++){let Le=Ce[B],Ue=a.convert(Le.format,Le.encoding),je=a.convert(Le.type),Ee=S(Le.internalFormat,Ue,je,Le.encoding),qe=_e(L);he&&ye(L)===!1?e.renderbufferStorageMultisample(36161,qe,Ee,L.width,L.height):ye(L)?d.renderbufferStorageMultisampleEXT(36161,qe,Ee,L.width,L.height):e.renderbufferStorage(36161,Ee,L.width,L.height)}}e.bindRenderbuffer(36161,null)}function F(G,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,G),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(L.depthTexture).__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),te(L.depthTexture,0);let he=r.get(L.depthTexture).__webglTexture,Ce=_e(L);if(L.depthTexture.format===Cc)ye(L)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,he,0,Ce):e.framebufferTexture2D(36160,36096,3553,he,0);else if(L.depthTexture.format===Bc)ye(L)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,he,0,Ce):e.framebufferTexture2D(36160,33306,3553,he,0);else throw new Error("Unknown depthTexture format")}function V(G){let L=r.get(G),he=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture&&!L.__autoAllocateDepthBuffer){if(he)throw new Error("target.depthTexture not supported in Cube render targets");F(L.__webglFramebuffer,G)}else if(he){L.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)i.bindFramebuffer(36160,L.__webglFramebuffer[Ce]),L.__webglDepthbuffer[Ce]=e.createRenderbuffer(),Ae(L.__webglDepthbuffer[Ce],G,!1)}else i.bindFramebuffer(36160,L.__webglFramebuffer),L.__webglDepthbuffer=e.createRenderbuffer(),Ae(L.__webglDepthbuffer,G,!1);i.bindFramebuffer(36160,null)}function ie(G,L,he){let Ce=r.get(G);L!==void 0&&ae(Ce.__webglFramebuffer,G,G.texture,36064,3553),he!==void 0&&V(G)}function ue(G){let L=G.texture,he=r.get(G),Ce=r.get(L);G.addEventListener("dispose",D),G.isWebGLMultipleRenderTargets!==!0&&(Ce.__webglTexture===void 0&&(Ce.__webglTexture=e.createTexture()),Ce.__version=L.version,n.memory.textures++);let B=G.isWebGLCubeRenderTarget===!0,Le=G.isWebGLMultipleRenderTargets===!0,Ue=w(G)||o;if(B){he.__webglFramebuffer=[];for(let je=0;je<6;je++)he.__webglFramebuffer[je]=e.createFramebuffer()}else{if(he.__webglFramebuffer=e.createFramebuffer(),Le)if(s.drawBuffers){let je=G.texture;for(let Ee=0,qe=je.length;Ee<qe;Ee++){let Ge=r.get(je[Ee]);Ge.__webglTexture===void 0&&(Ge.__webglTexture=e.createTexture(),n.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&G.samples>0&&ye(G)===!1){let je=Le?L:[L];he.__webglMultisampledFramebuffer=e.createFramebuffer(),he.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,he.__webglMultisampledFramebuffer);for(let Ee=0;Ee<je.length;Ee++){let qe=je[Ee];he.__webglColorRenderbuffer[Ee]=e.createRenderbuffer(),e.bindRenderbuffer(36161,he.__webglColorRenderbuffer[Ee]);let Ge=a.convert(qe.format,qe.encoding),Je=a.convert(qe.type),ot=S(qe.internalFormat,Ge,Je,qe.encoding,G.isXRRenderTarget===!0),Qe=_e(G);e.renderbufferStorageMultisample(36161,Qe,ot,G.width,G.height),e.framebufferRenderbuffer(36160,36064+Ee,36161,he.__webglColorRenderbuffer[Ee])}e.bindRenderbuffer(36161,null),G.depthBuffer&&(he.__webglDepthRenderbuffer=e.createRenderbuffer(),Ae(he.__webglDepthRenderbuffer,G,!0)),i.bindFramebuffer(36160,null)}}if(B){i.bindTexture(34067,Ce.__webglTexture),$(34067,L,Ue);for(let je=0;je<6;je++)ae(he.__webglFramebuffer[je],G,L,36064,34069+je);b(L,Ue)&&M(34067),i.unbindTexture()}else if(Le){let je=G.texture;for(let Ee=0,qe=je.length;Ee<qe;Ee++){let Ge=je[Ee],Je=r.get(Ge);i.bindTexture(3553,Je.__webglTexture),$(3553,Ge,Ue),ae(he.__webglFramebuffer,G,Ge,36064+Ee,3553),b(Ge,Ue)&&M(3553)}i.unbindTexture()}else{let je=3553;(G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(o?je=G.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(je,Ce.__webglTexture),$(je,L,Ue),ae(he.__webglFramebuffer,G,L,36064,je),b(L,Ue)&&M(je),i.unbindTexture()}G.depthBuffer&&V(G)}function ve(G){let L=w(G)||o,he=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let Ce=0,B=he.length;Ce<B;Ce++){let Le=he[Ce];if(b(Le,L)){let Ue=G.isWebGLCubeRenderTarget?34067:3553,je=r.get(Le).__webglTexture;i.bindTexture(Ue,je),M(Ue),i.unbindTexture()}}}function ge(G){if(o&&G.samples>0&&ye(G)===!1){let L=G.isWebGLMultipleRenderTargets?G.texture:[G.texture],he=G.width,Ce=G.height,B=16384,Le=[],Ue=G.stencilBuffer?33306:36096,je=r.get(G),Ee=G.isWebGLMultipleRenderTargets===!0;if(Ee)for(let qe=0;qe<L.length;qe++)i.bindFramebuffer(36160,je.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+qe,36161,null),i.bindFramebuffer(36160,je.__webglFramebuffer),e.framebufferTexture2D(36009,36064+qe,3553,null,0);i.bindFramebuffer(36008,je.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,je.__webglFramebuffer);for(let qe=0;qe<L.length;qe++){Le.push(36064+qe),G.depthBuffer&&Le.push(Ue);let Ge=je.__ignoreDepthValues!==void 0?je.__ignoreDepthValues:!1;if(Ge===!1&&(G.depthBuffer&&(B|=256),G.stencilBuffer&&(B|=1024)),Ee&&e.framebufferRenderbuffer(36008,36064,36161,je.__webglColorRenderbuffer[qe]),Ge===!0&&(e.invalidateFramebuffer(36008,[Ue]),e.invalidateFramebuffer(36009,[Ue])),Ee){let Je=r.get(L[qe]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,Je,0)}e.blitFramebuffer(0,0,he,Ce,0,0,he,Ce,B,9728),f&&e.invalidateFramebuffer(36008,Le)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),Ee)for(let qe=0;qe<L.length;qe++){i.bindFramebuffer(36160,je.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+qe,36161,je.__webglColorRenderbuffer[qe]);let Ge=r.get(L[qe]).__webglTexture;i.bindFramebuffer(36160,je.__webglFramebuffer),e.framebufferTexture2D(36009,36064+qe,3553,Ge,0)}i.bindFramebuffer(36009,je.__webglMultisampledFramebuffer)}}function _e(G){return Math.min(u,G.samples)}function ye(G){let L=r.get(G);return o&&G.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function Se(G){let L=n.render.frame;p.get(G)!==L&&(p.set(G,L),G.update())}function pe(G,L){let he=G.encoding,Ce=G.format,B=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||G.format===d6||he!==rn&&(he===Rt?o===!1?t.has("EXT_sRGB")===!0&&Ce===Ki?(G.format=d6,G.minFilter=Bt,G.generateMipmaps=!1):L=Nz.sRGBToLinear(L):(Ce!==Ki||B!==j1)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",he)),L}this.allocateTextureUnit=k,this.resetTextureUnits=N,this.setTexture2D=te,this.setTexture2DArray=Q,this.setTexture3D=Z,this.setTextureCube=de,this.rebindTextures=ie,this.setupRenderTarget=ue,this.updateRenderTargetMipmap=ve,this.updateMultisampleRenderTarget=ge,this.setupDepthRenderbuffer=V,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=ye}function Dse(e,t,i){let r=i.isWebGL2;function s(a,n=null){let o;if(a===j1)return 5121;if(a===fee)return 32819;if(a===pee)return 32820;if(a===cee)return 5120;if(a===uee)return 5122;if(a===Iz)return 5123;if(a===dee)return 5124;if(a===ko)return 5125;if(a===bi)return 5126;if(a===Jo)return r?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===mee)return 6406;if(a===Ki)return 6408;if(a===gee)return 6409;if(a===vee)return 6410;if(a===Cc)return 6402;if(a===Bc)return 34041;if(a===d6)return o=t.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(a===Mm)return 6403;if(a===yee)return 36244;if(a===pg)return 33319;if(a===xee)return 33320;if(a===Oz)return 36249;if(a===ry||a===sy||a===ay||a===ny)if(n===Rt)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(a===ry)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===sy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===ay)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===ny)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===ry)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===sy)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===ay)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===ny)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===LM||a===zM||a===BM||a===kM)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===LM)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===zM)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===BM)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===kM)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===bee)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===FM||a===NM)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(a===FM)return n===Rt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(a===NM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===UM||a===VM||a===jM||a===GM||a===HM||a===WM||a===qM||a===XM||a===YM||a===KM||a===QM||a===ZM||a===JM||a===$M)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(a===UM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===VM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===jM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===GM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===HM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===WM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===qM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===XM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===YM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===KM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===QM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===ZM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===JM)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===$M)return n===Rt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===oy)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(a===oy)return n===Rt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===wee||a===eC||a===tC||a===iC)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(a===oy)return o.COMPRESSED_RED_RGTC1_EXT;if(a===eC)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===tC)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===iC)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===Mc?r?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):e[a]!==void 0?e[a]:null}return{convert:s}}var Ise=class extends z1{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},No=class extends yi{constructor(){super(),this.isGroup=!0,this.type="Group"}},Ose={type:"move"},Ry=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new No,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new No,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new E,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new E),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new No,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new E,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new E),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null,n=this._targetRay,o=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){a=!0;for(let p of e.hand.values()){let m=t.getJointPose(p,i),g=this._getHandJoint(l,p);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}let h=l.joints["index-finger-tip"],c=l.joints["thumb-tip"],u=h.position.distanceTo(c.position),d=.02,f=.005;l.inputState.pinching&&u>d+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&u<=d-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1));n!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(n.matrix.fromArray(r.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),r.linearVelocity?(n.hasLinearVelocity=!0,n.linearVelocity.copy(r.linearVelocity)):n.hasLinearVelocity=!1,r.angularVelocity?(n.hasAngularVelocity=!0,n.angularVelocity.copy(r.angularVelocity)):n.hasAngularVelocity=!1,this.dispatchEvent(Ose)))}return n!==null&&(n.visible=r!==null),o!==null&&(o.visible=s!==null),l!==null&&(l.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new No;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}},Nu=class extends $i{constructor(e,t,i,r,s,a,n,o,l,h){if(h=h!==void 0?h:Cc,h!==Cc&&h!==Bc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Cc&&(i=ko),i===void 0&&h===Bc&&(i=Mc),super(null,r,s,a,n,o,h,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=n!==void 0?n:jt,this.minFilter=o!==void 0?o:jt,this.flipY=!1,this.generateMipmaps=!1}},Rse=class extends C1{constructor(e,t){super();let i=this,r=null,s=1,a=null,n="local-floor",o=1,l=null,h=null,c=null,u=null,d=null,f=null,p=t.getContextAttributes(),m=null,g=null,v=[],y=[],x=new Set,w=new Map,_=new z1;_.layers.enable(1),_.viewport=new Mt;let b=new z1;b.layers.enable(2),b.viewport=new Mt;let M=[_,b],S=new Ise;S.layers.enable(1),S.layers.enable(2);let A=null,C=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let Z=v[Q];return Z===void 0&&(Z=new Ry,v[Q]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(Q){let Z=v[Q];return Z===void 0&&(Z=new Ry,v[Q]=Z),Z.getGripSpace()},this.getHand=function(Q){let Z=v[Q];return Z===void 0&&(Z=new Ry,v[Q]=Z),Z.getHandSpace()};function T(Q){let Z=y.indexOf(Q.inputSource);if(Z===-1)return;let de=v[Z];de!==void 0&&de.dispatchEvent({type:Q.type,data:Q.inputSource})}function D(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",D),r.removeEventListener("inputsourceschange",R);for(let Q=0;Q<v.length;Q++){let Z=y[Q];Z!==null&&(y[Q]=null,v[Q].disconnect(Z))}A=null,C=null,e.setRenderTarget(m),d=null,u=null,c=null,r=null,g=null,te.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){s=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){n=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(Q){l=Q},this.getBaseLayer=function(){return u!==null?u:d},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(Q){if(r=Q,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",D),r.addEventListener("inputsourceschange",R),p.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let Z={antialias:r.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,Z),r.updateRenderState({baseLayer:d}),g=new ei(d.framebufferWidth,d.framebufferHeight,{format:Ki,type:j1,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let Z=null,de=null,ee=null;p.depth&&(ee=p.stencil?35056:33190,Z=p.stencil?Bc:Cc,de=p.stencil?Mc:ko);let le={colorFormat:32856,depthFormat:ee,scaleFactor:s};c=new XRWebGLBinding(r,t),u=c.createProjectionLayer(le),r.updateRenderState({layers:[u]}),g=new ei(u.textureWidth,u.textureHeight,{format:Ki,type:j1,depthTexture:new Nu(u.textureWidth,u.textureHeight,de,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});let $=e.properties.get(g);$.__ignoreDepthValues=u.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await r.requestReferenceSpace(n),te.setContext(r),te.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function R(Q){for(let Z=0;Z<Q.removed.length;Z++){let de=Q.removed[Z],ee=y.indexOf(de);ee>=0&&(y[ee]=null,v[ee].disconnect(de))}for(let Z=0;Z<Q.added.length;Z++){let de=Q.added[Z],ee=y.indexOf(de);if(ee===-1){for(let $=0;$<v.length;$++)if($>=y.length){y.push(de),ee=$;break}else if(y[$]===null){y[$]=de,ee=$;break}if(ee===-1)break}let le=v[ee];le&&le.connect(de)}}let O=new E,j=new E;function X(Q,Z,de){O.setFromMatrixPosition(Z.matrixWorld),j.setFromMatrixPosition(de.matrixWorld);let ee=O.distanceTo(j),le=Z.projectionMatrix.elements,$=de.projectionMatrix.elements,K=le[14]/(le[10]-1),J=le[14]/(le[10]+1),se=(le[9]+1)/le[5],ae=(le[9]-1)/le[5],Ae=(le[8]-1)/le[0],F=($[8]+1)/$[0],V=K*Ae,ie=K*F,ue=ee/(-Ae+F),ve=ue*-Ae;Z.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(ve),Q.translateZ(ue),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();let ge=K+ue,_e=J+ue,ye=V-ve,Se=ie+(ee-ve),pe=se*J/_e*ge,G=ae*J/_e*ge;Q.projectionMatrix.makePerspective(ye,Se,pe,G,ge,_e)}function N(Q,Z){Z===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(Z.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(r===null)return;S.near=b.near=_.near=Q.near,S.far=b.far=_.far=Q.far,(A!==S.near||C!==S.far)&&(r.updateRenderState({depthNear:S.near,depthFar:S.far}),A=S.near,C=S.far);let Z=Q.parent,de=S.cameras;N(S,Z);for(let le=0;le<de.length;le++)N(de[le],Z);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),Q.matrix.copy(S.matrix),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale);let ee=Q.children;for(let le=0,$=ee.length;le<$;le++)ee[le].updateMatrixWorld(!0);de.length===2?X(S,_,b):S.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){if(!(u===null&&d===null))return o},this.setFoveation=function(Q){o=Q,u!==null&&(u.fixedFoveation=Q),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=Q)},this.getPlanes=function(){return x};let k=null;function ne(Q,Z){if(h=Z.getViewerPose(l||a),f=Z,h!==null){let de=h.views;d!==null&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let ee=!1;de.length!==S.cameras.length&&(S.cameras.length=0,ee=!0);for(let le=0;le<de.length;le++){let $=de[le],K=null;if(d!==null)K=d.getViewport($);else{let se=c.getViewSubImage(u,$);K=se.viewport,le===0&&(e.setRenderTargetTextures(g,se.colorTexture,u.ignoreDepthValues?void 0:se.depthStencilTexture),e.setRenderTarget(g))}let J=M[le];J===void 0&&(J=new z1,J.layers.enable(le),J.viewport=new Mt,M[le]=J),J.matrix.fromArray($.transform.matrix),J.projectionMatrix.fromArray($.projectionMatrix),J.viewport.set(K.x,K.y,K.width,K.height),le===0&&S.matrix.copy(J.matrix),ee===!0&&S.cameras.push(J)}}for(let de=0;de<v.length;de++){let ee=y[de],le=v[de];ee!==null&&le!==void 0&&le.update(ee,Z,l||a)}if(k&&k(Q,Z),Z.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:Z.detectedPlanes});let de=null;for(let ee of x)Z.detectedPlanes.has(ee)||(de===null&&(de=[]),de.push(ee));if(de!==null)for(let ee of de)x.delete(ee),w.delete(ee),i.dispatchEvent({type:"planeremoved",data:ee});for(let ee of Z.detectedPlanes)if(!x.has(ee))x.add(ee),w.set(ee,Z.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ee});else{let le=w.get(ee);ee.lastChangedTime>le&&(w.set(ee,ee.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ee}))}}f=null}let te=new Wz;te.setAnimationLoop(ne),this.setAnimationLoop=function(Q){k=Q},this.dispose=function(){}}};function Lse(e,t){function i(m,g){g.color.getRGB(m.fogColor.value,Hz(e)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function r(m,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(m,g):g.isMeshToonMaterial?(s(m,g),c(m,g)):g.isMeshPhongMaterial?(s(m,g),h(m,g)):g.isMeshStandardMaterial?(s(m,g),u(m,g),g.isMeshPhysicalMaterial&&d(m,g,x)):g.isMeshMatcapMaterial?(s(m,g),f(m,g)):g.isMeshDepthMaterial?s(m,g):g.isMeshDistanceMaterial?(s(m,g),p(m,g)):g.isMeshNormalMaterial?s(m,g):g.isLineBasicMaterial?(a(m,g),g.isLineDashedMaterial&&n(m,g)):g.isPointsMaterial?o(m,g,v,y):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===r1&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===r1&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v=t.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;let w=e.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*w}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let x;g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uv2Transform.value.copy(x.matrix))}function a(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function n(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function o(m,g,v,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=y*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function h(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function c(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function u(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function d(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===r1&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function f(m,g){g.matcap&&(m.matcap.value=g.matcap)}function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function zse(e,t,i,r){let s={},a={},n=[],o=i.isWebGL2?e.getParameter(35375):0;function l(y,x){let w=x.program;r.uniformBlockBinding(y,w)}function h(y,x){let w=s[y.id];w===void 0&&(p(y),w=c(y),s[y.id]=w,y.addEventListener("dispose",g));let _=x.program;r.updateUBOMapping(y,_);let b=t.render.frame;a[y.id]!==b&&(d(y),a[y.id]=b)}function c(y){let x=u();y.__bindingPointIndex=x;let w=e.createBuffer(),_=y.__size,b=y.usage;return e.bindBuffer(35345,w),e.bufferData(35345,_,b),e.bindBuffer(35345,null),e.bindBufferBase(35345,x,w),w}function u(){for(let y=0;y<o;y++)if(n.indexOf(y)===-1)return n.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){let x=s[y.id],w=y.uniforms,_=y.__cache;e.bindBuffer(35345,x);for(let b=0,M=w.length;b<M;b++){let S=w[b];if(f(S,b,_)===!0){let A=S.__offset,C=Array.isArray(S.value)?S.value:[S.value],T=0;for(let D=0;D<C.length;D++){let R=C[D],O=m(R);typeof R=="number"?(S.__data[0]=R,e.bufferSubData(35345,A+T,S.__data)):R.isMatrix3?(S.__data[0]=R.elements[0],S.__data[1]=R.elements[1],S.__data[2]=R.elements[2],S.__data[3]=R.elements[0],S.__data[4]=R.elements[3],S.__data[5]=R.elements[4],S.__data[6]=R.elements[5],S.__data[7]=R.elements[0],S.__data[8]=R.elements[6],S.__data[9]=R.elements[7],S.__data[10]=R.elements[8],S.__data[11]=R.elements[0]):(R.toArray(S.__data,T),T+=O.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,A,S.__data)}}e.bindBuffer(35345,null)}function f(y,x,w){let _=y.value;if(w[x]===void 0){if(typeof _=="number")w[x]=_;else{let b=Array.isArray(_)?_:[_],M=[];for(let S=0;S<b.length;S++)M.push(b[S].clone());w[x]=M}return!0}else if(typeof _=="number"){if(w[x]!==_)return w[x]=_,!0}else{let b=Array.isArray(w[x])?w[x]:[w[x]],M=Array.isArray(_)?_:[_];for(let S=0;S<b.length;S++){let A=b[S];if(A.equals(M[S])===!1)return A.copy(M[S]),!0}}return!1}function p(y){let x=y.uniforms,w=0,_=16,b=0;for(let M=0,S=x.length;M<S;M++){let A=x[M],C={boundary:0,storage:0},T=Array.isArray(A.value)?A.value:[A.value];for(let D=0,R=T.length;D<R;D++){let O=T[D],j=m(O);C.boundary+=j.boundary,C.storage+=j.storage}if(A.__data=new Float32Array(C.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=w,M>0){b=w%_;let D=_-b;b!==0&&D-C.boundary<0&&(w+=_-b,A.__offset=w)}w+=C.storage}return b=w%_,b>0&&(w+=_-b),y.__size=w,y.__cache={},this}function m(y){let x={boundary:0,storage:0};return typeof y=="number"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function g(y){let x=y.target;x.removeEventListener("dispose",g);let w=n.indexOf(x.__bindingPointIndex);n.splice(w,1),e.deleteBuffer(s[x.id]),delete s[x.id],delete a[x.id]}function v(){for(let y in s)e.deleteBuffer(s[y]);n=[],s={},a={}}return{bind:l,update:h,dispose:v}}function Bse(){let e=Id("canvas");return e.style.display="block",e}function Zz(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:Bse(),i=e.context!==void 0?e.context:null,r=e.depth!==void 0?e.depth:!0,s=e.stencil!==void 0?e.stencil:!0,a=e.antialias!==void 0?e.antialias:!1,n=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,o=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",h=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,c;i!==null?c=i.getContextAttributes().alpha:c=e.alpha!==void 0?e.alpha:!1;let u=null,d=null,f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=rn,this.physicallyCorrectLights=!1,this.toneMapping=Hn,this.toneMappingExposure=1;let m=this,g=!1,v=0,y=0,x=null,w=-1,_=null,b=new Mt,M=new Mt,S=null,A=t.width,C=t.height,T=1,D=null,R=null,O=new Mt(0,0,A,C),j=new Mt(0,0,A,C),X=!1,N=new Lw,k=!1,ne=!1,te=null,Q=new Fe,Z=new re,de=new E,ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function le(){return x===null?T:1}let $=i;function K(Y,Me){for(let Pe=0;Pe<Y.length;Pe++){let xe=Y[Pe],Oe=t.getContext(xe,Me);if(Oe!==null)return Oe}return null}try{let Y={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:n,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${a0}`),t.addEventListener("webglcontextlost",ot,!1),t.addEventListener("webglcontextrestored",Qe,!1),t.addEventListener("webglcontextcreationerror",et,!1),$===null){let Me=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&Me.shift(),$=K(Me,Y),$===null)throw K(Me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}$.getShaderPrecisionFormat===void 0&&($.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Y){throw console.error("THREE.WebGLRenderer: "+Y.message),Y}let J,se,ae,Ae,F,V,ie,ue,ve,ge,_e,ye,Se,pe,G,L,he,Ce,B,Le,Ue,je,Ee,qe;function Ge(){J=new Kre($),se=new Gre($,J,e),J.init(se),je=new Dse($,J,se),ae=new Tse($,J,se),Ae=new Jre,F=new mse,V=new Pse($,J,ae,F,se,je,Ae),ie=new Wre(m),ue=new Yre(m),ve=new ote($,se),Ee=new Vre($,J,ve,se),ge=new Qre($,ve,Ae,Ee),_e=new i1e($,ge,ve,Ae),B=new t1e($,se,V),L=new Hre(F),ye=new pse(m,ie,ue,J,se,Ee,L),Se=new Lse(m,F),pe=new vse,G=new Sse(J,se),Ce=new Ure(m,ie,ue,ae,_e,c,n),he=new Ese(m,_e,se),qe=new zse($,Ae,se,ae),Le=new jre($,J,Ae,se),Ue=new Zre($,J,Ae,se),Ae.programs=ye.programs,m.capabilities=se,m.extensions=J,m.properties=F,m.renderLists=pe,m.shadowMap=he,m.state=ae,m.info=Ae}Ge();let Je=new Rse(m,$);this.xr=Je,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){let Y=J.get("WEBGL_lose_context");Y&&Y.loseContext()},this.forceContextRestore=function(){let Y=J.get("WEBGL_lose_context");Y&&Y.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(Y){Y!==void 0&&(T=Y,this.setSize(A,C,!1))},this.getSize=function(Y){return Y.set(A,C)},this.setSize=function(Y,Me,Pe){if(Je.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}A=Y,C=Me,t.width=Math.floor(Y*T),t.height=Math.floor(Me*T),Pe!==!1&&(t.style.width=Y+"px",t.style.height=Me+"px"),this.setViewport(0,0,Y,Me)},this.getDrawingBufferSize=function(Y){return Y.set(A*T,C*T).floor()},this.setDrawingBufferSize=function(Y,Me,Pe){A=Y,C=Me,T=Pe,t.width=Math.floor(Y*Pe),t.height=Math.floor(Me*Pe),this.setViewport(0,0,Y,Me)},this.getCurrentViewport=function(Y){return Y.copy(b)},this.getViewport=function(Y){return Y.copy(O)},this.setViewport=function(Y,Me,Pe,xe){Y.isVector4?O.set(Y.x,Y.y,Y.z,Y.w):O.set(Y,Me,Pe,xe),ae.viewport(b.copy(O).multiplyScalar(T).floor())},this.getScissor=function(Y){return Y.copy(j)},this.setScissor=function(Y,Me,Pe,xe){Y.isVector4?j.set(Y.x,Y.y,Y.z,Y.w):j.set(Y,Me,Pe,xe),ae.scissor(M.copy(j).multiplyScalar(T).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(Y){ae.setScissorTest(X=Y)},this.setOpaqueSort=function(Y){D=Y},this.setTransparentSort=function(Y){R=Y},this.getClearColor=function(Y){return Y.copy(Ce.getClearColor())},this.setClearColor=function(){Ce.setClearColor.apply(Ce,arguments)},this.getClearAlpha=function(){return Ce.getClearAlpha()},this.setClearAlpha=function(){Ce.setClearAlpha.apply(Ce,arguments)},this.clear=function(Y=!0,Me=!0,Pe=!0){let xe=0;Y&&(xe|=16384),Me&&(xe|=256),Pe&&(xe|=1024),$.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ot,!1),t.removeEventListener("webglcontextrestored",Qe,!1),t.removeEventListener("webglcontextcreationerror",et,!1),pe.dispose(),G.dispose(),F.dispose(),ie.dispose(),ue.dispose(),_e.dispose(),Ee.dispose(),qe.dispose(),ye.dispose(),Je.dispose(),Je.removeEventListener("sessionstart",Ye),Je.removeEventListener("sessionend",ct),te&&(te.dispose(),te=null),Gt.stop()};function ot(Y){Y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Qe(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let Y=Ae.autoReset,Me=he.enabled,Pe=he.autoUpdate,xe=he.needsUpdate,Oe=he.type;Ge(),Ae.autoReset=Y,he.enabled=Me,he.autoUpdate=Pe,he.needsUpdate=xe,he.type=Oe}function et(Y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Y.statusMessage)}function oi(Y){let Me=Y.target;Me.removeEventListener("dispose",oi),Mi(Me)}function Mi(Y){fe(Y),F.remove(Y)}function fe(Y){let Me=F.get(Y).programs;Me!==void 0&&(Me.forEach(function(Pe){ye.releaseProgram(Pe)}),Y.isShaderMaterial&&ye.releaseShaderCache(Y))}this.renderBufferDirect=function(Y,Me,Pe,xe,Oe,tt){Me===null&&(Me=ee);let St=Oe.isMesh&&Oe.matrixWorld.determinant()<0,Ct=Ph(Y,Me,Pe,xe,Oe);ae.setMaterial(xe,St);let ht=Pe.index,Jt=1;xe.wireframe===!0&&(ht=ge.getWireframeAttribute(Pe),Jt=2);let kt=Pe.drawRange,Ft=Pe.attributes.position,Pt=kt.start*Jt,er=(kt.start+kt.count)*Jt;tt!==null&&(Pt=Math.max(Pt,tt.start*Jt),er=Math.min(er,(tt.start+tt.count)*Jt)),ht!==null?(Pt=Math.max(Pt,0),er=Math.min(er,ht.count)):Ft!=null&&(Pt=Math.max(Pt,0),er=Math.min(er,Ft.count));let hs=er-Pt;if(hs<0||hs===1/0)return;Ee.setup(Oe,xe,Ct,Pe,ht);let Pa,Gi=Le;if(ht!==null&&(Pa=ve.get(ht),Gi=Ue,Gi.setIndex(Pa)),Oe.isMesh)xe.wireframe===!0?(ae.setLineWidth(xe.wireframeLinewidth*le()),Gi.setMode(1)):Gi.setMode(4);else if(Oe.isLine){let Ht=xe.linewidth;Ht===void 0&&(Ht=1),ae.setLineWidth(Ht*le()),Oe.isLineSegments?Gi.setMode(1):Oe.isLineLoop?Gi.setMode(2):Gi.setMode(3)}else Oe.isPoints?Gi.setMode(0):Oe.isSprite&&Gi.setMode(4);if(Oe.isInstancedMesh)Gi.renderInstances(Pt,hs,Oe.count);else if(Pe.isInstancedBufferGeometry){let Ht=Pe._maxInstanceCount!==void 0?Pe._maxInstanceCount:1/0,Ts=Math.min(Pe.instanceCount,Ht);Gi.renderInstances(Pt,hs,Ts)}else Gi.render(Pt,hs)},this.compile=function(Y,Me){function Pe(xe,Oe,tt){xe.transparent===!0&&xe.side===N1&&xe.forceSinglePass===!1?(xe.side=r1,xe.needsUpdate=!0,h1(xe,Oe,tt),xe.side=tn,xe.needsUpdate=!0,h1(xe,Oe,tt),xe.side=N1):h1(xe,Oe,tt)}d=G.get(Y),d.init(),p.push(d),Y.traverseVisible(function(xe){xe.isLight&&xe.layers.test(Me.layers)&&(d.pushLight(xe),xe.castShadow&&d.pushShadow(xe))}),d.setupLights(m.physicallyCorrectLights),Y.traverse(function(xe){let Oe=xe.material;if(Oe)if(Array.isArray(Oe))for(let tt=0;tt<Oe.length;tt++){let St=Oe[tt];Pe(St,Y,xe)}else Pe(Oe,Y,xe)}),p.pop(),d=null};let Ie=null;function ke(Y){Ie&&Ie(Y)}function Ye(){Gt.stop()}function ct(){Gt.start()}let Gt=new Wz;Gt.setAnimationLoop(ke),typeof self<"u"&&Gt.setContext(self),this.setAnimationLoop=function(Y){Ie=Y,Je.setAnimationLoop(Y),Y===null?Gt.stop():Gt.start()},Je.addEventListener("sessionstart",Ye),Je.addEventListener("sessionend",ct),this.render=function(Y,Me){if(Me!==void 0&&Me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),Me.parent===null&&Me.matrixWorldAutoUpdate===!0&&Me.updateMatrixWorld(),Je.enabled===!0&&Je.isPresenting===!0&&(Je.cameraAutoUpdate===!0&&Je.updateCamera(Me),Me=Je.getCamera()),Y.isScene===!0&&Y.onBeforeRender(m,Y,Me,x),d=G.get(Y,p.length),d.init(),p.push(d),Q.multiplyMatrices(Me.projectionMatrix,Me.matrixWorldInverse),N.setFromProjectionMatrix(Q),ne=this.localClippingEnabled,k=L.init(this.clippingPlanes,ne),u=pe.get(Y,f.length),u.init(),f.push(u),qt(Y,Me,0,m.sortObjects),u.finish(),m.sortObjects===!0&&u.sort(D,R),k===!0&&L.beginShadows();let Pe=d.state.shadowsArray;if(he.render(Pe,Y,Me),k===!0&&L.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ce.render(u,Y),d.setupLights(m.physicallyCorrectLights),Me.isArrayCamera){let xe=Me.cameras;for(let Oe=0,tt=xe.length;Oe<tt;Oe++){let St=xe[Oe];br(u,Y,St,St.viewport)}}else br(u,Y,Me);x!==null&&(V.updateMultisampleRenderTarget(x),V.updateRenderTargetMipmap(x)),Y.isScene===!0&&Y.onAfterRender(m,Y,Me),Ee.resetDefaultState(),w=-1,_=null,p.pop(),p.length>0?d=p[p.length-1]:d=null,f.pop(),f.length>0?u=f[f.length-1]:u=null};function qt(Y,Me,Pe,xe){if(Y.visible===!1)return;if(Y.layers.test(Me.layers)){if(Y.isGroup)Pe=Y.renderOrder;else if(Y.isLOD)Y.autoUpdate===!0&&Y.update(Me);else if(Y.isLight)d.pushLight(Y),Y.castShadow&&d.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||N.intersectsSprite(Y)){xe&&de.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(Q);let tt=_e.update(Y),St=Y.material;St.visible&&u.push(Y,tt,St,Pe,de.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&&(Y.isSkinnedMesh&&Y.skeleton.frame!==Ae.render.frame&&(Y.skeleton.update(),Y.skeleton.frame=Ae.render.frame),!Y.frustumCulled||N.intersectsObject(Y))){xe&&de.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(Q);let tt=_e.update(Y),St=Y.material;if(Array.isArray(St)){let Ct=tt.groups;for(let ht=0,Jt=Ct.length;ht<Jt;ht++){let kt=Ct[ht],Ft=St[kt.materialIndex];Ft&&Ft.visible&&u.push(Y,tt,Ft,Pe,de.z,kt)}}else St.visible&&u.push(Y,tt,St,Pe,de.z,null)}}let Oe=Y.children;for(let tt=0,St=Oe.length;tt<St;tt++)qt(Oe[tt],Me,Pe,xe)}function br(Y,Me,Pe,xe){let Oe=Y.opaque,tt=Y.transmissive,St=Y.transparent;d.setupLightsView(Pe),k===!0&&L.setGlobalState(m.clippingPlanes,Pe),tt.length>0&&Ys(Oe,Me,Pe),xe&&ae.viewport(b.copy(xe)),Oe.length>0&&Nt(Oe,Me,Pe),tt.length>0&&Nt(tt,Me,Pe),St.length>0&&Nt(St,Me,Pe),ae.buffers.depth.setTest(!0),ae.buffers.depth.setMask(!0),ae.buffers.color.setMask(!0),ae.setPolygonOffset(!1)}function Ys(Y,Me,Pe){let xe=se.isWebGL2;te===null&&(te=new ei(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?Jo:j1,minFilter:ku,samples:xe&&a===!0?4:0})),m.getDrawingBufferSize(Z),xe?te.setSize(Z.x,Z.y):te.setSize(xg(Z.x),xg(Z.y));let Oe=m.getRenderTarget();m.setRenderTarget(te),m.clear();let tt=m.toneMapping;m.toneMapping=Hn,Nt(Y,Me,Pe),m.toneMapping=tt,V.updateMultisampleRenderTarget(te),V.updateRenderTargetMipmap(te),m.setRenderTarget(Oe)}function Nt(Y,Me,Pe){let xe=Me.isScene===!0?Me.overrideMaterial:null;for(let Oe=0,tt=Y.length;Oe<tt;Oe++){let St=Y[Oe],Ct=St.object,ht=St.geometry,Jt=xe===null?St.material:xe,kt=St.group;Ct.layers.test(Pe.layers)&&ls(Ct,Me,Pe,ht,Jt,kt)}}function ls(Y,Me,Pe,xe,Oe,tt){Y.onBeforeRender(m,Me,Pe,xe,Oe,tt),Y.modelViewMatrix.multiplyMatrices(Pe.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),Oe.onBeforeRender(m,Me,Pe,xe,Y,tt),Oe.transparent===!0&&Oe.side===N1&&Oe.forceSinglePass===!1?(Oe.side=r1,Oe.needsUpdate=!0,m.renderBufferDirect(Pe,Me,xe,Oe,Y,tt),Oe.side=tn,Oe.needsUpdate=!0,m.renderBufferDirect(Pe,Me,xe,Oe,Y,tt),Oe.side=N1):m.renderBufferDirect(Pe,Me,xe,Oe,Y,tt),Y.onAfterRender(m,Me,Pe,xe,Oe,tt)}function h1(Y,Me,Pe){Me.isScene!==!0&&(Me=ee);let xe=F.get(Y),Oe=d.state.lights,tt=d.state.shadowsArray,St=Oe.state.version,Ct=ye.getParameters(Y,Oe.state,tt,Me,Pe),ht=ye.getProgramCacheKey(Ct),Jt=xe.programs;xe.environment=Y.isMeshStandardMaterial?Me.environment:null,xe.fog=Me.fog,xe.envMap=(Y.isMeshStandardMaterial?ue:ie).get(Y.envMap||xe.environment),Jt===void 0&&(Y.addEventListener("dispose",oi),Jt=new Map,xe.programs=Jt);let kt=Jt.get(ht);if(kt!==void 0){if(xe.currentProgram===kt&&xe.lightsStateVersion===St)return Ta(Y,Ct),kt}else Ct.uniforms=ye.getUniforms(Y),Y.onBuild(Pe,Ct,m),Y.onBeforeCompile(Ct,m),kt=ye.acquireProgram(Ct,ht),Jt.set(ht,kt),xe.uniforms=Ct.uniforms;let Ft=xe.uniforms;(!Y.isShaderMaterial&&!Y.isRawShaderMaterial||Y.clipping===!0)&&(Ft.clippingPlanes=L.uniform),Ta(Y,Ct),xe.needsLights=io(Y),xe.lightsStateVersion=St,xe.needsLights&&(Ft.ambientLightColor.value=Oe.state.ambient,Ft.lightProbe.value=Oe.state.probe,Ft.directionalLights.value=Oe.state.directional,Ft.directionalLightShadows.value=Oe.state.directionalShadow,Ft.spotLights.value=Oe.state.spot,Ft.spotLightShadows.value=Oe.state.spotShadow,Ft.rectAreaLights.value=Oe.state.rectArea,Ft.ltc_1.value=Oe.state.rectAreaLTC1,Ft.ltc_2.value=Oe.state.rectAreaLTC2,Ft.pointLights.value=Oe.state.point,Ft.pointLightShadows.value=Oe.state.pointShadow,Ft.hemisphereLights.value=Oe.state.hemi,Ft.directionalShadowMap.value=Oe.state.directionalShadowMap,Ft.directionalShadowMatrix.value=Oe.state.directionalShadowMatrix,Ft.spotShadowMap.value=Oe.state.spotShadowMap,Ft.spotLightMatrix.value=Oe.state.spotLightMatrix,Ft.spotLightMap.value=Oe.state.spotLightMap,Ft.pointShadowMap.value=Oe.state.pointShadowMap,Ft.pointShadowMatrix.value=Oe.state.pointShadowMatrix);let Pt=kt.getUniforms(),er=Em.seqWithValue(Pt.seq,Ft);return xe.currentProgram=kt,xe.uniformsList=er,kt}function Ta(Y,Me){let Pe=F.get(Y);Pe.outputEncoding=Me.outputEncoding,Pe.instancing=Me.instancing,Pe.skinning=Me.skinning,Pe.morphTargets=Me.morphTargets,Pe.morphNormals=Me.morphNormals,Pe.morphColors=Me.morphColors,Pe.morphTargetsCount=Me.morphTargetsCount,Pe.numClippingPlanes=Me.numClippingPlanes,Pe.numIntersection=Me.numClipIntersection,Pe.vertexAlphas=Me.vertexAlphas,Pe.vertexTangents=Me.vertexTangents,Pe.toneMapping=Me.toneMapping}function Ph(Y,Me,Pe,xe,Oe){Me.isScene!==!0&&(Me=ee),V.resetTextureUnits();let tt=Me.fog,St=xe.isMeshStandardMaterial?Me.environment:null,Ct=x===null?m.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:rn,ht=(xe.isMeshStandardMaterial?ue:ie).get(xe.envMap||St),Jt=xe.vertexColors===!0&&!!Pe.attributes.color&&Pe.attributes.color.itemSize===4,kt=!!xe.normalMap&&!!Pe.attributes.tangent,Ft=!!Pe.morphAttributes.position,Pt=!!Pe.morphAttributes.normal,er=!!Pe.morphAttributes.color,hs=xe.toneMapped?m.toneMapping:Hn,Pa=Pe.morphAttributes.position||Pe.morphAttributes.normal||Pe.morphAttributes.color,Gi=Pa!==void 0?Pa.length:0,Ht=F.get(xe),Ts=d.state.lights;if(k===!0&&(ne===!0||Y!==_)){let W=Y===_&&xe.id===w;L.setState(xe,Y,W)}let Ut=!1;xe.version===Ht.__version?(Ht.needsLights&&Ht.lightsStateVersion!==Ts.state.version||Ht.outputEncoding!==Ct||Oe.isInstancedMesh&&Ht.instancing===!1||!Oe.isInstancedMesh&&Ht.instancing===!0||Oe.isSkinnedMesh&&Ht.skinning===!1||!Oe.isSkinnedMesh&&Ht.skinning===!0||Ht.envMap!==ht||xe.fog===!0&&Ht.fog!==tt||Ht.numClippingPlanes!==void 0&&(Ht.numClippingPlanes!==L.numPlanes||Ht.numIntersection!==L.numIntersection)||Ht.vertexAlphas!==Jt||Ht.vertexTangents!==kt||Ht.morphTargets!==Ft||Ht.morphNormals!==Pt||Ht.morphColors!==er||Ht.toneMapping!==hs||se.isWebGL2===!0&&Ht.morphTargetsCount!==Gi)&&(Ut=!0):(Ut=!0,Ht.__version=xe.version);let Ps=Ht.currentProgram;Ut===!0&&(Ps=h1(xe,Me,Oe));let ln=!1,Ks=!1,Qs=!1,z=Ps.getUniforms(),U=Ht.uniforms;if(ae.useProgram(Ps.program)&&(ln=!0,Ks=!0,Qs=!0),xe.id!==w&&(w=xe.id,Ks=!0),ln||_!==Y){if(z.setValue($,"projectionMatrix",Y.projectionMatrix),se.logarithmicDepthBuffer&&z.setValue($,"logDepthBufFC",2/(Math.log(Y.far+1)/Math.LN2)),_!==Y&&(_=Y,Ks=!0,Qs=!0),xe.isShaderMaterial||xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshStandardMaterial||xe.envMap){let W=z.map.cameraPosition;W!==void 0&&W.setValue($,de.setFromMatrixPosition(Y.matrixWorld))}(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial)&&z.setValue($,"isOrthographic",Y.isOrthographicCamera===!0),(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial||xe.isShadowMaterial||Oe.isSkinnedMesh)&&z.setValue($,"viewMatrix",Y.matrixWorldInverse)}if(Oe.isSkinnedMesh){z.setOptional($,Oe,"bindMatrix"),z.setOptional($,Oe,"bindMatrixInverse");let W=Oe.skeleton;W&&(se.floatVertexTextures?(W.boneTexture===null&&W.computeBoneTexture(),z.setValue($,"boneTexture",W.boneTexture,V),z.setValue($,"boneTextureSize",W.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let oe=Pe.morphAttributes;if((oe.position!==void 0||oe.normal!==void 0||oe.color!==void 0&&se.isWebGL2===!0)&&B.update(Oe,Pe,xe,Ps),(Ks||Ht.receiveShadow!==Oe.receiveShadow)&&(Ht.receiveShadow=Oe.receiveShadow,z.setValue($,"receiveShadow",Oe.receiveShadow)),xe.isMeshGouraudMaterial&&xe.envMap!==null&&(U.envMap.value=ht,U.flipEnvMap.value=ht.isCubeTexture&&ht.isRenderTargetTexture===!1?-1:1),Ks&&(z.setValue($,"toneMappingExposure",m.toneMappingExposure),Ht.needsLights&&_0(U,Qs),tt&&xe.fog===!0&&Se.refreshFogUniforms(U,tt),Se.refreshMaterialUniforms(U,xe,T,C,te),Em.upload($,Ht.uniformsList,U,V)),xe.isShaderMaterial&&xe.uniformsNeedUpdate===!0&&(Em.upload($,Ht.uniformsList,U,V),xe.uniformsNeedUpdate=!1),xe.isSpriteMaterial&&z.setValue($,"center",Oe.center),z.setValue($,"modelViewMatrix",Oe.modelViewMatrix),z.setValue($,"normalMatrix",Oe.normalMatrix),z.setValue($,"modelMatrix",Oe.matrixWorld),Oe.previousModelViewMatrix&&z.setValue($,"previousModelViewMatrix",Oe.previousModelViewMatrix),Y.previousProjectionMatrix&&z.setValue($,"previousProjectionMatrix",Y.previousProjectionMatrix),xe.isShaderMaterial||xe.isRawShaderMaterial){let W=xe.uniformsGroups;for(let me=0,Ve=W.length;me<Ve;me++)if(se.isWebGL2){let Ds=W[me];qe.update(Ds,Ps),qe.bind(Ds,Ps)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ps}function _0(Y,Me){Y.ambientLightColor.needsUpdate=Me,Y.lightProbe.needsUpdate=Me,Y.directionalLights.needsUpdate=Me,Y.directionalLightShadows.needsUpdate=Me,Y.pointLights.needsUpdate=Me,Y.pointLightShadows.needsUpdate=Me,Y.spotLights.needsUpdate=Me,Y.spotLightShadows.needsUpdate=Me,Y.rectAreaLights.needsUpdate=Me,Y.hemisphereLights.needsUpdate=Me}function io(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&&Y.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(Y,Me,Pe){F.get(Y.texture).__webglTexture=Me,F.get(Y.depthTexture).__webglTexture=Pe;let xe=F.get(Y);xe.__hasExternalTextures=!0,xe.__hasExternalTextures&&(xe.__autoAllocateDepthBuffer=Pe===void 0,xe.__autoAllocateDepthBuffer||J.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),xe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Y,Me){let Pe=F.get(Y);Pe.__webglFramebuffer=Me,Pe.__useDefaultFramebuffer=Me===void 0},this.setRenderTarget=function(Y,Me=0,Pe=0){x=Y,v=Me,y=Pe;let xe=!0,Oe=null,tt=!1,St=!1;if(Y){let Ct=F.get(Y);Ct.__useDefaultFramebuffer!==void 0?(ae.bindFramebuffer(36160,null),xe=!1):Ct.__webglFramebuffer===void 0?V.setupRenderTarget(Y):Ct.__hasExternalTextures&&V.rebindTextures(Y,F.get(Y.texture).__webglTexture,F.get(Y.depthTexture).__webglTexture);let ht=Y.texture;(ht.isData3DTexture||ht.isDataArrayTexture||ht.isCompressedArrayTexture)&&(St=!0);let Jt=F.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(Oe=Jt[Me],tt=!0):se.isWebGL2&&Y.samples>0&&V.useMultisampledRTT(Y)===!1?Oe=F.get(Y).__webglMultisampledFramebuffer:Oe=Jt,b.copy(Y.viewport),M.copy(Y.scissor),S=Y.scissorTest}else b.copy(O).multiplyScalar(T).floor(),M.copy(j).multiplyScalar(T).floor(),S=X;if(ae.bindFramebuffer(36160,Oe)&&se.drawBuffers&&xe&&ae.drawBuffers(Y,Oe),ae.viewport(b),ae.scissor(M),ae.setScissorTest(S),tt){let Ct=F.get(Y.texture);$.framebufferTexture2D(36160,36064,34069+Me,Ct.__webglTexture,Pe)}else if(St){let Ct=F.get(Y.texture),ht=Me||0;$.framebufferTextureLayer(36160,36064,Ct.__webglTexture,Pe||0,ht)}w=-1},this.readRenderTargetPixels=function(Y,Me,Pe,xe,Oe,tt,St){if(!(Y&&Y.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ct=F.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&St!==void 0&&(Ct=Ct[St]),Ct){ae.bindFramebuffer(36160,Ct);try{let ht=Y.texture,Jt=ht.format,kt=ht.type;if(Jt!==Ki&&je.convert(Jt)!==$.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Ft=kt===Jo&&(J.has("EXT_color_buffer_half_float")||se.isWebGL2&&J.has("EXT_color_buffer_float"));if(kt!==j1&&je.convert(kt)!==$.getParameter(35738)&&!(kt===bi&&(se.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!Ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Me>=0&&Me<=Y.width-xe&&Pe>=0&&Pe<=Y.height-Oe&&$.readPixels(Me,Pe,xe,Oe,je.convert(Jt),je.convert(kt),tt)}finally{let ht=x!==null?F.get(x).__webglFramebuffer:null;ae.bindFramebuffer(36160,ht)}}},this.readRenderTargetPixelsAsync=async function(Y,Me,Pe,xe,Oe,tt,St){if(!(Y&&Y.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ct=F.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&St!==void 0&&(Ct=Ct[St]),Ct){let ht=Y.texture,Jt=ht.format,kt=ht.type;if(Me>=0&&Me<=Y.width-xe&&Pe>=0&&Pe<=Y.height-Oe){ae.bindFramebuffer($.FRAMEBUFFER,Ct);let Ft=$.createBuffer();$.bindBuffer($.PIXEL_PACK_BUFFER,Ft),$.bufferData($.PIXEL_PACK_BUFFER,tt.byteLength,$.STREAM_READ),$.readPixels(Me,Pe,xe,Oe,je.convert(Jt),je.convert(kt),0);let Pt=x!==null?F.get(x).__webglFramebuffer:null;ae.bindFramebuffer($.FRAMEBUFFER,Pt);let er=$.fenceSync($.SYNC_GPU_COMMANDS_COMPLETE,0);return $.flush(),await Vee($,er,4),$.bindBuffer($.PIXEL_PACK_BUFFER,Ft),$.getBufferSubData($.PIXEL_PACK_BUFFER,0,tt),$.deleteBuffer(Ft),$.deleteSync(er),tt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(Y,Me,Pe=0){let xe=Math.pow(2,-Pe),Oe=Math.floor(Me.image.width*xe),tt=Math.floor(Me.image.height*xe);V.setTexture2D(Me,0),$.copyTexSubImage2D(3553,Pe,0,0,Y.x,Y.y,Oe,tt),ae.unbindTexture()},this.copyTextureToTexture=function(Y,Me,Pe,xe=0){let Oe=Me.image.width,tt=Me.image.height,St=je.convert(Pe.format),Ct=je.convert(Pe.type);V.setTexture2D(Pe,0),$.pixelStorei(37440,Pe.flipY),$.pixelStorei(37441,Pe.premultiplyAlpha),$.pixelStorei(3317,Pe.unpackAlignment),Me.isDataTexture?$.texSubImage2D(3553,xe,Y.x,Y.y,Oe,tt,St,Ct,Me.image.data):Me.isCompressedTexture?$.compressedTexSubImage2D(3553,xe,Y.x,Y.y,Me.mipmaps[0].width,Me.mipmaps[0].height,St,Me.mipmaps[0].data):$.texSubImage2D(3553,xe,Y.x,Y.y,St,Ct,Me.image),xe===0&&Pe.generateMipmaps&&$.generateMipmap(3553),ae.unbindTexture()},this.copyTextureToTexture3D=function(Y,Me,Pe,xe,Oe=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let tt=Y.max.x-Y.min.x+1,St=Y.max.y-Y.min.y+1,Ct=Y.max.z-Y.min.z+1,ht=je.convert(xe.format),Jt=je.convert(xe.type),kt;if(xe.isData3DTexture)V.setTexture3D(xe,0),kt=32879;else if(xe.isDataArrayTexture)V.setTexture2DArray(xe,0),kt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}$.pixelStorei(37440,xe.flipY),$.pixelStorei(37441,xe.premultiplyAlpha),$.pixelStorei(3317,xe.unpackAlignment);let Ft=$.getParameter(3314),Pt=$.getParameter(32878),er=$.getParameter(3316),hs=$.getParameter(3315),Pa=$.getParameter(32877),Gi=Pe.isCompressedTexture?Pe.mipmaps[0]:Pe.image;$.pixelStorei(3314,Gi.width),$.pixelStorei(32878,Gi.height),$.pixelStorei(3316,Y.min.x),$.pixelStorei(3315,Y.min.y),$.pixelStorei(32877,Y.min.z),Pe.isDataTexture||Pe.isData3DTexture?$.texSubImage3D(kt,Oe,Me.x,Me.y,Me.z,tt,St,Ct,ht,Jt,Gi.data):Pe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),$.compressedTexSubImage3D(kt,Oe,Me.x,Me.y,Me.z,tt,St,Ct,ht,Gi.data)):$.texSubImage3D(kt,Oe,Me.x,Me.y,Me.z,tt,St,Ct,ht,Jt,Gi),$.pixelStorei(3314,Ft),$.pixelStorei(32878,Pt),$.pixelStorei(3316,er),$.pixelStorei(3315,hs),$.pixelStorei(32877,Pa),Oe===0&&xe.generateMipmaps&&$.generateMipmap(kt),ae.unbindTexture()},this.initRenderTarget=function(Y){F.get(Y).__webglFramebuffer===void 0&&V.setupRenderTarget(Y)},this.initTexture=function(Y){Y.isCubeTexture?V.setTextureCube(Y,0):Y.isData3DTexture?V.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?V.setTexture2DArray(Y,0):V.setTexture2D(Y,0),ae.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,ae.reset(),Ee.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var kse=class extends Zz{};kse.prototype.isWebGL1Renderer=!0;var Jz=class{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new pt(e),this.near=t,this.far=i}clone(){return new Jz(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},As=class extends yi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},Fse=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=c6,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ba()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ba()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ba()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},W1=new E,m6=class{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)W1.fromBufferAttribute(this,t),W1.applyMatrix4(e),this.setXYZ(t,W1.x,W1.y,W1.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)W1.fromBufferAttribute(this,t),W1.applyNormalMatrix(e),this.setXYZ(t,W1.x,W1.y,W1.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)W1.fromBufferAttribute(this,t),W1.transformDirection(e),this.setXYZ(t,W1.x,W1.y,W1.z);return this}setX(e,t){return this.normalized&&(t=Oi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Oi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Oi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Oi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Fo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Fo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Fo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Fo(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array),r=Oi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array),r=Oi(r,this.array),s=Oi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new mt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new m6(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},$z=class extends yi{constructor(){super(),this.isBone=!0,this.type="Bone"}},ts=class extends $i{constructor(e=null,t=1,i=1,r,s,a,n,o,l=jt,h=jt,c,u){super(null,a,n,o,l,h,r,s,c,u),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},BC=new Fe,Nse=new Fe,Bw=class{constructor(e=[],t=[]){this.uuid=ba(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Fe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new Fe;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){let n=e[s]?e[s].matrixWorld:Nse;BC.multiplyMatrices(n,t[s]),BC.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Bw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Bz(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new ts(t,e,e,Ki,bi);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let s=e.bones[i],a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new $z),this.bones.push(a),this.boneInverses.push(new Fe().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){let a=t[r];e.bones.push(a.uuid);let n=i[r];e.boneInverses.push(n.toArray())}return e}},Od=class extends mt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},kC=new Fe,FC=new Fe,lp=[],Use=new Fe,U0=new zi,Vse=class extends zi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Od(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,Use)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let i=this.matrixWorld,r=this.count;if(U0.geometry=this.geometry,U0.material=this.material,U0.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,kC),FC.multiplyMatrices(i,kC),U0.matrixWorld=FC,U0.raycast(e,lp);for(let a=0,n=lp.length;a<n;a++){let o=lp[a];o.instanceId=s,o.object=this,t.push(o)}lp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Od(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},Eh=class extends ff{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new pt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},NC=new E,UC=new E,VC=new Fe,Ly=new n0,hp=new Cs,bg=class extends yi{constructor(e=new rt,t=new Eh){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)NC.fromBufferAttribute(t,r-1),UC.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=NC.distanceTo(UC);e.setAttribute("lineDistance",new Xe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),hp.copy(i.boundingSphere),hp.applyMatrix4(r),hp.radius+=s,e.ray.intersectsSphere(hp)===!1)return;VC.copy(r).invert(),Ly.copy(e.ray).applyMatrix4(VC);let n=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=n*n,l=new E,h=new E,c=new E,u=new E,d=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(f!==null){let m=Math.max(0,a.start),g=Math.min(f.count,a.start+a.count);for(let v=m,y=g-1;v<y;v+=d){let x=f.getX(v),w=f.getX(v+1);if(l.fromBufferAttribute(p,x),h.fromBufferAttribute(p,w),Ly.distanceSqToSegment(l,h,u,c)>o)continue;u.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(u);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let m=Math.max(0,a.start),g=Math.min(p.count,a.start+a.count);for(let v=m,y=g-1;v<y;v+=d){if(l.fromBufferAttribute(p,v),h.fromBufferAttribute(p,v+1),Ly.distanceSqToSegment(l,h,u,c)>o)continue;u.applyMatrix4(this.matrixWorld);let x=e.ray.origin.distanceTo(u);x<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){let a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},jC=new E,GC=new E,pf=class extends bg{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)jC.fromBufferAttribute(t,r),GC.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+jC.distanceTo(GC);e.setAttribute("lineDistance",new Xe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},jse=class extends $i{constructor(e,t,i,r,s,a,n,o,l){super(e,t,i,r,s,a,n,o,l),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Bt,this.magFilter=s!==void 0?s:Bt,this.generateMipmaps=!1;let h=this;function c(){h.needsUpdate=!0,e.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(c)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},Gse=class extends $i{constructor(e,t,i,r,s,a,n,o,l){super(e,t,i,r,s,a,n,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},$n=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let i=this.getLengths(),r=0,s=i.length,a;t?a=t:a=e*i[s-1];let n=0,o=s-1,l;for(;n<=o;)if(r=Math.floor(n+(o-n)/2),l=i[r]-a,l<0)n=r+1;else if(l>0)o=r-1;else{o=r;break}if(r=o,i[r]===a)return r/(s-1);let h=i[r],c=i[r+1]-h,u=(a-h)/c;return(r+u)/(s-1)}getTangent(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);let s=this.getPoint(i),a=this.getPoint(r),n=t||(s.isVector2?new re:new E);return n.copy(a).sub(s).normalize(),n}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){let i=new E,r=[],s=[],a=[],n=new E,o=new Fe;for(let d=0;d<=e;d++){let f=d/e;r[d]=this.getTangentAt(f,new E)}s[0]=new E,a[0]=new E;let l=Number.MAX_VALUE,h=Math.abs(r[0].x),c=Math.abs(r[0].y),u=Math.abs(r[0].z);h<=l&&(l=h,i.set(1,0,0)),c<=l&&(l=c,i.set(0,1,0)),u<=l&&i.set(0,0,1),n.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],n),a[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),a[d]=a[d-1].clone(),n.crossVectors(r[d-1],r[d]),n.length()>Number.EPSILON){n.normalize();let f=Math.acos(Er(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(o.makeRotationAxis(n,f))}a[d].crossVectors(r[d],s[d])}if(t===!0){let d=Math.acos(Er(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(n.crossVectors(s[0],s[e]))>0&&(d=-d);for(let f=1;f<=e;f++)s[f].applyMatrix4(o.makeRotationAxis(r[f],d*f)),a[f].crossVectors(r[f],s[f])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},Vv=class extends $n{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,n=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=n,this.aRotation=o}getPoint(e,t){let i=t||new re,r=Math.PI*2,s=this.aEndAngle-this.aStartAngle,a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);let n=this.aStartAngle+e*s,o=this.aX+this.xRadius*Math.cos(n),l=this.aY+this.yRadius*Math.sin(n);if(this.aRotation!==0){let h=Math.cos(this.aRotation),c=Math.sin(this.aRotation),u=o-this.aX,d=l-this.aY;o=u*h-d*c+this.aX,l=u*c+d*h+this.aY}return i.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},Hse=class extends Vv{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}};function kw(){let e=0,t=0,i=0,r=0;function s(a,n,o,l){e=a,t=o,i=-3*a+3*n-2*o-l,r=2*a-2*n+o+l}return{initCatmullRom:function(a,n,o,l,h){s(n,o,h*(o-a),h*(l-n))},initNonuniformCatmullRom:function(a,n,o,l,h,c,u){let d=(n-a)/h-(o-a)/(h+c)+(o-n)/c,f=(o-n)/c-(l-n)/(c+u)+(l-o)/u;d*=c,f*=c,s(n,o,d,f)},calc:function(a){let n=a*a,o=n*a;return e+t*a+i*n+r*o}}}var cp=new E,zy=new kw,By=new kw,ky=new kw,Wse=class extends $n{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new E){let i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e,n=Math.floor(a),o=a-n;this.closed?n+=n>0?0:(Math.floor(Math.abs(n)/s)+1)*s:o===0&&n===s-1&&(n=s-2,o=1);let l,h;this.closed||n>0?l=r[(n-1)%s]:(cp.subVectors(r[0],r[1]).add(r[0]),l=cp);let c=r[n%s],u=r[(n+1)%s];if(this.closed||n+2<s?h=r[(n+2)%s]:(cp.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=cp),this.curveType==="centripetal"||this.curveType==="chordal"){let d=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(u),d),m=Math.pow(u.distanceToSquared(h),d);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),zy.initNonuniformCatmullRom(l.x,c.x,u.x,h.x,f,p,m),By.initNonuniformCatmullRom(l.y,c.y,u.y,h.y,f,p,m),ky.initNonuniformCatmullRom(l.z,c.z,u.z,h.z,f,p,m)}else this.curveType==="catmullrom"&&(zy.initCatmullRom(l.x,c.x,u.x,h.x,this.tension),By.initCatmullRom(l.y,c.y,u.y,h.y,this.tension),ky.initCatmullRom(l.z,c.z,u.z,h.z,this.tension));return i.set(zy.calc(o),By.calc(o),ky.calc(o)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new E().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function HC(e,t,i,r,s){let a=(r-t)*.5,n=(s-i)*.5,o=e*e,l=e*o;return(2*i-2*r+a+n)*l+(-3*i+3*r-2*a-n)*o+a*e+i}function qse(e,t){let i=1-e;return i*i*t}function Xse(e,t){return 2*(1-e)*e*t}function Yse(e,t){return e*e*t}function Y3(e,t,i,r){return qse(e,t)+Xse(e,i)+Yse(e,r)}function Kse(e,t){let i=1-e;return i*i*i*t}function Qse(e,t){let i=1-e;return 3*i*i*e*t}function Zse(e,t){return 3*(1-e)*e*e*t}function Jse(e,t){return e*e*e*t}function K3(e,t,i,r,s){return Kse(e,t)+Qse(e,i)+Zse(e,r)+Jse(e,s)}var Ha=class extends $n{constructor(e=new re,t=new re,i=new re,r=new re){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new re){let i=t,r=this.v0,s=this.v1,a=this.v2,n=this.v3;return i.set(K3(e,r.x,s.x,a.x,n.x),K3(e,r.y,s.y,a.y,n.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Tm=class extends $n{constructor(e=new E,t=new E,i=new E,r=new E){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new E){let i=t,r=this.v0,s=this.v1,a=this.v2,n=this.v3;return i.set(K3(e,r.x,s.x,a.x,n.x),K3(e,r.y,s.y,a.y,n.y),K3(e,r.z,s.z,a.z,n.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Qa=class extends $n{constructor(e=new re,t=new re){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new re){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let i=t||new re;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},eB=class extends $n{constructor(e=new E,t=new E){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new E){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},vh=class extends $n{constructor(e=new re,t=new re,i=new re){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new re){let i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Y3(e,r.x,s.x,a.x),Y3(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},$se=class extends $n{constructor(e=new E,t=new E,i=new E){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new E){let i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Y3(e,r.x,s.x,a.x),Y3(e,r.y,s.y,a.y),Y3(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Fw=class extends $n{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new re){let i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),n=s-a,o=r[a===0?a:a-1],l=r[a],h=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return i.set(HC(n,o.x,l.x,h.x,c.x),HC(n,o.y,l.y,h.y,c.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new re().fromArray(r))}return this}},eae=Object.freeze({__proto__:null,ArcCurve:Hse,CatmullRomCurve3:Wse,CubicBezierCurve:Ha,CubicBezierCurve3:Tm,EllipseCurve:Vv,LineCurve:Qa,LineCurve3:eB,QuadraticBezierCurve:vh,QuadraticBezierCurve3:$se,SplineCurve:Fw}),tB=class extends $n{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Qa(t,e))}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),s=0;for(;s<r.length;){if(r[s]>=i){let a=r[s]-i,n=this.curves[s],o=n.getLength(),l=o===0?0:1-a/o;return n.getPointAt(l,t)}s++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,s=this.curves;r<s.length;r++){let a=s[r],n=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(n);for(let l=0;l<o.length;l++){let h=o[l];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new eae[r.type]().fromJSON(r))}return this}},wg=class extends tB{constructor(e){super(),this.type="Path",this.currentPoint=new re,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new Qa(this.currentPoint.clone(),new re(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let s=new vh(this.currentPoint.clone(),new re(e,t),new re(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){let n=new Ha(this.currentPoint.clone(),new re(e,t),new re(i,r),new re(s,a));return this.curves.push(n),this.currentPoint.set(s,a),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new Fw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){let n=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+n,t+o,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,n,o){let l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+l,t+h,i,r,s,a,n,o),this}absellipse(e,t,i,r,s,a,n,o){let l=new Vv(e,t,i,r,s,a,n,o);if(this.curves.length>0){let c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);let h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},iB=class extends rt{constructor(e=[new re(0,-.5),new re(.5,0),new re(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Er(r,0,Math.PI*2);let s=[],a=[],n=[],o=[],l=[],h=1/t,c=new E,u=new re,d=new E,f=new E,p=new E,m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=g*1,d.y=-m,d.z=g*0,p.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(p.x,p.y,p.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=g*1,d.y=-m,d.z=g*0,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),o.push(d.x,d.y,d.z),p.copy(f)}for(let v=0;v<=t;v++){let y=i+v*h*r,x=Math.sin(y),w=Math.cos(y);for(let _=0;_<=e.length-1;_++){c.x=e[_].x*x,c.y=e[_].y,c.z=e[_].x*w,a.push(c.x,c.y,c.z),u.x=v/t,u.y=_/(e.length-1),n.push(u.x,u.y);let b=o[3*_+0]*x,M=o[3*_+1],S=o[3*_+0]*w;l.push(b,M,S)}}for(let v=0;v<t;v++)for(let y=0;y<e.length-1;y++){let x=y+v*e.length,w=x,_=x+e.length,b=x+e.length+1,M=x+1;s.push(w,_,M),s.push(b,M,_)}this.setIndex(s),this.setAttribute("position",new Xe(a,3)),this.setAttribute("uv",new Xe(n,2)),this.setAttribute("normal",new Xe(l,3))}static fromJSON(e){return new iB(e.points,e.segments,e.phiStart,e.phiLength)}},Nw=class extends rt{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,n=0,o=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:n,thetaLength:o};let l=this;r=Math.floor(r),s=Math.floor(s);let h=[],c=[],u=[],d=[],f=0,p=[],m=i/2,g=0;v(),a===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(h),this.setAttribute("position",new Xe(c,3)),this.setAttribute("normal",new Xe(u,3)),this.setAttribute("uv",new Xe(d,2));function v(){let x=new E,w=new E,_=0,b=(t-e)/i;for(let M=0;M<=s;M++){let S=[],A=M/s,C=A*(t-e)+e;for(let T=0;T<=r;T++){let D=T/r,R=D*o+n,O=Math.sin(R),j=Math.cos(R);w.x=C*O,w.y=-A*i+m,w.z=C*j,c.push(w.x,w.y,w.z),x.set(O,b,j).normalize(),u.push(x.x,x.y,x.z),d.push(D,1-A),S.push(f++)}p.push(S)}for(let M=0;M<r;M++)for(let S=0;S<s;S++){let A=p[S][M],C=p[S+1][M],T=p[S+1][M+1],D=p[S][M+1];h.push(A,C,D),h.push(C,T,D),_+=6}l.addGroup(g,_,0),g+=_}function y(x){let w=f,_=new re,b=new E,M=0,S=x===!0?e:t,A=x===!0?1:-1;for(let T=1;T<=r;T++)c.push(0,m*A,0),u.push(0,A,0),d.push(.5,.5),f++;let C=f;for(let T=0;T<=r;T++){let D=T/r*o+n,R=Math.cos(D),O=Math.sin(D);b.x=S*O,b.y=m*A,b.z=S*R,c.push(b.x,b.y,b.z),u.push(0,A,0),_.x=R*.5+.5,_.y=O*.5*A+.5,d.push(_.x,_.y),f++}for(let T=0;T<r;T++){let D=w+T,R=C+T;x===!0?h.push(R,R+1,D):h.push(R+1,R,D),M+=3}l.addGroup(g,M,x===!0?1:2),g+=M}}static fromJSON(e){return new Nw(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Uw=class extends Nw{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,n=Math.PI*2){super(0,e,t,i,r,s,a,n),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:n}}static fromJSON(e){return new Uw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Vw=class extends rt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};let s=[],a=[];n(r),l(i),h(),this.setAttribute("position",new Xe(s,3)),this.setAttribute("normal",new Xe(s.slice(),3)),this.setAttribute("uv",new Xe(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function n(v){let y=new E,x=new E,w=new E;for(let _=0;_<t.length;_+=3)d(t[_+0],y),d(t[_+1],x),d(t[_+2],w),o(y,x,w,v)}function o(v,y,x,w){let _=w+1,b=[];for(let M=0;M<=_;M++){b[M]=[];let S=v.clone().lerp(x,M/_),A=y.clone().lerp(x,M/_),C=_-M;for(let T=0;T<=C;T++)T===0&&M===_?b[M][T]=S:b[M][T]=S.clone().lerp(A,T/C)}for(let M=0;M<_;M++)for(let S=0;S<2*(_-M)-1;S++){let A=Math.floor(S/2);S%2===0?(u(b[M][A+1]),u(b[M+1][A]),u(b[M][A])):(u(b[M][A+1]),u(b[M+1][A+1]),u(b[M+1][A]))}}function l(v){let y=new E;for(let x=0;x<s.length;x+=3)y.x=s[x+0],y.y=s[x+1],y.z=s[x+2],y.normalize().multiplyScalar(v),s[x+0]=y.x,s[x+1]=y.y,s[x+2]=y.z}function h(){let v=new E;for(let y=0;y<s.length;y+=3){v.x=s[y+0],v.y=s[y+1],v.z=s[y+2];let x=m(v)/2/Math.PI+.5,w=g(v)/Math.PI+.5;a.push(x,1-w)}f(),c()}function c(){for(let v=0;v<a.length;v+=6){let y=a[v+0],x=a[v+2],w=a[v+4],_=Math.max(y,x,w),b=Math.min(y,x,w);_>.9&&b<.1&&(y<.2&&(a[v+0]+=1),x<.2&&(a[v+2]+=1),w<.2&&(a[v+4]+=1))}}function u(v){s.push(v.x,v.y,v.z)}function d(v,y){let x=v*3;y.x=e[x+0],y.y=e[x+1],y.z=e[x+2]}function f(){let v=new E,y=new E,x=new E,w=new E,_=new re,b=new re,M=new re;for(let S=0,A=0;S<s.length;S+=9,A+=6){v.set(s[S+0],s[S+1],s[S+2]),y.set(s[S+3],s[S+4],s[S+5]),x.set(s[S+6],s[S+7],s[S+8]),_.set(a[A+0],a[A+1]),b.set(a[A+2],a[A+3]),M.set(a[A+4],a[A+5]),w.copy(v).add(y).add(x).divideScalar(3);let C=m(w);p(_,A+0,v,C),p(b,A+2,y,C),p(M,A+4,x,C)}}function p(v,y,x,w){w<0&&v.x===1&&(a[y]=v.x-1),x.x===0&&x.z===0&&(a[y]=w/2/Math.PI+.5)}function m(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(e){return new Vw(e.vertices,e.indices,e.radius,e.details)}},rB=class extends Vw{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rB(e.radius,e.detail)}},_g=class extends wg{constructor(e){super(e),this.uuid=ba(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new wg().fromJSON(r))}return this}},tae={triangulate:function(e,t,i=2){let r=t&&t.length,s=r?t[0]*i:e.length,a=sB(e,0,s,i,!0),n=[];if(!a||a.next===a.prev)return n;let o,l,h,c,u,d,f;if(r&&(a=nae(e,t,a,i)),e.length>80*i){o=h=e[0],l=c=e[1];for(let p=i;p<s;p+=i)u=e[p],d=e[p+1],u<o&&(o=u),d<l&&(l=d),u>h&&(h=u),d>c&&(c=d);f=Math.max(h-o,c-l),f=f!==0?32767/f:0}return Rd(a,n,i,o,l,f,0),n}};function sB(e,t,i,r,s){let a,n;if(s===vae(e,t,i,r)>0)for(a=t;a<i;a+=r)n=WC(a,e[a],e[a+1],n);else for(a=i-r;a>=t;a-=r)n=WC(a,e[a],e[a+1],n);return n&&jv(n,n.next)&&(zd(n),n=n.next),n}function kc(e,t){if(!e)return e;t||(t=e);let i=e,r;do if(r=!1,!i.steiner&&(jv(i,i.next)||Ji(i.prev,i,i.next)===0)){if(zd(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function Rd(e,t,i,r,s,a,n){if(!e)return;!n&&a&&uae(e,r,s,a);let o=e,l,h;for(;e.prev!==e.next;){if(l=e.prev,h=e.next,a?rae(e,r,s,a):iae(e)){t.push(l.i/i|0),t.push(e.i/i|0),t.push(h.i/i|0),zd(e),e=h.next,o=h.next;continue}if(e=h,e===o){n?n===1?(e=sae(kc(e),t,i),Rd(e,t,i,r,s,a,2)):n===2&&aae(e,t,i,r,s,a):Rd(kc(e),t,i,r,s,a,1);break}}}function iae(e){let t=e.prev,i=e,r=e.next;if(Ji(t,i,r)>=0)return!1;let s=t.x,a=i.x,n=r.x,o=t.y,l=i.y,h=r.y,c=s<a?s<n?s:n:a<n?a:n,u=o<l?o<h?o:h:l<h?l:h,d=s>a?s>n?s:n:a>n?a:n,f=o>l?o>h?o:h:l>h?l:h,p=r.next;for(;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=u&&p.y<=f&&eu(s,o,a,l,n,h,p.x,p.y)&&Ji(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function rae(e,t,i,r){let s=e.prev,a=e,n=e.next;if(Ji(s,a,n)>=0)return!1;let o=s.x,l=a.x,h=n.x,c=s.y,u=a.y,d=n.y,f=o<l?o<h?o:h:l<h?l:h,p=c<u?c<d?c:d:u<d?u:d,m=o>l?o>h?o:h:l>h?l:h,g=c>u?c>d?c:d:u>d?u:d,v=g6(f,p,t,i,r),y=g6(m,g,t,i,r),x=e.prevZ,w=e.nextZ;for(;x&&x.z>=v&&w&&w.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==s&&x!==n&&eu(o,c,l,u,h,d,x.x,x.y)&&Ji(x.prev,x,x.next)>=0||(x=x.prevZ,w.x>=f&&w.x<=m&&w.y>=p&&w.y<=g&&w!==s&&w!==n&&eu(o,c,l,u,h,d,w.x,w.y)&&Ji(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==s&&x!==n&&eu(o,c,l,u,h,d,x.x,x.y)&&Ji(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;w&&w.z<=y;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=g&&w!==s&&w!==n&&eu(o,c,l,u,h,d,w.x,w.y)&&Ji(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function sae(e,t,i){let r=e;do{let s=r.prev,a=r.next.next;!jv(s,a)&&aB(s,r,r.next,a)&&Ld(s,a)&&Ld(a,s)&&(t.push(s.i/i|0),t.push(r.i/i|0),t.push(a.i/i|0),zd(r),zd(r.next),r=e=a),r=r.next}while(r!==e);return kc(r)}function aae(e,t,i,r,s,a){let n=e;do{let o=n.next.next;for(;o!==n.prev;){if(n.i!==o.i&&pae(n,o)){let l=nB(n,o);n=kc(n,n.next),l=kc(l,l.next),Rd(n,t,i,r,s,a,0),Rd(l,t,i,r,s,a,0);return}o=o.next}n=n.next}while(n!==e)}function nae(e,t,i,r){let s=[],a,n,o,l,h;for(a=0,n=t.length;a<n;a++)o=t[a]*r,l=a<n-1?t[a+1]*r:e.length,h=sB(e,o,l,r,!1),h===h.next&&(h.steiner=!0),s.push(fae(h));for(s.sort(oae),a=0;a<s.length;a++)i=lae(s[a],i);return i}function oae(e,t){return e.x-t.x}function lae(e,t){let i=hae(e,t);if(!i)return t;let r=nB(i,e);return kc(r,r.next),kc(i,i.next)}function hae(e,t){let i=t,r=-1/0,s,a=e.x,n=e.y;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){let d=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(d<=a&&d>r&&(r=d,s=i.x<i.next.x?i:i.next,d===a))return s}i=i.next}while(i!==t);if(!s)return null;let o=s,l=s.x,h=s.y,c=1/0,u;i=s;do a>=i.x&&i.x>=l&&a!==i.x&&eu(n<h?a:r,n,l,h,n<h?r:a,n,i.x,i.y)&&(u=Math.abs(n-i.y)/(a-i.x),Ld(i,e)&&(u<c||u===c&&(i.x>s.x||i.x===s.x&&cae(s,i)))&&(s=i,c=u)),i=i.next;while(i!==o);return s}function cae(e,t){return Ji(e.prev,e,t.prev)<0&&Ji(t.next,e,e.next)<0}function uae(e,t,i,r){let s=e;do s.z===0&&(s.z=g6(s.x,s.y,t,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,dae(s)}function dae(e){let t,i,r,s,a,n,o,l,h=1;do{for(i=e,e=null,a=null,n=0;i;){for(n++,r=i,o=0,t=0;t<h&&(o++,r=r.nextZ,!!r);t++);for(l=h;o>0||l>0&&r;)o!==0&&(l===0||!r||i.z<=r.z)?(s=i,i=i.nextZ,o--):(s=r,r=r.nextZ,l--),a?a.nextZ=s:e=s,s.prevZ=a,a=s;i=r}a.nextZ=null,h*=2}while(n>1);return e}function g6(e,t,i,r,s){return e=(e-i)*s|0,t=(t-r)*s|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function fae(e){let t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function eu(e,t,i,r,s,a,n,o){return(s-n)*(t-o)>=(e-n)*(a-o)&&(e-n)*(r-o)>=(i-n)*(t-o)&&(i-n)*(a-o)>=(s-n)*(r-o)}function pae(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!mae(e,t)&&(Ld(e,t)&&Ld(t,e)&&gae(e,t)&&(Ji(e.prev,e,t.prev)||Ji(e,t.prev,t))||jv(e,t)&&Ji(e.prev,e,e.next)>0&&Ji(t.prev,t,t.next)>0)}function Ji(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function jv(e,t){return e.x===t.x&&e.y===t.y}function aB(e,t,i,r){let s=dp(Ji(e,t,i)),a=dp(Ji(e,t,r)),n=dp(Ji(i,r,e)),o=dp(Ji(i,r,t));return!!(s!==a&&n!==o||s===0&&up(e,i,t)||a===0&&up(e,r,t)||n===0&&up(i,e,r)||o===0&&up(i,t,r))}function up(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function dp(e){return e>0?1:e<0?-1:0}function mae(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&aB(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function Ld(e,t){return Ji(e.prev,e,e.next)<0?Ji(e,t,e.next)>=0&&Ji(e,e.prev,t)>=0:Ji(e,t,e.prev)<0||Ji(e,e.next,t)<0}function gae(e,t){let i=e,r=!1,s=(e.x+t.x)/2,a=(e.y+t.y)/2;do i.y>a!=i.next.y>a&&i.next.y!==i.y&&s<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e);return r}function nB(e,t){let i=new v6(e.i,e.x,e.y),r=new v6(t.i,t.x,t.y),s=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function WC(e,t,i,r){let s=new v6(e,t,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function zd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function v6(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vae(e,t,i,r){let s=0;for(let a=t,n=i-r;a<i;a+=r)s+=(e[n]-e[a])*(e[a+1]+e[n+1]),n=a;return s}var oB=class{static area(e){let t=e.length,i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return oB.area(e)<0}static triangulateShape(e,t){let i=[],r=[],s=[];qC(e),XC(i,e);let a=e.length;t.forEach(qC);for(let o=0;o<t.length;o++)r.push(a),a+=t[o].length,XC(i,t[o]);let n=tae.triangulate(i,r);for(let o=0;o<n.length;o+=3)s.push(n.slice(o,o+3));return s}};function qC(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function XC(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}var lB=class extends Vw{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new lB(e.radius,e.detail)}},pu=class extends rt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,n=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:n},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let o=Math.min(a+n,Math.PI),l=0,h=[],c=new E,u=new E,d=[],f=[],p=[],m=[];for(let g=0;g<=i;g++){let v=[],y=g/i,x=0;g==0&&a==0?x=.5/t:g==i&&o==Math.PI&&(x=-.5/t);for(let w=0;w<=t;w++){let _=w/t;c.x=-e*Math.cos(r+_*s)*Math.sin(a+y*n),c.y=e*Math.cos(a+y*n),c.z=e*Math.sin(r+_*s)*Math.sin(a+y*n),f.push(c.x,c.y,c.z),u.copy(c).normalize(),p.push(u.x,u.y,u.z),m.push(_+x,1-y),v.push(l++)}h.push(v)}for(let g=0;g<i;g++)for(let v=0;v<t;v++){let y=h[g][v+1],x=h[g][v],w=h[g+1][v],_=h[g+1][v+1];(g!==0||a>0)&&d.push(y,x,_),(g!==i-1||o<Math.PI)&&d.push(x,w,_)}this.setIndex(d),this.setAttribute("position",new Xe(f,3)),this.setAttribute("normal",new Xe(p,3)),this.setAttribute("uv",new Xe(m,2))}static fromJSON(e){return new pu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},hB=class extends rt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);let a=[],n=[],o=[],l=[],h=new E,c=new E,u=new E;for(let d=0;d<=i;d++)for(let f=0;f<=r;f++){let p=f/r*s,m=d/i*Math.PI*2;c.x=(e+t*Math.cos(m))*Math.cos(p),c.y=(e+t*Math.cos(m))*Math.sin(p),c.z=t*Math.sin(m),n.push(c.x,c.y,c.z),h.x=e*Math.cos(p),h.y=e*Math.sin(p),u.subVectors(c,h).normalize(),o.push(u.x,u.y,u.z),l.push(f/r),l.push(d/i)}for(let d=1;d<=i;d++)for(let f=1;f<=r;f++){let p=(r+1)*d+f-1,m=(r+1)*(d-1)+f-1,g=(r+1)*(d-1)+f,v=(r+1)*d+f;a.push(p,m,v),a.push(m,g,v)}this.setIndex(a),this.setAttribute("position",new Xe(n,3)),this.setAttribute("normal",new Xe(o,3)),this.setAttribute("uv",new Xe(l,2))}static fromJSON(e){return new hB(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},cB=class extends rt{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);let n=[],o=[],l=[],h=[],c=new E,u=new E,d=new E,f=new E,p=new E,m=new E,g=new E;for(let y=0;y<=i;++y){let x=y/i*s*Math.PI*2;v(x,s,a,e,d),v(x+.01,s,a,e,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let w=0;w<=r;++w){let _=w/r*Math.PI*2,b=-t*Math.cos(_),M=t*Math.sin(_);c.x=d.x+(b*g.x+M*p.x),c.y=d.y+(b*g.y+M*p.y),c.z=d.z+(b*g.z+M*p.z),o.push(c.x,c.y,c.z),u.subVectors(c,d).normalize(),l.push(u.x,u.y,u.z),h.push(y/i),h.push(w/r)}}for(let y=1;y<=i;y++)for(let x=1;x<=r;x++){let w=(r+1)*(y-1)+(x-1),_=(r+1)*y+(x-1),b=(r+1)*y+x,M=(r+1)*(y-1)+x;n.push(w,_,M),n.push(_,b,M)}this.setIndex(n),this.setAttribute("position",new Xe(o,3)),this.setAttribute("normal",new Xe(l,3)),this.setAttribute("uv",new Xe(h,2));function v(y,x,w,_,b){let M=Math.cos(y),S=Math.sin(y),A=w/x*y,C=Math.cos(A);b.x=_*(2+C)*.5*M,b.y=_*(2+C)*S*.5,b.z=_*Math.sin(A)*.5}}static fromJSON(e){return new cB(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},yae=class extends ti{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}};function vl(e,t,i){return uB(e)?new e.constructor(e.subarray(t,i!==void 0?i:e.length)):e.slice(t,i)}function fp(e,t,i){return!e||e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function uB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xae(e){function t(s,a){return e[s]-e[a]}let i=e.length,r=new Array(i);for(let s=0;s!==i;++s)r[s]=s;return r.sort(t),r}function YC(e,t,i){let r=e.length,s=new e.constructor(r);for(let a=0,n=0;n!==r;++a){let o=i[a]*t;for(let l=0;l!==t;++l)s[n++]=e[o+l]}return s}function dB(e,t,i,r){let s=1,a=e[0];for(;a!==void 0&&a[r]===void 0;)a=e[s++];if(a===void 0)return;let n=a[r];if(n!==void 0)if(Array.isArray(n))do n=a[r],n!==void 0&&(t.push(a.time),i.push.apply(i,n)),a=e[s++];while(a!==void 0);else if(n.toArray!==void 0)do n=a[r],n!==void 0&&(t.push(a.time),n.toArray(i,i.length)),a=e[s++];while(a!==void 0);else do n=a[r],n!==void 0&&(t.push(a.time),i.push(n)),a=e[s++];while(a!==void 0)}var Gv=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;i:{r:if(!(e<r)){for(let n=i+2;;){if(r===void 0){if(e<s)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===n)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break i}if(!(e>=s)){let n=t[1];e<n&&(i=2,s=n);for(let o=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===o)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break i}break e}for(;i<a;){let n=i+a>>>1;e<t[n]?a=n:i=n+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},bae=class extends Gv{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Z2,endingEnd:Z2}}intervalChanged_(e,t,i){let r=this.parameterPositions,s=e-2,a=e+1,n=r[s],o=r[a];if(n===void 0)switch(this.getSettings_().endingStart){case J2:s=e,n=2*t-i;break;case vg:s=r.length-2,n=t+r[s]-r[s+1];break;default:s=e,n=i}if(o===void 0)switch(this.getSettings_().endingEnd){case J2:a=e,o=2*i-t;break;case vg:a=1,o=i+r[1]-r[0];break;default:a=e-1,o=t}let l=(i-t)*.5,h=this.valueSize;this._weightPrev=l/(t-n),this._weightNext=l/(o-i),this._offsetPrev=s*h,this._offsetNext=a*h}interpolate_(e,t,i,r){let s=this.resultBuffer,a=this.sampleValues,n=this.valueSize,o=e*n,l=o-n,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,d=this._weightNext,f=(i-t)/(r-t),p=f*f,m=p*f,g=-u*m+2*u*p-u*f,v=(1+u)*m+(-1.5-2*u)*p+(-.5+u)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,x=d*m-d*p;for(let w=0;w!==n;++w)s[w]=g*a[h+w]+v*a[l+w]+y*a[o+w]+x*a[c+w];return s}},fB=class extends Gv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,a=this.sampleValues,n=this.valueSize,o=e*n,l=o-n,h=(i-t)/(r-t),c=1-h;for(let u=0;u!==n;++u)s[u]=a[l+u]*c+a[o+u]*h;return s}},wae=class extends Gv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},eo=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=fp(t,this.TimeBufferType),this.values=fp(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:fp(e.times,Array),values:fp(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new wae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new fB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new bae(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case mg:t=this.InterpolantFactoryMethodDiscrete;break;case gg:t=this.InterpolantFactoryMethodLinear;break;case ly:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mg;case this.InterpolantFactoryMethodLinear:return gg;case this.InterpolantFactoryMethodSmooth:return ly}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);let n=this.getValueSize();this.times=vl(i,s,a),this.values=vl(this.values,s*n,a*n)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let n=0;n!==s;n++){let o=i[n];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,n,o),e=!1;break}if(a!==null&&a>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,n,o,a),e=!1;break}a=o}if(r!==void 0&&uB(r))for(let n=0,o=r.length;n!==o;++n){let l=r[n];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,n,l),e=!1;break}}return e}optimize(){let e=vl(this.times),t=vl(this.values),i=this.getValueSize(),r=this.getInterpolation()===ly,s=e.length-1,a=1;for(let n=1;n<s;++n){let o=!1,l=e[n],h=e[n+1];if(l!==h&&(n!==1||l!==e[0]))if(r)o=!0;else{let c=n*i,u=c-i,d=c+i;for(let f=0;f!==i;++f){let p=t[c+f];if(p!==t[u+f]||p!==t[d+f]){o=!0;break}}}if(o){if(n!==a){e[a]=e[n];let c=n*i,u=a*i;for(let d=0;d!==i;++d)t[u+d]=t[c+d]}++a}}if(s>0){e[a]=e[s];for(let n=s*i,o=a*i,l=0;l!==i;++l)t[o+l]=t[n+l];++a}return a!==e.length?(this.times=vl(e,0,a),this.values=vl(t,0,a*i)):(this.times=e,this.values=t),this}clone(){let e=vl(this.times,0),t=vl(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};eo.prototype.TimeBufferType=Float32Array;eo.prototype.ValueBufferType=Float32Array;eo.prototype.DefaultInterpolation=gg;var h0=class extends eo{};h0.prototype.ValueTypeName="bool";h0.prototype.ValueBufferType=Array;h0.prototype.DefaultInterpolation=mg;h0.prototype.InterpolantFactoryMethodLinear=void 0;h0.prototype.InterpolantFactoryMethodSmooth=void 0;var pB=class extends eo{};pB.prototype.ValueTypeName="color";var Sg=class extends eo{};Sg.prototype.ValueTypeName="number";var _ae=class extends Gv{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,a=this.sampleValues,n=this.valueSize,o=(i-t)/(r-t),l=e*n;for(let h=l+n;l!==h;l+=4)wt.slerpFlat(s,0,a,l-n,a,l,o);return s}},mf=class extends eo{InterpolantFactoryMethodLinear(e){return new _ae(this.times,this.values,this.getValueSize(),e)}};mf.prototype.ValueTypeName="quaternion";mf.prototype.DefaultInterpolation=gg;mf.prototype.InterpolantFactoryMethodSmooth=void 0;var c0=class extends eo{};c0.prototype.ValueTypeName="string";c0.prototype.ValueBufferType=Array;c0.prototype.DefaultInterpolation=mg;c0.prototype.InterpolantFactoryMethodLinear=void 0;c0.prototype.InterpolantFactoryMethodSmooth=void 0;var Ag=class extends eo{};Ag.prototype.ValueTypeName="vector";var y6=class{constructor(e,t=-1,i,r=Dw){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ba(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,n=i.length;a!==n;++a)t.push(Aae(i[a]).scale(r));let s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(eo.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let s=t.length,a=[];for(let n=0;n<s;n++){let o=[],l=[];o.push((n+s-1)%s,n,(n+1)%s),l.push(0,1,0);let h=xae(o);o=YC(o,1,h),l=YC(l,1,h),!r&&o[0]===0&&(o.push(s),l.push(l[0])),a.push(new Sg(".morphTargetInfluences["+t[n].name+"]",o,l).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},s=/^([\w-]*?)([\d]+)$/;for(let n=0,o=e.length;n<o;n++){let l=e[n],h=l.name.match(s);if(h&&h.length>1){let c=h[1],u=r[c];u||(r[c]=u=[]),u.push(l)}}let a=[];for(let n in r)a.push(this.CreateFromMorphTargetSequence(n,r[n],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(h,c,u,d,f){if(u.length!==0){let p=[],m=[];dB(u,p,m,d),p.length!==0&&f.push(new h(c,p,m))}},r=[],s=e.name||"default",a=e.fps||30,n=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let h=0;h<l.length;h++){let c=l[h].keys;if(!(!c||c.length===0))if(c[0].morphTargets){let u={},d;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(let f=0;f<c[d].morphTargets.length;f++)u[c[d].morphTargets[f]]=-1;for(let f in u){let p=[],m=[];for(let g=0;g!==c[d].morphTargets.length;++g){let v=c[d];p.push(v.time),m.push(v.morphTarget===f?1:0)}r.push(new Sg(".morphTargetInfluence["+f+"]",p,m))}o=u.length*a}else{let u=".bones["+t[h].name+"]";i(Ag,u+".position",c,"pos",r),i(mf,u+".quaternion",c,"rot",r),i(Ag,u+".scale",c,"scl",r)}}return r.length===0?null:new this(s,o,r,n)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Sae(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sg;case"vector":case"vector2":case"vector3":case"vector4":return Ag;case"color":return pB;case"quaternion":return mf;case"bool":case"boolean":return h0;case"string":return c0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Aae(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=Sae(e.type);if(e.times===void 0){let i=[],r=[];dB(e.keys,i,r,"value"),e.times=i,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Mg={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},mB=class{constructor(e,t,i){let r=this,s=!1,a=0,n=0,o,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){n++,s===!1&&r.onStart!==void 0&&r.onStart(h,a,n),s=!0},this.itemEnd=function(h){a++,r.onProgress!==void 0&&r.onProgress(h,a,n),a===n&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return o?o(h):h},this.setURLModifier=function(h){return o=h,this},this.addHandler=function(h,c){return l.push(h,c),this},this.removeHandler=function(h){let c=l.indexOf(h);return c!==-1&&l.splice(c,2),this},this.getHandler=function(h){for(let c=0,u=l.length;c<u;c+=2){let d=l[c],f=l[c+1];if(d.global&&(d.lastIndex=0),d.test(h))return f}return null}}},Mae=new mB,gf=class{constructor(e){this.manager=e!==void 0?e:Mae,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},fo={},Cae=class extends Error{constructor(e,t){super(e),this.response=t}},x6=class extends gf{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=Mg.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(fo[e]!==void 0){fo[e].push({onLoad:t,onProgress:i,onError:r});return}fo[e]=[],fo[e].push({onLoad:t,onProgress:i,onError:r});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),n=this.mimeType,o=this.responseType;fetch(a).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let h=fo[e],c=l.body.getReader(),u=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=u?parseInt(u):0,f=d!==0,p=0,m=new ReadableStream({start(g){v();function v(){c.read().then(({done:y,value:x})=>{if(y)g.close();else{p+=x.byteLength;let w=new ProgressEvent("progress",{lengthComputable:f,loaded:p,total:d});for(let _=0,b=h.length;_<b;_++){let M=h[_];M.onProgress&&M.onProgress(w)}g.enqueue(x),v()}})}}});return new Response(m)}else throw new Cae(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(o){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(h=>new DOMParser().parseFromString(h,n));case"json":return l.json();default:if(n===void 0)return l.text();{let h=/charset="?([^;"\s]*)"?/i.exec(n),c=h&&h[1]?h[1].toLowerCase():void 0,u=new TextDecoder(c);return l.arrayBuffer().then(d=>u.decode(d))}}}).then(l=>{Mg.add(e,l);let h=fo[e];delete fo[e];for(let c=0,u=h.length;c<u;c++){let d=h[c];d.onLoad&&d.onLoad(l)}}).catch(l=>{let h=fo[e];if(h===void 0)throw this.manager.itemError(e),l;delete fo[e];for(let c=0,u=h.length;c<u;c++){let d=h[c];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},Eae=class extends gf{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=this,a=Mg.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;let n=Id("img");function o(){h(),Mg.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(c){h(),r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){n.removeEventListener("load",o,!1),n.removeEventListener("error",l,!1)}return n.addEventListener("load",o,!1),n.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(n.crossOrigin=this.crossOrigin),s.manager.itemStart(e),n.src=e,n}},Tae=class extends gf{constructor(e){super(e)}load(e,t,i,r){let s=new $i,a=new Eae(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(n){s.image=n,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}},vf=class extends yi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new pt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},Pae=class extends vf{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new pt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},Fy=new Fe,KC=new E,QC=new E,jw=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new re(512,512),this.map=null,this.mapPass=null,this.matrix=new Fe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lw,this._frameExtents=new re(1,1),this._viewportCount=1,this._viewports=[new Mt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;KC.setFromMatrixPosition(e.matrixWorld),t.position.copy(KC),QC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(QC),t.updateMatrixWorld(),Fy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Fy),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Fy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},Dae=class extends jw{constructor(){super(new z1(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=Dd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Iae=class extends vf{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yi.DEFAULT_UP),this.updateMatrix(),this.target=new yi,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new Dae}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},ZC=new Fe,V0=new E,Ny=new E,Oae=class extends jw{constructor(){super(new z1(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new re(4,2),this._viewportCount=6,this._viewports=[new Mt(2,1,1,1),new Mt(0,1,1,1),new Mt(3,1,1,1),new Mt(1,1,1,1),new Mt(3,0,1,1),new Mt(1,0,1,1)],this._cubeDirections=[new E(1,0,0),new E(-1,0,0),new E(0,0,1),new E(0,0,-1),new E(0,1,0),new E(0,-1,0)],this._cubeUps=[new E(0,1,0),new E(0,1,0),new E(0,1,0),new E(0,1,0),new E(0,0,1),new E(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),V0.setFromMatrixPosition(e.matrixWorld),i.position.copy(V0),Ny.copy(i.position),Ny.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Ny),i.updateMatrixWorld(),r.makeTranslation(-V0.x,-V0.y,-V0.z),ZC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ZC)}},Rae=class extends vf{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Oae}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Lae=class extends jw{constructor(){super(new Nv(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},zae=class extends vf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yi.DEFAULT_UP),this.updateMatrix(),this.target=new yi,this.shadow=new Lae}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},gB=class extends rt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},vB=class extends gf{constructor(e){super(e)}load(e,t,i,r){let s=this,a=new x6(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(n){try{t(s.parse(JSON.parse(n)))}catch(o){r?r(o):console.error(o),s.manager.itemError(e)}},i,r)}parse(e){let t={},i={};function r(u,d){if(t[d]!==void 0)return t[d];let f=u.interleavedBuffers[d],p=s(u,f.buffer),m=Gf(f.type,p),g=new Fse(m,f.stride);return g.uuid=f.uuid,t[d]=g,g}function s(u,d){if(i[d]!==void 0)return i[d];let f=u.arrayBuffers[d],p=new Uint32Array(f).buffer;return i[d]=p,p}let a=e.isInstancedBufferGeometry?new gB:new rt,n=e.data.index;if(n!==void 0){let u=Gf(n.type,n.array);a.setIndex(new mt(u,1))}let o=e.data.attributes;for(let u in o){let d=o[u],f;if(d.isInterleavedBufferAttribute){let p=r(e.data,d.data);f=new m6(p,d.itemSize,d.offset,d.normalized)}else{let p=Gf(d.type,d.array),m=d.isInstancedBufferAttribute?Od:mt;f=new m(p,d.itemSize,d.normalized)}d.name!==void 0&&(f.name=d.name),d.usage!==void 0&&f.setUsage(d.usage),d.updateRange!==void 0&&(f.updateRange.offset=d.updateRange.offset,f.updateRange.count=d.updateRange.count),a.setAttribute(u,f)}let l=e.data.morphAttributes;if(l)for(let u in l){let d=l[u],f=[];for(let p=0,m=d.length;p<m;p++){let g=d[p],v;if(g.isInterleavedBufferAttribute){let y=r(e.data,g.data);v=new m6(y,g.itemSize,g.offset,g.normalized)}else{let y=Gf(g.type,g.array);v=new mt(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),f.push(v)}a.morphAttributes[u]=f}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);let h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let u=0,d=h.length;u!==d;++u){let f=h[u];a.addGroup(f.start,f.count,f.materialIndex)}let c=e.data.boundingSphere;if(c!==void 0){let u=new E;c.center!==void 0&&u.fromArray(c.center),a.boundingSphere=new Cs(u,c.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}},Bae=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=JC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=JC();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function JC(){return(typeof performance>"u"?Date:performance).now()}var kae=class{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let i=this.buffer,r=this.valueSize,s=e*r+r,a=this.cumulativeWeight;if(a===0){for(let n=0;n!==r;++n)i[s+n]=i[n];a=t}else{a+=t;let n=t/a;this._mixBufferRegion(i,s,0,n,r)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,n=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){let o=t*this._origIndex;this._mixBufferRegion(i,r,o,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(i[o]!==i[o+t]){n.setValue(i,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){wt.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){let a=this._workIndex*s;wt.multiplyQuaternionsFlat(e,a,e,t,e,i),wt.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){let a=1-r;for(let n=0;n!==s;++n){let o=t+n;e[o]=e[o]*a+e[i+n]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){let n=t+a;e[n]=e[n]+e[i+a]*r}}},Gw="\\[\\]\\.:\\/",Fae=new RegExp("["+Gw+"]","g"),Hw="[^"+Gw+"]",Nae="[^"+Gw.replace("\\.","")+"]",Uae=/((?:WC+[\/:])*)/.source.replace("WC",Hw),Vae=/(WCOD+)?/.source.replace("WCOD",Nae),jae=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Hw),Gae=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Hw),Hae=new RegExp("^"+Uae+Vae+jae+Gae+"$"),Wae=["material","materials","bones","map"],qae=class{constructor(e,t,i){let r=i||Ei.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Ei=class{constructor(e,t,i){this.path=t,this.parsedPath=i||Ei.parseTrackName(t),this.node=Ei.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ei.Composite(e,t,i):new Ei(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Fae,"")}static parseTrackName(e){let t=Hae.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){let s=i.nodeName.substring(r+1);Wae.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){let i=function(s){for(let a=0;a<s.length;a++){let n=s[a];if(n.name===t||n.uuid===t)return n;let o=i(n.children);if(o)return o}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,i=t.objectName,r=t.propertyName,s=t.propertyIndex;if(e||(e=Ei.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let l=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===l){l=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let a=e[r];if(a===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}let n=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?n=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(n=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][n]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Ei.Composite=qae;Ei.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ei.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ei.prototype.GetterByBindingType=[Ei.prototype._getValue_direct,Ei.prototype._getValue_array,Ei.prototype._getValue_arrayElement,Ei.prototype._getValue_toArray];Ei.prototype.SetterByBindingTypeAndVersioning=[[Ei.prototype._setValue_direct,Ei.prototype._setValue_direct_setNeedsUpdate,Ei.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ei.prototype._setValue_array,Ei.prototype._setValue_array_setNeedsUpdate,Ei.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ei.prototype._setValue_arrayElement,Ei.prototype._setValue_arrayElement_setNeedsUpdate,Ei.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ei.prototype._setValue_fromArray,Ei.prototype._setValue_fromArray_setNeedsUpdate,Ei.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Xae=class{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;let s=t.tracks,a=s.length,n=new Array(a),o={endingStart:Z2,endingEnd:Z2};for(let l=0;l!==a;++l){let h=s[l].createInterpolant(null);n[l]=h,h.settings=o}this._interpolantSettings=o,this._interpolants=n,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Lz,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){let r=this._clip.duration,s=e._clip.duration,a=s/r,n=r/s;e.warp(1,a,t),this.warp(n,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){let r=this._mixer,s=r.time,a=this.timeScale,n=this._timeScaleInterpolant;n===null&&(n=r._lendControlInterpolant(),this._timeScaleInterpolant=n);let o=n.parameterPositions,l=n.sampleValues;return o[0]=s,o[1]=s+i,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}let s=this._startTime;if(s!==null){let o=(e-s)*i;o<0||i===0?t=0:(this._startTime=null,t=i*o)}t*=this._updateTimeScale(e);let a=this._updateTime(t),n=this._updateWeight(e);if(n>0){let o=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case _ee:for(let h=0,c=o.length;h!==c;++h)o[h].evaluate(a),l[h].accumulateAdditive(n);break;case Dw:default:for(let h=0,c=o.length;h!==c;++h)o[h].evaluate(a),l[h].accumulate(r,n)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,i=this.loop,r=this.time+e,s=this._loopCount,a=i===Pw;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===Rz){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){let n=Math.floor(r/t);r-=t*n,s+=Math.abs(n);let o=this.repetitions-s;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(o===1){let l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){let r=this._interpolantSettings;i?(r.endingStart=J2,r.endingEnd=J2):(e?r.endingStart=this.zeroSlopeAtStart?J2:Z2:r.endingStart=vg,t?r.endingEnd=this.zeroSlopeAtEnd?J2:Z2:r.endingEnd=vg)}_scheduleFading(e,t,i){let r=this._mixer,s=r.time,a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);let n=a.parameterPositions,o=a.sampleValues;return n[0]=s,o[0]=t,n[1]=s+e,o[1]=i,this}},Yae=new Float32Array(1),Kae=class extends C1{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,n=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName,h=l[o];h===void 0&&(h={},l[o]=h);for(let c=0;c!==s;++c){let u=r[c],d=u.name,f=h[d];if(f!==void 0)++f.referenceCount,a[c]=f;else{if(f=a[c],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,o,d));continue}let p=t&&t._propertyBindings[c].binding.parsedPath;f=new kae(Ei.create(i,d,p),u.ValueTypeName,u.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,o,d),a[c]=f}n[c].resultBuffer=f.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){let r=this._actions,s=this._actionsByClip,a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{let n=a.knownActions;e._byClipCacheIndex=n.length,n.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){let t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;let s=e._clip.uuid,a=this._actionsByClip,n=a[s],o=n.knownActions,l=o[o.length-1],h=e._byClipCacheIndex;l._byClipCacheIndex=h,o[h]=l,o.pop(),e._byClipCacheIndex=null;let c=n.actionByRoot,u=(e._localRoot||this._root).uuid;delete c[u],o.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){let t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){let t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){let r=this._bindingsByRootAndName,s=this._bindings,a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){let t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,n=a[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete n[s],Object.keys(n).length===0&&delete a[r]}_lendBinding(e){let t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){let t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return i===void 0&&(i=new fB(new Float32Array(2),new Float32Array(2),1,Yae),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){let t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){let r=t||this._root,s=r.uuid,a=typeof e=="string"?y6.findByName(r,e):e,n=a!==null?a.uuid:e,o=this._actionsByClip[n],l=null;if(i===void 0&&(a!==null?i=a.blendMode:i=Dw),o!==void 0){let c=o.actionByRoot[s];if(c!==void 0&&c.blendMode===i)return c;l=o.knownActions[0],a===null&&(a=l._clip)}if(a===null)return null;let h=new Xae(this,a,t,i);return this._bindAction(h,l),this._addInactiveAction(h,n,s),h}existingAction(e,t){let i=t||this._root,r=i.uuid,s=typeof e=="string"?y6.findByName(i,e):e,a=s?s.uuid:e,n=this._actionsByClip[a];return n!==void 0&&n.actionByRoot[r]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;let t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(r,e,s,a);let n=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)n[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){let a=s.knownActions;for(let n=0,o=a.length;n!==o;++n){let l=a[n];this._deactivateAction(l);let h=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=h,t[h]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}}uncacheRoot(e){let t=e.uuid,i=this._actionsByClip;for(let a in i){let n=i[a].actionByRoot,o=n[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}let r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(let a in s){let n=s[a];n.restoreOriginalState(),this._removeInactiveBinding(n)}}uncacheAction(e,t){let i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}},Re=class{constructor(e){this.value=e}clone(){return new Re(this.value.clone===void 0?this.value:this.value.clone())}},yB=class{constructor(e,t,i=0,r=1/0){this.ray=new n0(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ow,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return b6(e,this,i,t),i.sort($C),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)b6(e[r],this,i,t);return i.sort($C),i}};function $C(e,t){return e.distance-t.distance}function b6(e,t,i,r){if(e.layers.test(t.layers)&&e.raycast(t,i),r===!0){let s=e.children;for(let a=0,n=s.length;a<n;a++)b6(s[a],t,i,!0)}}var eE=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Er(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},tE=new re,Ww=class{constructor(e=new re(1/0,1/0),t=new re(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=tE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return tE.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},iE=new E,pp=new E,wa=class{constructor(t=new E,i=new E){this.start=t,this.end=i}set(t,i){return this.start.copy(t),this.end.copy(i),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,i){return this.delta(i).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,i){iE.subVectors(t,this.start),pp.subVectors(this.end,this.start);let r=pp.dot(pp),s=pp.dot(iE)/r;return i&&(s=Er(s,0,1)),s}closestPointToPoint(t,i,r){let s=this.closestPointToPointParameter(t,i);return this.delta(r).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},rE=new E,Qae=class extends yi{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let i=new rt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,n=1,o=32;a<o;a++,n++){let l=a/o*Math.PI*2,h=n/o*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Xe(r,3));let s=new Eh({fog:!1,toneMapped:!1});this.cone=new pf(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),rE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(rE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Zae=class extends zi{constructor(e,t,i){let r=new pu(t,4,2),s=new $o({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},sE=new E,mp=new E,aE=new E,Jae=class extends yi{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new rt;r.setAttribute("position",new Xe([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let s=new Eh({fog:!1,toneMapped:!1});this.lightPlane=new bg(r,s),this.add(this.lightPlane),r=new rt,r.setAttribute("position",new Xe([0,0,0,0,0,1],3)),this.targetLine=new bg(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sE.setFromMatrixPosition(this.light.matrixWorld),mp.setFromMatrixPosition(this.light.target.matrixWorld),aE.subVectors(mp,sE),this.lightPlane.lookAt(mp),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mp),this.targetLine.scale.z=aE.length()}},gp=new E,tr=new Ch,Cg=class extends pf{constructor(e){let t=new rt,i=new Eh({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};n("n1","n2"),n("n2","n4"),n("n4","n3"),n("n3","n1"),n("f1","f2"),n("f2","f4"),n("f4","f3"),n("f3","f1"),n("n1","f1"),n("n2","f2"),n("n3","f3"),n("n4","f4"),n("p","n1"),n("p","n2"),n("p","n3"),n("p","n4"),n("u1","u2"),n("u2","u3"),n("u3","u1"),n("c","t"),n("p","c"),n("cn1","cn2"),n("cn3","cn4"),n("cf1","cf2"),n("cf3","cf4");function n(f,p){o(f),o(p)}function o(f){r.push(0,0,0),s.push(0,0,0),a[f]===void 0&&(a[f]=[]),a[f].push(r.length/3-1)}t.setAttribute("position",new Xe(r,3)),t.setAttribute("color",new Xe(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new pt(16755200),h=new pt(16711680),c=new pt(43775),u=new pt(16777215),d=new pt(3355443);this.setColors(l,h,c,u,d)}setColors(e,t,i,r,s){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,i=1,r=1;tr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ur("c",t,e,tr,0,0,-1),ur("t",t,e,tr,0,0,1),ur("n1",t,e,tr,-i,-r,-1),ur("n2",t,e,tr,i,-r,-1),ur("n3",t,e,tr,-i,r,-1),ur("n4",t,e,tr,i,r,-1),ur("f1",t,e,tr,-i,-r,1),ur("f2",t,e,tr,i,-r,1),ur("f3",t,e,tr,-i,r,1),ur("f4",t,e,tr,i,r,1),ur("u1",t,e,tr,i*.7,r*1.1,-1),ur("u2",t,e,tr,-i*.7,r*1.1,-1),ur("u3",t,e,tr,0,r*2,-1),ur("cf1",t,e,tr,-i,0,1),ur("cf2",t,e,tr,i,0,1),ur("cf3",t,e,tr,0,-r,1),ur("cf4",t,e,tr,0,r,1),ur("cn1",t,e,tr,-i,0,-1),ur("cn2",t,e,tr,i,0,-1),ur("cn3",t,e,tr,0,-r,-1),ur("cn4",t,e,tr,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function ur(e,t,i,r,s,a,n){gp.set(s,a,n).unproject(r);let o=t[e];if(o!==void 0){let l=i.getAttribute("position");for(let h=0,c=o.length;h<c;h++)l.setXYZ(o[h],gp.x,gp.y,gp.z)}}var Eg=class extends pf{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new rt;s.setIndex(new mt(i,1)),s.setAttribute("position",new Xe(r,3)),super(s,new Eh({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},$ae=class extends pf{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new rt;r.setAttribute("position",new Xe(t,3)),r.setAttribute("color",new Xe(i,3));let s=new Eh({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){let r=new pt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Lo=ene();function ene(){let e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),r=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){let h=l-127;h<-27?(r[l]=0,r[l|256]=32768,s[l]=24,s[l|256]=24):h<-14?(r[l]=1024>>-h-14,r[l|256]=1024>>-h-14|32768,s[l]=-h-1,s[l|256]=-h-1):h<=15?(r[l]=h+15<<10,r[l|256]=h+15<<10|32768,s[l]=13,s[l|256]=13):h<128?(r[l]=31744,r[l|256]=64512,s[l]=24,s[l|256]=24):(r[l]=31744,r[l|256]=64512,s[l]=13,s[l|256]=13)}let a=new Uint32Array(2048),n=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let h=l<<13,c=0;for(;(h&8388608)===0;)h<<=1,c-=8388608;h&=-8388609,c+=947912704,a[l]=h|c}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)n[l]=l<<23;n[31]=1199570944,n[32]=2147483648;for(let l=33;l<63;++l)n[l]=2147483648+(l-32<<23);n[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:t,uint32View:i,baseTable:r,shiftTable:s,mantissaTable:a,exponentTable:n,offsetTable:o}}function tne(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Er(e,-65504,65504),Lo.floatView[0]=e;let t=Lo.uint32View[0],i=t>>23&511;return Lo.baseTable[i]+((t&8388607)>>Lo.shiftTable[i])}function ine(e){let t=e>>10;return Lo.uint32View[0]=Lo.mantissaTable[Lo.offsetTable[t]+(e&1023)]+Lo.exponentTable[t],Lo.floatView[0]}var rne=Object.freeze({__proto__:null,fromHalfFloat:ine,toHalfFloat:tne});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:a0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=a0);var j0=".",qw=Symbol("target"),xB=Symbol("unsubscribe");function w6(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function sne(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var Rn=Array.isArray;function Xw(e){return typeof e=="symbol"}var ane={after:(e,t)=>Rn(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>Rn(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=j0),Xw(t)?e+t.toString():e+t):e,initial:e=>{if(Rn(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(j0);return t===-1?"":e.slice(0,t)},last:e=>{if(Rn(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(j0);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(Rn(e))for(let i of e)t(i);else if(e!==""){let i=0,r=e.indexOf(j0);if(r===-1)t(e);else for(;i<e.length;)r===-1&&(r=e.length),t(e.slice(i,r)),i=r+1,r=e.indexOf(j0,i)}},get(e,t){return this.walk(t,i=>{e&&(e=e[i])}),e}},oa=ane;function nne(e){return typeof e=="object"&&typeof e.next=="function"}function one(e,t,i,r,s){let a=e.next;if(t.name==="entries")e.next=function(){let n=a.call(this);return n.done===!1&&(n.value[0]=s(n.value[0],t,n.value[0],r),n.value[1]=s(n.value[1],t,n.value[0],r)),n};else if(t.name==="values"){let n=i[qw].keys();e.next=function(){let o=a.call(this);return o.done===!1&&(o.value=s(o.value,t,n.next().value,r)),o}}else e.next=function(){let n=a.call(this);return n.done===!1&&(n.value=s(n.value,t,n.value,r)),n};return e}function nE(e,t,i){return e.isUnsubscribed||t.ignoreSymbols&&Xw(i)||t.ignoreUnderscores&&i.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(i)}var lne=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),i=t.get(e);return i===void 0&&(i={},t.set(e,i)),i}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let i=this._getProperties(e),r=i[t];return r===void 0&&(r=Reflect.getOwnPropertyDescriptor(e,t),i[t]=r),r}getProxy(e,t,i,r){if(this.isUnsubscribed)return e;let s=e[r],a=s||e;this._pathCache.set(a,t);let n=this._proxyCache.get(a);return n===void 0&&(n=s===void 0?new Proxy(e,i):e,this._proxyCache.set(a,n)),n}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,oa.get(t,this.getPath(e)))}defineProperty(e,t,i){return Reflect.defineProperty(e,t,i)?(this.isUnsubscribed||(this._getProperties(e)[t]=i),!0):!1}setProperty(e,t,i,r,s){if(!this._equals(s,i)||!(t in e)){let a=this._getOwnPropertyDescriptor(e,t);return a!==void 0&&"set"in a?Reflect.set(e,t,i,r):Reflect.set(e,t,i)}return!0}deleteProperty(e,t,i){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let r=this._getDescriptorCache().get(e);r&&(delete r[t],this._pathCache.delete(i))}return!0}return!1}isSameDescriptor(e,t,i){let r=this._getOwnPropertyDescriptor(t,i);return e!==void 0&&r!==void 0&&Object.is(e.value,r.value)&&(e.writable||!1)===(r.writable||!1)&&(e.enumerable||!1)===(r.enumerable||!1)&&(e.configurable||!1)===(r.configurable||!1)&&e.get===r.get&&e.set===r.set}isGetInvariant(e,t){let i=this._getOwnPropertyDescriptor(e,t);return i!==void 0&&i.configurable!==!0&&i.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function _6(e){return toString.call(e)==="[object Object]"}function vp(){return!0}function v2(e,t){return e.length!==t.length||e.some((i,r)=>t[r]!==i)}var bB=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),hne=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),wB={push:vp,pop:vp,shift:vp,unshift:vp,copyWithin:v2,reverse:v2,sort:v2,splice:v2,flat:v2,fill:v2},cne=new Set([...bB,...hne,...Object.keys(wB)]);function yp(e,t){if(e.size!==t.size)return!0;for(let i of e)if(!t.has(i))return!0;return!1}var _B=["keys","values","entries"],SB=new Set(["has","toString"]),AB={add:yp,clear:yp,delete:yp,forEach:yp},une=new Set([...SB,...Object.keys(AB),..._B]);function xp(e,t){if(e.size!==t.size)return!0;let i;for(let[r,s]of e)if(i=t.get(r),i!==s||i===void 0&&!t.has(r))return!0;return!1}var dne=new Set([...SB,"get"]),MB={set:xp,clear:xp,delete:xp,forEach:xp},fne=new Set([...dne,...Object.keys(MB),..._B]),yh=class{constructor(t,i,r,s){this._path=i,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=s,this._changes=s?[]:null,this.clone=i===void 0?t:this._shallowClone(t)}static isHandledMethod(t){return bB.has(t)}_shallowClone(t){let i=t;if(_6(t))i={...t};else if(Rn(t))i=[...t];else if(t instanceof Date)i=new Date(t);else if(t instanceof Set)i=new Set([...t].map(r=>this._shallowClone(r)));else if(t instanceof Map){i=new Map;for(let[r,s]of t.entries())i.set(r,this._shallowClone(s))}return this._clonedCache.add(i),i}preferredThisArg(t,i,r,s){return t?(Rn(s)?this._onIsChanged=wB[i]:s instanceof Set?this._onIsChanged=AB[i]:s instanceof Map&&(this._onIsChanged=MB[i]),s):r}update(t,i,r){let s=oa.after(t,this._path);if(i!=="length"){let a=this.clone;oa.walk(s,n=>{a&&a[n]&&(this._clonedCache.has(a[n])||(a[n]=this._shallowClone(a[n])),a=a[n])}),this._hasOnValidate&&this._changes.push({path:s,property:i,previous:r}),a&&a[i]&&(a[i]=r)}this._isChanged=!0}undo(t){let i;for(let r=this._changes.length-1;r!==-1;r--)i=this._changes[r],oa.get(t,i.path)[i.property]=i.previous}isChanged(t){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,t)}},oE=class extends yh{static isHandledMethod(e){return cne.has(e)}},pne=class extends yh{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},lE=class extends yh{static isHandledMethod(e){return une.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},hE=class extends yh{static isHandledMethod(e){return fne.has(e)}undo(e){for(let[t,i]of this.clone.entries())e.set(t,i);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},mne=class extends yh{constructor(e,t,i,r){super(void 0,t,i,r),this._arg1=i[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},gne=class extends yh{constructor(e,t,i,r){super(void 0,t,i,r),this._weakKey=i[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},N2=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return _6(e)||Rn(e)||w6(e)}static isHandledMethod(e,t){return _6(e)?yh.isHandledMethod(t):Rn(e)?oE.isHandledMethod(t):e instanceof Set?lE.isHandledMethod(t):e instanceof Map?hE.isHandledMethod(t):w6(e)}get isCloning(){return this._stack.length>0}start(e,t,i){let r=yh;Rn(e)?r=oE:e instanceof Date?r=pne:e instanceof Set?r=lE:e instanceof Map?r=hE:e instanceof WeakSet?r=mne:e instanceof WeakMap&&(r=gne),this._stack.push(new r(e,t,i,this._hasOnValidate))}update(e,t,i){this._stack[this._stack.length-1].update(e,t,i)}preferredThisArg(e,t,i){let{name:r}=e,s=N2.isHandledMethod(i,r);return this._stack[this._stack.length-1].preferredThisArg(s,r,t,i)}isChanged(e,t,i){return this._stack[this._stack.length-1].isChanged(e,t,i)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},vne={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},Yw=(e,t,i={})=>{i={...vne,...i};let r=Symbol("ProxyTarget"),{equals:s,isShallow:a,ignoreDetached:n,details:o}=i,l=new lne(s),h=typeof i.onValidate=="function",c=new N2(h),u=(y,x,w,_,b)=>!h||c.isCloning||i.onValidate(oa.concat(l.getPath(y),x),w,_,b)===!0,d=(y,x,w,_)=>{!nE(l,i,x)&&!(n&&l.isDetached(y,e))&&f(l.getPath(y),x,w,_)},f=(y,x,w,_,b)=>{c.isCloning?c.update(y,x,_):t(oa.concat(y,x),w,_,b)},p=y=>y&&(y[r]||y),m=(y,x,w,_)=>sne(y)||w==="constructor"||a&&!N2.isHandledMethod(x,w)||nE(l,i,w)||l.isGetInvariant(x,w)||n&&l.isDetached(x,e)?y:(_===void 0&&(_=l.getPath(x)),l.getProxy(y,oa.concat(_,w),g,r)),g={get(y,x,w){if(Xw(x)){if(x===r||x===qw)return y;if(x===xB&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let _=w6(y)?Reflect.get(y,x):Reflect.get(y,x,w);return m(_,y,x)},set(y,x,w,_){w=p(w);let b=y[r]||y,M=b[x];if(s(M,w)&&x in y)return!0;let S=u(y,x,w,M);return S&&l.setProperty(b,x,w,_,M)?(d(y,x,y[x],M),!0):!S},defineProperty(y,x,w){if(!l.isSameDescriptor(w,y,x)){let _=y[x];u(y,x,w.value,_)&&l.defineProperty(y,x,w,_)&&d(y,x,w.value,_)}return!0},deleteProperty(y,x){if(!Reflect.has(y,x))return!0;let w=Reflect.get(y,x),_=u(y,x,void 0,w);return _&&l.deleteProperty(y,x,w)?(d(y,x,void 0,w),!0):!_},apply(y,x,w){let _=x[r]||x;if(l.isUnsubscribed)return Reflect.apply(y,_,w);if((o===!1||o!==!0&&!o.includes(y.name))&&N2.isHandledType(_)){let b=oa.initial(l.getPath(y)),M=N2.isHandledMethod(_,y.name);c.start(_,b,w);let S=Reflect.apply(y,c.preferredThisArg(y,x,_),M?w.map(T=>p(T)):w),A=c.isChanged(_,s),C=c.stop();if(N2.isHandledType(S)&&M&&(x instanceof Map&&y.name==="get"&&(b=oa.concat(b,w[0])),S=l.getProxy(S,b,g)),A){let T={name:y.name,args:w,result:S},D=c.isCloning?oa.initial(b):b,R=c.isCloning?oa.last(b):"";u(oa.get(e,D),R,_,C,T)?f(D,R,_,C,T):c.undo(_)}return(x instanceof Map||x instanceof Set)&&nne(S)?one(S,y,x,b,m):S}return Reflect.apply(y,x,w)}},v=l.getProxy(e,i.pathAsArray?[]:"",g);return t=t.bind(v),h&&(i.onValidate=i.onValidate.bind(v)),v};Yw.target=e=>e&&e[qw]||e;Yw.unsubscribe=e=>e[xB]||e;var cE=Yw,yne=typeof global=="object"&&global&&global.Object===Object&&global,CB=yne,xne=typeof self=="object"&&self&&self.Object===Object&&self,bne=CB||xne||Function("return this")(),nn=bne,wne=nn.Symbol,Ca=wne,EB=Object.prototype,_ne=EB.hasOwnProperty,Sne=EB.toString,G0=Ca?Ca.toStringTag:void 0;function Ane(e){var t=_ne.call(e,G0),i=e[G0];try{e[G0]=void 0;var r=!0}catch{}var s=Sne.call(e);return r&&(t?e[G0]=i:delete e[G0]),s}var Mne=Ane,Cne=Object.prototype,Ene=Cne.toString;function Tne(e){return Ene.call(e)}var Pne=Tne,Dne="[object Null]",Ine="[object Undefined]",uE=Ca?Ca.toStringTag:void 0;function One(e){return e==null?e===void 0?Ine:Dne:uE&&uE in Object(e)?Mne(e):Pne(e)}var Wc=One;function Rne(e){return e!=null&&typeof e=="object"}var el=Rne,Lne="[object Symbol]";function zne(e){return typeof e=="symbol"||el(e)&&Wc(e)==Lne}var yf=zne;function Bne(e,t){for(var i=-1,r=e==null?0:e.length,s=Array(r);++i<r;)s[i]=t(e[i],i,e);return s}var TB=Bne,kne=Array.isArray,Qn=kne,dE=Ca?Ca.prototype:void 0,fE=dE?dE.toString:void 0;function PB(e){if(typeof e=="string")return e;if(Qn(e))return TB(e,PB)+"";if(yf(e))return fE?fE.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var DB=PB,Fne=/\s/;function Nne(e){for(var t=e.length;t--&&Fne.test(e.charAt(t)););return t}var IB=Nne,Une=/^\s+/;function Vne(e){return e&&e.slice(0,IB(e)+1).replace(Une,"")}var jne=Vne;function Gne(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var an=Gne,pE=NaN,Hne=/^[-+]0x[0-9a-f]+$/i,Wne=/^0b[01]+$/i,qne=/^0o[0-7]+$/i,Xne=parseInt;function Yne(e){if(typeof e=="number")return e;if(yf(e))return pE;if(an(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=an(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=jne(e);var i=Wne.test(e);return i||qne.test(e)?Xne(e.slice(2),i?2:8):Hne.test(e)?pE:+e}var mE=Yne;function Kne(e){return e}var OB=Kne,Qne="[object AsyncFunction]",Zne="[object Function]",Jne="[object GeneratorFunction]",$ne="[object Proxy]";function eoe(e){if(!an(e))return!1;var t=Wc(e);return t==Zne||t==Jne||t==Qne||t==$ne}var RB=eoe,toe=nn["__core-js_shared__"],Uy=toe,gE=function(){var e=/[^.]+$/.exec(Uy&&Uy.keys&&Uy.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ioe(e){return!!gE&&gE in e}var roe=ioe,soe=Function.prototype,aoe=soe.toString;function noe(e){if(e!=null){try{return aoe.call(e)}catch{}try{return e+""}catch{}}return""}var qc=noe,ooe=/[\\^$.*+?()[\]{}|]/g,loe=/^\[object .+?Constructor\]$/,hoe=Function.prototype,coe=Object.prototype,uoe=hoe.toString,doe=coe.hasOwnProperty,foe=RegExp("^"+uoe.call(doe).replace(ooe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function poe(e){if(!an(e)||roe(e))return!1;var t=RB(e)?foe:loe;return t.test(qc(e))}var moe=poe;function goe(e,t){return e?.[t]}var voe=goe;function yoe(e,t){var i=voe(e,t);return moe(i)?i:void 0}var Xc=yoe,xoe=Xc(nn,"WeakMap"),S6=xoe,vE=Object.create,boe=function(){function e(){}return function(t){if(!an(t))return{};if(vE)return vE(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),woe=boe;function _oe(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var Soe=_oe;function Aoe(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var Moe=Aoe,Coe=800,Eoe=16,Toe=Date.now;function Poe(e){var t=0,i=0;return function(){var r=Toe(),s=Eoe-(r-i);if(i=r,s>0){if(++t>=Coe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Doe=Poe;function Ioe(e){return function(){return e}}var Ooe=Ioe,Roe=function(){try{var e=Xc(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Tg=Roe,Loe=Tg?function(e,t){return Tg(e,"toString",{configurable:!0,enumerable:!1,value:Ooe(t),writable:!0})}:OB,zoe=Loe,Boe=Doe(zoe),koe=Boe;function Foe(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}var Noe=Foe;function Uoe(e,t,i,r){for(var s=e.length,a=i+(r?1:-1);r?a--:++a<s;)if(t(e[a],a,e))return a;return-1}var Voe=Uoe;function joe(e){return e!==e}var Goe=joe;function Hoe(e,t,i){for(var r=i-1,s=e.length;++r<s;)if(e[r]===t)return r;return-1}var Woe=Hoe;function qoe(e,t,i){return t===t?Woe(e,t,i):Voe(e,Goe,i)}var Xoe=qoe,Yoe=9007199254740991,Koe=/^(?:0|[1-9]\d*)$/;function Qoe(e,t){var i=typeof e;return t=t??Yoe,!!t&&(i=="number"||i!="symbol"&&Koe.test(e))&&e>-1&&e%1==0&&e<t}var Kw=Qoe;function Zoe(e,t,i){t=="__proto__"&&Tg?Tg(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}var LB=Zoe;function Joe(e,t){return e===t||e!==e&&t!==t}var Qw=Joe,$oe=Object.prototype,ele=$oe.hasOwnProperty;function tle(e,t,i){var r=e[t];(!(ele.call(e,t)&&Qw(r,i))||i===void 0&&!(t in e))&&LB(e,t,i)}var Zw=tle;function ile(e,t,i,r){var s=!i;i||(i={});for(var a=-1,n=t.length;++a<n;){var o=t[a],l=r?r(i[o],e[o],o,i,e):void 0;l===void 0&&(l=e[o]),s?LB(i,o,l):Zw(i,o,l)}return i}var xf=ile,yE=Math.max;function rle(e,t,i){return t=yE(t===void 0?e.length-1:t,0),function(){for(var r=arguments,s=-1,a=yE(r.length-t,0),n=Array(a);++s<a;)n[s]=r[t+s];s=-1;for(var o=Array(t+1);++s<t;)o[s]=r[s];return o[t]=i(n),Soe(e,this,o)}}var sle=rle,ale=9007199254740991;function nle(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ale}var Jw=nle;function ole(e){return e!=null&&Jw(e.length)&&!RB(e)}var zB=ole,lle=Object.prototype;function hle(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||lle;return e===i}var $w=hle;function cle(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var ule=cle,dle="[object Arguments]";function fle(e){return el(e)&&Wc(e)==dle}var xE=fle,BB=Object.prototype,ple=BB.hasOwnProperty,mle=BB.propertyIsEnumerable,gle=xE(function(){return arguments}())?xE:function(e){return el(e)&&ple.call(e,"callee")&&!mle.call(e,"callee")},e_=gle;function vle(){return!1}var yle=vle,kB=typeof js=="object"&&js&&!js.nodeType&&js,bE=kB&&typeof Gs=="object"&&Gs&&!Gs.nodeType&&Gs,xle=bE&&bE.exports===kB,wE=xle?nn.Buffer:void 0,ble=wE?wE.isBuffer:void 0,wle=ble||yle,Pg=wle,_le="[object Arguments]",Sle="[object Array]",Ale="[object Boolean]",Mle="[object Date]",Cle="[object Error]",Ele="[object Function]",Tle="[object Map]",Ple="[object Number]",Dle="[object Object]",Ile="[object RegExp]",Ole="[object Set]",Rle="[object String]",Lle="[object WeakMap]",zle="[object ArrayBuffer]",Ble="[object DataView]",kle="[object Float32Array]",Fle="[object Float64Array]",Nle="[object Int8Array]",Ule="[object Int16Array]",Vle="[object Int32Array]",jle="[object Uint8Array]",Gle="[object Uint8ClampedArray]",Hle="[object Uint16Array]",Wle="[object Uint32Array]",Hi={};Hi[kle]=Hi[Fle]=Hi[Nle]=Hi[Ule]=Hi[Vle]=Hi[jle]=Hi[Gle]=Hi[Hle]=Hi[Wle]=!0;Hi[_le]=Hi[Sle]=Hi[zle]=Hi[Ale]=Hi[Ble]=Hi[Mle]=Hi[Cle]=Hi[Ele]=Hi[Tle]=Hi[Ple]=Hi[Dle]=Hi[Ile]=Hi[Ole]=Hi[Rle]=Hi[Lle]=!1;function qle(e){return el(e)&&Jw(e.length)&&!!Hi[Wc(e)]}var Xle=qle;function Yle(e){return function(t){return e(t)}}var t_=Yle,FB=typeof js=="object"&&js&&!js.nodeType&&js,Q3=FB&&typeof Gs=="object"&&Gs&&!Gs.nodeType&&Gs,Kle=Q3&&Q3.exports===FB,Vy=Kle&&CB.process,Qle=function(){try{var e=Q3&&Q3.require&&Q3.require("util").types;return e||Vy&&Vy.binding&&Vy.binding("util")}catch{}}(),Uu=Qle,_E=Uu&&Uu.isTypedArray,Zle=_E?t_(_E):Xle,NB=Zle,Jle=Object.prototype,$le=Jle.hasOwnProperty;function ehe(e,t){var i=Qn(e),r=!i&&e_(e),s=!i&&!r&&Pg(e),a=!i&&!r&&!s&&NB(e),n=i||r||s||a,o=n?ule(e.length,String):[],l=o.length;for(var h in e)(t||$le.call(e,h))&&!(n&&(h=="length"||s&&(h=="offset"||h=="parent")||a&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Kw(h,l)))&&o.push(h);return o}var UB=ehe;function the(e,t){return function(i){return e(t(i))}}var VB=the,ihe=VB(Object.keys,Object),rhe=ihe,she=Object.prototype,ahe=she.hasOwnProperty;function nhe(e){if(!$w(e))return rhe(e);var t=[];for(var i in Object(e))ahe.call(e,i)&&i!="constructor"&&t.push(i);return t}var ohe=nhe;function lhe(e){return zB(e)?UB(e):ohe(e)}var i_=lhe;function hhe(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var che=hhe,uhe=Object.prototype,dhe=uhe.hasOwnProperty;function fhe(e){if(!an(e))return che(e);var t=$w(e),i=[];for(var r in e)r=="constructor"&&(t||!dhe.call(e,r))||i.push(r);return i}var phe=fhe;function mhe(e){return zB(e)?UB(e,!0):phe(e)}var hc=mhe,ghe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vhe=/^\w*$/;function yhe(e,t){if(Qn(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||yf(e)?!0:vhe.test(e)||!ghe.test(e)||t!=null&&e in Object(t)}var xhe=yhe,bhe=Xc(Object,"create"),Bd=bhe;function whe(){this.__data__=Bd?Bd(null):{},this.size=0}var _he=whe;function She(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ahe=She,Mhe="__lodash_hash_undefined__",Che=Object.prototype,Ehe=Che.hasOwnProperty;function The(e){var t=this.__data__;if(Bd){var i=t[e];return i===Mhe?void 0:i}return Ehe.call(t,e)?t[e]:void 0}var Phe=The,Dhe=Object.prototype,Ihe=Dhe.hasOwnProperty;function Ohe(e){var t=this.__data__;return Bd?t[e]!==void 0:Ihe.call(t,e)}var Rhe=Ohe,Lhe="__lodash_hash_undefined__";function zhe(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Bd&&t===void 0?Lhe:t,this}var Bhe=zhe;function u0(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}u0.prototype.clear=_he;u0.prototype.delete=Ahe;u0.prototype.get=Phe;u0.prototype.has=Rhe;u0.prototype.set=Bhe;var SE=u0;function khe(){this.__data__=[],this.size=0}var Fhe=khe;function Nhe(e,t){for(var i=e.length;i--;)if(Qw(e[i][0],t))return i;return-1}var Hv=Nhe,Uhe=Array.prototype,Vhe=Uhe.splice;function jhe(e){var t=this.__data__,i=Hv(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():Vhe.call(t,i,1),--this.size,!0}var Ghe=jhe;function Hhe(e){var t=this.__data__,i=Hv(t,e);return i<0?void 0:t[i][1]}var Whe=Hhe;function qhe(e){return Hv(this.__data__,e)>-1}var Xhe=qhe;function Yhe(e,t){var i=this.__data__,r=Hv(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}var Khe=Yhe;function d0(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}d0.prototype.clear=Fhe;d0.prototype.delete=Ghe;d0.prototype.get=Whe;d0.prototype.has=Xhe;d0.prototype.set=Khe;var Wv=d0,Qhe=Xc(nn,"Map"),kd=Qhe;function Zhe(){this.size=0,this.__data__={hash:new SE,map:new(kd||Wv),string:new SE}}var Jhe=Zhe;function $he(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var ece=$he;function tce(e,t){var i=e.__data__;return ece(t)?i[typeof t=="string"?"string":"hash"]:i.map}var qv=tce;function ice(e){var t=qv(this,e).delete(e);return this.size-=t?1:0,t}var rce=ice;function sce(e){return qv(this,e).get(e)}var ace=sce;function nce(e){return qv(this,e).has(e)}var oce=nce;function lce(e,t){var i=qv(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}var hce=lce;function f0(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}f0.prototype.clear=Jhe;f0.prototype.delete=rce;f0.prototype.get=ace;f0.prototype.has=oce;f0.prototype.set=hce;var Xv=f0,cce="Expected a function";function r_(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(cce);var i=function(){var r=arguments,s=t?t.apply(this,r):r[0],a=i.cache;if(a.has(s))return a.get(s);var n=e.apply(this,r);return i.cache=a.set(s,n)||a,n};return i.cache=new(r_.Cache||Xv),i}r_.Cache=Xv;var uce=r_,dce=500;function fce(e){var t=uce(e,function(r){return i.size===dce&&i.clear(),r}),i=t.cache;return t}var pce=fce,mce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gce=/\\(\\)?/g,vce=pce(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(mce,function(i,r,s,a){t.push(s?a.replace(gce,"$1"):r||i)}),t}),yce=vce;function xce(e){return e==null?"":DB(e)}var jB=xce;function bce(e,t){return Qn(e)?e:xhe(e,t)?[e]:yce(jB(e))}var p0=bce;function wce(e){if(typeof e=="string"||yf(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Yv=wce;function _ce(e,t){t=p0(t,e);for(var i=0,r=t.length;e!=null&&i<r;)e=e[Yv(t[i++])];return i&&i==r?e:void 0}var GB=_ce;function Sce(e,t){for(var i=-1,r=t.length,s=e.length;++i<r;)e[s+i]=t[i];return e}var s_=Sce,AE=Ca?Ca.isConcatSpreadable:void 0;function Ace(e){return Qn(e)||e_(e)||!!(AE&&e&&e[AE])}var Mce=Ace;function HB(e,t,i,r,s){var a=-1,n=e.length;for(i||(i=Mce),s||(s=[]);++a<n;){var o=e[a];t>0&&i(o)?t>1?HB(o,t-1,i,r,s):s_(s,o):r||(s[s.length]=o)}return s}var Cce=HB;function Ece(e){var t=e==null?0:e.length;return t?Cce(e,1):[]}var Tce=Ece;function Pce(e){return koe(sle(e,void 0,Tce),e+"")}var WB=Pce,Dce=VB(Object.getPrototypeOf,Object),a_=Dce,Ice="[object Object]",Oce=Function.prototype,Rce=Object.prototype,qB=Oce.toString,Lce=Rce.hasOwnProperty,zce=qB.call(Object);function Bce(e){if(!el(e)||Wc(e)!=Ice)return!1;var t=a_(e);if(t===null)return!0;var i=Lce.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&qB.call(i)==zce}var kce=Bce;function Fce(e,t,i){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),i=i>s?s:i,i<0&&(i+=s),s=t>i?0:i-t>>>0,t>>>=0;for(var a=Array(s);++r<s;)a[r]=e[r+t];return a}var XB=Fce;function Nce(e,t,i){var r=e.length;return i=i===void 0?r:i,!t&&i>=r?e:XB(e,t,i)}var Uce=Nce,Vce="\\ud800-\\udfff",jce="\\u0300-\\u036f",Gce="\\ufe20-\\ufe2f",Hce="\\u20d0-\\u20ff",Wce=jce+Gce+Hce,qce="\\ufe0e\\ufe0f",Xce="\\u200d",Yce=RegExp("["+Xce+Vce+Wce+qce+"]");function Kce(e){return Yce.test(e)}var Qce=Kce;function Zce(e){return e.split("")}var Jce=Zce,YB="\\ud800-\\udfff",$ce="\\u0300-\\u036f",e2e="\\ufe20-\\ufe2f",t2e="\\u20d0-\\u20ff",i2e=$ce+e2e+t2e,r2e="\\ufe0e\\ufe0f",s2e="["+YB+"]",A6="["+i2e+"]",M6="\\ud83c[\\udffb-\\udfff]",a2e="(?:"+A6+"|"+M6+")",KB="[^"+YB+"]",QB="(?:\\ud83c[\\udde6-\\uddff]){2}",ZB="[\\ud800-\\udbff][\\udc00-\\udfff]",n2e="\\u200d",JB=a2e+"?",$B="["+r2e+"]?",o2e="(?:"+n2e+"(?:"+[KB,QB,ZB].join("|")+")"+$B+JB+")*",l2e=$B+JB+o2e,h2e="(?:"+[KB+A6+"?",A6,QB,ZB,s2e].join("|")+")",c2e=RegExp(M6+"(?="+M6+")|"+h2e+l2e,"g");function u2e(e){return e.match(c2e)||[]}var d2e=u2e;function f2e(e){return Qce(e)?d2e(e):Jce(e)}var ME=f2e;function p2e(){this.__data__=new Wv,this.size=0}var m2e=p2e;function g2e(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}var v2e=g2e;function y2e(e){return this.__data__.get(e)}var x2e=y2e;function b2e(e){return this.__data__.has(e)}var w2e=b2e,_2e=200;function S2e(e,t){var i=this.__data__;if(i instanceof Wv){var r=i.__data__;if(!kd||r.length<_2e-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Xv(r)}return i.set(e,t),this.size=i.size,this}var A2e=S2e;function m0(e){var t=this.__data__=new Wv(e);this.size=t.size}m0.prototype.clear=m2e;m0.prototype.delete=v2e;m0.prototype.get=x2e;m0.prototype.has=w2e;m0.prototype.set=A2e;var Pm=m0;function M2e(e,t){return e&&xf(t,i_(t),e)}var C2e=M2e;function E2e(e,t){return e&&xf(t,hc(t),e)}var T2e=E2e,ek=typeof js=="object"&&js&&!js.nodeType&&js,CE=ek&&typeof Gs=="object"&&Gs&&!Gs.nodeType&&Gs,P2e=CE&&CE.exports===ek,EE=P2e?nn.Buffer:void 0,TE=EE?EE.allocUnsafe:void 0;function D2e(e,t){if(t)return e.slice();var i=e.length,r=TE?TE(i):new e.constructor(i);return e.copy(r),r}var I2e=D2e;function O2e(e,t){for(var i=-1,r=e==null?0:e.length,s=0,a=[];++i<r;){var n=e[i];t(n,i,e)&&(a[s++]=n)}return a}var R2e=O2e;function L2e(){return[]}var tk=L2e,z2e=Object.prototype,B2e=z2e.propertyIsEnumerable,PE=Object.getOwnPropertySymbols,k2e=PE?function(e){return e==null?[]:(e=Object(e),R2e(PE(e),function(t){return B2e.call(e,t)}))}:tk,n_=k2e;function F2e(e,t){return xf(e,n_(e),t)}var N2e=F2e,U2e=Object.getOwnPropertySymbols,V2e=U2e?function(e){for(var t=[];e;)s_(t,n_(e)),e=a_(e);return t}:tk,ik=V2e;function j2e(e,t){return xf(e,ik(e),t)}var G2e=j2e;function H2e(e,t,i){var r=t(e);return Qn(e)?r:s_(r,i(e))}var rk=H2e;function W2e(e){return rk(e,i_,n_)}var C6=W2e;function q2e(e){return rk(e,hc,ik)}var sk=q2e,X2e=Xc(nn,"DataView"),E6=X2e,Y2e=Xc(nn,"Promise"),T6=Y2e,K2e=Xc(nn,"Set"),P6=K2e,DE="[object Map]",Q2e="[object Object]",IE="[object Promise]",OE="[object Set]",RE="[object WeakMap]",LE="[object DataView]",Z2e=qc(E6),J2e=qc(kd),$2e=qc(T6),eue=qc(P6),tue=qc(S6),Qh=Wc;(E6&&Qh(new E6(new ArrayBuffer(1)))!=LE||kd&&Qh(new kd)!=DE||T6&&Qh(T6.resolve())!=IE||P6&&Qh(new P6)!=OE||S6&&Qh(new S6)!=RE)&&(Qh=function(e){var t=Wc(e),i=t==Q2e?e.constructor:void 0,r=i?qc(i):"";if(r)switch(r){case Z2e:return LE;case J2e:return DE;case $2e:return IE;case eue:return OE;case tue:return RE}return t});var Fd=Qh,iue=Object.prototype,rue=iue.hasOwnProperty;function sue(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&rue.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var aue=sue,nue=nn.Uint8Array,Dg=nue;function oue(e){var t=new e.constructor(e.byteLength);return new Dg(t).set(new Dg(e)),t}var o_=oue;function lue(e,t){var i=t?o_(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var hue=lue,cue=/\w*$/;function uue(e){var t=new e.constructor(e.source,cue.exec(e));return t.lastIndex=e.lastIndex,t}var due=uue,zE=Ca?Ca.prototype:void 0,BE=zE?zE.valueOf:void 0;function fue(e){return BE?Object(BE.call(e)):{}}var pue=fue;function mue(e,t){var i=t?o_(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var gue=mue,vue="[object Boolean]",yue="[object Date]",xue="[object Map]",bue="[object Number]",wue="[object RegExp]",_ue="[object Set]",Sue="[object String]",Aue="[object Symbol]",Mue="[object ArrayBuffer]",Cue="[object DataView]",Eue="[object Float32Array]",Tue="[object Float64Array]",Pue="[object Int8Array]",Due="[object Int16Array]",Iue="[object Int32Array]",Oue="[object Uint8Array]",Rue="[object Uint8ClampedArray]",Lue="[object Uint16Array]",zue="[object Uint32Array]";function Bue(e,t,i){var r=e.constructor;switch(t){case Mue:return o_(e);case vue:case yue:return new r(+e);case Cue:return hue(e,i);case Eue:case Tue:case Pue:case Due:case Iue:case Oue:case Rue:case Lue:case zue:return gue(e,i);case xue:return new r;case bue:case Sue:return new r(e);case wue:return due(e);case _ue:return new r;case Aue:return pue(e)}}var kue=Bue;function Fue(e){return typeof e.constructor=="function"&&!$w(e)?woe(a_(e)):{}}var Nue=Fue,Uue="[object Map]";function Vue(e){return el(e)&&Fd(e)==Uue}var jue=Vue,kE=Uu&&Uu.isMap,Gue=kE?t_(kE):jue,Hue=Gue,Wue="[object Set]";function que(e){return el(e)&&Fd(e)==Wue}var Xue=que,FE=Uu&&Uu.isSet,Yue=FE?t_(FE):Xue,Kue=Yue,Que=1,Zue=2,Jue=4,ak="[object Arguments]",$ue="[object Array]",e0e="[object Boolean]",t0e="[object Date]",i0e="[object Error]",nk="[object Function]",r0e="[object GeneratorFunction]",s0e="[object Map]",a0e="[object Number]",ok="[object Object]",n0e="[object RegExp]",o0e="[object Set]",l0e="[object String]",h0e="[object Symbol]",c0e="[object WeakMap]",u0e="[object ArrayBuffer]",d0e="[object DataView]",f0e="[object Float32Array]",p0e="[object Float64Array]",m0e="[object Int8Array]",g0e="[object Int16Array]",v0e="[object Int32Array]",y0e="[object Uint8Array]",x0e="[object Uint8ClampedArray]",b0e="[object Uint16Array]",w0e="[object Uint32Array]",ki={};ki[ak]=ki[$ue]=ki[u0e]=ki[d0e]=ki[e0e]=ki[t0e]=ki[f0e]=ki[p0e]=ki[m0e]=ki[g0e]=ki[v0e]=ki[s0e]=ki[a0e]=ki[ok]=ki[n0e]=ki[o0e]=ki[l0e]=ki[h0e]=ki[y0e]=ki[x0e]=ki[b0e]=ki[w0e]=!0;ki[i0e]=ki[nk]=ki[c0e]=!1;function Dm(e,t,i,r,s,a){var n,o=t&Que,l=t&Zue,h=t&Jue;if(i&&(n=s?i(e,r,s,a):i(e)),n!==void 0)return n;if(!an(e))return e;var c=Qn(e);if(c){if(n=aue(e),!o)return Moe(e,n)}else{var u=Fd(e),d=u==nk||u==r0e;if(Pg(e))return I2e(e,o);if(u==ok||u==ak||d&&!s){if(n=l||d?{}:Nue(e),!o)return l?G2e(e,T2e(n,e)):N2e(e,C2e(n,e))}else{if(!ki[u])return s?e:{};n=kue(e,u,o)}}a||(a=new Pm);var f=a.get(e);if(f)return f;a.set(e,n),Kue(e)?e.forEach(function(g){n.add(Dm(g,t,i,g,e,a))}):Hue(e)&&e.forEach(function(g,v){n.set(v,Dm(g,t,i,v,e,a))});var p=h?l?sk:C6:l?hc:i_,m=c?void 0:p(e);return Noe(m||e,function(g,v){m&&(v=g,g=e[v]),Zw(n,v,Dm(g,t,i,v,e,a))}),n}var lk=Dm,_0e=1,S0e=4;function A0e(e){return lk(e,_0e|S0e)}var Kv=A0e,M0e="__lodash_hash_undefined__";function C0e(e){return this.__data__.set(e,M0e),this}var E0e=C0e;function T0e(e){return this.__data__.has(e)}var P0e=T0e;function Ig(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Xv;++t<i;)this.add(e[t])}Ig.prototype.add=Ig.prototype.push=E0e;Ig.prototype.has=P0e;var D0e=Ig;function I0e(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}var O0e=I0e;function R0e(e,t){return e.has(t)}var L0e=R0e,z0e=1,B0e=2;function k0e(e,t,i,r,s,a){var n=i&z0e,o=e.length,l=t.length;if(o!=l&&!(n&&l>o))return!1;var h=a.get(e),c=a.get(t);if(h&&c)return h==t&&c==e;var u=-1,d=!0,f=i&B0e?new D0e:void 0;for(a.set(e,t),a.set(t,e);++u<o;){var p=e[u],m=t[u];if(r)var g=n?r(m,p,u,t,e,a):r(p,m,u,e,t,a);if(g!==void 0){if(g)continue;d=!1;break}if(f){if(!O0e(t,function(v,y){if(!L0e(f,y)&&(p===v||s(p,v,i,r,a)))return f.push(y)})){d=!1;break}}else if(!(p===m||s(p,m,i,r,a))){d=!1;break}}return a.delete(e),a.delete(t),d}var hk=k0e;function F0e(e){var t=-1,i=Array(e.size);return e.forEach(function(r,s){i[++t]=[s,r]}),i}var N0e=F0e;function U0e(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}var V0e=U0e,j0e=1,G0e=2,H0e="[object Boolean]",W0e="[object Date]",q0e="[object Error]",X0e="[object Map]",Y0e="[object Number]",K0e="[object RegExp]",Q0e="[object Set]",Z0e="[object String]",J0e="[object Symbol]",$0e="[object ArrayBuffer]",e3e="[object DataView]",NE=Ca?Ca.prototype:void 0,jy=NE?NE.valueOf:void 0;function t3e(e,t,i,r,s,a,n){switch(i){case e3e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case $0e:return!(e.byteLength!=t.byteLength||!a(new Dg(e),new Dg(t)));case H0e:case W0e:case Y0e:return Qw(+e,+t);case q0e:return e.name==t.name&&e.message==t.message;case K0e:case Z0e:return e==t+"";case X0e:var o=N0e;case Q0e:var l=r&j0e;if(o||(o=V0e),e.size!=t.size&&!l)return!1;var h=n.get(e);if(h)return h==t;r|=G0e,n.set(e,t);var c=hk(o(e),o(t),r,s,a,n);return n.delete(e),c;case J0e:if(jy)return jy.call(e)==jy.call(t)}return!1}var i3e=t3e,r3e=1,s3e=Object.prototype,a3e=s3e.hasOwnProperty;function n3e(e,t,i,r,s,a){var n=i&r3e,o=C6(e),l=o.length,h=C6(t),c=h.length;if(l!=c&&!n)return!1;for(var u=l;u--;){var d=o[u];if(!(n?d in t:a3e.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=n;++u<l;){d=o[u];var v=e[d],y=t[d];if(r)var x=n?r(y,v,d,t,e,a):r(v,y,d,e,t,a);if(!(x===void 0?v===y||s(v,y,i,r,a):x)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var w=e.constructor,_=t.constructor;w!=_&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof _=="function"&&_ instanceof _)&&(m=!1)}return a.delete(e),a.delete(t),m}var o3e=n3e,l3e=1,UE="[object Arguments]",VE="[object Array]",bp="[object Object]",h3e=Object.prototype,jE=h3e.hasOwnProperty;function c3e(e,t,i,r,s,a){var n=Qn(e),o=Qn(t),l=n?VE:Fd(e),h=o?VE:Fd(t);l=l==UE?bp:l,h=h==UE?bp:h;var c=l==bp,u=h==bp,d=l==h;if(d&&Pg(e)){if(!Pg(t))return!1;n=!0,c=!1}if(d&&!c)return a||(a=new Pm),n||NB(e)?hk(e,t,i,r,s,a):i3e(e,t,l,i,r,s,a);if(!(i&l3e)){var f=c&&jE.call(e,"__wrapped__"),p=u&&jE.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,g=p?t.value():t;return a||(a=new Pm),s(m,g,i,r,a)}}return d?(a||(a=new Pm),o3e(e,t,i,r,s,a)):!1}var u3e=c3e;function ck(e,t,i,r,s){return e===t?!0:e==null||t==null||!el(e)&&!el(t)?e!==e&&t!==t:u3e(e,t,i,r,ck,s)}var d3e=ck;function f3e(e,t){return e!=null&&t in Object(e)}var p3e=f3e;function m3e(e,t,i){t=p0(t,e);for(var r=-1,s=t.length,a=!1;++r<s;){var n=Yv(t[r]);if(!(a=e!=null&&i(e,n)))break;e=e[n]}return a||++r!=s?a:(s=e==null?0:e.length,!!s&&Jw(s)&&Kw(n,s)&&(Qn(e)||e_(e)))}var g3e=m3e;function v3e(e,t){return e!=null&&g3e(e,t,p3e)}var y3e=v3e,x3e=function(){return nn.Date.now()},Gy=x3e,b3e="Expected a function",w3e=Math.max,_3e=Math.min;function S3e(e,t,i){var r,s,a,n,o,l,h=0,c=!1,u=!1,d=!0;if(typeof e!="function")throw new TypeError(b3e);t=mE(t)||0,an(i)&&(c=!!i.leading,u="maxWait"in i,a=u?w3e(mE(i.maxWait)||0,t):a,d="trailing"in i?!!i.trailing:d);function f(b){var M=r,S=s;return r=s=void 0,h=b,n=e.apply(S,M),n}function p(b){return h=b,o=setTimeout(v,t),c?f(b):n}function m(b){var M=b-l,S=b-h,A=t-M;return u?_3e(A,a-S):A}function g(b){var M=b-l,S=b-h;return l===void 0||M>=t||M<0||u&&S>=a}function v(){var b=Gy();if(g(b))return y(b);o=setTimeout(v,m(b))}function y(b){return o=void 0,d&&r?f(b):(r=s=void 0,n)}function x(){o!==void 0&&clearTimeout(o),h=0,r=l=s=o=void 0}function w(){return o===void 0?n:y(Gy())}function _(){var b=Gy(),M=g(b);if(r=arguments,s=this,l=b,M){if(o===void 0)return p(l);if(u)return clearTimeout(o),o=setTimeout(v,t),f(l)}return o===void 0&&(o=setTimeout(v,t)),n}return _.cancel=x,_.flush=w,_}var Nd=S3e;function A3e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var M3e=A3e;function C3e(e,t){return e>t}var E3e=C3e;function T3e(e,t){return t.length<2?e:GB(e,XB(t,0,-1))}var P3e=T3e;function D3e(e,t){return d3e(e,t)}var l_=D3e;function I3e(e,t,i){for(var r=-1,s=e.length;++r<s;){var a=e[r],n=t(a);if(n!=null&&(o===void 0?n===n&&!yf(n):i(n,o)))var o=n,l=a}return l}var O3e=I3e;function R3e(e){return e&&e.length?O3e(e,OB,E3e):void 0}var L3e=R3e;function z3e(e,t){return t=p0(t,e),e=P3e(e,t),e==null||delete e[Yv(M3e(t))]}var B3e=z3e;function k3e(e){return kce(e)?void 0:e}var F3e=k3e,N3e=1,U3e=2,V3e=4,j3e=WB(function(e,t){var i={};if(e==null)return i;var r=!1;t=TB(t,function(a){return a=p0(a,e),r||(r=a.length>1),a}),xf(e,sk(e),i),r&&(i=lk(i,N3e|U3e|V3e,F3e));for(var s=t.length;s--;)B3e(i,t[s]);return i}),D6=j3e;function G3e(e,t,i,r){if(!an(e))return e;t=p0(t,e);for(var s=-1,a=t.length,n=a-1,o=e;o!=null&&++s<a;){var l=Yv(t[s]),h=i;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(s!=n){var c=o[l];h=r?r(c,l,o):void 0,h===void 0&&(h=an(c)?c:Kw(t[s+1])?[]:{})}Zw(o,l,h),o=o[l]}return e}var H3e=G3e;function W3e(e,t,i){for(var r=-1,s=t.length,a={};++r<s;){var n=t[r],o=GB(e,n);i(o,n)&&H3e(a,p0(n,e),o)}return a}var q3e=W3e;function X3e(e,t){return q3e(e,t,function(i,r){return y3e(e,r)})}var Y3e=X3e,K3e=WB(function(e,t){return e==null?{}:Y3e(e,t)}),Wn=K3e,Q3e="Expected a function";function Z3e(e,t,i){var r=!0,s=!0;if(typeof e!="function")throw new TypeError(Q3e);return an(i)&&(r="leading"in i?!!i.leading:r,s="trailing"in i?!!i.trailing:s),Nd(e,t,{leading:r,maxWait:t,trailing:s})}var J3e=Z3e;function $3e(e,t){for(var i=e.length;i--&&Xoe(t,e[i],0)>-1;);return i}var ede=$3e;function tde(e,t,i){if(e=jB(e),e&&(i||t===void 0))return e.slice(0,IB(e)+1);if(!e||!(t=DB(t)))return e;var r=ME(e),s=ede(r,ME(t))+1;return Uce(r,0,s).join("")}var ide=tde;function uk(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function Ea(e,t){return Object.setPrototypeOf(e,t),e}var rde=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),sde=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),ade=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||Qv&&"ontouchend"in document,nde=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,ode=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,lde=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},hde=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},cde=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},dk=rde();dk&&cde();var Qv=sde(),bf=ade(),ude=nde(),Vs=ode(),GE=lde(),dde=Number(hde());function fk(e){return Array.isArray(e)?e:[e]}function pk(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}function wp(e){return Qv?e.metaKey:e.ctrlKey}function fde(e){return e.wheelDeltaY===0||e.deltaY===0?Qv&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var xt=[],Og={},v3={},Im={};function mk(e){xt.includes(e)||xt.push(e)}function mu(e){delete Og[e.pointerId];for(let t=0;t<xt.length;t++)if(xt[t].pointerId===e.pointerId){xt.splice(t,1);break}}function pde(){xt.splice(0,xt.length)}function Rg(e){if(e.pointerType!=="touch")return;let t=Og[e.pointerId];t===void 0&&(t={x:0,y:0},Og[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function Hy(e){let t=e.pointerId===xt[0].pointerId?xt[1]:xt[0];return Og[t.pointerId]}function gk(e){v3[e.key]=!0,Im[e.key]=Im[e.key]===void 0?1:Im[e.key]+1}function vk(e){if(Qv&&v3.Meta)for(let t in v3)v3[t]=!1;else v3[e.key]=!1;Im={}}function mde(e){e.addEventListener("pointerdown",mk,!0),e.addEventListener("pointerdown",Rg,!0),e.addEventListener("pointermove",Rg,!0),e.addEventListener("pointerup",mu,!0),e.addEventListener("pointercancel",mu,!0),e.addEventListener("pointerleave",mu,!0),window.addEventListener("keydown",gk,!0),window.addEventListener("keyup",vk,!0)}function gde(e){e.removeEventListener("pointerdown",mk,!0),e.removeEventListener("pointerdown",Rg,!0),e.removeEventListener("pointermove",Rg,!0),e.removeEventListener("pointerup",mu,!0),e.removeEventListener("pointercancel",mu,!0),e.removeEventListener("pointerleave",mu,!0),window.removeEventListener("keydown",gk,!0),window.removeEventListener("keyup",vk,!0)}var yk,vde=new Promise(e=>{yk=e}),_p;function yde(e){if(_p)return _p;async function t(){let i=e??"https://unpkg.com/@splinetool/navmesh-wasm@1.10.37/build",r=Ah(()=>import("./navmesh-BFd9Mv4x.js"),[]),[s,a]=await Promise.all([r,fetch(`${i}/navmesh.wasm`).then(l=>l.arrayBuffer())]),n=s.default,o=await n({wasmBinary:a});yk(o)}return _p=t(),_p}var xk,xde=new Promise(e=>{xk=e}),Sp;function bde(){if(Sp)return Sp;async function e(){let t=await Ah(()=>import("./physics-BM4kW-A5.js"),[]);await t.init(),xk(t)}return Sp=e(),Sp}var ft=class{modifyById(e,t){let i=this;if(i[e]===void 0)throw new Error("not expected");{let r={...i,[e]:t};return Object.setPrototypeOf(r,ft.prototype),r}}add(e,t){return this.runOp({type:1,id:e,data:t})?.data??this}runOp(e){let t=this;if(e.type===1){let i=t[e.id],r;i===void 0?r={type:2,id:e.id}:r={type:1,id:e.id,data:i};let{id:s,data:a}=e,n={...t,[s]:a};return Object.setPrototypeOf(n,ft.prototype),{data:n,actual:e,reverse:r}}else if(e.type===2){let{id:i}=e,r=t[i];if(r===void 0)return null;{let s={...t};return Object.setPrototypeOf(s,ft.prototype),delete s[i],{data:s,actual:e,reverse:{type:1,id:i,data:r}}}}return null}};function h_(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let i of t){let r=e[i];r&&typeof r=="object"&&h_(r)}return Object.freeze(e)}function wde(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}var bk=class extends Error{};function Wy(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function ql(e,t,i){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let a=e;e=t,t=a}let r=[],s=1/(i+1);for(let a=0;a<i;a++){let n=e+(t-e)*(a+.75+Math.random()*.5)*s;r.push(n)}return r}function c_(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function _de(){return typeof process<"u"}function wk(e,t){for(let i of e)t(i.id,i.data)!==!0&&wk(i.children,t)}function _k(e,t){if(t(e.id,e.data)!==!0)for(let i of e.children)_k(i,t)}var b1=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,b1.prototype)}deepFreeze(){let e=0;for(;e<this.length;)h_(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let i of e.children)this.fillCaches0(i,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}data(e){return this.get(e)?.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){return e===null?this:this.get(e)?.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let i=this.get(e);i&&_k(i,t)}}traverse(e){wk(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this.parent(e),r=this.childrenArray(i),s=r.findIndex(n=>n.id===e);if(s<0)throw new Error("not expected");let a=r[s];return r=[...r],r[s]={...a,data:t},this.modifyArrayBy(i,r)}}modifyArrayBy(e,t){let i=e,r=t;for(;i!==null;){let a=r,n=i;if(i=this.parent(i),i===void 0)throw new Error;r=this.childrenArray(i);let o=r.findIndex(l=>l.id===n);if(o<0)throw new Error;r=[...r],r[o]={...r[o],children:a}}Object.setPrototypeOf(r,b1.prototype);let s=r;return s.fillCaches(),s}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let i of t)if(this.checkDuplicatedIdRec(i))return!0;return!1}addOp(e){let{parent:t,fi:i,id:r,data:s,children:a}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let n=t,o=this.childrenArray(n),l={fi:i,id:r,data:s,children:a};return o=[...o,l],o.sort((h,c)=>h.fi-c.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(n,o),actual:e,reverse:{type:8,id:r}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let i=this.parent(t);if(i===void 0)return null;let r=this.childrenArray(i),s=r.findIndex(n=>n.id===t);e.localIndex=s,r=[...r];let a=r.splice(s,1)[0];return{data:this.modifyArrayBy(i,r),actual:e,reverse:{type:7,...a,parent:i}}}}moveOp(e){let{parent:t,fi:i,id:r}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:r});if(t!==null){let u=t;for(;u!==null;){if(u===void 0)throw new Error;if(u===r)throw new bk("cyclic tree");u=this.parent(u)}}let s=this.parent(r);if(s===void 0)return null;let a=s,n=this.childrenArray(s),o=n.findIndex(u=>u.id===r);n=[...n];let l=n.splice(o,1)[0],h=this.modifyArrayBy(s,n);s=t,n=h.childrenArray(s);let c=l.fi;return l={...l,fi:i},n=[...n,l],n.sort((u,d)=>u.fi-d.fi),e.localIndex=n.indexOf(l),h=h.modifyArrayBy(s,n),{data:h,actual:e,reverse:{type:9,parent:a,fi:c,id:r}}}previous(e,t){if(t===null){let r=this.childrenArray(e);return r.length===0?null:r[r.length-1].id}let i=null;for(let r of this.childrenArray(e)){if(r.id===t)return i;i=r.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(s=>s.id===e)+1;if(r<i.length)return i[r].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(s=>s.id===e)-1;return r>=0?this.traverseSortPrevious(i[r].id):t}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push({...i,...r})}t.sort((i,r)=>wde(i.sortKey,r.sortKey));for(let i of t)delete i.sortKey;return t}getWithSortKey(e){var t=e;let i=[],r=this.get(t),s=r;if(r!==void 0){for(;t;)i.splice(0,0,r.fi),t=this.parent(t),t!==null&&(r=this.get(t));return{...s,sortKey:i}}}insertBeforeHelper(e,t,i){return this.insertAfterHelper(e,this.previous(e,t),i)}insertAfterHelper(e,t,i){let r=this.childrenArray(e);if(t===null){if(r.length===0)return ql(0,i,i);{let s=r[0].fi;return ql(s-i,s,i)}}else{let s=this.get(t);if(s===void 0||this.parent(t)!==e)throw new Error("illegal args");let a=r.find(n=>n.fi>s.fi);if(a===void 0){let n=r[r.length-1].fi;return ql(n,n+i,i)}else return ql(s.fi,a.fi,i)}}},Lg;(e=>{function t(i,r){if(r.type!==0)return null;if(Array.isArray(i)){let s=r.props,a={},n=[...i],o=!1;if(s)for(let l of Object.keys(s)){let h=parseInt(l);if(isNaN(h))throw new Error("wrong index");a[l]=n[h],n[h]=s[l],o=!0}return o?{data:n,actual:r,reverse:{type:0,props:a}}:null}else{let s=r.props,a={},n={...i},o=!1;if(s)for(let l of Object.keys(s)){a[l]=n[l];let h=s[l];h===void 0?delete n[l]:n[l]=h,o=!0}return o?{data:n,actual:r,reverse:{type:0,props:a}}:null}}e.runOp=t})(Lg||(Lg={}));var nt=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,nt.prototype)}deepFreeze(){let e=0;for(;e<this.length;)h_(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){return this.get(e)?.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this,r=i.findIndex(a=>a.id===e);if(r<0)throw new Error("not expected");let s=i[r];return i=[...i],i[r]={...s,data:t},this.modifyArrayBy(i)}}modifyArrayBy(e){Object.setPrototypeOf(e,nt.prototype);let t=e;return _de()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:i,data:r}=e,s=this,a={fi:t,id:i,data:r};return s=[...s,a],s.sort((n,o)=>n.fi-o.fi),e.localIndex=s.indexOf(a),{data:this.modifyArrayBy(s),actual:e,reverse:{type:5,id:i}}}deleteOp(e){let{id:t}=e,i=this,r=i.findIndex(a=>a.id===t);if(r===-1)return null;e.localIndex=r,i=[...i];let s=i.splice(r,1)[0];return{data:this.modifyArrayBy(i),actual:e,reverse:{type:4,...s}}}moveOp(e){let{fi:t,id:i}=e,r=this;r=[...r];let s=r.findIndex(o=>o.id===i);if(s===-1)return null;let a=r[s].fi,n={...r[s],fi:t};return r[s]=n,r.sort((o,l)=>o.fi-l.fi),e.localIndex=r.indexOf(n),{data:this.modifyArrayBy(r),actual:e,reverse:{type:6,fi:a,id:i}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let i of this){if(i.id===e)return t;t=i.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let i=this;if(e===null){if(i.length===0)return ql(0,t,t);{let r=i[0].fi;return ql(r-t,r,t)}}else{let r=this.get(e);if(r===void 0)throw new Error("illegal args");let s=i.find(a=>a.fi>r.fi);if(s===void 0){let a=i[i.length-1].fi;return ql(a,a+t,t)}else return ql(r.fi,s.fi,t)}}};function Vu(e){return e&&typeof e=="object"&&e instanceof Rr}var Rr=class{unusedFunOverridesTable(e){}runOp(e){let t=[],i=this,r=0,s={};for(;r<e.path.length;){if(t.push(i),i=i===void 0?void 0:i[e.path[r]],i!==void 0&&!Vu(i))return null;r+=1}i=i?Wy(i):new Rr;for(let[o,l]of Object.entries(e.props)){let h=i[o];s[o]=h,l===void 0?delete i[o]:i[o]=l}for(;r>0;){if(Object.keys(i).length===0){let o=t[r-1];o&&(i=Wy(o),delete i[e.path[r-1]])}else{let o=t[r-1];if(o){let l=Wy(o);l[e.path[r-1]]=i,i=l}else{let l=new Rr;l[e.path[r-1]]=i,i=l}}r-=1}let a=Object.setPrototypeOf(i,Rr.prototype),n={...e,props:s};return{data:a,actual:e,reverse:n}}},sh;(e=>{function t(s,a){return Ud(s,a)??s}e.apply=t;function i(s,a){return d_(s,a)}e.merge=i;function r(s,a){let n=0,o=a.path,l=s;for(;n<o.length&&l!==void 0;){if(l=jr.zoomOnce(l,o[n]),l===void 0)return a;if(!Vu(l))return;n+=1}if(l===void 0)return a;if(Vu(l))if(a.type===0){let h={...a.props};for(let c of Object.keys(l))delete h[c];return{...a,props:h}}else if(a.type===1||a.type===4||a.type===7){let h=u_([a],l);return h?(console.log(h),h):a}else return a}e.filterOp=r})(sh||(sh={}));function u_(e,t){if(t===void 0)return;let i=!1,r=e.map(s=>{let a=s.id,n=Ud(s.data,t[a]);if(i=i||n!==void 0,n===void 0&&(n=s.data),s.children){let o=u_(s.children,t);return o!==void 0?i=!0:o=s.children,{...s,id:a,data:n,children:o}}else return{...s,id:a,data:n}});if(i)return r}function Sde(e,t){if(t===void 0)return;let i=!1,r=e.map(s=>{let a=s.id,n=Ud(s.data,t[a]);return i=i||n!==void 0,n===void 0&&(n=s.data),{...s,id:a,data:n}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}function Ud(e,t){if(!Vu(t))return t;if(e instanceof b1){let i=u_(e,t);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof nt)return Sde(e,t);if(Array.isArray(e)){let i=!1,r=e.map((s,a)=>{let n=Ud(s,t[a]);return i=i||n!==void 0,n===void 0&&(n=s),n});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else{if(e instanceof Rr)return d_(e,t);if(e&&typeof e=="object"){let i={},r=!1;for(let[s,a]of Object.entries(e)){let n=Ud(a,t[s]);r=r||n!==void 0,n===void 0&&(n=a),i[s]=n}return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}}}}function d_(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!Vu(t))return t;if(!Vu(e))return sh.apply(e,t);let i=new Set;for(let s of Object.keys(e))i.add(s);for(let s of Object.keys(t))i.add(s);let r=new Rr;for(let s of i){let a=d_(e===void 0?void 0:e[s],t===void 0?void 0:t[s]);r[s]=a}return r}function Ade(e,t){let i={cur:[],result:[],len:0};return e=Vd(e,t,i)??e,[e,i.result]}function zg(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function Bg(e){e&&(e.len-=1)}function Mde(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function Sk(e,t,i){let r=!1,s=e.map(a=>{let n=a.id,o=t[n];if(o!==void 0&&typeof o=="string"&&(r=!0,n=o,i!==null))throw new Error("not supported");let l=Vd(a.data,t,zg(i,n));Bg(i),r=r||l!==void 0,l===void 0&&(l=a.data);let h=Sk(a.children,t,i);return h!==void 0?r=!0:h=a.children,{...a,id:n,data:l,children:h}});if(r)return s}function Cde(e,t,i){let r=!1,s=e.map(a=>{let n=a.id,o=t[n];if(o!==void 0&&typeof o=="string"&&(r=!0,n=o,i!==null))throw new Error("not supported");let l=Vd(a.data,t,zg(i,n));return Bg(i),r=r||l!==void 0,l===void 0&&(l=a.data),{...a,id:n,data:l}});if(r)return Object.setPrototypeOf(s,Object.getPrototypeOf(e)),s}function Vd(e,t,i){if(e instanceof b1){let r=Sk(e,t,i);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof nt)return Cde(e,t,i);if(Array.isArray(e)){let r=!1,s=e.map((a,n)=>{let o=Vd(a,t,zg(i,n));return Bg(i),r=r||o!==void 0,o===void 0&&(o=a),o});return r?(Object.setPrototypeOf(s,Object.getPrototypeOf(e)),s):void 0}else if(e&&typeof e=="object"&&!c_(e)){let r={},s=!1;for(let[a,n]of Object.entries(e))if(a!=="name"&&a!=="variableId"){let o=t[a];if(typeof o=="string"){if(i!==null)throw new Error("not supported");s=!0,a=o}let l=Vd(n,t,zg(i,a));Bg(i),s=s||l!==void 0,l===void 0&&(l=n),r[a]=l}else r[a]=n;return s?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else if(typeof e=="string"){let r=t[e];return r!==void 0&&Mde(i),r}else return}}var kg;(e=>{function t(i,r){let s=jr.zoom(r,i.path);if(typeof s=="object"){let a={};for(let n of Object.keys(i.props))a[n]=s[n];return{...i,props:a}}else return{...i,props:{}}}e.replaceProps=t})(kg||(kg={}));var t1;(e=>{function t(l,h){return{...l,path:l.path.slice(h)}}e.drop=t;function i(l,h){return r(l,h)?.data??l}e.applySimple=i;function r(l,h){let c=h.path;for(var u=[];;){let d;if(l instanceof Rr&&h.type===0&&(d=l.runOp({...h,path:c.slice(u.length)}),d===null&&(d=void 0)),d===void 0&&u.length===c.length&&(l instanceof b1||l instanceof nt||l instanceof ft?d=l.runOp(h):d=Lg.runOp(l,h)),d!==void 0)if(d!==null){let m=d.data;for(let g=u.length-1;g>=0;g--){let v=c[g],y=u[g];if(y instanceof b1){if(typeof v=="number")throw new Error("illegal arg");m=y.modifyById(v,m)}else if(y instanceof nt){if(typeof v=="number")throw new Error("illegal arg");m=y.modifyById(v,m)}else if(y instanceof ft){if(typeof v=="number")throw new Error("illegal arg");m=y.modifyById(v,m)}else if(y instanceof Rr){let x={...y,[v]:m};m=Object.setPrototypeOf(x,Rr.prototype)}else if(typeof y=="object")if(Array.isArray(y)){if(typeof v=="string"&&(v=parseInt(v),isNaN(v)))throw new Error("Invalid path");let x=m;m=[...y],m[v]=x}else m={...y,[v]:m};else return null}return{data:m,actual:{...d.actual,path:c},reverse:{...d.reverse,path:c}}}else return null;let f=c[u.length],p;if(l instanceof b1){if(typeof f=="number")throw new Error("");p=l.get(f)?.data}else if(l instanceof nt){if(typeof f=="number")throw new Error("");p=l.get(f)?.data}else l!==null&&(p=l[f]);if(p!==void 0)u.push(l),l=p;else return null}}e.apply=r;function s(l,h){for(let c=0;c<l.length&&c<h.length;c++)if(l[c]!==h[c])return!0;return!1}e.pathDisjoint=s;function a(l,h){if(l.length!==h.length)return!1;for(let c=0;c<l.length;c++)if(l[c]!==h[c])return!1;return!0}e.pathEq=a;function n(l,h){return s(l.path,h.path)}e.commutative=n;function o(l,h){return l.type===0&&h.type===0&&a(l.path,h.path)?Object.keys(l.props).every(c=>h.props[c]!==void 0):!1}e.subsumed=o})(t1||(t1={}));var I6;(e=>{function t(){return[]}e.empty=t;function i(h,c){let u=[];for(let d of h){let[f,...p]=d.path;f===c&&u.push({...d,path:p})}return u}e.removePrefix=i;function r(h,c){return h.map(u=>({...u,path:[c,...u.path]}))}e.addPrefix=r;function s(h,c){return[...h,...c]}e.concat=s;function a(h,c){return[...h.filter(u=>!c.some(d=>t1.subsumed(u,d))),...c]}e.compress=a;function n(h,c){return h.every(u=>c.every(d=>t1.commutative(u,d)))}e.commutative=n;function o(h,c){for(let u of c){let d=l(h,u);d!==null&&(h=d.data)}return h}e.applyAll=o;function l(h,c){var u=h;let d=[],f=[];for(let p of c)try{if(p.type===3||p.type===5&&p.path[p.path.length-1]==="variables"){let m,g,v;if(p.type===3?(m=jr.zoom(u,[...p.path,p.id]),v=t1.apply(u,{...p,type:2})):(m=jr.zoom(u,[...p.path,p.id,"value"]),v=t1.apply(u,p)),v!==null){u=v.data;let[y,x]=Ade(u,{[p.id]:m});u=y;for(let w=0;w<x.length;w++){let _=x[w],b=_.pop();if(typeof b=="number"){let M=[b];for(let A=w+1;A<x.length;A++){let C=x[A],T=C[C.length-1];if(typeof T=="number"&&jr.equal(_,C.slice(0,C.length-1)))M.push(T),x.splice(A,1);else break}let S=jr.zoom(u,_);g=S.map((A,C)=>M.includes(C)?p.id:A),m=S,b=_.pop()}else{if(b==="alphaOverride"||b==="alpha"){m/=100;let M=m,S=jr.zoom(u,_.slice(0,_.length-2)),A=S.layers.map(C=>C.id===_[_.length-1]?{...C,data:{...C.data,[b]:M}}:C);Object.setPrototypeOf(A,Object.getPrototypeOf(S.layers)),S.layers=A}g=p.id}d.push({type:0,path:_,props:{[b]:m}}),f.push({type:0,path:_,props:{[b]:g}})}f.push(v.reverse),d.push(v.actual)}}else{let m=t1.apply(u,p);m!==null&&(d.push(m.actual),u=m.data,f.push(m.reverse))}}catch(m){if(m instanceof bk)return null;throw m}return{data:u,actual:d,reverse:f.reverse()}}e.apply=l})(I6||(I6={}));var Ak=Symbol(),Ede=Symbol(),Zv=Symbol(),wf=class{reportOp(e,t,i=[]){let r=this;if(t===null)return;r._current=t.data;let s=i;for(;!(r instanceof Ck);){let a=r._path,n=r._current;if(a!==""&&s.splice(0,0,a),r=r._parent,r===null)return;r.update(a,n)}r.push(s,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let i=t[Zv];i&&i(),delete this._children[e]}}}},Tde=class extends wf{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,Lg.runOp(this._current,e),e.path)}},Pde=class extends wf{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,ft.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},Mk={get(e,t){if(t===Zv)return()=>{e._parent=null};if(t===Ak)return e._current;if(t===Ede)return e;let{_current:i,_children:r}=e;if(t==="push"&&Array.isArray(i))throw new Error("not supported to expand array");let s=r===void 0?void 0:r[t];if(s!==void 0)return s;let a=i[t],n=Jv(e,t,a);return n!==a?(r===void 0&&(r={},e._children=r),r[t]=n,n):a},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let i=e._current,r=Reflect.getOwnPropertyDescriptor(i,t);return r&&{writable:!0,configurable:!0,enumerable:r.enumerable,value:i[t]}}},Dde={...Mk,set(e,t,i){let r={type:0,props:{[t]:gr(i)??i}};return e.deleteChildren(t),e.runOp(r),!0},deleteProperty(e,t){let i={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(i),!0}},Ide={...Mk,set(e,t,i){return i===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:i})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},f_=class extends wf{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[Zv]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,i)=>{e(t,this.data(t))})}data(e){let{_current:t,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let s=t.get(e)?.data,a=Jv(this,e,s);return a!==s?(i===void 0&&(i={},this._children=i),i[e]=a,a):s}add(e,t,i,r,s){this.runOp({type:7,parent:e,fi:t,id:i,data:r,children:s})}move(e,t,i){this.runOp({type:9,parent:e,fi:t,id:i})}insertAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let s=0;s<i.length;s++){let a=i[s];this.add(e,r[s],a.id,a.data,a.children)}}insertBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let s=0;s<i.length;s++){let a=i[s];this.add(e,r[s],a.id,a.data,a.children)}}moveAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let s=0;s<i.length;s++){let a=i[s];this.move(e,r[s],a)}}moveBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let s=0;s<i.length;s++){let a=i[s];this.move(e,r[s],a)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},p_=class extends wf{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[Zv]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id,s=this._current[i].fi;e(this.data(this._current[i].id),r,s)}}find(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id;if(e(this.data(r),r))return this.get(r)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){let{_current:t,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let s=t.get(e)?.data,a=Jv(this,e,s);return a!==s?(i===void 0&&(i={},this._children=i),i[e]=a,a):s}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,i){this.runOp({type:4,fi:e,id:t,data:i})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.add(i[r],s.id,s.data)}}insertBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.add(i[r],s.id,s.data)}}moveAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.move(i[r],s)}}moveBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let s=t[r];this.move(i[r],s)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function qy(e,t,i){if(e.length>0){let r=e[e.length-1];if(r.type===0&&t.type===0&&jr.equal(r.path,i)){Object.assign(r.props,t.props);return}}e.push({...t,path:i})}var Ck=class extends wf{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,i,r){qy(this.ts,t,e),qy(this.actual,i,e),qy(this.reverse,r,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function Jv(e,t,i){return i instanceof b1?new f_(e,t,i):i instanceof nt?new p_(e,t,i):i instanceof ft?new Proxy(new Pde(e,t,i),Ide):i!==null&&typeof i=="object"?c_(i)?i:new Proxy(new Tde(e,t,i),Dde):i}function Ek(e){let t=new Ck(e);return[Jv(t,"",e),t]}function jd(e,t){let[i,r]=Ek(e);return t(i),r.result()}function gr(e){return e instanceof f_||e instanceof p_?e._current:e!==null&&typeof e=="object"?e[Ak]:e}var jr;(e=>{function t(a,n){if(n.length===a.length)for(var o=0;o<a.length;){if(a[o]!==n[o])return!1;o+=1}else return!1;return!0}e.equal=t;function i(a,n,o){let l=s(o,a);if(l!==void 0&&typeof l=="object"&&l!==null){let h={...n};return Object.keys(l).forEach(c=>{delete h[c]}),h}else return n}e.removeOverridden=i;function r(a,n){if((a instanceof b1||a instanceof f_)&&typeof n=="string"||(a instanceof nt||a instanceof p_)&&typeof n=="string")return a.data(n);if(typeof n=="number"&&Array.isArray(a)||typeof n=="string"&&typeof a=="object"&&a!==null)return a[n]}e.zoomOnce=r;function s(a,n,o=0){for(;o<n.length&&a!==void 0;)a=r(a,n[o]),o+=1;return a}e.zoom=s})(jr||(jr={}));function Ode(e,t){let i=[];if(t.length===e.length)for(var r=0;r<e.length;){if(t[r]==="*")i.push(e[r]);else if(e[r]!==t[r])return null;r+=1}else return null;return i}function Pi(e,t){let i=[];if(t.length<=e.length)for(var r=0;r<t.length;){if(t[r]==="*")i.push(e[r]);else if(e[r]!==t[r])return null;r+=1}else return null;return i}var Tk=class{},HE=class extends Tk{constructor(e){super(),this.id=e}},WE=class extends Tk{constructor(e){super(),this.data=e}},O6;try{O6=new TextDecoder}catch{}var $e,ah,we=0,ps={},hi,Xl,la=0,Ln=0,ks,Go,as=[],mi,qE={useRecords:!1,mapsAsObjects:!0},Pk=class{},Dk=new Pk;Dk.name="MessagePack 0xC1";var ju=!1,Fg=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if($e)return Bk(()=>(L6(),this?this.unpack(e,t):Fg.prototype.unpack.call(qE,e,t)));ah=t>-1?t:e.length,we=0,Ln=0,Xl=null,ks=null,$e=e;try{mi=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw $e=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof Fg){if(ps=this,this.structures)return hi=this.structures,Ap();(!hi||hi.length>0)&&(hi=[])}else ps=qE,(!hi||hi.length>0)&&(hi=[]);return Ap()}unpackMultiple(e,t){let i,r=0;try{ju=!0;let s=e.length,a=this?this.unpack(e,s):e4.unpack(e,s);if(t){for(t(a);we<s;)if(r=we,t(Ap())===!1)return}else{for(i=[a];we<s;)r=we,i.push(Ap());return i}}catch(s){throw s.lastPosition=r,s.values=i,s}finally{ju=!1,L6()}}_mergeStructures(e,t){e=e||[];for(let i=0,r=e.length;i<r;i++){let s=e[i];s&&(s.isShared=!0,i>=32&&(s.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in t||[])if(i>=0){let r=e[i],s=t[i];s&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[i]=r),e[i]=s)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Ap(){try{if(!ps.trusted&&!ju){let t=hi.sharedLength||0;t<hi.length&&(hi.length=t)}let e=ar();if(we==ah)hi.restoreStructures&&XE(),hi=null,$e=null,Go&&(Go=null);else if(we>ah){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!ju)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw hi.restoreStructures&&XE(),L6(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function XE(){for(let e in hi.restoreStructures)hi[e]=hi.restoreStructures[e];hi.restoreStructures=null}function ar(){let e=$e[we++];if(e<160)if(e<128){if(e<64)return e;{let t=hi[e&63]||ps.getStructures&&Ik()[e&63];return t?(t.read||(t.read=m_(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,ps.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[Rk()]=ar();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(ar(),ar());return t}else{e-=144;let t=new Array(e);for(let i=0;i<e;i++)t[i]=ar();return t}else if(e<192){let t=e-160;if(Ln>=we)return Xl.slice(we-la,(we+=t)-la);if(Ln==0&&ah<140){let i=t<16?g_(t):Ok(t);if(i!=null)return i}return R6(t)}else{let t;switch(e){case 192:return null;case 193:return ks?(t=ar(),t>0?ks[1].slice(ks.position1,ks.position1+=t):ks[0].slice(ks.position0,ks.position0-=t)):Dk;case 194:return!1;case 195:return!0;case 196:return Xy($e[we++]);case 197:return t=mi.getUint16(we),we+=2,Xy(t);case 198:return t=mi.getUint32(we),we+=4,Xy(t);case 199:return Nh($e[we++]);case 200:return t=mi.getUint16(we),we+=2,Nh(t);case 201:return t=mi.getUint32(we),we+=4,Nh(t);case 202:if(t=mi.getFloat32(we),ps.useFloat32>2){let i=v_[($e[we]&127)<<1|$e[we+1]>>7];return we+=4,(i*t+(t>0?.5:-.5)>>0)/i}return we+=4,t;case 203:return t=mi.getFloat64(we),we+=8,t;case 204:return $e[we++];case 205:return t=mi.getUint16(we),we+=2,t;case 206:return t=mi.getUint32(we),we+=4,t;case 207:return ps.int64AsNumber?(t=mi.getUint32(we)*4294967296,t+=mi.getUint32(we+4)):t=mi.getBigUint64(we),we+=8,t;case 208:return mi.getInt8(we++);case 209:return t=mi.getInt16(we),we+=2,t;case 210:return t=mi.getInt32(we),we+=4,t;case 211:return ps.int64AsNumber?(t=mi.getInt32(we)*4294967296,t+=mi.getUint32(we+4)):t=mi.getBigInt64(we),we+=8,t;case 212:if(t=$e[we++],t==114)return JE($e[we++]&63);{let i=as[t];if(i)return i.read?(we++,i.read(ar())):i.noBuffer?(we++,i()):i($e.subarray(we,++we));throw new Error("Unknown extension "+t)}case 213:return t=$e[we],t==114?(we++,JE($e[we++]&63,$e[we++])):Nh(2);case 214:return Nh(4);case 215:return Nh(8);case 216:return Nh(16);case 217:return t=$e[we++],Ln>=we?Xl.slice(we-la,(we+=t)-la):Lde(t);case 218:return t=mi.getUint16(we),we+=2,Ln>=we?Xl.slice(we-la,(we+=t)-la):zde(t);case 219:return t=mi.getUint32(we),we+=4,Ln>=we?Xl.slice(we-la,(we+=t)-la):Bde(t);case 220:return t=mi.getUint16(we),we+=2,KE(t);case 221:return t=mi.getUint32(we),we+=4,KE(t);case 222:return t=mi.getUint16(we),we+=2,QE(t);case 223:return t=mi.getUint32(we),we+=4,QE(t);default:if(e>=224)return e-256;if(e===void 0){let i=new Error("Unexpected end of MessagePack data");throw i.incomplete=!0,i}throw new Error("Unknown MessagePack token "+e)}}}var Rde=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function m_(e,t){function i(){if(i.count++>2){let s=e.read=new Function("r","return function(){return {"+e.map(a=>Rde.test(a)?a+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}}")(ar);return e.highByte===0&&(e.read=YE(t,e.read)),s()}let r={};for(let s=0,a=e.length;s<a;s++){let n=e[s];r[n]=ar()}return r}return i.count=0,e.highByte===0?YE(t,i):i}var YE=(e,t)=>function(){let i=$e[we++];if(i===0)return t();let r=e<32?-(e+(i<<5)):e+(i<<5),s=hi[r]||Ik()[r];if(!s)throw new Error("Record id is not defined for "+r);return s.read||(s.read=m_(s,e)),s.read()};function Ik(){let e=Bk(()=>($e=null,ps.getStructures()));return hi=ps._mergeStructures(e,hi)}var R6=$v,Lde=$v,zde=$v,Bde=$v;function $v(e){let t;if(e<16&&(t=g_(e)))return t;if(e>64&&O6)return O6.decode($e.subarray(we,we+=e));let i=we+e,r=[];for(t="";we<i;){let s=$e[we++];if((s&128)===0)r.push(s);else if((s&224)===192){let a=$e[we++]&63;r.push((s&31)<<6|a)}else if((s&240)===224){let a=$e[we++]&63,n=$e[we++]&63;r.push((s&31)<<12|a<<6|n)}else if((s&248)===240){let a=$e[we++]&63,n=$e[we++]&63,o=$e[we++]&63,l=(s&7)<<18|a<<12|n<<6|o;l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|l&1023),r.push(l)}else r.push(s);r.length>=4096&&(t+=Zr.apply(String,r),r.length=0)}return r.length>0&&(t+=Zr.apply(String,r)),t}function KE(e){let t=new Array(e);for(let i=0;i<e;i++)t[i]=ar();return t}function QE(e){if(ps.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[Rk()]=ar();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(ar(),ar());return t}}var Zr=String.fromCharCode;function Ok(e){let t=we,i=new Array(e);for(let r=0;r<e;r++){let s=$e[we++];if((s&128)>0){we=t;return}i[r]=s}return Zr.apply(String,i)}function g_(e){if(e<4)if(e<2){if(e===0)return"";{let t=$e[we++];if((t&128)>1){we-=1;return}return Zr(t)}}else{let t=$e[we++],i=$e[we++];if((t&128)>0||(i&128)>0){we-=2;return}if(e<3)return Zr(t,i);let r=$e[we++];if((r&128)>0){we-=3;return}return Zr(t,i,r)}else{let t=$e[we++],i=$e[we++],r=$e[we++],s=$e[we++];if((t&128)>0||(i&128)>0||(r&128)>0||(s&128)>0){we-=4;return}if(e<6){if(e===4)return Zr(t,i,r,s);{let a=$e[we++];if((a&128)>0){we-=5;return}return Zr(t,i,r,s,a)}}else if(e<8){let a=$e[we++],n=$e[we++];if((a&128)>0||(n&128)>0){we-=6;return}if(e<7)return Zr(t,i,r,s,a,n);let o=$e[we++];if((o&128)>0){we-=7;return}return Zr(t,i,r,s,a,n,o)}else{let a=$e[we++],n=$e[we++],o=$e[we++],l=$e[we++];if((a&128)>0||(n&128)>0||(o&128)>0||(l&128)>0){we-=8;return}if(e<10){if(e===8)return Zr(t,i,r,s,a,n,o,l);{let h=$e[we++];if((h&128)>0){we-=9;return}return Zr(t,i,r,s,a,n,o,l,h)}}else if(e<12){let h=$e[we++],c=$e[we++];if((h&128)>0||(c&128)>0){we-=10;return}if(e<11)return Zr(t,i,r,s,a,n,o,l,h,c);let u=$e[we++];if((u&128)>0){we-=11;return}return Zr(t,i,r,s,a,n,o,l,h,c,u)}else{let h=$e[we++],c=$e[we++],u=$e[we++],d=$e[we++];if((h&128)>0||(c&128)>0||(u&128)>0||(d&128)>0){we-=12;return}if(e<14){if(e===12)return Zr(t,i,r,s,a,n,o,l,h,c,u,d);{let f=$e[we++];if((f&128)>0){we-=13;return}return Zr(t,i,r,s,a,n,o,l,h,c,u,d,f)}}else{let f=$e[we++],p=$e[we++];if((f&128)>0||(p&128)>0){we-=14;return}if(e<15)return Zr(t,i,r,s,a,n,o,l,h,c,u,d,f,p);let m=$e[we++];if((m&128)>0){we-=15;return}return Zr(t,i,r,s,a,n,o,l,h,c,u,d,f,p,m)}}}}}function Xy(e){return ps.copyBuffers?Uint8Array.prototype.slice.call($e,we,we+=e):$e.subarray(we,we+=e)}function Nh(e){let t=$e[we++];if(as[t])return as[t]($e.subarray(we,we+=e));throw new Error("Unknown extension type "+t)}var ZE=new Array(4096);function Rk(){let e=$e[we++];if(e>=160&&e<192){if(e=e-160,Ln>=we)return Xl.slice(we-la,(we+=e)-la);if(!(Ln==0&&ah<180))return R6(e)}else return we--,ar();let t=(e<<5^(e>1?mi.getUint16(we):e>0?$e[we]:0))&4095,i=ZE[t],r=we,s=we+e-3,a,n=0;if(i&&i.bytes==e){for(;r<s;){if(a=mi.getUint32(r),a!=i[n++]){r=1879048192;break}r+=4}for(s+=3;r<s;)if(a=$e[r++],a!=i[n++]){r=1879048192;break}if(r===s)return we=r,i.string;s-=3,r=we}for(i=[],ZE[t]=i,i.bytes=e;r<s;)a=mi.getUint32(r),i.push(a),r+=4;for(s+=3;r<s;)a=$e[r++],i.push(a);let o=e<16?g_(e):Ok(e);return o!=null?i.string=o:i.string=R6(e)}var JE=(e,t)=>{var i=ar();let r=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,i.highByte=t);let s=hi[e];return s&&s.isShared&&((hi.restoreStructures||(hi.restoreStructures=[]))[e]=s),hi[e]=i,i.read=m_(i,r),i.read()},Lk=typeof self=="object"?self:global;as[0]=()=>{};as[0].noBuffer=!0;as[101]=()=>{let e=ar();return(Lk[e[0]]||Error)(e[1])};as[105]=e=>{let t=mi.getUint32(we-4);Go||(Go=new Map);let i=$e[we],r;i>=144&&i<160||i==220||i==221?r=[]:r={};let s={target:r};Go.set(t,s);let a=ar();return s.used?Object.assign(r,a):(s.target=a,a)};as[112]=e=>{let t=mi.getUint32(we-4),i=Go.get(t);return i.used=!0,i.target};as[115]=()=>new Set(ar());var zk=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");as[116]=e=>{let t=e[0],i=zk[t];if(!i)throw new Error("Could not find typed array for code "+t);return new Lk[i](Uint8Array.prototype.slice.call(e,1).buffer)};as[120]=()=>{let e=ar();return new RegExp(e[0],e[1])};as[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],i=we;we+=t-4,ks=[ar(),ar()],ks.position0=0,ks.position1=0;let r=we;we=i;try{return ar()}finally{we=r}};as[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function Bk(e){let t=ah,i=we,r=la,s=Ln,a=Xl,n=Go,o=ks,l=new Uint8Array($e.slice(0,ah)),h=hi,c=hi.slice(0,hi.length),u=ps,d=ju,f=e();return ah=t,we=i,la=r,Ln=s,Xl=a,Go=n,ks=o,$e=l,ju=d,hi=h,hi.splice(0,hi.length,...c),ps=u,mi=new DataView($e.buffer,$e.byteOffset,$e.byteLength),f}function L6(){$e=null,Go=null,hi=null}function kde(e){e.unpack?as[e.type]=e.unpack:as[e.type]=e}var v_=new Array(147);for(let e=0;e<256;e++)v_[e]=+("1e"+Math.floor(45.15-e*.30103));var e4=new Fg({useRecords:!1});e4.unpack;e4.unpackMultiple;e4.unpack;var Fde=new Float32Array(1);new Uint8Array(Fde.buffer,0,4);var Om;try{Om=new TextEncoder}catch{}var Ng,y_,t4=typeof Buffer<"u",Yy=t4?Buffer.allocUnsafeSlow:Uint8Array,kk=t4?Buffer:Uint8Array,$E=t4?4294967296:2144337920,Be,dr,Te=0,un,dn=null,Nde=/[\u0080-\uFFFF]/,H0=Symbol("record-id"),Fk=class extends Fg{constructor(e){super(e),this.offset=0;let t,i,r,s,a,n=0,o=kk.prototype.utf8Write?function(b,M,S){return Be.utf8Write(b,M,S)}:Om&&Om.encodeInto?function(b,M){return Om.encodeInto(b,Be.subarray(M)).written}:!1,l=this;e||(e={});let h=e&&e.sequential,c=e.structures||e.saveStructures,u=e.maxSharedStructures;if(u==null&&(u=c?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=e.maxOwnStructures;d==null&&(d=c?32:64),h&&!e.saveStructures&&(this.structures=[]);let f=u>32||d+u>64,p=u+64,m=u+d+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(b,M){if(Be||(Be=new Yy(8192),dr=new DataView(Be.buffer,0,8192),Te=0),un=Be.length-10,un-Te<2048?(Be=new Yy(Be.length),dr=new DataView(Be.buffer,0,Be.length),un=Be.length-10,Te=0):Te=Te+7&2147483640,t=Te,a=l.structuredClone?new Map:null,l.bundleStrings?(dn=["",""],Be[Te++]=214,Be[Te++]=98,dn.position=Te-t,Te+=4):dn=null,i=l.structures,i){i.uninitialized&&(i=l._mergeStructures(l.getStructures()));let S=i.sharedLength||0;if(S>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let A=0;A<S;A++){let C=i[A];if(!C)continue;let T,D=i.transitions;for(let R=0,O=C.length;R<O;R++){let j=C[R];T=D[j],T||(T=D[j]=Object.create(null)),D=T}D[H0]=A+64}n=S}h||(i.nextId=S+64)}r&&(r=!1),s=i||[];try{if(x(b),dn){dr.setUint32(dn.position+t,Te-dn.position-t);let S=dn;dn=null,x(S[0]),x(S[1])}if(l.offset=Te,a&&a.idsToInsert){Te+=a.idsToInsert.length*6,Te>un&&_(Te),l.offset=Te;let S=Vde(Be.subarray(t,Te),a.idsToInsert);return a=null,S}return M&jde?(Be.start=t,Be.end=Te,Be):Be.subarray(t,Te)}finally{if(i){if(y<10&&y++,v>1e4)i.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!h){for(let S=0,A=g.length;S<A;S++)g[S][H0]=0;g=[]}if(r&&l.saveStructures){let S=i.sharedLength||u;i.length>S&&(i=i.slice(0,S));let A=Be.subarray(t,Te);return l.saveStructures(i,n)===!1?(l._mergeStructures(l.getStructures()),l.pack(b)):(n=S,A)}}M&Gde&&(Te=t)}};let x=b=>{Te>un&&(Be=_(Te));var M=typeof b,S;if(M==="string"){let A=b.length;if(dn&&A>=8&&A<4096){let D=Nde.test(b);dn[D?0:1]+=b,Be[Te++]=193,x(D?-A:A);return}let C;A<32?C=1:A<256?C=2:A<65536?C=3:C=5;let T=A*3;if(Te+T>un&&(Be=_(Te+T)),A<64||!o){let D,R,O,j=Te+C;for(D=0;D<A;D++)R=b.charCodeAt(D),R<128?Be[j++]=R:R<2048?(Be[j++]=R>>6|192,Be[j++]=R&63|128):(R&64512)===55296&&((O=b.charCodeAt(D+1))&64512)===56320?(R=65536+((R&1023)<<10)+(O&1023),D++,Be[j++]=R>>18|240,Be[j++]=R>>12&63|128,Be[j++]=R>>6&63|128,Be[j++]=R&63|128):(Be[j++]=R>>12|224,Be[j++]=R>>6&63|128,Be[j++]=R&63|128);S=j-Te-C}else S=o(b,Te+C,T);S<32?Be[Te++]=160|S:S<256?(C<2&&Be.copyWithin(Te+2,Te+1,Te+1+S),Be[Te++]=217,Be[Te++]=S):S<65536?(C<3&&Be.copyWithin(Te+3,Te+2,Te+2+S),Be[Te++]=218,Be[Te++]=S>>8,Be[Te++]=S&255):(C<5&&Be.copyWithin(Te+5,Te+3,Te+3+S),Be[Te++]=219,dr.setUint32(Te,S),Te+=4),Te+=S}else if(M==="number")if(b>>>0===b)b<64?Be[Te++]=b:b<256?(Be[Te++]=204,Be[Te++]=b):b<65536?(Be[Te++]=205,Be[Te++]=b>>8,Be[Te++]=b&255):(Be[Te++]=206,dr.setUint32(Te,b),Te+=4);else if(b>>0===b)b>=-32?Be[Te++]=256+b:b>=-128?(Be[Te++]=208,Be[Te++]=b+256):b>=-32768?(Be[Te++]=209,dr.setInt16(Te,b),Te+=2):(Be[Te++]=210,dr.setInt32(Te,b),Te+=4);else{let A;if((A=this.useFloat32)>0&&b<4294967296&&b>=-2147483648){Be[Te++]=202,dr.setFloat32(Te,b);let C;if(A<4||(C=b*v_[(Be[Te]&127)<<1|Be[Te+1]>>7])>>0===C){Te+=4;return}else Te--}Be[Te++]=203,dr.setFloat64(Te,b),Te+=8}else if(M==="object")if(!b)Be[Te++]=192;else{if(a){let C=a.get(b);if(C){if(!C.id){let T=a.idsToInsert||(a.idsToInsert=[]);C.id=T.push(C)}Be[Te++]=214,Be[Te++]=112,dr.setUint32(Te,C.id),Te+=4;return}else a.set(b,{offset:Te-t})}let A=b.constructor;if(A===Object)w(b,!0);else if(A===Array){S=b.length,S<16?Be[Te++]=144|S:S<65536?(Be[Te++]=220,Be[Te++]=S>>8,Be[Te++]=S&255):(Be[Te++]=221,dr.setUint32(Te,S),Te+=4);for(let C=0;C<S;C++)x(b[C])}else if(A===Map){S=b.size,S<16?Be[Te++]=128|S:S<65536?(Be[Te++]=222,Be[Te++]=S>>8,Be[Te++]=S&255):(Be[Te++]=223,dr.setUint32(Te,S),Te+=4);for(let[C,T]of b)x(C),x(T)}else{for(let C=0,T=Ng.length;C<T;C++){let D=y_[C];if(b instanceof D){let R=Ng[C];if(R.write){R.type&&(Be[Te++]=212,Be[Te++]=R.type,Be[Te++]=0),x(R.write.call(this,b));return}let O=Be,j=dr,X=Te;Be=null;let N;try{N=R.pack.call(this,b,k=>(Be=O,O=null,Te+=k,Te>un&&_(Te),{target:Be,targetView:dr,position:Te-k}),x)}finally{O&&(Be=O,dr=j,Te=X,un=Be.length-10)}N&&(N.length+Te>un&&_(N.length+Te),Te=Ude(N,Be,Te,R.type));return}}w(b,!b.hasOwnProperty)}}else if(M==="boolean")Be[Te++]=b?195:194;else if(M==="bigint"){if(b<BigInt(1)<<BigInt(63)&&b>=-(BigInt(1)<<BigInt(63)))Be[Te++]=211,dr.setBigInt64(Te,b);else if(b<BigInt(1)<<BigInt(64)&&b>0)Be[Te++]=207,dr.setBigUint64(Te,b);else if(this.largeBigIntToFloat)Be[Te++]=203,dr.setFloat64(Te,Number(b));else throw new RangeError(b+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");Te+=8}else if(M==="undefined")this.encodeUndefinedAsNil?Be[Te++]=192:(Be[Te++]=212,Be[Te++]=0,Be[Te++]=0);else if(M==="function")x(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+M)},w=this.useRecords===!1?this.variableMapSize?b=>{let M=Object.keys(b),S=M.length;S<16?Be[Te++]=128|S:S<65536?(Be[Te++]=222,Be[Te++]=S>>8,Be[Te++]=S&255):(Be[Te++]=223,dr.setUint32(Te,S),Te+=4);let A;for(let C=0;C<S;C++)x(A=M[C]),x(b[A])}:(b,M)=>{Be[Te++]=222;let S=Te-t;Te+=2;let A=0;for(let C in b)(M||b.hasOwnProperty(C))&&(x(C),x(b[C]),A++);Be[S+++t]=A>>8,Be[S+t]=A&255}:b=>{let M=Object.keys(b),S,A=s.transitions||(s.transitions=Object.create(null)),C=0;for(let D=0,R=M.length;D<R;D++){let O=M[D];S=A[O],S||(S=A[O]=Object.create(null),C++),A=S}let T=A[H0];if(T)T>=96&&f?(Be[Te++]=((T-=96)&31)+96,Be[Te++]=T>>5):Be[Te++]=T;else{T=s.nextId,T||(T=64),T<p&&this.shouldShareStructure&&!this.shouldShareStructure(M)?(T=s.nextOwnId,T<m||(T=p),s.nextOwnId=T+1):(T>=m&&(T=p),s.nextId=T+1);let D=M.highByte=T>=96&&f?T-96>>5:-1;A[H0]=T,s[T-64]=M,T<p?(M.isShared=!0,s.sharedLength=T-63,r=!0,D>=0?(Be[Te++]=(T&31)+96,Be[Te++]=D):Be[Te++]=T):(D>=0?(Be[Te++]=213,Be[Te++]=114,Be[Te++]=(T&31)+96,Be[Te++]=D):(Be[Te++]=212,Be[Te++]=114,Be[Te++]=T),C&&(v+=y*C),g.length>=d&&(g.shift()[H0]=0),g.push(A),x(M))}for(let D=0,R=M.length;D<R;D++)x(b[M[D]])},_=b=>{let M;if(b>16777216){if(b-t>$E)throw new Error("Packed buffer would be larger than maximum buffer size");M=Math.min($E,Math.round(Math.max((b-t)*(b>67108864?1.25:2),4194304)/4096)*4096)}else M=(Math.max(b-t<<2,Be.length-1)>>12)+1<<12;let S=new Yy(M);return dr=new DataView(S.buffer,0,M),Be.copy?Be.copy(S,0,t,b):S.set(Be.slice(t,b)),Te-=t,t=0,un=S.length-10,Be=S}}useBuffer(e){Be=e,dr=new DataView(Be.buffer,Be.byteOffset,Be.byteLength),Te=0}};y_=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,Pk];Ng=[{pack(e,t,i){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:s,targetView:a,position:n}=t(6);s[n++]=214,s[n++]=255,a.setUint32(n,r)}else if(r>0&&r<17179869184){let{target:s,targetView:a,position:n}=t(10);s[n++]=215,s[n++]=255,a.setUint32(n,e.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),a.setUint32(n+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),i(this.onInvalidDate());let{target:s,targetView:a,position:n}=t(3);s[n++]=212,s[n++]=255,s[n++]=255}else{let{target:s,targetView:a,position:n}=t(15);s[n++]=199,s[n++]=12,s[n++]=255,a.setUint32(n,e.getMilliseconds()*1e6),a.setBigInt64(n+4,BigInt(Math.floor(r)))}}},{pack(e,t,i){let r=Array.from(e),{target:s,position:a}=t(this.structuredClone?3:0);this.structuredClone&&(s[a++]=212,s[a++]=115,s[a++]=0),i(r)}},{pack(e,t,i){let{target:r,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(r[s++]=212,r[s++]=101,r[s++]=0),i([e.name,e.message])}},{pack(e,t,i){let{target:r,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(r[s++]=212,r[s++]=120,r[s++]=0),i([e.source,e.flags])}},{pack(e,t){this.structuredClone?e8(e,16,t):t8(t4?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let i=e.constructor;i!==kk&&this.structuredClone?e8(e,zk.indexOf(i.name),t):t8(e,t)}},{pack(e,t){let{target:i,position:r}=t(1);i[r]=193}}];function e8(e,t,i,r){let s=e.byteLength;if(s+1<256){var{target:a,position:n}=i(4+s);a[n++]=199,a[n++]=s+1}else if(s+1<65536){var{target:a,position:n}=i(5+s);a[n++]=200,a[n++]=s+1>>8,a[n++]=s+1&255}else{var{target:a,position:n,targetView:o}=i(7+s);a[n++]=201,o.setUint32(n,s+1),n+=4}a[n++]=116,a[n++]=t,a.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n)}function t8(e,t){let i=e.byteLength;var r,s;if(i<256){var{target:r,position:s}=t(i+2);r[s++]=196,r[s++]=i}else if(i<65536){var{target:r,position:s}=t(i+3);r[s++]=197,r[s++]=i>>8,r[s++]=i&255}else{var{target:r,position:s,targetView:a}=t(i+5);r[s++]=198,a.setUint32(s,i),s+=4}r.set(e,s)}function Ude(e,t,i,r){let s=e.length;switch(s){case 1:t[i++]=212;break;case 2:t[i++]=213;break;case 4:t[i++]=214;break;case 8:t[i++]=215;break;case 16:t[i++]=216;break;default:s<256?(t[i++]=199,t[i++]=s):s<65536?(t[i++]=200,t[i++]=s>>8,t[i++]=s&255):(t[i++]=201,t[i++]=s>>24,t[i++]=s>>16&255,t[i++]=s>>8&255,t[i++]=s&255)}return t[i++]=r,t.set(e,i),i+=s,i}function Vde(e,t){let i,r=t.length*6,s=e.length-r;for(t.sort((a,n)=>a.offset>n.offset?1:-1);i=t.pop();){let a=i.offset,n=i.id;e.copyWithin(a+r,a,s),r-=6;let o=a+r;e[o++]=214,e[o++]=105,e[o++]=n>>24,e[o++]=n>>16&255,e[o++]=n>>8&255,e[o++]=n&255,s=a}return e}function g0(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");y_.unshift(e.Class),Ng.unshift(e)}kde(e)}var Nk=new Fk({useRecords:!1});Nk.pack;Nk.pack;var jde=512,Gde=1024,i8=new Fk({structuredClone:!0});g0({Class:ft.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,ft.prototype),e}});g0({Class:nt.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,nt.prototype),e}});g0({Class:b1.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,b1.prototype),e}});g0({Class:HE.prototype.constructor,type:4,write(e){return e.id},read(e){return new HE(e)}});g0({Class:WE.prototype.constructor,type:5,write(e){return e.data},read(e){return new WE(e)}});g0({Class:Rr.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Rr.prototype),e}});function Hde(e){var t=0;if(e.length===0)return t;for(let i=0;i<e.length;i++){let r=e[i];t=(t<<5)-t+r,t=t&t}return t}function z6(e){if(c_(e))return e;if(Array.isArray(e))return e.map(z6);if(typeof e=="object"&&e!==null){let t={};for(let i of Object.keys(e).sort())t[i]=z6(e[i]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var B6;(e=>{function t(s){return i8.pack(s)}e.serialize=t;function i(s){return i8.unpack(s)}e.deserialize=i;function r(s){return Hde(t(z6(s))).toString()}e.checksum=r})(B6||(B6={}));var r8;(e=>{function t(r){return r.type==="Conditional"?r.condition.type==="Distance"?"Distance":"StateChange":r.type}e.toEventUIType=t;function i(r){return r==="Distance"||r==="StateChange"?"Conditional":r}e.fromEventUIType=i})(r8||(r8={}));function s8(e){return e==="MouseDown"||e==="MouseUp"||e==="KeyDown"||e==="KeyUp"||e==="Collision"||e==="Trigger"}var I1={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],API:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],WEBHOOK:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],AIAssistantListener:["SetVariable"],AIAssistantTrigger:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"]},a8;(e=>{function t(r){return r.type==="MouseDown"||r.type==="MouseUp"||r.type==="MousePress"||r.type==="KeyDown"||r.type==="KeyUp"||r.type==="KeyPress"}e.is=t;function i(r){return r==="MouseDown"||r==="MouseUp"||r==="MousePress"?{type:r,mode:"Object",disabled:!1,actions:new nt}:{type:r,disabled:!1,key:void 0,actions:new nt}}e.defaultData=i})(a8||(a8={}));var Ug;(e=>{function t(i){return{type:"Property",value:[i??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(Ug||(Ug={}));var k6;(e=>{function t(s){return{type:"Comparison",operator:"==",lOperand:Ug.propertyDefaultData(s),rOperand:{...Ug.valueDefaultData}}}e.comparisonDefaultData=t;function i(s){return{type:"Distance",toObject:s??null,fromObject:s??null,distance:200}}e.distanceDefaultData=i;function r(s,a){return{type:"State",object:s??null,state:a??null}}e.stateDefaultData=r})(k6||(k6={}));var n8;(e=>{function t(i){return i.find(r=>r==="ifActions"||r==="elseActions")!==void 0}e.isConditionalSubActions=t})(n8||(n8={}));var o8;(e=>{function t(r){return r.type==="Conditional"}e.is=t;function i(r){return{type:"Conditional",disabled:!1,inActions:new nt,outActions:new nt,condition:k6.distanceDefaultData(r)}}e.defaultData=i})(o8||(o8={}));var l8;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new nt,drop:new nt}})(l8||(l8={}));var F6;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new nt})(F6||(F6={}));var N6;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(N6||(N6={}));var h8;(e=>{function t(r){return r.type==="MouseHover"}e.is=t;function i(){return{type:"MouseHover",disabled:!1,actions:new nt}}e.defaultData=i})(h8||(h8={}));var c8;(e=>{function t(r){return r.type==="Scroll"}e.is=t;function i(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new nt}}e.defaultData=i})(c8||(c8={}));var u8;(e=>{function t(r){return r.type==="Start"}e.is=t;function i(){return{type:"Start",disabled:!1,actions:new nt}}e.defaultData=i})(u8||(u8={}));var d8;(e=>{function t(r){return r.type==="Collision"}e.is=t;function i(){return{type:"Collision",disabled:!1,target:"character",actions:new nt}}e.defaultData=i})(d8||(d8={}));var f8;(e=>{function t(r){return r.type==="Trigger"}e.is=t;function i(r,s){return{type:"Trigger",disabled:!1,target:"all",triggeringObjects:[],actions:new nt,triggerZone:"box",position:s.toArray(),rotation:[0,0,0],size:r.toArray(),radius:r.length()/2,helperVisible:!0}}e.defaultData=i})(f8||(f8={}));var U6;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(n){return n.type==="Resize"}e.is=t;function i(n){return typeof n=="string"?n:"custom"}e.sizeToDevice=i;function r(n){return typeof n=="string"?[...e.defaultSizes[n]]:[...n]}e.deviceToSize=r;function s(){let n={size:"mobile",operator:"<",actions:new nt},o={size:"tablet",operator:"<",actions:new nt},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new nt},h=new nt;return h.push({id:Ke.generateUUID(),fi:0,data:n},{id:Ke.generateUUID(),fi:1,data:o},{id:Ke.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:h}}e.defaultData=s;function a(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new nt}}e.defaultBreakpointData=a})(U6||(U6={}));var V6;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function t(r){return r.type==="VariableChange"}e.is=t;function i(){return{disabled:!1,type:"VariableChange",actions:new nt,variableId:"",objectId:null,property:"Position X"}}e.defaultData=i})(V6||(V6={}));var p8;(e=>{function t(r){return r.type==="API"}e.is=t;function i(){return{disabled:!1,type:"API",successActions:new nt,errorActions:new nt,userAPIId:""}}e.defaultData=i})(p8||(p8={}));var m8;(e=>{function t(r){return r.type==="WEBHOOK"}e.is=t;function i(){return{disabled:!1,type:"WEBHOOK",actions:new nt,userWebhookId:""}}e.defaultData=i})(m8||(m8={}));var g8;(e=>{function t(r){return r.type==="AIAssistantListener"}e.is=t;function i(){return{disabled:!1,type:"AIAssistantListener",actions:new nt,analysis:"average",analysisRange:[0,71],analysisSingle:0}}e.defaultData=i})(g8||(g8={}));var v8;(e=>{function t(r){return r.type==="AIAssistantTrigger"}e.is=t;function i(){return{disabled:!1,description:"",type:"AIAssistantTrigger",actions:new nt}}e.defaultData=i})(v8||(v8={}));var v0="personal camera",Z3="a218fcc3-276b-49b9-b485-49037fd14f5f",Wde=2960946,Xs=5526619,Uo;(e=>{function t(p,m){return p[0]===m[0]&&p[1]===m[1]}e.isEqual=t;function i(p,m,g){return[p[0]+(m[0]-p[0])*g,p[1]+(m[1]-p[1])*g]}e.lerp=i;function r(p,m){return[p[0]+m[0],p[1]+m[1]]}e.add=r;function s(p,m){return[p[0]-m[0],p[1]-m[1]]}e.sub=s;function a(p,m){return[p[0]*m[0],p[1]*m[1]]}e.multiply=a;function n(p,m){return[p[0]/m[0],p[1]/m[1]]}e.divide=n;function o(p,m){return Math.pow(m[0]-p[0],2)+Math.pow(m[1]-p[1],2)}e.distanceSquared=o;function l(p,m){return Math.sqrt(o(p,m))}e.distance=l;function h(p,m){return p[0]*m[0]+p[1]*m[1]}e.dot=h;function c(p,m){return[p[0]*m,p[1]*m]}e.scalarMultiply=c;function u(p,m,g){let v=e.sub(m,p),y=e.sub(g,p),x=e.dot(v,y)/e.dot(v,v),w=e.scalarMultiply(v,x);return e.add(p,w)}e.projectionOnto=u;function d(p,m,g){return l(p,u(p,m,g))}e.projectionOntoDistance=d;function f(p,m){return[(p[0]+m[0])*.5,(p[1]+m[1])*.5]}e.center=f})(Uo||(Uo={}));var Tc;(e=>{function t(l,h){return l[0]===h[0]&&l[1]===h[1]&&l[2]===h[2]}e.isEqual=t;function i(l,h){return[l[0]+h[0],l[1]+h[1],l[2]+h[2]]}e.add=i;function r(l,h){return[l[0]-h[0],l[1]-h[1],l[2]-h[2]]}e.sub=r;function s(l,h){return[l[0]/h[0],l[1]/h[1],l[2]/h[2]]}e.div=s;function a(l,h){return[l[0]*h[0],l[1]*h[1],l[2]*h[2]]}e.mul=a;function n(l,h){return Math.hypot(l[0]-h[0],l[1]-h[1],l[2]-h[2])}e.dist=n;function o(l,h,c){return[l[0]+(h[0]-l[0])*c,l[1]+(h[1]-l[1])*c,l[2]+(h[2]-l[2])*c]}e.lerp=o})(Tc||(Tc={}));var Vg;(e=>{function t(r,s){return r[0]===s[0]&&r[1]===s[1]&&r[2]===s[2]&&r[3]===s[3]}e.isEqual=t;function i(r,s,a){return[r[0]+(s[0]-r[0])*a,r[1]+(s[1]-r[1])*a,r[2]+(s[2]-r[2])*a,r[3]+(s[3]-r[3])*a]}e.lerp=i})(Vg||(Vg={}));var y8;(e=>{let t=180/Math.PI,i=Math.PI/180;function r(o){return typeof o=="number"?o*t:o}function s(o){return typeof o=="number"?o*i:o}function a(o){return[r(o[0]),r(o[1]),r(o[2])]}e.radToDeg=a;function n(o){return[s(o[0]),s(o[1]),s(o[2])]}e.degToRad=n})(y8||(y8={}));var Gu;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(s,a){for(let n=0;n<16;n++)if(s[n]!==a[n])return!1;return!0}e.isEqual=t;function i(s){return s??e.identity}e.simplify=i;function r(s,a){let n=a.slice(0);for(var o=0,l=a.length;o<l;o+=3){let h=s[3]*a[o]+s[7]*a[o+1]+s[11]*a[o+2]+s[15];n[o]=(s[0]*a[o]+s[4]*a[o+1]+s[8]*a[o+2]+s[12])/h,n[o+1]=(s[1]*a[o]+s[5]*a[o+1]+s[9]*a[o+2]+s[13])/h,n[o+2]=(s[2]*a[o]+s[6]*a[o+1]+s[10]*a[o+2]+s[14])/h}return n}e.applyMatrix4=r})(Gu||(Gu={}));var g1;(e=>{function t(h){return typeof h=="object"&&typeof h.r=="number"&&typeof h.g=="number"&&typeof h.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function i(h){return{r:Math.round(h.r*255),g:Math.round(h.g*255),b:Math.round(h.b*255),a:1}}e.toRgb255a1=i;function r(h){return{r:h.r,g:h.g,b:h.b}}e.clone=r;function s(h){return h=Math.floor(h),{r:(h>>16&255)/255,g:(h>>8&255)/255,b:(h&255)/255}}e.fromHex=s;function a(h){return Math.round(h.r*255)*65536+Math.round(h.g*255)*256+Math.round(h.b*255)}e.toHex=a;function n(h,c){return h.r===c.r&&h.g===c.g&&h.b===c.b}e.equals=n;function o(h,c){return h.r.toFixed(2)===c.r.toFixed(2)&&h.g.toFixed(2)===c.g.toFixed(2)&&h.b.toFixed(2)===c.b.toFixed(2)}e.equalsFixed=o;function l(h,c,u){return{r:h.r+(c.r-h.r)*u,g:h.g+(c.g-h.g)*u,b:h.b+(c.b-h.b)*u}}e.lerp=l})(g1||(g1={}));var _i;(e=>{e.white={...g1.white,a:1},e.transparent={...g1.white,a:0};function t(l){return{r:l[0],g:l[1],b:l[2],a:l[3]}}e.from0to1=t;function i(l,h){return{...g1.fromHex(l),a:h}}e.fromHexAndA=i;function r(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:l.a}}e.toRgb255a1=r;function s(l,h){return g1.equals(l,h)&&l.a===h.a}e.equals=s;function a(l,h){return g1.equalsFixed(l,h)&&l.a.toFixed(2)===h.a.toFixed(2)}e.equalsFixed=a;function n(l,h,c){return{r:l.r+(h.r-l.r)*c,g:l.g+(h.g-l.g)*c,b:l.b+(h.b-l.b)*c,a:l.a+(h.a-l.a)*c}}e.lerp=n;function o({r:l,g:h,b:c,a:u}=e.white){return`rgba(${l*255}, ${h*255}, ${c*255}, ${u})`}e.toStyle=o})(_i||(_i={}));var j6;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(j6||(j6={}));var qde=(e=>(e[e.LINEAR=0]="LINEAR",e[e.EASE=1]="EASE",e[e.EASE_IN=2]="EASE_IN",e[e.EASE_OUT=3]="EASE_OUT",e[e.EASE_IN_OUT=4]="EASE_IN_OUT",e[e.CUBIC=5]="CUBIC",e[e.SPRING=6]="SPRING",e))(qde||{}),G6;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(G6||(G6={}));var H6;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(H6||(H6={}));var Rl;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Rl||(Rl={}));function x8(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var Fc;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(i){return e.all.includes(i)}e.is=t})(Fc||(Fc={}));var Hu;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(i){return i.type==="PerspectiveCamera"?i.perspective?.zoom??1:i.orthographic?.zoom??1}e.getZoom=t})(Hu||(Hu={}));var Yl;(e=>{function t(r,s=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(r[0],r[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[r[0]+r[0]*s,0,0]},grid:{count:[2,2,2],size:r.map(a=>a*(1+s)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function i(r,s){let a={...r};if(Uk.forEach(n=>{Object.assign(a,{[n]:s[n]??r[n]})}),a.radial={...r.radial},s.radial){let n=r.radial,o=s.radial;Vk.forEach(l=>{Object.assign(a.radial,{[l]:o[l]??n[l]})})}if(a.linear={...r.linear},s.linear){let n=r.linear,o=s.linear;jk.forEach(l=>{Object.assign(a.linear,{[l]:o[l]??n[l]})})}if(a.grid={...r.grid},s.grid){let n=r.grid,o=s.grid;Gk.forEach(l=>{Object.assign(a.grid,{[l]:o[l]??n[l]})})}if(a.toObject={...r.toObject},s.toObject){let n=r.toObject,o=s.toObject;Hk.forEach(l=>{Object.assign(a.toObject,{[l]:o[l]??n[l]})})}if(a.randomnessObject={...r.randomnessObject},s.randomnessObject){let n=r.randomnessObject,o=s.randomnessObject;Wk.forEach(l=>{Object.assign(a.randomnessObject,{[l]:o[l]??n[l]})})}return a}e.merge=i})(Yl||(Yl={}));var W6;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function i(r,s){let a=[];r.count!==void 0&&a.push({type:0,path:s,props:{count:r.count}});for(let n of t){let o=r[n];o&&Object.keys(o).length>0&&a.push({type:0,path:[...s,n],props:o})}return a}e.toOps=i})(W6||(W6={}));var Uk=["count"],Vk=["radius","start","end","position","scale","rotation"],jk=["position","scale","rotation"],Gk=["count","size"],Hk=["count","position","scale","rotation"],Wk=["strength","scale","rotation","position","movement","seed","freqScale"],q6;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(i){return e.all.includes(i)}e.is=t})(q6||(q6={}));var X6;(e=>{function t(r){return i(r)}e.defaultData=t;function i(r){if(r==="PointLight")return{type:r,color:_i.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(r==="SpotLight")return{type:r,color:_i.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(r==="DirectionalLight")return{type:r,color:_i.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(X6||(X6={}));var jg;(e=>(e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeDuration:1,...e.defaultCollisionData}))(jg||(jg={}));var Wu;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(Wu||(Wu={}));var Y6;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(i,r){return i.castShadow===r.castShadow&&i.receiveShadow===r.receiveShadow}e.equals=t})(Y6||(Y6={}));var K6;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(i,r){return i.flatShading===r.flatShading&&i.side===r.side&&i.wireframe===r.wireframe}e.equals=t})(K6||(K6={}));var Q6;(e=>e.defaultData={...K6.defaultData,...Y6.defaultData})(Q6||(Q6={}));var b8;(e=>{function t(i,r){let s=[];if("material"in i){let a=typeof i.material=="string"?r.materials[i.material]??r.lib.materials[i.material]?.asset:i.material;a&&s.push(a)}else if("materials"in i)for(let a of i.materials){let n=typeof a=="string"?r.materials[a]??r.lib.materials[a]?.asset:a;n&&s.push(n)}return s}e.getMaterialData=t})(b8||(b8={}));var Gg;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(Gg||(Gg={}));var w8;(e=>{function t(i){return i==="texture"||i==="video"||i==="color"||i==="depth"||i==="normal"||i==="gradient"||i==="noise"||i==="fresnel"||i==="rainbow"||i==="toon"||i==="outline"||i==="particle"||i==="transmission"||i==="matcap"||i==="displace"||i==="pattern"||i==="light"}e.is=t})(w8||(w8={}));function Xde(e){return e.type!=="displace"}var _8;(e=>{function t(i){return i==="phong"||i==="toon"||i==="lambert"||i==="physical"}e.is=t})(_8||(_8={}));var qk=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Yde=["wrapping","image","video","name","minFilter","magFilter"],Jr;(e=>{function t(a,n){let{texture:o,...l}=n;if(Object.assign(a,l),o){let h=a.texture;h&&Object.assign(h,o)}}e.patch=t;function i(a,n){return a==="light"&&n?r(n):s(a)}e.defaultData=i;function r(a){let n={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(a){case"phong":return{...n,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...n,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...n,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...n,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function s(a){let n={alpha:1,mode:0,isMask:!1,visible:!0};switch(a){case"texture":return{...n,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"video":return{...n,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:Gg.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"color":return{...n,type:"color",color:g1.fromHex(Xs)};case"depth":return{...n,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...n,type:"normal",cnormal:[1,1,1]};case"gradient":return{...n,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...n,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...g1.fromHex(6710886),a:1},colorB:{...g1.fromHex(6710886),a:1},colorC:{...g1.fromHex(16777215),a:1},colorD:{...g1.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...n,type:"fresnel",color:_i.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...n,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...n,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:_i.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...n,type:"outline",outlineColor:_i.fromHexAndA(0,1),contourColor:_i.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...n,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006}};case"transmission":return{...n,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...n,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...g1.fromHex(0),a:1},colorB:{...g1.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(Jr||(Jr={}));var i1;(e=>{function t(c){return!c.layers.some(u=>u.data.type==="texture"&&u.data.projection!==0||u.data.type==="depth"&&!u.data.isWorldSpace||u.data.type==="noise"||u.data.type==="displace")}e.isMergable=t;function i(c){let u="";return c.layers.forEach(d=>{Object.entries(d.data).forEach(([f,p])=>{u+=`${f}${p}`,Array.isArray(p)?p.forEach(m=>u+=`${m}`):typeof p=="object"?Object.values(p).forEach(m=>{typeof m=="number"?u+=`${m.toFixed(4)}`:u+=`${m}`}):u+=`${p}`})}),u}e.getHash=i;function r(){return{layers:new nt}}e.defaultEmptyData=r;function s(c="layer1",u="layer2"){return n("phong",c,u)}e.defaultData=s;function a(c,u){return{...c,name:u}}e.withName=a;function n(c,u="layer1",d="layer2"){let f=new nt;return f.push({fi:0,data:Jr.defaultData("light",c),id:u}),f.push({fi:1,data:Jr.defaultData("color"),id:d}),{layers:f}}e.defaultTwoLayerData=n;function o(c){let u=Jr.defaultData("texture");c&&Object.assign(u.texture,{image:c});let d=new nt;return d.push({fi:0,data:u,id:"layer1"}),d.push({fi:1,data:{...Jr.defaultData("transmission"),alpha:1},id:"layer2"}),d.push({fi:2,data:{...Jr.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:d}}e.defaultUIObjectMaterial=o;function l(c,u="phong",d="layer1",f="layer2"){let p=Jr.defaultData("texture");Object.assign(p.texture,{image:c});let m=new nt;return m.push({fi:0,data:p,id:d}),m.push({fi:1,data:Jr.defaultData("light",u),id:f}),{layers:m}}e.defaultTwoLayerTextureData=l;function h(c,u="phong",d="layer1",f="layer2"){let p=Jr.defaultData("video");Object.assign(p.texture,{video:c});let m=new nt;return m.push({fi:0,data:p,id:d}),m.push({fi:1,data:Jr.defaultData("light",u),id:f}),{layers:m}}e.defaultTwoLayerVideoTextureData=h})(i1||(i1={}));var Hg;(e=>{function t(){return{points:new nt,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(Hg||(Hg={}));var Wg;(e=>{function t(){return{points:new nt,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(Wg||(Wg={}));var Xk={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},Z6;(e=>{function t(i,r){let s={...i};return Kk.forEach(a=>{Object.assign(s,{[a]:r[a]??i[a]})}),s}e.merge=t})(Z6||(Z6={}));var Yk={shape:Xk,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},Kk=["depth","offset","angle","twist","startScale","endScale"],qg;(e=>{function t(r){return r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"||r==="UIGeometry"}e.is2DParametricMesh=t;function i(r){return r==="PolygonGeometry"||r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"||r==="PathGeometry"||r==="VectorGeometry"||r==="ConeGeometry"||r==="CubeGeometry"||r==="CylinderGeometry"||r==="DodecahedronGeometry"||r==="HelixGeometry"||r==="IcosahedronGeometry"||r==="LatheGeometry"||r==="PyramidGeometry"||r==="SphereGeometry"||r==="PlaneGeometry"||r==="BackdropGeometry"||r==="TorusGeometry"||r==="TorusKnotGeometry"||r==="BooleanGeometry"||r==="TextGeometry"||r==="InputGeometry"}e.isParametricMesh=i})(qg||(qg={}));var J6;(e=>{function t(i,r){let s={...i};return Object.assign(s,r),s.type==="PathGeometry"&&"extrusion"in r&&r.extrusion&&(s.extrusion={...i.extrusion},Object.assign(s.extrusion,Z6.merge(s.extrusion,r.extrusion))),s}e.merge=t})(J6||(J6={}));var Bl;(e=>{function t(i){if(i==="RectangleGeometry")return{width:320,height:320,type:i,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="UIGeometry")return{type:i,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if(i==="PathGeometry")return{type:i,width:1,height:1,depth:1,path:Wg.defaultData(),extrusion:Yk};if(i==="VectorGeometry")return{width:1,height:1,type:i,subdivisions:12,shape:Hg.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="BooleanGeometry")return{type:i,operation:2,width:0,height:0,depth:0,phongAngle:35};if(i==="ShapeBlendGeometry")return{type:i,width:0,height:0,depth:0,resolutionLevel:6,blendRange:100,useChildrenColors:!1};if(i==="TextGeometry")return{type:i,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",editable:!1,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="InputGeometry")return{...e.defaultData("TextGeometry"),type:i,editable:!0};if(i==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=t})(Bl||(Bl={}));var Ky=["width","height","depth"],$6;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:g1.white,near:.1,far:2e3})($6||($6={}));var Xg;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focusDistance:100,focalLength:20,bokehScale:5},noise:{...t,blendFunction:16}}})(Xg||(Xg={}));var ex;(e=>e.defaultData={softShadowQuality:"low"})(ex||(ex={}));var tx;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(tx||(tx={}));var ix;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(ix||(ix={}));var qu;(e=>e.defaultData={usePhysics:!1,gravity:-10})(qu||(qu={}));var rx;(e=>e.defaultData={playCamera:v0,gameControlObject:null})(rx||(rx={}));var sx;(e=>e.defaultData={backgroundColor:_i.fromHexAndA(Wde,1),postprocessing:Xg.defaultData,fog:$6.defaultData,globalPhysics:qu.defaultData,ambient:tx.defaultData,ao:ix.defaultData,shadow:ex.defaultData,publish:rx.defaultData})(sx||(sx={}));var ax;(e=>e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95})(ax||(ax={}));var S8;(e=>{function t(r){return r==="Component"||r==="Instance"}e.isComponentRelated=t;function i(r){return r==="Empty"||r==="Instance"}e.isEmptyOrComponent=i})(S8||(S8={}));var Xu;(e=>{e.identity={...j6.identity,hiddenMatrix:Gu.identity};function t(s){return{position:s.position,rotation:s.rotation,scale:s.scale,hiddenMatrix:s.hiddenMatrix}}e.fromObject=t;function i(s,a){return{position:a?.position||s.position,rotation:a?.rotation||s.rotation,scale:a?.scale||s.scale,hiddenMatrix:a?.hiddenMatrix||s.hiddenMatrix}}e.merge=i;function r(s,a){return uk({position:Tc.isEqual(s.position,a.position)?void 0:a.position,rotation:Tc.isEqual(s.rotation,a.rotation)?void 0:a.rotation,scale:Tc.isEqual(s.scale,a.scale)?null:a.scale,hiddenMatrix:Gu.isEqual(s.hiddenMatrix,a.hiddenMatrix)?void 0:a.hiddenMatrix})}e.diff=r})(Xu||(Xu={}));var Gr;(e=>e.defaultData={states:new nt,events:new nt,visible:!0,raycastLock:!1,physics:Wu.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...Xu.identity,cloner:null})(Gr||(Gr={}));var nx;(e=>e.defaultData={type:"Empty",...Gr.defaultData})(nx||(nx={}));var A8;(e=>e.defaultData={type:"ParticleCollider",...ax.defaultData,...Gr.defaultData})(A8||(A8={}));var M8;(e=>e.defaultData={type:"Component",...Gr.defaultData})(M8||(M8={}));var C8;(e=>e.defaultData={type:"Particle",...Gr.defaultData,...jg.defaultData})(C8||(C8={}));var kl;(e=>e.defaultData={type:"Mesh",...Gr.defaultData,...Q6.defaultData})(kl||(kl={}));var Gd;(e=>e.defaultData={...Gr.defaultData,...Xu.identity,position:[0,0,Hu.DefaultTargetOffset],...Hu.defaultData})(Gd||(Gd={}));var ox;(e=>{function t(i){return{...Gr.defaultData,...X6.defaultData(i)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(ox||(ox={}));var Yg;(e=>{function t(r,s,a=0){for(;a<s.length;){let n=r?r[s[a]]:void 0;if(s.length===a+1)return n;if(n)r=n.descendants,a+=1;else return}}e.resolveWithDes=t;function i(r,s,a=0){let n=t(r,s,a);if(n){let o=Object.keys(n);if(o.length===1&&o[0]==="descendants")return}return n}e.resolve=i})(Yg||(Yg={}));var Kl;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(r,s){return{...Gr.defaultData,...s,component:r,overrides:new Rr,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function i(r){let s=Xu.fromObject(r.data);return t(r.id,s)}e.fromComponentData=i})(Kl||(Kl={}));var Yu;(e=>{e.defaultData={type:"Page",...Gr.defaultData,physics:{...Wu.defaultData,fusedBody:!1},...sx.defaultData,camera:Gd.defaultData};function t(i){return i.uiScene!==void 0}e.isUIPage=t})(Yu||(Yu={}));var lx;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Gu.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Wu.defaultData,states:new nt,events:new nt,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...Hu.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...Gr.defaultData,...kl.defaultData,geometry:Bl.defaultData("RectangleGeometry"),material:i1.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Gr.defaultData,...kl.defaultData,geometry:Bl.defaultData("BooleanGeometry"),material:i1.defaultTwoLayerData("phong","layer1","layer2")},e.defaultShapeBlendObject={name:"Shape Blend",...Gr.defaultData,...kl.defaultData,geometry:Bl.defaultData("ShapeBlendGeometry"),material:i1.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...Gr.defaultData,...kl.defaultData,geometry:Bl.defaultData("TextGeometry"),material:i1.defaultTwoLayerData("phong","layer1","layer2")},e.defaultInputObject={name:"Input",...Gr.defaultData,...kl.defaultData,geometry:Bl.defaultData("InputGeometry"),material:i1.defaultTwoLayerData("phong","layer1","layer2")}))(lx||(lx={}));var cc;(e=>{function t(a,n){let o={name:n};return a.type==="Mesh"?(o.geometry={},"material"in a&&(o.material={layers:new Rr}),"materials"in a&&(o.materials=a.materials.map(l=>({layers:new Rr})))):Fc.is(a.type)&&(o.perspective={},o.orthographic={}),o}e.newEmpty=t;function i(a,n){if(n===void 0)return a;let o={...a};return"material"in o&&"material"in n&&n.material&&(o.material=jd(o.material,l=>{if(typeof l!="string")for(let[h,c]of Object.entries(n.material.layers)){let u=l.layers.data(h);u&&Jr.patch(u,c)}}).data),o.materials&&n.materials&&(o.materials=jd(o.materials,l=>{for(let h=0;h<o.materials.length;h++){let c=n.materials[h];if(typeof c!="string")for(let[u,d]of Object.entries(c.layers)){let f=l[h]?.layers?.data(u);f&&Jr.patch(f,d)}}}).data),o}function r(a,n){let o,l=[],h={orthographic:0,perspective:0,geometry:0};function c(u,d){for(let[f,p]of Object.entries(d.layers)){let{texture:m,...g}=p;if(m!==void 0&&Object.keys(m).length>0){let v={path:[...u,"layers",f,"texture"],props:m,type:0};l.push(v)}if(Object.keys(g).length>0){let v={path:[...u,"layers",f],props:g,type:0};l.push(v)}}}for(let[u,d]of Object.entries(n))if(u!=="name")if(u==="cloner")l.push(...W6.toOps(d,["cloner"]));else if(u==="pathSnapping")l.push({path:[u],props:{slide:d.slide,offset:d.offset},type:0});else if(u==="material")c(["material"],d);else if(u==="materials")for(let[f,p]of Object.entries(d))c(["materials",f],p);else if(h[u]===0){if(u==="geometry"&&d.extrusion!==void 0){let f={path:[u,"extrusion"],props:d.extrusion,type:0};l.push(f),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let f={path:[u],props:d,type:0};l.push(f)}}else o===void 0&&(o={path:[],props:{},type:0},l.push(o)),o.props[u]=d;return l}e.toOps=r;function s(a,n){if(n===void 0)return a;let o={...a};if(Object.assign(o,Xu.merge(o,n)),Object.assign(o,{pathSnapping:Object.assign({},o.pathSnapping,{slide:n.pathSnapping?.slide??o.pathSnapping?.slide??0,offset:n.pathSnapping?.offset??o.pathSnapping?.offset??0})}),Fc.is(a.type)){o.orthographic={...o.orthographic},o.perspective={...o.perspective};let l=n;l.orthographic?.zoom!==void 0&&(o.orthographic.zoom=l.orthographic.zoom),l.perspective?.zoom!==void 0&&(o.perspective.zoom=l.perspective.zoom),l.isUpVectorFlipped!==void 0&&(o.isUpVectorFlipped=l.isUpVectorFlipped),l.targetOffset!==void 0&&(o.targetOffset=l.targetOffset)}else if(a.type==="Mesh")"geometry"in n&&Object.assign(o,{geometry:J6.merge(o.geometry,n.geometry)}),(n.material||n.materials)&&(o=i(o,n)),o.cloner&&"cloner"in n&&Object.assign(o,{cloner:Yl.merge(o.cloner,n.cloner)});else if(a.type==="Empty")o.cloner&&"cloner"in n&&Object.assign(o,{cloner:Yl.merge(o.cloner,n.cloner)});else if(q6.is(a.type)){let l=n;l.intensity!==void 0&&(o.intensity=l.intensity),l.color!==void 0&&(typeof l.color=="string"?o.color=l.color:o.color=g1.clone(l.color))}return o}e.patch=s})(cc||(cc={}));var Kg;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(Kg||(Kg={}));var Vo;(e=>e.defaultData={orbitControls:Kg.defaultData,playPage:Z3,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,i)=>{let r=0,s=0;return i<5?s=-30:i<10&&(s=30),i===0||i===10||i===5?r=30:(i===4||i===11||i===9)&&(r=-30),[120,[r,s],"show"]}),settings:{image:{format:"jpg",ratio:1},videoStatic:{fps:60,mbps:150,ratio:1,duration:1e3},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1,imageQuality:70}},stopRaycast:!0,hdTransmission:!1})(Vo||(Vo={}));var hx;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(hx||(hx={}));var cx;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(cx||(cx={}));var uc;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...hx.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:cx.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(uc||(uc={}));var Hd;(e=>{function t(r){return r.find(s=>s.data.type==="Page"&&s.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function i(r,s,a){r.scene.objects.traverseFrom(s,(n,o)=>{if(o.type==="Instance"){let l=Jg.getComponentData(r,o.component)?.data;l&&a(n,o,l.events)}else a(n,o,o.events)})}e.traverseModuleInstances=i})(Hd||(Hd={}));var dc;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultLight={fi:-1,data:ox.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]};function t(s=!0,a=[]){let n=[],o=lx.defaultMeshObject;s&&(n.push({...e.defaultLight}),n.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]})),n.push(...a);let l=new b1;return l.push({fi:1,id:Z3,data:{...Yu.defaultData,name:"Scene 1"},children:n}),l}e.createDefaultObjectTreeWithPage=t,e.defaultData={objects:t(),publish:Vo.defaultData,styles:uc.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new b1,publish:Vo.defaultData,styles:uc.defaultData()}},e.emptyDataWithPage=function(s=!0){return{objects:t(s),publish:Vo.defaultData,styles:uc.defaultData()}},e.emptyData=function(){return{objects:new b1,publish:{...Vo.defaultData},styles:uc.defaultData()}};function i(s){return{...e.defaultData,objects:Ea(s,b1.prototype)}}e.withObjs=i;function r(s,a){return i([{id:s,data:a,children:[],fi:0}])}e.withObj=r})(dc||(dc={}));var J3;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(J3||(J3={}));var ux;(e=>(e.defaultData=t=>({url:t,name:"New Webhook",parametersSchemas:new nt}),e.defaultParameterValueByType=t=>t==="number"?0:t==="boolean"?!1:""))(ux||(ux={}));var E8;(e=>e.defaultData=(t,i="GET")=>({url:t,method:i,name:"New API",headers:new nt,queries:new nt,autoStart:!0}))(E8||(E8={}));var w1;(e=>{function t(n){return n.textValue!==void 0}e.isTextValue=t;function i(n){return typeof n=="number"}e.isNumber=i;function r(n){return typeof n=="boolean"}e.isBoolean=r;function s(n){return t(n)?"string":r(n)?"boolean":"number"}e.typeOfVariable=s;function a(n){return e.isTextValue(n)?Array.isArray(n.textValue)?n.textValue.map(o=>o.toString().padStart(n.padding??2,"0")).join(n.deliminator??":")+(n.suffix!==void 0?" "+n.suffix:""):n.textValue.toString():e.isBoolean(n)?n?"True":"False":e.isNumber(n)?parseFloat(n.toFixed(3)).toString():n.toString()}e.getDisplayedValue=a})(w1||(w1={}));var dx;(e=>e.all=["images","videos","colors","audios","particles","fonts","materials","variables"])(dx||(dx={}));var T8;(e=>e.all=[...dx.all,"components"])(T8||(T8={}));var P8;(e=>{function t(){return{images:new ft,videos:new ft,colors:new ft,audios:new ft,particles:new ft,fonts:new ft,materials:new ft,components:new ft,variables:new ft,userAPIs:new ft,userWebhooks:new ft}}e.defaultData=t})(P8||(P8={}));var tl;(e=>{function t(){return{images:new ft,videos:new ft,colors:new ft,audios:new ft,particles:new ft,fonts:new ft,materials:new ft,components:new ft,variables:new ft,userAPIs:new ft,userWebhooks:new ft}}e.defaultData=t})(tl||(tl={}));var ha;(e=>{function t(){let n={};return n["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},Ea(n,ft.prototype)}e.defaultColors=t;function i(){return Ea({},ft.prototype)}e.defaultImages=i;function r(){return{catelogs:new ft,materials:new ft,images:new ft,videos:new ft,colors:new ft,audios:new ft,particles:new ft,fonts:new ft,variables:new nt,userAPIs:new ft,userWebhooks:new ft,lib:tl.defaultData()}}e.emptyData=r;function s(n){switch(n){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let o=[0,0,0];return{name:"Time",value:{textValue:o,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:o,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",n)}}e.defaultVariables=s;function a(n,o){if(o.format==="HH:mm:ss"){let l=Math.floor(n/3600),h=Math.floor((n-l*3600)/60),c=Math.round(n-l*3600-h*60);return{textValue:[l,h,c]}}else if(o.format==="mm:ss"){let l=Math.floor(n/60),h=Math.round(n-l*60);return{textValue:[l,h]}}else return o.format==="number"?n=Math.round(n):n=Math.round(n*1e3)/1e3,n}e.getFormattedTimerTime=a})(ha||(ha={}));var Qg;(e=>e.list=["idle","move","jump","run"])(Qg||(Qg={}));var Zg;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"],["run","⇧"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new nt,move:new nt,jump:new nt,run:new nt},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:_i.fromHexAndA(3728051,1)}}))(Zg||(Zg={}));function D8(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let i=t.colorA,r=t.colorB,s=[[i.r,i.g,i.b,i.a],[r.r,r.g,r.b,r.a]],a=[0,1];for(let o=2;o<10;o++)s.push(s[1]),a.push(1);let n={...Wn(gr(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:s,steps:a,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,n)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let i={...gr(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,i)}})}function Fl(e,t){Object.values(e.shared.materials).forEach(i=>t(i))}function Nl(e,t){e.scene.objects.traverse((i,r)=>{"materials"in r?r.materials.forEach((s,a)=>{s===void 0&&(r.materials[a]=i1.defaultData(),s=r.materials[a]),typeof s!="string"&&t(s)}):"material"in r?typeof r.material!="string"&&(r.material===void 0&&(r.material=i1.defaultData()),t(r.material)):r.type==="Mesh"&&(r.material===void 0&&(r.material=i1.defaultData()),t(r.material)),"overrides"in r&&Object.values(r.overrides).forEach(s=>{s.material&&typeof s.material!="string"&&Object.getPrototypeOf(s.material)!==Rr.prototype&&t(s.material)})})}function Kde(e){Object.assign(e.scene.publish,{orbitControls:{...Kg.defaultData,...gr(e.scene.publish.orbitControls)}})}function Qde(e){Object.assign(e.scene.publish.settings,{video:{...Vo.defaultData.settings.video,...gr(e.scene.publish.settings.video)}})}function Zde(e){function t(i){if(i.layers){for(let r of Object.values(i.layers))if(r){for(let[s,a]of Object.entries(r))if((qk.includes(s)||typeof a=="boolean")&&delete r[s],s==="texture")for(let[n,o]of Object.entries(a))(Yde.includes(n)||typeof o=="boolean")&&delete a[n]}}}e.scene.objects.traverse((i,r)=>{r.states.forEach(s=>{let a=s;a.material?t(a.material):a.materials&&a.materials.forEach(n=>{t(n)})})})}function Jde(e){e.scene.publish.withBackground=!0}function $de(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function efe(e){e.scene.objects.traverse((t,i)=>{let r=i.cloner;r&&(r.radial.scale=r.radial.scale.map(s=>s+1),r.linear.scale=r.linear.scale.map(s=>s+1))})}function tfe(e){e.scene.objects.traverse((t,i)=>{let r=i.geometry;r&&(r.type==="DodecahedronGeometry"||r.type==="IcosahedronGeometry")&&(r.detail=Math.round(r.detail))})}function ife(e){e.scene.objects.traverse((t,i)=>{let r=e.scene.objects.unproxy().parent(t);if(r){let s=gr(e.scene.objects.data(r));s&&s.type==="Mesh"&&s.geometry.type==="BooleanGeometry"&&i.type==="Mesh"&&(i.visible=gr(i).booleanExclude!==!0)}})}function rfe(e){e.scene.objects.traverse((t,i)=>{if(i.type==="Mesh"){let r=i;i.geometry.type==="NonParametricGeometry"?r.material!==void 0&&delete r.material:r.materials!==void 0&&delete r.materials}})}function sfe(e){function t(r){Object.setPrototypeOf(r,Rr.prototype),r.texture&&Object.setPrototypeOf(r.texture,Rr.prototype)}function i(r){Object.setPrototypeOf(r,Rr.prototype);for(let s in r)t(r[s])}e.scene.objects.traverse((r,s)=>{s.states.forEach(a=>{let n=a;if(n.material){let o=gr(n.material).layers;i(o),n.material.layers=o}if(n.materials)for(let o=0;o<n.materials.length;o++){let l=n.materials[o],h=gr(l).layers;i(h),l.layers=h}})})}function I8(e){e.layers===void 0&&Object.assign(e,i1.defaultTwoLayerData("lambert"))}function Qy(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let i=[...t.colors];i.push(t.colors[9]);let r=[...t.steps];r.push(t.steps[9]);let s={...gr(t),colors:i,steps:r};Object.assign(t,s)}})}function afe(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&(i.geometry.type==="BooleanGeometry"||i.geometry.type==="SubdivGeometry")&&(i.geometry.phongAngle=35)})}function O8(e){e.scene.objects.traverse((t,i)=>{"materials"in i?i.materials.forEach(r=>{typeof r!="string"&&Qy(r)}):"material"in i&&typeof i.material!="string"&&Qy(i.material)}),Object.values(e.shared.materials).forEach(t=>Qy(t))}function nfe(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,i)=>{(i.type==="DirectionalLight"||i.type==="SpotLight")&&(i.shadowResolution=1024,i.shadowRadius=1,i.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function ofe(e){e.shared.audios=Ea({},ft.prototype)}function lfe(e){e.shared.videos=Ea({},ft.prototype)}function hfe(e){let t=e.shared.materials;Object.entries(t).forEach(([i,r])=>{if(!r.layers){let s={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[i]:s})}})}function cfe(e){Object.entries(gr(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(gr(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function ufe(e){e.scene.publish.settings.web.preload=!1}function R8(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function L8(e){e.layers&&e.layers.forEach(t=>{Xde(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function dfe(e){e.shared.fonts=Ea({},ft.prototype)}function ffe(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function pfe(e){let t=[];e.scene.objects.traverse((i,r)=>{let s=r;if(s.type==="TextFrame"){let a=i1.defaultTwoLayerData("phong"),n=typeof s.color=="string"?e.shared.colors[s.color]:s.color;a.layers[1].data.color={r:n.r,g:n.g,b:n.b},a.layers[1].data.alpha=s.alpha;let o=ffe(s.font);e.shared.fonts[o]===void 0&&(e.shared.fonts[o]={name:o});let l={name:s.name,...Gr.defaultData,...kl.defaultData,flatShading:!1,wireframe:!1,geometry:{...Bl.defaultData("TextGeometry"),width:s.width,height:s.height,font:o,depth:0,horizontalAlign:s.horizontalAlign,verticalAlign:s.verticalAlign,fontSize:s.fontSize*1.40625,lineHeight:s.lineHeight/1.40625,letterSpacing:s.letterSpacing-1,text:s.text,textTransform:s.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:a,states:gr(s.states),events:gr(s.events),visible:s.visible,raycastLock:s.raycastLock,position:s.position,rotation:s.rotation,scale:s.scale,hiddenMatrix:s.hiddenMatrix},h=gr(e.scene.objects).parent(i);e.scene.objects.insertAfter(h??null,i,[{id:i+"new",data:l,children:[]}]),t.push(i)}}),t.forEach(i=>{e.scene.objects.delete(i)})}function mfe(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((i,r)=>{r.events.forEach(s=>{if(t[Number(s.type)])if(Object.assign(s,{type:t[Number(s.type)]}),s.type==="Audio"&&"audioEvent"in s&&(Object.assign(s,{playAudio:s.audioEvent}),delete s.audioEvent),s.type==="GameControl")Object.assign(s,{gameActions:{idle:new nt,move:new nt,jump:new nt}});else{let a=new nt;Object.assign(s,{actions:a}),(s.type==="MouseDown"||s.type==="MouseUp"||s.type==="KeyDown"||s.type==="KeyUp")&&"url"in s&&a.push({fi:0,id:Ke.generateUUID(),data:{type:"Link",url:s.url,delay:0}}),"targets"in s&&(s.targets.forEach((n,o,l)=>{let h={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},c={easing:n.easing,duration:n.duration};n.easing===6?Object.assign(c,Wn(n,"mass","stiffness","damping","velocity")):n.easing===5&&Object.assign(c,{control1:{...n.control1},control2:{...n.control2}});let u={repeat:n.repeat?-1:0,delay:n.delay,delayDirection:n.delayDirection,direction:n.cycle&&n.rewind?"pingpong-rewind":n.cycle?"pingpong":"normal"},d={state:n.state,...u,...c},f={allowSlerp:!0,type:"Transition",object:n.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new nt({fi:0,id:Ke.generateUUID(),data:h},{fi:1,id:Ke.generateUUID(),data:d})};a.push({fi:l,id:o,data:f})}),delete s.targets)}})})}function gfe(e){e.scene.objects.traverse((t,i)=>{function r(s,a){let n=new nt,o=[];if(i.events.forEach((l,h,c)=>{if(l.type==="Audio"&&l.trigger===a){let u;o.push(h),l.interaction==="play"?u={...Wn(l,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in l?l.after:void 0,toggle:"after"in l?l.toggle:void 0,type:"Audio"}:(l.interaction==="pause"||l.interaction==="stop")&&(u={...Wn(l,"interaction","delay","object","playAudio"),type:"Audio"}),u&&n.push({fi:c,id:h,data:u})}}),o.forEach(l=>i.events.delete(l)),n.length){let l=i.events.find(h=>h.type===s)?.data;l?"actions"in l&&l.actions.insertBefore(null,n):i.events.insertBefore(null,[{id:Ke.generateUUID(),data:{type:s,actions:n}}])}}r("Start","start"),r("MouseDown","mouseDown"),r("MouseUp","mouseUp"),r("KeyDown","keyDown"),r("KeyUp","keyUp")})}function z8(e){let t=e.layers.find(i=>i.type==="light")?.data;if(t?.category==="basic"){let i=Jr.defaultData("light","phong"),r=t;Object.assign(r,i),r.visible=!1}}function B8(e){Fl(e,z8),Nl(e,z8)}function vfe(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(i.geometry.scaleBaked||(i.geometry.scaleBaked=[1,1,1]))})}function yfe(e){e.scene.objects.traverse((t,i)=>{(i.type==="Empty"||i.type==="Mesh")&&i.cloner&&!i.cloner.randomnessObject&&!i.cloner.toObject&&!i.cloner.randomness&&(i.cloner={...i.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function xfe(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&i.geometry.type==="NonParametricGeometry"&&!("material"in i)&&!("materials"in i)&&(i.material=i1.defaultTwoLayerData("phong"))})}function bfe(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,i)=>{(i.type==="OrthographicCamera"||i.type==="PerspectiveCamera")&&(i.orthographic.autoZoom===void 0&&(i.orthographic.autoZoom=!1),i.orthographic.autoZoomFrustumSize===void 0&&(i.orthographic.autoZoomFrustumSize=790))})}function wfe(e){e.scene.objects.traverse((t,i)=>{i.pathSnapping===void 0&&(i.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),i.pathSnapping.offset===void 0&&(i.pathSnapping.offset=0)})}function _fe(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function Sfe(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function Afe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.resetYPosition=Math.abs(r.resetYPosition-i.position[1]))})})}function Mfe(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((i,r)=>{t&&r.physics===null?r.collision=!1:r.collision="visibility"})}function Cfe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.navmesh=Zg.defaultDataThirdPerson.navmesh)})})}function Efe(e){e.scene.styles||(e.scene.styles=uc.defaultData())}function k8(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function Tfe(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),Nl(e,k8),Fl(e,k8)}function Pfe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&Object.assign(r.gameActions,{run:new nt})})})}function Dfe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.keyAssignments=[...r.keyAssignments,["run","⇧"],["none","Ctrl"]])})})}function F8(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function Ife(e,t){if(t<1&&(Nl(e,D8),Fl(e,D8),e.schema=1),t<2&&(Kde(e),e.schema=2),t<3&&(Zde(e),e.schema=3),t<4&&(Jde(e),e.schema=4),t<5&&($de(e),e.schema=5),t<6&&(efe(e),e.schema=6),t<7&&(tfe(e),e.schema=7),t<8&&(e.schema=8),t<9&&(O8(e),e.schema=9),t<10&&(afe(e),e.schema=10),t<11&&(nfe(e),e.schema=11),t<12&&(O8(e),e.schema=12),t<13&&(ofe(e),e.schema=13),t<14&&(hfe(e),e.schema=14),t<15&&(cfe(e),e.schema=15),t<16&&(ufe(e),e.schema=16),t<17&&(Nl(e,R8),Fl(e,R8),e.schema=17),t<18&&(Nl(e,I8),Fl(e,I8),e.schema=18),t<19&&(Qde(e),e.schema=19),t<20&&(dfe(e),pfe(e),e.schema=20),t<21&&(mfe(e),gfe(e),e.schema=21),t<22&&(B8(e),e.schema=22),t<23&&(vfe(e),e.schema=23),t<24&&(yfe(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(lfe(e),t<25&&(e.schema=25)),t<26&&(ife(e),e.schema=26),t<27&&(rfe(e),e.schema=27),t<28&&(B8(e),e.schema=28),t<29&&(sfe(e),e.schema=29),t<30&&(xfe(e),e.schema=30),t<31&&(bfe(e),e.schema=31),t<33&&(wfe(e),e.schema=33),t<34&&(_fe(e),e.schema=34),t<35&&(Sfe(e),e.schema=35),t<36&&(Afe(e),e.schema=36),t<37&&(Mfe(e),e.schema=37),t<38&&(Nl(e,L8),Fl(e,L8),e.schema=38),t<39&&(Cfe(e),e.schema=39),t<40&&(Efe(e),e.schema=40),t<41&&(Tfe(e),e.schema=41),t<42&&(Pfe(e),e.schema=42),t<43&&(Dfe(e),e.schema=43),t<99){Nl(e,F8),Fl(e,F8),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=v0);let i=gr(e.scene.objects),r=e.scene.objects;e.scene.publish.playPage=Z3,r.insertBefore(null,null,[{id:Z3,data:{...Yu.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:Wn(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:Wn(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...qu.defaultData,...Wn(e.scene.environment,"usePhysics","gravity")},camera:gr(e.scene.ownerCamera)??Yu.defaultData.camera,name:"Scene"},children:[]}]);for(let n of i)n.id!==dc.TRASH_CAN_ID&&r.move(Z3,n.fi,n.id);let s=0,a=0;e.shared.penumbraSize&&e.scene.objects.traverse((n,o)=>{o.type==="DirectionalLight"?(o.penumbraSize=e.shared.penumbraSize[Math.min(s,2)],s+=1):o.type==="SpotLight"&&(o.penumbraSize=e.shared.penumbraSize[3+Math.min(a,1)],a+=1),(o.physics===void 0||o.physics===null)&&o.type!=="Instance"&&(o.physics={},Object.assign(o.physics,Wu.defaultData)),o.physics!==void 0&&o.physics!==null&&(o.physics.enabled=o.collision??"visibility",delete o.collision)}),e.schema=99}}function N8(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function Ofe(e){e.scene.objects.traverse((t,i)=>{let r=i.geometry;r&&r.type==="PathGeometry"&&(r.extrusion.capType="flat",r.extrusion.bevel=50,r.extrusion.bevelSides=6,r.extrusion.shape.type==="Custom"&&(r.extrusion.shape.shapeQuality="low"))})}function Rfe(e){Array.isArray(gr(e.events))&&e.events?.forEach(t=>{"disabled"in t||(t.disabled=!1),(t.type==="MouseDown"||t.type==="MouseUp"||t.type==="MousePress")&&(t.mode=t.mode||"Object")})}var U2=180/Math.PI;function U8(e){e.rotation=e.rotation.slice(0,3).map(t=>t*U2)}function Qk(e){U8(e),e.type==="Page"&&U8(e.camera),e.states?.forEach(i=>{i.rotation===void 0||i.rotation===null||(i.rotation=i.rotation.slice(0,3).map(r=>r*U2))});let t=e.geometry;t&&t.type==="SphereGeometry"&&(t.thetaLength=(t.thetaLength??180)*U2),t&&t.type==="TorusGeometry"&&(t.arc=t.arc*U2),t&&t.type==="PathGeometry"&&(t.extrusion.angle*=U2,t.extrusion.twist*=U2),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(gr(e.events))&&e.events?.forEach(i=>{(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"||i.type==="Collision"||i.type==="Trigger")&&(i.runMode=i.toggle?"Toggle":"Repeat")})}function Lfe(e){e.shared.variables=Ea({},ft.prototype)}function zfe(e){let t=gr(e.shared.variables);e.shared.variables=Ea(Object.entries(t??{}).map(([i,r],s)=>({fi:s,id:i,data:r})),nt.prototype)}var Eo=116;function Zk(e,t){t(e.data);for(let i of e.children)Zk(i,t)}function Bfe(e){let t=e.schema??104;t!==Eo&&t<105&&(Zk(e.asset,Qk),e.schema=105)}function kfe(e){e.shared.particles=Ea({},ft.prototype),e.shared.lib&&(e.shared.lib.particles=tl.defaultData().particles)}function Ffe(e){e.scene.objects.traverse((t,i)=>{i.type==="Particle"&&typeof i.renderMaterial.size=="number"&&Object.assign(i.renderMaterial,{size:[i.renderMaterial.size,i.renderMaterial.size]})})}function Nfe(e){e.scene.objects.traverse((t,i)=>{i.type==="Page"&&(i.postprocessing.depthOfField.focusDistance=100,i.postprocessing.depthOfField.focalLength=20,i.postprocessing.depthOfField.bokehScale=5)})}function Ufe(e){e.scene.objects.traverse((t,i)=>{Array.isArray(gr(i.events))!==!1&&i.events?.forEach(r=>{let s=r.runMode;r.type==="MouseDown"||r.type==="MouseUp"||r.type==="KeyDown"||r.type==="KeyUp"||r.type==="Collision"||r.type==="Trigger"?r.actions?.forEach(a=>{a.type==="Transition"&&(a.runMode=s??"Repeat"),(a.type==="Animation"||a.type==="SwitchCamera")&&(a.runMode=s==="Toggle"?"Toggle":"Normal")}):r.type==="MouseHover"||r.type==="MousePress"||r.type==="KeyPress"?r.actions?.forEach(a=>{(a.type==="Transition"||a.type==="Animation"||a.type==="SwitchCamera")&&(a.runMode="Toggle")}):r.type==="GameControl"?(delete r.actions,Object.keys(r.gameActions).forEach(a=>{r.gameActions[a]?.forEach(n=>{n.type==="Transition"&&(n.runMode="Repeat"),n.type==="Animation"&&(n.runMode="Normal")})})):r.type==="DragDrop"?(delete r.actions,r.dragDropActions?.drag?.forEach(a=>{(a.type==="Transition"||a.type==="Animation"||a.type==="SwitchCamera")&&(a.runMode="Toggle")}),r.dragDropActions?.drop?.forEach(a=>{(a.type==="Transition"||a.type==="Animation"||a.type==="SwitchCamera")&&(a.runMode="Toggle")})):r.type==="Resize"?(delete r.actions,r.breakpoints?.forEach(a=>{a.actions?.forEach(n=>{(n.type==="Transition"||n.type==="Animation"||n.type==="SwitchCamera")&&(n.runMode="Toggle")})})):r.type==="Start"?r.actions?.forEach(a=>{a.type==="Transition"&&(a.runMode="Once"),(a.type==="Animation"||a.type==="SwitchCamera")&&(a.runMode="Normal")}):r.type==="VariableChange"||r.type==="Scroll"?r.actions?.forEach(a=>{a.type==="Transition"&&(a.runMode="Repeat"),(a.type==="Animation"||a.type==="SwitchCamera")&&(a.runMode="Normal")}):r.type==="Conditional"&&(delete r.actions,r.inActions?.forEach(a=>{a.type==="Transition"&&(a.runMode="Repeat"),(a.type==="Animation"||a.type==="SwitchCamera")&&(a.runMode="Normal")}),r.outActions?.forEach(a=>{a.type==="Transition"&&(a.runMode="Repeat"),(a.type==="Animation"||a.type==="SwitchCamera")&&(a.runMode="Normal")}))})})}function Vfe(e){e.shared.userAPIs=Ea({},ft.prototype),e.shared.userWebhooks=Ea({},ft.prototype),e.shared.lib&&(e.shared.lib.userAPIs=tl.defaultData().userAPIs,e.shared.lib.userWebhooks=tl.defaultData().userWebhooks)}function jfe(e){e.scene.publish.settings.videoStatic===void 0&&(e.scene.publish.settings.videoStatic=Vo.defaultData.settings.videoStatic)}function Jk(e){let t=e.schema??0;if(t!==Eo){console.warn("updating from ",t,"to ",Eo),Ife(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=Vo.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(Nl(e,N8),Fl(e,N8),e.schema=101),t<102&&(Ofe(e),e.schema=102),t<104&&(e.shared.catelogs=new ft,e.shared.lib=tl.defaultData(),e.schema=104),t<105&&(Lfe(e),e.scene.objects.traverse((i,r)=>{Qk(r)}),e.schema=105);for(let i of Object.values(e.shared.lib.components))Bfe(i);t<106&&(zfe(e),e.schema=106),t<107&&(e.shared.lib.variables=tl.defaultData().variables,e.schema=107),t<109&&(kfe(e),e.schema=109),t<110&&(Ffe(e),e.schema=110),t<111&&(e.scene.objects.traverse((i,r)=>{Rfe(r)}),e.schema=111),t<112&&(Nfe(e),e.schema=112),t<113&&(Ufe(e),e.schema=113),t<114&&(e.scene.publish.settings.web.imageQuality===void 0&&(e.scene.publish.settings.web.imageQuality=70),e.schema=114),t<115&&(Vfe(e),e.schema=115),t<116&&(jfe(e),e.schema=116)}}var Jg;(e=>{e.defaultData={schema:Eo,scene:dc.defaultData,frames:new ft().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",J3.defaultData),shared:{...ha.emptyData(),colors:ha.defaultColors()}},e.emptyDataForImports=function(){let a=dc.emptyDataWithPage();return{schema:Eo,scene:a,frames:new ft().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",J3.defaultData),shared:{...ha.emptyData(),colors:ha.defaultColors(),images:ha.defaultImages()}}},e.emptyData=function(){return{schema:Eo,scene:dc.emptyDataWithPage(),frames:new ft().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",J3.defaultData),shared:ha.emptyData()}},e.clipboard2dData=function(){return{schema:Eo,scene:dc.emptyData(),frames:new ft,shared:ha.emptyData()}},e.collabHelper={...I6,updateSchema(a){return(a.schema??0)<Eo?jd(a,Jk):(a.schema??0)-Eo}};function t(a){let n=e.collabHelper.updateSchema(a);return typeof n=="number"?n===0?a:null:n.data}e.updateSchemaDirectly=t;function i(a){return{...a,shared:{...a.shared,lib:tl.defaultData()}}}e.withoutLib=i;function r(a,n){let o=a.scene.objects.get(n);if(o&&o.data.type==="Component")return o;{let l=a.shared.lib.components[n];if(l)return l.asset}}e.getComponentData=r;function s(a){let n=Object.values(a.shared.userAPIs);for(let o of n){let l=o.headers;for(let h of l)if(h.data.key.toLowerCase()==="authorization"&&h.data.value!=="")return!0}return!1}e.hasSensitiveData=s})(Jg||(Jg={}));var fx;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(fx||(fx={}));var V8;(e=>{function t(i){return!0}e.is=t})(V8||(V8={}));var $g;(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0,shear:[0,0]};function t(r,s){return{position:s?.position??r.position,rotation:s?.rotation??r.rotation,scale:s?.scale??r.scale,shear:s?.shear??r.shear}}e.merge=t;function i(r,s){return uk({position:Uo.isEqual(r.position,s.position)?void 0:s.position,rotation:r.rotation===s.rotation?void 0:s.rotation,scale:Uo.isEqual(r.scale,s.scale)?void 0:s.scale,shear:r.shear&&s.shear&&Uo.isEqual(r.shear,s.shear)?void 0:s.shear})}e.diff=i})($g||($g={}));var px;(e=>e.defaultData={horizontalConstraint:0,verticalConstraint:0})(px||(px={}));var j8;(e=>e.defaultData={direction:"row",wrap:"unwrap",align:"top-left",gap:10,rowGap:10,autoGap:!1,autoRowGap:!1,leftPadding:8,rightPadding:8,topPadding:8,bottomPadding:8})(j8||(j8={}));var ev;(e=>e.defaultData={opacity:1,fill:{color:_i.fromHexAndA(Xs,1),enabled:!0},stroke:{color:_i.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:_i.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:_i.from0to1([0,0,0,1]),enabled:!1,spread:0}})(ev||(ev={}));var fc;(e=>{function t(n,o){return{name:o}}e.newEmpty=t;function i(n,o){if(o===void 0)return n;let l={...n},h=["width","height","cornerRadius"];for(let c of h)c in l&&c in o&&o[c]!==void 0&&Object.assign(l,{[c]:o[c]});return l}function r(n,o){if(o===void 0)return n;let l={...n};return"fill"in l&&"fill"in o&&o.fill!==void 0&&Object.assign(l,{fill:{...l.fill,...o.fill}}),"stroke"in l&&"stroke"in o&&o.stroke!==void 0&&Object.assign(l,{stroke:{...l.stroke,...o.stroke}}),"layerBlur"in l&&"layerBlur"in o&&o.layerBlur!==void 0&&Object.assign(l,{layerBlur:{...l.layerBlur,...o.layerBlur}}),"backgroundBlur"in l&&"backgroundBlur"in o&&o.backgroundBlur!==void 0&&Object.assign(l,{backgroundBlur:{...l.backgroundBlur,...o.backgroundBlur}}),"dropShadow"in l&&"dropShadow"in o&&o.dropShadow!==void 0&&Object.assign(l,{dropShadow:{...l.dropShadow,...o.dropShadow}}),"innerShadow"in l&&"innerShadow"in o&&o.innerShadow!==void 0&&Object.assign(l,{innerShadow:{...l.innerShadow,...o.innerShadow}}),l}function s(n,o){if(o===void 0)return n;let l={...n};return Object.assign(l,$g.merge(l,o)),l=i(l,o),l=r(l,o),l}e.patch=s;function a(n,o){let l,h=[];for(let[c,u]of Object.entries(o))c!=="name"&&(l===void 0&&(l={path:[],props:{},type:0},h.push(l)),l.props[c]=u);return h}e.toOps=a})(fc||(fc={}));var Wd;(e=>e.defaultData={...$g.defaultData,...px.defaultData,states:new nt,events:new nt,visible:!0,raycastLock:!1})(Wd||(Wd={}));var Ku;(e=>e.defaultData={...Wd.defaultData,...ev.defaultData})(Ku||(Ku={}));var tv;(e=>e.defaultData={cornerRadius:[0,0,0,0]})(tv||(tv={}));var mx;(e=>e.defaultData={...Ku.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"})(mx||(mx={}));var qd;(e=>e.defaultData={...Ku.defaultData,...tv.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"})(qd||(qd={}));var gx;(e=>e.defaultData={...Ku.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"})(gx||(gx={}));var vx;(e=>e.defaultData={...Ku.defaultData,type:"path2d",path:"",name:"Path"})(vx||(vx={}));var G8;(e=>{function t(i){return i.type==="ellipse2d"||i.type==="rectangle2d"||i.type==="text2d"||i.type==="vector2d"||i.type==="path2d"}e.is=t})(G8||(G8={}));var iv;(e=>e.defaultData={...Wd.defaultData,name:"Group",type:"group2d"})(iv||(iv={}));var yx;(e=>e.defaultData=()=>({...Wd.defaultData,...tv.defaultData,...ev.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:_i.fromHexAndA(4737101,1),enabled:!0},stroke:{color:_i.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}}))(yx||(yx={}));var Pc;(e=>{function t(n){switch(n){case"rectangle2d":return{...qd.defaultData};case"ellipse2d":return{...mx.defaultData};case"text2d":return{...gx.defaultData};case"vector2d":return{...qd.defaultData};case"path2d":return{...vx.defaultData};case"frame2d":return{...yx.defaultData()};case"group2d":return{...iv.defaultData}}}e.defaultData=t;function i(n){return"width"in n&&"height"in n?[typeof n.width=="number"?n.width*.5:0,typeof n.height=="number"?n.height*.5:0]:[0,0]}e.getPivot=i;function r(n){return n.type==="rectangle2d"||n.type==="ellipse2d"||n.type==="text2d"||n.type==="frame2d"}e.isResizeable=r;function s(n){return n.type==="frame2d"&&n.autoLayout!==void 0}e.isAutoLayoutable=s;function a(n){return n.type==="rectangle2d"||n.type==="frame2d"}e.hasCorners=a})(Pc||(Pc={}));var xx;(e=>(e.defaultData={name:"UI",type:"scene2d",objects:new b1},e.emptyData=function(){return{type:"scene2d",objects:new b1}}))(xx||(xx={}));function pc(e,t=!1){let i=e[0].index!==null,r=new Set(Object.keys(e[0].attributes)),s=new Set(Object.keys(e[0].morphAttributes)),a={},n={},o=e[0].morphTargetsRelative,l=new rt,h=0;for(let c=0;c<e.length;++c){let u=e[c],d=0;if(i!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in u.attributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;a[f]===void 0&&(a[f]=[]),a[f].push(u.attributes[f]),d++}if(d!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(o!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in u.morphAttributes){if(!s.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;n[f]===void 0&&(n[f]=[]),n[f].push(u.morphAttributes[f])}if(t){let f;if(i)f=u.index.count;else if(u.attributes.position!==void 0)f=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;l.addGroup(h,f,c),h+=f}}if(i){let c=0,u=[];for(let d=0;d<e.length;++d){let f=e[d].index;for(let p=0;p<f.count;++p)u.push(f.getX(p)+c);c+=e[d].attributes.position.count}l.setIndex(u)}for(let c in a){let u=H8(a[c]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,u)}for(let c in n){let u=n[c][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let d=0;d<u;++d){let f=[];for(let m=0;m<n[c].length;++m)f.push(n[c][m][d]);let p=H8(f);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(p)}}return l}function H8(e){let t,i,r,s=0;for(let o=0;o<e.length;++o){let l=e[o];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(i===void 0&&(i=l.itemSize),i!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=l.normalized),r!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;s+=l.array.length}let a=new t(s),n=0;for(let o=0;o<e.length;++o)a.set(e[o].array,n),n+=e[o].array.length;return new mt(a,i,r)}var Gfe=Math.pow(2,-24),Mp=class{constructor(){}};function zn(e,t,i){return i.min.x=t[e],i.min.y=t[e+1],i.min.z=t[e+2],i.max.x=t[e+3],i.max.y=t[e+4],i.max.z=t[e+5],i}function W8(e){let t=-1,i=-1/0;for(let r=0;r<3;r++){let s=e[r+3]-e[r];s>i&&(i=s,t=r)}return t}function q8(e,t){t.set(e)}function X8(e,t,i){let r,s;for(let a=0;a<3;a++){let n=a+3;r=e[a],s=t[a],i[a]=r<s?r:s,r=e[n],s=t[n],i[n]=r>s?r:s}}function Cp(e,t,i){for(let r=0;r<3;r++){let s=t[e+2*r],a=t[e+2*r+1],n=s-a,o=s+a;n<i[r]&&(i[r]=n),o>i[r+3]&&(i[r+3]=o)}}function W0(e){let t=e[3]-e[0],i=e[4]-e[1],r=e[5]-e[2];return 2*(t*i+i*r+r*t)}function Hfe(e,t){if(!e.index){let i=e.attributes.position.count,r=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,s;i>65535?s=new Uint32Array(new r(4*i)):s=new Uint16Array(new r(2*i)),e.setIndex(new mt(s,1));for(let a=0;a<i;a++)s[a]=a}}function Wfe(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],i=new Set;for(let s of e.groups)i.add(s.start),i.add(s.start+s.count);let r=Array.from(i.values()).sort((s,a)=>s-a);for(let s=0;s<r.length-1;s++){let a=r[s],n=r[s+1];t.push({offset:a/3,count:(n-a)/3})}return t}function Zy(e,t,i,r,s=null){let a=1/0,n=1/0,o=1/0,l=-1/0,h=-1/0,c=-1/0,u=1/0,d=1/0,f=1/0,p=-1/0,m=-1/0,g=-1/0,v=s!==null;for(let y=t*6,x=(t+i)*6;y<x;y+=6){let w=e[y+0],_=e[y+1],b=w-_,M=w+_;b<a&&(a=b),M>l&&(l=M),v&&w<u&&(u=w),v&&w>p&&(p=w);let S=e[y+2],A=e[y+3],C=S-A,T=S+A;C<n&&(n=C),T>h&&(h=T),v&&S<d&&(d=S),v&&S>m&&(m=S);let D=e[y+4],R=e[y+5],O=D-R,j=D+R;O<o&&(o=O),j>c&&(c=j),v&&D<f&&(f=D),v&&D>g&&(g=D)}r[0]=a,r[1]=n,r[2]=o,r[3]=l,r[4]=h,r[5]=c,v&&(s[0]=u,s[1]=d,s[2]=f,s[3]=p,s[4]=m,s[5]=g)}function qfe(e,t,i,r){let s=1/0,a=1/0,n=1/0,o=-1/0,l=-1/0,h=-1/0;for(let c=t*6,u=(t+i)*6;c<u;c+=6){let d=e[c+0];d<s&&(s=d),d>o&&(o=d);let f=e[c+2];f<a&&(a=f),f>l&&(l=f);let p=e[c+4];p<n&&(n=p),p>h&&(h=p)}r[0]=s,r[1]=a,r[2]=n,r[3]=o,r[4]=l,r[5]=h}function Xfe(e,t,i,r,s){let a=i,n=i+r-1,o=s.pos,l=s.axis*2;for(;;){for(;a<=n&&t[a*6+l]<o;)a++;for(;a<=n&&t[n*6+l]>=o;)n--;if(a<n){for(let h=0;h<3;h++){let c=e[a*3+h];e[a*3+h]=e[n*3+h],e[n*3+h]=c;let u=t[a*6+h*2+0];t[a*6+h*2+0]=t[n*6+h*2+0],t[n*6+h*2+0]=u;let d=t[a*6+h*2+1];t[a*6+h*2+1]=t[n*6+h*2+1],t[n*6+h*2+1]=d}a++,n--}else return a}}var xo=32,Yfe=(e,t)=>e.candidate-t.candidate,yl=new Array(xo).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Ep=new Float32Array(6);function Kfe(e,t,i,r,s,a){let n=-1,o=0;if(a===0)n=W8(t),n!==-1&&(o=(t[n]+t[n+3])/2);else if(a===1)n=W8(e),n!==-1&&(o=Qfe(i,r,s,n));else if(a===2){let l=W0(e),h=1.25*s,c=r*6,u=(r+s)*6;for(let d=0;d<3;d++){let f=t[d],p=(t[d+3]-f)/xo;if(s<xo/4){let m=[...yl];m.length=s;let g=0;for(let y=c;y<u;y+=6,g++){let x=m[g];x.candidate=i[y+2*d],x.count=0;let{bounds:w,leftCacheBounds:_,rightCacheBounds:b}=x;for(let M=0;M<3;M++)b[M]=1/0,b[M+3]=-1/0,_[M]=1/0,_[M+3]=-1/0,w[M]=1/0,w[M+3]=-1/0;Cp(y,i,w)}m.sort(Yfe);let v=s;for(let y=0;y<v;y++){let x=m[y];for(;y+1<v&&m[y+1].candidate===x.candidate;)m.splice(y+1,1),v--}for(let y=c;y<u;y+=6){let x=i[y+2*d];for(let w=0;w<v;w++){let _=m[w];x>=_.candidate?Cp(y,i,_.rightCacheBounds):(Cp(y,i,_.leftCacheBounds),_.count++)}}for(let y=0;y<v;y++){let x=m[y],w=x.count,_=s-x.count,b=x.leftCacheBounds,M=x.rightCacheBounds,S=0;w!==0&&(S=W0(b)/l);let A=0;_!==0&&(A=W0(M)/l);let C=1+1.25*(S*w+A*_);C<h&&(n=d,h=C,o=x.candidate)}}else{for(let v=0;v<xo;v++){let y=yl[v];y.count=0,y.candidate=f+p+v*p;let x=y.bounds;for(let w=0;w<3;w++)x[w]=1/0,x[w+3]=-1/0}for(let v=c;v<u;v+=6){let y=~~((i[v+2*d]-f)/p);y>=xo&&(y=xo-1);let x=yl[y];x.count++,Cp(v,i,x.bounds)}let m=yl[xo-1];q8(m.bounds,m.rightCacheBounds);for(let v=xo-2;v>=0;v--){let y=yl[v],x=yl[v+1];X8(y.bounds,x.rightCacheBounds,y.rightCacheBounds)}let g=0;for(let v=0;v<xo-1;v++){let y=yl[v],x=y.count,w=y.bounds,_=yl[v+1].rightCacheBounds;x!==0&&(g===0?q8(w,Ep):X8(w,Ep,Ep)),g+=x;let b=0,M=0;g!==0&&(b=W0(Ep)/l);let S=s-g;S!==0&&(M=W0(_)/l);let A=1+1.25*(b*g+M*S);A<h&&(n=d,h=A,o=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${a} used.`);return{axis:n,pos:o}}function Qfe(e,t,i,r){let s=0;for(let a=t,n=t+i;a<n;a++)s+=e[a*6+r*2];return s/i}function Zfe(e,t){let i=e.attributes.position,r=e.index.array,s=r.length/3,a=new Float32Array(s*6),n=i.normalized,o=i.array,l=i.offset||0,h=3;i.isInterleavedBufferAttribute&&(h=i.data.stride);let c=["getX","getY","getZ"];for(let u=0;u<s;u++){let d=u*3,f=u*6,p,m,g;n?(p=r[d+0],m=r[d+1],g=r[d+2]):(p=r[d+0]*h+l,m=r[d+1]*h+l,g=r[d+2]*h+l);for(let v=0;v<3;v++){let y,x,w;n?(y=i[c[v]](p),x=i[c[v]](m),w=i[c[v]](g)):(y=o[p+v],x=o[m+v],w=o[g+v]);let _=y;x<_&&(_=x),w<_&&(_=w);let b=y;x>b&&(b=x),w>b&&(b=w);let M=(b-_)/2,S=v*2;a[f+S+0]=_+M,a[f+S+1]=M+(Math.abs(_)+M)*Gfe,_<t[v]&&(t[v]=_),b>t[v+3]&&(t[v+3]=b)}}return a}function Jfe(e,t){function i(v){d&&d(v/f)}function r(v,y,x,w=null,_=0){if(!p&&_>=l&&(p=!0,h&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),x<=c||_>=l)return i(y+x),v.offset=y,v.count=x,v;let b=Kfe(v.boundingData,w,n,y,x,u);if(b.axis===-1)return i(y+x),v.offset=y,v.count=x,v;let M=Xfe(o,n,y,x,b);if(M===y||M===y+x)i(y+x),v.offset=y,v.count=x;else{v.splitAxis=b.axis;let S=new Mp,A=y,C=M-y;v.left=S,S.boundingData=new Float32Array(6),Zy(n,A,C,S.boundingData,a),r(S,A,C,a,_+1);let T=new Mp,D=M,R=x-C;v.right=T,T.boundingData=new Float32Array(6),Zy(n,D,R,T.boundingData,a),r(T,D,R,a,_+1)}return v}Hfe(e,t);let s=new Float32Array(6),a=new Float32Array(6),n=Zfe(e,s),o=e.index.array,l=t.maxDepth,h=t.verbose,c=t.maxLeafTris,u=t.strategy,d=t.onProgress,f=e.index.count/3,p=!1,m=[],g=Wfe(e);if(g.length===1){let v=g[0],y=new Mp;y.boundingData=s,qfe(n,v.offset,v.count,a),r(y,v.offset,v.count,a),m.push(y)}else for(let v of g){let y=new Mp;y.boundingData=new Float32Array(6),Zy(n,v.offset,v.count,y.boundingData,a),r(y,v.offset,v.count,a),m.push(y)}return m}function $fe(e,t){let i=Jfe(e,t),r,s,a,n=[],o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<i.length;c++){let u=i[c],d=l(u),f=new o(32*d);r=new Float32Array(f),s=new Uint32Array(f),a=new Uint16Array(f),h(0,u),n.push(f)}return n;function l(c){return c.count?1:1+l(c.left)+l(c.right)}function h(c,u){let d=c/4,f=c/2,p=!!u.count,m=u.boundingData;for(let g=0;g<6;g++)r[d+g]=m[g];if(p){let g=u.offset,v=u.count;return s[d+6]=g,a[f+14]=v,a[f+15]=65535,c+32}else{let g=u.left,v=u.right,y=u.splitAxis,x;if(x=h(c+32,g),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return s[d+6]=x/4,x=h(x,v),s[d+7]=y,x}}}var il=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,r=-1/0;for(let s=0,a=e.length;s<a;s++){let n=e[s][t];i=n<i?n:i,r=n>r?n:r}this.min=i,this.max=r}setFromPoints(e,t){let i=1/0,r=-1/0;for(let s=0,a=t.length;s<a;s++){let n=t[s],o=e.dot(n);i=o<i?o:i,r=o>r?o:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}};il.prototype.setFromBox=function(){let e=new E;return function(t,i){let r=i.min,s=i.max,a=1/0,n=-1/0;for(let o=0;o<=1;o++)for(let l=0;l<=1;l++)for(let h=0;h<=1;h++){e.x=r.x*o+s.x*(1-o),e.y=r.y*l+s.y*(1-l),e.z=r.z*h+s.z*(1-h);let c=t.dot(e);a=Math.min(c,a),n=Math.max(c,n)}this.min=a,this.max=n}}();var epe=function(){let e=new E,t=new E,i=new E;return function(r,s,a){let n=r.start,o=e,l=s.start,h=t;i.subVectors(n,l),e.subVectors(r.end,r.start),t.subVectors(s.end,s.start);let c=i.dot(h),u=h.dot(o),d=h.dot(h),f=i.dot(o),p=o.dot(o)*d-u*u,m,g;p!==0?m=(c*u-f*d)/p:m=0,g=(c+m*u)/d,a.x=m,a.y=g}}(),x_=function(){let e=new re,t=new E,i=new E;return function(r,s,a,n){epe(r,s,e);let o=e.x,l=e.y;if(o>=0&&o<=1&&l>=0&&l<=1){r.at(o,a),s.at(l,n);return}else if(o>=0&&o<=1){l<0?s.at(0,n):s.at(1,n),r.closestPointToPoint(n,!0,a);return}else if(l>=0&&l<=1){o<0?r.at(0,a):r.at(1,a),s.closestPointToPoint(a,!0,n);return}else{let h;o<0?h=r.start:h=r.end;let c;l<0?c=s.start:c=s.end;let u=t,d=i;if(r.closestPointToPoint(c,!0,t),s.closestPointToPoint(h,!0,i),u.distanceToSquared(c)<=d.distanceToSquared(h)){a.copy(u),n.copy(c);return}else{a.copy(h),n.copy(d);return}}}}(),tpe=function(){let e=new E,t=new E,i=new ds,r=new wa;return function(s,a){let{radius:n,center:o}=s,{a:l,b:h,c}=a;if(r.start=l,r.end=h,r.closestPointToPoint(o,!0,e).distanceTo(o)<=n||(r.start=l,r.end=c,r.closestPointToPoint(o,!0,e).distanceTo(o)<=n)||(r.start=h,r.end=c,r.closestPointToPoint(o,!0,e).distanceTo(o)<=n))return!0;let u=a.getPlane(i);if(Math.abs(u.distanceToPoint(o))<=n){let d=u.projectPoint(o,t);if(a.containsPoint(d))return!0}return!1}}(),ipe=1e-15;function y2(e){return Math.abs(e)<ipe}var rl=class extends y1{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new E),this.satBounds=new Array(4).fill().map(()=>new il),this.points=[this.a,this.b,this.c],this.sphere=new Cs,this.plane=new ds,this.needsUpdate=!0}intersectsSphere(e){return tpe(e,this)}update(){let e=this.a,t=this.b,i=this.c,r=this.points,s=this.satAxes,a=this.satBounds,n=s[0],o=a[0];this.getNormal(n),o.setFromPoints(n,r);let l=s[1],h=a[1];l.subVectors(e,t),h.setFromPoints(l,r);let c=s[2],u=a[2];c.subVectors(t,i),u.setFromPoints(c,r);let d=s[3],f=a[3];d.subVectors(i,e),f.setFromPoints(d,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(n,e),this.needsUpdate=!1}};rl.prototype.closestPointToSegment=function(){let e=new E,t=new E,i=new wa;return function(r,s=null,a=null){let{start:n,end:o}=r,l=this.points,h,c=1/0;for(let u=0;u<3;u++){let d=(u+1)%3;i.start.copy(l[u]),i.end.copy(l[d]),x_(i,r,e,t),h=e.distanceToSquared(t),h<c&&(c=h,s&&s.copy(e),a&&a.copy(t))}return this.closestPointToPoint(n,e),h=n.distanceToSquared(e),h<c&&(c=h,s&&s.copy(e),a&&a.copy(n)),this.closestPointToPoint(o,e),h=o.distanceToSquared(e),h<c&&(c=h,s&&s.copy(e),a&&a.copy(o)),Math.sqrt(c)}}();rl.prototype.intersectsTriangle=function(){let e=new rl,t=new Array(3),i=new Array(3),r=new il,s=new il,a=new E,n=new E,o=new E,l=new E,h=new wa,c=new wa,u=new wa;return function(d,f=null,p=!1){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(e.copy(d),e.update(),d=e);let m=this.plane,g=d.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){let v=this.satBounds,y=this.satAxes;i[0]=d.a,i[1]=d.b,i[2]=d.c;for(let _=0;_<4;_++){let b=v[_],M=y[_];if(r.setFromPoints(M,i),b.isSeparated(r))return!1}let x=d.satBounds,w=d.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let _=0;_<4;_++){let b=x[_],M=w[_];if(r.setFromPoints(M,t),b.isSeparated(r))return!1}for(let _=0;_<4;_++){let b=y[_];for(let M=0;M<4;M++){let S=w[M];if(a.crossVectors(b,S),r.setFromPoints(a,t),s.setFromPoints(a,i),r.isSeparated(s))return!1}}return f&&(p||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let v=this.points,y=!1,x=0;for(let R=0;R<3;R++){let O=v[R],j=v[(R+1)%3];h.start.copy(O),h.end.copy(j),h.delta(n);let X=y?c.start:c.end,N=y2(g.distanceToPoint(O));if(y2(g.normal.dot(n))&&N){c.copy(h),x=2;break}if((g.intersectLine(h,X)||N)&&!y2(X.distanceTo(j))){if(x++,y)break;y=!0}}if(x===1&&d.containsPoint(c.end))return f&&(f.start.copy(c.end),f.end.copy(c.end)),!0;if(x!==2)return!1;let w=d.points,_=!1,b=0;for(let R=0;R<3;R++){let O=w[R],j=w[(R+1)%3];h.start.copy(O),h.end.copy(j),h.delta(o);let X=_?u.start:u.end,N=y2(m.distanceToPoint(O));if(y2(m.normal.dot(o))&&N){u.copy(h),b=2;break}if((m.intersectLine(h,X)||N)&&!y2(X.distanceTo(j))){if(b++,_)break;_=!0}}if(b===1&&this.containsPoint(u.end))return f&&(f.start.copy(u.end),f.end.copy(u.end)),!0;if(b!==2)return!1;if(c.delta(n),u.delta(o),n.dot(o)<0){let R=u.start;u.start=u.end,u.end=R}let M=c.start.dot(n),S=c.end.dot(n),A=u.start.dot(n),C=u.end.dot(n),T=S<A,D=M<C;return M!==C&&A!==S&&T===D?!1:(f&&(l.subVectors(c.start,u.start),l.dot(n)>0?f.start.copy(c.start):f.start.copy(u.start),l.subVectors(c.end,u.end),l.dot(n)<0?f.end.copy(c.end):f.end.copy(u.end)),!0)}}}();rl.prototype.distanceToPoint=function(){let e=new E;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();rl.prototype.distanceToTriangle=function(){let e=new E,t=new E,i=["a","b","c"],r=new wa,s=new wa;return function(a,n=null,o=null){let l=n||o?r:null;if(this.intersectsTriangle(a,l))return(n||o)&&(n&&l.getCenter(n),o&&l.getCenter(o)),0;let h=1/0;for(let c=0;c<3;c++){let u,d=i[c],f=a[d];this.closestPointToPoint(f,e),u=f.distanceToSquared(e),u<h&&(h=u,n&&n.copy(e),o&&o.copy(f));let p=this[d];a.closestPointToPoint(p,e),u=p.distanceToSquared(e),u<h&&(h=u,n&&n.copy(p),o&&o.copy(e))}for(let c=0;c<3;c++){let u=i[c],d=i[(c+1)%3];r.set(this[u],this[d]);for(let f=0;f<3;f++){let p=i[f],m=i[(f+1)%3];s.set(a[p],a[m]),x_(r,s,e,t);let g=e.distanceToSquared(t);g<h&&(h=g,n&&n.copy(e),o&&o.copy(t))}}return Math.sqrt(h)}}();var Zn=class{constructor(e,t,i){this.isOrientedBox=!0,this.min=new E,this.max=new E,this.matrix=new Fe,this.invMatrix=new Fe,this.points=new Array(8).fill().map(()=>new E),this.satAxes=new Array(3).fill().map(()=>new E),this.satBounds=new Array(3).fill().map(()=>new il),this.alignedSatBounds=new Array(3).fill().map(()=>new il),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),i&&this.matrix.copy(i)}set(e,t,i){this.min.copy(e),this.max.copy(t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Zn.prototype.update=function(){return function(){let e=this.matrix,t=this.min,i=this.max,r=this.points;for(let l=0;l<=1;l++)for(let h=0;h<=1;h++)for(let c=0;c<=1;c++){let u=1*l|2*h|4*c,d=r[u];d.x=l?i.x:t.x,d.y=h?i.y:t.y,d.z=c?i.z:t.z,d.applyMatrix4(e)}let s=this.satBounds,a=this.satAxes,n=r[0];for(let l=0;l<3;l++){let h=a[l],c=s[l],u=1<<l,d=r[u];h.subVectors(n,d),c.setFromPoints(h,r)}let o=this.alignedSatBounds;o[0].setFromPointsField(r,"x"),o[1].setFromPointsField(r,"y"),o[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Zn.prototype.intersectsBox=function(){let e=new il;return function(t){this.needsUpdate&&this.update();let i=t.min,r=t.max,s=this.satBounds,a=this.satAxes,n=this.alignedSatBounds;if(e.min=i.x,e.max=r.x,n[0].isSeparated(e)||(e.min=i.y,e.max=r.y,n[1].isSeparated(e))||(e.min=i.z,e.max=r.z,n[2].isSeparated(e)))return!1;for(let o=0;o<3;o++){let l=a[o],h=s[o];if(e.setFromBox(l,t),h.isSeparated(e))return!1}return!0}}();Zn.prototype.intersectsTriangle=function(){let e=new rl,t=new Array(3),i=new il,r=new il,s=new E;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);let n=this.satBounds,o=this.satAxes;t[0]=a.a,t[1]=a.b,t[2]=a.c;for(let u=0;u<3;u++){let d=n[u],f=o[u];if(i.setFromPoints(f,t),d.isSeparated(i))return!1}let l=a.satBounds,h=a.satAxes,c=this.points;for(let u=0;u<3;u++){let d=l[u],f=h[u];if(i.setFromPoints(f,c),d.isSeparated(i))return!1}for(let u=0;u<3;u++){let d=o[u];for(let f=0;f<4;f++){let p=h[f];if(s.crossVectors(d,p),i.setFromPoints(s,t),r.setFromPoints(s,c),i.isSeparated(r))return!1}}return!0}}();Zn.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Zn.prototype.distanceToPoint=function(){let e=new E;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Zn.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new wa),i=new Array(12).fill().map(()=>new wa),r=new E,s=new E;return function(a,n=0,o=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(o||l)&&(a.getCenter(s),this.closestPointToPoint(s,r),a.closestPointToPoint(r,s),o&&o.copy(r),l&&l.copy(s)),0;let h=n*n,c=a.min,u=a.max,d=this.points,f=1/0;for(let m=0;m<8;m++){let g=d[m];s.copy(g).clamp(c,u);let v=g.distanceToSquared(s);if(v<f&&(f=v,o&&o.copy(g),l&&l.copy(s),v<h))return Math.sqrt(v)}let p=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){let y=(m+1)%3,x=(m+2)%3,w=g<<y|v<<x,_=1<<m|g<<y|v<<x,b=d[w],M=d[_];t[p].set(b,M);let S=e[m],A=e[y],C=e[x],T=i[p],D=T.start,R=T.end;D[S]=c[S],D[A]=g?c[A]:u[A],D[C]=v?c[C]:u[A],R[S]=u[S],R[A]=g?c[A]:u[A],R[C]=v?c[C]:u[A],p++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){s.x=m?u.x:c.x,s.y=g?u.y:c.y,s.z=v?u.z:c.z,this.closestPointToPoint(s,r);let y=s.distanceToSquared(r);if(y<f&&(f=y,o&&o.copy(r),l&&l.copy(s),y<h))return Math.sqrt(y)}for(let m=0;m<12;m++){let g=t[m];for(let v=0;v<12;v++){let y=i[v];x_(g,y,r,s);let x=r.distanceToSquared(s);if(x<f&&(f=x,o&&o.copy(r),l&&l.copy(s),x<h))return Math.sqrt(x)}}return Math.sqrt(f)}}();var x2=new E,b2=new E,w2=new E,Tp=new re,Pp=new re,Dp=new re,Y8=new E,K8=new E,Q8=new E,Ip=new E;function rpe(e,t,i,r,s,a){let n;return a===r1?n=e.intersectTriangle(r,i,t,!0,s):n=e.intersectTriangle(t,i,r,a!==N1,s),n===null?null:{distance:e.origin.distanceTo(s),point:s.clone()}}function spe(e,t,i,r,s,a,n,o,l){x2.fromBufferAttribute(t,a),b2.fromBufferAttribute(t,n),w2.fromBufferAttribute(t,o);let h=rpe(e,x2,b2,w2,Ip,l);if(h){r&&(Tp.fromBufferAttribute(r,a),Pp.fromBufferAttribute(r,n),Dp.fromBufferAttribute(r,o),h.uv=y1.getInterpolation(Ip,x2,b2,w2,Tp,Pp,Dp,new re)),s&&(Tp.fromBufferAttribute(s,a),Pp.fromBufferAttribute(s,n),Dp.fromBufferAttribute(s,o),h.uv1=y1.getInterpolation(Ip,x2,b2,w2,Tp,Pp,Dp,new re)),i&&(Y8.fromBufferAttribute(i,a),K8.fromBufferAttribute(i,n),Q8.fromBufferAttribute(i,o),h.normal=y1.getInterpolation(Ip,x2,b2,w2,Y8,K8,Q8,new E),h.normal.dot(e.direction)>0&&h.normal.multiplyScalar(-1));let c={a,b:n,c:o,normal:new E,materialIndex:0};y1.getNormal(x2,b2,w2,c.normal),h.face=c,h.faceIndex=a}return h}function $k(e,t,i,r,s){let a=r*3,n=e.index.getX(a),o=e.index.getX(a+1),l=e.index.getX(a+2),{position:h,normal:c,uv:u,uv1:d}=e.attributes,f=spe(i,h,c,u,d,n,o,l,t);return f?(f.faceIndex=r,s&&s.push(f),f):null}function ape(e,t,i,r,s,a){for(let n=r,o=r+s;n<o;n++)$k(e,t,i,n,a)}function npe(e,t,i,r,s){let a=1/0,n=null;for(let o=r,l=r+s;o<l;o++){let h=$k(e,t,i,o);h&&h.distance<a&&(n=h,a=h.distance)}return n}function In(e,t,i,r){let s=e.a,a=e.b,n=e.c,o=t,l=t+1,h=t+2;i&&(o=i.getX(t),l=i.getX(t+1),h=i.getX(t+2)),s.x=r.getX(o),s.y=r.getY(o),s.z=r.getZ(o),a.x=r.getX(l),a.y=r.getY(l),a.z=r.getZ(l),n.x=r.getX(h),n.y=r.getY(h),n.z=r.getZ(h)}function Z8(e,t,i,r,s,a,n){let o=i.index,l=i.attributes.position;for(let h=e,c=t+e;h<c;h++)if(In(n,h*3,o,l),n.needsUpdate=!0,r(n,h,s,a))return!0;return!1}var eF=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function Ul(e,t){return t[e+15]===65535}function gu(e,t){return t[e+6]}function Xd(e,t){return t[e+14]}function Yd(e){return e+8}function Kd(e,t){return t[e+6]}function ope(e,t){return t[e+7]}var tu=new yr,rv=new E,lpe=["x","y","z"];function bx(e,t,i,r,s){let a=e*2,n=y0,o=nh,l=oh;if(Ul(a,o)){let h=gu(e,l),c=Xd(a,o);ape(t,i,r,h,c,s)}else{let h=Yd(e);sv(h,n,r,rv)&&bx(h,t,i,r,s);let c=Kd(e,l);sv(c,n,r,rv)&&bx(c,t,i,r,s)}}function wx(e,t,i,r){let s=e*2,a=y0,n=nh,o=oh;if(Ul(s,n)){let l=gu(e,o),h=Xd(s,n);return npe(t,i,r,l,h)}else{let l=ope(e,o),h=lpe[l],c=r.direction[h]>=0,u,d;c?(u=Yd(e),d=Kd(e,o)):(u=Kd(e,o),d=Yd(e));let f=sv(u,a,r,rv)?wx(u,t,i,r):null;if(f){let m=f.point[h];if(c?m<=a[d+l]:m>=a[d+l+3])return f}let p=sv(d,a,r,rv)?wx(d,t,i,r):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}var hpe=function(){let e,t,i=[],r=new eF(()=>new yr);return function(...a){e=r.getPrimitive(),t=r.getPrimitive(),i.push(e,t);let n=s(...a);r.releasePrimitive(e),r.releasePrimitive(t),i.pop(),i.pop();let o=i.length;return o>0&&(t=i[o-1],e=i[o-2]),n};function s(a,n,o,l,h=null,c=0,u=0){function d(y){let x=y*2,w=nh,_=oh;for(;!Ul(x,w);)y=Yd(y),x=y*2;return gu(y,_)}function f(y){let x=y*2,w=nh,_=oh;for(;!Ul(x,w);)y=Kd(y,_),x=y*2;return gu(y,_)+Xd(x,w)}let p=a*2,m=y0,g=nh,v=oh;if(Ul(p,g)){let y=gu(a,v),x=Xd(p,g);return zn(a,m,e),l(y,x,!1,u,c+a,e)}else{let y=Yd(a),x=Kd(a,v),w=y,_=x,b,M,S,A;if(h&&(S=e,A=t,zn(w,m,S),zn(_,m,A),b=h(S),M=h(A),M<b)){w=x,_=y;let X=b;b=M,M=X,S=A}S||(S=e,zn(w,m,S));let C=Ul(w*2,g),T=o(S,C,b,u+1,c+w),D;if(T===2){let X=d(w),N=f(w)-X;D=l(X,N,!0,u+1,c+w,S)}else D=T&&s(w,n,o,l,h,c,u+1);if(D)return!0;A=t,zn(_,m,A);let R=Ul(_*2,g),O=o(A,R,M,u+1,c+_),j;if(O===2){let X=d(_),N=f(_)-X;j=l(X,N,!0,u+1,c+_,A)}else j=O&&s(_,n,o,l,h,c,u+1);return!!j}}}(),cpe=function(){let e=new rl,t=new rl,i=new Fe,r=new Zn,s=new Zn;return function a(n,o,l,h,c=null){let u=n*2,d=y0,f=nh,p=oh;if(c===null&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,h),c=r),Ul(u,f)){let m=o,g=m.index,v=m.attributes.position,y=l.index,x=l.attributes.position,w=gu(n,p),_=Xd(u,f);if(i.copy(h).invert(),l.boundsTree)return zn(n,d,s),s.matrix.copy(i),s.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:b=>s.intersectsBox(b),intersectsTriangle:b=>{b.a.applyMatrix4(h),b.b.applyMatrix4(h),b.c.applyMatrix4(h),b.needsUpdate=!0;for(let M=w*3,S=(_+w)*3;M<S;M+=3)if(In(t,M,g,v),t.needsUpdate=!0,b.intersectsTriangle(t))return!0;return!1}});for(let b=w*3,M=_+w*3;b<M;b+=3){In(e,b,g,v),e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let S=0,A=y.count;S<A;S+=3)if(In(t,S,y,x),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let m=n+8,g=p[n+6];return zn(m,d,tu),!!(c.intersectsBox(tu)&&a(m,o,l,h,c)||(zn(g,d,tu),c.intersectsBox(tu)&&a(g,o,l,h,c)))}}}();function sv(e,t,i,r){return zn(e,t,tu),i.intersectBox(tu,r)}var _x=[],Rm,y0,nh,oh;function y3(e){Rm&&_x.push(Rm),Rm=e,y0=new Float32Array(e),nh=new Uint16Array(e),oh=new Uint32Array(e)}function Op(){Rm=null,y0=null,nh=null,oh=null,_x.length&&y3(_x.pop())}var Jy=Symbol("skip tree generation"),$y=new yr,e9=new yr,_2=new Fe,Uh=new Zn,q0=new Zn,X0=new E,Rp=new E,upe=new E,dpe=new E,fpe=new E,J8=new yr,fn=new eF(()=>new rl),$3=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),$3.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let i=e.geometry,r=e._roots,s=i.getIndex(),a;return t.cloneBuffers?a={roots:r.map(n=>n.slice()),index:s.array.slice()}:a={roots:r,index:s.array},a}static deserialize(e,t,i={}){if(typeof i=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),$3.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});i={setIndex:!0,...i};let{index:r,roots:s}=e,a=new $3(t,{...i,[Jy]:!0});if(a._roots=s,i.setIndex){let n=t.getIndex();if(n===null){let o=new mt(e.index,1,!1);t.setIndex(o)}else n.array!==r&&(n.array.set(r),n.needsUpdate=!0)}return a}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[Jy]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[Jy]||(this._roots=$fe(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new yr))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,i=t.index.array,r=t.attributes.position,s,a,n,o,l=0,h=this._roots;for(let u=0,d=h.length;u<d;u++)s=h[u],a=new Uint32Array(s),n=new Uint16Array(s),o=new Float32Array(s),c(0,l),l+=s.byteLength;function c(u,d,f=!1){let p=u*2;if(n[p+15]===65535){let m=a[u+6],g=n[p+14],v=1/0,y=1/0,x=1/0,w=-1/0,_=-1/0,b=-1/0;for(let M=3*m,S=3*(m+g);M<S;M++){let A=i[M],C=r.getX(A),T=r.getY(A),D=r.getZ(A);C<v&&(v=C),C>w&&(w=C),T<y&&(y=T),T>_&&(_=T),D<x&&(x=D),D>b&&(b=D)}return o[u+0]!==v||o[u+1]!==y||o[u+2]!==x||o[u+3]!==w||o[u+4]!==_||o[u+5]!==b?(o[u+0]=v,o[u+1]=y,o[u+2]=x,o[u+3]=w,o[u+4]=_,o[u+5]=b,!0):!1}else{let m=u+8,g=a[u+6],v=m+d,y=g+d,x=f,w=!1,_=!1;e?x||(w=e.has(v),_=e.has(y),x=!w&&!_):(w=!0,_=!0);let b=x||w,M=x||_,S=!1;b&&(S=c(m,d,x));let A=!1;M&&(A=c(g,d,x));let C=S||A;if(C)for(let T=0;T<3;T++){let D=m+T,R=g+T,O=o[D],j=o[D+3],X=o[R],N=o[R+3];o[u+T]=O<X?O:X,o[u+T+3]=j>N?j:N}return C}}}traverse(e,t=0){let i=this._roots[t],r=new Uint32Array(i),s=new Uint16Array(i);a(0);function a(n,o=0){let l=n*2,h=s[l+15]===65535;if(h){let c=r[n+6],u=s[l+14];e(o,h,new Float32Array(i,n*4,6),c,u)}else{let c=n+8,u=r[n+6],d=r[n+7];e(o,h,new Float32Array(i,n*4,6),d)||(a(c,o+1),a(u,o+1))}}}raycast(e,t=tn){let i=this._roots,r=this.geometry,s=[],a=t.isMaterial,n=Array.isArray(t),o=r.groups,l=a?t.side:t;for(let h=0,c=i.length;h<c;h++){let u=n?t[o[h].materialIndex].side:l,d=s.length;if(y3(i[h]),bx(0,r,u,e,s),Op(),n){let f=o[h].materialIndex;for(let p=d,m=s.length;p<m;p++)s[p].face.materialIndex=f}}return s}raycastFirst(e,t=tn){let i=this._roots,r=this.geometry,s=t.isMaterial,a=Array.isArray(t),n=null,o=r.groups,l=s?t.side:t;for(let h=0,c=i.length;h<c;h++){let u=a?t[o[h].materialIndex].side:l;y3(i[h]);let d=wx(0,r,u,e);Op(),d!=null&&(n==null||d.distance<n.distance)&&(n=d,a&&(d.face.materialIndex=o[h].materialIndex))}return n}intersectsGeometry(e,t){let i=this.geometry,r=!1;for(let s of this._roots)if(y3(s),r=cpe(0,i,e,t),Op(),r)break;return r}shapecast(e,t,i){let r=this.geometry;if(e instanceof Function){if(t){let u=t;t=(d,f,p,m)=>{let g=f*3;return u(d,g,g+1,g+2,p,m)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let s=fn.getPrimitive(),{boundsTraverseOrder:a,intersectsBounds:n,intersectsRange:o,intersectsTriangle:l}=e;if(o&&l){let u=o;o=(d,f,p,m,g)=>u(d,f,p,m,g)?!0:Z8(d,f,r,l,p,m,s)}else o||(l?o=(u,d,f,p)=>Z8(u,d,r,l,f,p,s):o=(u,d,f)=>f);let h=!1,c=0;for(let u of this._roots){if(y3(u),h=hpe(0,r,n,o,a,c),Op(),h)break;c+=u.byteLength}return fn.releasePrimitive(s),h}bvhcast(e,t,i){let{intersectsRanges:r,intersectsTriangles:s}=i,a=this.geometry.index,n=this.geometry.attributes.position,o=e.geometry.index,l=e.geometry.attributes.position;_2.copy(t).invert();let h=fn.getPrimitive(),c=fn.getPrimitive();if(s){let d=function(f,p,m,g,v,y,x,w){for(let _=m,b=m+g;_<b;_++){In(c,_*3,o,l),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(let M=f,S=f+p;M<S;M++)if(In(h,M*3,a,n),h.needsUpdate=!0,s(h,c,M,_,v,y,x,w))return!0}return!1};if(r){let f=r;r=function(p,m,g,v,y,x,w,_){return f(p,m,g,v,y,x,w,_)?!0:d(p,m,g,v,y,x,w,_)}}else r=d}e.getBoundingBox(e9),e9.applyMatrix4(t);let u=this.shapecast({intersectsBounds:d=>e9.intersectsBox(d),intersectsRange:(d,f,p,m,g,v)=>($y.copy(v),$y.applyMatrix4(_2),e.shapecast({intersectsBounds:y=>$y.intersectsBox(y),intersectsRange:(y,x,w,_,b)=>r(d,f,y,x,m,g,_,b)}))});return fn.releasePrimitive(h),fn.releasePrimitive(c),u}intersectsBox(e,t){return Uh.set(e.min,e.max,t),Uh.needsUpdate=!0,this.shapecast({intersectsBounds:i=>Uh.intersectsBox(i),intersectsTriangle:i=>Uh.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},r={},s=0,a=1/0){e.boundingBox||e.computeBoundingBox(),Uh.set(e.boundingBox.min,e.boundingBox.max,t),Uh.needsUpdate=!0;let n=this.geometry,o=n.attributes.position,l=n.index,h=e.attributes.position,c=e.index,u=fn.getPrimitive(),d=fn.getPrimitive(),f=Rp,p=upe,m=null,g=null;r&&(m=dpe,g=fpe);let v=1/0,y=null,x=null;return _2.copy(t).invert(),q0.matrix.copy(_2),this.shapecast({boundsTraverseOrder:w=>Uh.distanceToBox(w),intersectsBounds:(w,_,b)=>b<v&&b<a?(_&&(q0.min.copy(w.min),q0.max.copy(w.max),q0.needsUpdate=!0),!0):!1,intersectsRange:(w,_)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:b=>q0.distanceToBox(b),intersectsBounds:(b,M,S)=>S<v&&S<a,intersectsRange:(b,M)=>{for(let S=b*3,A=(b+M)*3;S<A;S+=3){In(d,S,c,h),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let C=w*3,T=(w+_)*3;C<T;C+=3){In(u,C,l,o),u.needsUpdate=!0;let D=u.distanceToTriangle(d,f,m);if(D<v&&(p.copy(f),g&&g.copy(m),v=D,y=C/3,x=S/3),D<s)return!0}}}});{let b=c?c.count:h.count;for(let M=0,S=b;M<S;M+=3){In(d,M,c,h),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let A=w*3,C=(w+_)*3;A<C;A+=3){In(u,A,l,o),u.needsUpdate=!0;let T=u.distanceToTriangle(d,f,m);if(T<v&&(p.copy(f),g&&g.copy(m),v=T,y=A/3,x=M/3),T<s)return!0}}}}}),fn.releasePrimitive(u),fn.releasePrimitive(d),v===1/0?null:(i.point?i.point.copy(p):i.point=p.clone(),i.distance=v,i.faceIndex=y,r&&(r.point?r.point.copy(g):r.point=g.clone(),r.point.applyMatrix4(_2),p.applyMatrix4(_2),r.distance=p.sub(r.point).length(),r.faceIndex=x),i)}closestPointToPoint(e,t={},i=0,r=1/0){let s=i*i,a=r*r,n=1/0,o=null;if(this.shapecast({boundsTraverseOrder:h=>(X0.copy(e).clamp(h.min,h.max),X0.distanceToSquared(e)),intersectsBounds:(h,c,u)=>u<n&&u<a,intersectsTriangle:(h,c)=>{h.closestPointToPoint(e,X0);let u=e.distanceToSquared(X0);return u<n&&(Rp.copy(X0),n=u,o=c),u<s}}),n===1/0)return null;let l=Math.sqrt(n);return t.point?t.point.copy(Rp):t.point=Rp.clone(),t.distance=l,t.faceIndex=o,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{zn(0,new Float32Array(t),J8),e.union(J8)}),e}},Sx=Mh(P$()),ppe=.5*(Math.sqrt(3)-1),Y0=(3-Math.sqrt(3))/6,mpe=1/3,pn=1/6,ed=e=>Math.floor(e)|0,$8=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),t9=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function gpe(e=Math.random){let t=tF(e),i=new Float64Array(t).map(s=>$8[s%12*2]),r=new Float64Array(t).map(s=>$8[s%12*2+1]);return function(s,a){let n=0,o=0,l=0,h=(s+a)*ppe,c=ed(s+h),u=ed(a+h),d=(c+u)*Y0,f=c-d,p=u-d,m=s-f,g=a-p,v,y;m>g?(v=1,y=0):(v=0,y=1);let x=m-v+Y0,w=g-y+Y0,_=m-1+2*Y0,b=g-1+2*Y0,M=c&255,S=u&255,A=.5-m*m-g*g;if(A>=0){let D=M+t[S],R=i[D],O=r[D];A*=A,n=A*A*(R*m+O*g)}let C=.5-x*x-w*w;if(C>=0){let D=M+v+t[S+y],R=i[D],O=r[D];C*=C,o=C*C*(R*x+O*w)}let T=.5-_*_-b*b;if(T>=0){let D=M+1+t[S+1],R=i[D],O=r[D];T*=T,l=T*T*(R*_+O*b)}return 70*(n+o+l)}}function vpe(e=Math.random){let t=tF(e),i=new Float64Array(t).map(a=>t9[a%12*3]),r=new Float64Array(t).map(a=>t9[a%12*3+1]),s=new Float64Array(t).map(a=>t9[a%12*3+2]);return function(a,n,o){let l,h,c,u,d=(a+n+o)*mpe,f=ed(a+d),p=ed(n+d),m=ed(o+d),g=(f+p+m)*pn,v=f-g,y=p-g,x=m-g,w=a-v,_=n-y,b=o-x,M,S,A,C,T,D;w>=_?_>=b?(M=1,S=0,A=0,C=1,T=1,D=0):w>=b?(M=1,S=0,A=0,C=1,T=0,D=1):(M=0,S=0,A=1,C=1,T=0,D=1):_<b?(M=0,S=0,A=1,C=0,T=1,D=1):w<b?(M=0,S=1,A=0,C=0,T=1,D=1):(M=0,S=1,A=0,C=1,T=1,D=0);let R=w-M+pn,O=_-S+pn,j=b-A+pn,X=w-C+2*pn,N=_-T+2*pn,k=b-D+2*pn,ne=w-1+3*pn,te=_-1+3*pn,Q=b-1+3*pn,Z=f&255,de=p&255,ee=m&255,le=.6-w*w-_*_-b*b;if(le<0)l=0;else{let se=Z+t[de+t[ee]];le*=le,l=le*le*(i[se]*w+r[se]*_+s[se]*b)}let $=.6-R*R-O*O-j*j;if($<0)h=0;else{let se=Z+M+t[de+S+t[ee+A]];$*=$,h=$*$*(i[se]*R+r[se]*O+s[se]*j)}let K=.6-X*X-N*N-k*k;if(K<0)c=0;else{let se=Z+C+t[de+T+t[ee+D]];K*=K,c=K*K*(i[se]*X+r[se]*N+s[se]*k)}let J=.6-ne*ne-te*te-Q*Q;if(J<0)u=0;else{let se=Z+1+t[de+1+t[ee+1]];J*=J,u=J*J*(i[se]*ne+r[se]*te+s[se]*Q)}return 32*(l+h+c+u)}}function tF(e){let t=new Uint8Array(512);for(let i=0;i<512/2;i++)t[i]=i;for(let i=0;i<512/2-1;i++){let r=i+~~(e()*(256-i)),s=t[i];t[i]=t[r],t[r]=s}for(let i=256;i<512;i++)t[i]=t[i-256];return t}var La=new y1,ype=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let r=0;r<e.count;r+=3){let s=1;La.a.fromBufferAttribute(e,r),La.b.fromBufferAttribute(e,r+1),La.c.fromBufferAttribute(e,r+2),s*=La.getArea(),t[r/3]=s}this.distribution=new Float32Array(e.count/3);let i=0;for(let r=0;r<t.length;r++)i+=t[r],this.distribution[r]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let i=this.distribution[this.distribution.length-1],r=this.binarySearch(this.randomFunction()*i);return this.sampleFace(r,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,i=0,r=t.length-1,s=-1;for(;i<=r;){let a=Math.ceil((i+r)/2);if(a===0||t[a-1]<=e&&t[a]>e){s=a;break}else e<t[a]?r=a-1:i=a+1}return s}sampleFace(e,t,i){let r=this.randomFunction(),s=this.randomFunction();return r+s>1&&(r=1-r,s=1-s),La.a.fromBufferAttribute(this.positionAttribute,e*3),La.b.fromBufferAttribute(this.positionAttribute,e*3+1),La.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(La.a,r).addScaledVector(La.b,s).addScaledVector(La.c,1-(r+s)),La.getNormal(i),this}},xpe=Mh(Mz()),bpe=new Fe,wpe=new Fe,_pe=new Fe,Nc;(e=>{function t(i){return i&&i.__isSPEObject}e.is=t})(Nc||(Nc={}));var b_=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new Fe,this.copyPreviousMatrix=!0,this.hiddenMatrix=new Fe,this.matrixWorldRigid=new Fe,this.shearScale=new Fe,this.shearScaleInv=new Fe}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof yi&&(t=t.uuid);let i=this;for(;i.parent;){if(i.parent.uuid===t)return!0;i=i.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let i of this.children)i.updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),i)for(let s of this.children)s.updateWorldMatrix(!1,!0)}traverseChildren(t,i=0){for(let r of this.children)Nc.is(r)&&r.traverseObject(t,i+1)}traverseObject(t,i=0){if(t(this,i)!==!0)for(let r of this.children)Nc.is(r)&&r.traverseObject(t,i+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,i=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:r,v:s,q:a}=(0,xpe.SVD)(i),n=bpe.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),o=wpe.set(s[0][0],s[0][1],s[0][2],0,s[1][0],s[1][1],s[1][2],0,s[2][0],s[2][1],s[2][2],0,0,0,0,1),l=_pe.copy(o).transpose();this.shearScale.makeScale(a[0],a[1],a[2]).multiply(l).premultiply(o),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(n,l).copyPosition(this.matrixWorld),a.every(h=>Math.abs(a[0]-h)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,i){this.updateWorldMatrix(!0,!1);let r=new Fe().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),r.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof Fe?t.hiddenMatrix.premultiply(r):t.applyMatrix4(r),t.updateWorldMatrix(!1,!1),this.add(t),i!==void 0&&(this.children.pop(),this.children.splice(i,0,t)),this}copy(t,i=!1){return super.copy(t,i),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,i,r,s,a,n){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},Spe=class extends b_(yi){},Ape=e=>e.type==="Mesh",_1=class extends Spe{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let i=this.children[e];i?.object!==t&&(i&&this.remove(i),i=new _1(t),this.add(i),this.children.splice(e,0,this.children.pop()),i.matrixWorldNeedsUpdate=!0,i.matrixAutoUpdate=!1,i.matrix=t.matrix,i.hiddenMatrix=t.hiddenMatrix),i.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&this.object.dataPatched.cloner?.hideBase===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return Ape(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},tc=new E,ic=new E,vu=new Fe,iF=[new E(-1,1,1),new E(-1,-1,1),new E(1,-1,1),new E(1,1,1),new E(-1,1,-1),new E(-1,-1,-1),new E(1,-1,-1),new E(1,1,-1)],Mpe=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],Cpe=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],eT=(e,t,i)=>{e.updateEntityBoxSize(tc,ic),vu.copy(t).multiply(e.matrixWorld),ic.x===0&&ic.y===0&&ic.z===0?i.push(new E(tc.x,tc.y,tc.z).applyMatrix4(vu)):iF.forEach(r=>{i.push(r.clone().multiply(ic).add(tc).applyMatrix4(vu))})},tT=class extends yr{constructor(){super(...arguments),this.matrix=new Fe,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let i=new Fe().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t,i=!1){let r=[];return i===!0?e.traverseEntity(s=>{if(s.visible||s.cloner&&s.data.visible){if(!("geometry"in s)){r.push(new E);return}eT(s,t,r)}}):eT(e,t,r),this.setFromPoints(r)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(vu.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(ic).multiplyScalar(.5),this.getCenter(tc),vu.copy(this.matrix).setPosition(tc),this.vertices=iF.map(e=>e.clone().multiply(ic).applyMatrix4(vu))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=Mpe.map(([e,t])=>new wa(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new E))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=Cpe.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},Ql={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},Epe=class extends tB{constructor(){super()}getPoints(e=12){let t=[],i,r=this.getCurveLengths(),s=r[r.length-1]/r.length;for(let a=0,n=this.curves;a<n.length;a++){let o=n[a],l=a===0?r[a]:r[a]-r[a-1],h=Math.ceil(e*l/s),c=o.getPoints(h);for(let u=0;u<c.length;u++){let d=c[u];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},Ax=.001;function Mx(e,t,i){return t.clone().sub(e).cross(t.clone().sub(i)).length()<=Ax}function i9(e,t){let i=new E(...e.position),r=new E(...e.controlNext.position),s=new E(...t.controlPrevious.position),a=new E(...t.position);return Mx(i,r,a)&&Mx(i,s,a)}function rF(e){let t=e.points.map(c=>new E(...c.data.position)),i=[e.points[0]],r=new E(...i[0].data.position);for(let c=0;c<e.points.length-1;c++)Mx(r,t[c],t[c+1])||(i.push(e.points[c]),r=t[c]);i.push(e.points[e.points.length-1]);let s=e.isClosed,a=i.length-(s?0:1),n=i.length,o=[];for(let c=0;c<n;c++){let u=i[c].data,d=new E(...u.position),f=new E(...u.controlPrevious.position),p=new E(...u.controlNext.position),m={position:d,baseRoundness:u.roundness,controlPrevious:f,controlNext:p};if(u.roundness===0||!e.isClosed&&(c===0||c===n-1)){o[c]={...m,removedLength:0};continue}let g=s&&c==0?n-1:c-1,v=s&&c==n-1?0:c+1,y=i[g].data,x=i[v].data,w=new E(...y.position),_=new E(...x.position),b=w.clone().sub(d).normalize(),M=_.clone().sub(d).normalize();Object.assign(m,{prevDir:b,nextDir:M});let S=i9(y,u),A=i9(u,x);if(!S||!A)o[c]={...m,removedLength:0};else{let C=b.clone().add(M).normalize(),T=C.clone().cross(b).length()/b.dot(C);o[c]={...m,tan:T,removedLength:u.roundness/T}}}for(let c=0;c<a;c++){let u=c,d=s&&c===n-1?0:c+1,f=o[u],p=o[d];if(f.removedLength!==0||p.removedLength!==0){let m=f.position.distanceTo(p.position);f.removedLength=Math.min(f.removedLength,m/2),p.removedLength=Math.min(p.removedLength,m/2)}}let l=[];for(let c=0;c<a;c++){let u=c,d=s&&c===n-1?0:c+1,f=o[u],p=o[d],m=null;if(!i9(i[u].data,i[d].data))f.position.distanceTo(p.position)>Ax&&(m=new Tm(f.position,f.controlNext,p.controlPrevious,p.position));else{let g=f.position.clone(),v=p.position.clone();(f.removedLength!==0||p.removedLength!==0)&&(f.nextDir&&g.add(f.nextDir.clone().setLength(f.removedLength)),p.prevDir&&v.add(p.prevDir.clone().setLength(p.removedLength))),g.distanceTo(v)>Ax&&(m=new Tm(g,g.clone().lerp(v,.3),v.clone().lerp(g,.3),v))}l[2*c+1]=m}for(let c=0;c<n;c++){let u=o[c];if(u.removedLength===0){l[2*c]=null;continue}let d=u.position,f=u.prevDir.clone().multiplyScalar(u.removedLength).add(d),p=u.nextDir.clone().multiplyScalar(u.removedLength).add(d),m=u.tan*u.removedLength,g=u.prevDir.clone().add(u.nextDir).normalize(),v=f.clone().lerp(p,.5),y=f.distanceTo(p)/2,x=g.clone().multiplyScalar(Math.sqrt(Math.pow(m,2)-Math.pow(y,2))).add(v),w=g.clone().multiplyScalar(-m).add(x),_=d.distanceTo(w)/d.distanceTo(v),b=u.prevDir.clone().multiplyScalar(_*d.distanceTo(f)).add(d),M=b.clone().lerp(w,2),S=f.clone().lerp(b,4/3),A=p.clone().lerp(M,4/3);l[2*c]=new Tm(f,S,A,p)}let h=new Epe;return l.forEach(c=>{c&&h.add(c)}),h}var Zt;(e=>{function t(i){return i&&i.__isEntity}e.is=t})(Zt||(Zt={}));var To=e=>Zt.is(e),Tpe={type:"completeState",isfromEntity:!0},Ppe=["x","y","z"],r9=new E,Dpe=new E().set(0,1,0),w_=e=>class extends b_(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new tT,this._recursiveBBox=new tT,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let i=this.children[t];if(Zt.is(i))return i}entityChildrenCount(){let t=this.children.length;for(;t--;)if(Zt.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let i=t.parent;if(Zt.is(i))t=i;else return}return t}forInstancesRec(t){this.instances.forEach(i=>{i.disposed||t(i),i.forInstancesRec(t)})}super_Entity(t,i){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=i,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,i,r=!1){if(!(this.data.states.length===0&&!r)){for(let s of this.data.states)cc.toOps(this.data,s.data).forEach(a=>{let n=kg.replaceProps(a,this.data);this.dataPatched=this.data,this.updateByPatchedOp(n,this.data,i)});if(t!==null){let s=this.data.states.data(t);s&&(this.dataPatched=cc.patch(this.data,s),cc.toOps(this.data,s).forEach(a=>{this.updateByPatchedOp(a,this.dataPatched,i)}))}r&&this.updateTransformState(this.dataPatched,i),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,i){t.setScalar(0),i.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{To(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let i;return this.traverseEntity(r=>{r.uuid===t&&(i=r)}),i}traverseSortNextHelper(){let t=this.parent;if(t){let i=t.children,r=i.indexOf(this)+1;if(Zt.is(i[r]))return i[r];if(Zt.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&Zt.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let i=this;for(;t>0&&i!==null;)i=i.parent,t-=1;return i}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let i=this.parent;for(;i;){if(t===i)return!0;i=i.parent}return!1}countToAccestor(t){let i=0,r=this;for(;r!==t;){if(r===null)return-1;r=r.parent,i+=1}return i}forEachEntity(t){for(let i of this.children)To(i)&&t(i)}traverseEntityAncestors(t){this.traverseAncestors(i=>{Zt.is(i)&&t(i)})}traverseConcreteEntity(t,i=0){if(t(this,i)!==!0)for(let r of this.children)To(r)&&r.isConcreteEntity&&r.traverseEntity(t,i+1)}traverseEntity(t,i=0){if(t(this,i)!==!0)for(let r of this.children)To(r)&&r.traverseEntity(t,i+1)}traverseVisibleEntity(t){t(this);for(let i of this.children)To(i)&&i.visible&&i.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.dispatchEvent({type:"updateMatrixWorld"})}copy(t,i=!1){return super.copy(t,i),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>To(t))}isAncestorOf(t){if(this.uuid===t)return!1;let i=!1;return this.traverseEntity(r=>{r.uuid===t&&(i=!0)}),i}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let i={position:this.position.toArray(),rotation:[this.rotation.x*Ke.RAD2DEG,this.rotation.y*Ke.RAD2DEG,this.rotation.z*Ke.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return D6(i,t)}getTransformValues(t,i,r){return i[t].map((s,a)=>r?.shared.getVariable(s,[this.uuid,t,Ppe[a]])??s)}updateTransformState(t,i){let r=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,i)),r=!0),t.rotation&&(r9.fromArray(this.getTransformValues("rotation",t,i)).multiplyScalar(Ke.DEG2RAD),this.rotation.setFromVector3(r9),r=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,i)),r=!0),t.hiddenMatrix!==void 0&&(r=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??Gu.identity)),r&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(s=>{s.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),r}onVariableUpdate(t=!1){if(t){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)Zt.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{Zt.is(t)&&t.disposeRecursively()})}toState(t=[]){let i={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return D6(i,t)}updateByObjUpdateOp(t,i){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},i,!1)}updateByOp(t,i,r,s){let a=this.data;this.data=i;let n=t,o=Pi(t.path,["states","*"]);if(o!==null){if(t.type===0){let[l]=o;if(this?.stateSelection===l){let h={...t.props};if(delete h.name,Object.values(t.props).some(c=>c===void 0)){let c=this.data;if(c!==void 0){let u=jr.zoom(c,t.path.slice(2));if(u)for(let d in t.props)t.props[d]===void 0&&d in u&&(h[d]=u[d])}}n={...t,props:h,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:c,...u}=l;l=u}if(t.props.material!==void 0&&"material"in l){let{material:c,...u}=l;l=u}let h=jr.removeOverridden(t.path,t.props,l);n={...t,props:h}}}if(this.updateByPatchedOpBase(n,cc.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),r),Pi(t.path,["overrides"])){let l=[],h=[...t.path];for(l.push(h[1]),h.splice(0,2);h.length>0&&h[0]==="descendants";)l.push(h[1]),h.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let c of Object.keys(t.props)){l[l.length-1]=c;let u=r.scene.findInstance([this.uuid,...l]);u&&(u.overrideData=t.props[c],u.updateState(sh.apply(u.component.data,u.overrideData),r))}}else{let c=r.scene.findInstance([this.uuid,...l]);if(c){let u=jr.zoom(c.component.data,h);if(t={...t,path:h},t.type===0){let d=t.props;if(u)for(let[f,p]of Object.entries(t.props))p===void 0&&(d===t.props&&(d={...t.props}),d[f]=u[f]);t={...t,props:d}}c.overrideData=Yg.resolve(i.overrides,l),c.updateByOp(t,t1.applySimple(c.data,t),r,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let h;for(let c of Kl.rootOverrideProps)c in t.props&&(h===void 0&&(h={}),h[c]=t.props[c]);h&&(l={...t,props:h})}else for(let h of Kl.rootOverrideProps)if(Pi(t.path,[h])){l=t;break}l!==void 0&&this.instances.forEach(h=>{if(h.isInstanceRoot){let c=sh.filterOp(h.overrideData,l);c&&h.updateByOp(c,t1.applySimple(h.data,c),r,!0)}}),this.instances.forEach(h=>{if(!h.isInstanceRoot){let c=sh.filterOp(h.overrideData,t);if(c){let u;a===h.data&&t===c?u=i:u=t1.applySimple(h.data,c),h.updateByOp(c,u,r,!0)}}})}}updateByPatchedOpBase(t,i,r){if(this.dataPatched=i,t.path.length===0&&t.type===0)t.props.type!==void 0&&!Fc.is(t.props.type)&&Ql.changeEntityProptotype(this,i,r);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){Ql.changeEntityProptotype(this,i,r);for(let s of this.children)Zt.is(s)&&s.updateVisible(r.scene)}this.updateByPatchedOp(t,i,r)}updateByPatchedOp(t,i,r){if(t.path.length===0&&t.type===0?this.updateState(t.props,r):t.type===0&&("resolutionLevel"in t.props||"useChildrenColors"in t.props)&&this.updateState(i,r),t.path[0]==="morphTargetInfluences"&&t.type===0){let s=i.morphTargetInfluences.get(t.path[1])?.data.name;s&&this.updateMorphInfluences(s,r.shared.getVariable(t.props.value,[this.uuid,"morphTargetInfluences",s]))}if(Pi(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(i.pathSnapping),Pi(t.path,["cloner"])!==null){let s=t1.drop(t,1);s.path.length===0&&s.type===0&&s.props.disabled===!0?this.setFromClonerState(null,r):this.cloner?this.cloner.updateState(i.cloner,r.scene):(this.setFromClonerState(i.cloner,r),this.expandCloner(r.scene)),this.updateVisible(r.scene)}}updatePathSnapping(t=this.dataPatched.pathSnapping){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){let i=this._updatedPathSnapping?.pathId??this.dataPatched.pathSnapping.pathId,r=this._updatedPathSnapping?.slide??this.dataPatched.pathSnapping.slide??0,s=this._updatedPathSnapping?.offset??this.dataPatched.pathSnapping.offset??0,a=this._updatedPathSnapping?.orientation??this.dataPatched.pathSnapping.orientation;if(i===null)return;let n=t.find(i);if(!n||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let o=n.data;if(o.geometry.path.points.length<=1)return;let l=rF(o.geometry.path),h=(r+s)%1;r+s===1&&h===0&&(h=1);let c=null;try{c=l.curves.length?l.getPointAt(h):null}catch{}if(c===null)return;let u=this.parent?this.parent?.matrixWorld:new Fe;n.updateMatrixWorld();let d=new Fe().multiplyMatrices(u.clone().invert(),n.matrixWorld);c.applyMatrix4(d);let f={position:c.toArray(),rotation:o.rotation};if(a==="tangential"){let p=new Fe().extractRotation(n.matrixWorld),m=l.getTangentAt(h).applyMatrix4(p).add(c),g=new Fe().lookAt(c,m,Dpe),v=r9.setFromEuler(new Vr().setFromRotationMatrix(g)).multiplyScalar(Ke.RAD2DEG);f={...f,rotation:v.toArray()}}this.updateTransformState(f),this.traverseEntity(p=>{p._cameraType&&p.dispatchEvent(Tpe)})}updateVisible(t){if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||this.dataPatched.cloner?.hideBase!==!0),!t)return;let i=!1;this.traverseEntity(r=>{if(r.data.type==="Splat")return i=!0,!0}),i&&t.reloadSplats()}updateState_Entity(t,i){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(i?.scene),this.resetBBoxNeedsUpdate()),i&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,i),this.updateVisible(i.scene)),this.updateTransformState(t,i)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof Ql.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,i){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new Ql.Cloner(this,t),i.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,i.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}requestRender(){this.dispatchEvent({type:"requestRender"})}},sF=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=e.parameters?.radiusTop,r=e.parameters?.radiusBottom,s=Object.assign({},t?.parameters??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);s.thetaLength=Ke.clamp(s.thetaLength,0,360);let a=s.width/2,n=s.radiusTop??a,o=s.radiusBottom??a;if(n===o?(n=a,o=a):n>o?(n=a,o=o*a/n):(n=n*a/o,o=a),s.shapeBlendNode){n=i??a,o=r??a;let l=Math.max(n,o)*2;s.width=l,s.depth=l}return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width),radiusTop:n,radiusBottom:o})}}static build(e){let{width:t,depth:i,height:r,radialSegments:s,heightSegments:a,openEnded:n,thetaStart:o,thetaLength:l,radiusTop:h,radiusBottom:c,cornerRadius:u,cornerSegments:d,hollow:f}=e.parameters,p;return l===0?(p=new rt,p.setAttribute("position",new Xe([],3))):u||f?p=new aF(h,c,r,s,a,n,o,l*Math.PI/180,u,u,d,f):p=new Nw(h,c,r,s,a,n,o,l*Math.PI/180),p.scale(1,1,i/t),Object.assign(p,{userData:{...e,type:"CylinderGeometry"}})}};function xl(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function iT(e){return new re(e.y,-e.x)}var aF=class extends rt{constructor(e,t,i,r,s,a,n,o,l,h,c,u,d=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,i=i||1,r=Math.floor(r)||8,s=Math.floor(s)||1,a=a!==void 0?a:!1,n=n!==void 0?n:0,o=o!==void 0?o:Math.PI*2,a&&(l=0,h=0);let f=[],p=[],m=[],g=[],v=0,y=i/2,x=new E,w=new E;d&&e==0&&(e=l),d&&t==0&&(t=h);let _=new re(e,y),b=new re(t,-y),M=null,S=null,A=null,C=null,T=_.clone().sub(b),D=0,R=0,O=0;u>0&&(D=Math.min(e,t)*(1-u),R=e-D,O=t-D);let j=_.clone();j.x-=D;let X=Math.PI-T.angle(),N=T.angle(),k=Math.tan(N/2),ne=Math.tan(X/2),te=k+ne,Q=u?te:ne,Z=u?te:k;if(l=Math.min(l,(e-R)/Q,T.length()/te),h=Math.min(h,(t-O)/Z,T.length()/te),l>0){let J=l/k;M=_.clone().sub(new re(J,l)),u&&(A=M.clone(),A.x-=D-te*l),_.sub(T.clone().setLength(J))}if(h>0){let J=h/ne;S=b.clone().sub(new re(J,-h)),b.add(T.clone().setLength(J)),u&&(C=S.clone(),C.x-=D-te*h,j.sub(T.clone().setLength(J)))}T=_.clone().sub(b);let de=T.length()<.5,ee=[];for(let J=0;J<=r;J++){let se=[],ae=J/r,Ae=ae*o+n,F=new re(Math.sin(Ae),Math.cos(Ae));C&&S?(le(se,ae,F,X,h,C,-1,!0),le(se,ae,F,N,h,S,-1,!1)):S?($(se,F,S.x,0,-1),le(se,ae,F,N,h,S,-1,!1)):a||$(se,F,t,O,-1);let V=iT(T).normalize();if(xl(V,F,x),!de)for(let ie=0;ie<=s;ie++){let ue=ie/s,ve=T.clone().multiplyScalar(ue).add(b);xl(ve,F,w),p.push(w.x,w.y,w.z),m.push(x.x,x.y,x.z),g.push(ae,.5+w.y/i),se.push(v++)}if(A&&M?(le(se,ae,F,X,l,M,1,!1),le(se,ae,F,N,l,A,1,!0)):M?(le(se,ae,F,X,l,M,1,!1),$(se,F,M.x,0,1)):a||$(se,F,e,R,1),u&&!de){let ie=iT(T).multiplyScalar(-1).normalize();xl(ie,F,x);for(let ue=0;ue<=s;ue++){let ve=ue/s,ge=T.clone().multiplyScalar(-ve).add(j);xl(ge,F,w),p.push(w.x,w.y,w.z),m.push(x.x,x.y,x.z),g.push(ae,.5+w.y/i),se.push(v++)}}u&&!a&&se.push(se[0]),ee.push(se)}for(let J=0;J<ee.length-1;J++)for(let se=0;se<ee[0].length-1;se++){if(a&&u&&se==s)continue;let ae=ee[J][se],Ae=ee[J+1][se],F=ee[J+1][se+1],V=ee[J][se+1],ie=p[F*3+0],ue=p[F*3+2];f.push(ae,Ae,V),(ie!=0||ue!=0)&&f.push(Ae,F,V)}o<Math.PI*2&&(K(-1,ee[0],n),K(1,ee[ee.length-1],n+o)),this.setIndex(f),this.setAttribute("position",new Xe(p,3)),this.setAttribute("normal",new Xe(m,3)),this.setAttribute("uv",new Xe(g,2));function le(J,se,ae,Ae,F,V,ie,ue){for(let ve=0;ve<c+1;ve++){let ge=ve/c,_e=ie<0?ge:1-ge;ue&&(_e-=1),_e*=Ae;let ye=new re(Math.sin(_e),Math.cos(_e)*ie),Se=ye.clone().multiplyScalar(F).add(V);xl(Se,ae,w),p.push(w.x,w.y,w.z),xl(ye,ae,x),m.push(x.x,x.y,x.z),g.push(se,.5+w.y/i),J.push(v++)}}function $(J,se,ae,Ae,F){let V=new E,ie=new re,ue=[ae,Ae];F<0&&ue.reverse();for(let ve of ue)ie.set(ve,y*F),xl(ie,se,V),p.push(V.x,V.y,V.z),m.push(0,F,0),g.push(.5,.5),J.push(v++)}function K(J,se,ae){let Ae=new re(Math.sin(ae),Math.cos(ae)),F=new re(-Math.cos(ae),Math.sin(ae)),V=new E,ie=J<0?(ge,_e,ye)=>f.push(ge,_e,ye):(ge,_e,ye)=>f.push(ge,ye,_e),ue=new re((e+t+R+O)/4,0);xl(ue,Ae,V),p.push(V.x,V.y,V.z),m.push(F.x,0,F.y),g.push(.5,.5);let ve=v++;for(let ge of se){let _e=p.slice(ge*3,ge*3+3);p.push(..._e),m.push(F.x,0,F.y);let ye=g.slice(ge*2,ge*2+2);g.push(...ye),v++}for(let ge=ve+1;ge<v-1;ge++)ie(ve,ge,ge+1);ie(ve,v-1,ve+1)}}},Ipe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return i.thetaLength=Ke.clamp(i.thetaLength,0,360),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,depth:i,height:r,radialSegments:s,heightSegments:a,openEnded:n,thetaStart:o,thetaLength:l,cornerRadiusTop:h,cornerRadiusBottom:c,cornerSegments:u}=e.parameters,d;return l===0?(d=new rt,d.setAttribute("position",new Xe([],3))):h>0||c>0||l<360?d=new aF(0,t/2,r,s,a,n,o,l*Math.PI/180,h,c,u,0,!0):d=new Uw(t/2,r,s,a,n),d.scale(1,1,i/t),Object.assign(d,{userData:{...e,type:"ConeGeometry"}})}},Ope=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,widthSegments:s,heightSegments:a,depthSegments:n,cornerRadius:o,cornerSegments:l}=e.parameters,h;return o===0?h=new sn(t,i,r,s,a,n):h=new Rpe(t,i,r,s,a,n,o,l),Object.assign(h,{userData:{...e,type:"CubeGeometry"}})}},s9=Math.PI/2,Rpe=class extends rt{constructor(e=1,t=1,i=1,r=1,s=1,a=1,n=0,o=4){super(),this.type="BoxGeometry",r=Math.floor(r),s=Math.floor(s),a=Math.floor(a),o=Math.floor(o),n=Math.min(n,e/2,t/2,i/2);let l=[],h=[],c=[],u=[],d=0;f("z","y","x",-1,-1,i,t,e,a,s),f("z","y","x",1,-1,i,t,-e,a,s),f("x","z","y",1,1,e,i,t,r,a),f("x","z","y",1,-1,e,i,-t,r,a),f("x","y","z",1,-1,e,t,i,r,s),f("x","y","z",-1,-1,e,t,-i,r,s),n>0&&(p("z","y","x",-1,-1,1,i,t,e,a),p("z","y","x",1,-1,-1,i,t,e,a),p("z","y","x",-1,1,-1,i,t,e,a),p("z","y","x",1,1,1,i,t,e,a),p("x","y","z",-1,-1,-1,e,t,i,r),p("x","y","z",1,-1,1,e,t,i,r),p("x","y","z",-1,1,1,e,t,i,r),p("x","y","z",1,1,-1,e,t,i,r),p("y","x","z",-1,-1,1,t,e,i,s),p("y","x","z",1,-1,-1,t,e,i,s),p("y","x","z",1,1,1,t,e,i,s),p("y","x","z",-1,1,-1,t,e,i,s),m(1,1,1),m(-1,1,1),m(1,-1,1),m(-1,-1,1),m(1,1,-1),m(-1,1,-1),m(1,-1,-1),m(-1,-1,-1)),this.setIndex(l),this.setAttribute("position",new Xe(h,3)),this.setAttribute("normal",new Xe(c,3)),this.setAttribute("uv",new Xe(u,2));function f(g,v,y,x,w,_,b,M,S,A){let C=(_-2*n)/S,T=(b-2*n)/A,D=_/2-n,R=b/2-n,O=M/2,j=S+1,X=A+1,N=0,k=new E;for(let ne=0;ne<X;ne++){let te=ne*T-R;for(let Q=0;Q<j;Q++){let Z=Q*C-D;k[g]=Z*x,k[v]=te*w,k[y]=O,h.push(k.x,k.y,k.z),k[g]=0,k[v]=0,k[y]=M>0?1:-1,c.push(k.x,k.y,k.z),u.push(Q/S),u.push(1-ne/A),N+=1}}for(let ne=0;ne<A;ne++)for(let te=0;te<S;te++){let Q=d+te+j*ne,Z=d+te+j*(ne+1),de=d+(te+1)+j*(ne+1),ee=d+(te+1)+j*ne;l.push(Q,Z,ee),l.push(Z,de,ee)}d+=N}function p(g,v,y,x,w,_,b,M,S,A){let C=(b-2*n)/A,T=b/2-n,D=M/2-n,R=S/2,O=A+1,j=0,X=new E,N=new E;for(let k=0;k<o+1;k++){let ne=k/o*s9,te=Math.sin(ne)*n,Q=(1-Math.cos(ne))*n,Z=Math.sin(ne),de=Math.cos(ne);X[v]=(D+te)*w,X[y]=(R-Q)*_,N[g]=0,N[v]=Z*Math.sign(X[v]),N[y]=de*Math.sign(X[y]);for(let ee=0;ee<O;ee++){let le=ee*C-T;X[g]=le*x,h.push(X.x,X.y,X.z),c.push(N.x,N.y,N.z),u.push(ee/A),u.push(0),j+=1}}for(let k=0;k<o;k++)for(let ne=0;ne<A;ne++){let te=d+ne+O*k,Q=d+ne+O*(k+1),Z=d+(ne+1)+O*(k+1),de=d+(ne+1)+O*k;l.push(te,Q,de),l.push(Q,Z,de)}d+=j}function m(g,v,y){let x=new E,w=new E(e/2,t/2,i/2);w.subScalar(n);let _=[],b=g*v*y>0?(S,A,C)=>l.push(S,A,C):(S,A,C)=>l.push(S,C,A);for(let S=0;S<=o;S++){let A=[],C=s9*(1-S/o),T=Math.cos(C),D=Math.sin(C),R=0;for(let O=0;O<=S;O++){let j=Math.cos(R),X=Math.sin(R);x.x=T*j,x.y=D,x.z=T*X;let N=w.clone().addScaledVector(x,n);h.push(g*N.x,v*N.y,y*N.z),c.push(g*x.x,v*x.y,y*x.z),u.push(0,0),A.push(d++),R+=s9/S}_.push(A)}let M=_.length-1;for(let S=0;S<M;S++){let A=_[S],C=_[S+1],T=A.length-1;b(A[0],C[1],C[0]);for(let D=1;D<=T;D++)b(A[D-1],A[D],C[D]),b(A[D],C[D+1],C[D])}}}},__=class extends rt{constructor(e=[],t=[],i="",r=1,s=.2,a=4){super(),this.type="PolyhedronGeometryRound";let n=[],o=[],l=[];h(),c(),this.setAttribute("position",new Xe(n,3)),this.setAttribute("normal",new Xe(l,3)),this.setAttribute("uv",new Xe(o,2));return;function h(){s=Math.min(1-1e-5,s),s==0&&(a=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[i],d=new E,f=d.clone(),p=new y1,m=s*r,g=r-m,v=a+1,y=new E,x=(N,k)=>y.subVectors(N,k).normalize(),w=(N,k)=>Array(N).fill(void 0).map(k),_=w(e.length/3,(N,k)=>new E().fromArray(e,k*3).setLength(r)),b=[],M=1e6;for(let N=0;N<_.length;N++){let k=_[N],ne=[],te,Q,Z,de=1e10,ee=-1;for(;(ee=t.indexOf(N,ee+1))!=-1;){let J=ee-ee%3;te=t[J+(ee+1)%3],Q=t[J+(ee+2)%3],Z=k.distanceToSquared(_[te]),de=Math.min(de,Z),ne.push([te,Q,Z])}de+=1e-6;let le=[],$=0,K=ne.length;for(let J=0;J<K;J++){[te,Q,Z]=ne[$];let se=b[te]?.includes(N)==!0;Z<=de&&le.push(te+ +se*M),$=ne.findIndex(ae=>ae[0]==Q)}b.push(le)}let S=[];{let N=0,k=0,ne,te,Q=u==3;for(let Z=0;Z<=a;Z++){ne=Z*(Z+1)/2,te=(Z+1)*(Z+2)/2;for(let de=0;de<a-Z;de++)[N,k]=[ne+de+Z+2,te+de+Z+3],S.push(ne,te,...Q?[k,ne]:[N,te],k,N),[ne,te]=[N,k];S.push(ne,te,ne+a+2)}}let A=d.clone(),C=d.clone(),T=d.clone(),D=d.clone(),R=d.clone(),O=[],j=w(_.length,()=>w(u,()=>d.clone()));for(let N=0;N<_.length;N++){d.copy(_[N]).normalize(),A.copy(d).multiplyScalar(g);let k=b[N];for(let le=0;le<k.length;le++){let $=k[le],K=k[(le+1)%u];p.setFromPointsAndIndices(_,N,$%M,K%M),p.b.sub(p.a).setLength(1e10).add(p.a),p.c.sub(p.a).setLength(1e10).add(p.a),p.closestPointToPoint(A,j[N][le])}let ne=[],te=[],Q=[],Z=new E;a==0&&[...j[N]].reduce((le,$)=>le.add($),Z).multiplyScalar(1/u);for(let le=0;le<u;le++){let $=[],K=(le-1+u)%u,J=j[N][K],se=j[N][le];d.copy(J).sub(A),f.copy(se).sub(A);let ae=A.angleTo(d),Ae=d.angleTo(f),F=Math.cos(ae)*m;a==0?C.copy(Z):C.copy(A).setLength(g+F),te.push(F);let V=[C,J,se];for(let ie=0;ie<2;ie++){let ue=V[ie],ve=V[ie+1];D.subVectors(ue,A),R.subVectors(ve,A),T.crossVectors(D,R).normalize();for(let ge=0;ge<v;ge++){let _e=[ae,Ae][ie]*ge/v;d.copy(D).applyAxisAngle(T,_e).add(A),ne.push(d.clone()),ie&&(x(d,A),$.push([ge==0?ue:d.clone(),y.clone()]))}ie&&(x(ve,A),$.push([ve,y.clone()]))}Q.push($)}O.push(Q);let de=2*v,ee=2;for(let le=0;le<u;le++){let $=de*le,K=de*((le+1)%u),J=[ne[$]];for(let ae=1;ae<v;ae++){D=ne[$+ae],R=ne[K+ae],J.push(D);for(let Ae=1,F=ae-ee+1;Ae<=F;Ae++)d.lerpVectors(D,R,Ae/(F+1)),d.sub(A).setLength(te[le]).add(A),J.push(d.clone());J.push(R)}for(let ae=0;ae<v;ae++)J.push(ne[ae+v+$]);J.push(ne[K+v]);let se=S.map(ae=>J[ae]);n.push(...se.map(ae=>[ae.x,ae.y,ae.z]).flat()),l.push(...se.map(ae=>(x(ae,A),[y.x,y.y,y.z])).flat())}}let X=[];for(let N=0;N<b.length;N++)for(let k=0;k<u;k++){let ne=b[N][k];if(ne<M){let te=b[ne].findIndex(de=>de%M==N),Q=O[N][k],Z=O[ne][te];for(let de=0;de<v;de++){let ee=Q[de],le=Z[v-de],$=Q[de+1],K=Z[v-(de+1)];[ee,le,$,$,le,K].forEach(J=>{n.push(J[0].x,J[0].y,J[0].z),l.push(J[1].x,J[1].y,J[1].z)})}X.push(Q[0][0],Z[v][0],Q[v][0],Z[0][0])}}for(;X.length;){let N,k,ne,te;[N,k]=X.splice(0,2);let Q=[N];for(;N!=k;)Q.push(k),ne=X.indexOf(k),te=ne%2,k=X.splice(ne-te,2)[1-te];y.subVectors(Q[0],Q[1]).cross(d.subVectors(Q[0],Q[2])).normalize();let Z=y.dot(Q[0])<0;Z&&y.negate();for(let de=1;de<=Q.length-2;de++)[Q[de+ +Z],Q[de+1-+Z],Q[0]].forEach(ee=>{n.push(ee.x,ee.y,ee.z),l.push(y.x,y.y,y.z)})}}function c(){let u=new E;for(let b=0;b<n.length;b+=3){u.x=n[b+0],u.y=n[b+1],u.z=n[b+2];let M=w(u)/2/Math.PI+.5,S=_(u)/Math.PI+.5;o.push(M,1-S)}let d=new E,f=new E,p=new E,m=new E,g=new re,v=new re,y=new re,x=(b,M,S,A)=>{A<0&&b.x===1&&(o[M]=b.x-1),S.x===0&&S.z===0&&(o[M]=A/2/Math.PI+.5)};for(let b=0,M=0;b<n.length;b+=9,M+=6){d.set(n[b+0],n[b+1],n[b+2]),f.set(n[b+3],n[b+4],n[b+5]),p.set(n[b+6],n[b+7],n[b+8]),g.set(o[M+0],o[M+1]),v.set(o[M+2],o[M+3]),y.set(o[M+4],o[M+5]),m.copy(d).add(f).add(p).divideScalar(3);let S=w(m);x(g,M+0,d,S),x(v,M+2,f,S),x(y,M+4,p,S)}for(let b=0;b<o.length;b+=6){let M=o[b+0],S=o[b+2],A=o[b+4],C=Math.max(M,S,A),T=Math.min(M,S,A);C>.9&&T<.1&&(M<.2&&(o[b+0]+=1),S<.2&&(o[b+2]+=1),A<.2&&(o[b+4]+=1))}function w(b){return Math.atan2(b.z,-b.x)}function _(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}}static fromJSON(e){return new __(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},Lpe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:s,corner:a,cornerSides:n}=e.parameters,o=s===0&&a!==0?new nF(t*.5,a,n):new rB(t*.5,s);return o.scale(1,i/t,r/t),Object.assign(o,{userData:{...e,type:"DodecahedronGeometry"}})}},nF=class extends __{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,s=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],n=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o="DodecahedronGeometry";super(a,n,o,e,t,i),this.type=o}static fromJSON(e){return new nF(e.radius,e.corner,e.cornerSides)}},K0=1e-12,S_=class{constructor(e){this.position=new re,this.startPosition=new re,this.uuid=Ke.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new S_(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},Cx=class extends S_{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new Cx(this.parent).copy(this)}},yu=class extends S_{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new Cx(this),new Cx(this))}static create(e,t){let i=new yu(e,new re(...t.position));return i.controls[0].position.set(...t.controlPrevious.position),i.controls[1].position.set(...t.controlNext.position),i.roundness=t.roundness,i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,i}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let i=0,r=this.controls.length;i<r;i++){let s=this.controls[i];this.position.distanceTo(s.position)<=t?s.position.copy(this.position):s.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new yu(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){let e=this.curveBefore?.getTangentAt(1),t=this.curveAfter?.getTangentAt(0);return[e,t]}computeNormals(e=new re,t=new re){let[i,r]=this.computeTangents();return i&&r&&(rT(i,e),rT(r,t)),[e,t]}computeTangent(e=new re){let[t,i]=this.computeTangents();return t&&i&&e.copy(t).add(i).normalize(),e}computeNormal(e=new re){let[t,i]=this.computeNormals();return e.copy(t).add(i).normalize(),e}};function rT(e,t=new re){let i=e.length();return t.set(-e.y/i,e.x/i)}var A_=e=>e,x0=new re,i4=new re,zpe=new re,Bpe=new re,kpe=new re,Fpe=new re,oF=new E,lF=new E;function Npe(e){let t=new re;t.addVectors(e.v0,x0.subVectors(e.v1,e.v0).multiplyScalar(2/3));let i=new re;return i.addVectors(e.v2,i4.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new Ha(e.v0,t,i,e.v2)}function x3(e,t,i=Number.EPSILON){return Math.abs(e-t)<i}function Upe(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function Vpe(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function hF(e,t,i){let r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),s=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),a=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));return Math.acos((s*s+r*r-a*a)/(2*s*r))}function jpe(e,t,i){return aT(e,t)&&aT(t,i)&&Ex(e.position,t.position,i.position)}function Ex(e,t,i){return x0.copy(t).sub(e).cross(i4.copy(i).sub(e))===0}function Gpe(e,t,i,r,s){let a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(i,2)-Math.pow(a/2,2))*(e.y-t.y)/a,h=Math.sqrt(Math.pow(i,2)-Math.pow(a/2,2))*(t.x-e.x)/a;return r.set(o+l,n+h),s.set(o-l,n-h),[r,s]}function Hpe(e,t,i){let r=e.distanceTo(i),s=t.distanceTo(i);return r<s?t:e}function Wpe(e,t,i,r,s,a){let n=t.x-e.x,o=t.y-e.y,l=i.x-e.x,h=i.y-e.y,c=Math.sqrt((n+l)*(n+l)+(o+h)*(o+h)),u;return hF(t,e,i)>Math.PI&&(c*=-1),x3(h,o)?u=(o+h)*(r/c-.5)*8/3/(n-l):u=(n+l)*(r/c-.5)*8/3/(h-o),s.set(t.x-u*o,t.y+u*n),a.set(i.x+u*h,i.y-u*l),[s,a]}function sT(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function aT(e,t){return Ex(e.position,e.controls[1].position,t.position)&&Ex(e.position,t.controls[0].position,t.position)}function qpe(e,t,i,r,s=.5){let a=x0.subVectors(t,e).multiplyScalar(s).add(e),n=i4.subVectors(i,t).multiplyScalar(s).add(t),o=zpe.subVectors(r,i).multiplyScalar(s).add(i),l=a,h=Bpe.subVectors(n,a).multiplyScalar(s).add(a),c=kpe.subVectors(o,n).multiplyScalar(s).add(n),u=o,d=Fpe.subVectors(c,h).multiplyScalar(s).add(h);return[e.x,e.y,l.x,l.y,h.x,h.y,d.x,d.y,c.x,c.y,u.x,u.y,r.x,r.y]}function Xpe(e,t,i=12,r=!0){let s=lF.set(0,0,0),a,n=0;for(let o=0;o<t.length;o++){let l=A_(t[o]),h=x0,c=Dc(l,i);for(let u=0;u<=c;u++)if(l instanceof Ha||l instanceof vh||l instanceof Qa){if(l.getPoint(u/c,h),s.set(h.x,h.y,0),a!==void 0&&Vpe(a,s))continue;a===void 0&&(a=oF),a.copy(s),e.setXYZ(n,s.x,s.y,s.z),n++}}return r&&n>1&&!(e.getX(n-1)===e.getX(0)&&e.getY(n-1)===e.getY(0)&&e.getZ(n-1)===e.getZ(0))&&(e.setXYZ(n,e.getX(0),e.getY(0),e.getZ(0)),n++),e}function Ype(e,t,i,r=12,s=!0){let a=lF.set(0,0,0),n=0,o=[];for(let l=0;l<t.length;l++){if(i[l]===!1)continue;let h,c=A_(t[l]),u=x0,d=Dc(c,r);o.push(d);for(let f=0;f<=d;f++)if(c instanceof Ha||c instanceof vh||c instanceof Qa){if(c.getPoint(f/d,u),a.set(u.x,u.y,0),h?.equals(a))continue;h===void 0?h=oF:(e.setXYZ(n,h.x,h.y,h.z),n++,e.setXYZ(n,a.x,a.y,a.z),n++),h.copy(a)}}return s&&n>1&&!(e.getX(n-1)===e.getX(0)&&e.getY(n-1)===e.getY(0)&&e.getZ(n-1)===e.getZ(0))&&(e.setXYZ(n,e.getX(0),e.getY(0),e.getZ(0)),n++),o}function nT(e,t=12,i=!1){let r=[];for(let s=0,a=e.length;s<a;s++){let n=e[s],o=0;if(i&&n.roundedCurveCorner!==void 0){let l=Dc(n.roundedCurveCorner,t)*.5;s>0&&(r[s-1]+=l),o+=l}n.curveAfter!==void 0&&(o+=Dc(n.curveAfter,t)),r.push(o)}return e.length>0&&i&&e[0].roundedCurveCorner!==void 0&&(r[e.length-1]+=Dc(e[0].roundedCurveCorner,t)*.5),r}function Dc(e,t=12){return e&&e instanceof Vv?t*2:e&&(e instanceof Qa||e instanceof eB)?1:e&&e instanceof Fw?t*e.points.length:t}function Kpe(e,t,i=12,r=!0){let s,a=0;for(let n=0;n<t.length;n++){let o=A_(t[n]),l=Dc(o,i),h=x0;for(let c=0;c<=l;c++)if(o instanceof Ha||o instanceof vh||o instanceof Qa){if(o.getPoint(c/l,h),s!==void 0&&Upe(s,h,K0))continue;s===void 0&&(s=i4),s.copy(h),e.push(h.x,h.y),a++}}return x3(e[0],e[e.length-2],K0)&&x3(e[1],e[e.length-1],K0)&&(e.pop(),e.pop()),r&&a>1&&!(x3(e[a-1],e[1],K0)&&x3(e[a-2],e[0],K0))&&(e.push(e[0],e[1]),a++),e}var a9=new re,Qpe=new re,Zpe=new re,Jpe=new re,$pe=new re,eme=new re,nr=class extends _g{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new ds(new E(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Ke.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,i){let r=new nr;return r.isClosed=e.isClosed,r.points=e.points.map(s=>yu.create(s.id,s.data)),typeof e.roundness=="number"&&(r.roundness=e.roundness),r.shapeHoles=e.shapeHoles.map(s=>nr.createFromState(s)),t!==void 0&&i!==void 0&&r.applySize(t,i),r.update(),r}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,i=this.points.length;t<i;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,i=this.points.findIndex(r=>r.uuid===e);if(i<0){let r=t;for(let s=0,a=this.shapeHoles.length;s<a;s++){let n=this.shapeHoles[s],o=n.points.length,l=n.getPointIndexById(e);if(l<0)r+=o;else return l+r}}return i}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let i=0,r=this.shapeHoles.length;i<r;i++){let s=this.shapeHoles[i],a=e-t;if(a<=s.points.length-1)return s.points[a];t+=s.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let i=0,r=this.shapeHoles.length;i<r;i++){let s=this.shapeHoles[i],a=s.points.indexOf(e);if(a>=0)return t+a;t+=s.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let i=a9.set(e,t);for(let r=0,s=this.points.length;r<s;r++){let a=this.points[r];a.position.multiply(i),a.controls[0].position.multiply(i),a.controls[1].position.multiply(i)}for(let r=0,s=this.shapeHoles.length;r<s;r++)this.shapeHoles[r].applyScale(e,t);this._update()}createPoint(e,t=0,i=Ke.generateUUID()){let r;e instanceof re?r=e:r=new re(e,t);let s=new yu(i,r);return s.roundness=this.roundness,s}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];if(r.uuid===e)return r}for(let t=0,i=this.shapeHoles.length;t<i;t++){let r=this.shapeHoles[t].getPointByUuid(e);if(r)return r}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(i=>i.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,i=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let r=i?this.roundedCurveDivisions:this.curveDivisions;return Xpe(e,i?this.roundedCurves:this.curves,t,this.autoClose),r.reduce((s,a)=>s+a,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=nT(this.points,e,!1),this.roundedCurveDivisions=nT(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,i=12){return Ype(e,this.curves,t,i,this.autoClose).reduce((r,s)=>r+s,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),Kpe(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let i=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let r=t?this.roundedCurveDivisions:this.curveDivisions,s=0;t&&this.points[0].roundedCurveCorner!==void 0&&(s=Dc(this.points[0].roundedCurveCorner,this.subdivision)*.5);let a=e-s;a<0&&(a+=r.reduce((n,o)=>n+o,0));for(let n=0,o=r.length;n<o;n++){let l=r[n];if(a<i+l)return[n,(a-i+1)/l];i+=l}return[0,1]}getCurveT(e,t,i){let r=this.points[e],s=this.points[e>=this.points.length-1?0:e+1],a=this.curveDivisions,n=a[e];if(sT(r,s)){let l=r.position.distanceTo(s.position);return r.position.distanceTo(a9.set(i.x,i.y))/l}let o=0;for(let l=0;l<e;l++)o+=a[l];return(t-o)/n}dispose(){}_applyCurveForPoint(e,t){sT(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let i=this.curves[this.curves.length-1];e.curveBefore=i,t.curveAfter=i;let r=i.clone();e.roundedCurveBefore=r,t.roundedCurveAfter=r,e.roundedCurveCorner=void 0,this.roundedCurves.push(r)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];if(t===0)this.moveTo(r.position.x,r.position.y);else{let s=this.points[t-1];this._applyCurveForPoint(r,s)}}let e=this.getLastPoint();if(e?.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],i=this.points[this.points.length-1];this._applyCurveForPoint(t,i)}if(this.points.length>2){let t=0;for(let i=0,r=this.points.length;i<r;i++){let s=this.points[i],a=this.points[i-1]??this.points[this.points.length-1],n=this.points[i+1]??this.points[0],o=s.roundness,l=a&&n&&jpe(a,s,n);if(!s.controlsMoved()&&o>0&&!l){let h=s.curveBefore,c=s.curveAfter;if(h===void 0||c===void 0)continue;let u=s.roundedCurveBefore,d=s.roundedCurveAfter,f=h.getLength(),p=c.getLength(),m=Math.min(o,f*.499),g=Math.min(o,p*.499),v=Math.min(m,g),y=1-v/f,x=v/p,w=h.getPointAt(y,a9),_=c.getPointAt(x,Qpe);this._subSplitCurve(h,u,y,w,void 0),this._subSplitCurve(c,d,x,void 0,_);let b;if(this.useCubicForRoundedCorners){let M=hF(w,s.position,_)/2,S=Math.tan(M)*w.distanceTo(s.position),[A,C]=Gpe(w,_,S,Zpe,Jpe),T=Hpe(A,C,s.position),[D,R]=Wpe(T,w,_,S,$pe,eme);b=new Ha(w.clone(),D.clone(),R.clone(),_.clone())}else b=new vh(w.clone(),s.position.clone(),_.clone());s.roundedCurveCorner=b,this.roundedCurves.splice(i+t,0,b),t++}}}}_subSplitCurve(e,t,i,r,s){if(e instanceof Qa)r!==void 0&&t.v2.copy(r),s!==void 0&&t.v1.copy(s);else{let a=e,n=t,o=a.getUtoTmapping(i,0),l=qpe(a.v0,a.v1,a.v2,a.v3,o);return r!==void 0&&(n.v0.set(l[0],l[1]),n.v1.set(l[2],l[3]),n.v2.set(l[4],l[5]),n.v3.set(l[6],l[7])),s!==void 0&&(n.v0.set(l[6],l[7]),n.v1.set(l[8],l[9]),n.v2.set(l[10],l[11]),n.v3.set(l[12],l[13])),n}return t}clone(){let e=new nr(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let i=0;i<t;i++){let r=i*7,s=e.points[r+0],a=e.points[r+1],n=e.points[r+2],o=e.points[r+3],l=e.points[r+4],h=e.points[r+5],c=e.points[r+6],u=new yu(Ke.generateUUID(),new re(s,a));u.controls[0].position.set(n,o),u.controls[1].position.set(l,h),u.roundness=c,this.points.push(u)}return this.shapeHoles=e.shapeHoles?.length?e.shapeHoles.map(i=>{let r=new nr;return r.fromJSON(i),r}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,t=!1){this.isText=t;let i=(s,a)=>{a instanceof Ha&&a.v3.equals(s.position)&&s.controls[0].position.copy(a.v2)},r=s=>{let a=[],n,o;for(n=0,o=s.length;n<o;n++)s[n]instanceof vh&&(s[n]=Npe(s[n]));for(n=0,o=s.length;n<o;n++){let c=s[n],u=n>0?s[n-1]:null,d;c instanceof Ha?(d=this.createPoint(c.v0),d.controls[1].position.copy(c.v1)):c instanceof Qa&&(d=this.createPoint(c.v1)),d!==void 0&&(u!==null&&i(d,u),a.push(d))}let l=s[s.length-1],h=!1;return l instanceof Ha?l.v3.equals(a[0].position)&&(a[0].controls[0].position.copy(l.v2),h=!0):l instanceof Qa&&l.v2.equals(a[0].position)&&(h=!0),this.isClosed=h,a};return this.points=r(e.curves),e instanceof _g&&(this.shapeHoles=e.holes.map(s=>{let a=new nr;return a.fromShape(s),a})),this.update(),this}updatePoint(e,t){let i=this.getPointByUuid(e);i&&(t.position!==void 0&&i.position.fromArray(t.position),t.roundness!==void 0&&(i.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){let i=this.getPointByUuid(e)?.controls[0];i&&(t.position&&i.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){let i=this.getPointByUuid(e)?.controls[1];i&&(t.position&&i.position.fromArray(t.position),this.needsUpdate=!0)}},cF=Math.PI*2;function n9({x:e,y:t},i,r,s,a){return{x:e*i+s,y:t*r+a}}function tme(e,t){let i=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(e),s=Math.sin(e),a=Math.cos(e+t),n=Math.sin(e+t);return[{x:r-s*i,y:s+r*i},{x:a+n*i,y:n-a*i},{x:a,y:n}]}function oT(e,t,i,r){let s=e*r-t*i<0?-1:1,a=Math.min(1,Math.max(-1,e*i+t*r));return s*Math.acos(a)}function ime(e,t,i,r,s,a,n,o,l,h){let c=Math.pow(s,2),u=Math.pow(a,2),d=Math.pow(n,2),f=Math.pow(o,2),p=c*u-c*f-u*d;p<0&&(p=0),p/=c*f+u*d,p=Math.sqrt(p)*(l===h?-1:1);let m=p*s/a*o,g=p*-a/s*n,v=m+(e+i)/2,y=g+(t+r)/2,x=(n-m)/s,w=(o-g)/a,_=(-n-m)/s,b=(-o-g)/a,M=oT(1,0,x,w),S=oT(x,w,_,b);return S<0&&(S+=cF),{centerx:v,centery:y,ang1:M,ang2:S}}function rme({px:e,py:t,cx:i,cy:r,rx:s,ry:a,largeArcFlag:n,sweepFlag:o}){let l=[];if(s===0||a===0)return[];let h=(e-i)/2,c=(t-r)/2;if(h===0&&c===0)return[];s=Math.abs(s),a=Math.abs(a);let u=Math.pow(h,2)/Math.pow(s,2)+Math.pow(c,2)/Math.pow(a,2);u>1&&(s*=Math.sqrt(u),a*=Math.sqrt(u));let d=ime(e,t,i,r,s,a,h,c,n,o),{ang1:f,ang2:p}=d,{centerx:m,centery:g}=d,v=Math.abs(p)/(cF/4);Math.abs(1-v)<1e-7&&(v=1);let y=Math.max(Math.ceil(v),1);p/=y;for(let x=0;x<y;x++)l.push(tme(f,p)),f+=p;return l.map(x=>{let{x:w,y:_}=n9(x[0],s,a,m,g),{x:b,y:M}=n9(x[1],s,a,m,g),{x:S,y:A}=n9(x[2],s,a,m,g);return{x1:w,y1:_,x2:b,y2:M,x:S,y:A}})}var wi;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(wi||(wi={}));var Tr;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Tr||(Tr={}));function bt(e,t){if(!e)throw t||"Assertion Failed!"}var dt=function(){function e(){}return e.vertEq=function(t,i){return t.s===i.s&&t.t===i.t},e.vertLeq=function(t,i){return t.s<i.s||t.s===i.s&&t.t<=i.t},e.transLeq=function(t,i){return t.t<i.t||t.t===i.t&&t.s<=i.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,i){return Math.abs(t.s-i.s)+Math.abs(t.t-i.t)},e.edgeEval=function(t,i,r){bt(e.vertLeq(t,i)&&e.vertLeq(i,r));var s=i.s-t.s,a=r.s-i.s;return s+a>0?s<a?i.t-t.t+(t.t-r.t)*(s/(s+a)):i.t-r.t+(r.t-t.t)*(a/(s+a)):0},e.edgeSign=function(t,i,r){bt(e.vertLeq(t,i)&&e.vertLeq(i,r));var s=i.s-t.s,a=r.s-i.s;return s+a>0?(i.t-r.t)*s+(i.t-t.t)*a:0},e.transEval=function(t,i,r){bt(e.transLeq(t,i)&&e.transLeq(i,r));var s=i.t-t.t,a=r.t-i.t;return s+a>0?s<a?i.s-t.s+(t.s-r.s)*(s/(s+a)):i.s-r.s+(r.s-t.s)*(a/(s+a)):0},e.transSign=function(t,i,r){bt(e.transLeq(t,i)&&e.transLeq(i,r));var s=i.t-t.t,a=r.t-i.t;return s+a>0?(i.s-r.s)*s+(i.s-t.s)*a:0},e.vertCCW=function(t,i,r){return t.s*(i.t-r.t)+i.s*(r.t-t.t)+r.s*(t.t-i.t)>=0},e.interpolate=function(t,i,r,s){return t=t<0?0:t,r=r<0?0:r,t<=r?r===0?(i+s)/2:i+(s-i)*(t/(t+r)):s+(i-s)*(r/(t+r))},e.intersect=function(t,i,r,s,a){var n,o,l;e.vertLeq(t,i)||(l=t,t=i,i=l),e.vertLeq(r,s)||(l=r,r=s,s=l),e.vertLeq(t,r)||(l=t,t=r,r=l,l=i,i=s,s=l),e.vertLeq(r,i)?e.vertLeq(i,s)?(n=e.edgeEval(t,r,i),o=e.edgeEval(r,i,s),n+o<0&&(n=-n,o=-o),a.s=e.interpolate(n,r.s,o,i.s)):(n=e.edgeSign(t,r,i),o=-e.edgeSign(t,s,i),n+o<0&&(n=-n,o=-o),a.s=e.interpolate(n,r.s,o,s.s)):a.s=(r.s+i.s)/2,e.transLeq(t,i)||(l=t,t=i,i=l),e.transLeq(r,s)||(l=r,r=s,s=l),e.transLeq(t,r)||(l=t,t=r,r=l,l=i,i=s,s=l),e.transLeq(r,i)?e.transLeq(i,s)?(n=e.transEval(t,r,i),o=e.transEval(r,i,s),n+o<0&&(n=-n,o=-o),a.t=e.interpolate(n,r.t,o,i.t)):(n=e.transSign(t,r,i),o=-e.transSign(t,s,i),n+o<0&&(n=-n,o=-o),a.t=e.interpolate(n,r.t,o,s.t)):a.t=(r.t+i.t)/2},e}(),Q0=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),Lp=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),V2=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),lT=function(){function e(){var t=new V2,i=new Q0,r=new Lp(0),s=new Lp(1);t.next=t.prev=t,t.anEdge=null,i.next=i.prev=i,r.next=r,r.Sym=s,s.next=s,s.Sym=r,this.vHead=t,this.fHead=i,this.eHead=r,this.eHeadSym=s}return e.prototype.makeEdge_=function(t){var i=new Lp(0),r=new Lp(1);t.Sym.side<t.side&&(t=t.Sym);var s=t.Sym.next;return r.next=s,s.Sym.next=i,i.next=t,t.Sym.next=r,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i},e.prototype.splice_=function(t,i){var r=t.Onext,s=i.Onext;r.Sym.Lnext=i,s.Sym.Lnext=t,t.Onext=s,i.Onext=r},e.prototype.makeVertex_=function(t,i,r){var s=t;bt(s,"Vertex can't be null!");var a=r.prev;s.prev=a,a.next=s,s.next=r,r.prev=s,s.anEdge=i;var n=i;do n.Org=s,n=n.Onext;while(n!==i)},e.prototype.makeFace_=function(t,i,r){var s=t;bt(s,"Face can't be null");var a=r.prev;s.prev=a,a.next=s,s.next=r,r.prev=s,s.anEdge=i,s.trail=null,s.marked=!1,s.inside=r.inside;var n=i;do n.Lface=s,n=n.Lnext;while(n!==i)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var i=t.next,r=t.Sym.next;i.Sym.next=r,r.Sym.next=i},e.prototype.killVertex_=function(t,i){var r=t.anEdge,s=r;do s.Org=i,s=s.Onext;while(s!==r);var a=t.prev,n=t.next;n.prev=a,a.next=n},e.prototype.killFace_=function(t,i){var r=t.anEdge,s=r;do s.Lface=i,s=s.Lnext;while(s!==r);var a=t.prev,n=t.next;n.prev=a,a.next=n},e.prototype.makeEdge=function(){var t=new V2,i=new V2,r=new Q0,s=this.makeEdge_(this.eHead);return this.makeVertex_(t,s,this.vHead),this.makeVertex_(i,s.Sym,this.vHead),this.makeFace_(r,s,this.fHead),s},e.prototype.splice=function(t,i){var r=!1,s=!1;if(t!==i){if(i.Org!==t.Org&&(s=!0,this.killVertex_(i.Org,t.Org)),i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(i,t),!s){var a=new V2;this.makeVertex_(a,i,t.Org),t.Org.anEdge=t}if(!r){var n=new Q0;this.makeFace_(n,i,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var i=t.Sym,r=!1;if(t.Lface!==t.Rface&&(r=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!r){var s=new Q0;this.makeFace_(s,t,t.Lface)}i.Onext===i?(this.killVertex_(i.Org,null),this.killFace_(i.Lface,null)):(t.Lface.anEdge=i.Oprev,i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var i=this.makeEdge_(t),r=i.Sym;this.splice_(i,t.Lnext),i.Org=t.Dst;var s=new V2;return this.makeVertex_(s,r,i.Org),i.Lface=r.Lface=t.Lface,i},e.prototype.splitEdge=function(t){var i=this.addEdgeVertex(t),r=i.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,r),t.Dst=r.Org,r.Dst.anEdge=r.Sym,r.Rface=t.Rface,r.winding=t.winding,r.Sym.winding=t.Sym.winding,r.idx=t.idx,r.Sym.idx=t.Sym.idx,r},e.prototype.connect=function(t,i){var r=!1,s=this.makeEdge_(t),a=s.Sym;if(i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(s,t.Lnext),this.splice_(a,i),s.Org=t.Dst,a.Org=i.Org,s.Lface=a.Lface=t.Lface,t.Lface.anEdge=a,!r){var n=new Q0;this.makeFace_(n,s,t.Lface)}return s},e.prototype.zapFace=function(t){var i=t.anEdge,r,s,a,n,o;s=i.Lnext;do r=s,s=r.Lnext,r.Lface=null,r.Rface===null&&(r.Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),a=r.Sym,a.Onext===a?this.killVertex_(a.Org,null):(a.Org.anEdge=a.Onext,this.splice_(a,a.Oprev)),this.killEdge_(r));while(r!=i);n=t.prev,o=t.next,o.prev=n,n.next=o},e.prototype.countFaceVerts_=function(t){var i=t.anEdge,r=0;do r++,i=i.Lnext;while(i!==t.anEdge);return r},e.prototype.mergeConvexFaces=function(t){var i,r,s,a,n,o,l;for(i=this.fHead.next;i!==this.fHead;i=i.next)if(i.inside)for(r=i.anEdge,n=r.Org;s=r.Lnext,a=r.Sym,a&&a.Lface&&a.Lface.inside&&(o=this.countFaceVerts_(i),l=this.countFaceVerts_(a.Lface),o+l-2<=t&&dt.vertCCW(r.Lprev.Org,r.Org,a.Lnext.Lnext.Org)&&dt.vertCCW(a.Lprev.Org,a.Org,r.Lnext.Lnext.Org)&&(s=a.Lnext,this.delete(a),r=null,a=null)),!(r&&r.Lnext.Org===n);)r=s;return!0},e.prototype.check=function(){var t=this.fHead,i=this.vHead,r=this.eHead,s,a,n,o,l,h;for(a=t,a=t;(s=a.next)!==t;a=s){bt(s.prev===a),l=s.anEdge;do bt(l.Sym!==l),bt(l.Sym.Sym===l),bt(l.Lnext.Onext.Sym===l),bt(l.Onext.Sym.Lnext===l),bt(l.Lface===s),l=l.Lnext;while(l!==s.anEdge)}for(bt(s.prev===a&&s.anEdge===null),o=i,o=i;(n=o.next)!==i;o=n){bt(n.prev===o),l=n.anEdge;do bt(l.Sym!==l),bt(l.Sym.Sym===l),bt(l.Lnext.Onext.Sym===l),bt(l.Onext.Sym.Lnext===l),bt(l.Org===n),l=l.Onext;while(l!==n.anEdge)}for(bt(n.prev===o&&n.anEdge===null),h=r,h=r;(l=h.next)!==r;h=l)bt(l.Sym.next===h.Sym),bt(l.Sym!==l),bt(l.Sym.Sym===l),bt(l.Org!==null),bt(l.Dst!==null),bt(l.Lnext.Onext.Sym===l),bt(l.Onext.Sym.Lnext===l);bt(l.Sym.next===h.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),hT=function(){function e(){this.handle=null}return e}(),cT=function(){function e(){this.key=null,this.node=0}return e}(),sme=function(){function e(t,i){this.leq=i,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var r=0;r<t+1;r++)this.nodes[r]=new hT,this.handles[r]=new cT;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var i=this.nodes,r=this.handles,s,a,n;for(s=i[t].handle;;){if(n=t<<1,n<this.size&&this.leq(r[i[n+1].handle].key,r[i[n].handle].key)&&++n,bt(n<=this.max),a=i[n].handle,n>this.size||this.leq(r[s].key,r[a].key)){i[t].handle=s,r[s].node=t;break}i[t].handle=a,r[a].node=t,t=n}},e.prototype.floatUp_=function(t){var i=this.nodes,r=this.handles,s,a,n;for(s=i[t].handle;;){if(n=t>>1,a=i[n].handle,n===0||this.leq(r[a].key,r[s].key)){i[t].handle=s,r[s].node=t;break}i[t].handle=a,r[a].node=t,t=n}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var i,r;if(i=++this.size,i*2>this.max){this.max*=2;var s,a;for(a=this.nodes.length,this.nodes.length=this.max+1,s=a;s<this.nodes.length;s++)this.nodes[s]=new hT;for(a=this.handles.length,this.handles.length=this.max+1,s=a;s<this.handles.length;s++)this.handles[s]=new cT}return this.freeList===0?r=i:(r=this.freeList,this.freeList=this.handles[r].node),this.nodes[i].handle=r,this.handles[r].node=i,this.handles[r].key=t,this.initialized&&this.floatUp_(i),r},e.prototype.extractMin=function(){var t=this.nodes,i=this.handles,r=t[1].handle,s=i[r].key;return this.size>0&&(t[1].handle=t[this.size].handle,i[t[1].handle].node=1,i[r].key=null,i[r].node=this.freeList,this.freeList=r,--this.size,this.size>0&&this.floatDown_(1)),s},e.prototype.delete=function(t){var i=this.nodes,r=this.handles,s;bt(t>=1&&t<=this.max&&r[t].key!==null),s=r[t].node,i[s].handle=i[this.size].handle,r[i[s].handle].node=s,--this.size,s<=this.size&&(s<=1||this.leq(r[i[s>>1].handle].key,r[i[s].handle].key)?this.floatDown_(s):this.floatUp_(s)),r[t].key=null,r[t].node=this.freeList,this.freeList=t},e}(),o9=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),uT=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),ame=function(){function e(t,i){this.frame=t,this.leq=i,this.head=new uT,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var i=this.head;do i=i.next;while(i.key!==null&&!this.leq(this.frame,t,i.key));return i},e.prototype.insertBefore=function(t,i){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,i));var r=new uT;return r.key=i,r.next=t.next,t.next.prev=r,r.prev=t,t.next=r,r},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),nme=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.edgeLeq=function(t,i,r){var s=t.event,a=i.eUp,n=r.eUp;if(a.Dst===s)return n.Dst===s?dt.vertLeq(a.Org,n.Org)?dt.edgeSign(n.Dst,a.Org,n.Org)<=0:dt.edgeSign(a.Dst,n.Org,a.Org)>=0:dt.edgeSign(n.Dst,s,n.Org)<=0;if(n.Dst===s)return dt.edgeSign(a.Dst,s,a.Org)>=0;var o=dt.edgeEval(a.Dst,s,a.Org),l=dt.edgeEval(n.Dst,s,n.Org);return o>=l},e.deleteRegion=function(t,i){i.fixUpperEdge&&bt(i.eUp.winding===0),i.eUp.activeRegion=null,t.dict.delete(i.nodeUp)},e.fixUpperEdge=function(t,i,r){bt(i.fixUpperEdge),t.mesh.delete(i.eUp),i.fixUpperEdge=!1,i.eUp=r,r.activeRegion=i},e.topLeftRegion=function(t,i){var r=i.eUp.Org,s;do i=e.regionAbove(i);while(i.eUp.Org===r);if(i.fixUpperEdge){if(s=t.mesh.connect(e.regionBelow(i).eUp.Sym,i.eUp.Lnext),s===null)return null;e.fixUpperEdge(t,i,s),i=e.regionAbove(i)}return i},e.topRightRegion=function(t){var i=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===i);return t},e.addRegionBelow=function(t,i,r){var s=new o9;return s.eUp=r,s.nodeUp=t.dict.insertBefore(i.nodeUp,s),s.fixUpperEdge=!1,s.sentinel=!1,s.dirty=!1,r.activeRegion=s,s},e.isWindingInside=function(t,i){switch(t.windingRule){case wi.ODD:return(i&1)!==0;case wi.NONZERO:return i!==0;case wi.POSITIVE:return i>0;case wi.NEGATIVE:return i<0;case wi.ABS_GEQ_TWO:return i>=2||i<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,i){i.windingNumber=e.regionAbove(i).windingNumber+i.eUp.winding,i.inside=e.isWindingInside(t,i.windingNumber)},e.finishRegion=function(t,i){var r=i.eUp,s=r.Lface;s.inside=i.inside,s.anEdge=r,e.deleteRegion(t,i)},e.finishLeftRegions=function(t,i,r){for(var s,a=null,n=i,o=i.eUp;n!==r;){if(n.fixUpperEdge=!1,a=e.regionBelow(n),s=a.eUp,s.Org!=o.Org){if(!a.fixUpperEdge){e.finishRegion(t,n);break}s=t.mesh.connect(o.Lprev,s.Sym),e.fixUpperEdge(t,a,s)}o.Onext!==s&&(t.mesh.splice(s.Oprev,s),t.mesh.splice(o,s)),e.finishRegion(t,n),o=a.eUp,n=a}return o},e.addRightEdges=function(t,i,r,s,a,n){var o,l,h,c,u=!0;h=r;do bt(dt.vertLeq(h.Org,h.Dst)),e.addRegionBelow(t,i,h.Sym),h=h.Onext;while(h!==s);for(a===null&&(a=e.regionBelow(i).eUp.Rprev),l=i,c=a;o=e.regionBelow(l),h=o.eUp.Sym,h.Org===c.Org;)h.Onext!==c&&(t.mesh.splice(h.Oprev,h),t.mesh.splice(c.Oprev,h)),o.windingNumber=l.windingNumber-h.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!u&&e.checkForRightSplice(t,l)&&(e.addWinding(h,c),e.deleteRegion(t,l),t.mesh.delete(c)),u=!1,l=o,c=h;l.dirty=!0,bt(l.windingNumber-h.winding===o.windingNumber),n&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,i,r){t.mesh.splice(i,r)},e.vertexWeights=function(t,i,r){var s=dt.vertL1dist(i,t),a=dt.vertL1dist(r,t),n=.5*a/(s+a),o=.5*s/(s+a);t.coords[0]+=n*i.coords[0]+o*r.coords[0],t.coords[1]+=n*i.coords[1]+o*r.coords[1],t.coords[2]+=n*i.coords[2]+o*r.coords[2]},e.getIntersectData=function(t,i,r,s,a,n){i.coords[0]=i.coords[1]=i.coords[2]=0,i.idx=-1,e.vertexWeights(i,r,s),e.vertexWeights(i,a,n)},e.checkForRightSplice=function(t,i){var r=e.regionBelow(i),s=i.eUp,a=r.eUp;if(dt.vertLeq(s.Org,a.Org)){if(dt.edgeSign(a.Dst,s.Org,a.Org)>0)return!1;dt.vertEq(s.Org,a.Org)?s.Org!==a.Org&&(t.pq.delete(s.Org.pqHandle),e.spliceMergeVertices(t,a.Oprev,s)):(t.mesh.splitEdge(a.Sym),t.mesh.splice(s,a.Oprev),i.dirty=r.dirty=!0)}else{if(dt.edgeSign(s.Dst,a.Org,s.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(s.Sym),t.mesh.splice(a.Oprev,s)}return!0},e.checkForLeftSplice=function(t,i){var r=e.regionBelow(i),s=i.eUp,a=r.eUp,n;if(bt(!dt.vertEq(s.Dst,a.Dst)),dt.vertLeq(s.Dst,a.Dst)){if(dt.edgeSign(s.Dst,a.Dst,s.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,n=t.mesh.splitEdge(s),t.mesh.splice(a.Sym,n),n.Lface.inside=i.inside}else{if(dt.edgeSign(a.Dst,s.Dst,a.Org)>0)return!1;i.dirty=r.dirty=!0,n=t.mesh.splitEdge(a),t.mesh.splice(s.Lnext,a.Sym),n.Rface.inside=i.inside}return!0},e.checkForIntersect=function(t,i){var r=e.regionBelow(i),s=i.eUp,a=r.eUp,n=s.Org,o=a.Org,l=s.Dst,h=a.Dst,c,u,d=new V2,f,p;if(bt(!dt.vertEq(h,l)),bt(dt.edgeSign(l,t.event,n)<=0),bt(dt.edgeSign(h,t.event,o)>=0),bt(n!==t.event&&o!==t.event),bt(!i.fixUpperEdge&&!r.fixUpperEdge),n===o||(c=Math.min(n.t,l.t),u=Math.max(o.t,h.t),c>u))return!1;if(dt.vertLeq(n,o)){if(dt.edgeSign(h,n,o)>0)return!1}else if(dt.edgeSign(l,o,n)<0)return!1;return e.debugEvent(t),dt.intersect(l,n,h,o,d),bt(Math.min(n.t,l.t)<=d.t),bt(d.t<=Math.max(o.t,h.t)),bt(Math.min(h.s,l.s)<=d.s),bt(d.s<=Math.max(o.s,n.s)),dt.vertLeq(d,t.event)&&(d.s=t.event.s,d.t=t.event.t),f=dt.vertLeq(n,o)?n:o,dt.vertLeq(f,d)&&(d.s=f.s,d.t=f.t),dt.vertEq(d,n)||dt.vertEq(d,o)?(e.checkForRightSplice(t,i),!1):!dt.vertEq(l,t.event)&&dt.edgeSign(l,t.event,d)>=0||!dt.vertEq(h,t.event)&&dt.edgeSign(h,t.event,d)<=0?h===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(a.Sym,s),i=e.topLeftRegion(t,i),s=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),r),e.addRightEdges(t,i,s.Oprev,s,s,!0),!0):l===t.event?(t.mesh.splitEdge(a.Sym),t.mesh.splice(s.Lnext,a.Oprev),r=i,i=e.topRightRegion(i),p=e.regionBelow(i).eUp.Rprev,r.eUp=a.Oprev,a=e.finishLeftRegions(t,r,null),e.addRightEdges(t,i,a.Onext,s.Rprev,p,!0),!0):(dt.edgeSign(l,t.event,d)>=0&&(e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),dt.edgeSign(h,t.event,d)<=0&&(i.dirty=r.dirty=!0,t.mesh.splitEdge(a.Sym),a.Org.s=t.event.s,a.Org.t=t.event.t),!1):(t.mesh.splitEdge(s.Sym),t.mesh.splitEdge(a.Sym),t.mesh.splice(a.Oprev,s),s.Org.s=d.s,s.Org.t=d.t,s.Org.pqHandle=t.pq.insert(s.Org),e.getIntersectData(t,s.Org,n,l,o,h),e.regionAbove(i).dirty=i.dirty=r.dirty=!0,!1)},e.walkDirtyRegions=function(t,i){for(var r=e.regionBelow(i),s,a;;){for(;r.dirty;)i=r,r=e.regionBelow(r);if(!i.dirty&&(r=i,i=e.regionAbove(i),i===null||!i.dirty))return;if(i.dirty=!1,s=i.eUp,a=r.eUp,s.Dst!==a.Dst&&e.checkForLeftSplice(t,i)&&(r.fixUpperEdge?(e.deleteRegion(t,r),t.mesh.delete(a),r=e.regionBelow(i),a=r.eUp):i.fixUpperEdge&&(e.deleteRegion(t,i),t.mesh.delete(s),i=e.regionAbove(r),s=i.eUp)),s.Org!==a.Org)if(s.Dst!==a.Dst&&!i.fixUpperEdge&&!r.fixUpperEdge&&(s.Dst===t.event||a.Dst===t.event)){if(e.checkForIntersect(t,i))return}else e.checkForRightSplice(t,i);s.Org===a.Org&&s.Dst===a.Dst&&(e.addWinding(a,s),e.deleteRegion(t,i),t.mesh.delete(s),i=e.regionAbove(r))}},e.connectRightVertex=function(t,i,r){var s,a=r.Onext,n=e.regionBelow(i),o=i.eUp,l=n.eUp,h=!1;if(o.Dst!==l.Dst&&e.checkForIntersect(t,i),dt.vertEq(o.Org,t.event)&&(t.mesh.splice(a.Oprev,o),i=e.topLeftRegion(t,i),a=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),n),h=!0),dt.vertEq(l.Org,t.event)&&(t.mesh.splice(r,l.Oprev),r=e.finishLeftRegions(t,n,null),h=!0),h){e.addRightEdges(t,i,r.Onext,a,a,!0);return}dt.vertLeq(l.Org,o.Org)?s=l.Oprev:s=o,s=t.mesh.connect(r.Lprev,s),e.addRightEdges(t,i,s,s.Onext,s.Onext,!1),s.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,i)},e.connectLeftDegenerate=function(t,i,r){var s,a,n,o,l;if(s=i.eUp,dt.vertEq(s.Org,r)){bt(!1),e.spliceMergeVertices(t,s,r.anEdge);return}if(!dt.vertEq(s.Dst,r)){t.mesh.splitEdge(s.Sym),i.fixUpperEdge&&(t.mesh.delete(s.Onext),i.fixUpperEdge=!1),t.mesh.splice(r.anEdge,s),e.sweepEvent(t,r);return}bt(!1),i=e.topRightRegion(i),l=e.regionBelow(i),n=l.eUp.Sym,a=o=n.Onext,l.fixUpperEdge&&(bt(a!==n),e.deleteRegion(t,l),t.mesh.delete(n),n=a.Oprev),t.mesh.splice(r.anEdge,n),dt.edgeGoesLeft(a)||(a=null),e.addRightEdges(t,i,n.Onext,o,a,!0)},e.connectLeftVertex=function(t,i){var r,s,a,n,o,l,h=new o9;if(h.eUp=i.anEdge.Sym,r=t.dict.search(h).key,s=e.regionBelow(r),!!s){if(n=r.eUp,o=s.eUp,dt.edgeSign(n.Dst,i,n.Org)===0){e.connectLeftDegenerate(t,r,i);return}if(a=dt.vertLeq(o.Dst,n.Dst)?r:s,r.inside||a.fixUpperEdge){if(a===r)l=t.mesh.connect(i.anEdge.Sym,n.Lnext);else{var c=t.mesh.connect(o.Dnext,i.anEdge);l=c.Sym}a.fixUpperEdge?e.fixUpperEdge(t,a,l):e.computeWinding(t,e.addRegionBelow(t,r,l)),e.sweepEvent(t,i)}else e.addRightEdges(t,r,i.anEdge,i.anEdge,null,!0)}},e.sweepEvent=function(t,i){t.event=i,e.debugEvent(t);for(var r=i.anEdge;r.activeRegion===null;)if(r=r.Onext,r===i.anEdge){e.connectLeftVertex(t,i);return}var s=e.topLeftRegion(t,r.activeRegion);bt(s!==null);var a=e.regionBelow(s),n=a.eUp,o=e.finishLeftRegions(t,a,null);o.Onext===n?e.connectRightVertex(t,s,o):e.addRightEdges(t,s,o.Onext,n,n,!0)},e.addSentinel=function(t,i,r,s){var a=new o9,n=t.mesh.makeEdge();n.Org.s=r,n.Org.t=s,n.Dst.s=i,n.Dst.t=s,t.event=n.Dst,a.eUp=n,a.windingNumber=0,a.inside=!1,a.fixUpperEdge=!1,a.sentinel=!0,a.dirty=!1,a.nodeUp=t.dict.insert(a)},e.initEdgeDict=function(t){t.dict=new ame(t,e.edgeLeq);var i=t.bmax[0]-t.bmin[0],r=t.bmax[1]-t.bmin[1],s=t.bmin[0]-i,a=t.bmax[0]+i,n=t.bmin[1]-r,o=t.bmax[1]+r;e.addSentinel(t,s,a,n),e.addSentinel(t,s,a,o)},e.doneEdgeDict=function(t){for(var i,r=0;(i=t.dict.min().key)!==null;)i.sentinel||(bt(i.fixUpperEdge),bt(++r===1)),bt(i.windingNumber===0),e.deleteRegion(t,i)},e.removeDegenerateEdges=function(t){var i,r,s,a=t.mesh.eHead;for(i=a.next;i!==a;i=r)r=i.next,s=i.Lnext,dt.vertEq(i.Org,i.Dst)&&i.Lnext.Lnext!==i&&(e.spliceMergeVertices(t,s,i),t.mesh.delete(i),i=s,s=i.Lnext),s.Lnext===i&&(s!==i&&((s===r||s===r.Sym)&&(r=r.next),t.mesh.delete(s)),(i===r||i===r.Sym)&&(r=r.next),t.mesh.delete(i))},e.initPriorityQ=function(t){var i,r,s,a=0;for(s=t.mesh.vHead,r=s.next;r!==s;r=r.next)a++;for(a+=8,i=t.pq=new sme(a,dt.vertLeq),s=t.mesh.vHead,r=s.next;r!==s;r=r.next)r.pqHandle=i.insert(r);return r!==s?!1:(i.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,i){var r,s,a;for(r=i.fHead.next;r!==i.fHead;r=s)s=r.next,a=r.anEdge,bt(a.Lnext!==a),a.Lnext.Lnext===a&&(e.addWinding(a.Onext,a),t.mesh.delete(a));return!0},e.computeInterior=function(t,i){i===void 0&&(i=!0);var r,s;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(r=t.pq.extractMin())!==null;){for(;s=t.pq.min(),!(s===null||!dt.vertEq(s,r));)s=t.pq.extractMin(),e.spliceMergeVertices(t,r.anEdge,s.anEdge);e.sweepEvent(t,r)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(i&&t.mesh.check(),!0):!1},e}(),ome=function(){function e(){this.mesh=new lT,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=wi.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]},e.prototype.normalize_=function(t){var i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!i)throw"Zero-size vector!";i=Math.sqrt(i),t[0]/=i,t[1]/=i,t[2]/=i},e.prototype.longAxis_=function(t){var i=0;return Math.abs(t[1])>Math.abs(t[0])&&(i=1),Math.abs(t[2])>Math.abs(t[i])&&(i=2),i},e.prototype.computeNormal_=function(t){var i,r,s,a,n,o,l=[0,0,0],h=[0,0,0],c=[0,0,0],u=[0,0,0],d=[0,0,0],f=[null,null,null],p=[null,null,null],m=this.mesh.vHead;i=m.next;for(var g=0;g<3;++g)a=i.coords[g],h[g]=a,p[g]=i,l[g]=a,f[g]=i;for(i=m.next;i!==m;i=i.next)for(var v=0;v<3;++v)a=i.coords[v],a<h[v]&&(h[v]=a,p[v]=i),a>l[v]&&(l[v]=a,f[v]=i);var y=0;if(l[1]-h[1]>l[0]-h[0]&&(y=1),l[2]-h[2]>l[y]-h[y]&&(y=2),h[y]>=l[y]){t[0]=0,t[1]=0,t[2]=1;return}for(o=0,r=p[y],s=f[y],c[0]=r.coords[0]-s.coords[0],c[1]=r.coords[1]-s.coords[1],c[2]=r.coords[2]-s.coords[2],i=m.next;i!==m;i=i.next)u[0]=i.coords[0]-s.coords[0],u[1]=i.coords[1]-s.coords[1],u[2]=i.coords[2]-s.coords[2],d[0]=c[1]*u[2]-c[2]*u[1],d[1]=c[2]*u[0]-c[0]*u[2],d[2]=c[0]*u[1]-c[1]*u[0],n=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],n>o&&(o=n,t[0]=d[0],t[1]=d[1],t[2]=d[2]);o<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(c)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,i,r=this.mesh.vHead,s,a=0,n=t.next;n!==t;n=n.next)if(s=n.anEdge,!(s.winding<=0))do a+=(s.Org.s-s.Dst.s)*(s.Org.t+s.Dst.t),s=s.Lnext;while(s!==n.anEdge);if(a<0){for(i=r.next;i!==r;i=i.next)i.t=-i.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,i=[0,0,0],r,s,a=!1;i[0]=this.normal[0],i[1]=this.normal[1],i[2]=this.normal[2],!i[0]&&!i[1]&&!i[2]&&(this.computeNormal_(i),a=!0),r=this.sUnit,s=this.tUnit;var n=this.longAxis_(i);r[n]=0,r[(n+1)%3]=1,r[(n+2)%3]=0,s[n]=0,s[(n+1)%3]=0,s[(n+2)%3]=i[n]>0?1:-1;for(var o=t.next;o!==t;o=o.next)o.s=this.dot_(o.coords,r),o.t=this.dot_(o.coords,s);a&&this.checkOrientation_();for(var l=!0,h=t.next;h!==t;h=h.next)l?(this.bmin[0]=this.bmax[0]=h.s,this.bmin[1]=this.bmax[1]=h.t,l=!1):(h.s<this.bmin[0]&&(this.bmin[0]=h.s),h.s>this.bmax[0]&&(this.bmax[0]=h.s),h.t<this.bmin[1]&&(this.bmin[1]=h.t),h.t>this.bmax[1]&&(this.bmax[1]=h.t))},e.prototype.addWinding_=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,i){var r,s;if(r=i.anEdge,!(r.Lnext!==r&&r.Lnext.Lnext!==r))throw"Mono region invalid";for(;dt.vertLeq(r.Dst,r.Org);r=r.Lprev);for(;dt.vertLeq(r.Org,r.Dst);r=r.Lnext);s=r.Lprev;for(var a=void 0;r.Lnext!==s;)if(dt.vertLeq(r.Dst,s.Org)){for(;s.Lnext!==r&&(dt.edgeGoesLeft(s.Lnext)||dt.edgeSign(s.Org,s.Dst,s.Lnext.Dst)<=0);)a=t.connect(s.Lnext,s),s=a.Sym;s=s.Lprev}else{for(;s.Lnext!==r&&(dt.edgeGoesRight(r.Lprev)||dt.edgeSign(r.Dst,r.Org,r.Lprev.Org)>=0);)a=t.connect(r,r.Lprev),r=a.Sym;r=r.Lnext}if(s.Lnext===r)throw"Mono region invalid";for(;s.Lnext.Lnext!==r;)a=t.connect(s.Lnext,s),s=a.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)if(i=r.next,r.inside&&!this.tessellateMonoRegion_(t,r))return!1;return!0},e.prototype.discardExterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)i=r.next,r.inside||t.zapFace(r)},e.prototype.setWindingNumber_=function(t,i,r){for(var s,a=t.eHead.next;a!==t.eHead;a=s)s=a.next,a.Rface.inside!==a.Lface.inside?a.winding=a.Lface.inside?i:-i:r?t.delete(a):a.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,i,r,s){var a,n=0,o=0,l;r>3&&t.mergeConvexFaces(r);for(var h=t.vHead.next;h!==t.vHead;h=h.next)h.n=-1;for(var c=t.fHead.next;c!==t.fHead;c=c.next)if(c.n=-1,!!c.inside){a=c.anEdge,l=0;do{var h=a.Org;h.n===-1&&(h.n=o,o++),l++,a=a.Lnext}while(a!==c.anEdge);if(l>r)throw"Face vertex greater that support polygon";c.n=n,++n}this.elementCount=n,i===Tr.CONNECTED_POLYGONS&&(n*=2),this.elements=[],this.elements.length=n*r,this.vertexCount=o,this.vertices=[],this.vertices.length=o*s,this.vertexIndices=[],this.vertexIndices.length=o;for(var h=t.vHead.next;h!==t.vHead;h=h.next)if(h.n!==-1){var u=h.n*s;this.vertices[u+0]=h.coords[0],this.vertices[u+1]=h.coords[1],s>2&&(this.vertices[u+2]=h.coords[2]),this.vertexIndices[h.n]=h.idx}for(var d=0,c=t.fHead.next;c!==t.fHead;c=c.next)if(c.inside){a=c.anEdge,l=0;do{var h=a.Org;this.elements[d++]=h.n,l++,a=a.Lnext}while(a!==c.anEdge);for(var f=l;f<r;++f)this.elements[d++]=-1;if(i===Tr.CONNECTED_POLYGONS){a=c.anEdge;do this.elements[d++]=this.getNeighbourFace_(a),a=a.Lnext;while(a!==c.anEdge);for(var p=l;p<r;++p)this.elements[d++]=-1}}},e.prototype.outputContours_=function(t,i){var r,s,a=0,n=0;this.vertexCount=0,this.elementCount=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){s=r=o.anEdge;do this.vertexCount++,r=r.Lnext;while(r!==s);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*i,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,h=0,c=0;a=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){n=0,s=r=o.anEdge;do this.vertices[l++]=r.Org.coords[0],this.vertices[l++]=r.Org.coords[1],i>2&&(this.vertices[l++]=r.Org.coords[2]),this.vertexIndices[h++]=this.vertexIdCallback?this.vertexIdCallback(r):r.Org.idx,n++,r=r.Lnext;while(r!==s);this.elements[c++]=a,this.elements[c++]=n,a+=n}},e.prototype.addContour=function(t,i){this.mesh===null&&(this.mesh=new lT),t<2&&(t=2),t>3&&(t=3);for(var r=null,s=0;s<i.length;s+=t)r===null?(r=this.mesh.makeEdge(),this.mesh.splice(r,r.Sym)):(this.mesh.splitEdge(r),r=r.Lnext),r.Org.coords[0]=i[s+0],r.Org.coords[1]=i[s+1],t>2?r.Org.coords[2]=i[s+2]:r.Org.coords[2]=0,r.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(r),r.winding=1,r.Sym.winding=-1},e.prototype.tesselate=function(t,i,r,s,a,n){if(t===void 0&&(t=wi.ODD),i===void 0&&(i=Tr.POLYGONS),n===void 0&&(n=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,a&&(this.normal[0]=a[0],this.normal[1]=a[1],this.normal[2]=a[2]),this.windingRule=t,s<2&&(s=2),s>3&&(s=3),!this.mesh)return!1;this.projectPolygon_(),nme.computeInterior(this,n);var o=this.mesh;return i===Tr.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),n&&o.check(),i===Tr.BOUNDARY_CONTOURS?this.outputContours_(o,s):this.outputPolymesh_(o,i,r,s),!0},e}();function Zl(e){var t=e.windingRule,i=t===void 0?wi.ODD:t,r=e.elementType,s=r===void 0?Tr.POLYGONS:r,a=e.polySize,n=a===void 0?3:a,o=e.vertexSize,l=o===void 0?2:o,h=e.normal,c=h===void 0?[0,0,1]:h,u=e.contours,d=u===void 0?[]:u,f=e.strict,p=f===void 0?!0:f,m=e.debug,g=m===void 0?!1:m;if(!d&&p)throw new Error("Contours can't be empty");if(d){var v=new ome;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<d.length;y++)v.addContour(l||2,d[y]);return v.tesselate(i,s,n,l,c,p),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}wi.ODD;wi.NONZERO;wi.POSITIVE;wi.NEGATIVE;wi.ABS_GEQ_TWO;Tr.POLYGONS;Tr.CONNECTED_POLYGONS;Tr.BOUNDARY_CONTOURS;var Tx=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let i=e*Tx.eSize;this.buffer=new ArrayBuffer(i);let r=Float32Array.BYTES_PER_ELEMENT,s=0;this.positions=new Float32Array(this.buffer,s*r,3*e),s+=3*e,this.normals=new Float32Array(this.buffer,s*r,3*e),s+=3*e,this.uvs=new Float32Array(this.buffer,s*r,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let i=e*Tx.eSize,r=new ArrayBuffer(i),s=Float32Array.BYTES_PER_ELEMENT,a=0,n=new Float32Array(r,a*s,3*e);a+=3*e;let o=new Float32Array(r,a*s,3*e);a+=3*e;let l=new Float32Array(r,a*s,2*e);t?(n.set(this.positions.subarray(0,this.size*3)),o.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(n.set(this.positions),o.set(this.normals),l.set(this.uvs)),this.buffer=r,this.positions=n,this.normals=o,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let r=this.capacity;for(;t>r;)r*=2;this.realloc(r)}let i=this.size;return this.size=t,i}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},uF=Tx;uF.eSize=8*Float32Array.BYTES_PER_ELEMENT;var lme=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;let e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:t,compare:i}=this,r=t[e];for(;e>0;){let s=e-1>>1,a=t[s];if(i(r,a)>=0)break;t[e]=a,e=s}t[e]=r}_down(e){let{data:t,compare:i}=this,r=this.length>>1,s=t[e];for(;e<r;){let a=(e<<1)+1,n=a+1;if(n<this.length&&i(t[n],t[a])<0&&(a=n),i(t[a],s)>=0)break;t[e]=t[a],e=a}t[e]=s}};function hme(e,t,i=1,r=!1){let s=1/0,a=1/0,n=-1/0,o=-1/0;for(let[y,x]of e[0])y<s&&(s=y),x<a&&(a=x),y>n&&(n=y),x>o&&(o=x);let l=n-s,h=o-a,c=Math.max(i,Math.min(l,h));if(c===i){let y=[s,a];return y.distance=0,y.distance}let u=new lme([],(y,x)=>x.max-y.max),d=ume(e),f=new av(s+l/2,a+h/2,0,e);f.d>d.d&&(d=f);let p=2;function m(y,x,w){let _=new av(y,x,w,e);if(p++,_.max>d.d+i&&u.push(_),_.d>d.d&&(d=_,r&&console.log(`found best ${Math.round(1e4*_.d)/1e4} after ${p} probes`),d.d>t))return t}let g=c/2;for(let y=s;y<n;y+=c)for(let x=a;x<o;x+=c)m(y+g,x+g,g);for(;u.length;){let{max:y,x,y:w,h:_}=u.pop();if(y-d.d<=i)break;g=_/2,m(x-g,w-g,g),m(x+g,w-g,g),m(x-g,w+g,g),m(x+g,w+g,g)}r&&console.log(`num probes: ${p}
best distance: ${d.d}`);let v=[d.x,d.y];return v.distance=d.d,v.distance}function av(e,t,i,r){this.x=e,this.y=t,this.h=i,this.d=cme(e,t,r),this.max=this.d+this.h*Math.SQRT2}function cme(e,t,i){let r=!1,s=1/0;for(let a of i)for(let n=0,o=a.length,l=o-1;n<o;l=n++){let h=a[n],c=a[l];h[1]>t!=c[1]>t&&e<(c[0]-h[0])*(t-h[1])/(c[1]-h[1])+h[0]&&(r=!r),s=Math.min(s,dme(e,t,h,c))}return s===0?0:(r?1:-1)*Math.sqrt(s)}function ume(e){let t=0,i=0,r=0,s=e[0];for(let n=0,o=s.length,l=o-1;n<o;l=n++){let h=s[n],c=s[l],u=h[0]*c[1]-c[0]*h[1];i+=(h[0]+c[0])*u,r+=(h[1]+c[1])*u,t+=u*3}let a=new av(i/t,r/t,0,e);return t===0||a.d<0?new av(s[0][0],s[0][1],0,e):a}function dme(e,t,i,r){let s=i[0],a=i[1],n=r[0]-s,o=r[1]-a;if(n!==0||o!==0){let l=((e-s)*n+(t-a)*o)/(n*n+o*o);l>1?(s=r[0],a=r[1]):l>0&&(s+=n*l,a+=o*l)}return n=e-s,o=t-a,n*n+o*o}var M_={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},dF={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},fF={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},l9=(e,t)=>([i,r])=>(r<i&&(r+=t),(e>=i?e:e+t)<=r),C_=class extends rt{constructor(e,t,i=0,r=12,s=3,a=wi.ODD,n=!1){super(),this.forPathBevel=n,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=r,this._bevelSegmentsInput=s;let o=this._shape.extractShapePointsToFlatArray([],r),l=this._shape.shapeHoles.map(A=>{let C=A.extractShapePointsToFlatArray([],r),T=[];for(let D=C.length-1;D>=1;D-=2){let R=C[D-1],O=C[D-0];T.push(R,O)}return T}),h=[],c=[];for(let A=0;A<o.length;A+=2)c.push([o[A],o[A+1]]);h.push(c);for(let A=0;A<l.length;A++){let C=l[A],T=[];for(let D=0;D<C.length;D+=2)T.push([C[D],C[D+1]]);h.push(T)}let u;e.isText?u=new Ww().setFromPoints(e.points.map(A=>A.position)).getSize(new re).length()*.1:h[0].length===0?u=i:i>0?u=hme(h,i):u=1e-5,i<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(i,u,t/2),this._bevelSegments=Math.floor(s));let d;try{d=Zl({windingRule:a,elementType:Tr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{d=M_}let f;try{f=Zl({windingRule:wi.ODD,elementType:Tr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{f=dF}if(!d)throw new Error("error generating geometry");let p=d.elementCount;if(f){d.elementCount+=f.elementCount;for(let A=0;A<f.elements.length;A++){let C=f.elements[A],T=A%2===0?d.vertexCount:0;d.elements.push(C+T)}for(let A=0;A<f.vertexIndices.length;A++){let C=f.vertexIndices[A],T=d.vertexCount;d.vertexIndices.push(C+T)}for(let A=0;A<f.vertices.length;A++){let C=f.vertices[A];d.vertices.push(C)}}let m=1/0,g=-1/0,v=1/0,y=-1/0;for(let A=0,C=d.vertexCount;A<C;A++){let T=A*2,D=d.vertices[T+0],R=d.vertices[T+1];D<m&&(m=D),D>g&&(g=D),R<v&&(v=R),R>y&&(y=R)}this._minX=m,this._minY=v,this._width=g-m,this._height=y-v,this._buffer=new uF(this._computeBufferEstimatedSize(d));let x=[],w=[];for(let A=d.elementCount-1;A>=0;A--){let C=A>=p,T=A*2,D=d.elements[T+0],R=d.elements[T+1],O=D+R,j={start:D,count:R,normals:[],continuous:[],concave:[]},X=D,N=O-1,k=D+1,ne=this._shape.roundedCurves.length;do{let ee=X-D,le=d.vertices[N*2+0],$=d.vertices[N*2+1],K=d.vertices[X*2+0],J=d.vertices[X*2+1],se=d.vertices[k*2+0],ae=d.vertices[k*2+1],Ae=K-le,F=J-$,V=Math.sqrt(Ae*Ae+F*F);Ae/=V,F/=V;let ie=K-se,ue=J-ae,ve=Math.sqrt(ie*ie+ue*ue);ie/=ve,ue/=ve,j.normals[ee*2+0]=-ue,j.normals[ee*2+1]=ie,j.concave[ee]=Ae*ue-F*ie>0;let ge=d.vertexIndices[X];if(Array.isArray(ge))j.continuous[ee]=!1;else{let[_e,ye]=this._shape.getCurveIndexFromVertexId(ge-1,!0);if(ye>0&&ye<1)j.continuous[ee]=!0;else{let Se=ye===1?_e+1:_e-1;Se=(Se+ne)%ne;let pe=ye===1?0:1,G=this._shape.roundedCurves[_e].getTangent(ye),L=this._shape.roundedCurves[Se].getTangent(pe);j.continuous[ee]=G.dot(L)>.95}}C&&(j.normals[ee*2+0]*=-1,j.normals[ee*2+1]*=-1),[N,X,k]=[X,k,k+1],k>=O&&(k-=R)}while(k!==D+1);let te=[];te.push({bevelI:0,angle:0,size:0,boundary:{vertices:d.vertices.slice(D*2,O*2),vertexCount:R,vertexIndices:new Array(R).fill(!0).map((ee,le)=>[le,le]),elements:[0,R],elementCount:1,mesh:null},reverseMap:[],insetPoints:d.vertices.slice(D*2,O*2)});let Q=0;for(let ee=1;ee<=this._bevelSegments;ee++){let le=ee/this._bevelSegments*Math.PI/2,$=(1-Math.cos(le))*this._bevel,K=[],J=[],se=0;for(let Ae=0;Ae<R;Ae++){let F=Ae*2,V=(Ae-1+R)%R*2,ie=d.vertices[j.start*2+F+0],ue=d.vertices[j.start*2+F+1],ve=-j.normals[V+0]*$,ge=-j.normals[V+1]*$,_e=-j.normals[F+0]*$,ye=-j.normals[F+1]*$;if(j.concave[Ae]||!j.concave[Ae]&&C){let Se=Math.atan2(ge,ve),pe=Math.atan2(ye,_e);pe>Se&&(pe-=Math.PI*2);let G=pe-Se;if(j.continuous[Ae]||C){let L=Se+G/2,he=Math.cos(L)*$,Ce=Math.sin(L)*$;K[2*se+0]=ie+he*(C?-1:1),K[2*se+1]=ue+Ce*(C?-1:1),J[se]=Ae,se++}else{let L=Math.max(1,Math.floor(r/4*Math.abs(G)/Math.PI));for(let he=0;he<=L;he++){let Ce=Se+G*(he/L),B=Math.cos(Ce)*$,Le=Math.sin(Ce)*$;K[2*se+0]=ie+B,K[2*se+1]=ue+Le,J[se]=Ae,se++}}}else K[2*se+0]=ie+ve,K[2*se+1]=ue+ge,J[se]=Ae,se++,K[2*se+0]=ie,K[2*se+1]=ue,J[se]=Ae,se++,K[2*se+0]=ie+_e,K[2*se+1]=ue+ye,J[se]=Ae,se++}let ae=Zl({windingRule:wi.POSITIVE,elementType:Tr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[K],edgeCreateCallback:Ae=>{let F=Ae.Org.idx,V=J[F],ie=J[(F+1)%J.length];Ae.idx=[V,ie],Ae.Sym.idx=[ie,V]},vertexIdCallback:Ae=>{let F=Ae.Lprev.idx;return[F?F[1]:0,Ae.idx?Ae.idx[0]:0]}});if(!ae)throw console.log("Error"),new Error(`error generating bevel geometry for ${ee}'th loop`);if(!ae.vertexCount){let Ae=(ee-1)/this._bevelSegments*Math.PI/2;Q=(1-Math.sin(Ae))*this._bevel;break}for(let Ae=0;Ae<ae.vertexIndices.length;Ae++){let[F,V]=ae.vertexIndices[Ae];if(F===V)continue;let ie=V;V<F&&(ie+=R);for(let ue=F;ue<ie;ue++){let ve=ue%R,ge=(ue+1)%R;if(!j.continuous[ve]||!j.continuous[ge]){ae.vertexIndices[Ae]=[F,ve],ae.vertexIndices.splice(Ae+1,0,[ge,V]),ae.vertices.splice((Ae+1)*2,0,ae.vertices[Ae*2],ae.vertices[Ae*2+1]);break}}}te.push({bevelI:ee,angle:le,size:$,boundary:ae,reverseMap:J,insetPoints:K})}let Z=(ee,le,$)=>{let K=0,J=ee.boundary.vertexIndices.length;for(;K<J&&$(ee.boundary.vertexIndices[le]);)le=(le+1)%J,K++;return K},de=x.length;for(let ee=1;ee<te.length;ee++){let le=te[ee-1],$=te[ee],K=le.boundary.vertexIndices.length,J=$.boundary.vertexIndices.length;if(!K||!J)break;let se=j.concave.length,ae=0,Ae=l9(ae,R);for(;!le.boundary.vertexIndices.filter(Ae).length||!$.boundary.vertexIndices.filter(Ae).length;)ae++,Ae=l9(ae,R);let F=le.boundary.vertexIndices.findIndex(Ae),V=$.boundary.vertexIndices.findIndex(Ae);do F=(F+1)%K;while(Ae(le.boundary.vertexIndices[F]));do V=(V+1)%J;while(Ae($.boundary.vertexIndices[V]));ae=(ae+1)%R;let ie=ae,ue=0,ve=this._buildBevelVert(j,le,(F-1+K)%K,void 0,ue),ge=this._buildBevelVert(j,$,(V-1+J)%J,void 0,ue),_e=ve,ye=ge,Se,pe,G=!1;do{ue=(ae||se)/se,Ae=l9(ae,R);let L=Z(le,F,Ae),he=Z($,V,Ae),Ce=G;if(G=!1,L&&!he){for(let B=0;B<L;B++)Se=this._buildBevelVert(j,le,(F+B)%K,B/(L-1),ue),x.push(_e.topN,Se.topP,ye.topN),n===!1&&x.push(Se.bottomP,_e.bottomN,ye.bottomN),_e=Se;G=!0}else if(!L&&he)for(let B=0;B<he;B++)pe=this._buildBevelVert(j,$,(V+B)%J,B/(he-1),ue),x.push(ye.topN,_e.topP,pe.topP),n===!1&&x.push(_e.bottomP,ye.bottomN,pe.bottomP),ye=pe;else if(L&&he)if(Se=this._buildBevelVert(j,le,F,0,ue),pe=this._buildBevelVert(j,$,V,0,ue),Ce?(x.push(_e.topN,pe.topP,ye.topN),x.push(_e.topN,Se.topP,pe.topP),n===!1&&(x.push(pe.bottomP,_e.bottomN,ye.bottomN),x.push(pe.bottomP,Se.bottomP,_e.bottomN))):(x.push(ye.topN,_e.topN,Se.topP),x.push(ye.topN,Se.topP,pe.topP),n===!1&&(x.push(Se.bottomP,_e.bottomN,ye.bottomN),x.push(Se.bottomP,ye.bottomN,pe.bottomP))),_e=Se,ye=pe,L===he)for(let B=1;B<L;B++)Se=this._buildBevelVert(j,le,(F+B)%K,B/(L-1),ue),pe=this._buildBevelVert(j,$,(V+B)%J,B/(he-1),ue),x.push(_e.topN,Se.topP,ye.topN),x.push(ye.topN,Se.topP,pe.topP),n===!1&&(x.push(Se.bottomP,_e.bottomN,ye.bottomN),x.push(Se.bottomP,ye.bottomN,pe.bottomP)),_e=Se,ye=pe;else if(L>he){let B=L/he,Le=0;for(let Ue=1;Ue<L;Ue++)Se=this._buildBevelVert(j,le,(F+Ue)%K,Ue/(L-1),ue),x.push(_e.topN,Se.topP,ye.topN),n===!1&&x.push(Se.bottomP,_e.bottomN,ye.bottomN),_e=Se,Ue>(Le+1)*B&&(Le++,pe=this._buildBevelVert(j,$,(V+Le)%J,Le/(he-1),ue),x.push(ye.topN,Se.topP,pe.topP),n===!1&&x.push(Se.bottomP,ye.bottomN,pe.bottomP),ye=pe)}else{let B=he/L,Le=0;for(let Ue=1;Ue<he;Ue++)pe=this._buildBevelVert(j,$,(V+Ue)%J,Ue/(he-1),ue),x.push(ye.topN,Se.topP,pe.topP),n===!1&&x.push(Se.bottomP,ye.bottomN,pe.bottomP),ye=pe,Ue>(Le+1)*B&&(Le++,Se=this._buildBevelVert(j,le,(F+Le)%K,Le/(L-1),ue),x.push(_e.topN,Se.topP,ye.topN),n===!1&&x.push(Se.bottomP,_e.bottomN,ye.bottomN),_e=Se)}F=(F+L)%K,V=(V+he)%J,ae=(ae+1)%se}while(ae!==ie)}if(n===!1&&this._depth>this._bevel*2&&this._buildWall(te,j,x),C){let ee=[];for(let le=x.length-1;le>=de+2;le-=3){let $=x[le-2],K=x[le-1],J=x[le-0];ee.push(J,K,$)}x.splice(de,x.length-de,...ee)}if(C){let ee=[];for(let le=te[te.length-1].boundary.vertices.length-1;le>=1;le-=2){let $=te[te.length-1].boundary.vertices[le-1],K=te[te.length-1].boundary.vertices[le-0];ee.push($,K)}w.push(ee)}if(!C){let ee=te[te.length-1],le;try{le=Zl({windingRule:te.length>1?wi.POSITIVE:wi.ODD,elementType:Tr.POLYGONS,vertexSize:2,strict:!0,contours:[ee.insetPoints,...w]})}catch{le=fF}if(!le)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<u&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let $=0;$<le.elementCount*3;$+=3){let K=this._buildSurfaceVert(le,le.elements[$+0],Q),J=this._buildSurfaceVert(le,le.elements[$+1],Q),se=this._buildSurfaceVert(le,le.elements[$+2],Q);x.push(K.top,J.top,se.top),n===!1&&x.push(se.bottom,J.bottom,K.bottom)}}this.vertexCache={}}this._buffer.shrink();let _=new mt(Uint32Array.from(x),1),b=new mt(this._buffer.positions,3),M=new mt(this._buffer.normals,3),S=new mt(this._buffer.uvs,2);b.needsUpdate=!0,M.needsUpdate=!0,S.needsUpdate=!0,_.needsUpdate=!0,this.setAttribute("position",b),this.setAttribute("normal",M),this.setAttribute("uv",S),this.setIndex(_)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,i){let r=e[0];for(let s=0,a=r.boundary.vertexCount;s<a;s++){let n=this._buildBevelVert(t,r,s),o=this._buildBevelVert(t,r,(s+1)%a);i.push(o.topP,n.topN,n.bottomN),i.push(o.topP,n.bottomN,o.bottomP)}}_buildSurfaceVert(e,t,i){let r=t.toString();if(r in this.vertexCache)return this.vertexCache[r];let s=e.vertices[t*2+0],a=e.vertices[t*2+1],n=(s-this._minX)/this._width,o=(a-this._minY)/this._height;this.forPathBevel&&(o=1);let l=this._buffer.get(this.forPathBevel?1:2),h=l*3,c=l*2,u={top:l+0,bottom:l+1};return this._buffer.positions[h+0]=s,this._buffer.positions[h+1]=a,this._buffer.positions[h+2]=this.forPathBevel?this._bevel:this._depth-i,this._buffer.normals[h+0]=0,this._buffer.normals[h+1]=0,this._buffer.normals[h+2]=1,this._buffer.uvs[c+0]=n,this._buffer.uvs[c+1]=o,this.forPathBevel===!1&&(this._buffer.positions[h+3]=s,this._buffer.positions[h+4]=a,this._buffer.positions[h+5]=i,this._buffer.normals[h+3]=0,this._buffer.normals[h+4]=0,this._buffer.normals[h+5]=-1,this._buffer.uvs[c+2]=n,this._buffer.uvs[c+3]=o),this.vertexCache[r]=u,u}_buildBevelVert(e,t,i,r=1,s){let a=`${t.bevelI}:${i}`;if(a in this.vertexCache&&s!==0&&s!==1&&(!s||s===this.vertexCache[a].pathBevelUCoord))return this.vertexCache[a];let[n,o]=t.boundary.vertexIndices[i],l,h,c,u;n!==o?(h=n,l=o,u=!1,c=e.continuous[h]&&e.continuous[l]):(l=n,h=(l-1+e.count)%e.count,u=e.concave[l]&&t.bevelI>0,c=e.continuous[l]||u);let d=Math.cos(t.angle),f=Math.sin(t.angle),p=i*2,m=l*2,g=h*2,v=t.boundary.vertices[p+0],y=t.boundary.vertices[p+1],x=(1-f)*this._bevel,w=(v-this._minX)/this._width,_=(y-this._minY)/this._height;this.forPathBevel&&(s!==void 0&&(w=s),_=1);let b=e.normals[m+0],M=e.normals[m+1],S=e.normals[g+0],A=e.normals[g+1];if(u){let O=S-b,j=A-M;b=b+O*(1-r),M=M+j*(1-r);let X=Math.sqrt(b*b+M*M);b/=X,M/=X}let C=this.forPathBevel?this._buffer.get(c?1:2):this._buffer.get(c?2:4),T=C*3,D=C*2,R={i,fi:l,topP:C+0,topN:C+0,bottomP:C+1,bottomN:C+1,pathBevelUCoord:s};return this._buffer.positions[T+0]=v,this._buffer.positions[T+1]=y,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[T+0]=b*d,this._buffer.normals[T+1]=M*d,this._buffer.normals[T+2]=f,this._buffer.uvs[D+0]=w,this._buffer.uvs[D+1]=_,this.forPathBevel===!1&&(this._buffer.positions[T+3]=v,this._buffer.positions[T+4]=y,this._buffer.positions[T+5]=x,this._buffer.normals[T+3]=b*d,this._buffer.normals[T+4]=M*d,this._buffer.normals[T+5]=-f,this._buffer.uvs[D+2]=_,this._buffer.uvs[D+3]=w),c||(this.forPathBevel?(C+=1,T+=3,D+=2):(C+=2,T+=6,D+=4),R.topP=C+0,R.bottomP=C+1,this._buffer.positions[T+0]=v,this._buffer.positions[T+1]=y,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[T+0]=S*d,this._buffer.normals[T+1]=A*d,this._buffer.normals[T+2]=f,this._buffer.uvs[D+0]=w,this._buffer.uvs[D+1]=_,this.forPathBevel===!1&&(this._buffer.positions[T+3]=v,this._buffer.positions[T+4]=y,this._buffer.positions[T+5]=x,this._buffer.normals[T+3]=S*d,this._buffer.normals[T+4]=A*d,this._buffer.normals[T+5]=-f,this._buffer.uvs[D+2]=_,this._buffer.uvs[D+3]=w)),this.vertexCache[a]=R,R}clone(){let e=new C_(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Kv(this.userData),e}},pF=class extends rt{constructor(e,t=12,i={}){super(),this.type="ShapeGeometry",this.windingRule=wi.ODD,this.elementType=Tr.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:wi.ODD,elementType:Tr.POLYGONS,polySize:3,vertexSize:2,strict:!0},i);let r=this._shape.extractShapePointsToFlatArray([],this._curveSegments),s=this._shape.shapeHoles.map(d=>d.extractShapePointsToFlatArray([],this._curveSegments)),a,n=!0,o=!0,l,h;for(let d=0,f=r.length/2;d<f;d++){let p=d*2,m=r[p+0],g=r[p+1];if(l!==void 0&&m!==l&&(n=!1),h!==void 0&&g!==h&&(o=!1),l=m,h=g,!n&&!o)break}if(!n&&!o)try{a=Zl({contours:[r,...s],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{a=M_}let c=a?.vertexCount??1,u=a?.elementCount??1;if(this._positionAttribute=new mt(new Float32Array(c*3),3),this._normalAttribute=new mt(new Float32Array(c*3),3),this._uvAttribute=new mt(new Float32Array(c*2),2),this._indexAttribute=new mt(new Uint32Array(u*3),1),a){let d=1/0,f=-1/0,p=1/0,m=-1/0;for(let y=0,x=c;y<x;y++){let w=y*2,_=a.vertices[w+0],b=a.vertices[w+1];_<d&&(d=_),_>f&&(f=_),b<p&&(p=b),b>m&&(m=b)}let g=f-d,v=m-p;for(let y=0,x=c;y<x;y++){let w=y*2,_=a.vertices[w+0],b=a.vertices[w+1],M=(_-d)/g,S=(b-p)/v;this._positionAttribute.setXYZ(y,_,b,0),this._normalAttribute.setXYZ(y,0,0,1),this._uvAttribute.setXY(y,M,S)}for(let y=0,x=u;y<x;y++){let w=y*3,_=a.elements[w+0],b=a.elements[w+1],M=a.elements[w+2];this._indexAttribute.setX(w+0,_),this._indexAttribute.setX(w+1,b),this._indexAttribute.setX(w+2,M)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,(a?.elementCount??1)*3)}clone(){let e=new pF(this._shape,this._curveSegments);return e.userData=Kv(this.userData),e}},mF=class extends C_{constructor(e,t,i=0,r=12,s=3,a=wi.ODD){super(e,t,i,r,s,a),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,i){let r=e[0];for(let s=0,a=r.boundary.vertexCount;s<a;s++){let n=this._buildBevelVert(t,r,s),o=this._buildBevelVert(t,r,(s+1)%a);i.push(o.topP,n.topN,n.bottomN),i.push(o.topP,n.bottomN,o.bottomP)}}clone(){let e=new mF(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Kv(this.userData),e}},Yc=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:wi.ODD},e.parameters),r=Math.abs(i.width),s=Math.abs(i.height??i.width),a=Math.abs(i.depth??0),n=e.shape??t?.shape,o=n?.roundness??i.roundness;n!==void 0&&(n instanceof nr?(n.width!==r||n.height!==s)&&n.applySize(r,s):n=new nr(r,s).fromJSON(n),e.parameters?.roundness!==void 0&&e.parameters?.roundness>0&&n.update());let l=n??new nr(r,s);return{parameters:Object.assign(i,{width:r,height:s,depth:a,roundness:o}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:i,extrudeBevelSegments:r,subdivisions:s,roundness:a,windingRule:n}=e.parameters;e.shape.roundness=a;let o;return t<=0?o=new pF(e.shape,s,{windingRule:n}):o=new mF(e.shape,t,i,s,r,n),Object.assign(o,{userData:{...e,type:"VectorGeometry"}})}},gF=Math.PI*2,E_=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return i.angle=Ke.clamp(i.angle,0,360),{shape:e.shape&&e.shape instanceof nr?e.shape:new nr,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,spikes:r,angle:s,innerRadius:a,depth:n,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,h=e.shape,c=t*.5,u=i*.5,d=fme(h,c,u,s*Math.PI/180,r,a);h.isClosed=!0,h.update();let f;return s===0?(f=new rt,f.setAttribute("position",new Xe([],3))):f=Yc.create({shape:h,parameters:{subdivisions:d,depth:n,extrudeBevelSize:o,extrudeBevelSegments:l}}),Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function fme(e,t,i,r,s,a){if(r>=gF)return s>30||s%4===0?(mme(e,t,i,a),Math.round(s/4)):dT(e,r,s,t,i,a);r=Math.max(r,.001);let n={x:0,y:i},o=r+Math.PI*.5,l={x:Math.cos(o)*t,y:Math.sin(o)*i},h=rme({px:n.x,py:n.y,cx:l.x,cy:l.y,rx:t,ry:i,largeArcFlag:r>Math.PI,sweepFlag:!0});return s>30||s%h.length===0?pme(e,n.x,n.y,h,s,t,i,a):dT(e,r,s,t,i,a)}function pme(e,t,i,r,s,a,n,o){let l=Math.round(s/r.length);e.addPoint(xu(t,i));for(let h=0,c=r.length;h<c;h++){let u=r[h],d=e.points[h],f=xu(u.x,u.y);d.controls[1].position.set(u.x1,u.y1),f.controls[0].position.set(u.x2,u.y2),e.addPoint(f)}return o>0?vF(e,a,n,o):e.addPoint(xu(0,0)),l}function dT(e,t,i,r,s,a){let n=-t/i;for(let o=0;o<=i;o++){let l=n*o,h=Math.sin(l)*r,c=Math.cos(l)*s;e.addPoint(xu(h,c))}return t<gF?a>0?vF(e,r,s,a):e.addPoint(xu(0,0)):(e.removePoint(e.points[e.points.length-1]),a>0&&yF(e,r,s,a)),1}function mme(e,t,i,r=0,s=0,a=0){let n=.5522847498,o=t*n,l=i*n;e.addPoint(zp(s-t,a,s-t,a-l,s-t,a+l)),e.addPoint(zp(s,a+i,s-o,a+i,s+o,a+i)),e.addPoint(zp(s+t,a,s+t,a+l,s+t,a-l)),e.addPoint(zp(s,a-i,s+o,a-i,s-o,a-i)),r>0&&yF(e,t,i,r)}function xu(e,t){return new yu(Ke.generateUUID(),new re(e,t))}function zp(e,t,i,r,s,a){let n=xu(e,t);return n.controls[0].position.set(i,r),n.controls[1].position.set(s,a),n}function vF(e,t,i,r){xF(e,t,i,r).forEach(s=>e.addPoint(s))}function yF(e,t,i,r){let s=xF(e,t,i,r),a=new nr;s.forEach(n=>a.addPoint(n)),a.isClosed=!0,e.shapeHoles.push(a)}function xF(e,t,i,r){let s=r*t/100,a=s*(Math.abs(i)/Math.abs(t)),n=new re(s/t,a/i),o=e.points.map(l=>{let h=l.clone();return h.uuid=Ke.generateUUID(),h}).reverse();return o.forEach(l=>{l.position.multiply(n);let h=l.controls[0].position.clone().multiply(n),c=l.controls[1].position.clone().multiply(n);l.controls[0].position.copy(c),l.controls[1].position.copy(h)}),o}var gme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),r=Math.abs(i.width),s=Math.abs(i.height??r),a=Math.abs(i.depth??r),n=Math.abs(Math.min(r,a))/2;return{parameters:Object.assign(i,{width:r,height:s,depth:a,radius:n,segments:Math.round(i.segments),pathSegments:Math.round(i.pathSegments),cornerSegments:Math.round(i.cornerSegments)})}}static build(e){let{width:t,height:i,depth:r,radius:s,revolutions:a,segments:n,pathRadius:o,pathType:l,pathSegments:h,cornerRadius:c,cornerSegments:u}=e.parameters,d=new bF(!1,t,i,r,s,a,n,o,l,h,c,u);return Object.assign(d,{userData:{...e,type:"HelixGeometry"}})}},h9=new fu([0,0,0],1),bF=class extends rt{constructor(e=!0,t=1,i=1,r=1,s=1,a=1,n=1,o=1,l=1,h=1,c=1,u=1){if(super(),a===0)return;let d=e&&a===1;d&&(u=0),c>100&&(c=100),c===0&&(u=0);let f=()=>new E,p=new E,m=f(),g=f(),v=f(),y,x,w,_,b,M,S,A,C=f(),T=f(),D=f(),R=f(),O=f(),j=f(),X=f(),N=f(),k=i-2*o+.001,ne=k/a,te=Math.ceil(n*a),Q=te+1,Z=k/te,de=-k/2,ee=h+1,le=2*Math.PI/h,$=Math.PI/2/u,K=.01,J=Math.min((1-c/100)*o,o-K),se=o-J,ae=0,Ae=2,F=u*Ae+Ae,V=ee*F/Ae,ie=V+ee*Q,ue=Math.max(0,ee*(Q+F)),[ve,ge,_e]=[3,3,2].map(Ee=>Array(ue*Ee).fill(0)),ye=[],Se=s-o;function pe(Ee,qe){let Ge=Math.PI/2;M=qe*Z,A=2*Math.PI*(M%ne)/ne+Ge,M+=de,S=Math.sin(A)*Se,b=Math.cos(A)*Se,e?Ee.set(b,S,M):Ee.set(b,M,S)}pe(p,-1e-10),pe(m,0),C.copy(p),pe(p,1);let G=p.distanceTo(m),L=d?0:se+J,he=G*te+2*L,Ce=J,B=he-L;for(let Ee=0;Ee<=te;Ee++){pe(g,Ee),N.subVectors(g,C).normalize(),C.copy(g),j.copy(g).setComponent(+e+1,0).normalize(),X.crossVectors(N,j).normalize();let qe=Ee===0,Ge=Ee===te,Je=qe?3*Math.PI/2:$,ot=qe?Ce:B,Qe=qe?ee:ie,et=qe?0:ue-ee,oi=N.clone().multiplyScalar(qe?-se:se).add(g),Mi=N.clone().multiplyScalar(qe?-1:1).normalize();for(let fe=0;fe<ee;fe++){let Ie=fe*le;if(T.addVectors(p.copy(j).multiplyScalar(o*Math.cos(Ie)),m.copy(X).multiplyScalar(o*Math.sin(Ie))),D.copy(T).normalize(),qe||Ge){d||(ae=et+fe,[0,1,2].forEach(ke=>{ve[ae*3+ke]=oi.getComponent(ke),ge[ae*3+ke]=Mi.getComponent(ke)}),_e[ae*2]=+Ge,_e[ae*2+1]=fe/h),m.copy(D).multiplyScalar(J),v.addVectors(g,m);for(let ke=0;ke<u;ke++){let Ye=ke*$+Je;R.addVectors(p.copy(N).multiplyScalar(se*Math.sin(Ye)),m.copy(D).multiplyScalar(se*Math.cos(Ye))),O.copy(R).normalize(),m.addVectors(v,R),R.normalize(),ae=Qe+ke*ee+fe,[0,1,2].forEach(Gt=>{ve[ae*3+Gt]=m.getComponent(Gt),ge[ae*3+Gt]=O.getComponent(Gt)});let ct=+qe+Math.sin(Ye);_e[ae*2]=(ot+se*ct)/he,_e[ae*2+1]=fe/h}}m.addVectors(g,T),ae=V+Ee*ee+fe,[0,1,2].forEach(ke=>{ve[ae*3+ke]=m.getComponent(ke),ge[ae*3+ke]=D.getComponent(ke)}),_e[ae*2]=(L+Ee*G)/he,_e[ae*2+1]=fe/h}}let Le=Q+2*u+Ae,[Ue,je]=[+d,Le-1];for(let Ee=Ue;Ee<=je-1;Ee++){let qe=d&&Ee===je-1;for(let Ge=0;Ge<ee-1;Ge++)y=Ee*ee+Ge,x=y+1,w=(qe?Ge:y)+ee,_=(qe?Ge+1:x)+ee,Ee===0?ye.push(x,_,w):Ee===Le-2?ye.push(y,x,w):ye.push(y,x,w,x,_,w)}this.setIndex(ye),this.setAttribute("position",new Xe(ve,3)),this.setAttribute("normal",new Xe(ge,3)),this.setAttribute("uv",new Xe(_e,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),i=e.radialSegments+1,r=Array.from(this.getIndex().array),s,a,n,o,l=6*(t-1)*e.radialSegments,h=t,c=h===t;for(let u=0;u<e.radialSegments;u++)s=h*i+u,a=s+1,n=(c?u:s)+i,o=(c?u+1:a)+i,r[l++]=s,r[l++]=a,r[l++]=n,r[l++]=a,r[l++]=o,r[l++]=n;return r.length=l,h9.array=r,h9.count=r.length,h9}},vme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:s,corner:a,cornerSides:n}=e.parameters,o=s===0&&a!==0?new wF(t*.5,a,n):new lB(t*.5,s);return o.scale(1,i/t,r/t),Object.assign(o,{userData:{...e,type:"IcosahedronGeometry"}})}},wF=class extends __{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],n="IcosahedronGeometry";super(s,a,n,e,t,i),this.type=n}static fromJSON(e){return new wF(e.radius,e.corner,e.cornerSides)}},yme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){(e.parameters?.points??[]).forEach(r=>{Array.isArray(r)&&(r.x=r[0],r.y=r[1])});let i=Object.assign({},t?.parameters??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{points:t,segments:i,verticalSegments:r}=e.parameters,s=new _g;s.moveTo(t[0].x,t[0].y),s.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let a=new iB(s.extractPoints(r).shape,i);return a.rotateZ(Math.PI),Object.assign(a,{userData:{...e,type:"LatheGeometry"}})}},mn=new Fe,c9=new yi,Bp=new E,nv=class extends C1{constructor(){super(),this.uuid=Ke.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Dr().getNormalMatrix(e);for(let i=0,r=this.vertices.length;i<r;i++)this.vertices[i].applyMatrix4(e);for(let i=0,r=this.faces.length;i<r;i++){let s=this.faces[i];s.normal.applyMatrix3(t).normalize();for(let a=0,n=s.vertexNormals.length;a<n;a++)s.vertexNormals[a].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return mn.makeRotationX(e),this.applyMatrix4(mn),this}rotateY(e){return mn.makeRotationY(e),this.applyMatrix4(mn),this}rotateZ(e){return mn.makeRotationZ(e),this.applyMatrix4(mn),this}translate(e,t,i){return mn.makeTranslation(e,t,i),this.applyMatrix4(mn),this}scale(e,t,i){return mn.makeScale(e,t,i),this.applyMatrix4(mn),this}lookAt(e){return c9.lookAt(e),c9.updateMatrix(),this.applyMatrix4(c9.matrix),this}fromBufferGeometry(e){let t=this,i=e.index!==null?e.index:void 0,r=e.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let s=r.position,a=r.normal,n=r.color,o=r.uv,l=r.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<s.count;u++)t.vertices.push(new E().fromBufferAttribute(s,u)),n!==void 0&&t.colors.push(new pt().fromBufferAttribute(n,u));function h(u,d,f,p){let m=n===void 0?[]:[t.colors[u].clone(),t.colors[d].clone(),t.colors[f].clone()],g=a===void 0?[]:[new E().fromBufferAttribute(a,u),new E().fromBufferAttribute(a,d),new E().fromBufferAttribute(a,f)],v=new Px(u,d,f,g,m,p);t.faces.push(v),o!==void 0&&t.faceVertexUvs[0].push([new re().fromBufferAttribute(o,u),new re().fromBufferAttribute(o,d),new re().fromBufferAttribute(o,f)]),l!==void 0&&t.faceVertexUvs[1].push([new re().fromBufferAttribute(l,u),new re().fromBufferAttribute(l,d),new re().fromBufferAttribute(l,f)])}let c=e.groups;if(c.length>0)for(let u=0;u<c.length;u++){let d=c[u],f=d.start,p=d.count;for(let m=f,g=f+p;m<g;m+=3)i!==void 0?h(i.getX(m),i.getX(m+1),i.getX(m+2),d.materialIndex):h(m,m+1,m+2,d.materialIndex)}else if(i!==void 0)for(let u=0;u<i.count;u+=3)h(i.getX(u),i.getX(u+1),i.getX(u+2));else for(let u=0;u<s.count;u+=3)h(u,u+1,u+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Bp).negate(),this.translate(Bp.x,Bp.y,Bp.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,i=t===0?1:1/t,r=new Fe;return r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){let e=new E,t=new E;for(let i=0,r=this.faces.length;i<r;i++){let s=this.faces[i],a=this.vertices[s.a],n=this.vertices[s.b],o=this.vertices[s.c];e.subVectors(o,n),t.subVectors(a,n),e.cross(t),e.normalize(),s.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let i=0,r=this.vertices.length;i<r;i++)t[i]=new E;if(e){let i=new E,r=new E;for(let s=0,a=this.faces.length;s<a;s++){let n=this.faces[s],o=this.vertices[n.a],l=this.vertices[n.b],h=this.vertices[n.c];i.subVectors(h,l),r.subVectors(o,l),i.cross(r),t[n.a].add(i),t[n.b].add(i),t[n.c].add(i)}}else{this.computeFaceNormals();for(let i=0,r=this.faces.length;i<r;i++){let s=this.faces[i];t[s.a].add(s.normal),t[s.b].add(s.normal),t[s.c].add(s.normal)}}for(let i=0,r=this.vertices.length;i<r;i++)t[i].normalize();for(let i=0,r=this.faces.length;i<r;i++){let s=this.faces[i],a=s.vertexNormals;a.length===3?(a[0].copy(t[s.a]),a[1].copy(t[s.b]),a[2].copy(t[s.c])):(a[0]=t[s.a].clone(),a[1]=t[s.b].clone(),a[2]=t[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let i=this.faces[e],r=i.vertexNormals;r.length===3?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(let s=0,a=r.vertexNormals.length;s<a;s++)r.__originalVertexNormals[s]?r.__originalVertexNormals[s].copy(r.vertexNormals[s]):r.__originalVertexNormals[s]=r.vertexNormals[s].clone()}let e=new nv;e.faces=this.faces;for(let t=0,i=this.morphTargets.length;t<i;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let s=this.morphNormals[t].faceNormals,a=this.morphNormals[t].vertexNormals;for(let n=0,o=this.faces.length;n<o;n++){let l=new E,h={a:new E,b:new E,c:new E};s.push(l),a.push(h)}}let r=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let s=0,a=this.faces.length;s<a;s++){let n=this.faces[s],o=r.faceNormals[s],l=r.vertexNormals[s];o.copy(n.normal),l.a.copy(n.vertexNormals[0]),l.b.copy(n.vertexNormals[1]),l.c.copy(n.vertexNormals[2])}}for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new yr),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cs),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,i=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let r,s=this.vertices.length,a=this.vertices,n=e.vertices,o=this.faces,l=e.faces,h=this.colors,c=e.colors;t!==void 0&&(r=new Dr().getNormalMatrix(t));for(let u=0,d=n.length;u<d;u++){let f=n[u].clone();t!==void 0&&f.applyMatrix4(t),a.push(f)}for(let u=0,d=c.length;u<d;u++)h.push(c[u].clone());for(let u=0,d=l.length;u<d;u++){let f=l[u],p,m,g=f.vertexNormals,v=f.vertexColors,y=new Px(f.a+s,f.b+s,f.c+s);y.normal.copy(f.normal),r!==void 0&&y.normal.applyMatrix3(r).normalize();for(let x=0,w=g.length;x<w;x++)p=g[x].clone(),r!==void 0&&p.applyMatrix3(r).normalize(),y.vertexNormals.push(p);y.color.copy(f.color);for(let x=0,w=v.length;x<w;x++)m=v[x],y.vertexColors.push(m.clone());y.materialIndex=f.materialIndex+i,o.push(y)}for(let u=0,d=e.faceVertexUvs.length;u<d;u++){let f=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let g=f[p],v=[];for(let y=0,x=g.length;y<x;y++)v.push(g[y].clone());this.faceVertexUvs[u].push(v)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},i=[],r=[],s=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let h=this.vertices[o],c=Math.round(h.x*s)+"_"+Math.round(h.y*s)+"_"+Math.round(h.z*s);t[c]===void 0?(t[c]=o,i.push(this.vertices[o]),r[o]=i.length-1):r[o]=r[t[c]]}let a=[];for(let o=0,l=this.faces.length;o<l;o++){let h=this.faces[o];h.a=r[h.a],h.b=r[h.b],h.c=r[h.c];let c=[h.a,h.b,h.c];for(let u=0;u<3;u++)if(c[u]===c[(u+1)%3]){a.push(o);break}}for(let o=a.length-1;o>=0;o--){let l=a[o];this.faces.splice(l,1);for(let h=0,c=this.faceVertexUvs.length;h<c;h++)this.faceVertexUvs[h].splice(l,1)}let n=this.vertices.length-i.length;return this.vertices=i,n}setFromPoints(e){this.vertices=[];for(let t=0,i=e.length;t<i;t++){let r=e[t];this.vertices.push(new E(r.x,r.y,r.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let o=0;o<t;o++)e[o]._id=o;function i(o,l){return o.materialIndex-l.materialIndex}e.sort(i);let r=this.faceVertexUvs[0],s=this.faceVertexUvs[1],a,n;r&&r.length===t&&(a=[]),s&&s.length===t&&(n=[]);for(let o=0;o<t;o++){let l=e[o]._id;a&&a.push(r[l]),n&&n.push(s[l])}a&&(this.faceVertexUvs[0]=a),n&&(this.faceVertexUvs[1]=n)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let p in f)f[p]!==void 0&&(e[p]=f[p]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let p=this.vertices[f];t.push(p.x,p.y,p.z)}let i=[],r=[],s={},a=[],n={},o=[],l={};for(let f=0;f<this.faces.length;f++){let p=this.faces[f],m=!0,g=!1,v=this.faceVertexUvs[0][f]!==void 0,y=p.normal.length()>0,x=p.vertexNormals.length>0,w=p.color.r!==1||p.color.g!==1||p.color.b!==1,_=p.vertexColors.length>0,b=0;if(b=h(b,0,0),b=h(b,1,m),b=h(b,2,g),b=h(b,3,v),b=h(b,4,y),b=h(b,5,x),b=h(b,6,w),b=h(b,7,_),i.push(b),i.push(p.a,p.b,p.c),i.push(p.materialIndex),v){let M=this.faceVertexUvs[0][f];i.push(d(M[0]),d(M[1]),d(M[2]))}if(y&&i.push(c(p.normal)),x){let M=p.vertexNormals;i.push(c(M[0]),c(M[1]),c(M[2]))}if(w&&i.push(u(p.color)),_){let M=p.vertexColors;i.push(u(M[0]),u(M[1]),u(M[2]))}}function h(f,p,m){return m?f|1<<p:f&~(1<<p)}function c(f){let p=f.x.toString()+f.y.toString()+f.z.toString();return s[p]!==void 0||(s[p]=r.length/3,r.push(f.x,f.y,f.z)),s[p]}function u(f){let p=f.r.toString()+f.g.toString()+f.b.toString();return n[p]!==void 0||(n[p]=a.length,a.push(f.getHex())),n[p]}function d(f){let p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=o.length/2,o.push(f.x,f.y)),l[p]}return e.data={},e.data.vertices=t,e.data.normals=r,a.length>0&&(e.data.colors=a),o.length>0&&(e.data.uvs=[o]),e.data.faces=i,e}clone(){return new nv().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let u=0,d=t.length;u<d;u++)this.vertices.push(t[u].clone());let i=e.colors;for(let u=0,d=i.length;u<d;u++)this.colors.push(i[u].clone());let r=e.faces;for(let u=0,d=r.length;u<d;u++)this.faces.push(r[u].clone());for(let u=0,d=e.faceVertexUvs.length;u<d;u++){let f=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,m=f.length;p<m;p++){let g=f[p],v=[];for(let y=0,x=g.length;y<x;y++){let w=g[y];v.push(w.clone())}this.faceVertexUvs[u].push(v)}}let s=e.morphTargets;for(let u=0,d=s.length;u<d;u++){let f={};if(f.name=s[u].name,s[u].vertices!==void 0){f.vertices=[];for(let p=0,m=s[u].vertices.length;p<m;p++)f.vertices.push(s[u].vertices[p].clone())}if(s[u].normals!==void 0){f.normals=[];for(let p=0,m=s[u].normals.length;p<m;p++)f.normals.push(s[u].normals[p].clone())}this.morphTargets.push(f)}let a=e.morphNormals;for(let u=0,d=a.length;u<d;u++){let f={};if(a[u].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,m=a[u].vertexNormals.length;p<m;p++){let g=a[u].vertexNormals[p],v={};v.a=g.a.clone(),v.b=g.b.clone(),v.c=g.c.clone(),f.vertexNormals.push(v)}}if(a[u].faceNormals!==void 0){f.faceNormals=[];for(let p=0,m=a[u].faceNormals.length;p<m;p++)f.faceNormals.push(a[u].faceNormals[p].clone())}this.morphNormals.push(f)}let n=e.skinWeights;for(let u=0,d=n.length;u<d;u++)this.skinWeights.push(n[u].clone());let o=e.skinIndices;for(let u=0,d=o.length;u<d;u++)this.skinIndices.push(o[u].clone());let l=e.lineDistances;for(let u=0,d=l.length;u<d;u++)this.lineDistances.push(l[u]);let h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new xme().fromGeometry(this),t=new rt,i=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",kp.call(new mt(i,3),e.vertices)),e.normals.length>0){let r=new Float32Array(e.normals.length*3);t.setAttribute("normal",kp.call(new mt(r,3),e.normals))}if(e.colors.length>0){let r=new Float32Array(e.colors.length*3);t.setAttribute("color",fT.call(new mt(r,3),e.colors))}if(e.uvs.length>0){let r=new Float32Array(e.uvs.length*2);t.setAttribute("uv",pT.call(new mt(r,2),e.uvs))}if(e.uvs2.length>0){let r=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",pT.call(new mt(r,2),e.uvs2))}t.groups=e.groups;for(let r in e.morphTargets){let s=[],a=e.morphTargets[r];for(let n=0,o=a.length;n<o;n++){let l=a[n],h=new Xe(l.data.length*3,3);h.name=l.name,s.push(kp.call(h,l.data))}t.morphAttributes[r]=s}if(e.skinIndices.length>0){let r=new Xe(e.skinIndices.length*4,4);t.setAttribute("skinIndex",mT.call(r,e.skinIndices))}if(e.skinWeights.length>0){let r=new Xe(e.skinWeights.length*4,4);t.setAttribute("skinWeight",mT.call(r,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new rt,i=e.geometry;if(e.isPoints||e.isLine){let r=new Xe(i.vertices.length*3,3),s=new Xe(i.colors.length*3,3);if(t.setAttribute("position",kp.call(r,i.vertices)),t.setAttribute("color",fT.call(s,i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length){let a=new Xe(i.lineDistances.length,1);t.setAttribute("lineDistance",bme.call(a,i.lineDistances))}i.boundingSphere!==null&&(t.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(t.boundingBox=i.boundingBox.clone())}else e.isMesh&&(t=i.toBufferGeometry());return t}};nv.prototype.isGeometry=!0;var xme=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],i,r,s,a=e.faces;for(r=0;r<a.length;r++){let n=a[r];n.materialIndex!==s&&(s=n.materialIndex,i!==void 0&&(i.count=r*3-i.start,t.push(i)),i={start:r*3,materialIndex:s})}i!==void 0&&(i.count=r*3-i.start,t.push(i)),this.groups=t}fromGeometry(e){let t=e.faces,i=e.vertices,r=e.faceVertexUvs,s=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,n=e.morphTargets,o=n.length,l;if(o>0){l=[];for(let g=0;g<o;g++)l[g]={name:n[g].name,data:[]};this.morphTargets.position=l}let h=e.morphNormals,c=h.length,u;if(c>0){u=[];for(let g=0;g<c;g++)u[g]={name:h[g].name,data:[]};this.morphTargets.normal=u}let d=e.skinIndices,f=e.skinWeights,p=d.length===i.length,m=f.length===i.length;i.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let v=t[g];this.vertices.push(i[v.a],i[v.b],i[v.c]);let y=v.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let w=v.normal;this.normals.push(w,w,w)}let x=v.vertexColors;if(x.length===3)this.colors.push(x[0],x[1],x[2]);else{let w=v.color;this.colors.push(w,w,w)}if(s===!0){let w=r[0][g];w!==void 0?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new re,new re,new re))}if(a===!0){let w=r[1][g];w!==void 0?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new re,new re,new re))}for(let w=0;w<o;w++){let _=n[w].vertices;l[w].data.push(_[v.a],_[v.b],_[v.c])}for(let w=0;w<c;w++){let _=h[w].vertexNormals[g];u[w].data.push(_.a,_.b,_.c)}p&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),m&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},Px=class{constructor(e,t,i,r,s,a=0){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new E,this.vertexNormals=Array.isArray(r)?r:[],this.color=s&&s.isColor?s:new pt,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=a}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function bme(e){return this.array.set(e),this}function fT(e){let t=this.array,i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new pt),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this}function pT(e){let t=this.array,i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new re),t[i++]=a.x,t[i++]=a.y}return this}function kp(e){let t=this.array,i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new E),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this}function mT(e){let t=this.array,i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new Mt),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this}var wme=["a","b","c"];function _me(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function u9(e,t,i){let r=Math.min(e,t),s=Math.max(e,t),a=r+"_"+s;return i.get(a)}function d9(e,t,i,r,s,a){let n=Math.min(e,t),o=Math.max(e,t),l=n+"_"+o,h;if(r.has(l))h=r.get(l);else{let c=i[n],u=i[o];h={a:c,b:u,newEdge:null,faces:[]},r.set(l,h)}h.faces.push(s),a[e].edges.push(h),a[t].edges.push(h)}function Sme(e,t,i,r){let s,a,n;for(s=0,a=e.length;s<a;s++)i[s]={edges:[]};for(s=0,a=t.length;s<a;s++)n=t[s],d9(n.a,n.b,e,r,n,i),d9(n.b,n.c,e,r,n,i),d9(n.c,n.a,e,r,n,i)}function Fp(e,t,i,r,s){e.push(new Px(t,i,r,void 0,void 0,s))}function S2(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function Np(e,t,i,r){e.push([t.clone(),i.clone(),r.clone()])}var Ame=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof rt?e=new nv().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new E,i,r,s,a,n,o=e.vertices,l=e.faces,h=e.faceVertexUvs[0],c=h!==void 0&&h.length>0,u=[],d=new Map;Sme(o,l,u,d);let f=[],p,m,g,v,y,x,w;for(let K of Array.from(d.keys())){for(m=d.get(K),g=new E,y=3/8,x=1/8,w=m.faces.length,w!=2&&(y=.5,x=0,w!=1),g.addVectors(m.a,m.b).multiplyScalar(y),t.set(0,0,0),a=0;a<w;a++){for(v=m.faces[a],n=0;n<3&&(p=o[_me(v,wme[n])],!(p!==m.a&&p!==m.b));n++);p&&t.add(p)}t.multiplyScalar(x),g.add(t),m.newEdge=f.length,f.push(g)}let _,b,M,S,A,C,T,D=[];for(r=0,s=o.length;r<s;r++){for(C=o[r],A=u[r].edges,i=A.length,i==3?_=3/16:i>3&&(_=3/(8*i)),b=1-i*Number(_),M=_,i<=2&&(i==2?(b=3/4,M=1/8):i==1||i==0),T=C.clone().multiplyScalar(b),t.set(0,0,0),a=0;a<i;a++)S=A[a],p=S.a!==C?S.a:S.b,t.add(p);t.multiplyScalar(Number(M)),T.add(t),D.push(T)}let R=D.concat(f),O=D.length,j,X,N,k=[],ne=[],te,Q,Z,de,ee=new re,le=new re,$=new re;for(r=0,s=l.length;r<s;r++)v=l[r],j=Number(u9(v.a,v.b,d).newEdge)+O,X=Number(u9(v.b,v.c,d).newEdge)+O,N=Number(u9(v.c,v.a,d).newEdge)+O,Fp(k,j,X,N,v.materialIndex),Fp(k,v.a,j,N,v.materialIndex),Fp(k,v.b,X,j,v.materialIndex),Fp(k,v.c,N,X,v.materialIndex),c&&(te=h[r],Q=te[0],Z=te[1],de=te[2],ee.set(S2(Q.x,Z.x),S2(Q.y,Z.y)),le.set(S2(Z.x,de.x),S2(Z.y,de.y)),$.set(S2(Q.x,de.x),S2(Q.y,de.y)),Np(ne,ee,le,$),Np(ne,Q,ee,$),Np(ne,Z,le,ee),Np(ne,de,$,le));e.vertices=R,e.faces=k,c&&(e.faceVertexUvs[0]=ne)}},kr=new E,Mme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=e.geometry??t?.geometry??new rt().copy(new sn(100,100,100)),r;t===void 0?(i.computeBoundingBox(),i.boundingBox.getSize(kr),r={width:kr.x,height:kr.y,depth:kr.z,subdivisions:0}):r=t.parameters;let s={...r,...e.parameters};return{parameters:{width:Math.abs(s.width),height:Math.abs(s.height),depth:Math.abs(s.depth),subdivisions:Math.abs(s.subdivisions)},geometry:i}}static build(e){let{width:t,height:i,depth:r,subdivisions:s}=e.parameters,a=e.geometry??new rt().copy(new sn(100,100,100)),n=a.userData.parameters;n===void 0?(a.computeBoundingBox(),a.boundingBox.getSize(kr)):kr.set(n.width,n.height,n.depth),(t!==kr.x||i!==kr.y||r!==kr.z)&&a.scale(kr.x===0?1:t/kr.x,kr.y===0?1:i/kr.y,kr.z===0?1:r/kr.z);let o=a.originalGeometry;try{s>0?(o===void 0||n?.subdivisions!==s)&&(o===void 0&&(o=a),a=new Ame(s).modify(o).toBufferGeometry()):(o!==void 0&&(a=o),o=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals())}catch{o!==void 0&&(a=o),o=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals()}return o!==void 0&&Object.assign(a,{originalGeometry:o}),delete e.geometry,Object.assign(a,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,i){new vB(i).load(e,r=>{let s=this.normalizeInputs({geometry:r});r.boundingBox.getSize(kr);let a=100/kr.x;Object.assign(s.parameters,{width:100,height:kr.y*a,depth:kr.z*a}),t(this.build(s))})}},_F=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof nr?e.shape:new nr,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,spikes:r,cornerRadius:s,depth:a,extrudeBevelSize:n,extrudeBevelSegments:o}=e.parameters,l=e.shape,h=t*.5,c=i*.5,u=0,d=0,f=2*Math.PI/r;for(let m=0;m<r;m++){let g=f*m,v=u+Math.sin(g)*h,y=d+Math.cos(g)*c;l.addPoint(l.createPoint(v,y))}l.isClosed=!0;for(let m=0,g=l.points.length;m<g;m++)l.points[m].roundness=s;l.roundness=s,l.update();let p=Yc.create({shape:l,parameters:{roundness:s,depth:a,extrudeBevelSize:n,extrudeBevelSegments:o}});return Object.assign(p,{userData:{...e,type:"PolygonGeometry"}})}},Cme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,radialSegments:s,heightSegments:a,openEnded:n,cornerRadius:o,cornerSegments:l}=e.parameters,h=new Tme(t*.5,i,s,a,n,o,l);return h.scale(1,1,r/t),Object.assign(h,{userData:{...e,type:"PyramidGeometry"}})}};function Z0(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function f9(e,t,i,r,s,a){let n=t.clone().sub(e),o=i.clone().sub(e),l=n.angleTo(o);if(n.normalize(),o.normalize(),r===s){let h=n.add(o).normalize();a.copy(e).addScaledVector(h,r/Math.sin(l/2))}else{let h=n.angleTo(o);a.copy(e),a.addScaledVector(n,s/Math.sin(h)),a.addScaledVector(o,r/Math.sin(h))}}function Eme(e,t,i){let r=e.clone().sub(t),s=i.clone().sub(t);return r.projectOnVector(s),r.add(t)}var Tme=class extends rt{constructor(e=.5,t=1,i=4,r=1,s=!1,a=0,n=4){super(),i=Math.floor(Math.max(3,i)),r=Math.floor(r),n=Math.floor(n);let o=[],l=[],h=[],c=[],u=0,d=t/2,f=Math.PI/i,p=e*Math.cos(Math.PI/i),m=2*Math.PI/i,g=(i-2)*Math.PI/i,v=Math.PI-g,y=new E(0,-d,0),x=new E(0,d,0),w=new re(e,-d),_=new re(p,-d),b=new re(0,x.y).sub(_),M=new re(0,x.y).sub(w),S=new re(b.y,-b.x).normalize(),A=new re(M.y,-M.x).normalize(),C=e*Math.cos(Math.PI/i)*Math.tan((Math.PI-b.angle())/2)-1e-8;a=Math.min(a,C);let T;{let N=new E(S.x,S.y,0),k=new E(Math.cos(m)*N.x,N.y,Math.sin(m)*N.x);T=N.angleTo(k)}let D=a/Math.tan((Math.PI-b.angle())/2),R=a/Math.tan((Math.PI-T)/2),O=new E;if(!s){l.push(y.x,y.y,y.z),h.push(0,-1,0),c.push(0,0);let N=u++,k=[],ne=w.clone(),te=D/Math.cos(Math.PI/i);ne.x-=te;for(let Q=0;Q<i;Q++){let Z=Q/i*Math.PI*2+f,de=new re(Math.sin(Z),Math.cos(Z));Z0(ne,de,O),l.push(O.x,O.y,O.z),h.push(0,-1,0),c.push(0,0),k.push(u++)}for(let Q=0;Q<k.length;Q++)o.push(k[Q],N,k[(Q+1)%k.length])}{let N=new E,k=new E,ne=new E,te=new E,Q=new E,Z=new E;for(let de=0;de<i;de++){let ee=de/i*Math.PI*2+f,le=(de+.5)/i*Math.PI*2+f,$=(de+1)/i*Math.PI*2+f,K=new re(Math.sin(ee),Math.cos(ee)),J=new re(Math.sin(le),Math.cos(le)),se=new re(Math.sin($),Math.cos($));Z0(w,K,k),Z0(w,se,ne),Z0(S,J,N),f9(x,k,ne,R,R,te),l.push(te.x,te.y,te.z),f9(k,x,ne,R,D,Q),l.push(Q.x,Q.y,Q.z),f9(ne,k,x,D,R,Z),l.push(Z.x,Z.y,Z.z),h.push(N.x,N.y,N.z),h.push(N.x,N.y,N.z),h.push(N.x,N.y,N.z),c.push(0,0),c.push(0,0),c.push(0,0);let ae=u++,Ae=u++,F=u++;if(o.push(ae,Ae,F),a>0){{let ue=k.clone().add(ne).multiplyScalar(.5),ve=x.clone().sub(ue).normalize(),ge=y.clone().sub(ue).normalize().add(ve).normalize().multiplyScalar(-1),_e=Z.clone().sub(Q);j(ue,_e,ge,b.angle())}let V,ie;{let ue=new E;Z0(A,se,ue);let ve=Z.clone().add(te).multiplyScalar(.5);ve=Eme(ve,ne,x);let ge=Z.clone().sub(te);[V,ie]=j(ve,ge,ue,T,te.y)}{let ue=V,ve=ue.clone().setY(0).normalize(),ge=new E(0,-1,0),_e=ve.clone().cross(ge);X(ue,ve,ge,_e)}{let ue=b.angle(),ve=Math.PI-ue,ge=x.clone();ge.y-=a/Math.sin(ue-Math.PI/2);let _e=new E,ye=[];for(let pe=0;pe<n;pe++){let G=[],L=Math.PI/2-ve*pe/n,he=Math.cos(L),Ce=Math.sin(L),B=le;for(let Le=0;Le<=pe;Le++){let Ue=Math.cos(B),je=Math.sin(B);N.x=he*je,N.y=Ce,N.z=he*Ue,_e.copy(ge).addScaledVector(N,a),l.push(_e.x,_e.y,_e.z),h.push(N.x,N.y,N.z),c.push(0,0),G.push(u++),B+=Math.PI*2/pe/i}ye.push(G)}ie.reverse(),ye.push(ie);let Se=ye.length-1;for(let pe=0;pe<Se;pe++){let G=ye[pe],L=ye[pe+1],he=G.length-1;o.push(L[1],G[0],L[0]);for(let Ce=1;Ce<=he;Ce++)o.push(G[Ce],G[Ce-1],L[Ce]),o.push(L[Ce+1],G[Ce],L[Ce])}}}}}this.setIndex(o),this.setAttribute("position",new Xe(l,3)),this.setAttribute("normal",new Xe(h,3)),this.setAttribute("uv",new Xe(c,2));function j(N,k,ne,te,Q){let Z=-te/2,de=(Math.PI-te)/2,ee=k.clone().normalize().cross(ne);N.addScaledVector(ne,-a/Math.sin(de));let le=new E,$=new E,K=1,J=u,se=[];for(let ae=0;ae<=n;ae++){let Ae=Z+ae/n*te;$.set(0,0,0),$.addScaledVector(ee,Math.sin(Ae)),$.addScaledVector(ne,Math.cos(Ae));for(let F=0;F<=K;F++){let V=F/K-.5;if(le.copy(N),le.addScaledVector(k,V),le.addScaledVector($,a),Q!=null){let ie=Math.max(0,le.y-Q);le.addScaledVector(k,-ie/k.y)}l.push(le.x,le.y,le.z),h.push($.x,$.y,$.z),c.push(0,0),F===0&&se.push(u),u++}}for(let ae=0;ae<n;ae++)for(let Ae=0;Ae<K;Ae++){let F=J+Ae+(K+1)*ae,V=F+(K+1),ie=V+1,ue=F+1;o.push(F,V,ue),o.push(V,ie,ue)}return[N.clone().addScaledVector(k,.5),se]}function X(N,k,ne,te){let Q=Math.PI/2,Z=M.angle()-Q,de=[],ee=new E,le=new E;for(let K=0;K<=n;K++){let J=[],se=K/n;for(let ae=0;ae<=K;ae++){let Ae=((K?ae/K:0)-.5)*v,F=Math.cos(Ae),V=Math.sin(Ae),ie=Math.atan(Math.tan(Z)*F),ue=(Q+ie)*se,ve=Math.cos(ue),ge=Math.sin(ue);ee.set(0,0,0),ee.addScaledVector(k,ge*F),ee.addScaledVector(ne,ve),ee.addScaledVector(te,ge*V),le.copy(N).addScaledVector(ee,a),l.push(le.x,le.y,le.z),h.push(ee.x,ee.y,ee.z),c.push(0,0),J.push(u++)}de.push(J)}let $=de.length-1;for(let K=0;K<$;K++){let J=de[K],se=de[K+1],ae=J.length-1;o.push(J[0],se[1],se[0]);for(let Ae=1;Ae<=ae;Ae++)o.push(J[Ae-1],J[Ae],se[Ae]),o.push(J[Ae],se[Ae+1],se[Ae])}}}},T_=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),r=Object.assign(t?.ui??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof nr?e.shape:new nr,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)}),ui:r}}static build(e){let t=e.shape,{width:i,height:r,cornerRadius:s,cornerType:a,depth:n,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,h={x:i*.5,y:r*.5},c={x:-h.x,y:-h.y},u={x:h.x,y:h.y};function d(w,_,b){return _>i&&b>r?Math.min(w*i/_,w*r/b):_>i?w*i/_:b>r?w*r/b:w}let f=[];f[0]=s[0]===0?0:d(s[0],s[0]+s[3],s[0]+s[1]),f[1]=s[1]===0?0:d(s[1],s[1]+s[2],s[1]+s[0]),f[2]=s[2]===0?0:d(s[2],s[2]+s[1],s[2]+s[3]),f[3]=s[3]===0?0:d(s[3],s[3]+s[0],s[3]+s[2]);let p=c.x,m=u.x,g=u.y,v=c.y;t.addPoint(t.createPoint(p,g)),t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(m,v)),t.addPoint(t.createPoint(p,v)),t.isClosed=!0;let y=!0;for(let w=0,_=t.points.length;w<_;w++)t.points[w].roundness=f[w],w>0&&f[w]!==f[w-1]&&(y=!1);y&&(t.roundness=f[0]),t.useCubicForRoundedCorners=a!==1,t.update();let x=Yc.create({shape:t,parameters:{depth:n,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...e,type:"RectangleGeometry"}})}},Pme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return i.thetaLength=Ke.clamp(i.thetaLength,0,180),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t=100,height:i=t,depth:r=t,widthSegments:s=64,heightSegments:a=64,phiStart:n,phiLength:o,thetaStart:l,thetaLength:h}=e.parameters,c;return h===0?(c=new rt,c.setAttribute("position",new Xe([],3))):c=new pu(.5*t,s,a,n,o,l,h*Ke.DEG2RAD),c.scale(1,i/t,r/t),Object.assign(c,{userData:{...e,type:"SphereGeometry"}})}},Dme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:0})}}static build(e){let{width:t=100,height:i=t,widthSegments:r=8,heightSegments:s=8}=e.parameters,a=new Kn(t,i,r,s);return a.scale(1,1,1),Object.assign(a,{userData:{...e,type:"PlaneGeometry"}})}},Ime=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,angle:s,cornerRadius:a,cornerSegments:n}=e.parameters,o=new Ome(t,i,r,s,a,n);return Object.assign(o,{userData:{...e,type:"BackdropGeometry"}})}},Ome=class extends rt{constructor(e=1,t=1,i=1,r=90,s=10,a=24){super(),this.type="BackdropGeometry";let n=[],o=[],l=[],h=.001;s==0&&(a=1),a=Math.max(1,Math.floor(a)),s=Math.min(s,100),r=Math.min(180-h,r),r*=Math.PI/180;let c=[],u=Math.PI/2,d=(K=0,J=0,se=0)=>new E(K,J,se),f=d(),p=d(),[m,g,v]=[t/2,e/2,i/2],y=-g,x=+g,[w,_,b]=[d(y,-m,+v),d(y,-m,-v),d(y,+m,-v)],M=(K,J=!1)=>Math.sin(K-Math.PI/(1+ +J)),S=(K,J=!1)=>Math.cos(K-Math.PI/(1+ +J));b.y=Math.sin(r)*t-m;let A=Math.cos(r)*t-v,C=w.z-h;r<=u?(b.z=Math.min(A,C),b.z==C&&(b.y-=(A-C)/Math.tan(u-r))):_.z=Math.min(_.z-A-v,w.z-h),f.subVectors(w,_),p.subVectors(b,_);let T=Math.min(f.length(),p.length())*s/100,D=T*Math.tan(r/2),R=T/Math.cos(r/2),O=f.clone().normalize().add(p.normalize()).setLength(R).add(_);f.set(0,M(r,!0),S(r,!0)),c.push([b,f.clone()]);let j=(Math.PI-r)/a;for(let K=0;K<=a;K++){let J=u+r+K*j;f.set(0,Math.sin(J)*D,Math.cos(J)*D),f.add(O),p.set(0,M(J),S(J)),c.push([f.clone(),p.clone()])}c.push([w,d(0,1,0)]);let X=Math.sin(j/2)*D*2,N=c.length-1,k=c[0][0].distanceTo(c[1][0]),ne=c[N-1][0].distanceTo(c[N][0]),te=k+X*a+ne;c[0].push(1);for(let K=0;K<=a;K++)c[K+1].push(1-(k+K*X)/te);c[N].push(0);let[Q,Z,de]=c[0],ee,le,$;for(let K=1;K<c.length;K++)[ee,le,$]=c[K],n.push(y,Q.y,Q.z,y,ee.y,ee.z,x,Q.y,Q.z,x,Q.y,Q.z,y,ee.y,ee.z,x,ee.y,ee.z),o.push(0,Z.y,Z.z,0,le.y,le.z,0,Z.y,Z.z,0,Z.y,Z.z,0,le.y,le.z,0,le.y,le.z),l.push(0,de,0,$,1,de,1,de,0,$,1,$),[Q,Z,de]=[ee,le,$];this.setAttribute("position",new Xe(n,3)),this.setAttribute("normal",new Xe(o,3)),this.setAttribute("uv",new Xe(l,2))}},SF=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof nr?e.shape:new nr,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,innerRadiusPercent:r,spikes:s,cornerRadius:a,angle:n,depth:o,extrudeBevelSize:l,extrudeBevelSegments:h}=e.parameters,c=e.shape,u=t*.5,d=i*.5,f=0,p=0,m=n*Math.PI/360/s,g=Math.PI/2*3*-1,v=u*r/100,y=d*r/100;if(s===3&&r===50){m=2*Math.PI/s;for(let w=0;w<s;w++){let _=m*w,b=f+Math.sin(_)*u,M=p+Math.cos(_)*d;c.addPoint(c.createPoint(b,M))}}else for(let w=0;w<s;w++){let _=f+Math.cos(g)*u,b=p+Math.sin(g)*d;c.addPoint(c.createPoint(_,b)),g+=m,_=f+Math.cos(g)*v,b=p+Math.sin(g)*y,c.addPoint(c.createPoint(_,b)),g+=m}c.isClosed=!0;for(let w=0,_=c.points.length;w<_;w++)c.points[w].roundness=a;c.roundness=a,c.update();let x=Yc.create({shape:c,parameters:{roundness:a,depth:o,extrudeBevelSize:l,extrudeBevelSegments:h}});return Object.assign(x,{userData:{...e,type:"StarGeometry"}})}},Rme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i}=e.parameters,r=new Kn(t,i);return Object.assign(r,{userData:{...e,type:"TextFrameGeometry"}})}},Lme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),r=Math.abs(i.width),s=Math.abs(i.height??i.width);i.shapeBlendNode&&(s=r);let a=Math.round(Math.abs(i.depth??i.width*.25));return{parameters:Object.assign(i,{width:r,height:s,depth:a})}}static build(e){let{width:t,height:i,depth:r,radialSegments:s,tubularSegments:a,arc:n,cornerRadius:o,cornerSegments:l}=e.parameters,h=zme(t,i,r,t*.5,n,a,0,0,s,o,l);return h.scale(1,i/t,1),Object.assign(h,{userData:{...e,type:"TorusGeometry"}})}};function zme(e,t,i,r,s,a,n,o,l,h,c){[t,i]=[i,t],n=t/2;let u=Ke.clamp(s/360,0,1);if(u===0){let d=new rt;return d.setAttribute("position",new Xe([],3)),d}return u===1&&(h=0),new bF(!0,e,t,i,r,u,a,n,o,l,h,c)}var Bme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),tube:i.tube??i.width*.125})}}static build(e){let{width:t,tube:i,tubularSegments:r,radialSegments:s,p:a,q:n}=e.parameters,o=t*.5;o!==i&&(o-=i);let l=new cB(o,i,r,s,a,n);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},kme=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof nr?e.shape:new nr,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width*(i.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t=100,height:i,cornerRadius:r,depth:s,extrudeBevelSize:a,extrudeBevelSegments:n,isRect:o}=e.parameters,l=e.shape,h=t*.5,c=i*.5;o?(l.addPoint(l.createPoint(-h,c)),l.addPoint(l.createPoint(h,-c)),l.addPoint(l.createPoint(-h,-c))):(l.addPoint(l.createPoint(0,c)),l.addPoint(l.createPoint(h,-c)),l.addPoint(l.createPoint(-h,-c))),l.isClosed=!0;for(let d=0,f=l.points.length;d<f;d++)l.points[d].roundness=r;l.roundness=r,l.update();let u=Yc.create({shape:l,parameters:{roundness:r,depth:s,extrudeBevelSize:a,extrudeBevelSegments:n}});return Object.assign(u,{userData:{...e,type:"TriangleGeometry"}})}};function Fme(e,t){let i=2*Math.PI;return(e%i+i)%i===(t%i+i)%i}function Nme(e){return/^(rgba)?\(\s*(\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase())}function Ume(e,t,i){let r,s,a,n=Math.floor(e*6),o=e*6-n,l=i*(1-t),h=i*(1-o*t),c=i*(1-(1-o)*t);switch(n%6){case 0:r=i,s=c,a=l;break;case 1:r=h,s=i,a=l;break;case 2:r=l,s=i,a=c;break;case 3:r=l,s=h,a=i;break;case 4:r=c,s=l,a=i;break;case 5:default:r=i,s=l,a=h;break}return{r:r*255,g:s*255,b:a*255}}function Vme(e,t,i){e/=255,t/=255,i/=255;let r=Math.max(e,t,i),s=Math.min(e,t,i),a=r,n=r-s,o=r==0?0:n/r,l;if(r==s)l=0;else{switch(r){case e:l=(t-i)/n+(t<i?6:0);break;case t:l=(i-e)/n+2;break;case i:default:l=(e-t)/n+4;break}l/=6}return{h:l,s:o,v:a}}function jme(e){return e=Math.floor(e),{r:e>>16&255,g:e>>8&255,b:e&255}}function Gme(e,t,i){return(e<<16)+(t<<8)+i}function Hme(e,t,i){return e=Math.round(e),t=Math.round(t),i=Math.round(i),"#"+[e,t,i].map(r=>r.toString(16).padStart(2,"0")).join("").toUpperCase()}function Wme(e){let t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(r,s,a,n)=>String(s+s+a+a+n+n));let i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}var qme={parseRgba:Nme,hsvToRgb:Ume,rgbToHsv:Vme,hexToRgb:jme,rgbToHex:Gme,rgbToHexString:Hme,hexStringToRgb:Wme},Xme=class{add(e,t,i){if(typeof arguments[0]!="string")for(let r in arguments[0])this.add(r,arguments[0][r],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(r){this[r]=this[r]||[],t&&this[r][i?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(i){i.call(t&&t.context?t.context:t,t)})}},Yme=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if(typeof t!="object"||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}},De=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+De.version}static addUnaryOp(e){return De.max_unop_len=Math.max(e.length,De.max_unop_len),De.unary_ops[e]=1,De}static addBinaryOp(e,t,i){return De.max_binop_len=Math.max(e.length,De.max_binop_len),De.binary_ops[e]=t,i?De.right_associative.add(e):De.right_associative.delete(e),De}static addIdentifierChar(e){return De.additional_identifier_chars.add(e),De}static addLiteral(e,t){return De.literals[e]=t,De}static removeUnaryOp(e){return delete De.unary_ops[e],e.length===De.max_unop_len&&(De.max_unop_len=De.getMaxKeyLen(De.unary_ops)),De}static removeAllUnaryOps(){return De.unary_ops={},De.max_unop_len=0,De}static removeIdentifierChar(e){return De.additional_identifier_chars.delete(e),De}static removeBinaryOp(e){return delete De.binary_ops[e],e.length===De.max_binop_len&&(De.max_binop_len=De.getMaxKeyLen(De.binary_ops)),De.right_associative.delete(e),De}static removeAllBinaryOps(){return De.binary_ops={},De.max_binop_len=0,De}static removeLiteral(e){return delete De.literals[e],De}static removeAllLiterals(){return De.literals={},De}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new De(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(t=>t.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return De.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!De.binary_ops[String.fromCharCode(e)]||De.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return De.isIdentifierStart(e)||De.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(De.hooks[e]){let i={context:this,node:t};return De.hooks.run(e,i),i.node}return t}searchHook(e){if(De.hooks[e]){let t={context:this};return De.hooks[e].find(function(i){return i.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===De.SPACE_CODE||e===De.TAB_CODE||e===De.LF_CODE||e===De.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions(),t=e.length===1?e[0]:{type:De.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t=[],i,r;for(;this.index<this.expr.length;)if(i=this.code,i===De.SEMCOL_CODE||i===De.COMMA_CODE)this.index++;else if(r=this.gobbleExpression())t.push(r);else if(this.index<this.expr.length){if(i===e)break;this.throwError('Unexpected "'+this.char+'"')}return t}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,De.max_binop_len),t=e.length;for(;t>0;){if(De.binary_ops.hasOwnProperty(e)&&(!De.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!De.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,i,r,s,a,n,o,l;if(a=this.gobbleToken(),!a||(t=this.gobbleBinaryOp(),!t))return a;for(s={value:t,prec:De.binaryPrecedence(t),right_a:De.right_associative.has(t)},n=this.gobbleToken(),n||this.throwError("Expected expression after "+t),r=[a,s,n];t=this.gobbleBinaryOp();){if(i=De.binaryPrecedence(t),i===0){this.index-=t.length;break}s={value:t,prec:i,right_a:De.right_associative.has(t)},l=t;let h=c=>s.right_a&&c.right_a?i>c.prec:i<=c.prec;for(;r.length>2&&h(r[r.length-2]);)n=r.pop(),t=r.pop().value,a=r.pop(),e={type:De.BINARY_EXP,operator:t,left:a,right:n},r.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),r.push(s,e)}for(o=r.length-1,e=r[o];o>1;)e={type:De.BINARY_EXP,operator:r[o-1].value,left:r[o-2],right:e},o-=2;return e}gobbleToken(){let e,t,i,r;if(this.gobbleSpaces(),r=this.searchHook("gobble-token"),r)return this.runHook("after-token",r);if(e=this.code,De.isDecimalDigit(e)||e===De.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===De.SQUOTE_CODE||e===De.DQUOTE_CODE)r=this.gobbleStringLiteral();else if(e===De.OBRACK_CODE)r=this.gobbleArray();else{for(t=this.expr.substr(this.index,De.max_unop_len),i=t.length;i>0;){if(De.unary_ops.hasOwnProperty(t)&&(!De.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!De.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=i;let s=this.gobbleToken();return s||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:De.UNARY_EXP,operator:t,argument:s,prefix:!0})}t=t.substr(0,--i)}De.isIdentifierStart(e)?(r=this.gobbleIdentifier(),De.literals.hasOwnProperty(r.name)?r={type:De.LITERAL,value:De.literals[r.name],raw:r.name}:r.name===De.this_str&&(r={type:De.THIS_EXP})):e===De.OPAREN_CODE&&(r=this.gobbleGroup())}return r?(r=this.gobbleTokenProperty(r),this.runHook("after-token",r)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===De.PERIOD_CODE||t===De.OBRACK_CODE||t===De.OPAREN_CODE||t===De.QUMARK_CODE;){let i;if(t===De.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==De.PERIOD_CODE)break;i=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===De.OBRACK_CODE?(e={type:De.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==De.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===De.OPAREN_CODE?e={type:De.CALL_EXP,arguments:this.gobbleArguments(De.CPAREN_CODE),callee:e}:(t===De.PERIOD_CODE||i)&&(i&&this.index--,this.gobbleSpaces(),e={type:De.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),i&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e="",t,i;for(;De.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===De.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);De.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(t=this.char,t==="e"||t==="E"){for(e+=this.expr.charAt(this.index++),t=this.char,(t==="+"||t==="-")&&(e+=this.expr.charAt(this.index++));De.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);De.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return i=this.code,De.isIdentifierStart(i)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(i===De.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===De.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:De.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="",t=this.index,i=this.expr.charAt(this.index++),r=!1;for(;this.index<this.expr.length;){let s=this.expr.charAt(this.index++);if(s===i){r=!0;break}else if(s==="\\")switch(s=this.expr.charAt(this.index++),s){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=s}else e+=s}return r||this.throwError('Unclosed quote after "'+e+'"'),{type:De.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(De.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,De.isIdentifierPart(e));)this.index++;return{type:De.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],i=!1,r=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let s=this.code;if(s===e){i=!0,this.index++,e===De.CPAREN_CODE&&r&&r>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(s===De.COMMA_CODE){if(this.index++,r++,r!==t.length){if(e===De.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===De.CBRACK_CODE)for(let a=t.length;a<r;a++)t.push(null)}}else if(t.length!==r&&r!==0)this.throwError("Expected comma");else{let a=this.gobbleExpression();(!a||a.type===De.COMPOUND)&&this.throwError("Expected comma"),t.push(a)}}return i||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(De.CPAREN_CODE);if(this.code===De.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:De.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:De.ARRAY_EXP,elements:this.gobbleArguments(De.CBRACK_CODE)}}},Kme=new Xme;Object.assign(De,{hooks:Kme,plugins:new Yme(De),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});De.max_unop_len=De.getMaxKeyLen(De.unary_ops);De.max_binop_len=De.getMaxKeyLen(De.binary_ops);var Qu=e=>new De(e).parse(),Qme=Object.getOwnPropertyNames(De);Qme.forEach(e=>{Qu[e]===void 0&&e!=="prototype"&&(Qu[e]=De[e])});Qu.Jsep=De;var Zme="ConditionalExpression",Jme={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let i=t.node,r=this.gobbleExpression();if(r||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let s=this.gobbleExpression();if(s||this.throwError("Expected expression"),t.node={type:Zme,test:i,consequent:r,alternate:s},i.operator&&e.binary_ops[i.operator]<=.9){let a=i;for(;a.right.operator&&e.binary_ops[a.right.operator]<=.9;)a=a.right;t.node.test=a.right,a.right=t.node,t.node=i}}else this.throwError("Expected :")}})}};Qu.plugins.register(Jme);function r4(e){return{all:e=e||new Map,on:function(t,i){var r=e.get(t);r?r.push(i):e.set(t,[i])},off:function(t,i){var r=e.get(t);r&&(i?r.splice(r.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var r=e.get(t);r&&r.slice().map(function(s){s(i)}),(r=e.get("*"))&&r.slice().map(function(s){s(t,i)})}}}var AF=class{constructor(e,t,i){this.id=e,this.userAPI=t,this.result=void 0,this.error="null",this.isPrefetched=!1,this.isLoading=!1,this.isLoaded=!1,this.prefetchPromise=new Promise(r=>r()),this.emitter=r4(),this._innerCallUserAPI=async r=>{this.emitter.emit("start",{userAPIId:this.id}),this.isLoading=!0,this.isLoading=!1;try{this.result=await rge(this.userAPI,r),this.error="null",this.emitter.emit("success",{userAPIId:this.id})}catch(s){let a=s.message?.split("_:_")?.[0]?.replace("status:","")??"null";this.error=a,this.result=null,this.emitter.emit("error",{userAPIId:this.id})}this.isLoading=!1,this.isPrefetched=!0,this.isLoaded=!0},t?.integration?.type==="OpenAI"?this.result={content:""}:t.method==="GET"&&t.url!==""&&(this.prefetchPromise=this.prefetch(i)),this._debouncedCallUserAPI=this._innerCallUserAPI,this._updateDebouncedCallUserAPI(),this._debouncedPrefetch=Nd(this.prefetch,1e3,{trailing:!0})}_updateDebouncedCallUserAPI(){this._debouncedCallUserAPI=this.userAPI.debounce!==void 0&&this.userAPI.debounce>0?Nd(this._innerCallUserAPI,this.userAPI.debounce,{leading:!0,trailing:!0}):this._innerCallUserAPI}async prefetch(e){await this.callUserAPI(e)}async callUserAPI(e){await this._debouncedCallUserAPI(e)}update(e,t,i=!0){this.userAPI=e,this._updateDebouncedCallUserAPI(),this.userAPI.url!==""&&this.userAPI.method==="GET"&&i&&this._debouncedPrefetch(t)}retrieveValue(e){if(this.result)try{return jr.zoom(this.result,e)}catch(t){console.error(t)}}retrieveZoomedKeyValues(e){if(this.result){let t=e&&e.length?jr.zoom(this.result,e):this.result;if(ige(t))return Object.entries(t);if(tge(t))return t.map((i,r)=>[r.toString(),i]);throw ege(t)?new Error("This path points to a value, use retrieveValue() instead. "+e?.join(".")):new Error("Path error"+e?.join("."))}}dispose(){}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}get autostart(){return this.userAPI.autoStart}};function $me(e){let t=new Headers;return e.headers.forEach(i=>{i.data.key!==""&&t.append(i.data.key,i.data.value)}),t}function ege(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null}function tge(e){return Array.isArray(e)}function ige(e){return typeof e=="object"&&e!==null}async function rge(e,t,i=new AbortController){let r,s=e.url,a=e.proxy?.enabled??!1,n;if(e.integration?.type==="OpenAI"){let l=b3(e.integration.prompt===""?[]:JSON.parse(e.integration.prompt),t),h=e.integration.behavior===""?[]:b3(JSON.parse(e.integration.behavior),t);n=`{
		"model": "${e.integration.model}",
		"messages": [${e.integration.useBehavior?`
		{
			"role": "system",
			"content": "${h}"
		},`:""}
		{
			"role": "user",
			"content": "${l}"
		}
		]
	}`}if(a){s=`https://apis.spline.design/file/${e.proxy.fileId}/external-api/request?uuidexternalapi=${e.proxy.proxyId}`;let l;n!==void 0?l=n:e.method==="POST"&&e.body&&(l=b3(JSON.parse(e.body),t)),l!==void 0&&(s+=`&data=${encodeURIComponent(l.replace(/(\r\n|\n|\r|\t)/gm,""))}`)}else e.integration?.type==="OpenAI"?r=n:e.method==="POST"&&e.body&&(r=b3(JSON.parse(e.body),t));let o=await fetch(s,{method:a?"GET":e.method,headers:a?void 0:$me(e),signal:i.signal,body:r});if(!o.ok)throw new Error("status:"+o.status+"_:_"+o.statusText);if(e.integration?.type==="OpenAI"){let l=await o.json();return a&&(l=l.response),{content:l.choices[0].message.content}}else{let l=await o.json();return a&&(l=l.response),l}}var MF=(e,t)=>{if(typeof e=="string"){let i=t.getVariable(e);if(i)return MF(i,t)}return w1.isBoolean(e)?w1.getDisplayedValue(e).toLowerCase():w1.getDisplayedValue(e)},b3=(e,t)=>e.map((i,r)=>{if("text"in i)return i.text;if("type"in i){if(i.type==="paragraph")return(r>0?`
`:"")+b3(i.children,t);if(i.type==="variable"){let s=t.getVariable(i.variableId);if(s!==void 0)return MF(s,t)}}return""}).join(""),sge=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],age=["0","1","2","3","4","5","6","7","8","9","."],nge=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function oge(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}Qu.addBinaryOp("^",11,!0);function CF(e,t,i="number"){let r="";for(let n=0;n<e.length;n++){let o=e[n];if("objType"in o&&o.objType==="api"){let l=JSON.parse(o.id),h=l[0],c=t.getUserAPI(h);if(c!==void 0&&c instanceof AF){let u=c.retrieveValue(l.slice(1));u!==void 0&&(r+=u)}continue}if("objType"in o&&o.objType==="webhook"){let l=JSON.parse(o.id),[h,c]=l,u=t.getUserWebhook(h);if(u!==void 0){let d=u.getParameterValue(c);d!==void 0&&(r+=d)}continue}if("objType"in o&&o.objType==="aiAssistant"){let l=t.openAIRealtime;if("objId"in o&&o.objId!==void 0){let h;if(t.scene.data.objects.traverse((c,u)=>{let d=u.events?.find(f=>f.id===o.objId);d&&(h=d)}),h!==void 0&&h.data.type==="AIAssistantListener"){let c=l?.computeAnalysisForListenerEvent(h.data);if(c!==void 0){r+=c;continue}}}r+=l?.voice??0;continue}if("id"in o){let l=e[n-1];if(n>0&&"id"in l){console.error("Two variables in a row",e);return}let h=t.getVariable(o.id),c=w1.getDisplayedValue(h);i==="number"&&w1.isTextValue(h)&&Array.isArray(h.textValue)&&h.textValue.length===1?c=parseFloat(c).toString():i==="boolean"&&w1.isBoolean(h)?c=h?"true":"false":i==="boolean"&&w1.isTextValue(h)&&!Array.isArray(h.textValue)&&(c='"'+c+'"'),r+=c;continue}else if(i==="string"){o.name!=='"'&&(o.name!=="+"||o.escaped)&&(r+=o.name),o.name==="+"&&!o.escaped&&r[r.length-1]==="\\"&&(r=r.slice(0,-1)+o.name);continue}if(o.name==="and"){r+="&&";continue}if(o.name==="or"){r+="||";continue}if(o.name==="True"){r+="true";continue}if(o.name==="False"){r+="false";continue}if(i==="boolean"&&!oge(o.name)&&!age.includes(o.name)&&!sge.includes(o.name)&&!nge.includes(o.name.replace(/\($/g,""))){r+='"'+o.name+'"';continue}r+=o.name}if(i==="string")return r;if(e.length===0){if(i==="number")return 0;if(i==="boolean")return!1}let s;try{s=Qu(r)}catch(n){console.error(r,n);return}let a;try{a=ai(s)}catch(n){console.error(r,s,n)}return a}function ai(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(ai(e.left)===ai(e.right));case"!=":return+(ai(e.left)!==ai(e.right));case">":return+(ai(e.left)>ai(e.right));case">=":return+(ai(e.left)>=ai(e.right));case"<":return+(ai(e.left)<ai(e.right));case"<=":return+(ai(e.left)<=ai(e.right));case"+":return ai(e.left)+ai(e.right);case"-":return ai(e.left)-ai(e.right);case"*":return ai(e.left)*ai(e.right);case"/":return ai(e.left)/ai(e.right);case"%":return ai(e.left)%ai(e.right);case"&&":return ai(e.left)&&ai(e.right);case"||":return ai(e.left)||ai(e.right);case"^":return Math.pow(ai(e.left),ai(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-ai(e.argument);case"!":return+!ai(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let t=0,i=1;if(e.arguments.length>=1)try{t=ai(e.arguments[0])}catch(r){console.warn(r)}if(e.arguments.length>=2)try{i=ai(e.arguments[1])}catch(r){console.warn(r)}return t=Math.min(i,t),i=Math.max(i,t),t+Math.random()*(i-t)}return Math[e.callee.name].apply(null,e.arguments.map(ai))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var lge=new Fe,hge=new Fe;function cge(e,t,i){let r=[new E,new E,new E],s=[new E,new E,new E];return e.extractBasis(r[0],r[1],r[2]),t.extractBasis(s[0],s[1],s[2]),r.forEach((a,n)=>{let o=s[n],l=Ke.lerp(a.length(),o.length(),i);a.lerp(o,i).setLength(l)}),new Fe().makeBasis(r[0],r[1],r[2])}var uge=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),r=Math.abs(i.width),s=Math.abs(i.height??i.width),a=Math.abs(i.depth??0),n=t?.shapeData??E_.create({parameters:Xk}).userData.shape;return{path:e.path??Wg.defaultData(),parameters:Object.assign(i,{width:r,height:s,depth:a,extrusion:{...Yk,...i.extrusion}}),shapeData:n}}static build(e){if(e.path.points.length>=2){let t=new dge(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new rt,{userData:{...e,type:"PathGeometry"}})}},dge=class extends rt{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!Fme(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:i,offset:r}=this.inputs.parameters.extrusion;i=Math.max(0,Math.min(i,1)),r=Math.max(0,Math.min(r,1));let s=this.inputs.path.isClosed?e.length:e.length-1,a=Math.floor(r*s),n=this.inputs.path.isClosed?Math.ceil((i+r)*s):Math.ceil(Math.min(1,i+r)*s),o=Math.min(Math.max(2,n-a+1),s+2),l=[],h=[];for(let N=0;N<o;N++){let k=this.inputs.path.isClosed?(N+a)%e.length:Math.min(N+a,e.length-1);l.push(e[k].clone()),h.push(t[k].clone())}let c=(N,k,ne)=>{l[N]=l[N].clone().lerp(l[k],ne),h[N]=cge(h[N],h[k],ne)},u=0,d=r*s%1;(!this.inputs.path.isClosed||i<=1)&&(d||r===0)&&(u=d,c(0,1,u));let f=0,p=(r+i)*s%1;if((this.inputs.path.isClosed&&i<=1||!this.inputs.path.isClosed&&r+i<1)&&p&&(f=p,c(l.length-1,l.length-2,1-f)),i===0){let N=l.length-1;l[N].copy(l[0]),h[N].copy(h[0])}this._applyPathModifiers(h,u,f);let{bevel:m,bevelSides:g}=this.inputs.parameters.extrusion,v=m>0?this.inputs.parameters.extrusion.capType:"flat",y=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(y=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:x,infos:w,vertices:_}=this._computeShapePoints(y),b=0,M;v==="round"&&(M=new C_(this.inputs.shapeData,2*m,m,y,g,void 0,!0),b=M.getAttribute("position").count);let S=0,A=0;w.sort((N,k)=>N.start-k.start),w.forEach(N=>{N.verticesStart=S,N.verticesCount=N.continuous.reduce((k,ne,te)=>k+(te===0||!ne?2:1),0),A+=N.verticesCount,S=A});let C=A*o,T,D=0;if(this._isOpenEnded()&&v==="flat"){try{T=Zl({windingRule:wi.ODD,elementType:Tr.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:x})}catch{T=fF}D=T.vertexCount}let R=C+2*D+b*2,O=C+2*D,j={positions:new Float32Array(R*3),normals:new Float32Array(R*3),uvs:new Float32Array(R*2)},X=[];if(w.forEach(N=>{this._extrudeRegion(N,_,h,l,j,X,this._isGeometryClosed()&&!this._isOpenEnded())}),T&&(this._closeEnd(T,C,X,j,h[0],l[0],!1),this._closeEnd(T,C+D,X,j,h[h.length-1],l[l.length-1],!0)),M){j.positions.set(M.getAttribute("position").array,O*3),j.normals.set(M.getAttribute("normal").array,O*3),j.uvs.set(M.getAttribute("uv").array,O*2);for(let te=O;te<O+b;te++)j.uvs[te*2+1]=1e-4;let N=X.length;X.push(...M.getIndex().array.map(te=>te+O)),O+=b,j.positions.set(M.getAttribute("position").array,O*3),j.normals.set(M.getAttribute("normal").array,O*3),j.uvs.set(M.getAttribute("uv").array,O*2);let k=X.length;X.push(...M.getIndex().array.map(te=>te+O)),this.setAttribute("position",new mt(j.positions,3)),this.setAttribute("normal",new mt(j.normals,3)),this.setAttribute("uv",new mt(j.uvs,2)),this.setIndex(X);let ne=lge;ne.copy(h[h.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(ne,O,R),ne.copy(h[0]).setPosition(l[0]).multiply(hge.makeScale(1,1,-1)),this.applyMatrix4OnRange(ne,O-b,O),this.reverseIndicesOnRange(N,k)}else this.setAttribute("position",new mt(j.positions,3)),this.setAttribute("normal",new mt(j.normals,3)),this.setAttribute("uv",new mt(j.uvs,2)),this.setIndex(X)}_extractPathPoints(){let e=rF(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(i=>{t[t.length-1].distanceToSquared(i)>.001&&t.push(i)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],i=e.length,r=this.inputs.path.isClosed,s=new E,a=new E,n=new E,o=new E,l=new E(0,1,0);for(let p=0;p<i;p++){let m=e[p],g;p===0?g=r?e[e.length-2]:m.clone().multiplyScalar(2).sub(e[1]):g=e[p-1];let v;p===i-1?v=r?e[1]:m.clone().multiplyScalar(2).sub(e[p-1]):v=e[p+1];let y=m.clone().sub(g).normalize(),x=v.clone().sub(m).normalize(),w=y.clone().add(x).normalize();n.copy(w),p===0&&(w.equals(l)||w.clone().negate().equals(l))&&l.set(0,0,1);let _=l.clone().cross(w).normalize(),b=w.clone().cross(_).normalize();l.copy(b),o.copy(_),p===0&&(s.copy(b),a.copy(w));let M=new Fe().makeBasis(_,b,w);t.push(M)}let h=r?a:n,c=r?s:new E(0,1,0),u=h.clone().cross(o).normalize(),d=Math.acos(c.dot(u));if(isNaN(d))return t;let f=c.clone().cross(u);h.dot(f)>0&&(d*=-1);for(let p=1;p<t.length;p++){let m=new Fe().makeRotationZ(d*p/t.length);t[p].multiply(m)}return t}_applyPathModifiers(e,t,i){let r=e.length,{angle:s,twist:a,startScale:n,endScale:o}=this.inputs.parameters.extrusion,l=new Fe,h=new Fe;return e.forEach((c,u)=>{let d=u===0?0:u===r-1?1:(u-t)/(r-(i===0?0:1)-(t+(1-i)));l.makeRotationZ(Ke.lerp(s,s+a,d)*Ke.DEG2RAD);let f=Ke.lerp(n,o,d);h.makeScale(f,f,f),c.multiply(l).multiply(h)}),e}_computeShapePoints(e=12,t=wi.ODD){let i=this.inputs.shapeData,r=i.extractShapePointsToFlatArray([],e),s=i.shapeHoles.map(h=>{let c=h.extractShapePointsToFlatArray([],e),u=[];for(let d=c.length-1;d>=1;d-=2){let f=c[d-1],p=c[d-0];u.push(f,p)}return u}),a;try{a=Zl({windingRule:t,elementType:Tr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[r]})}catch{a=M_}let n;try{n=Zl({windingRule:wi.ODD,elementType:Tr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...s]})}catch{n=dF}if(!a)throw new Error("error generating geometry");let o=a.elementCount;if(n){a.elementCount+=n.elementCount;for(let h=0;h<n.elements.length;h++){let c=n.elements[h],u=h%2===0?a.vertexCount:0;a.elements.push(c+u)}for(let h=0;h<n.vertexIndices.length;h++){let c=n.vertexIndices[h],u=a.vertexCount;a.vertexIndices.push(c+u)}for(let h=0;h<n.vertices.length;h++){let c=n.vertices[h];a.vertices.push(c)}}for(let h=0,c=a.vertexCount;h<c;h++){let u=h*2;a.vertices[u+0],a.vertices[u+1]}let l=[];for(let h=a.elementCount-1;h>=0;h--){let c=h>=o,u=h*2,d=a.elements[u+0],f=a.elements[u+1],p=d+f,m={start:d,count:f,normals:[],isHole:c,continuous:[],verticesStart:0,verticesCount:0};l.push(m);let g=d,v=p-1,y=d+1,x=i.roundedCurves.length;do{let w=g-d;a.vertices[v*2+0],a.vertices[v*2+1];let _=a.vertices[g*2+0],b=a.vertices[g*2+1],M=a.vertices[y*2+0],S=a.vertices[y*2+1],A=_-M,C=b-S,T=Math.sqrt(A*A+C*C);A/=T,C/=T,m.normals[w*2+0]=-C,m.normals[w*2+1]=A;let D=a.vertexIndices[g];if(Array.isArray(D))m.continuous[w]=!1;else{let[R,O]=i.getCurveIndexFromVertexId(D-1,!0);if(O>0&&O<1)m.continuous[w]=!0;else{let j=O===1?R+1:R-1;j=(j+x)%x;let X=O===1?0:1,N=i.roundedCurves[R].getTangent(O),k=i.roundedCurves[j].getTangent(X);m.continuous[w]=N.dot(k)>.95}}c&&(m.normals[w*2+0]*=-1,m.normals[w*2+1]*=-1),[v,g,y]=[g,y,y+1],y>=p&&(y-=f)}while(y!==d+1)}return{regions:[r,...s],infos:l,vertices:a.vertices}}_insertVertex(e,t,i,r,s){let a=t*2,n=t*3;e.positions[n+0]=i.x,e.positions[n+1]=i.y,e.positions[n+2]=i.z,e.normals[n+0]=r.x,e.normals[n+1]=r.y,e.normals[n+2]=r.z,e.uvs[a+0]=s.x,e.uvs[a+1]=s.y}_extrudeRegion(e,t,i,r,s,a,n){let o=new E,l=new E,h=new E,c=new E,u=new re;i.forEach((f,p)=>{let m=r[p],g=e.verticesStart*i.length+e.verticesCount*p;for(let v=0;v<e.count;v++){let y=(e.start+v)*2;if(o.set(t[y+0],t[y+1],0),h.copy(o).applyMatrix4(f).add(m),e.continuous[v])c.set(e.normals[v*2+0],e.normals[v*2+1],0);else{let x=v===0?(e.start+e.count-1)*2:y-2;l.set(t[x+0],t[x+1],0),c.copy(o).sub(l),c.set(-c.y,c.x,0),e.isHole||c.negate()}if(c.applyMatrix4(f).normalize(),u.set(v===0?1:v/e.count,p/(i.length-1)),this._insertVertex(s,g,h,c,u),g++,!e.continuous[v]||v===0){if(v===0)c.set(e.normals[v*2+0],e.normals[v*2+1],0),u.set(0,p/(i.length-1));else{let x=v===e.count-1?e.start*2:y+2;l.set(t[x+0],t[x+1],0),c.copy(l).sub(o),c.set(-c.y,c.x,0),e.isHole||c.negate()}c.applyMatrix4(f).normalize(),this._insertVertex(s,g,h,c,u),g++}}});let d=i.length-1;for(let f=0;f<d;f++){let p=e.verticesStart*i.length+e.verticesCount*f,m=e.verticesStart*i.length+e.verticesCount*(f+1),g=0;for(let v=0;v<e.count;v++){(!e.continuous[v]||v===0)&&g++;let y=v===e.count-1?0:g+1,x=p+g,w=p+y,_=m+y,b=m+g;e.isHole?a.push(x,_,w,x,b,_):a.push(x,w,_,x,_,b),g++}}}_closeEnd(e,t,i,r,s,a,n){let o=e.vertexCount,l=new E(0,0,n?-1:1).applyMatrix4(s),h=new E,c=new re;for(let d=0;d<o;d++){let f=2*d;h.set(e.vertices[f+0],e.vertices[f+1],0).applyMatrix4(s).add(a),this._insertVertex(r,t+d,h,l,c)}let u=e.elements;for(let d=0;d<e.elementCount;d++){let f=3*d,p=u[f+0]+t,m=u[f+(n?1:2)]+t,g=u[f+(n?2:1)]+t;i.push(p,m,g)}}applyMatrix4OnRange(e,t,i){let r=e.elements,s=new Dr().getNormalMatrix(e).elements,a,n,o,l,h=this.attributes.position,c=this.attributes.normal;if(!h||!c)return;let u=h.array,d=c.array,f=h.itemSize;for(let p=t*f,m=i*f;p<m;p+=f){if(p===t)debugger;a=u[p+0],n=u[p+1],o=u[p+2],l=1/(r[3]*a+r[7]*n+r[11]*o+r[15]),u[p+0]=(r[0]*a+r[4]*n+r[8]*o+r[12])*l,u[p+1]=(r[1]*a+r[5]*n+r[9]*o+r[13])*l,u[p+2]=(r[2]*a+r[6]*n+r[10]*o+r[14])*l,a=d[p+0],n=d[p+1],o=d[p+2],d[p+0]=s[0]*a+s[3]*n+s[6]*o,d[p+1]=s[1]*a+s[4]*n+s[7]*o,d[p+2]=s[2]*a+s[5]*n+s[8]*o}h.needsUpdate=!0,c.needsUpdate=!0}reverseIndicesOnRange(e,t){let i=this.index;if(i){for(let r=e;r<t;r+=3){let s=i.getX(r),a=i.getX(r+1),n=i.getX(r+2);i.setXYZ(r,n,a,s)}i.needsUpdate=!0}}};function EF(){let e=new rt;return e.setAttribute("position",new mt(new Float32Array([]),3)),e.setIndex(new mt(new Uint16Array([]),1)),e}var fge=EF().attributes,pge=12,mge=1,Dx=class extends rt{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,fge),this.userData={parameters:e,type:"TextGeometry"};let i=t.getFont(e.font);i?.isLoaded?(this.font=i,this.update(e,t)):this.updateFont(e.font,t).then(()=>{this.update(e,t),t?.requestRender()})}async updateFont(e,t){let i=t.getFont(e);i&&(this.font=i,await i.loadingPromise)}update(e,t){let i=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!i?.isLoaded){console.warn("Cannot update text because its font is not loaded");return}let{width:r,height:s,depth:a,extrudeBevelSize:n,extrudeBevelSegments:o,text:l,textTransform:h}=e,c=w1.getDisplayedValue(l),u=h===2?c.toUpperCase():h===3?c.toLowerCase():c,d=gge(e,i,u,t),{shapes:f,charWidths:p,charCoords:m}=i.generateShapes(d,e,t),g=(typeof r=="number"?r:Number(t.getVariable(r)))*.5,v=(typeof s=="number"?s:Number(t.getVariable(s)))*.5,y=f.map(_=>new nr().fromShape(_,!0));this.vectorShapes=y;let x=y.map(_=>Yc.create({shape:_,parameters:{depth:a,extrudeBevelSegments:o,extrudeBevelSize:n,windingRule:a<=0?wi.NONZERO:wi.ODD,subdivisions:this.isLowResolution&&a>0?mge:pge}})),w=x.length?pc(x):EF();w.translate(-g,v,0),this.dispose(),this.wrappedText=d,this.charCoords=m,this.charWidths=p,this.deleteAttribute("extrudeNormal"),Object.entries(w.attributes).forEach(([_,b])=>{this.setAttribute(_,b)}),this.setIndex(w.index),this.computeBoundingSphere()}clone(){let e=Ea(new rt,Dx.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,i])=>{this.setAttribute(t,i)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e,t){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:{textValue:e}},t)}get text(){return this.userData.parameters.text??""}};function gge(e,t,i,r){let s=typeof e.width=="string"?Number(r.getVariable(e.width)):e.width,a=[""],n="";for(let o of i)n+=o,o===" "||o===`
`?(a[a.length-1]+=n,n="",o===`
`&&a.push("")):t.getTextWidth(a[a.length-1]+n,e)>s&&(a[a.length-1].length&&a.push(""),t.getTextWidth(a[a.length-1]+n,e)>s&&(n.length===1?(a[a.length-1]+=n,n=""):(a[a.length-1]+=n.slice(0,-1),n=n[n.length-1],a.push(""))));return a[a.length-1]+=n,a}var TF,PF=new Promise(e=>{TF=e}),gT=!1,Up;function vge(e){if(gT)return;if(Up)return Up;async function t(){let i=e??"https://unpkg.com/@splinetool/modelling-wasm@1.10.37/build",r=Ah(()=>import("./process-BndNkLcD.js"),[]),[s,a]=await Promise.all([r,fetch(`${i}/process.wasm`).then(l=>l.arrayBuffer())]),n=s.default,o=await n({wasmBinary:a});TF(o),gT=!0}return Up=t(),Up}var yge=["font"];function Qd(e,t,i,r){let s,a,n;e.type==="PathGeometry"?(a=JSON.parse(JSON.stringify(e)),n=[[],["extrusion"]]):(a={...e},n=[[]]);for(let h of n){let c=a;for(let u of h)c=c[u];for(s in c){let u=c[s];x8(u)&&!yge.includes(s)&&(c[s]=t.getVariable(u,[r.uuid,"geometry",...h,s]),x8(c[s])&&(c[s]=1))}}let o={parameters:a,type:a.type};if(a.type==="PathGeometry")o.path=a.path;else if(a.type==="VectorGeometry"){let h=nr.createFromState(a.shape,a.width,a.height);o.shape=h}else if(a.type==="NonParametricGeometry"){if(a.data.groups&&a.data.groups?.forEach(h=>h.materialIndex=Math.max(h.materialIndex??0,0)),o.geometry=new vB().parse(a),o.geometry.groups.length===0){let h=o.geometry;h.addGroup(0,Math.max(h.getIndex()?.count??0,h.getAttribute("position").count),0)}}else if(a.type==="SubdivGeometry"){let h=new Q1(a,i);return h.data=e,h}else{if(a.type==="TextGeometry")return new Dx(a,t);if(a.type==="InputGeometry")return new Dx(a,t);if(a.type==="UIGeometry")return T_.create({parameters:{width:a.width,height:a.height,cornerRadius:a.cornerRadius,cornerType:a.cornerType}})}let l;try{l=wT(o)}catch(h){console.error(h)}if(!l){let h=nr.createFromState(Hg.defaultData(),100,100);o.shape=h,l=wT(o)}return l}var xge=new Fe;function Ix(e,t,i,r){let s=e.position.array,a=e.normal.array,n=xge.makeScale(t,i,r).invert().elements,o,l,h;for(var c=0,u=s.length;c<u;c+=3)s[c]*=t,s[c+1]*=i,s[c+2]*=r,o=a[c],l=a[c+1],h=a[c+2],a[c]=n[0]*o+n[4]*l+n[8]*h,a[c+1]=n[1]*o+n[5]*l+n[9]*h,a[c+2]=n[2]*o+n[6]*l+n[10]*h;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var Vp=new yr,A2=new E,vt;PF.then(e=>{vt=e});var vT=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),yT=new Uint32Array([0,1,2,3]),xT=new Uint8Array([4]),Q1=class extends rt{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let i=this.data.scaleBaked,r=Tc.div(t,i);this.subdividedGeometry&&Ix(this.subdividedGeometry.attributes,...r),this.originalGeometry&&Ix(this.originalGeometry.attributes,...r),this.data=e;let s=this.userData.parameters;this.userData.parameters={width:s.width*r[0],height:s.height*r[1],depth:s.depth*r[2]},this.originalGeometry.boundingSphere.center.multiply(A2.fromArray(r));let a=A2.set(s.width,s.height,s.depth).length();this.originalGeometry.boundingSphere.radius=a/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,i;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:i}=Q1.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new sn(100,100,100),i=0}this.subdivPointer=i,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let r=this.subdividedGeometry??this.originalGeometry;Object.assign(this,r),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Q1.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Cs,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;Vp.setFromBufferAttribute(t),Vp.getCenter(i),e.boundingSphere.radius=i.distanceTo(Vp.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Vp.getSize(A2);let r={width:A2.x,height:A2.y,depth:A2.z};return this.userData.parameters=r,r}static build(e,t,i,r){let s,a,n,o=e?.phongAngle??35;i===!1&&(o=-1),t&&(vt.free_bvh(t),vt.free_subdivision_surface(t));try{s=Q1.allocate(e,r)}catch(l){console.error(l,e),s=Q1.allocate({positionWASM:vT,indexWASM:yT,verticesPerFaceWASM:xT},r)}if(vt.set_destination_refinement_level(s,0),a=Q1.buildLevel(s,!0,o),e.subdivisions>0)try{vt.set_destination_refinement_level(s,e.subdivisions),n=Q1.buildLevel(s,!1,o)}catch{try{vt.set_destination_refinement_level(s,e.subdivisions-1),n=Q1.buildLevel(s,!1,o)}catch{n=null}}else n=null;return{subdivPointer:s,originalGeometry:a,subdividedGeometry:n}}static primitiveToQuads(e,t,i){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let r=e.shape!==void 0||e.path!==void 0?t.geometry:Qd(e,i,!1),s;e.type==="TorusGeometry"&&e.arc===Math.PI*2?s=r.getClosedTorusIndicesForBooleanOrSubdiv():s=r.getIndex();let a,n,o,l;({positions:a,triIndices:l}=s4(r.getAttribute("position"),s));let h;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let c=e.radialSegments*e.heightSegments*3*2,u=c+e.radialSegments*3;h=[c,u]}return{indices:n,verticesPerFace:o}=DF(a,l,r,h),{positions:a,indices:n,verticesPerFace:o}}static allocate(e,t){let i,r,s,a=[],n=[];e.positionWASM&&e.positionWASM.length>0?(i=e.positionWASM,r=e.indexWASM,s=e.verticesPerFaceWASM):(i=vT,r=yT,s=xT);let o=i.length,l=r.length,h=s.length,c=i.length+a.length+n.length,u=r.length+s.length,d=c*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,f=c*Float32Array.BYTES_PER_ELEMENT,p=vt._malloc(d),m=new Float32Array(vt.HEAPF32.buffer,p,c),g=new Uint32Array(vt.HEAPU32.buffer,p+f,u);m.set(i,0),m.set(a,i.length),m.set(n,i.length+a.length),g.set(r,0),g.set(s,r.length);let v;e?.scaleBaked?.some(x=>x!==1)&&(v=new Fe().makeScale(...e.scaleBaked)),t&&(v?v.premultiply(t):v=t);let y=v?vt.alloc_subdivision_surface2(p,o,p+f,l,p+f+r.length*Uint32Array.BYTES_PER_ELEMENT,h,v.elements):vt.alloc_subdivision_surface(p,o,p+f,l,p+f+r.length*Uint32Array.BYTES_PER_ELEMENT,h);return vt._free(p),y}static buildLevel(e,t,i,r,s){let a=s?vt.get_mesh_data2(e,t?vt.Level.CONTROL:vt.Level.REFINED,i,s.elements):vt.get_mesh_data(e,t?vt.Level.CONTROL:vt.Level.REFINED,i),n=8,o=vt.HEAPU32.subarray(a>>2,(a>>2)+n),l=o.subarray(4,8),h=0,c=vt.HEAPU32[o[h]>>2],u=vt.HEAPF32.subarray(c>>2,(c>>2)+l[h]);h++;let d=vt.HEAPU32[o[h]>>2],f=vt.HEAPF32.subarray(d>>2,(d>>2)+l[h]);h++;let p=vt.HEAPU32[o[h]>>2],m=vt.HEAPU32.subarray(p>>2,(p>>2)+l[h]);h++;let g=vt.HEAPU32[o[h]>>2],v=vt.HEAPU32.subarray(g>>2,(g>>2)+l[h]);if(h++,r===void 0){let y=new rt;if(y.setIndex(new fu(v,1)),y.setAttribute("position",new Xe(u,3)),y.setAttribute("normal",new Xe(f,3)),t){y.setAttribute("faceMap",new fu(m,1));let x=new Float32Array(f.length/3*4).fill(0);y.setAttribute("color",new mt(x,4))}return vt.free_mesh_data(a),y.userData.type="SubdivGeometry",y}r.getAttribute("position").copyArray(u),r.getAttribute("normal").copyArray(f),r.attributes.position.needsUpdate=!0,r.attributes.normal.needsUpdate=!0,vt.free_mesh_data(a)}static freeSubdivPointer(e){vt.free_bvh(e),vt.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,i){let r=vt.get_wireframe_data_for_base_level(e),s=4,a=vt.HEAPU32.subarray(r>>2,(r>>2)+s),n=a.subarray(2,4),o=0,l=vt.HEAPU32[a[o]>>2],h=vt.HEAPF32.subarray(l>>2,(l>>2)+n[o]);o++;let c=vt.HEAPU32[a[o]>>2],u=vt.HEAPU32.subarray(c>>2,(c>>2)+n[o]);if(t===void 0){let d=new rt;d.setAttribute("position",new Xe(h,3));let f=new Float32Array(h.length);for(let p=0,m=h.length;p<m;)f[p++]=i.r,f[p++]=i.g,f[p++]=i.b;return d.setAttribute("color",new mt(f,3)),d.setIndex(new fu(u,1)),vt.free_wireframe_data_for_base_level(r),d}t.getAttribute("position").copyArray(h),t.attributes.position.needsUpdate=!0,vt.free_wireframe_data_for_base_level(r)}static updateCollabMesh(e,t,i){let r=t===0;r||vt.set_destination_refinement_level(e,t);let s=i?vt.get_topological_data2(e,r?vt.Level.CONTROL:vt.Level.REFINED,i.elements):vt.get_topological_data(e,r?vt.Level.CONTROL:vt.Level.REFINED),a=6,n=vt.HEAPU32.subarray(s>>2,(s>>2)+a),o=n.subarray(3,6),l=0,h=vt.HEAPU32[n[l]>>2],c=new Float32Array(vt.HEAPF32.subarray(h>>2,(h>>2)+o[l]));l++;let u=vt.HEAPU32[n[l]>>2],d=new Uint32Array(vt.HEAPU32.subarray(u>>2,(u>>2)+o[l]));l++;let f=vt.HEAPU32[n[l]>>2],p=new Uint8Array(vt.HEAPU32.subarray(f>>2,(f>>2)+o[l]));return vt.free_topological_data(s),{positions:c,indices:d,verticesPerFace:p}}},bT=["getX","getY","getZ"];function s4(e,t){let i={},r=t?t.count:e.count,s=0,a=[],n=[],o=1e4;for(let h=0;h<r;h++){let c=t?t.getX(h):h,u="";for(let d=0;d<3;d++)u+=`${~~(e[bT[d]](c)*o)},`;if(u in i)a.push(i[u]);else{for(let d=0;d<3;d++)n.push(e[bT[d]](c));i[u]=s,a.push(s),s++}}let l=[];for(let h=0;h<a.length;h+=3)a[h]===a[h+1]||a[h]===a[h+2]||a[h+1]===a[h+2]||l.push(a[h],a[h+1],a[h+2]);return{positions:n,triIndices:l}}var jp=new E,p9=new E,m9=new E,g9=new E;function DF(e,t,i,r){let s=[],a=[];if(i.userData.shape!==void 0&&i.userData.parameters.depth===0&&i.userData.shape.shapeHoles.length===0){let l=i.userData.shape.extractShapePointsToFlatArray([]),h=i.userData.parameters.spikes;if(i.userData.type==="EllipseGeometry"&&h<=24&&h%4===0&&i.userData.parameters.angle>=360){let d=l.length/2/h;l=l.filter((f,p)=>Math.floor(p/2)%d===0)}let c=0;for(let d=0;d<l.length;d+=2)c+=(l[d]-l[(d===0?l.length:d)-2])*(l[d+1]+l[(d===0?l.length:d)-1]);e.length=0;let u=0;if(c<0)for(let d=0;d<l.length;d+=2)e.push(l[d],l[d+1],0),s.push(u++);else for(let d=l.length-2;d>=0;d-=2)e.push(l[d],l[d+1],0),s.push(u++);return a.push(u),{indices:s,verticesPerFace:a}}let n=new Float32Array([i.userData.parameters.depth])[0],o=0;for(;o<t.length;){if(i.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[o]*3+2]===n||e[t[o]*3+2]===0)&&l++,(e[t[o+1]*3+2]===n||e[t[o+1]*3+2]===0)&&l++,(e[t[o+2]*3+2]===n||e[t[o+2]*3+2]===0)&&l++,l===3)break}if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){jp.set(e[t[o]*3],e[t[o]*3+1],e[t[o]*3+2]),p9.set(e[t[o+1]*3],e[t[o+1]*3+1],e[t[o+1]*3+2]),m9.set(e[t[o+4]*3],e[t[o+4]*3+1],e[t[o+4]*3+2]),g9.set(e[t[o+5]*3],e[t[o+5]*3+1],e[t[o+5]*3+2]),p9.sub(jp).normalize(),m9.sub(jp).normalize(),g9.sub(jp).normalize();let l=p9.cross(m9).dot(g9);Math.abs(l)>.005||r&&r.some((h,c)=>c%2===1?!1:o>=r[c]&&o<r[c+1])?(s.push(t[o],t[o+1],t[o+2]),a.push(3),o+=3):(s.push(t[o],t[o+1],t[o+4],t[o+5]),a.push(4),o+=6)}else s.push(t[o],t[o+1],t[o+2]),a.push(3),o+=3}if(i.useNgonForTopBottomFaceDuringBake){let l=[],h=[],c=0;for(let u=0,d=0;u<e.length;u+=3,d++)e[u+2]===0&&(l.push(d),c++),e[u+2]===n&&h.push(d);if(i.userData.parameters.extrudeBevelSize===0){let u=h[0];h[0]=h[1],h[1]=u}l.reverse(),s.push(...l,...h),a.push(c,c)}return{indices:s,verticesPerFace:a}}var Ao={};E$(Ao,{calcBoolean:()=>Age,calcBooleanTopological:()=>Sge,freeMeshSet:()=>Tge,getMeshSet:()=>Mge,hasOpenEdges:()=>Cge,transformMeshSet:()=>Ege});var IF,bge=new Promise(e=>{IF=e}),Gp;function wge(e){if(Gp)return Gp;async function t(){let i=e??"https://unpkg.com/@splinetool/boolean-wasm@1.10.37/build",r=Ah(()=>import("./boolean-B0Yz-YaS.js"),[]),[s,a]=await Promise.all([r,fetch(`${i}/boolean.wasm`).then(l=>l.arrayBuffer())]),n=s.default,o=await n({wasmBinary:a});IF(o)}return Gp=t(),Gp}var Qt,bu;bge.then(e=>Qt=e);function _ge(e,t,i){let r,s;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?s=e.getClosedTorusIndicesForBooleanOrSubdiv():s=e.getIndex();let{positions:a,triIndices:n}=s4(e.getAttribute("position"),s),o;if(t&&i){let{indices:l,verticesPerFace:h}=DF(a,n,e);o=h.length,r=[];for(let c=0,u=0;c<o;c++){r.push(h[c]);for(let d=0;d<h[c];d++)r.push(l[u++])}}else{let l=n.length;r=Array(l+l/3),o=0;for(let h=0,c=0;c<r.length;)r[c++]=3,o++,r[c++]=n[h++],r[c++]=n[h++],r[c++]=n[h++]}return{positions:a,faceIndices:r,nFaces:o}}function OF(e){let t=e.length,i=t*Uint32Array.BYTES_PER_ELEMENT,r=t*Float32Array.BYTES_PER_ELEMENT,s=Number.isInteger(e[0])?i:r,a=Qt._malloc(s);return(Number.isInteger(e[0])?new Uint32Array(Qt.HEAPU32.buffer,a,t):new Float32Array(Qt.HEAPF32.buffer,a,t)).set(e,0),a}function RF(e){switch(e){case 0:return Qt.OP.UNION;case 1:return Qt.OP.INTERSECTION;case 2:return Qt.OP.A_MINUS_B;default:throw new Error("Unknown boolean operation "+e)}}function Sge(e,t){bu===void 0&&(bu=Qt.init_csg());let i=OF(e),r=Qt.csg_calc_topological(bu,i,e.length,RF(t));Qt._free(i);let s=6,a=Qt.HEAPU32.subarray(r>>2,(r>>2)+s),n=a.subarray(3,6),o=0,l=Qt.HEAPU32[a[o]>>2],h=new Float32Array(Qt.HEAPF32.subarray(l>>2,(l>>2)+n[o]));o++;let c=Qt.HEAPU32[a[o]>>2],u=new Uint32Array(Qt.HEAPU32.subarray(c>>2,(c>>2)+n[o]));o++;let d=Qt.HEAPU32[a[o]>>2],f=new Uint8Array(Qt.HEAPU32.subarray(d>>2,(d>>2)+n[o]));return Qt.free_mesh_data(r),{positions:h,indices:u,verticesPerFace:f}}function Age(e,t,i,r){bu===void 0&&(bu=Qt.init_csg());let s=OF(e),a=Qt.csg_calc(bu,s,e.length,r,RF(t));Qt._free(s);let n=5,o=Qt.HEAPU32.subarray(a>>2,(a>>2)+n),l=o.subarray(2,5),h=0,c=Qt.HEAPU32[o[h]>>2],u=Qt.HEAPF32.subarray(c>>2,(c>>2)+l[h]);h++;let d=Qt.HEAPU32[o[h]>>2],f=Qt.HEAPF32.subarray(d>>2,(d>>2)+l[h]);h++;let p=l[h];i.setAttribute("position",new Xe(u,3)),i.setAttribute("normal",new Xe(f,3));let m=Qt.HEAPF32.subarray((a>>2)+5,(a>>2)+5+6);return i.boundingSphere===null&&(i.boundingSphere=new Cs),i.boundingSphere.center.set(m[0],m[1],m[2]),i.boundingSphere.radius=(m[3]**2+m[4]**2+m[5]**2)**.5,i.userData.parameters={width:m[3]*2,height:m[4]*2,depth:m[5]*2},Qt.free_mesh_data(a),p}function Mge(e,t,i){if(Qt===void 0)return-1;let r,s,a;if(t&&e.userData.positions!==void 0){let g=e.userData;a=g.verticesPerFace.length,r=g.positions,s=Array(g.verticesPerFace.reduce((v,y)=>v+y,0)+a);for(let v=0,y=0,x=0;v<g.verticesPerFace.length;v++){s[x++]=g.verticesPerFace[v];for(let w=0;w<g.verticesPerFace[v];w++)s[x++]=g.indices[y++]}}else({positions:r,faceIndices:s,nFaces:a}=_ge(e,t,i));let n=r.length,o=s.length,l=r.length,h=s.length,c=l*Float32Array.BYTES_PER_ELEMENT+h*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,d=Qt._malloc(c),f=new Float32Array(Qt.HEAPF32.buffer,d,l),p=new Uint32Array(Qt.HEAPU32.buffer,d+u,h);f.set(r,0),p.set(s,0);let m=Qt.get_csg_mesh(d,n,d+u,o,a);return Qt._free(d),m}function Cge(e){return Qt.has_open_edges(e)}function Ege(e,t){Qt.transform_csg_mesh(e,t.elements)}function Tge(e){Qt.free_csg_mesh(e)}var Pge={ConeGeometry:Ipe,CubeGeometry:Ope,CylinderGeometry:sF,DodecahedronGeometry:Lpe,EllipseGeometry:E_,HelixGeometry:gme,IcosahedronGeometry:vme,LatheGeometry:yme,NonParametricGeometry:Mme,PolygonGeometry:_F,PyramidGeometry:Cme,RectangleGeometry:T_,SphereGeometry:Pme,PlaneGeometry:Dme,BackdropGeometry:Ime,StarGeometry:SF,TextFrameGeometry:Rme,TorusGeometry:Lme,TorusKnotGeometry:Bme,TriangleGeometry:kme,PathGeometry:uge,VectorGeometry:Yc},wT=e=>Pge[e.type].create(e);function M2(e){return e!==null&&"booleanOp"in e}var LF=class extends w_(zi){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new Fe}updateVisible(e){super.updateVisible(e),this.visible=!M2(this.parent)&&this.visible,M2(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Ao.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),M2(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof LF&&(e.freeBooleanPointer(),M2(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let i=super.updateTransformState(e,t);return i&&M2(this.parent)&&this.invalidateDownstreamBooleanData(!0),i}onVariableUpdate(e=!1){super.onVariableUpdate(e),M2(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},Hp=new yr;function P_(e,t=0,i=e.count,r,s){let a=1/0,n=1/0,o=1/0,l=-1/0,h=-1/0,c=-1/0;for(let u=t;u<i;u++){let d=e.getX(u),f=e.getY(u),p=e.getZ(u);d<a&&(a=d),f<n&&(n=f),p<o&&(o=p),d>l&&(l=d),f>h&&(h=f),p>c&&(c=p)}Hp.min.set(a,n,o),Hp.max.set(l,h,c),Hp.getCenter(r),Hp.getSize(s).multiplyScalar(.5)}var Dge=new rt,Ige=new $o,ns=class extends LF{constructor(e,t){super(Dge,Ige),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?P_(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},Ll=class{constructor(e){if(this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},Ll.uuidContext===null)throw new Error("plz startContext");Ll.uuidContext===Ll.globalContext?this.uuid="_gid"+Ll.uuidContext.nodeContextUuid++:this.uuid="_uid"+Ll.uuidContext.nodeContextUuid++,this.type=e,this.name=""}static startContext(e){this.uuidContext===null||this.uuidContext===Ll.globalContext?this.uuidContext=e:console.error("Can't start context twice")}static endContext(e){this.uuidContext!==e&&console.error("Can't end context twice"),this.uuidContext=null}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,i){return i=i??{},this.analyze(e,i),this.flow(e,t,i)}flow(e,t,i){i=i??{},e.addFlow(i.slot,i.cache,i.context);let r={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),r}build(e,t,i){t=t??this.getType(e,t);let r=e.getNodeData(i??this);return e.analyzing&&this.appendDepsNode(e,r,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,i)}updateFrame(e){}generateReadonly(e,t,i,r,s,a){return""}generate(e,t,i,r,s){return""}parse(e,t,i,r){}appendDepsNode(e,t,i){t.deps=(t.deps||0)+1;let r=e.getTypeLength(i);(r>(t.outputMax||0)||this.getType(e,i))&&(t.outputMax=r,t.output=i)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}},Ur=Ll;Ur.globalContext={nodeContextUuid:0},Ur.uuidContext=Ll.globalContext;var _T=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Oge=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,i){i=i!==void 0?i:!0,this.keywords[e]={callback:t,cache:i}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},ms=new Oge,Ai=class extends Ur{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,i,r){if(t=t??this.getType(e),this.getShared(e,t)){let s=this.getUnique(e,t);s&&this.uuid===void 0&&(this.uuid=Ke.generateUUID()),i=e.getUUID(i??this.getUUID(),!s);let a=e.getNodeData(i),n=a.output||this.getType(e);if(e.analyzing)return(a.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,a,t),this.generate(e,t,i)):super.build(e,t,i);if(s)return a.name=a.name||super.build(e,t,i),a.name;if(!this.getLabel()&&(!this.getShared(e,n)||e.context.ignoreCache||a.deps===1))return super.build(e,t,i);i=this.getUUID(!1);let o=this.getTemp(e,i);if(o)return e.format(o,n,t);{o=super.generate(e,t,i,a.output,r);let l=this.generate(e,n,i);return e.addNodeCode(o+" = "+l+";"),e.format(o,n,t)}}return super.build(e,t,i)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let i=e.getVars()[t];return i?i.name:void 0}generate(e,t,i,r,s){return this.getShared(e,t)||console.error("TempNode is not shared"),i=i??this.uuid,e.getTempVar(i,r??this.getType(e),s,this.getLabel()).name}},Es=class extends Ai{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,i,r,s,a){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let n=e.getNodeData(i);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,i,r,s,a):e.isShader("vertex")?(n.vertex||(n.vertex=e.createVertexUniform(r,this,s,a,this.getLabel())),e.format(n.vertex.name,r,t)):(n.fragment||(n.fragment=e.createFragmentUniform(r,this,s,a,this.getLabel())),e.format(n.fragment.name,r,t))}},p1=class extends Es{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof re?e:new re(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,i,r,s,a){return e.format("vec2("+this.value.x+", "+this.value.y+")",r,t)}},na=class extends Es{constructor(e=0,t,i){super("v3"),this.nodeType="Vector3",this.value=e instanceof E?e:new E(e,t,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,i,r,s,a){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,t)}},A1=class extends pt{constructor(e,t,i,r){super(e,t,i),this.isColorA=!0,this.a=r}setRGBA(e,t,i,r){super.setRGB(e,t,i),this.a=r}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(e){return super.equals(e)&&this.a===e.a}setStyle(e,t="srgb"){let i;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(i=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let r,s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=s==="rgba"?parseFloat(r[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=s==="hsla"?parseFloat(r[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Mo=class extends Es{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof A1?e:new A1(e.r,e.g,e.b,e.a)}generateReadonly(e,t,i,r,s,a){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,t)}},Rge=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,ST=/[a-z_0-9]+/gi,We=class extends Ai{constructor(e,t,i,r,s){super(s),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=s===void 0,this.isInterface=!1,this.parse(e,t,i,r)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,i,r,s){let a,n=0,o=this.src;if(this.includes)for(let h=0;h<this.includes.length;h++)e.include(this.includes[h],this);for(let h in this.extensions)e.extensions[h]=!0;let l=[];for(;a=ST.exec(this.src);)l.push(a);for(let h=0;h<l.length;h++){let c=l[h],u=c[0],d=this.isMethod?!this.getInputByName(u):!0,f=u;if(this.keywords[u]||this.useKeywords&&d&&ms.containsKeyword(u)){let p=this.keywords[u];if(!p){let m=ms.getKeywordData(u);m.cache&&(p=e.keywords[u]),p=p||ms.getKeyword(u,e),m.cache&&(e.keywords[u]=p)}f=p.build(e)}u!==f&&o[c.index+n-1]!=="."&&(o=o.substring(0,c.index+n)+f+o.substring(c.index+u.length+n),n+=f.length-u.length),this.getIncludeByName(f)===void 0&&ms.contains(f)&&e.include(ms.get(f))}return t==="source"?o:this.isMethod?(this.isInterface||e.include(this,void 0,o),this.name):e.format("( "+o+" )",this.getType(e),t)}parse(e,t,i,r){if(this.src=e||"",this.includes=t??[],this.extensions=i??{},this.keywords=r??{},this.isMethod){let s=Rge.exec(this.src);if(this.inputs=[],s&&s.length==4){this.type=s[1],this.name=s[2];let a=s[3].match(ST);if(a){let n=0;for(;n<a.length;){let o=a[n++],l;o==="in"||o==="out"||o==="inout"?l=a[n++]:(l=o,o="");let h=a[n++];this.inputs.push({name:h,type:l,qualifier:o})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},Lge=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,zF=class extends Ai{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||zF.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,i,r,s){this.src=e||"";let a,n,o="",l=Lge.exec(e);this.useDefine=s??this.src.charAt(0)==="#",l&&l.length>1?(n=l[1],a=l[2],o=l[3]):(a=this.src,n="f"),this.name=a,this.type=n,this.value=o}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,i,r,s){return e.format(this.name,this.getType(e),t)}},di=zF;di.PI="PI",di.PI2="PI2",di.RECIPROCAL_PI="RECIPROCAL_PI",di.RECIPROCAL_PI2="RECIPROCAL_PI2",di.LOG2="LOG2",di.EPSILON="EPSILON";var zge=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),Bge=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),BF=class extends Ai{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,i,r,s){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=zge.exec(e);if(t){let i=t[2],r;for(;r=Bge.exec(i);)this.inputs.push({type:r[1],name:r[2]});this.name=t[1]}else this.name="";this.type=this.name}},D_=class extends Ai{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let i=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+i:"vUv"+i;return e.format(r,this.getType(e),t)}};ms.addKeyword("uv",function(){return new D_});ms.addKeyword("uv2",function(){return new D_(1)});var j2=class extends Ai{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??j2.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case rn:return["Linear"];case Rt:return["sRGB"];default:return[]}}generate(e,t){let i=this.input.build(e,"v4"),r=this.getType(e),s=j2.Nodes[this.method],a=e.include(s);if(a===j2.LINEAR_TO_LINEAR)return e.format(i,r,t);if(s.inputs?.length===2){let n=this.factor.build(e,"f");return e.format(a+"( "+i+", "+n+" )",r,t)}else return e.format(a+"( "+i+" )",r,t)}fromEncoding(e){let t=j2.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=j2.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},Nn=j2;Nn.Nodes={LinearToLinear:new We(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new We(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new We(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Nn.LINEAR_TO_LINEAR="LinearToLinear",Nn.SRGB_TO_LINEAR="sRGBToLinear",Nn.LINEAR_TO_SRGB="LinearTosRGB";var Ui=class extends We{constructor(e="",t,i,r,s){super(e,s,r,i,t),this.nodeType="Expression"}},zo=class extends Es{constructor(e=new $i,t,i,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new D_,this.bias=i,this.project=r!==void 0?r:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let i=this.getTexture(e,t),r=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;s===void 0&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f"));let a,n;this.project?a="texture2DProj":a=s?"tex2DBias":"tex2D",s?n=a+"( "+i+", "+r+", "+s+" )":n=a+"( "+i+", "+r+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new Nn(new Ui("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(n),n=this.colorSpace.build(e,l),e.removeContext(),e.format(n,l,t)}},Ze=class extends Es{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,i,r,s,a){return e.format(this.value+(this.value%1?"":".0"),r,t)}},AT=class extends Ai{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,i,r,s){r=this.getType(e);let a=this.value,n=a.build(e,t)+"( ",o=[];if(a.inputs){for(let l=0;l<a.inputs.length;l++){let h=a.inputs[l],c=this.inputs[l]||this.inputs[h.name];o.push(c.build(e,e.getTypeByFormat(h.type)))}n+=o.join(", ")+" )"}return e.format(n,r,t)}},kF=class extends Ai{constructor(e,t,i=kF.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=i}getType(e){let t=this.a.getType(e),i=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(i)>e.getTypeLength(t)?i:t}generate(e,t){let i=this.getType(e);this.type=i;let r=this.a.build(e,i),s=this.b.build(e,i);return e.format("( "+r+" "+this.op+" "+s+" )",i,t)}},us=kF;us.ADD="+",us.SUB="-",us.MUL="*",us.DIV="/";var xi=class extends Ai{constructor(e,t=xi.ABS,i,r){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:r=t,typeof i!="string"?this.c=i:r=i,this.method=r,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case xi.MIX:case xi.CLAMP:case xi.REFRACT:case xi.SMOOTHSTEP:case xi.FACEFORWARD:return 3;case xi.MIN:case xi.MAX:case xi.MOD:case xi.STEP:case xi.REFLECT:case xi.DISTANCE:case xi.DOT:case xi.CROSS:case xi.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),i=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return t>i&&t>r?this.a.getType(e):i>r?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case xi.LENGTH:case xi.DISTANCE:case xi.DOT:return"f";case xi.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let i,r,s,a=this.a?e.getTypeLength(this.a.getType(e)):0,n=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),h=this.getType(e);switch(this.type=h,this.method){case xi.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case xi.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case xi.CROSS:i=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case xi.STEP:i=this.a.build(e,a===1?"f":l),r=this.b.build(e,l);break;case xi.MIN:case xi.MAX:case xi.MOD:i=this.a.build(e,l),r=this.b.build(e,n===1?"f":l);break;case xi.REFRACT:i=this.a.build(e,l),r=this.b.build(e,l),s=this.c.build(e,"f");break;case xi.MIX:i=this.a.build(e,l),r=this.b.build(e,l),s=this.c.build(e,o===1?"f":l);break;default:i=this.a.build(e,l),this.b&&(r=this.b.build(e,l)),this.c&&(s=this.c.build(e,l));break}let c=[];c.push(i),r&&c.push(r),s&&c.push(s);let u=this.getNumInputs(e);if(c.length!==u)throw Error(`Arguments not match used in "${this.method}". Require ${u}, currently ${c.length}.`);return e.format(this.method+"( "+c.join(", ")+" )",h,t)}},Dt=xi;Dt.RAD="radians",Dt.DEG="degrees",Dt.EXP="exp",Dt.EXP2="exp2",Dt.LOG="log",Dt.LOG2="log2",Dt.SQRT="sqrt",Dt.INV_SQRT="inversesqrt",Dt.FLOOR="floor",Dt.CEIL="ceil",Dt.NORMALIZE="normalize",Dt.FRACT="fract",Dt.SATURATE="saturate",Dt.SIN="sin",Dt.COS="cos",Dt.TAN="tan",Dt.ASIN="asin",Dt.ACOS="acos",Dt.ARCTAN="atan",Dt.ABS="abs",Dt.SIGN="sign",Dt.LENGTH="length",Dt.NEGATE="negate",Dt.INVERT="invert",Dt.MIN="min",Dt.MAX="max",Dt.MOD="mod",Dt.STEP="step",Dt.REFLECT="reflect",Dt.DISTANCE="distance",Dt.DOT="dot",Dt.CROSS="cross",Dt.POW="pow",Dt.MIX="mix",Dt.CLAMP="clamp",Dt.REFRACT="refract",Dt.SMOOTHSTEP="smoothstep",Dt.FACEFORWARD="faceforward";var w3=class extends Ai{constructor(e,t,i){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=i}bilinearCubeUV(e,t,i,r){let s=new AT(w3.Nodes.bilinearCubeUV,[t,i,r]);this.colorSpaceTL=this.colorSpaceTL??new Nn(new Ui("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(s.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Nn(new Ui("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(s.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Nn(new Ui("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(s.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Nn(new Ui("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(s.build(e)+".br");let a={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(a),this.colorSpaceTLExp=new Ui(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Ui(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Ui(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Ui(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let n=new Ui("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return n.keywords.cubeUV_TL=this.colorSpaceTLExp,n.keywords.cubeUV_TR=this.colorSpaceTRExp,n.keywords.cubeUV_BL=this.colorSpaceBLExp,n.keywords.cubeUV_BR=this.colorSpaceBRExp,n.keywords.cubeUV=s,n}generate(e,t){if(e.isShader("fragment")){let i=this.uv,r=this.bias||e.context.roughness,s=new AT(w3.Nodes.roughnessToMip,[r]),a=new Dt(s,w3.Nodes.m0,w3.Nodes.cubeUV_maxMipLevel,Dt.CLAMP),n=new Dt(a,Dt.FLOOR),o=new Dt(a,Dt.FRACT),l=this.bilinearCubeUV(e,this.value,i,n),h=this.bilinearCubeUV(e,this.value,i,new us(n,new Ze(1).setReadonly(!0),us.ADD)),c=new Dt(l,h,o,Dt.MIX);return e.format(c.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},Ox=w3;Ox.Nodes=function(){let e=new BF(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new di("float cubeUV_maxMipLevel 8.0",!0),i=new di("float cubeUV_minMipLevel 4.0",!0),r=new di("float cubeUV_maxTileSize 256.0",!0),s=new di("float cubeUV_minTileSize 16.0",!0),a=new We(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);a.useKeywords=!1;let n=new We(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);n.useKeywords=!1;let o=new We(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,a,n,t,i,r,s]);o.useKeywords=!1;let l=new di("float r0 1.0",!0),h=new di("float v0 0.339",!0),c=new di("float m0 -2.0",!0),u=new di("float r1 0.8",!0),d=new di("float v1 0.276",!0),f=new di("float m1 -1.0",!0),p=new di("float r4 0.4",!0),m=new di("float v4 0.046",!0),g=new di("float m4 2.0",!0),v=new di("float r5 0.305",!0),y=new di("float v5 0.016",!0),x=new di("float m5 3.0",!0),w=new di("float r6 0.21",!0),_=new di("float v6 0.0038",!0),b=new di("float m6 4.0",!0),M=[l,h,c,u,d,f,p,m,g,v,y,x,w,_,b],S=new We(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,M);return{bilinearCubeUV:o,roughnessToMip:S,m0:c,cubeUV_maxMipLevel:t}}();var G2=class extends Ai{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??G2.VIEW}getShared(){return this.scope===G2.WORLD}build(e,t,i,r){let s=e.context[this.scope+"Normal"];return s?s.build(e,t,i,r):super.build(e,t,i)}generate(e,t,i,r,s){let a;switch(this.scope){case G2.VIEW:e.isShader("vertex")?a="transformedNormal":a="geometryNormal";break;case G2.LOCAL:e.isShader("vertex")?a="objectNormal":(e.requires.normal=!0,a="vObjectNormal");break;case G2.WORLD:e.isShader("vertex")?a="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,a="vWNormal");break}return e.format(a,this.getType(e),t)}},vs=G2;vs.LOCAL="local",vs.WORLD="world",vs.VIEW="view",vs.NORMAL="normal";ms.addKeyword("viewNormal",function(){return new vs(vs.VIEW)});ms.addKeyword("localNormal",function(){return new vs(vs.NORMAL)});ms.addKeyword("worldNormal",function(){return new vs(vs.WORLD)});var bo=class extends Ai{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??bo.LOCAL}getType(){switch(this.scope){case bo.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case bo.LOCAL:case bo.WORLD:return!1}return!0}generate(e,t,i,r,s){let a;switch(this.scope){case bo.LOCAL:e.isShader("vertex")?a="transformed":(e.requires.position=!0,a="vPosition");break;case bo.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,a="vWPosition";break;case bo.VIEW:a=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case bo.PROJECTION:a=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(a,this.getType(),t)}},Wa=bo;Wa.LOCAL="local",Wa.WORLD="world",Wa.VIEW="view",Wa.PROJECTION="projection";ms.addKeyword("position",function(){return new Wa});ms.addKeyword("worldPosition",function(){return new Wa(Wa.WORLD)});ms.addKeyword("viewPosition",function(){return new Wa(Wa.VIEW)});var An=class extends Ai{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??An.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case An.SPHERE:return"v2"}return this.type}generate(e,t){let i=this.getUnique(e);if(e.isShader("fragment")){let r;switch(this.scope){case An.VECTOR:{let s=new vs(vs.VIEW),a=e.context.roughness,n=s.build(e,"v3"),o=new Wa(Wa.VIEW).build(e,"v3"),l=a?a.build(e,"f"):void 0,h=`reflect( -normalize( ${o} ), ${n} )`;l&&(h=`normalize( mix( ${h}, ${n}, ${l} * ${l} ) )`);let c=`inverseTransformDirection( ${h}, viewMatrix )`;i?(e.addNodeCode(`vec3 reflectVec = ${c};`),r="reflectVec"):r=c;break}case An.CUBE:{let s=new An(An.VECTOR).build(e,"v3"),a="vec3( -"+s+".x, "+s+".yz )";i?(e.addNodeCode(`vec3 reflectCubeVec = ${a};`),r="reflectCubeVec"):r=a;break}case An.SPHERE:{let s="normalize( ( viewMatrix * vec4( "+new An(An.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";i?(e.addNodeCode(`vec2 reflectSphereVec = ${s};`),r="reflectSphereVec"):r=s;break}}return e.format(r,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},wu=An;wu.CUBE="cube",wu.SPHERE="sphere",wu.VECTOR="vector";var kge=class extends Ai{constructor(e=new zo,t,i){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new Ox(this.value,t??new wu(wu.VECTOR),i),this.irradianceNode=new Ox(this.value,new vs(vs.WORLD),new Ze(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},Fge=class extends Es{constructor(e=new Rw,t,i){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new wu,this.bias=i}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){if(t==="samplerCube")return this.getTexture(e,t);let i=this.getTexture(e,t),r=this.uv?.build(e,"v3"),s=this.bias?this.bias.build(e,"f"):void 0;s===void 0&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f"));let a;s?a="texCubeBias( "+i+", "+r+", "+s+" )":a="texCube( "+i+", "+r+" )";let n={include:e.isShader("vertex"),ignoreCache:!0},o=this.getType(e);return e.addContext(n),this.colorSpace=this.colorSpace??new Nn(new Ui("",o)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,o),e.removeContext(),e.format(a,o,t)}},Nge=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,Uge=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,Vge=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,jge=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,Gge=`
layout(location = 1) out vec4 gVelocity;
`,Hge=`
    // Discard fully transparent pixels 
    if (gl_FragColor.a <= 0.0) discard;

    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);
`,MT=["x","y","z","w"],Wge=["float","vec2","vec3","vec4"],qge={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},Xge={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},FF=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,i){return t.deps.length-i.deps.length}return function(t,i){let r=this.getIncludes(t,i);if(!r)return"";let s="";r=r.sort(e);for(let a=0;a<r.length;a++)r[a].src&&(s+=r[a].src+`
`);return s}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(Nge),this.addFragmentParsCode(Uge),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let i=0;i<this.requires.uv.length;i++)if(this.requires.uv[i]){let r=i>0?i+1:"";this.addVaryCode("varying vec2 vUv"+r+";"),i>0&&this.addVertexParsCode("attribute vec2 uv"+r+";"),this.addVertexFinalCode("vUv"+r+" = uv"+r+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode(`
				#ifndef SHAPEBLEND 
					vObjectNormal = normal;
				#else
					vObjectNormal = objectNormal;
				#endif
			`)),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(Vge),this.addFragmentFinalCode(jge)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,i){return this.addSlot(e).addCache(t).addContext(i)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,i,r="varying",s="V",a=""){let n=this.getVars(r),o=n[e];if(!o){let l=n.length;o={name:i||"node"+s+l+(a?"_"+a:""),type:t},n.push(o),n[e]=o}return o}getTempVar(e,t,i,r){return this.getVar(e,t,i,this.shader,"T",r)}getAttribute(e,t){if(!this.attributes[e]){let i=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(i.name+" = "+e+";"),this.attributes[e]={varying:i,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let i="";for(let r=0,s=e.length;r<s;++r){let a=e[r],n=a.type,o=a.name,l=a.size,h=this.getFormatByType(n);if(h===void 0)throw new Error("Node pars "+h+" not found.");h.includes("[]")?i+=t+" "+h.substring(0,h.length-2)+" "+o+`[${l}];
`:i+=t+" "+h+" "+o+`;
`}return i}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof Ur?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,i,r,s,a){if(t.includes("[]")){let n=this.inputs.arrayUniforms,o=n.list.length,l=new _T({type:t,size:i.size,name:r||"nodeUA"+o+(a?"_"+a:""),node:i,needsUpdate:s});return n.list.push(l),n[e].push(l),n[e][l.name]=l,this.uniforms[l.name]=l,l}else{let n=this.inputs.uniforms,o=n.list.length,l=new _T({type:t,name:r||"nodeU"+o+(a?"_"+a:""),node:i,needsUpdate:s});return n.list.push(l),n[e].push(l),n[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,i,r,s){return this.createUniform("vertex",e,t,i,r,s)}createFragmentUniform(e,t,i,r,s){return this.createUniform("fragment",e,t,i,r,s)}include(e,t,i){let r;if(e=typeof e=="string"?ms.get(e):e,this.context.include===!1)return e.name;e instanceof We?r=this.includes.functions:e instanceof di?r=this.includes.consts:e instanceof BF&&(r=this.includes.structs);let s=r[this.shader]=r[this.shader]||[];if(e){let a=s[e.name];if(a||(a=s[e.name]={node:e,deps:[]},s.push(a),a.src=e.build(this,"source")),e instanceof We&&t&&s[t.name]&&s[t.name].deps.indexOf(e)===-1&&(s[t.name].deps.push(e),e.includes?.length)){let n=0;do this.include(e.includes[n++],t);while(n<e.includes.length)}return i&&(a.src=i),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return Wge[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i?.isNode)return i}}resolve(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i!==void 0){if(i.isNode)return i;if(i.isTexture)switch(i.mapping){case Lc:case zc:return new Fge(i);case df:return new kge(new zo(i));default:return new zo(i)}else{if(i.isVector2)return new p1(i);if(i.isVector3)return new na(i);if(i.isVector4)return new Mo(i)}}}}format(e,t,i){switch(this.colorToVector(i+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return qge[e]||e}getFormatByType(e){return Xge[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return MT[e]}getIndexByElement(e){return MT.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=rn,t===rn&&this.context.gamma&&(t=Rt),t}},or=class extends Es{constructor(e=0,t,i,r){super("c"),this.nodeType="Color",this.value=e instanceof A1?e:new A1(e||0,t,i,r)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,i,r,s,a){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let n=e.getNodeData(i),o=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return o?this.generateReadonly(e,t,i,r,s,a):e.isShader("vertex")?(n.vertex||(n.vertex=e.createVertexUniform(r,this,s,a,this.getLabel())),e.format(n.vertex.name,r,t)):(n.fragment||(n.fragment=e.createFragmentUniform(r,this,s,a,this.getLabel())),e.format(n.fragment.name,r,t))}generateReadonly(e,t,i,r,s,a){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,t)}},Ti=class extends Es{constructor(t){super("i"),this.nodeType="Int",this.value=Math.floor(t??0)}generateReadonly(t,i,r,s,a,n){return t.format(this.value.toString(),s,i)}},$1=class extends Es{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,i,r){return e.format(this.value?"true":"false",r,t)}},Zh=class extends Es{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},I_=class extends Es{},Yge=class extends I_{constructor(e){super("v3"),this.image=e,this._value=new E}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},Rx=class extends I_{constructor(e,t,i=1008,r=1006){super("t"),this.image=e,this.wrap=t,this.minFilter=i,this.magFilter=r}get value(){return this.image.getTexture(this.wrap,this.minFilter,this.magFilter)}},NF=class extends Es{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new Dr}generateReadonly(e,t,i,r,s,a){return e.format("mat3("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},Jn=class extends Es{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new Fe}generateReadonly(e,t,i,r,s,a){return e.format("mat4("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function CT(e,t,i,r=0){e.setUvTransform(i[0],i[1],t[0],t[1],0,0,0).premultiply(new Dr().makeRotation(r*Ke.DEG2RAD))}var Kge=class extends NF{constructor(e,t,i=0){super(new Dr),this.repeat=e,this.offset=t,this.rotation=i,CT(this.value,e,t,i)}updateMatrix(){CT(this.value,this.repeat,this.offset,this.rotation)}},Jh=class extends Es{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof Mt?new Array(e).fill(t):new Array(e).fill(new Mt(0))}},ET=class extends Ai{constructor(e,t,i,r){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=i,this.mode=r}generate(e,t){if(e.isShader("fragment")){let i=[];return i.push(this.a.build(e,"c")),i.push(this.b.build(e,"c")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),e.format("spe_blend("+i.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},UF=class extends Ai{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let i=e.include(UF.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.color.build(e,"v3")),r.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Lx=UF;Lx.Nodes=function(){return{customColor:new We(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var VF=class extends Ai{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let i=e.include(VF.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},jF=VF;jF.Nodes=function(){return{customNormal:new We(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var _3=class extends Ai{constructor(e,t,i,r,s,a,n,o,l,h,c,u){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=i,this.projection=r,this.axis=s,this.side=a,this.size=n,this.blending=o,this.mat=l,this.isMask=u,this.alpha=h,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i=`g${this.uuid.toString().replace(/-/g,"")}`,r;switch(this.projection.value){case 3:r=e.include(_3.Nodes.cylindrical);break;case 2:r=e.include(_3.Nodes.spherical);break;case 1:let a=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],n=["zy","xz","xy"][this.axis.value],o=new We(`
		vec3 ${i}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${n})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${a}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);r=e.include(o);break;case 4:r=e.include(_3.Nodes.triplanar);break;default:r=e.include(_3.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let s=[];if(s.push("normal"),s.push(this.texture.generate(e,"t")),s.push(this.textureSize.build(e,"v2")),s.push(this.crop.build(e,"f")),s.push(this.mat.build(e,"mat3")),s.push(this.size.build(e,"v2")),s.push(this.blending.build(e,"f")),s.push(this.isMask.build(e,"b")),s.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),s.push(this.alpha.build(e,"f")),s.push(this.mode.build(e,"i")),s.push(this.calpha),this.projection.value===4){let a=`${i}_writeUvs`,n=a+"0",o=a+"1",l=a+"2",h=`${i}_triplanarWeights`;e.addFragmentVariable(n,"vec2"),e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(h,"vec3"),s.push(n),s.push(o),s.push(l),s.push(h)}else{let a=`${i}_writeUvs`;e.addFragmentVariable(a,"vec2"),s.push(a)}return e.format(r+"("+s.join(",")+")",this.getType(e),t)}},O_=_3;O_.Nodes=function(){let e=new We(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new We(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),i=new We(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),r=new We(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:i,triplanar:r}}();var S3=class extends Ai{constructor(e,t,i,r,s,a,n,o,l,h,c,u){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=i,this.far=r,this.isVector=s,this.isWorldSpace=a,this.origin=n,this.direction=o,this.colors=l,this.steps=h,this.isMask=u,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let i=`g${this.uuid.toString().replace(/-/g,"")}`,r=new We(`vec3 ${i}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${i}_MAX_COLORS], float steps[${i}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${i}_IS_VECTOR
                   #ifdef ${i}_LINEAR
                       #ifdef ${i}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${i}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${i}_SMOOTH
				for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[S3.Nodes.vectorLinearWorldSpaceDepth,S3.Nodes.vectorLinearObjectSpaceDepth,S3.Nodes.vectorSphericalObjectSpaceDepth,S3.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${i}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${i}_SMOOTH`),this.isVector.value>.5&&e.define(`${i}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${i}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${i}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let s=e.include(r),a=[];return a.push(this.near.build(e,"f")),a.push(this.far.build(e,"f")),a.push(this.origin.build(e,"v3")),a.push(this.direction.build(e,"v3")),a.push(this.colors.build(e,"v4[]")),a.push(this.steps.build(e,"f[]")),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(s+"("+a.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},GF=S3;GF.Nodes=function(){let e=new We(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new We(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),i=new We(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),r=new We(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:i,vectorSphericalObjectSpaceDepth:r}}();var Qge=class extends Ai{constructor(e,t,i,r,s,a,n,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=i,this.intensity=r,this.factor=s,this.isMask=o,this.alpha=a,this.mode=n,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=new We(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),r=e.include(i),s=[];return s.push(this.color.build(e,"c")),s.push(this.bias.build(e,"f")),s.push(this.scale.build(e,"f")),s.push(this.intensity.build(e,"f")),s.push(this.factor.build(e,"f")),s.push(this.isMask.build(e,"b")),s.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),s.push(this.alpha.build(e,"f")),s.push(this.mode.build(e,"i")),s.push(this.calpha),e.format(r+"("+s.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},HF=class extends Ai{constructor(e,t,i,r,s,a,n,o,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=i,this.steps=r,this.offset=s,this.morph=a,this.angle=n,this.isMask=l,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(HF.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},WF=HF;WF.Nodes=function(){return{gradient:new We(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var qF=class extends Ai{constructor(e,t,i,r,s){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=r,this.alpha=t,this.mode=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`,this.rotation=s}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(qF.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),r.push(this.rotation.build(e,"f")),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},XF=qF;XF.Nodes=function(){return{matcap:new We(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha, float rotation) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) );
					uv = mat2( cos(rotation), sin(rotation), -sin(rotation), cos(rotation) ) * uv;
					uv = uv * 0.495 + 0.5;
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var fs=function(){let e=new We(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new We(`float simplexFast(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 mediump vec3 x = p - s + dot(s, vec3(G3));
			 mediump vec3 hs = s;
			 
			 mediump vec3 e = step(vec3(0.0), x - x.yzx);
			 mediump vec3 i1 = e*(1.0 - e.zxy);
			 mediump vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 mediump vec3 x1 = x - i1 + G3;
			 mediump vec3 x2 = x - i2 + 2.0*G3;
			 mediump vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 mediump vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(hs), x);
			 d.y = dot(random3(hs + i1), x1);
			 d.z = dot(random3(hs + i2), x2);
			 d.w = dot(random3(hs + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new di("float F3 0.3333333"),t.keywords.G3=new di("float G3 0.1666667");let i=new We(`float simplexPrecise(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);i.keywords.F3=new di("float F3 0.3333333"),i.keywords.G3=new di("float G3 0.1666667");let r=new We(`float simplexFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplexFast(m * rot1)
				 + 0.2666667 * simplexFast(2.0 * m * rot2)
				 + 0.1333333 * simplexFast(4.0 * m * rot3)
				 + 0.0666667 * simplexFast(8.0 * m);
		}`,[t]),s=new We("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),a=new We("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),n=new We(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[s,a]),o=new We("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),l=new We("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),h=new We(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[l]),c=new We(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[h]);c.keywords.NUM_OCTAVES=new di("int NUM_OCTAVES 5");let u=new We("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),d=new We(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[s,a,u]),f=new We(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),p=new We(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),m=new We(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),g=new We(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),v=new We(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),y=new We(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),x=new We(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			// Second pass for edge distance  
			// skip for styles don't need
			if (style != 0 &&  style != 5 && style != 7)
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[f,p,m,g,v,y]);return{simplexFast:t,simplexPrecise:i,simplexFractal:r,simplexAshima:n,fbm:c,perlin:d,voronoi:x}}(),YF=class extends Ai{constructor(e,t,i,r,s,a,n,o,l,h,c,u,d,f,p,m,g,v,y){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=i,this.fA=r,this.fB=s,this.distortion=a,this.colorA=n,this.colorB=o,this.colorC=l,this.colorD=h,this.noiseType=u,this.voronoiStyle=f,this.highCut=p,this.lowCut=m,this.smoothness=g,this.seed=v,this.quality=y,this.isMask=d,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,i,r,s){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=["simplexFast","simplexFractal","simplexAshima","fbm","perlin","voronoi"][this.noiseType.value],n=a=="voronoi"?`
		float v = ${a}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${a}(st),
					   ${a}(st + vec3(1.0)),
					   ${a}(st + vec3(1.0)));
		vec3 r = vec3(${a}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${a}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${a}(st * q));
		float f = ${a}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,o=new We(`vec3 ${a}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${n}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[fs.simplexFast,fs.simplexFractal,fs.simplexAshima,fs.fbm,fs.perlin,fs.voronoi]),l=e.include(o),h=[];return h.push(this.scale.build(e,"f")),h.push(this.size.build(e,"v3")),h.push(this.move.build(e,"f")),h.push(this.fA.build(e,"v2")),h.push(this.fB.build(e,"v2")),h.push(this.distortion.build(e,"v2")),h.push(this.colorA.build(e,"v4")),h.push(this.colorB.build(e,"v4")),h.push(this.colorC.build(e,"v4")),h.push(this.colorD.build(e,"v4")),h.push(this.voronoiStyle.build(e,"i")),h.push(this.highCut.build(e,"f")),h.push(this.lowCut.build(e,"f")),h.push(this.smoothness.build(e,"f")),h.push(this.seed.build(e,"f")),h.push(this.quality.build(e,"i")),h.push(this.isMask.build(e,"b")),h.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),h.push(this.alpha.build(e,"f")),h.push(this.calpha),e.format(l+"("+h.join(",")+")",this.getType(e),t)}};YF.numOctaves=5;var KF=class extends Ai{constructor(e,t,i,r,s,a,n,o,l,h,c,u,d,f,p,m){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=i,this.contourWidth=r,this.contourThreshold=s,this.outlineThreshold=a,this.contourFrequency=n,this.outlineSmoothing=o,this.contourDirection=l,this.positionalLines=h,this.compensation=c,this.resolution=u,this.normalMap=d,this.depthMap=f,this.pixelRatio=p,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let i=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${i}_offset`),this.firstTime){let r=this.outlineWidth.build(e,"f"),s=this.resolution.build(e,"v2"),a=this.compensation.build(e,"b"),n=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(r,"uniform float"),e.addVertexParsVariable(s,"uniform vec2"),e.addVertexParsVariable(a,"uniform bool"),e.addVertexParsVariable(n,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${i}_offset = vec2(0.0);
                if (${a}) {
                    vec4 ${i}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${i}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${i}_offset = normalize(${i}_clipNormal.xy) / ${s} * (${r} / 2.0) * ${i}_clipPosition.w * 2.0 * ${n};
                    ${i}_clipPosition.xy += ${i}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${i}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(KF.Nodes.outline),s=[];return s.push(this.outlineColor.build(e,"c")),s.push(this.contourColor.build(e,"c")),s.push(this.outlineWidth.build(e,"f")),s.push(this.contourWidth.build(e,"f")),s.push(this.contourThreshold.build(e,"f")),s.push(this.outlineThreshold.build(e,"f")),s.push(this.contourFrequency.build(e,"f")),s.push(this.outlineSmoothing.build(e,"f")),s.push(this.contourDirection.build(e,"v3")),s.push(this.positionalLines.build(e,"b")),s.push(this.resolution.build(e,"v2")),s.push(this.normalMap.getTexture(e,"t")),s.push(this.depthMap.getTexture(e,"t")),s.push(this.pixelRatio.build(e,"f")),s.push(this.compensation.build(e,"b")),s.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),s.push(this.alpha.build(e,"f")),s.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+s.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},QF=KF;QF.Nodes=function(){let e=new We(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new We(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var wo=class extends Ai{constructor(e,t,i,r,s,a,n,o,l,h,c,u,d,f,p,m,g,v){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=i,this.blending=r,this.offset=s,this.colorA=a,this.colorB=n,this.frequency=o,this.size=l,this.variation=h,this.smoothness=c,this.zigzag=u,this.rotation=d,this.vertical=f,this.horizontal=p,this.sides=m,this.isMask=v,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let i;switch(this.style.value){case 0:i="circle";break;case 1:i="ring";break;case 2:i="polygon";break;case 3:i="xcross";break;case 4:i="diamond";break;case 5:i="checkerboard";break;case 6:i="line";break;case 7:i="wave";break;default:i="circle";break}let r=`g${this.uuid.toString().replace(/-/g,"")}`,s=new We(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),a=new We(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),n="";if(this.projection.value===4){let c=this.style.value===2?`${i}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,u=this.style.value===2?`${i}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d=this.style.value===2?`${i}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;n=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${c};
				float d1 = ${u};
				float d2 = ${d};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let c=this.style.value===2?`${i}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,u="";this.axis.value===0?u=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?u=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,u=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let d="";switch(this.projection.value){case 0:d="custom_uv = vUv.st;";break;case 1:break;case 2:d=`
							vec3 p = position;
							${u}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}n=`
				vec2 custom_uv;
				${d}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${c};
				`}let o=new We(`vec3 ${r}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${n}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[a,s,wo.DrawFunctions.circle,wo.DrawFunctions.ring,wo.DrawFunctions.polygon,wo.DrawFunctions.cross,wo.DrawFunctions.diamond,wo.DrawFunctions.checkerboard,wo.DrawFunctions.line,wo.DrawFunctions.wave]),l=e.include(o),h=[];return h.push("normal"),h.push(this.blending.build(e,"f")),h.push(this.style.build(e,"i")),h.push(this.offset.build(e,"v2")),h.push(this.colorA.build(e,"v4")),h.push(this.colorB.build(e,"v4")),h.push(this.frequency.build(e,"v2")),h.push(this.size.build(e,"f")),h.push(this.variation.build(e,"f")),h.push(this.smoothness.build(e,"f")),h.push(this.zigzag.build(e,"f")),h.push(this.rotation.build(e,"f")),h.push(this.vertical.build(e,"v2")),h.push(this.horizontal.build(e,"v2")),h.push(this.sides.build(e,"i")),h.push(this.isMask.build(e,"b")),h.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),h.push(this.alpha.build(e,"f")),h.push(this.calpha),e.format(l+"("+h.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},ZF=wo;ZF.DrawFunctions=function(){let e=new We(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new We(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),i=new We(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),r=new We(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),s=new We(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),a=new We(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),n=new We(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),o=new We(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new We(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),h=new We(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:i,ring:r,polygon:s,cross:a,diamond:n,checkerboard:o,line:l,wave:h}}();var JF=class extends Ai{constructor(e,t,i,r,s,a,n,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=i,this.noiseStrength=r,this.noiseScale=s,this.offset=a,this.isMask=o,this.alpha=n,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(JF.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},$F=JF;$F.Nodes=function(){let e=new We(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
				float f = 0.0;
				
				if (noiseStrength != 0.0) {
					vec3 st = position / noiseScale;
					float noise = simplexFast(1.6 * st + vec3(1.8, 1.5, 1.9) * simplexFast(st) + vec3(1.7, 9.2, 1.0));
					f = noise * noiseStrength;
				}

				vec3 waves = wavelengths * vec3(1.0, 0.8, 0.6) + 1.0;
				float angle = dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal));

				mediump vec3 color = cos((((filmThickness + f) / waves) * angle) + movement);
				return .5 + .5 * color;
			 }`,[fs.simplexFast]);return{rainbow:new We(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				mediump vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
			 }`,[e])}}();var eN=class extends Ai{constructor(e,t,i,r,s,a,n,o,l,h){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=i,this.source=r,this.isWorldSpace=s,this.noiseStrength=a,this.noiseScale=n,this.shadowColor=o,this.offset=l,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let i=e.include(eN.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},tN=eN;tN.Nodes=function(){let e=new We(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new We(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),i=new We(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),r=new We(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),s=new We(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[r]);return{toon:new We(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplexFast(st),
					// 	simplexFast(st + vec3(111.1, 143.89, 217.19)),
					// 	simplexFast(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[fs.simplexFast,e,i,s])}}();var Zge=function(){return{textureBicubic:new We(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function Jge(e,t){return e>=t?new re(t/e,1):new re(1,e/t)}var iN=class extends Ai{constructor(e,t,i,r,s,a,n,o){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=i,this.transmissionSamplerSize=r,this.transmissionSamplerMap=s,this.transmissionDepthMap=a,this.aspectRatio=n,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,yt.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let i=e.include(iN.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},rN=iN;rN.Nodes=function(){let e=new We(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new We(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new We(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),r=new We(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[Zge.textureBicubic,i,e]),s=new We(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[r,t]);return{transmission:new We(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[s])}}();var zx=(e=>(e.NOISE="noise",e.MAP="map",e))(zx||{}),sN=class extends Ai{constructor(e,t,i,r,s,a,n,o,l,h,c){super("v3"),this.displacementTypeIndex=new Ti(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(zx)[this.displacementTypeIndex.value]==="map"&&(this.mat=new NF(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=h,this.noiseFunctionIndex=c,this.voronoiStyle=r,this.smoothness=s,this.seed=a,this.highCut=n,this.lowCut=o,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let i,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(zx)[this.displacementTypeIndex.value]){case"map":{i=e.include(sN.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break}case"noise":{let s=["simplexPrecise","simplexFractal","simplexAshima","fbm","perlin","voronoi"][this.noiseFunctionIndex.value],a=new We(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),n=s=="voronoi"?`
					float v = ${s}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${s}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,o=new We(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${n}
						}`,[fs.simplexPrecise,fs.simplexFractal,fs.simplexAshima,fs.fbm,fs.perlin,fs.voronoi]),l=new We(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,a]);i=e.include(l),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f")),r.push(this.voronoiStyle.build(e,"i")),r.push(this.smoothness.build(e,"f")),r.push(this.seed.build(e,"f")),r.push(this.highCut.build(e,"f")),r.push(this.lowCut.build(e,"f")),r.push(this.quality.build(e,"i"));break}}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},aN=sN;aN.Nodes=function(){let e=new We(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new We(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new We(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var yt={normalRenderTarget:new zo,normalRenderTargetDepth:new zo,transmissionRenderTarget:new zo,aspectRatio:new p1,transmissionSize:new p1(2048,2048),transmissionRenderTargetDepth:new zo,aoRenderTarget:new zo,aoEnabled:new $1,pixelRatioNode:new Ze(1),resolution:new p1,penumbraSize:new Zh(5,.5),frameIndex:new Ti(0),transmissionLod:new Ti(2)};for(let e of Object.values(yt))e.isRenderGlobal=!0;var nN={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.10.37/build/ui.wasm"},R_=class extends Ur{constructor(){super("basic"),this.nodeType="Basic",this.color=new or(Xs),this.shadingAlpha=new Ze(1),this.shadingBlend=new Ti(0),this.previousModelViewMatrix=new Jn,this.previouseProjectionMatrix=new Jn}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:yt.frameIndex}),e.mergeUniform({resolution:yt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(o0.merge([He.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{this.color===void 0&&(this.color=new or(Xs)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let i=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0,s=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=r!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let n=["#include <normal_fragment_begin>",i.code];r&&n.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),a?n.push(a.code,`vec3 outgoingLight = ${i.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`):n.push(`vec3 finalColor = ${i.result};`);let o="1.0";this.mask&&(this.mask.analyze(e),o=`luminance(${this.mask.flow(e,"v3").result})`),r?n.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${r.result} * ${o} );`):n.push("gl_FragColor = vec4("+i.result+", 1.0 );"),s&&n.push(`gl_FragColor.a *= ${s.result};`),n.push("#include <fog_fragment>","#include <dithering_fragment>"),t=n.join(`
`)}return t}},$ge=class extends Ur{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new or(Xs),this.emissive=new or(0),this.emissiveIntensity=new Ze(1),this.previousModelViewMatrix=new Jn,this.previouseProjectionMatrix=new Jn,this.shadingAlpha=new Ze(1),this.shadingBlend=new Ti(0),this.occlusion=new $1(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:yt.frameIndex}),e.mergeUniform({resolution:yt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(o0.merge([He.fog,He.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),r.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:yt.penumbraSize}),e.mergeUniform({frameIndex:yt.frameIndex}),e.mergeUniform({aoMap:yt.aoRenderTarget}),e.mergeUniform({aoEnabled:yt.aoEnabled}),this.color===void 0&&(this.color=new or(Xs)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.emissive.flow(e,"c",{slot:"emissive"}),s=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),a=this.occlusion.flow(e,"b",{slot:"occlusion"}),n=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];u.push(i.code,"vec3 diffuseColor = "+i.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),h&&u.push(h.code,"#ifdef ALPHATEST","if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),u.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&u.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+s.result+";"),u.push("vec3 ao = aoEnabled && "+a.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${n.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${n.result} * ${d}, ${o.result} );

					outgoingLight *= ao;
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),h?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&u.push(`gl_FragColor.a *= ${c.result};`),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},Zu=function(){let e=new We(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new We(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),eve=class extends Ur{constructor(){super("phong"),this.nodeType="Phong",this.color=new or(Xs),this.specular=new or(1118481),this.shininess=new Ze(30),this.previousModelViewMatrix=new Jn,this.previouseProjectionMatrix=new Jn,this.shadingAlpha=new Ze(1),this.shadingBlend=new Ti(0),this.occlusion=new $1(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:yt.frameIndex}),e.mergeUniform({resolution:yt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(o0.merge([He.fog,He.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:yt.penumbraSize}),e.mergeUniform({frameIndex:yt.frameIndex}),e.mergeUniform({aoMap:yt.aoRenderTarget}),e.mergeUniform({aoEnabled:yt.aoEnabled}),this.color===void 0&&(this.color=new or(Xs)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),s=this.specular.flow(e,"c"),a=this.shininess.flow(e,"f"),n=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(Zu.dHdxy),e.include(Zu.perturbNormalArb);let f=this.bumpMap.texture.flow(e,"t"),p=this.bumpMap.flow(e,"v3"),m=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",g="";this.bumpMap.projection.value===4?g=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${f.result}, uv0, ${m});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${f.result}, uv1, ${m});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${f.result}, uv2, ${m});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:g=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${f.result}, bumpMapCachedUv, ${m});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,u.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${p.result};
					${g}
					`)}u.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",s.code,"	vec3 specular = "+s.result+";",a.code,"	float shininess = max( 0.0001, "+a.result+" );","	float specularStrength = 1.0;"),h&&u.push(h.code,"#ifdef ALPHATEST","if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${n.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${n.result} * ${d}, ${o.result} );
					
					outgoingLight *= ao;
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),h?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result});`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&u.push(`gl_FragColor.a *= ${c.result};`),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},tve=class extends Ur{constructor(){super("standard"),this.nodeType="Standard",this.color=new or(Xs),this.roughness=new Ze(.3),this.metalness=new Ze(0),this.reflectivity=new Ze(.5),this.previousModelViewMatrix=new Jn,this.previouseProjectionMatrix=new Jn,this.shadingAlpha=new Ze(1),this.shadingBlend=new Ti(0),this.occlusion=new $1(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:yt.frameIndex}),e.mergeUniform({resolution:yt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(o0.merge([He.fog,He.lights])),He.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:yt.penumbraSize}),e.mergeUniform({frameIndex:yt.frameIndex}),e.mergeUniform({aoMap:yt.aoRenderTarget}),e.mergeUniform({aoEnabled:yt.aoEnabled});let i={gamma:!0};this.color===void 0&&(this.color=new or(Xs)),this.color.analyze(e,{slot:"color",context:i}),this.roughness.analyze(e),this.metalness.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let s=this.color.flow(e,"c",{slot:"color",context:i}),a=this.roughness.flow(e,"f"),n=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),h=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let f=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(Zu.dHdxy),e.include(Zu.perturbNormalArb);let m=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",y="";this.bumpMap.projection.value===4?y=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${m.result}, uv0, ${v});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${m.result}, uv1, ${v});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${m.result}, uv2, ${v});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:y=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${m.result}, bumpMapCachedUv, ${v});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};
					${y}
					`)}if(f.push(s.code,"	vec3 diffuseColor = "+s.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"	float metalnessFactor = "+n.result+";"),this.roughnessMap){let m=this.roughnessMap.texture.flow(e,"t"),g=this.roughnessMap.flow(e,"v3"),v="";this.roughnessMap.projection.value===4?v=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${m.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${m.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${m.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${a.result};
					`:v=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${m.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${a.result};
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};

					const float roughnessScale = 1.0;

					${v}
				`)}else f.push(a.code,"	float roughnessFactor = "+a.result+";");c&&f.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),f.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),f.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?f.push(d.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):f.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),f.push("#include <lights_fragment_begin>"),f.push("#include <lights_fragment_end>"),f.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let p="1.0";this.mask&&(this.mask.analyze(e),p=`luminance(${this.mask.flow(e,"v3").result})`),f.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${p} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${p}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),h&&f.push(h.code,`outgoingLight = spe_blend(outgoingLight, ${h.result}, 1.0, SPE_BLENDING_NORMAL);`),c?f.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):f.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&f.push(`gl_FragColor.a *= ${u.result};`),f.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=f.join(`
`)}return t}},ive=class extends Ur{constructor(){super("toon"),this.nodeType="Toon",this.color=new or(Xs),this.specular=new or(1118481),this.shininess=new Ze(30),this.previousModelViewMatrix=new Jn,this.previouseProjectionMatrix=new Jn,this.shadingAlpha=new Ze(1),this.shadingBlend=new Ti(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:yt.frameIndex}),e.mergeUniform({resolution:yt.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(o0.merge([He.fog,He.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:yt.penumbraSize}),e.mergeUniform({frameIndex:yt.frameIndex}),e.mergeUniform({aoMap:yt.aoRenderTarget}),e.mergeUniform({aoEnabled:yt.aoEnabled}),this.color===void 0&&(this.color=new or(Xs)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),n=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(Zu.dHdxy),e.include(Zu.perturbNormalArb);let d=this.bumpMap.texture.flow(e,"t"),f=this.bumpMap.flow(e,"v3"),p=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",m="";this.bumpMap.projection.value===4?m=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${d.result}, uv0, ${p});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${d.result}, uv1, ${p});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${d.result}, uv2, ${p});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:m=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${d.result}, bumpMapCachedUv, ${p});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,c.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${f.result};
					${m}
					`)}c.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	vec3 specular = "+r.result+";",s.code,"	float shininess = max( 0.0001, "+s.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let u="1.0";this.mask&&(this.mask.analyze(e),u=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${u} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${u}, ${n.result} );
				}
				`),o&&c.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&c.push(`gl_FragColor.a *= ${h.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},rve=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){return this.cache.get(e)?.data}load(e){let t=Date.now(),i=this.cache.get(e);return i===void 0?(i={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,i)):(i.time=t,i.prev.next=i.next,i.next.prev=i.prev),i.prev=this.tail.prev,i.next=this.tail,this.tail.prev.next=i,this.tail.prev=i,this.scheduleCleanup(),i.data}},sve=class extends rve{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},v9;function ave(e){return typeof e=="string"?e:(v9||(v9=new sve),v9.load(e))}var nve=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},ove=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},oN=class extends nve{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isBuffer=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo=e.type==="video",this.isBuffer=e.isWebGLRenderTarget===!0,this.loadPromise=this.updateSrc(this.isBuffer?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;for(let r of Object.values(this._cache))for(let s of Object.values(r))for(let a of Object.values(s))a&&(a.image=this.img,a.needsUpdate=!0);this.shared.requestRender()};if(this.isBuffer)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var i=new FileReader;i.readAsDataURL(new Blob([e],{type:"video/mp4"}));let r;await new Promise(s=>{i.onloadend=a=>{r=a.target?.result,s(null)}}),this.img.src=r}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=ave(e),this.img.onload=t,await new Promise(r=>{this.img.onload=()=>{t(),r(null)}})}getTexture(e,t=1008,i=1006){let r=this._cache[e]?.[t]?.[i];if(r)return r;{let s;return this.isBuffer?s=this.img.texture:this.isVideo?s=new jse(this.img,void 0,e,e):s=new $i(this.img,void 0,e,e,i,t),this.loaded&&(s.needsUpdate=!0),this._cache[e]===void 0&&(this._cache[e]={}),this._cache[e][t]===void 0&&(this._cache[e][t]={}),this._cache[e][t][i]=s,s}}setNeedsUpdate(e){for(let t of Object.values(this._cache))for(let i of Object.values(t))for(let r of Object.values(i))r&&(r.needsUpdate=e)}disposeTextures(){for(let[e,t]of Object.entries(this._cache))for(let[i,r]of Object.entries(t))for(let[s,a]of Object.entries(r))a?.dispose(),this._cache[e]!==void 0&&this._cache[e][i]!==void 0&&(this._cache[e][i][s]=void 0)}dispose(){super.dispose(),this.disposeTextures()}},Vl=class extends oN{};function lve(e,t){var i=dve(t);return i.formatToParts?cve(i,e):uve(i,e)}var hve={year:0,month:1,day:2,hour:3,minute:4,second:5};function cve(e,t){try{for(var i=e.formatToParts(t),r=[],s=0;s<i.length;s++){var a=hve[i[s].type];a>=0&&(r[a]=parseInt(i[s].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function uve(e,t){var i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var y9={};function dve(e){if(!y9[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),i=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";y9[e]=i?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return y9[e]}function lN(e,t,i,r,s,a,n){var o=new Date(0);return o.setUTCFullYear(e,t,i),o.setUTCHours(r,s,a,n),o}var TT=36e5,fve=6e4,x9={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function hN(e,t,i){var r,s;if(!e||(r=x9.timezoneZ.exec(e),r))return 0;var a;if(r=x9.timezoneHH.exec(e),r)return a=parseInt(r[1],10),PT(a)?-(a*TT):NaN;if(r=x9.timezoneHHMM.exec(e),r){a=parseInt(r[1],10);var n=parseInt(r[2],10);return PT(a,n)?(s=Math.abs(a)*TT+n*fve,a>0?-s:s):NaN}if(gve(e)){t=new Date(t||Date.now());var o=i?t:pve(t),l=Bx(o,e),h=i?l:mve(t,l,e);return-h}return NaN}function pve(e){return lN(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Bx(e,t){var i=lve(e,t),r=lN(i[0],i[1]-1,i[2],i[3]%24,i[4],i[5],0).getTime(),s=e.getTime(),a=s%1e3;return s-=a>=0?a:1e3+a,r-s}function mve(e,t,i){var r=e.getTime(),s=r-t,a=Bx(new Date(s),i);if(t===a)return t;s-=a-t;var n=Bx(new Date(s),i);return a===n?a:Math.max(a,n)}function PT(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var DT={};function gve(e){if(DT[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),DT[e]=!0,!0}catch{return!1}}var vve=Mh(D$(),1),IT=Mh(I$(),1),yve=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,xve=yve,b9=36e5,OT=6e4,bve=2,es={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:xve};function wve(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var i={},r=i.additionalDigits==null?bve:(0,vve.default)(i.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=_ve(e),a=Sve(s.date,r),n=a.year,o=a.restDateString,l=Ave(o,n);if(isNaN(l))return new Date(NaN);if(l){var h=l.getTime(),c=0,u;if(s.time&&(c=Mve(s.time),isNaN(c)))return new Date(NaN);if(s.timeZone||i.timeZone){if(u=hN(s.timeZone||i.timeZone,new Date(h+c)),isNaN(u))return new Date(NaN)}else u=(0,IT.default)(new Date(h+c)),u=(0,IT.default)(new Date(h+c+u));return new Date(h+c+u)}else return new Date(NaN)}function _ve(e){var t={},i=es.dateTimePattern.exec(e),r;if(i?(t.date=i[1],r=i[3]):(i=es.datePattern.exec(e),i?(t.date=i[1],r=i[2]):(t.date=null,r=e)),r){var s=es.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function Sve(e,t){var i=es.YYY[t],r=es.YYYYY[t],s;if(s=es.YYYY.exec(e)||r.exec(e),s){var a=s[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(s=es.YY.exec(e)||i.exec(e),s){var n=s[1];return{year:parseInt(n,10)*100,restDateString:e.slice(n.length)}}return{year:null}}function Ave(e,t){if(t===null)return null;var i,r,s,a;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(i=es.MM.exec(e),i)return r=new Date(0),s=parseInt(i[1],10)-1,LT(t,s)?(r.setUTCFullYear(t,s),r):new Date(NaN);if(i=es.DDD.exec(e),i){r=new Date(0);var n=parseInt(i[1],10);return Tve(t,n)?(r.setUTCFullYear(t,0,n),r):new Date(NaN)}if(i=es.MMDD.exec(e),i){r=new Date(0),s=parseInt(i[1],10)-1;var o=parseInt(i[2],10);return LT(t,s,o)?(r.setUTCFullYear(t,s,o),r):new Date(NaN)}if(i=es.Www.exec(e),i)return a=parseInt(i[1],10)-1,zT(t,a)?RT(t,a):new Date(NaN);if(i=es.WwwD.exec(e),i){a=parseInt(i[1],10)-1;var l=parseInt(i[2],10)-1;return zT(t,a,l)?RT(t,a,l):new Date(NaN)}return null}function Mve(e){var t,i,r;if(t=es.HH.exec(e),t)return i=parseFloat(t[1].replace(",",".")),w9(i)?i%24*b9:NaN;if(t=es.HHMM.exec(e),t)return i=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),w9(i,r)?i%24*b9+r*OT:NaN;if(t=es.HHMMSS.exec(e),t){i=parseInt(t[1],10),r=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return w9(i,r,s)?i%24*b9+r*OT+s*1e3:NaN}return null}function RT(e,t,i){t=t||0,i=i||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,a=t*7+i+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var Cve=[31,28,31,30,31,30,31,31,30,31,30,31],Eve=[31,29,31,30,31,30,31,31,30,31,30,31];function cN(e){return e%400===0||e%4===0&&e%100!==0}function LT(e,t,i){if(t<0||t>11)return!1;if(i!=null){if(i<1)return!1;var r=cN(e);if(r&&i>Eve[t]||!r&&i>Cve[t])return!1}return!0}function Tve(e,t){if(t<1)return!1;var i=cN(e);return!(i&&t>366||!i&&t>365)}function zT(e,t,i){return!(t<0||t>52||i!=null&&(i<0||i>6))}function w9(e,t,i){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||i!=null&&(i<0||i>=60))}function Pve(e,t,i){var r=wve(e,i),s=hN(t,r,!0),a=new Date(r.getTime()-s),n=new Date(0);return n.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),n.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),n}function is(e,t){return t.color(e)}function BT(e=new Date,t){let i=t.format,r=e.getSeconds(),s=e;t&&t.timeZone!==null&&(s=Pve(new Date,t.timeZone));let a=s.getHours(),n=s.getMinutes(),o;t.format12h24h==="12ampm"&&(o=a>=12?"PM":"AM");let l=a;t.format12h24h!=="24"&&(l=a%12,l===0&&(l=12));let h,c;switch(i){case"HH:mm:ss":h=[l,n,r];break;case"HH:mm":h=[l,n];break;case"HH":h=[l],o=void 0;break;case"mm":h=[n],o=void 0;break;case"ss":h=[r],o=void 0;break;case"year":c=s.getFullYear();break;case"month":c=s.getMonth()+1;break;case"dayOfYear":c=Math.floor((s.getTime()-new Date(s.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":c=s.getDate();break;case"secondOfDay":c=a*60*60+n*60+r;break;default:console.error("Unknown time format",i),c=0;break}return h!==void 0?{textValue:h,suffix:o}:c}function Dve(e,t){switch(e.type){case"fresnel":return Rve(e,t);case"gradient":return Lve(e,t);case"depth":return zve(e,t);case"normal":return Bve(e,t);case"noise":return kve(e,t);case"rainbow":return Fve(e,t);case"toon":return Nve(e,t);case"outline":return Uve(e,t);case"transmission":return Vve(e,t);case"color":return Ove(e,t);case"pattern":return jve(e,t)}}function Ive(e){return{type:e.type}}function on(e,t){let{alpha:i,mode:r,isMask:s}=e,a=typeof i=="string"?(Number(t.getVariable(i))??100)/100:i;return{...Ive(e),alpha:a,mode:r,isMask:s}}function Ove(e,t){return{...on(e,t),color:is(e.color,t)}}function Rve(e,t){let{bias:i,scale:r,intensity:s,factor:a,color:n}=e;return{...on(e,t),color:is(n,t),bias:i,scale:r,intensity:s,factor:a}}function Lve(e,t){let{gradientType:i,smooth:r,colors:s,steps:a,angle:n,offset:o,morph:l}=e;return{...on(e,t),gradientType:i,smooth:r,colors:s.map(h=>new Mt(h[0],h[1],h[2],h[3])),num:s.length,steps:a,offset:new re(...o),morph:new re(...l),angle:n}}function zve(e,t){let{gradientType:i,near:r,far:s,isVector:a,isWorldSpace:n,origin:o,direction:l,colors:h,steps:c,smooth:u}=e;return{...on(e,t),gradientType:i,near:r,far:s,isVector:a,isWorldSpace:n,origin:new E(...o),direction:l?new E(...l):new E(1,0,0),colors:h.map(d=>d!==void 0?new Mt(d[0],d[1],d[2],d[3]):new Mt(0,0,0,0)),steps:c.slice(0,h.length),smooth:u}}function Bve(e,t){let{cnormal:i}=e;return{...on(e,t),cnormal:new E(i[0],i[1],i[2])}}function kve(e,t){return{...on(e,t),scale:e.scale,move:e.move,fA:new re(...e.fA),fB:new re(...e.fB),size:new E(...e.size),distortion:new re(...e.distortion),colorA:is(e.colorA,t),colorB:is(e.colorB,t),colorC:is(e.colorC,t),colorD:is(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function Fve(e,t){return{...on(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new E(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new E(...e.offset)}}function Nve(e,t){return{...on(e,t),positioning:e.positioning,colors:e.colors.map(i=>new Mt(i[0],i[1],i[2],i[3])),num:e.colors.length,steps:e.steps,source:new E(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:is(e.shadowColor,t),offset:new E(...e.offset)}}function Uve(e,t){return{...on(e,t),outlineColor:is(e.outlineColor,t),contourColor:is(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new E(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function Vve(e,t){return{...on(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function jve(e,t){return{...on(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new re(...e.offset),colorA:is(e.colorA,t),colorB:is(e.colorB,t),frequency:new re(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new re(...e.vertical),horizontal:new re(...e.horizontal),sides:e.sides}}var ov=class extends A1{},Gve={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},Hve={depth:["colors"]};function Wve(e,t,i){if(t==="isMask")return!0;let r=Gve[e.type],s=Hve[e.type];if(s!==void 0){let a=e.color;if(s.includes(t)){let n=a[t]?.value?.length;if(n!==void 0&&n!==i.length)return!0}}return r!==void 0?r.includes(t):!1}function uN(e,t,i){let r=i.uniforms[`f${i.id}_texture`];if(!r)return!1;let s=!1,a=e;if("image"in a){let n=a.image,o=t.image(n),l=r;l.image instanceof Vl||l.image.deref(),l.image=o}if("video"in a){let n=a.video,o=t.video(n),l=r;l.image instanceof Vl||l.image.deref(),l.image=o}if("wrapping"in a){let n=r;n.wrap=a.wrapping}if("minFilter"in a){let n=r;n.minFilter=a.minFilter}if("magFilter"in a){let n=r;n.magFilter=a.magFilter}if("rotation"in a&&i.uniforms[`f${i.id}_rotation`])return i.uniforms[`f${i.id}_rotation`].value=(a.rotation??0)*Ke.DEG2RAD,s;if("repeat"in a||"offset"in a||"rotation"in a){let n="mat",o=i.uniforms[`f${i.id}_${n}`];"repeat"in a&&(o.repeat=a.repeat),"offset"in a&&(o.offset=a.offset),"rotation"in a&&(o.rotation=a.rotation??0),o.updateMatrix()}return s}function qve(e,t,i,r){let s=!1;for(let[a,n]of Object.entries(e)){if(a==="bumpMap"||a==="roughnessMap"){s=!0;continue}if(!a||n===void 0)continue;if(fN(a,i,r,t)){a==="visible"&&i.type==="light"&&(s=!0);continue}i.visible=r.visible;let o=i.uniforms[`f${i.id}_${a}`];if(o&&!(o instanceof I_))switch(s=s||Wve(i,a,n),o.constructor){case or:if(typeof n=="string"){let l=t.getColor(n);l&&(o.value=l);break}else{let l=n;o.value instanceof ov?o.value=new A1(l.r,l.g,l.b,l.a):o.setRGBA(l);break}case Mo:if(typeof n=="string"){let l=t.getColor(n);l&&(o.value=l);break}else{let l=n;o.value instanceof ov?o.value=new A1(l.r,l.g,l.b,l.a):o.value.setRGBA(l.r,l.g,l.b,l.a);break}case p1:{let l=n;o.value.setX(l[0]),o.value.setY(l[1]);break}case na:{let l=n;o.value.setX(l[0]),o.value.setY(l[1]),o.value.setZ(l[2]);break}case zo:{uN(n,t,i);break}case Jh:{o.value=n.map(l=>new Mt(...l));break}default:{o.value=n;break}}}return s}var Uc=(e,t,i)=>Math.max(0,Math.min(1,Number(t.getVariable(typeof e=="number"?e*100:e,i)??100)/100))??1,_f=class{constructor(e,t,i,r,s){this.id=e,this.uuid=t,this.data=i,this.uniforms={};for(let a in r)this.uniforms[`f${this.id}_${a}`]=r[a];for(let a in i)fN(a,this,i,s)}get type(){return this.data.type}static create(e,t,i,r){if(i.type==="light")return Tn.createLightLayer(e,t,i,r);if(i.type==="texture"||i.type==="video"){let s=i.type==="texture"?r.uiBuffer(i.texture.image)??r.image(i.texture.image):r.video(i.texture.video),a=new Rx(s,i.texture.wrapping,i.texture.minFilter??1008,i.texture.magFilter??1006),n=new Yge(s),o=new Kge(i.texture.repeat,i.texture.offset,i.texture.rotation??0),l=new Ze(i.crop?1:0),h=new Ti(i.projection??0),c=new Ti(["x","y","z"].indexOf(i.axis)??0),u=new Ti(i.side??0),d=new p1(i.size?new re(i.size[0],i.size[1]):new re(100,100)),f=new Ze(i.blending??0),p=new Ze(Uc(i.alpha,r)),m=new Ti(i.mode??0),g=new $1(i.isMask??!1),v=new O_(a,n,l,h,c,u,d,f,o,p,m,g),y=new Ui(v.calpha,"f");return new ir(e,t,i,{texture:a,textureSize:n,crop:l,projection:h,axis:c,side:u,size:d,blending:f,mat:o,alpha:p,mode:m,isMask:g},v,m,y,g,r)}else if(i.type==="matcap"){let s=r.image(i.texture.image),a=new Rx(s,i.texture.wrapping,i.texture.minFilter??1008,i.texture.magFilter??1006),n=new Ze(Uc(i.alpha,r)),o=new Ti(i.mode??0),l=new $1(i.isMask??!1),h=new Ze((i.texture.rotation??0)*Ke.DEG2RAD),c=new XF(a,n,o,l,h),u=new Ui(c.calpha,"f");return new ir(e,t,i,{texture:a,alpha:n,mode:o,isMask:l,rotation:h},c,o,u,l,r)}else if(i.type==="displace")if(i.displacementType==="noise"){let s=new na(new E(...i.offset)),a=new Ze(i.scale??10),n=new Ze(i.intensity??8),o=new Ze(i.movement??1),l=new Ti(i.noiseType??0),h=new Ti(i.voronoiStyle??0),c=new Ze(i.smoothness??.5),u=new Ze(i.seed??0),d=new Ze(i.highCut??1),f=new Ze(i.lowCut??0),p=new Ti(i.quality??1),m=new aN(n,o,s,h,c,u,d,f,p,a,l);return new dN(e,t,i,{offset:s,scale:a,intensity:n,movement:o,noiseType:l,voronoiStyle:h,smoothness:c,seed:u,highCut:d,lowCut:f,quality:p},m,r)}else throw new Error;else return Kve(e,t,i,r)}updateByOp(e,t,i){let r=e;if(r.path[0]===void 0){if(r.type===0)return"type"in r.props||"category"in r.props||"visible"in r.props||"noiseType"in r.props?(i.scene.markNeedsUpdateRendererDirty(),!0):qve(r.props,i.shared,this,t)}else if(r.path[0]==="texture")return"texture"in t||"video"in t?uN(r.props,i.shared,this):!0;return!1}dispose(){if(Xve(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof Vl||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let i=`f${this.id}_${e}`;this.hasValueByKey(i)&&t!==void 0&&(this.uniforms[i].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let i=this.getName(t);i&&e.push(i)}return e}},ir=class extends _f{constructor(e,t,i,r,s,a,n,o,l){super(e,t,i,r,l),this.params=r,this.color=s,this.mode=a,this.alpha=n,this.isMask=o}},dN=class extends _f{constructor(e,t,i,r,s,a){super(e,t,i,r,a),this.position=s}},Tn=class extends _f{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.node=r}static createLightLayer(e,t,i,r){let s,a=new Ze(Uc(i.alpha,r)),n=new Ti(i.mode),o=new Ze(i.bumpMapIntensity),l=new Ze(Uc(i.alphaOverride,r)),h;if(!i.visible)s=new R_,h={};else if(i.category==="lambert"){s=new $ge;let c=new or(r.color(i.emissive)??0),u=new $1(i.occlusion??!0);h={emissive:c,occlusion:u},s.emissive=c,s.occlusion=u}else if(i.category==="toon"){s=new ive;let c=new Ze(i.shininess??30),u=new or(r.color(i.specular)??1118481);h={shininess:c,specular:u},s.shininess=c,s.specular=u}else if(i.category==="physical"){s=new tve;let c=new Ze(i.roughness??.3),u=new Ze(i.metalness??0),d=new Ze(i.reflectivity??.5),f=new $1(i.occlusion??!0);h={roughness:c,metalness:u,reflectivity:d,occlusion:f},s.roughness=c,s.metalness=u,s.reflectivity=d,s.occlusion=f}else{s=new eve;let c=new Ze(i.shininess??30),u=new or(i.specular!==void 0?r.color(i.specular)??1118481:1118481),d=new $1(i.occlusion??!0);h={shininess:c,specular:u,occlusion:d},s.shininess=c,s.specular=u,s.occlusion=d}return s.alpha=new Ze(1),s.shadingAlpha=a,s.shadingBlend=n,s.bumpMapIntensity=o,s.alphaOverride=l,h.alpha=s.shadingAlpha,h.mode=s.shadingBlend,h.bumpMapIntensity=s.bumpMapIntensity,h.alphaOverride=s.alphaOverride,new Tn(e,t,i,s,h,r)}get category(){return this.node.category}};function Xve(e){let t=e instanceof _f?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function ta(e){return{alpha:new Ze(e.alpha??1),mode:new Ti(e.mode??0),isMask:new $1(e.isMask??!1)}}function Yve(e,t,i,r,s){switch(e.type){case"color":{let a=new or(r.color??Xs),n=ta(r),o=new Lx(a,n.alpha),l=new Ui(o.calpha,"f");return new ir(t,i,e,{color:a,...n},o,n.mode,l,n.isMask,s)}case"fresnel":{let a=new or(r.color??16777215),n=new Ze(r.bias??.1),o=new Ze(r.scale??1),l=new Ze(r.intensity??2),h=new Ze(r.factor??1),c=ta(r),u=new Qge(a,n,o,l,h,c.alpha,c.mode,c.isMask),d=new Ui(u.calpha,"f");return new ir(t,i,e,{color:a,bias:n,scale:o,intensity:l,factor:h,...c},u,c.mode,d,c.isMask,s)}case"rainbow":{let a=new Ze(r.filmThickness??30),n=new Ze(r.movement??0),o=new na(r.wavelengths??new E(0,0,0)),l=new Ze(r.noiseStrength??0),h=new Ze(r.noiseScale??1),c=new na(r.offset??new E(0,0,0)),u=ta(r),d=new $F(a,n,o,l,h,c,u.alpha,u.isMask),f=new Ui(d.calpha,"f");return new ir(t,i,e,{filmThickness:a,movement:n,wavelengths:o,noiseStrength:l,noiseScale:h,offset:c,...u},d,u.mode,f,u.isMask,s)}case"transmission":{let a=new Ze(r.thickness??10),n=new Ze(r.ior??1.5),o=new Ze(r.roughness??.5),l=yt.transmissionSize,h=yt.transmissionRenderTarget,c=yt.transmissionRenderTargetDepth,u=window.innerWidth,d=window.innerHeight,f=u>=d?new p1(d/u,1):new p1(1,u/d),p=ta(r),m=new rN(a,n,o,l,h,c,f,p.alpha),g=new Ui(m.calpha,"f");return new ir(t,i,e,{thickness:a,ior:n,roughness:o,aspectRatio:f,...p},m,p.mode,g,p.isMask,s)}case"toon":{let a=new Ti(r.positioning??0),n;r.colors?n=new Jh(r.colors.length,r.colors):(n=new Jh(10,new Mt(0,0,0,1)),n.value[1]=new Mt(1,1,1,1));let o;r.steps?o=new Zh(r.steps.length,r.steps):(o=new Zh(10,1),o.value[0]=0);let l=new na(r.source??new E(0,0,0)),h=new $1(r.isWorldSpace??!0),c=new Ze(r.noiseStrength??0),u=new Ze(r.noiseScale??1),d=new Mo(r.shadowColor),f=new na(r.offset??new E(0,0,0)),p=ta(r),m=new tN(a,n,o,l,h,c,u,d,f,p.alpha),g=new Ui(m.calpha,"f");return new ir(t,i,e,{positioning:a,colors:n,steps:o,source:l,isWorldSpace:h,noiseStrength:c,noiseScale:u,shadowColor:d,offset:f,...p},m,p.mode,g,p.isMask,s)}case"outline":{let a=new or(r.outlineColor??16777215),n=new or(r.contourColor??16777215),o=new Ze(r.outlineWidth??.1),l=new Ze(r.contourWidth??.1),h=new Ze(r.outlineThreshold??.1),c=new Ze(r.contourThreshold??.1),u=new Ze(r.outlineSmoothing??.1),d=new Ze(r.contourFrequency??.1),f=new na(r.contourDirection??new E(0,1,0)),p=new $1(r.positionalLines??!1),m=new $1(r.compensation??!0),g=yt.normalRenderTarget,v=yt.normalRenderTargetDepth,y=yt.pixelRatioNode,x=yt.resolution,w=ta(r),_=new QF(a,n,o,l,h,c,u,d,f,p,m,x,g,v,y,w.alpha),b=new Ui(_.calpha,"f");return new ir(t,i,e,{outlineColor:a,contourColor:n,outlineWidth:o,contourWidth:l,outlineThreshold:h,contourThreshold:c,outlineSmoothing:u,contourFrequency:d,contourDirection:f,positionalLines:p,compensation:m,...w},_,w.mode,b,w.isMask,s)}case"depth":{let a=new Ti(r.gradientType??0),n=new $1(r.smooth??!1),o=new Ze(r.near??50),l=new Ze(r.far??200),h=new Ze(r.isVector??1),c=new Ze(r.isWorldSpace??0),u=new na(r.origin??new E),d=new na(r.direction??new E),f;r.colors?f=new Jh(r.colors.length,r.colors):(f=new Jh(2,new Mt(0,0,0,1)),f.value[1]=new Mt(1,1,1,1));let p;r.steps?p=new Zh(r.steps.length,r.steps):(p=new Zh(2,1),p.value[0]=0);let m=ta(r),g=new GF(a,n,o,l,h,c,u,d,f,p,m.alpha,m.isMask),v=new Ui(g.calpha,"f");return new ir(t,i,e,{gradientType:a,smooth:n,near:o,far:l,isVector:h,isWorldSpace:c,origin:u,direction:d,colors:f,steps:p,...m},g,m.mode,v,m.isMask,s)}case"noise":{let a=new Ze(r.scale??1),n=new na(r.size??new E(100,100,100)),o=new Ze(r.move??1),l=new p1(r.fA??new re(1.7,9.2)),h=new p1(r.fB??new re(8.3,2.8)),c=new p1(r.distortion??new re(1,1)),u=new Mo(r.colorA),d=new Mo(r.colorB),f=new Mo(r.colorC),p=new Mo(r.colorD),m=new Ti(r.noiseType??0),g=new Ti(r.voronoiStyle??0),v=new Ze(r.highCut??1),y=new Ze(r.lowCut??0),x=new Ze(r.smoothness??.5),w=new Ze(r.seed??.5),_=new Ti(r.quality??1),b=ta(r),M=new YF(a,n,o,l,h,c,u,d,f,p,b.alpha,m,b.isMask,g,v,y,x,w,_),S=new Ui(M.calpha,"f");return new ir(t,i,e,{scale:a,size:n,move:o,fA:l,fB:h,distortion:c,colorA:u,colorB:d,colorC:f,colorD:p,noiseType:m,...b,voronoiStyle:g,highCut:v,lowCut:y,smoothness:x,seed:w,quality:_},M,b.mode,S,b.isMask,s)}case"normal":{let a=new na(r.cnormal??new E(1,1,1)),n=ta(r),o=new jF(a,n.alpha),l=new Ui(o.calpha,"f");return new ir(t,i,e,{cnormal:a,...n},o,n.mode,l,n.isMask,s)}case"gradient":{let a=new Ti(r.gradientType??0),n=new $1(r.smooth??!1),o;r.colors?o=new Jh(r.colors.length,r.colors):(o=new Jh(10,new Mt(0,0,0,1)),o.value[1]=new Mt(1,1,1,1));let l;r.steps?l=new Zh(r.steps.length,r.steps):(l=new Zh(10,1),l.value[0]=0);let h=new p1(r.offset??new re(0,0)),c=new p1(r.morph??new re(0,0)),u=new Ze(r.angle??0),d=ta(r),f=new WF(a,n,o,l,h,c,u,d.alpha,d.isMask),p=new Ui(f.calpha,"f");return new ir(t,i,e,{gradientType:a,smooth:n,colors:o,steps:l,offset:h,morph:c,angle:u,...d},f,d.mode,p,d.isMask,s)}case"pattern":{let a=new Ti(r.style??0),n=new Ti(r.projection??0),o=new Ti(["x","y","z"].indexOf(r.axis)??0),l=new Ze(r.blending??0),h=new p1(r.offset??new re(0,0)),c=new Mo(r.colorA),u=new Mo(r.colorB),d=new p1(r.frequency??new re(10,10)),f=new Ze(r.size??.5),p=new Ze(r.variation??0),m=new Ze(r.smoothness??.5),g=new Ze(r.zigzag??0),v=new Ze(r.rotation??0),y=new p1(r.vertical??new re(0,1)),x=new p1(r.horizontal??new re(0,1)),w=new Ti(r.sides??6),_=ta(r),b=new ZF(a,n,o,l,h,c,u,d,f,p,m,g,v,y,x,w,_.alpha,_.isMask),M=new Ui(b.calpha,"f");return new ir(t,i,e,{style:a,projection:n,axis:o,blending:l,offset:h,colorA:c,colorB:u,frequency:d,size:f,variation:p,smoothness:m,zigzag:g,rotation:v,vertical:y,horizontal:x,sides:w,..._},b,_.mode,M,_.isMask,s)}default:{let a=new or(1,0,0,1),n=ta(r),o=new Lx(a,n.alpha),l=new Ui(o.calpha,"f");return new ir(t,i,e,{color:a,...n},o,n.mode,l,n.isMask,s)}}}function Kve(e,t,i,r){let s=Dve(i,r);return Yve(i,e,t,s,r)}function fN(e,t,i,r){if(i.type==="displace"&&(e==="intensity"||e==="visible")){let s=t.uniforms[`f${t.id}_intensity`];return s?(s.value=i.intensity*(i.visible?1:0),s):void 0}if(i.type!=="displace"&&(e==="alpha"||e==="visible")){let s=t.uniforms[`f${t.id}_alpha`];if(!s)return;if(s.value=Uc(i.alpha,r)*(i.visible?1:0),i.type==="outline"&&e==="visible"){let a=t.uniforms[`f${t.id}_compensation`];a&&(a.value=i.compensation&&i.visible)}return s}}function iu(e,t){let i=0,r=e.layers.find(s=>s.data.type==="light");if(r){let s=r.data,a=Number(t.getVariable(s.alphaOverride));if((typeof s.alphaOverride=="string"?a/100:s.alphaOverride)<1)return!0}for(let s of e.layers){if(s.data.type!=="displace"&&s.data.isMask)return!0;if(s.data.type!=="displace"&&"alpha"in s.data&&s.data.type!=="light"&&s.data.type!=="fresnel"&&s.data.type!=="texture"&&s.data.type!=="matcap"&&s.data.type!=="rainbow"&&s.data.type!=="outline"&&s.data.type!=="pattern"){let a=s.data.visible?s.data.alpha:0;if(typeof a=="string"&&(a=Math.max(0,Math.min(1,Number(t.getVariable(a)??100)/100))),a===1&&s.data.type==="depth"||s.data.type==="gradient"){for(let n of s.data.colors)if(n[3]<1){a=n[3];break}}else if(a===1&&s.data.type==="noise"){let n=t.color(s.data.colorA).a,o=t.color(s.data.colorB).a,l=t.color(s.data.colorC).a,h=t.color(s.data.colorD).a,c=Math.min(n,Math.min(o,Math.min(l,h)));c<1&&(a=c)}i+=(1-i)*a}}return i<1}var xh=class extends ti{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.shadersPatchedForShapeBlend=!1,this.nodeContextUuid=0,this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return""}},Qve=class extends xh{constructor(e,t,i,r){super(),this.flatShading=e,this.side=t,this.wireframe=i,this.root=r}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,Object.assign(this.defines,e.defines),Object.assign(this.uniforms,e.uniforms),this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,i,r){return this.root.getFlavor(e,t,i,r)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,i){this.root.updateByOp(e,t,i)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},L_=class extends xh{constructor(e,t,i=!0){super(),this.data=e,this.allowVariableSaves=i,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.needsJitter=t.shared.needsJitter,Ur.startContext(this),this.reset0(e,t),Ur.endContext(this)}get nodeMaterial(){return this}getFlavor(e,t,i,r){let s=i?6:(e?3:0)+t;if(s+=((r?.resolutionLevel??0)-(r?.useChildrenColors?4:0))*7,s===0)return this;this.flavors===void 0&&(this.flavors=[]),s-=1;let a=this.flavors[s];return a===void 0&&(a=new Qve(e,t,i,this),a.needsJitter=this.needsJitter,this.flavors[s]=a,a.flatShading=e,a.side=t,a.updateAfterBuild(),r&&(a.defines.SHAPEBLEND=r.resolutionLevel,a.defines.SHAPEBLEND_C=r.useChildrenColors?1:0)),a}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){return this.lightLayer.getNode("occlusion")?.value??!1}reset(e,t,i=!1){Ur.startContext(this),(this.data!==e||i)&&this.reset0(e,t),Ur.endContext(this)}reset0(e,t){this.data=e;let i=e.layers??i1.defaultTwoLayerData("phong").layers;try{this.layers=i.map(r=>_f.create(this.layerIdGen++,r.id,r.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=iu(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,i){if(e[0]==="alphaOverride")this.transparent=iu(this.data,i.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if(e[0]==="layer"){let r=e[1],s=e[2];if(r&&s){let a=this.layers.find(n=>n.uuid===r);a?.hasValue(s)&&(s==="alpha"?(this.transparent=iu(this.data,i.shared),a.setValue(s,Math.max(0,Math.min(Number(t)/100,1)))):a.setValue(s,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(i=>i.data.type==="light");t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(i=>{"alpha"in i.data&&typeof i.data.alpha=="string"&&e.shared.getVariable(i.data.alpha,["material",this.uuid,"layer",i.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.lightLayer=this.layers.find(t=>t instanceof Tn),this.lightLayer===void 0&&(this.lightLayer=new Tn(0,"",{...Jr.defaultData("light","phong"),visible:!1},new R_,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.build(),this.nodeContextUuid=0}applyTextureMaps(){let e=this.layers.find(s=>s instanceof Tn);if(!e)return;let t=e.data,i=t.bumpMap,r=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let s=0;s<this.layers.length;++s){let a=this.layers[s];a instanceof ir&&a.color instanceof O_&&(a.uuid===i&&(e.node.bumpMap=a.color),a.uuid===r&&(e.node.roughnessMap=a.color))}}updateByOp(e,t,i){if(Ur.startContext(this),t!==void 0?this.data=t:t=this.data,this.transparent=iu(t,i.shared),e.path[0]==="layers"){let r=i.shared,s=e.path[1];if(s===void 0)i.scene.markNeedsUpdateRendererDirty(),this.reset0(t,i);else{e.type===0&&e.props.occlusion!==void 0&&i.scene.markNeedsUpdateRendererDirty();let a=this.layers.find(n=>n.uuid===s);if(a){let n=t.layers.data(s),o;e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?o={...e.props,alpha:Uc(e.props.alpha,r,["material",this.uuid,"layer",s,"alpha"])}:o={...e.props,alphaOverride:Uc(e.props.alphaOverride,r,["material",this.uuid,"alphaOverride"])}),a.updateByOp({...e,...o?{props:o}:{},path:e.path.slice(2)},n,i)&&this.reset0(t,i)}}}else this.reset0(t,i);Ur.endContext(this)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof ir?t.color.mask=void 0:t instanceof Tn&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof ir&&t.isMask.value&&t.data.visible&&e>0){let i=e-1,r=this.layers[i];r instanceof Tn?r.node.mask=new us(t.color,t.alpha,us.MUL):r instanceof ir&&(r.isMask.value||(r.color.mask=new us(t.color,t.alpha,us.MUL)))}}}blendColors(){let e=this.layers.findIndex(i=>i instanceof ir),t=this.layers.findIndex(i=>i instanceof Tn);if(e!==-1&&e<t){let i=this.layers[e].color;for(let r=e+1;r<t;++r){let s=this.layers[r];if(s instanceof ir){if(s.isMask.value)continue;i=new ET(i,s.color,s.alpha,s.mode)}}this.fragment.color=i}else this.fragment.color=void 0}blendAfterColors(){let e=new Ui("outgoingLight","f"),t=this.layers.findIndex(i=>i instanceof Tn);if(this.layers.length>t+1){for(let i=t+1;i<this.layers.length;++i){let r=this.layers[i];if(r instanceof ir){if(r.isMask.value)continue;e=new ET(e,r.color,r.alpha,r.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof dN);if(e.length>0){let t=e[0].position;for(let i=1;i<e.length;++i)e[i]&&(t=new us(t,e[i].position,us.ADD),t=new us(t,new Ze(.5).setReadonly(!0),us.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.shapeBlendhack&&this.shapeBlendhack(this),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let i=(r,s,a)=>Math.min(Math.max(r,s),a);for(let r of this.layers)if(r.type==="displace"){let s=i(r.uniforms[`f${r.id}_intensity`].value,e,t);r.uniforms[`f${r.id}_intensity`].value=s}}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new FF;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this.shadersPatchedForShapeBlend=!1,this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof ir){let t=e.params.texture;if(t instanceof Rx&&!t.image.loaded)return!1}return!0}};Object.defineProperties(xh.prototype,{properties:{get:function(){return this.fragment.properties}}});var kx=class extends L_{constructor(e,t,i){super(e,t,!1),this.uuid=i,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},kT=new Map;function Zve(e){if(typeof e=="string")return e;let t=kT.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},kT.set(e,t)),t.url}var pN,Jve=new Promise(e=>{pN=e}),FT=!1,Wp;function $ve(){if(FT)return;if(Wp)return Wp;async function e(){await Ah(()=>import("./howler-Dbpv9umN.js").then(t=>t.h),[]),pN(window!==void 0?window:global),FT=!0}return Wp=e(),Wp}var mN;Jve.then(e=>mN=e);function NT(e,t){e.forEach(i=>{"dragDropActions"in i.data?(t.push(...i.data.dragDropActions.drag),t.push(...i.data.dragDropActions.drop)):"inActions"in i.data?(t.push(...i.data.inActions),t.push(...i.data.outActions)):"gameActions"in i.data?(t.push(...i.data.gameActions.idle),t.push(...i.data.gameActions.move),t.push(...i.data.gameActions.jump),t.push(...i.data.gameActions.run)):"breakpoints"in i.data?i.data.breakpoints.forEach(r=>{t.push(...r.data.actions)}):"actions"in i.data&&(t.push(...i.data.actions),i.data.actions.forEach(r=>{r.data.type==="Conditional"&&r.data.ifActions&&(t.push(...r.data.ifActions),t.push(...r.data.elseActions))}))})}function e4e(e){let t=!1,i=[];return e.scene.objects.traverse((r,s)=>{if(s.type==="Page"&&s.uiScene!==void 0&&s.uiScene.objects.traverse((a,n)=>{if(n.events===void 0||Array.isArray(n.events)===!1)return!0;NT(n.events,i),t=t||i.some(o=>o.data.type==="Audio")}),s.events===void 0||Array.isArray(s.events)===!1)return!0;NT(s.events,i),t=t||i.some(a=>a.data.type==="Audio")}),t}var A3=class{constructor({src:e,volume:t,delay:i,loop:r}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let s;typeof e=="string"?s={src:e}:s={src:Zve(e),format:"wav"},this.sound=new mN.Howl(s),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),i!==void 0&&(this.delay=i),r!==void 0&&(this.loop=r)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,i){this.sound.on(e,t,i)}off(e,t,i){this.sound.off(e,t,i)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},t4e=class{constructor(){this.type="ShapePath",this.color=new pt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new wg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath?.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath?.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath?.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath?.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function i(f,p,m,g){let v=f.x,y=p.x,x=m.x,w=g.x,_=f.y,b=p.y,M=m.y,S=g.y,A=(w-x)*(_-M)-(S-M)*(v-x),C=(y-v)*(_-M)-(b-_)*(v-x),T=(S-M)*(y-v)-(w-x)*(b-_),D=A/T,R=C/T;if(T===0&&A!==0||D<=0||D>=1||R<0||R>1)return null;if(A===0&&T===0){for(let O=0;O<2;O++)if(r(O===0?m:g,f,p),t.loc===e.ORIGIN){let j=O===0?m:g;return{x:j.x,y:j.y,t:t.t}}else if(t.loc===e.BETWEEN){let j=+(v+t.t*(y-v)).toPrecision(10),X=+(_+t.t*(b-_)).toPrecision(10);return{x:j,y:X,t:t.t}}return null}else{for(let X=0;X<2;X++)if(r(X===0?m:g,f,p),t.loc===e.ORIGIN){let N=X===0?m:g;return{x:N.x,y:N.y,t:t.t}}let O=+(v+D*(y-v)).toPrecision(10),j=+(_+D*(b-_)).toPrecision(10);return{x:O,y:j,t:D}}}function r(f,p,m){let g=m.x-p.x,v=m.y-p.y,y=f.x-p.x,x=f.y-p.y,w=g*x-y*v;if(f.x===p.x&&f.y===p.y){t.loc=e.ORIGIN,t.t=0;return}if(f.x===m.x&&f.y===m.y){t.loc=e.DESTINATION,t.t=1;return}if(w<-Number.EPSILON){t.loc=e.LEFT;return}if(w>Number.EPSILON){t.loc=e.RIGHT;return}if(g*y<0||v*x<0){t.loc=e.BEHIND;return}if(Math.sqrt(g*g+v*v)<Math.sqrt(y*y+x*x)){t.loc=e.BEYOND;return}let _;g!==0?_=y/g:_=x/v,t.loc=e.BETWEEN,t.t=_}function s(f,p){let m=[],g=[];for(let v=1;v<f.length;v++){let y=f[v-1],x=f[v];for(let w=1;w<p.length;w++){let _=p[w-1],b=p[w],M=i(y,x,_,b);M!==null&&m.find(S=>S.t<=M.t+Number.EPSILON&&S.t>=M.t-Number.EPSILON)===void 0&&(m.push(M),g.push(new re(M.x,M.y)))}}return g}function a(f,p,m){let g=new re;p.getCenter(g);let v=[];return m.forEach(y=>{y.boundingBox.containsPoint(g)&&s(f,y.points).forEach(x=>{v.push({identifier:y.identifier,isCW:y.isCW,point:x})})}),v.sort((y,x)=>y.point.x-x.point.x),v}function n(f,p,m,g,v){(v==null||v==="")&&(v="nonzero");let y=new re;f.boundingBox.getCenter(y);let x=[new re(m,y.y),new re(g,y.y)],w=a(x,f.boundingBox,p);w.sort((C,T)=>C.point.x-T.point.x);let _=[],b=[];w.forEach(C=>{C.identifier===f.identifier?_.push(C):b.push(C)});let M=_[0].point.x,S=[],A=0;for(;A<b.length&&b[A].point.x<M;)S.length>0&&S[S.length-1]===b[A].identifier?S.pop():S.push(b[A].identifier),A++;if(S.push(f.identifier),v==="evenodd"){let C=S.length%2===0,T=S[S.length-2];return{identifier:f.identifier,isHole:C,for:T}}else if(v==="nonzero"){let C=!0,T=null,D=null;for(let R=0;R<S.length;R++){let O=S[R];p[O]&&(C?(D=p[O].isCW,C=!1,T=O):D!==p[O].isCW&&(D=p[O].isCW,C=!0))}return{identifier:f.identifier,isHole:C,for:T}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let o=0,l=999999999,h=-999999999,c=[];this.subPaths.forEach(f=>{let p=f.getPoints(),m=-999999999,g=999999999,v=-999999999,y=999999999;for(let x=0;x<p.length;x++){let w=p[x];w.y>m&&(m=w.y),w.y<g&&(g=w.y),w.x>v&&(v=w.x),w.x<y&&(y=w.x)}h<=v&&(h=v+1),l>=y&&(l=y-1),p.length&&c.push({curves:f.curves,points:p,isCW:oB.isClockWise(p),identifier:o++,boundingBox:new Ww(new re(y,g),new re(v,m))})});let u=c.map(f=>n(f,c,l,h,this.userData?.style.fillRule)),d=[];return c.forEach(f=>{let p=u[f.identifier];if(p&&!p.isHole){let m=new _g;m.curves=f.curves,u.filter(g=>g?.isHole&&g.for===f.identifier).forEach(g=>{if(g){let v=c[g.identifier],y=new wg;y.curves=v.curves,m.holes.push(y)}}),d.push(m)}}),d}},gN=!1,vN,UT=new Promise(e=>{vN=e}),VT=!1,qp;function i4e(){if(gN=!0,VT)return;if(qp)return qp;async function e(){let t=await Ah(()=>import("./opentype-BYnUjAnJ.js"),[]);vN(t),VT=!0}return qp=e(),qp}var r4e=class{async load(e,t,i=()=>{}){let{load:r}=await UT;r(e,(s,a)=>{s||!a?i(s??"Something went wrong"):t(a)})}async parse(e){let{parse:t,Bidi:i}=await UT;try{let r=t(e),s=new i,a=n=>r.charToGlyphIndex(n.char);return s.registerModifier("glyphIndex",null,a),s.applyFeatures(r,r.defaultRenderOptions.features),{font:r,bidi:s}}catch(r){console.error(r)}}};async function s4e(e){return await(await fetch(e)).arrayBuffer()}var a4e=new r4e;async function jT(e){let t,i,r=!1;if(e.url?(t=await s4e(e.url),i=e.url,r=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t)if(gN){let s=await a4e.parse(t);if(s)return{font:s.font,url:i,intercepted:r,arr:t,bidi:s.bidi}}else return{font:void 0,url:i,intercepted:r,arr:t,bidi:null}}function n4e(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var o4e=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=jT(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=jT(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,i){if(!this._bidi)return[];let r=this._bidi;r.getTextGlyphs(t);let s=r.tokenizer.tokens,a=[],n=0,o=i.length===s.length;for(let l=0;l<i.length;l++){let h=i[l].index,c=String.fromCharCode(i[l].unicode),u=s[n];if(n4e(h,u)||o)a.push({char:c,index:h,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),n++;else{let d=u.char,f="",p=[u.state.glyphIndex],m=[],g=!1;for(;!g;)n++,f=t.charAt(n),d+=f,p.push(e.charToGlyphIndex(f)),m=e.stringToGlyphs(d),m.length===1&&m[0].index===h&&(g=!0),n>t.length&&(g=!0);a.push({char:c,index:h,replacements:p,replacementChars:Array.from(d)}),n++}}return a}generateShapes(e,t,i){if(!this._isLoaded)return;let r=this.font,s=t.fontSize/this.unitsPerEm,a=t.fontSize*t.lineHeight,n=e.map(v=>this.getTextWidth(v,t)),o=typeof t.width=="string"?Number(i.getVariable(t.width)):t.width,l=typeof t.height=="string"?Number(i.getVariable(t.height)):t.height,h=this.getCharWidth(`
`,t),c=t.horizontalAlign===1?h:0,u=this.getLineInitialOffsetX(n[0],o,t.horizontalAlign,e[0],h),d=this.getLineInitialOffsetY(a,e.length,l,s,t.verticalAlign),f=[],p=e.map(v=>[]),m=e.map(v=>[]);for(let v=0;v<e.length;v++){let y=e[v],x={features:{liga:!0},letterSpacing:t.letterSpacing},w=[];try{w=r.stringToGlyphs(y,x)}catch(A){console.warn(A)}u=this.getLineInitialOffsetX(n[v],o,t.horizontalAlign,y,h);let _=[];try{_=this.reverseLigaturesTable(r,y,w)}catch(A){console.warn(A)}let b=this.computeSpaceWidthForLine(e,v,t,i),M=0,S=w[0];S&&t.horizontalAlign===2&&S.leftSideBearing!==void 0&&(u-=S.leftSideBearing*s),this.font?.forEachGlyph(y,u,d,t.fontSize,x,(A,C,T,D,R)=>{let O=A.index===0?`
`:A.unicode?String.fromCharCode(A.unicode):void 0,j=_[M],X=0;if(O===`
`)X=c;else if(O===" ")X=b;else{let N=this.createPath(A,s,C,T,t);N&&(X=N.offsetX,f.push(N.path))}if(j.replacements.length===1)m[v].push([C,T]),p[v].push(X);else{let N=j.replacements.map(Q=>(r.glyphs.get(Q).advanceWidth??0)*s),k=N.reduce((Q,Z)=>Q+=Z,0),ne=N.map(Q=>Q/k),te=C;for(let Q=0;Q<ne.length;Q++){let Z=X*ne[Q];m[v].push([te,T]),p[v].push(Z),te+=Z}}M++}),d-=a}let g=[];for(let v=0,y=f.length;v<y;v++)g.push(...f[v].toShapes());return{shapes:g,charWidths:p,lineWidths:n,charCoords:m}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){return this.font?.ascender??0}get descender(){return this.font?.descender??0}get familyName(){return this.font?.names.fontFamily??""}get subfamilyName(){return this.font?.names.fontSubfamily??""}get unitsPerEm(){return this.font?.unitsPerEm??1}getLineInitialOffsetX(e,t,i,r,s){return(i===3||i===2)&&r.indexOf(`
`)>=0&&(e-=s),i===3?t*.5-e*.5:i===2?t-e:0}getLineInitialOffsetY(e,t,i,r,s){let a=t*e,n=Math.abs(this.ascender-this.descender)*r,o=e-n,l=-this.ascender*r-o/2;return s===3?-(i-a-l):s===2?-(i*.5-a*.5-l):l}createPath(e,t,i,r,s){let a=e.getPath(i,-r,s.fontSize,{kerning:!1,letterSpacing:s.letterSpacing});if(!a){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let n=new t4e,o=(e.advanceWidth??1)*t;if(e)for(let l of a.commands){let h=n.currentPath?.currentPoint;if(!(h&&l.type!=="Z"&&h.x===l.x&&-h.y===l.y))switch(l.type){case"M":n.moveTo(l.x,-l.y);break;case"L":n.lineTo(l.x,-l.y);break;case"Q":n.quadraticCurveTo(l.x1,-l.y1,l.x,-l.y);break;case"C":n.bezierCurveTo(l.x1,-l.y1,l.x2,-l.y2,l.x,-l.y);break}}return n.subPaths.forEach(l=>{let h=l4e(l.curves);h!==void 0&&l.currentPoint.distanceTo(h)>0&&l.lineTo(h.x,h.y)}),{offsetX:o,path:n}}getCharWidth(e,t){return this.font?.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing})??0}getTextWidth(e,t){return this.font?.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing})??0}computeSpaceWidthForLine(e,t,i,r){let s=this.getCharWidth(" ",i),a=e[t];if(a){let n=this.countSpaces(a.trimEnd());if(i.horizontalAlign===4&&t<e.length-1&&n){let o=typeof i.width=="string"?Number(r.getVariable(i.width)):i.width,l=this.getTextWidth(a,i);return(o-(l-n*s))/n}}return s}countSpaces(e){return(e.match(/ /g)||[]).length}};function l4e(e){if(e.length){let t=e[0];if(t instanceof Qa)return t.v1;if(t instanceof Ha||t instanceof vh)return t.v0}}var h4e=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,i){let r=this.objects.get(e);return r===void 0?(r=this.createObject(e,t,i),this.objects.set(e,r)):r.isShared=!0,r}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let i=this.objects.get(e);if(i&&i.isShared!==!0)return this.objects.delete(e),this.objects.set(t,i),i}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let i=this.objects.get(e);t===i&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},GT=class extends h4e{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,i){let r=Qd(e,t,this.flatShading,i);return r.computeBoundingSphere(),r}},c4e={markNeedsUpdateRendererDirty:()=>{}},Lm=1e3,HT=512*Lm;function u4e(e,t){let i=typeof e;return!!((t==="string"||t==="number")&&i===t||t==="boolean"&&(e==="true"||e==="false"||e===!0||e===!1)||t==="image"&&i==="string"&&e.startsWith("http"))}var d4e="https://hooks.spline.design",f4e=`${d4e}/events?hashFile=`,p4e=class{constructor(e,t){this.id=e,this.userWebhook=t,this.result=void 0,this._connected=!1,this.emitter=r4(),this.reconnectWaitFor=Lm,this._onError=i=>{this.eventSource?.removeEventListener("message",this._onMessage),this.eventSource?.removeEventListener("error",this._onError),this.eventSource?.removeEventListener("open",this._onConnected),this._scheduleReconnect()},this._onConnected=i=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=Lm,this._connected=!0},this._onDisconnected=()=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=Lm,this._connected=!1},this._onMessage=i=>{let r=i.data,s;try{s=JSON.parse(r)}catch(a){console.error("Error parsing webhook message",a)}if(s){let a=!1;this.userWebhook.parametersSchemas.forEach(({data:n})=>{s[n.name]!==void 0&&u4e(s[n.name],n.type)&&(this.result===void 0&&(this.result={}),this.result[n.name]=s[n.name],a=!0)}),a&&this.emitter.emit("message",{userWebhookId:this.id})}}}connect(){clearTimeout(this.scheduledReconnectHandle),this.userWebhook.url&&(this.eventSource=new EventSource(f4e+this.userWebhook.url),this.eventSource.addEventListener("message",this._onMessage),this.eventSource.addEventListener("error",this._onError),this.eventSource.addEventListener("open",this._onConnected))}disconnect(){this.eventSource?.removeEventListener("message",this._onMessage),this.eventSource?.removeEventListener("error",this._onError),this.eventSource?.removeEventListener("open",this._onConnected),this.eventSource?.close(),this._onDisconnected(),clearTimeout(this.scheduledReconnectHandle)}_scheduleReconnect(){this.reconnectWaitFor*=2,this.reconnectWaitFor>HT&&(this.reconnectWaitFor=HT),clearTimeout(this.scheduledReconnectHandle),this.scheduledReconnectHandle=setTimeout(()=>{this.scheduledReconnectHandle=void 0,this.connect()},this.reconnectWaitFor)}update(e){this.userWebhook=e}dispose(){this._connected&&this.disconnect()}get connected(){return this._connected}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}getParametersKeys(){return this.userWebhook.parametersSchemas.map(e=>e.data.name)}getParameterValue(e){if(this.getParametersKeys().includes(e)){if(this.result)return this.result?.[e];for(let t of this.userWebhook.parametersSchemas)if(t.data.name===e)return ux.defaultParameterValueByType(t.data.type)}}},WT=[4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],m4e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],lh=[],z_=[];for(let e=1;e<=8;e++)for(let t=0;t<WT.length;t++){let i=WT[t];lh.push(i/Math.pow(2,8-e)),z_.push(m4e[t]+e)}var lv=[32,2e3],qT=lh.filter((e,t)=>lh[t]>lv[0]&&lh[t]<lv[1]),g4e=z_.filter((e,t)=>lh[t]>lv[0]&&lh[t]<lv[1]),v4e=class{static getFrequencies(e,t,i,r="frequency",s=-100,a=-30){i||(i=new Float32Array(e.frequencyBinCount),e.getFloatFrequencyData(i));let n=t/2,o=1/i.length*n,l,h,c;if(r==="music"||r==="voice"){let d=r==="voice"?qT:lh,f=Array(d.length).fill(s);for(let p=0;p<i.length;p++){let m=p*o,g=i[p];for(let v=d.length-1;v>=0;v--)if(m>d[v]){f[v]=Math.max(f[v],g);break}}l=f,h=r==="voice"?qT:lh,c=r==="voice"?g4e:z_}else l=Array.from(i),h=l.map((d,f)=>o*f),c=h.map(d=>`${d.toFixed(2)} Hz`);let u=l.map(d=>Math.max(0,Math.min((d-s)/(a-s),1)));return{values:new Float32Array(u),frequencies:h,labels:c}}},y4e="gpt-4o-realtime-preview-2024-12-17",x4e=()=>"https://relayserver.spline.design/";async function b4e(e){try{return(await(await fetch(x4e()+"session?uuidfile="+e)).json()).token}catch(t){console.error("Token generation error:",t)}}var w4e=class{constructor(e){this.value=0,this.frequencies=new Float32Array(0);let t=new AudioContext;this.source=t.createMediaStreamSource(e),this.analyser=t.createAnalyser(),this.source.connect(this.analyser),this.analyser.fftSize=8192,this.analyser.smoothingTimeConstant=.1}getFrequencies(e=-100,t=-30){if(!this.analyser)throw new Error("Not connected, please call .connect() first");return v4e.getFrequencies(this.analyser,44100,void 0,"voice",e,t)}update(){let e=this.getFrequencies(),t=e.values.reduce((i,r)=>i+r,0)/e.values.length;this.value=t,this.frequencies=e.values}disconnect(){this.source.disconnect(),this.analyser.disconnect()}},XT=class{constructor(e,t,i){this.data=e,this.id=t,this.shared=i,this.emitter=r4(),this.rafId=0,this.voice=0,this.frequencies=new Float32Array([0]),this.events=[],this.isConnected=!1,this.isToolsAdded=!1,this.tools=[],this.onMessage=r=>{let s=JSON.parse(r.data);if(this.appendEvent(s),s.type==="session.created"&&this.onSessionCreated(),s.type==="response.done"&&s.response?.output){for(let a of s.response.output)if(a.type==="function_call")for(let[n,o]of this.tools)a.name===n.name&&(o(JSON.parse(a.arguments)),setTimeout(()=>{this.sendClientEvent({type:"response.create",response:{instructions:"notice the user about what you just did"}})}))}},this.onSessionCreated=()=>{this.isToolsAdded||this.registerTools()},this.onOpen=()=>{this.events=[],this.isConnected=!0,this.sendClientEvent({type:"response.create",response:{instructions:"Say hi"}})},this.animate=()=>{if(this.rafId=requestAnimationFrame(this.animate),this.isConnected&&this.analyser){this.analyser.update();let r=this.analyser.value,s=this.analyser.frequencies;this.voice=r,this.frequencies=s,this.emitter.emit("voice",{value:r,frequencies:s})}}}update(e){this.data=e}setColorByName(e,t){let i=this.shared.getColorByName(e);if(i){let{id:r}=i,{r:s,g:a,b:n}=qme.hexStringToRgb(t)??{r:0,g:0,b:0};this.shared.updateColor(r,{r:s/255,g:a/255,b:n/255})}}async connect(){if(this.isConnected)return;let e=await b4e(this.data.integration.hash);this.pc=new RTCPeerConnection,this.audioElement=document.createElement("audio"),this.audioElement.autoplay=!0,this.pc.ontrack=s=>{let a=s.streams[0];this.audioElement.srcObject=a,this.analyser=new w4e(a)};let t=await navigator.mediaDevices.getUserMedia({audio:!0});this.pc.addTrack(t.getTracks()[0]),this.dc=this.pc.createDataChannel("oai-events"),this.dc.addEventListener("message",this.onMessage),this.dc.addEventListener("open",this.onOpen);let i=await this.pc.createOffer();await this.pc.setLocalDescription(i);let r={type:"answer",sdp:await(await fetch(`https://api.openai.com/v1/realtime?model=${y4e}`,{method:"POST",body:i.sdp,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/sdp"}})).text()};await this.pc.setRemoteDescription(r),this.animate()}appendEvent(e){this.events=[e,...this.events]}sendClientEvent(e){this.dc?(e.event_id=e.event_id||crypto.randomUUID(),this.dc.send(JSON.stringify(e)),this.appendEvent(e)):console.error("Failed to send message - no data channel available",e)}registerTools(){this.isToolsAdded=!0,this.registerTool({type:"function",name:"set_personality_color",description:"returns a color based on the voice personality of the ai assistant. This should be called by the voice assistant each time it is asks to speak differently. If a color cannot be associated to the personality, the color should be a neutral color.",parameters:{type:"object",properties:{color:{type:"string",description:"css hex color string, reflecting the personality"},personality:{type:"string",description:"the personality of the voice assistant"}},required:["color","personality"]}},({color:s})=>{this.setColorByName("Voice Assistant Color",s)});let e=this.shared.getVariablesNames().join(", ");this.registerTool({type:"function",name:"set_variable",description:"Sets a Spline variable value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the variable that needs to be set. Here's a list of available variables: ${e}. It the variable does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"The new value for this variable, should always be a string even for number and boolean variables, assume that the value will be cast to the proper type afterwards."}},required:["name","value","type"]}},({name:s,value:a})=>{let n=this.shared.getVariableByName(s);if(n){let o=this.shared.getVariable(n.id),l;typeof o=="number"?l=parseFloat(a):typeof o=="boolean"?l=a.toLowerCase()==="true":l={textValue:a},this.shared.updateVariable(n.id,l)}});let t=this.shared.getColorNames().join(", ");this.registerTool({type:"function",name:"set_color",description:"Sets a Spline color asset value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the color asset that needs to be set. Here's a list of available color assets: ${t}. It the color asset does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"css hex color string"}},required:["name","value"]}},({name:s,value:a})=>{this.setColorByName(s,a)});let i=this.shared.scene,r=[];i.traverseEntity(s=>{s.data.events.forEach(a=>{if(a.data.type==="AIAssistantTrigger"){let{description:n}=a.data;r.push(n)}})}),this.registerTool({type:"function",name:"trigger_event",description:"Trigger an event by name, here are the available events, please match what the user is asking for to one of these if it applies, otherwise don't call the function and warn the user.",parameters:{type:"object",properties:{description:{type:"string",description:`The name of the event that needs to be triggered. Here's a list of available events: ${JSON.stringify(r)}.`},direction:{type:"string",description:"default is forward, but can be forward or backward. Always set to forward unless the user ask to reverse or cancel the event, then set to backward."}},required:["description","direction"]}},({description:s,direction:a})=>{this.emitter.emit("trigger_event",{description:s,direction:a})}),this.sendClientEvent({type:"session.update",session:{tools:this.tools.map(([s])=>s)}})}registerTool(e,t){this.tools.push([e,t])}disconnect(){cancelAnimationFrame(this.rafId),this.analyser?.disconnect(),this.voice=0,this.isConnected=!1,this.isToolsAdded=!1,this.dc?.removeEventListener("message",this.onMessage),this.dc?.removeEventListener("open",this.onOpen),this.dc?.close(),this.pc?.getSenders().forEach(e=>{e.track&&e.track.stop()}),this.pc?.close(),this.pc=void 0}computeAnalysisForListenerEvent(e){if(e.analysis==="range"){let t=this.frequencies.slice(...e.analysisRange);return t.reduce((i,r)=>i+r,0)/t.length}return e.analysis==="single"?this.frequencies[e.analysisSingle]:this.voice}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}};function Fx(e){return"variable_"+e}var _4e=class extends ove{constructor(e){super(),this.shared=e}create(e){return new oN(e,this.shared)}},B_=class{constructor(e,t={},i=!0,r=!1){if(this.data=e,this.needsJitter=i,this.enableLocalStorageForPersistentVariables=r,this.geometryCache=new GT(!0),this.geometryCache2=new GT(!1),this.imageHolderCache=new _4e(this),this.thisContext={scene:c4e,shared:this},this.deletedMaterial=new kx(i1.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new Vl(fx.emptyImage,this),this.deletedVideo=new Vl(Gg.defaultVideo,this),this.materials={},this.images={},this.uiBuffers={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.userAPIs={},this.userWebhooks={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[s,a]of Object.entries(t.images))this.addImage(s,a);if(t.videos)for(let[s,a]of Object.entries(t.videos))this.addVideo(s,a);if(t.audios)for(let[s,a]of Object.entries(t.audios))this.addAudio(s,a);if(t.particles)for(let[s,a]of Object.entries(t.particles))this.addParticle(s,a);this.reset(e)}setRequestRender(e){this._requestRender=e}getImageLoadPromises(){return Object.values(this.images).map(e=>e.loadPromise)}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1,i=!1){this.data=e,this.resetLib(e.lib);for(let{id:r,data:s}of e.variables)this.addVariableHolder(r,s),t&&this.updateVariableHolder(r,s);for(let[r,s]of Object.entries(e.userAPIs))this.addUserAPI(r,s);for(let[r,s]of Object.entries(e.userWebhooks))this.addUserWebhook(r,s);if(!i){for(let[r,s]of Object.entries(e.images))this.addImage(r,s);for(let[r,s]of Object.entries(e.videos))this.addVideo(r,s)}for(let[r,s]of Object.entries(e.colors))this.addColor(r,s);for(let[r,s]of Object.entries(e.materials))this.addMaterial(r,s);for(let[r,s]of Object.entries(e.audios))this.addAudio(r,s);for(let[r,s]of Object.entries(e.particles))this.addParticle(r,s);for(let[r,s]of Object.entries(e.fonts))this.addFont(r,s)}addMaterial(e,t){if(this.materials[e]){let i=this.materials[e];i.reset(t,this.thisContext),i.dispose()}else{let i=new kx(t,this.thisContext,e);this.materials[e]=i}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new L_(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new Vl(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addUIBuffer(e,t){return this.uiBuffers[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.uiBuffers[e].updateSrc(t),!0):(this.uiBuffers[e]=new Vl(t,this),!1)}uiBuffer(e){return this.uiBuffers[e]}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new Vl(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new ov(t.r,t.g,t.b,t.a):this.colors[e]=new ov(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let i=this.colors[e];return this.colors[e].r=t.r??i.r,this.colors[e].g=t.g??i.g,this.colors[e].b=t.b??i.b,this.colors[e].a=t.a??i.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}getColorNames(){return Object.values(this.data.colors).map(e=>e.name)}getColorByName(e){for(let t in this.data.colors)if(this.data.colors[t].name===e)return{color:this.colors[t],id:t}}color(e){let t;if(typeof e=="string"){let i=this.getColor(e);i?t=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new A1(0,0,0,0))}else return"a"in e?new A1(e.r,e.g,e.b,e.a):new A1(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof A3)return t;{let i=new A3({src:t.data});return this.audios[e]=i,i}}addParticle(e,t){this.particles[e]=t}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let t=this.audios[e];t&&(t instanceof A3&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new o4e(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof A3&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){if(this.variables[e]===void 0){let i=t.value;if(this.enableLocalStorageForPersistentVariables&&t.persistent){let r=localStorage.getItem(Fx(e));i=r!==null?JSON.parse(r):t.value}return this.variables[e]={value:i,locations:[],persistent:t.persistent},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0}return this.variables[e].value=t.value,!1}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(this.variables[e]===void 0)return!1;this.variables[e].value=t,this.enableLocalStorageForPersistentVariables&&this.variables[e].persistent&&localStorage.setItem(Fx(e),JSON.stringify(t));let i=t;for(;typeof i=="string";)i=this.variables[i].value;let r=this.entityOpContext.scene;for(let s=this.variables[e].locations.length-1;s>=0;s--){let a=this.variables[e].locations[s];if(a[0]==="material"){let n=a[1],o=i,l={scene:r,shared:this},h=a.slice(2);r.traverseMaterial(u=>{let d=u.root??u;d.uuid===n&&d.onVariableUpdate(h,o,l)});let c=this.materials[n];c&&c.onVariableUpdate(h,o,l)}else{let n=r.find(a[0]);if(n===void 0){this.variables[e].locations.splice(s,1);continue}if(a[1]!=="geometry"&&a[1]!=="particles"){for(let o=1;o<a.length-1;o++)n=n[a[o]];a[1]==="rotation"?n[a[a.length-1]]=i*Ke.DEG2RAD:n[a[a.length-1]]=i}if(n=r.find(a[0]),n.type==="ParticleEmitter"&&n.updateVariableState(i,a),Zt.is(n))if(a[1]==="position"||a[1]==="rotation"||a[1]==="scale")n.onVariableUpdate();else if(a[1]==="geometry"){let o=n;n.component&&(o=n.component);let l=o.dataPatched;o.chooseGeoemtryCache(this).forceDelete(l.geometry),o.createGeometryDelayed(this.entityOpContext),o.onVariableUpdate(!0),o.invalidateDownstreamBooleanData(),o.instances.forEach(h=>{let c=h.dataPatched;h.chooseGeoemtryCache(this).forceDelete(c.geometry),h.createGeometryDelayed(this.entityOpContext),h.onVariableUpdate(!0),h.invalidateDownstreamBooleanData()})}else a[1]==="morphTargetInfluences"&&n.updateMorphInfluences(a[2],i)}}return this.requestRender(),!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){if(Array.isArray(e)){if(e[0]==="mouse")return this.mouseProperty?.[e[1]]??0;if(e[0]==="raycast")return this.raycastProperty?.[e[1]]??0;let i=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return i.geometry.userData.parameters[e[1]];for(let r=1;r<e.length;r++)i=i[e[r]];return e[1]==="rotation"&&(i*=Ke.RAD2DEG),i}for(let i in this.variables){if(t===void 0)break;let r=this.variables[i],s=r.locations?.findIndex(a=>jr.equal(a,t));s!==void 0&&s!==-1&&r.locations.splice(s,1)}if(typeof e=="string"){let i=e,r=e;do{if(r=i,this.variables[i]===void 0)break;let s=this.variables[i].value;t&&this.variables[r]!==void 0&&this.variables[r].locations.push(t),i=s}while(typeof i=="string");return i}else return e}getVariables(){return this.variables}getVariablesNames(){return this.data.variables.map(e=>e.data.name)}getVariableByName(e){for(let t of this.data.variables)if(t.data.name===e)return{variable:t.data,id:t.id}}getDynamicVariablePlayState(e){return this.variables[e]?.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){return this.variables[e]?.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,i]of Object.entries(e.images))this.addImage(t,i.asset);for(let[t,i]of Object.entries(e.audios))this.addAudio(t,i.asset);for(let[t,i]of Object.entries(e.particles))this.addParticle(t,i.asset);for(let[t,i]of Object.entries(e.colors))this.addColor(t,i.asset);for(let[t,i]of Object.entries(e.fonts))this.addFont(t,i.asset);for(let[t,i]of Object.entries(e.materials))this.addMaterial(t,i.asset);for(let[t,i]of Object.entries(e.videos))this.addVideo(t,i.asset);for(let[t,i]of Object.entries(e.variables))this.addVariableHolder(t,i.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===1&&e.type===1?this.addParticle(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,i){if(this.data=t,e.path[0]==="images")e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id);else if(e.path[0]==="videos")e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id);else if(e.path[0]==="audios")e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id);else if(e.path[0]==="particles")e.path.length===2&&e.type===0?e.props.data&&this.addParticle(e.path[1],t.particles[e.path[1]]):e.path.length===1&&e.type===1?this.addParticle(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteParticle(e.id);else if(e.path[0]==="colors")e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id);else if(e.path[0]==="materials")e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(t1.drop(e,2),t.materials[e.path[1]],{shared:this,scene:i});else if(e.path[0]==="fonts")e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,i):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id);else if(e.path[0]==="variables")e.path.length===2&&e.type===0?"value"in e.props?this.updateVariable(e.path[1],e.props.value):"persistent"in e.props&&(this.variables[e.path[1]].persistent=e.props.persistent):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id);else if(e.path[0]==="userAPIs"){if(e.path.length===1&&e.type===1)this.addUserAPI(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserAPI(e.id);else if(typeof e.path[1]=="string"){let r=t.userAPIs[e.path[1]];if(r){let s=e.type===0&&e.props.debounce===void 0,a=this.getUserAPI(e.path[1]);a instanceof XT?a.update(r):a?.update(r,this,s)}}}else if(e.path[0]==="userWebhooks"){if(e.path.length===1&&e.type===1)this.addUserWebhook(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserWebhook(e.id);else if(typeof e.path[1]=="string"){let r=t.userWebhooks[e.path[1]];r&&this.getUserWebhook(e.path[1])?.update(r)}}else e.path[0]==="lib"&&this.updateLibByOp(t1.drop(e,1),i)}updateFont(e,t,i){if(t.props.url){let r=this.getFont(e),s={...this.data.fonts[e],url:t.props.url};r.update(s),r.loadingPromise.then(()=>this.requestRender()),i.updateFont(e,this)}}addUserAPI(e,t){return this.userAPIs[e]?(this.userAPIs[e].update(t,this),!0):this.openAIRealtime?.id===e?(this.openAIRealtime.update(t),!0):t.integration?.type==="VoiceAssistant"?(this.openAIRealtime=new XT(t,e,this),!1):(this.userAPIs[e]=new AF(e,t,this),!1)}getUserAPI(e){return this.openAIRealtime?.id===e?this.openAIRealtime:this.userAPIs[e]}getUserAPIs(){return this.userAPIs}deleteUserAPI(e){let t=this.userAPIs[e];t&&(t.dispose(),delete this.userAPIs[e])}addUserWebhook(e,t){return this.userWebhooks[e]?(this.userWebhooks[e].update(t),!0):(this.userWebhooks[e]=new p4e(e,t),!1)}getUserWebhook(e){return this.userWebhooks[e]}getUserWebhooks(){return this.userWebhooks}deleteUserWebhook(e){let t=this.userWebhooks[e];t&&(t.dispose(),delete this.userWebhooks[e])}get scene(){return this.entityOpContext.scene}};new B_(ha.emptyData());var b0=class extends ns{updateByPatchedOp(e,t,i){if(super.updateByPatchedOp(e,t,i),Ode(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[r,s]of Object.entries(e.props)){let a=i.shared.material(s);this.material[Number(r)]=a}else if(Pi(e.path,["material"])&&this.material instanceof xh)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(t1.drop(e,1),t.material,i);else if(Pi(e.path,["materials","*"])&&Array.isArray(this.material)){let r=e.path[1];if("materials"in t&&r<this.material.length){let s=t.materials[r];typeof s!="string"&&this.material[r].updateByOp(t1.drop(e,2),s,i)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let i=this.dataPatched;this.dataPatched.type==="Mesh"&&this.dataPatched.geometry.shapeBlendNode&&this.layers.set(9);let r;if(this.dataPatched.type==="Mesh"&&this.dataPatched.geometry.type==="ShapeBlendGeometry"&&(r={resolutionLevel:this.dataPatched.geometry.resolutionLevel,useChildrenColors:this.dataPatched.geometry.useChildrenColors}),e.geometry?.type!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe,r),t.scene.markNeedsUpdateRendererDirty()),(e.geometry?.type==="NonParametricGeometry"||"materials"in e)&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(s=>t.shared.material(s).getFlavor(i.flatShading,i.side,i.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let s=0;s<this.material.length;s++)this.material[s]=this.material[s].getFlavor(i.flatShading,i.side,i.wireframe);else this.material=this.material.getFlavor(i.flatShading,i.side,i.wireframe,r)}disposeMaterial(){this.material&&fk(this.material).forEach(e=>{e instanceof xh&&(e instanceof kx||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},YT=new E,KT=new Mt,QT=new Mt,S4e=new E,ZT=new Fe,Ir=class extends b0{constructor(e,t,i){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=new Fe().fromArray(t.bindMatrix),this.bindMatrixInverse=new Fe)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof rt&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof B_){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return qg.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return qg.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),Pi(e.path,["geometry"])&&this.updateByPatchedOpGeometry(t1.drop(e,1),t.geometry,i)}removeInteractionGeometry(e){this.localGeometry?.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){this.invalidateDownstreamBooleanData();let i=this.data.geometry.type;if(i==="NonParametricGeometry"||i==="SubdivGeometry"){let r=e;if(this.localGeometry===void 0){let l={...this.data.geometry,...r};this.localGeometry=Qd(l,t,this.data.flatShading,this)}let s,a,n;r.scaleBaked?[s,a,n]=r.scaleBaked:{width:s,height:a,depth:n}=r;let o=this.localGeometry.userData;o.sxPrev!==void 0&&Ix(this.localGeometry.attributes,s/o.sxPrev,a/o.syPrev,n/o.szPrev),o.sxPrev=s,o.syPrev=a,o.szPrev=n}else{let r={...this.data.geometry,...e};this.localGeometry?.dispose(),this.localGeometry=Qd(r,t,this.data.flatShading,this)}}refreshAttachedClonersInteractions(){for(let e of this.attachedSurfaceCloners)e.update()}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,i){let r=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof Q1&&this.chooseGeoemtryCache(i.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(r=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(i),this.refreshAttachedPaths(i)),r||(i.scene?.markGeometryCacheDirty(),this.createGeometryDelayed(i)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t);let i=e.morphTargetInfluences;if(i){this.updateMorphTargets(),this.geometry.morphTargetsRelative=!0;for(let{data:{name:r,value:s}}of i)this.updateMorphInfluences(r,t.shared.getVariable(s,[this.uuid,"morphTargetInfluences",r]))}super.updateState(e,t)}updateMorphInfluences(e,t){if(this.morphTargetDictionary===void 0)return;let i=this.morphTargetDictionary[e];i!==void 0&&(this.morphTargetInfluences[i]=t)}updateGeometryGroupsIfNeeded(){Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(this.geometry.getIndex()?.count??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let i=this.geometry.userData.parameters;this.is2DType?e.set(0,0,i.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)):i.centerOffset?e.fromArray(i.centerOffset):e.setScalar(0),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new Mt,i=this.geometry.attributes.skinWeight;for(let r=0,s=i.count;r<s;r++){t.fromBufferAttribute(i,r);let a=1/t.manhattanLength();a!==1/0?t.multiplyScalar(a):t.set(1,0,0,0),i.setXYZW(r,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let i=this.skeleton;if(i===void 0)return;let r=this.geometry;KT.fromBufferAttribute(r.attributes.skinIndex,e),QT.fromBufferAttribute(r.attributes.skinWeight,e),YT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){let a=QT.getComponent(s);if(a!==0){let n=KT.getComponent(s);ZT.multiplyMatrices(i.bones[n].matrixWorld,i.boneInverses[n]),t.addScaledVector(S4e.copy(YT).applyMatrix4(ZT),a)}}return t.applyMatrix4(this.bindMatrixInverse)}};function A4e(e){if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,i=e.geometry.attributes,r=i.position.array,s=i.normal.array,a=new Float32Array(r.length);for(let n=0;n<r.length;n+=3){let o=`${r[n]}_${r[n+1]}_${r[n+2]}`,l=new E(s[n],s[n+1],s[n+2]);t.has(o)?t.get(o)?.normals.push(l):t.set(o,{normals:[l],result:new E})}t.forEach((n,o)=>{for(let l of n.normals)n.result.add(l);n.result.divideScalar(n.normals.length)});for(let n=0;n<r.length;n+=3){let o=`${r[n]}_${r[n+1]}_${r[n+2]}`,l=t.get(o)?.result;l&&(a[n]=l.x,a[n+1]=l.y,a[n+2]=l.z)}e.geometry.setAttribute("extrudeNormal",new Xe(a,3))}function M4e(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=new E;for(let s=0;s<t.length;s+=3)r.set(t[s],t[s+1],t[s+2]).normalize(),i[s]=r.x,i[s+1]=r.y,i[s+2]=r.z;e.geometry.setAttribute("extrudeNormal",new Xe(i,3))}function k_(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof xh)||e.material.getLayersOfType("outline").length===0)return;e instanceof Ir&&e.is2DAndNoDepth?M4e(e):A4e(e)}function F_(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=parseInt(e.uuid.replace(/\D/g,"")),s=[Ke.seededRandom(r),Ke.seededRandom(r+1e4),Ke.seededRandom(r+2e4)];for(let a=0;a<t.length;a++)i[a]=s[a%3];e.geometry.setAttribute("randomColor",new mt(i,3))}var gn=new yr,J0=new E;function C4e(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var Zd=class extends Ir{constructor(e,t,i){super(e,t,i),this.data=t,this.hiddenMatrixOld=new Fe,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let i=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}createGeometryByControls(e){if(this.skipReactionUpdate===!0)return;let t=this.localGeometry?.uuid,{originalGeometry:i,subdividedGeometry:r,subdivPointer:s}=Q1.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=s,i!==void 0&&(this.originalGeometry?.dispose(),this.originalGeometry=i),r!==void 0&&(this.subdividedGeometry?.dispose(),this.subdividedGeometry=r??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,k_(this),F_(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let i=this.material;this.material=Array.isArray(i)?i.map(r=>r.getFlavor(!1,r.side,r.wireframe)):i.getFlavor(!1,i.side,i.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){Q1.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Q1.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=Q1.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Q1.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let i=this.localGeometry;this.localGeometry=this.originalGeometryNew,ns.prototype.raycast.call(this,e,t),this.localGeometry=i}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Cs,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;gn.setFromBufferAttribute(t),gn.getCenter(i),e.boundingSphere.radius=i.distanceTo(gn.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),gn.getSize(J0),this.hasNonUniformScale&&J0.divide(this.scale);let r={width:J0.x,height:J0.y,depth:J0.z};return this.geometry.userData.parameters=r,r}updateBoundingSphere(e){let t=this.originalGeometry;gn.min.set(e[0],e[2],e[4]),gn.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(gn.min.applyMatrix4(this.shearScaleInv),gn.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new Cs);let i=t.boundingSphere.center;gn.getCenter(i),t.boundingSphere.radius=i.distanceTo(gn.max)}freeSubdivPointer(){this.subdivPointer&&(Q1.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,this.originalGeometry?.dispose(),this.subdividedGeometry?.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),this.localGeometry&&this.createGeometryByControls(t)}},JT=-1,E4e=1,T4e={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},P4e={polygon_center:0,edge:1,vertex:2},Xp=(e,t)=>(i,r)=>!t||i===0||e===0?0:e*r/100,Ot=(e,t)=>{let i=Math.abs(t),r=i*-1;return(e-JT)*(i-r)/(E4e-JT)+r},D4e=new E,Yp=new E,I4e=new E,O4e=new E;function _u(e,t){let i=I4e.fromArray(e),r=O4e.fromArray(t);Yp.copy(r).sub(i);let s=Yp.length();return Yp.normalize().multiplyScalar(s*.5),D4e.copy(i).add(Yp).toArray()}var ca=new y1,Kp=new E,hv=new E,rc=new E;function R4e(e){let t=[];for(let i=0;i<=e.index.count;i++)if(Kp.fromArray(e.index.array,i*3),ca.setFromAttributeAndIndices(e.attributes.position,Kp.x,Kp.y,Kp.z),ca.getNormal(hv),ca.getMidpoint(rc),!(isNaN(rc.x)||isNaN(rc.y)||isNaN(rc.z))){let{a:r,b:s,c:a}=ca,n=r.toArray(),o=s.toArray(),l=a.toArray(),h=r.distanceTo(s),c=s.distanceTo(a),u=a.distanceTo(r),d=_u(n,o),f=_u(o,l),p=_u(l,n),m=[h,c,u],g=Math.max(...m),v=m.filter(w=>Math.round(w)===Math.round(g)).length>1,y=[],x=ca.getMidpoint(rc).toArray();g===h&&!v&&(y=[f,p,p],x=d),g===c&&!v&&(y=[d,p,p],x=f),g===u&&!v&&(y=[d,f,f],x=p),v&&(y=[d,f,p]),t.push({vertices:[n,o,l],faceCenters:y,midpoint:x,norm:ca.getNormal(hv).toArray()})}return t}function L4e(e){let t=[],{position:i}=e.attributes;for(let r=0;r<i.count;r++){ca.setFromAttributeAndIndices(i,r*3,r*3+1,r*3+2),ca.getNormal(hv),ca.getMidpoint(rc);let s=ca.a.toArray(),a=ca.b.toArray(),n=ca.c.toArray();t.push({vertices:[s,a,n],faceCenters:[_u(s,a),_u(a,n),_u(n,s)],midpoint:rc.toArray(),norm:hv.toArray()})}return t}var z4e=4,B4e=.5,_9=e=>.5*(1-Math.cos(e*Math.PI)),k4e=class{constructor(){this.perlin=new Array(4096)}noise(e,t=0,i=0){if(this.perlin==null){this.perlin=new Array(4096);for(let g=0;g<4096;g++)this.perlin[g]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),i<0&&(i=-i);let r=Math.floor(e),s=Math.floor(t),a=Math.floor(i),n=e-r,o=t-s,l=i-a,h,c,u=0,d=.5,f,p,m;for(let g=0;g<z4e;g++){let v=r+(s<<4)+(a<<8);h=_9(n),c=_9(o),f=this.perlin[v&4095],f+=h*(this.perlin[v+1&4095]-f),p=this.perlin[v+16&4095],p+=h*(this.perlin[v+16+1&4095]-p),f+=c*(p-f),v+=256,p=this.perlin[v&4095],p+=h*(this.perlin[v+1&4095]-p),m=this.perlin[v+16&4095],m+=h*(this.perlin[v+16+1&4095]-m),p+=c*(m-p),f+=_9(l)*(p-f),u+=f*d,d*=B4e,r<<=1,n*=2,s<<=1,o*=2,a<<=1,l*=2,n>=1&&(r++,n--),o>=1&&(s++,o--),l>=1&&(a++,l--)}return u}noiseSeed(e){let t=(()=>{let i,r;return{setSeed(s){r=i=(s??Math.random()*4294967296)>>>0},getSeed(){return i},rand(){return r=(1664525*r+1013904223)%4294967296,r/4294967296}}})();t.setSeed(e),this.perlin=new Array(4096);for(let i=0;i<4096;i++)this.perlin[i]=t.rand()}},F4e=k4e,$T=new E,eP=new Fe,tP=new n0;function iP(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&(r.geometry.type==="TextGeometry"||r.geometry.type==="InputGeometry")&&(t=!0)}),t}var N_=class extends Ir{constructor(e,t,i){super(e,t,i),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){let e=this.dataPatched;return this.font?.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign)??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){return(this.font?.ascender??1)*this.fontScale}get descender(){return(this.font?.descender??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:i}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(eP.copy(i).invert(),tP.copy(e.ray).applyMatrix4(eP),tP.intersectBox(this.singleBBox,$T))){let r=$T.applyMatrix4(i),s=e.ray.origin.distanceTo(r);t.push({distance:s,point:r.clone(),object:this})}}},q1=1e-4,vn,yN,xN,bN,rP=new E,sP=new E;PF.then(e=>{vn=e,yN=[vn.get_face_center,vn.get_edge_midpoint,vn.get_vertex_position],xN=[vn.get_face_normal,vn.get_edge_normal,vn.get_vertex_normal],bN=[vn.face_count,vn.edge_count,vn.vertex_count]});var N4e=new Fe,U4e=new Fe,bl=new E,Qp=new E,$0=new E,S9=new E,V4e=new E,j4e=new E,G4e=class{constructor(e,t){this.data=e,this.is3D=t,this.perlin=new F4e,e.noiseType==="perlin"?(this.perlin.noiseSeed(e.seed),t?this.noise=(i,r,s)=>this.perlin.noise(i,r,s):this.noise=i=>this.perlin.noise(i)):t?this.noise=vpe((0,Sx.default)(e.seed)):this.noise=gpe((0,Sx.default)(e.seed))}},va=class extends b_(yi){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.random=null,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof _1&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof _1&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"){if(!this.parameters.toObject.object)t=0;else if(e===void 0&&this.parameters.toObject.spreadType!=="random")return}if(this.parameters.type==="toObject"&&this.objectForSample){let i=this.children;if(i.length===t)return;if(i.length<t)for(let r=0,s=t-i.length;r<s;++r){let a=new _1(this.object);a.expand(),this.add(a)}else for(let r=0,s=i.length-t;r<s;++r)this.remove(i[r])}else{if(this.children.length===t)return;if(this.children.length<t)for(let i=0,r=t-this.children.length;i<r;++i){let s=new _1(this.object);s.expand(),this.add(s)}else for(let i=0,r=this.children.length-t;i<r;++i)this.remove(this.children[i])}}getRandom(e,t=!1){return(this.random===null||this.random.data.seed!==e.seed||this.random.is3D!==t)&&(this.random=new G4e(e,t)),this.random}_updateRadial(e){let t=e.radial,i=t.start*Ke.DEG2RAD,r=t.end*Ke.DEG2RAD,s=i-r,a=new Vr(t.rotation[0],t.rotation[1],t.rotation[2]),n;switch(t.axis){case"z":n=new E(0,0,1);break;case"y":n=new E(0,1,0);break;default:case"x":n=new E(1,0,0);break}let o=e.randomnessObject??Yl.defaultData([1,1,1]).randomnessObject,l=this.getRandom(o),h=Xp(o.strength,this.parameters.randomness);for(let[c,u]of this.children.entries()){let d=c*(o.freqScale/10)+o.movement,f=l.noise(d,d,d),p=c+1;u.scale.x=t.scale[0]+h(p,Ot(f,o.scale[0]))||q1,u.scale.y=t.scale[1]+h(p,Ot(f,o.scale[1]))||q1,u.scale.z=t.scale[2]+h(p,Ot(f,o.scale[2]))||q1,u.position.setScalar(0);let m=s/e.count*c-i;switch(t.axis){case"x":u.rotation.set(0,m,0);break;case"y":u.rotation.set(0,0,m);break;case"z":u.rotation.set(m,0,0);break}u.translateOnAxis(n,t.radius),u.position.x+=t.position[0]+h(p,Ot(f,o.position[0])),u.position.y+=t.position[1]+h(p,Ot(f,o.position[1])),u.position.z+=t.position[2]+h(p,Ot(f,o.position[2]));let g=h(p,Ot(f,o.rotation[0])),v=h(p,Ot(f,o.rotation[1])),y=h(p,Ot(f,o.rotation[2]));t.alignment===!0?(u.rotation.x+=a.x+g,u.rotation.y+=a.y+v,u.rotation.z+=a.z+y):u.rotation.set(a.x+g,a.y+v,a.z+y)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,i=new Vr(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??Yl.defaultData([1,1,1]).randomnessObject,s=this.getRandom(r),a=Xp(r.strength,this.parameters.randomness);for(let[n,o]of this.children.entries()){let l=n*(r.freqScale/10)+r.movement,h=s.noise(l,l,l),c=n+1,u=a(c,Ot(h,r.rotation[0])),d=a(c,Ot(h,r.rotation[1])),f=a(c,Ot(h,r.rotation[2]));o.scale.x=1+(t.scale[0]-1)*n+a(c,Ot(h,r.scale[0]))||q1,o.scale.y=1+(t.scale[1]-1)*n+a(c,Ot(h,r.scale[1]))||q1,o.scale.z=1+(t.scale[2]-1)*n+a(c,Ot(h,r.scale[2]))||q1,o.rotation.x=i.x*n+u,o.rotation.y=i.y*n+d,o.rotation.z=i.z*n+f,o.position.x=t.position[0]*n+a(c,Ot(h,r.position[0])),o.position.y=t.position[1]*n+a(c,Ot(h,r.position[1])),o.position.z=t.position[2]*n+a(c,Ot(h,r.position[2]))}}_updateGrid(e){let t=0,i=e.grid,r=e.randomnessObject??Yl.defaultData([1,1,1]).randomnessObject,s=this.getRandom(r,!0),a=Xp(r.strength,this.parameters.randomness);if(i.useCenter===!0){let n={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},o=new E(i.size[0]*(i.count[0]-n.x)*.5,i.size[1]*(i.count[1]-n.y)*.5,i.size[2]*(i.count[2]-n.z)*.5);for(let l=0;l<i.count[0];l++)for(let h=0;h<i.count[1];h++)for(let c=0;c<i.count[2];c++){let u=s.noise((l+1)*(r.freqScale/10)+r.movement,(h+1)*(r.freqScale/10)+r.movement,(c+1)*(r.freqScale/10)+r.movement),d=this.children[t++];d.scale.x=1+a(t,Ot(u,r.scale[0]))||q1,d.scale.y=1+a(t,Ot(u,r.scale[1]))||q1,d.scale.z=1+a(t,Ot(u,r.scale[2]))||q1;let f=a(t,Ot(u,r.rotation[0])),p=a(t,Ot(u,r.rotation[1])),m=a(t,Ot(u,r.rotation[2]));d.rotation.set(f,p,m),d.position.x=i.size[0]*l-o.x+a(t,Ot(u,r.position[0])),d.position.y=i.size[1]*h-o.y+a(t,Ot(u,r.position[1])),d.position.z=i.size[2]*c-o.z+a(t,Ot(u,r.position[2]))}}else for(let n=0;n<i.count[0];n++)for(let o=0;o<i.count[1];o++)for(let l=0;l<i.count[2];l++){let h=s.noise((n+1)*(r.freqScale/10)+r.movement,(o+1)*(r.freqScale/10)+r.movement,(l+1)*(r.freqScale/10)+r.movement),c=this.children[t++];c.scale.x=1+a(t,Ot(h,r.scale[0]))||q1,c.scale.y=1+a(t,Ot(h,r.scale[1]))||q1,c.scale.z=1+a(t,Ot(h,r.scale[2]))||q1;let u=a(t,Ot(h,r.rotation[0])),d=a(t,Ot(h,r.rotation[1])),f=a(t,Ot(h,r.rotation[2]));c.rotation.set(u,d,f),c.position.x=i.size[0]*n+a(t,Ot(h,r.position[0])),c.position.y=-i.size[1]*o+a(t,Ot(h,r.position[1])),c.position.z=-i.size[2]*l+a(t,Ot(h,r.position[2]))}}_updateToObject(e){if(e.type!=="toObject")throw new Error;let{toObject:t}=e,i=new Vr(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??Yl.defaultData([1,1,1]).randomnessObject,s=this.getRandom(r),a=Xp(r.strength,this.parameters.randomness);if(!t.object){for(let[,c]of this.children.entries())c.position.set(0,0,0),c.scale.setScalar(1),c.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof N_)if(!this.objectForSample.font?.isLoaded||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let n=this.getSubdivData();if(n.length>0){let c=Math.round(n.length*t.count/100);this._updateCount(c)}else{let c=this.objectForSample.geometry.getAttribute("position");if(!c||isNaN(c.count)||c.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let o=new ype(this.objectForSample).build(),l=T4e[t.axis],h=this.children;o.setRandomGenerator((0,Sx.default)(this.object.uuid+t.seed));for(let[c,u]of h.entries()){let d=c*(r.freqScale/10)+r.movement,f=s.noise(d,d,d),p=c+1,m=a(p,Ot(f,r.rotation[0])),g=a(p,Ot(f,r.rotation[1])),v=a(p,Ot(f,r.rotation[2]));t.spreadType==="random"?o.sample($0,S9):(n.length&&($0.fromArray(n[c].pos),S9.fromArray(n[c].norm)),this.objectForSample instanceof Zd&&$0.applyMatrix4(N4e.copy(this.objectForSample.matrixWorld).invert())),$0.applyMatrix4(this.object.hiddenMatrix.clone().invert()),u.position.copy($0),bl.fromArray(l);let y=t.align==="normal"?S9:this.object.getWorldDirection(j4e),x=Qp.fromArray(t.position);Qp.x+=a(p,Ot(f,r.position[0])),Qp.y+=a(p,Ot(f,r.position[1])),Qp.z+=a(p,Ot(f,r.position[2]));let w=Math.acos(y.dot(bl)),_=V4e.crossVectors(bl,y).normalize(),b=U4e.makeRotationAxis(_,w),M=y.clone().cross(this.object.up).normalize(),S=M.clone().cross(y).normalize(),A=new Fe().makeBasis(M,y,S),C=new E(bl.y,bl.z,bl.x).normalize(),T=C.clone().cross(bl).normalize(),D=new Fe().makeBasis(C,bl,T).invert(),R=new Fe().multiplyMatrices(A,D);u.rotation.setFromRotationMatrix(R),x.applyMatrix4(b),u.position.add(x),u.rotation.x=u.rotation.x+i.x+m,u.rotation.y=u.rotation.y+i.y+g,u.rotation.z=u.rotation.z+i.z+v,u.scale.setScalar(1),u.scale.x=u.scale.x+t.scale[0]+a(p,Ot(f,r.scale[0]))||q1,u.scale.y=u.scale.y+t.scale[1]+a(p,Ot(f,r.scale[1]))||q1,u.scale.z=u.scale.z+t.scale[2]+a(p,Ot(f,r.scale[2]))||q1,u.scale.multiply(this.object.scale),u.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType,t=new Map,i=(s,a)=>{let n=Math.round(s[0]*1e4)+"_"+Math.round(s[1]*1e4)+"_"+Math.round(s[2]*1e4),o=t.get(n);o?(o.pos[0]+=s[0],o.pos[1]+=s[1],o.pos[2]+=s[2],o.norm[0]+=a[0],o.norm[1]+=a[1],o.norm[2]+=a[2],o.count+=1):t.set(n,{pos:[...s],norm:[...a],count:1})};if(e==="random")return[];if(this.objectForSample instanceof Zd){let s=this.objectForSample,a=P4e[e],n=bN[a],o=yN[a],l=xN[a],h=n(s.subdivPointerNew);for(let c=0;c<=h-1;c++){let u=o(s.subdivPointerNew,c),d=l(s.subdivPointerNew,c);rP.fromArray(u).applyMatrix4(s.matrixWorld),sP.fromArray(d),i(rP.toArray(),sP.toArray())}}else(this.objectForSample.geometry.index?R4e(this.objectForSample.geometry):L4e(this.objectForSample.geometry)).forEach((s,a)=>{e==="polygon_center"&&i(s.midpoint,s.norm),e==="vertex"&&(i(s.vertices[0],s.norm),i(s.vertices[1],s.norm),i(s.vertices[2],s.norm)),e==="edge"&&(i(s.faceCenters[0],s.norm),i(s.faceCenters[1],s.norm),i(s.faceCenters[2],s.norm))});let r=Array.from(t.values());for(let s of r)s.pos[0]/=s.count,s.pos[1]/=s.count,s.pos[2]/=s.count,s.norm[0]/=s.count,s.norm[1]/=s.count,s.norm[2]/=s.count;return r}updateState(e,t){if(this.parameters=Kv(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),this.object.parent?.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let i=t.find(this.parameters.toObject.object);i instanceof ns?this.objectForSample=i:this.objectForSample=void 0,this.matrix=new Fe,this.hiddenMatrix=new Fe,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,i&&i.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},Sf=e=>{var t;return t=class extends e{},t.geometryHelper=new sn(30,30,30),t},Zp=new n0,A9=new Cs,aP=new Fe,Af=(e,t,i,r,s=!1,a=e)=>{let n=t,o=a.matrixWorld;if(n.boundingSphere===null&&n.computeBoundingSphere(),A9.copy(n.boundingSphere),A9.applyMatrix4(o),i.ray.intersectsSphere(A9)===!1||(aP.copy(o).invert(),Zp.copy(i.ray).applyMatrix4(aP),n.boundingBox!==null&&Zp.intersectsBox(n.boundingBox)===!1))return;let l,h,c,u,d=n.index,f=n.attributes.position,p=n.drawRange,m,g;if(s===!1){let y=Math.max(0,p.start),x=Math.min(d.count,p.start+p.count);for(m=y,g=x;m<g;m+=3)if(h=d.getX(m),c=d.getX(m+1),u=d.getX(m+2),l=v(e,i,Zp,f,h,c,u),l){l.faceIndex=Math.floor(m/3),r.push(l);return}}else{let y=n.attributes.position,x=new E,w=new E,_=new E,b=new E,M=2,S=1/((a.scale.x+a.scale.y+a.scale.z)/3),A=S*S,C=Math.max(0,p.start),T=Math.min(y.count,p.start+p.count);for(let D=C,R=T-1;D<R;D+=M){if(x.fromBufferAttribute(y,D),w.fromBufferAttribute(y,D+1),Zp.distanceSqToSegment(x,w,b,_)>A)continue;b.applyMatrix4(a.matrixWorld);let O=i.ray.origin.distanceTo(b);O<i.near||O>i.far||r.push({distance:O,point:_.clone().applyMatrix4(a.matrixWorld),object:e})}}function v(y,x,w,_,b,M,S){let A=new E,C=new E,T=new E,D=new E,R=new E;if(A.fromBufferAttribute(_,b),C.fromBufferAttribute(_,M),T.fromBufferAttribute(_,S),w.intersectTriangle(A,C,T,!1,D)===null)return null;R.copy(D),R.applyMatrix4(y.matrixWorld);let O=x.ray.origin.distanceTo(R);return O<x.near||O>x.far?null:{faceIndex:1,distance:O,point:R.clone(),object:y}}},Jp=new E,ia=new Ch,H4e=class extends pf{constructor(e){let t=new rt,i=new Eh({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={},n=new pt(15711266),o=new pt(15711266),l=new pt(2857471);h("n1","n2",n),h("n2","n4",n),h("n4","n3",n),h("n3","n1",n),h("f1","f2",n),h("f2","f4",n),h("f4","f3",n),h("f3","f1",n),h("n1","f1",n),h("n2","f2",n),h("n3","f3",n),h("n4","f4",n),h("p","n1",o),h("p","n2",o),h("p","n3",o),h("p","n4",o),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l);function h(u,d,f){c(u,f),c(d,f)}function c(u,d){r.push(0,0,0),s.push(d.r,d.g,d.b),a[u]===void 0&&(a[u]=[]),a[u].push(r.length/3-1)}t.setAttribute("position",new Xe(r,3)),t.setAttribute("color",new Xe(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){let e=this.geometry,t=this.pointMap;ia.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let i=1,r=1,s=.8;za("n1",t,e,ia,-i,-r,s),za("n2",t,e,ia,i,-r,s),za("n3",t,e,ia,-i,r,s),za("n4",t,e,ia,i,r,s);let a=s;za("f1",t,e,ia,-i,-r,a),za("f2",t,e,ia,i,-r,a),za("f3",t,e,ia,-i,r,a),za("f4",t,e,ia,i,r,a);let n=a,o=.5;za("u1",t,e,ia,i*.7*o,r*1.1,n),za("u2",t,e,ia,-i*.7*o,r*1.1,n),za("u3",t,e,ia,0,r*(1.1+.9*o),n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function za(e,t,i,r,s,a,n){Jp.set(s,a,n).unproject(r);let o=t[e];if(o!==void 0){let l=i.getAttribute("position");for(let h=0,c=o.length;h<c;h++)l.setXYZ(o[h],Jp.x,Jp.y,Jp.z)}}var W4e=class extends Sf(H4e){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){Af(this.object,this.geometry,e,t,!0)}},Nx;(e=>e.is=t=>"objectHelper"in t)(Nx||(Nx={}));var w0=(e,t)=>class extends w_(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(i,r){this.objectHelper.raycast(i,r)}showGizmos(){for(let i in this.gizmos){let r=this.gizmos[i];r instanceof Eg&&(r.visible=!0)}}updateEntityBoxSize(i,r){this.objectHelper.visible&&this.geometryHelper instanceof sn?(i.setScalar(0),r.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(i,r)}hideGizmos(){for(let i in this.gizmos){let r=this.gizmos[i];r instanceof Eg&&(r.visible=!1)}}},$p=790,C2=new E,M9=new E,C9=new wt,E9=new E,e3=new E,T9=new E,V1=class extends w0(Ch,W4e){constructor(e="",t={...Gd.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=Hu.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new Fe,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let i=this.width,r=this.height;this.orthoCamera=new Nv(i*-.5,i*.5,r*.5,r*-.5,-5e4,1e4),this.perspCamera=new z1(45,i/r,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,i){typeof e=="number"&&(e=new E(e,t,i)),super.lookAt(e),this.getWorldPosition(C2),this.targetOffset=C2.distanceTo(e)}getTarget(e=new E){return this.getWorldDirection(M9),this.getWorldPosition(C2),M9.multiplyScalar(this.targetOffset),e.copy(C2).add(M9),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(C2),C2.distanceTo(e)}updateUp(){this.getWorldQuaternion(C9),E9.set(0,0,1).applyQuaternion(C9),e3.copy(yi.DEFAULT_UP),this.isUpVectorFlipped&&e3.negate(),e3.applyQuaternion(C9),T9.copy(yi.DEFAULT_UP).projectOnPlane(E9),this.angleOffsetFromUp=T9.angleTo(e3),this.angleOffsetFromUp*=T9.cross(e3).dot(E9)>=0?1:-1}updateTransformState(e,t){let i=super.updateTransformState(e,t);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),i}getViewFrontToObject(e){let t=e.getWorldPosition(new E),i=e.getWorldDirection(new E).multiplyScalar(this.targetOffset);return{position:t.clone().add(i),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new E).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new E;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,i=!1){if(this.aspect=e/t,i){let r=e>t?this.aspect:1,s=e>t?1:this.aspect;this.left=-$p*.5*r,this.right=$p*.5*r,this.top=$p*.5*(1/s),this.bottom=-$p*.5*(1/s)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,i,r,s,a){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,i,r,s,a):this.orthoCamera.setViewOffset(e,t,i,r,s,a)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return D6(t,e)}updateCameraSubtype(e,t){let i=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(i,t.zoom),t.near!==void 0&&this.setNear(i,t.near),t.fov!==void 0&&i==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},E2=new Fe,q4e=new Fe;function nP(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.geometry?.type==="BooleanGeometry"&&(t=!0)}),t}var Vc=class extends b0{constructor(e,t,i){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new rt,this.onAfterRender=(r,s,a,n,o,l)=>{super.onAfterRender(r,s,a,n,o,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){if(this.booleanMeshSetAddress!==-1&&!e)return;for(let r=0;r<this.children.length;r++){let s=this.children[r];s instanceof Vc&&s.dataPatched.visible===!0&&s.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let r=0;r<this.children.length;r++){let s=this.children[r];if(s instanceof ns&&s.dataPatched.visible===!0&&s.geometry.attributes.position?.count>0&&s.geometry.drawRange.count>0&&s.booleanMeshSetAddress!==0){E2.multiplyMatrices(s.hiddenMatrix,s.matrix);try{if(s.booleanMeshSetAddress===-1){if((s.geometry.index??s.geometry.getAttribute("position")).count/3<15e5&&(s.booleanMeshSetAddress=Ao.getMeshSet(s.geometry,e===!0,t)),s.booleanMeshSetAddress===-1)return;Ao.transformMeshSet(s.booleanMeshSetAddress,E2),s.booleanMatrixInvOld.copy(E2).invert(),s.booleanWasTransformed=!1}else s instanceof Vc&&s.needsTransformForDownstream===!0?(Ao.transformMeshSet(s.booleanMeshSetAddress,E2),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&(Ao.transformMeshSet(s.booleanMeshSetAddress,q4e.multiplyMatrices(E2,s.booleanMatrixInvOld)),s.booleanMatrixInvOld.copy(E2).invert(),s.booleanWasTransformed=!1)}catch(a){console.error(a),s.booleanMeshSetAddress=0,s.geometry.userData.booleanOperationDidFail=!0;continue}Ao.hasOpenEdges(s.booleanMeshSetAddress)===!1||r===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(s.booleanMeshSetAddress),s.geometry.userData.booleanOperationDidFail=!1):s.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new Xe([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Ao.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let i=this.geometry;i.dispose(),this.geometry=new rt,this.geometry.userData=i.userData,this.geometry.boundingSphere=i.boundingSphere;try{this.booleanMeshSetAddress=Ao.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(r){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(r)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,k_(this),F_(this)}dispose(){super.dispose(),this.geometry.dispose()}},Ux;(e=>{function t(i){return Zt.is(i)&&i instanceof vf}e.is=t})(Ux||(Ux={}));var U_=(e,t)=>class extends w0(e,t){updateState_Light(i,r){this.updateState_Entity(i,r),i.color!==void 0&&(this.color=r.shared.color(i.color)),i.intensity!==void 0&&(this.intensity=i.intensity),i.depth!==void 0&&(this.shadow.camera.far=i.depth,this.shadow.needsUpdate=!0),i.shadows!==void 0&&(this.castShadow=i.shadows)}},ja=e=>e instanceof ns,jo=e=>e!==null&&e instanceof Vc,X4e=e=>e instanceof V1,Y4e=e=>Ux.is(e),Vx=e=>Nx.is(e),K4e=new E(1,1,1),oP=new E,Q4e=new E,lP=new wt,Mf=class extends Sf($ae){constructor(e,t=15){super(t),this.object=e,this.dummy=new No,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=this.dummy.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){Af(this.object,Mf.geometryHelper,e,t,!1,this.dummy)}update(){}updateMatrix(){}updateMatrixWorld(e){this.object.matrixWorld.decompose(oP,lP,Q4e),this.matrix.compose(oP,lP,K4e),super.updateMatrixWorld(e)}updateWorldMatrix(e,t){}},Su=class extends w0(No,Mf){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&Object.keys(e).length===1&&t.scene.reloadSplats()}},td=class extends w0(No,Mf){constructor(e,t,i){super(),this.super_Entity(e,t),this.context=i,this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},wN={RED:0,GREEN:1},Cf="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Z4e=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;uniform vec4 kernel64[32];varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;}}`,em=class extends ti{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new Re(null),kernel16:new Re(null),inputBuffer:new Re(null),cocBuffer:new Re(null),texelSize:new Re(new re),scale:new Re(1)},blending:Or,depthWrite:!1,depthTest:!1,fragmentShader:Z4e,vertexShader:Cf}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),i=new Float32Array(32),r=0,s=0;for(let o=0;o<80;++o){let l=o*e,h=Math.sqrt(o)/Math.sqrt(80),c=h*Math.cos(l),u=h*Math.sin(l);o%5===0?(i[s++]=c,i[s++]=u):(t[r++]=c,t[r++]=u)}let a=[],n=[];for(let o=0;o<128;)a.push(new Mt(t[o++],t[o++],t[o++],t[o++]));for(let o=0;o<32;)n.push(new Mt(i[o++],i[o++],i[o++],i[o++]));this.uniforms.kernel64.value=a,this.uniforms.kernel16.value=n}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function hP(e,t,i){return e*(t-i)-t}function jx(e,t,i){return Math.min(Math.max((e+t)/(t-i),0),1)}var J4e=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,$4e=class extends ti{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Re(null),focusDistance:new Re(0),focusRange:new Re(0),cameraNear:new Re(.3),cameraFar:new Re(1e3)},blending:Or,depthWrite:!1,depthTest:!1,fragmentShader:J4e,vertexShader:Cf}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=ol){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-hP(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=jx(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-hP(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=jx(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof z1?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},eye=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,tye="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",cP=class extends ti{constructor(e=new re){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Re(null),texelSize:new Re(new re),halfTexelSize:new Re(new re),kernel:new Re(0),scale:new Re(1)},blending:Or,depthWrite:!1,depthTest:!1,fragmentShader:eye,vertexShader:tye}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.halfTexelSize.value.copy(i.texelSize.value).multiplyScalar(.5)}},iye=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,rye=class extends ti{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Re(null),opacity:new Re(1)},blending:Or,depthWrite:!1,depthTest:!1,fragmentShader:iye,vertexShader:Cf}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},sye=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,aye=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,a4={COLOR:2},nye={DISABLED:0},oye=class extends ti{constructor(e=new re,t=a4.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:a0.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Re(null),depthBuffer:new Re(null),predicationBuffer:new Re(null),texelSize:new Re(e)},blending:Or,depthWrite:!1,depthTest:!1,fragmentShader:sye,vertexShader:aye}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=ol){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},lye=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,hye="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Ba={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Gx=class extends ti{constructor(e,t,i,r,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:a0.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Re(null),depthBuffer:new Re(null),resolution:new Re(new re),texelSize:new Re(new re),cameraNear:new Re(.3),cameraFar:new Re(1e3),aspect:new Re(1),time:new Re(0)},blending:Or,depthWrite:!1,depthTest:!1,dithering:s}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),i&&this.setUniforms(i),this.adoptCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=ol){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=lye.replace(Ba.FRAGMENT_HEAD,e.get(Ba.FRAGMENT_HEAD)).replace(Ba.FRAGMENT_MAIN_UV,e.get(Ba.FRAGMENT_MAIN_UV)).replace(Ba.FRAGMENT_MAIN_IMAGE,e.get(Ba.FRAGMENT_MAIN_IMAGE)),this.vertexShader=hye.replace(Ba.VERTEX_HEAD,e.get(Ba.VERTEX_HEAD)).replace(Ba.VERTEX_MAIN_SUPPORT,e.get(Ba.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof z1?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let i=this.uniforms;i.resolution.value.set(e,t),i.texelSize.value.set(1/e,1/t),i.aspect.value=e/t}static get Section(){return Ba}},cye=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,uye=class extends ti{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:a0.replace(/\D+/g,"")},uniforms:{inputBuffer:new Re(null),threshold:new Re(0),smoothing:new Re(1),range:new Re(null)},blending:Or,depthWrite:!1,depthTest:!1,fragmentShader:cye,vertexShader:Cf}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},dye=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,_N={DISCARD:0,MULTIPLY:1},fye=class extends ti{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Re(e),inputBuffer:new Re(null),strength:new Re(1)},blending:Or,depthWrite:!1,depthTest:!1,fragmentShader:dye,vertexShader:Cf}),this.toneMapped=!1,this.setColorChannel(wN.RED),this.setMaskFunction(_N.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==j1&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},pye=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,mye="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",gye=class extends ti{constructor(e=new re,t=new re){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Re(null),searchTexture:new Re(null),areaTexture:new Re(null),resolution:new Re(t),texelSize:new Re(e)},blending:Or,depthWrite:!1,depthTest:!1,fragmentShader:pye,vertexShader:mye}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.resolution.value.set(e,t)}},vye=new Ch,wl=null;function yye(){if(wl===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);wl=new rt,wl.setAttribute!==void 0?(wl.setAttribute("position",new mt(e,3)),wl.setAttribute("uv",new mt(t,2))):(wl.addAttribute("position",new mt(e,3)),wl.addAttribute("uv",new mt(t,2)))}return wl}var os=class{constructor(t="Pass",i=new As,r=vye){this.name=t,this.renderer=null,this.scene=i,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){let i=this.getFullscreenMaterial();i!==null&&(i.needsUpdate=!0),this.rtt=!t}}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let i=this.screen;i!==null?i.material=t:(i=new zi(yye(),t),i.frustumCulled=!1,this.scene===null&&(this.scene=new As),this.scene.add(i),this.screen=i)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,i=ol){}render(t,i,r,s,a){throw new Error("Render method not implemented!")}setSize(t,i){}initialize(t,i,r){}dispose(){for(let t of Object.keys(this)){let i=this[t];if(i!==null&&typeof i=="object"&&typeof i.dispose=="function"){if(i instanceof As||i===this.renderer)continue;this[t].dispose()}}}},Hx=class extends os{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new rye,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new ei(1,1,{minFilter:Bt,magFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,i,r,s){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,i){i!==void 0&&(this.renderTarget.texture.type=i,i!==j1?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===Rt&&(this.renderTarget.texture.encoding=Rt))}},xye=class extends os{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,i,r,s){let a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},P9=new pt,V_=class extends os{constructor(e=!0,t=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,i){this.color=e,this.depth=t,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,i,r,s){let a=this.overrideClearColor,n=this.overrideClearAlpha,o=e.getClearAlpha(),l=a!==null,h=n>=0;l?(P9.copy(e.getClearColor(P9)),e.setClearColor(a,h?n:o)):h&&e.setClearAlpha(n),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(P9,o):h&&e.setClearAlpha(o)}},_l=-1,ys=class extends C1{constructor(e,t=_l,i=_l,r=1){super(),this.resizable=e,this.base=new re(1,1),this.preferred=new re(t,i),this.target=this.preferred,this.s=r}get width(){let{base:e,preferred:t,scale:i}=this,r;return t.width!==_l?r=t.width:t.height!==_l?r=Math.round(t.height*(e.width/Math.max(e.height,1))):r=Math.round(e.width*i),r}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:i}=this,r;return t.height!==_l?r=t.height:t.width!==_l?r=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r=Math.round(e.height*i),r}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(_l),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return _l}},D9=!1,uP=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let i;if(t.material.flatShading)switch(t.material.side){case N1:i=this.materialsFlatShadedDoubleSide;break;case r1:i=this.materialsFlatShadedBackSide;break;default:i=this.materialsFlatShaded;break}else switch(t.material.side){case N1:i=this.materialsDoubleSide;break;case r1:i=this.materialsBackSide;break;default:i=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=i[2]:t.isInstancedMesh?t.material=i[1]:t.material=i[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let i of t)i.uniforms=Object.assign({},e.uniforms),i.side=tn;t[2].skinning=!0,this.materialsBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=r1,r}),this.materialsDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=N1,r}),this.materialsFlatShaded=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=r1,r}),this.materialsFlatShadedDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=N1,r})}}render(e,t,i){let r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,D9){let s=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,i);for(let a of s)a[0].material=a[1];this.meshCount!==s.size&&s.clear()}else{let s=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,i),t.overrideMaterial=s}e.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return D9}static set workaroundEnabled(e){D9=e}},bye=class extends os{constructor(e,t,i=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new V_,this.overrideMaterialManager=i===null?null:new uP(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new uP(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,i,r,s){let a=this.scene,n=this.camera,o=this.selection,l=n.layers.mask,h=a.background,c=e.shadowMap.autoUpdate,u=this.renderToScreen?null:t;o!==null&&n.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(u),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,a,n):e.render(a,n),n.layers.mask=l,a.background=h,e.shadowMap.autoUpdate=c}},dP=class extends os{constructor(e,t,{resolutionScale:i=1,width:r=ys.AUTO_SIZE,height:s=ys.AUTO_SIZE,renderTarget:a}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new bye(e,t,new Qz({depthPacking:zz}));let n=this.renderPass;n.skipShadowMapUpdate=!0,n.ignoreBackground=!0;let o=n.getClearPass();o.overrideClearColor=new pt(16777215),o.overrideClearAlpha=1,this.renderTarget=a,this.renderTarget===void 0&&(this.renderTarget=new ei(1,1,{minFilter:jt,magFilter:jt,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new ys(this,r,s,i);l.addEventListener("change",h=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,s){let a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}},ri={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},wye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",_ye="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",Sye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",Aye="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Mye="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Cye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Eye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Tye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Pye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Dye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Iye="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Oye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Rye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Lye="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",zye="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Bye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",kye="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Fye="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",Nye=new Map([[ri.SKIP,null],[ri.ADD,wye],[ri.ALPHA,_ye],[ri.AVERAGE,Sye],[ri.COLOR_BURN,Aye],[ri.COLOR_DODGE,Mye],[ri.DARKEN,Cye],[ri.DIFFERENCE,Eye],[ri.EXCLUSION,Tye],[ri.LIGHTEN,Pye],[ri.MULTIPLY,Dye],[ri.DIVIDE,Iye],[ri.NEGATION,Oye],[ri.NORMAL,Rye],[ri.OVERLAY,Lye],[ri.REFLECT,zye],[ri.SCREEN,Bye],[ri.SOFT_LIGHT,kye],[ri.SUBTRACT,Fye]]),Uye=class extends C1{constructor(e,t=1){super(),this.f=e,this.opacity=new Re(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return Nye.get(this.blendFunction)}},qn={NONE:0,DEPTH:1,CONVOLUTION:2},to=class extends C1{constructor(e,t,{attributes:i=qn.NONE,blendFunction:r=ri.SCREEN,defines:s=new Map,uniforms:a=new Map,extensions:n=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=i,this.fragmentShader=t,this.vertexShader=o,this.defines=s,this.uniforms=a,this.extensions=n,this.blendMode=new Uye(r),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=ol){}update(e,t,i){}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof As||t===this.renderer)continue;this[e].dispose()}}}};function fP(e,t,i){for(let r of t){let s="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),a=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(let n of i.entries())n[1]!==null&&i.set(n[0],n[1].replace(a,s))}}function Vye(e,t,i,r,s,a,n){let o=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=o.get("fragment")!==void 0&&/mainImage/.test(o.get("fragment")),h=o.get("fragment")!==void 0&&/mainUv/.test(o.get("fragment")),c=[],u=[],d=!1,f=!1;if(o.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(h&&(n&qn.CONVOLUTION)!==0)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!h)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let p=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,m=Gx.Section;if(h){let v=`	${e}MainUv(UV);
`;i.set(m.FRAGMENT_MAIN_UV,i.get(m.FRAGMENT_MAIN_UV)+v),d=!0}if(o.get("vertex")!==null&&/mainSupport/.test(o.get("vertex"))){let v=`	${e}MainSupport(`;v+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o.get("vertex"))?`vUv);
`:`);
`,i.set(m.VERTEX_MAIN_SUPPORT,i.get(m.VERTEX_MAIN_SUPPORT)+v),c=c.concat([...o.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),u=u.concat(c).concat([...o.get("vertex").matchAll(p)].map(y=>y[1]))}u=u.concat([...o.get("fragment").matchAll(p)].map(v=>v[1])),u=u.concat([...t.defines.keys()].map(v=>v.replace(/\([\w\s,]*\)/g,""))),u=u.concat([...t.uniforms.keys()]),t.uniforms.forEach((v,y)=>a.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),t.defines.forEach((v,y)=>s.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),fP(e,u,s),fP(e,u,o);let g=t.blendMode;if(r.set(g.blendFunction,g),l){let v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${e}MainImage(color0, UV, `;(n&qn.DEPTH)!==0&&v.test(o.get("fragment"))&&(y+="depth, ",f=!0),y+=`color1);
	`;let x=e+"BlendOpacity";a.set(x,g.opacity),y+=`color0 = blend${g.blendFunction}(color0, color1, ${x});

	`,i.set(m.FRAGMENT_MAIN_IMAGE,i.get(m.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${x};

`,i.set(m.FRAGMENT_HEAD,i.get(m.FRAGMENT_HEAD)+y)}i.set(m.FRAGMENT_HEAD,i.get(m.FRAGMENT_HEAD)+o.get("fragment")+`
`),o.get("vertex")!==null&&i.set(m.VERTEX_HEAD,i.get(m.VERTEX_HEAD)+o.get("vertex")+`
`)}return{varyings:c,transformedUv:d,readDepth:f}}var cv=class extends os{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Gx(null,null,null,e),this.effects=t.sort((i,r)=>r.attributes-i.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=Gx.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),i=new Map,r=new Map,s=new Map,a=new Set,n=0,o=0,l=0,h=!1,c=!1;for(let d of this.effects)if(d.blendMode.blendFunction===ri.SKIP)l|=d.getAttributes()&qn.DEPTH;else if((l&d.getAttributes()&qn.CONVOLUTION)!==0)console.error("Convolution effects cannot be merged",d);else{l|=d.getAttributes();let f="e"+n++,p=Vye(f,d,t,i,r,s,l);if(o+=p.varyings.length,h=h||p.transformedUv,c=c||p.readDepth,d.extensions!==null)for(let m of d.extensions)a.add(m)}let u=/\bblend\b/g;for(let d of i.values()){let f=d.getShaderCode().replace(u,`blend${d.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+f+`
`)}(l&qn.DEPTH)!==0?(c&&t.set(e.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+t.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,h?(t.set(e.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+t.get(e.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")):r.set("UV","vUv"),t.forEach((d,f,p)=>p.set(f,d.trim().replace(/^#/,`
#`))),this.uniformCount=s.size,this.varyingCount=o,this.skipRendering=n===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(a).setUniforms(s).setDefines(r)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=ol){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let i of this.effects)i.setDepthTexture(e,t)}render(e,t,i,r,s){for(let a of this.effects)a.update(e,t,r);if(!this.skipRendering||this.renderToScreen){let a=this.fullscreenMaterial;a.inputBuffer=t.texture,a.time+=r,e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let i of this.effects)i.setSize(e,t)}initialize(e,t,i){this.renderer=e;for(let r of this.effects)r.initialize(e,t,i),r.addEventListener("change",s=>this.handleEvent(s));this.updateMaterial(),this.verifyResources(),i!==void 0&&i!==j1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},jye=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],j_=class extends os{constructor({resolutionScale:e=.5,width:t=ys.AUTO_SIZE,height:i=ys.AUTO_SIZE,kernelSize:r=n4.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new ei(1,1,{minFilter:Bt,magFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let s=this.resolution=new ys(this,t,i,e);s.addEventListener("change",a=>this.setSize(s.baseWidth,s.baseHeight)),this.blurMaterial=new cP,this.ditheredBlurMaterial=new cP,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=r}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,s){let a=this.scene,n=this.camera,o=this.renderTargetA,l=this.renderTargetB,h=jye[this.kernelSize],c=this.blurMaterial,u=t,d,f;for(this.fullscreenMaterial=c,d=0,f=h.length-1;d<f;++d){let p=(d&1)===0?o:l;c.kernel=h[d],c.inputBuffer=u.texture,e.setRenderTarget(p),e.render(a,n),u=p}this.dithering&&(c=this.ditheredBlurMaterial,this.fullscreenMaterial=c),c.kernel=h[d],c.inputBuffer=u.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(a,n)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,s=i.height;this.renderTargetA.setSize(r,s),this.renderTargetB.setSize(r,s),this.blurMaterial.setSize(r,s),this.ditheredBlurMaterial.setSize(r,s)}initialize(e,t,i){i!==void 0&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==j1?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===Rt&&(this.renderTargetA.texture.encoding=Rt,this.renderTargetB.texture.encoding=Rt))}static get AUTO_SIZE(){return ys.AUTO_SIZE}},Gye=class extends os{constructor({width:e=ys.AUTO_SIZE,height:t=ys.AUTO_SIZE,renderTarget:i,luminanceRange:r,colorOutput:s}={}){super("LuminancePass"),this.fullscreenMaterial=new uye(s,r),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new ei(1,1,{minFilter:Bt,magFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let a=this.resolution=new ys(this,e,t);a.addEventListener("change",n=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,i,r,s){let a=this.fullscreenMaterial;a.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}initialize(e,t,i){i!==void 0&&i!==j1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Hye=class extends os{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new V_(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,i,r,s){let a=e.getContext(),n=e.state.buffers,o=this.scene,l=this.camera,h=this.clearPass,c=this.inverted?0:1,u=1-c;n.color.setMask(!1),n.depth.setMask(!1),n.color.setLocked(!0),n.depth.setLocked(!0),n.stencil.setTest(!0),n.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),n.stencil.setFunc(a.ALWAYS,c,4294967295),n.stencil.setClear(u),n.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?h.render(e,null):(h.render(e,t),h.render(e,i))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(i),e.render(o,l)),n.color.setLocked(!1),n.depth.setLocked(!1),n.stencil.setLocked(!1),n.stencil.setFunc(a.EQUAL,1,4294967295),n.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),n.stencil.setLocked(!0)}},ua=class extends os{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,i,r,s){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}initialize(e,t,i){i!==void 0&&i!==j1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},I9=1/1e3,Wye=1e3,qye=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*I9}getFixedDelta(){return this.fixedDelta*I9}setFixedDelta(e){return this.fixedDelta=e*Wye,this}getElapsed(){return this.elapsed*I9}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},n4={MEDIUM:2,LARGE:3,HUGE:5},Xye=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,Yye=class extends to{constructor({blendFunction:e=ri.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:i=.025,resolutionScale:r=.5,intensity:s=1,width:a=ys.AUTO_SIZE,height:n=ys.AUTO_SIZE,kernelSize:o=n4.LARGE}={}){super("BloomEffect",Xye,{blendFunction:e,uniforms:new Map([["map",new Re(null)],["intensity",new Re(s)]])}),this.renderTarget=new ei(1,1,{minFilter:Bt,magFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new Gye({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=i,this.blurPass=new j_({resolutionScale:r,width:a,height:n,kernelSize:o});let l=this.blurPass.getResolution();l.addEventListener("change",h=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,i){let r=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,r),this.blurPass.render(e,r,r)):this.blurPass.render(e,t,r)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.luminancePass.resolution.copy(i)}initialize(e,t,i){this.blurPass.initialize(e,t,i),i!==void 0&&(this.renderTarget.texture.type=i,e.outputEncoding===Rt&&(this.renderTarget.texture.encoding=Rt))}},Kye="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",Qye=class extends to{constructor({blendFunction:e=ri.NORMAL,brightness:t=0,contrast:i=0}={}){super("BrightnessContrastEffect",Kye,{blendFunction:e,uniforms:new Map([["brightness",new Re(t)],["contrast",new Re(i)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},Zye="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",Jye=class extends to{constructor(e=ri.NORMAL){super("ColorAverageEffect",Zye,{blendFunction:e})}},$ye="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",e9e="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",t9e=class extends to{constructor({blendFunction:e=ri.NORMAL,offset:t=new re(.001,5e-4)}={}){super("ChromaticAberrationEffect",$ye,{vertexShader:e9e,blendFunction:e,attributes:qn.CONVOLUTION,uniforms:new Map([["offset",new Re(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},i9e=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,r9e=class extends to{constructor(e,{blendFunction:t=ri.NORMAL,worldFocusDistance:i,worldFocusRange:r,focusDistance:s=0,focalLength:a=.1,focusRange:n=a,bokehScale:o=1,width:l=ys.AUTO_SIZE,height:h=ys.AUTO_SIZE}={}){super("DepthOfFieldEffect",i9e,{blendFunction:t,attributes:qn.DEPTH,uniforms:new Map([["nearColorBuffer",new Re(null)],["farColorBuffer",new Re(null)],["nearCoCBuffer",new Re(null)],["scale",new Re(1)]])}),this.camera=e,this.renderTarget=new ei(1,1,{minFilter:Bt,magFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new ua(new $4e(e));let c=this.cocMaterial;c.focusDistance=s,c.focusRange=n,i!==void 0&&(c.worldFocusDistance=i),r!==void 0&&(c.worldFocusRange=r),this.blurPass=new j_({kernelSize:n4.MEDIUM,width:l,height:h});let u=this.blurPass.getResolution();u.addEventListener("change",f=>this.setSize(u.getBaseWidth(),u.getBaseHeight())),this.maskPass=new ua(new fye(this.renderTargetCoC.texture));let d=this.maskPass.fullscreenMaterial;d.maskFunction=_N.MULTIPLY,d.colorChannel=wN.GREEN,this.bokehNearBasePass=new ua(new em(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new ua(new em(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new ua(new em(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new ua(new em(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=o}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let i of t)i.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,i=t.position.distanceTo(e);return jx(-i,t.near,t.far)}setDepthTexture(e,t=ol){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,i){let r=this.renderTarget,s=this.renderTargetCoC,a=this.renderTargetCoCBlurred,n=this.renderTargetMasked;if(this.target!==null){let o=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=o}this.cocPass.render(e,null,s),this.blurPass.render(e,s,a),this.maskPass.render(e,t,n),this.bokehFarBasePass.render(e,n,r),this.bokehFarFillPass.render(e,r,this.renderTargetFar),this.bokehNearBasePass.render(e,t,r),this.bokehNearFillPass.render(e,r,this.renderTargetNear)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,s=i.height,a=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];a.push(this.renderTargetCoC,this.renderTargetMasked),a.forEach(n=>n.setSize(e,t)),a=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],a.forEach(n=>n.setSize(r,s)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(n=>n.fullscreenMaterial.setSize(r,s))}initialize(e,t,i){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(r=>r.initialize(e,t,i)),this.blurPass.initialize(e,t,j1),i!==void 0&&(this.renderTarget.texture.type=i,this.renderTargetNear.texture.type=i,this.renderTargetFar.texture.type=i,this.renderTargetMasked.texture.type=i,e.outputEncoding===Rt&&(this.renderTarget.texture.encoding=Rt,this.renderTargetNear.texture.encoding=Rt,this.renderTargetFar.texture.encoding=Rt,this.renderTargetMasked.texture.encoding=Rt))}};new E;new Fe;var s9e="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",a9e=class extends to{constructor({blendFunction:e=ri.NORMAL,hue:t=0,saturation:i=0}={}){super("HueSaturationEffect",s9e,{blendFunction:e,uniforms:new Map([["hue",new Re(new E)],["saturation",new Re(i)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),i=Math.cos(e);this.uniforms.get("hue").value.set((2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new pt;var n9e=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,o9e=class extends to{constructor({blendFunction:e=ri.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",n9e,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},l9e="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",h9e=class extends to{constructor(e=30){super("PixelationEffect",l9e,{uniforms:new Map([["active",new Re(!1)],["d",new Re(new re)]])}),this.resolution=new re,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new E;new E;var pP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",mP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",c9e="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",u9e="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",sc={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},SN=class extends to{constructor({preset:e=sc.MEDIUM,edgeDetectionMode:t=a4.COLOR,predicationMode:i=nye.DISABLED}={}){super("SMAAEffect",c9e,{vertexShader:u9e,blendFunction:ri.NORMAL,attributes:qn.CONVOLUTION|qn.DEPTH,uniforms:new Map([["weightMap",new Re(null)]])});let r,s;arguments.length>1&&(r=arguments[0],s=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new ei(1,1,{minFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new V_(!0,!1,!1),this.clearPass.overrideClearColor=new pt(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new ua(new oye),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new ua(new gye);let a=new mB;a.onLoad=()=>{let n=new $i(r);n.name="SMAA.Search",n.magFilter=jt,n.minFilter=jt,n.generateMipmaps=!1,n.needsUpdate=!0,n.flipY=!0,this.weightsMaterial.searchTexture=n;let o=new $i(s);o.name="SMAA.Area",o.magFilter=Bt,o.minFilter=Bt,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!1,this.weightsMaterial.areaTexture=o,this.dispatchEvent({type:"load"})},a.itemStart("search"),a.itemStart("area"),r!==void 0&&s!==void 0?(a.itemEnd("search"),a.itemEnd("area")):typeof Image<"u"&&(r=new Image,s=new Image,r.addEventListener("load",()=>a.itemEnd("search")),s.addEventListener("load",()=>a.itemEnd("area")),r.src=pP,s.src=mP),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(e){case sc.LOW:t.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case sc.MEDIUM:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case sc.HIGH:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case sc.ULTRA:t.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break}}setDepthTexture(e,t=ol){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,i){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return pP}static get areaImageDataURL(){return mP}},d9e=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,tm={DEFAULT:0,ESKIL:1},f9e=class extends to{constructor({blendFunction:e=ri.NORMAL,technique:t=tm.DEFAULT,eskil:i=!1,offset:r=.5,darkness:s=.5}={}){super("VignetteEffect",d9e,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new Re(r)],["darkness",new Re(s)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===tm.ESKIL}set eskil(e){this.technique=e?tm.ESKIL:tm.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},ll=class{constructor(t,i){this.enabled=!1,this.effect=new t(i),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=ri.NORMAL}},p9e=class extends ll{constructor(){super(Yye),this.blendFunction=ri.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},m9e=class extends ll{constructor(){super(Qye)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},g9e=class extends ll{constructor(){super(t9e),this.effect.offset=new re(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},v9e=class extends ll{constructor(){super(Jye)}},y9e=class extends ll{constructor(){super(a9e),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},x9e=class extends ll{constructor(){super(o9e),this.blendFunction=ri.OVERLAY}},b9e=class extends ll{constructor(){super(f9e)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},w9e=class extends ll{constructor(e){super(r9e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e/2e3}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=this.isPerspectiveCamera?e/2e3:(e+992)/2e3}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}setCamera(e){let t=!1;(e.isPerspectiveCamera&&this.isPerspectiveCamera===!1||!e.isPerspectiveCamera&&this.isPerspectiveCamera===!0)&&(t=!0),e.isPerspectiveCamera?(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e.perspCamera),this.isPerspectiveCamera=!0):(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e),this.isPerspectiveCamera=!1),t&&this.effect.setChanged()}},_9e=class extends ll{constructor(){super(h9e)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},S9e=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,A9e=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,M9e=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,C9e=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,Wx=class extends ti{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new Re(null)},blending:Or,depthWrite:!1,depthTest:!1,vertexShader:M9e,fragmentShader:C9e})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},E9e=class extends os{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new Wx,this.resolutionVector=new re,this.resolveMaterial=new ti({name:"TAAResolveMaterial",uniforms:{inputBuffer:new Re(null),historyBuffer:new Re(null),velocityBuffer:new Re(null),depthBuffer:new Re(null),resolution:new Re(new re)},blending:Or,depthWrite:!1,depthTest:!1,vertexShader:S9e,fragmentShader:A9e}),this.historyRenderTarget=new ei(1024,1024,{minFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new ei(1024,1024,{minFilter:Bt,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let i=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(i),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},T9e=class extends os{constructor(e,t,i){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new dP(e,t,{renderTarget:i.transmissionDepthTarget}),this.passThroughMaterial=new Wx,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new Wx,this.depthPass=new dP(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,i){let r=this.camera.layers.mask,s=e;s.setRenderTarget(s.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],s.clear(),s.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,i),s.shadowMap.needsUpdate=!1,s.shadowMap.autoUpdate=!1;let a=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(a),e.render(this.splineScene,this.camera),this.camera.layers.mask=r}},gP=new As,P9e=new ti({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),qx=class extends os{constructor(e,t,i){super("OpaquePass",t??gP,i),this.MRTCompatible=!0,this.originalMaterials=[],this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e??gP}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.length=0,this.scene.traverse(r=>{r.layers.isEnabled(3)&&r instanceof ns&&(this.originalMaterials.push([r,r.material]),r.material=P9e)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let i=this.renderToScreen?null:t;e.setRenderTarget(i),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach(r=>{r[0].material=r[1]})}},D9e=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:s=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new Hx,this.depthTexture=null,this.timer=new qye,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,i,s,r,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,i,s,r,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,i,s,r,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){let t=e.getSize(new re),i=e.getContext().getContextAttributes()?.alpha??!1,r=this.inputBuffer.texture[0].type;r===j1&&e.outputEncoding===Rt&&(this.inputBuffer.texture[0].encoding=Rt,this.outputBuffer.texture[0].encoding=Rt,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(t.width,t.height,!1);for(let s of this.passes)s.initialize(e,i,r)}}replaceRenderer(e,t=!0){let i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){let e=this.depthTexture=new Nu(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.stencilBuffer?(e.format=Bc,e.type=Mc):e.type=ko,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r,s,a){let n=this.renderer,o=n===null?new re:n.getDrawingBufferSize(new re),l={minFilter:Bt,magFilter:Bt,wrapS:Wi,wrapT:Wi,stencilBuffer:t,depthBuffer:e},h;return r>0?(h=new ei(o.width,o.height,l),h.samples=r):(s?(h=new jz(o.width,o.height,2,l),h.texture[1].type=Jo):h=new ei(o.width,o.height,l),h.depthTexture=new Nu(2048,2048),h.depthTexture.type=bi),i===j1&&n!==null&&n.outputEncoding===Rt&&(Array.isArray(h.texture)?h.texture.forEach(c=>c.encoding=Rt):h.texture.encoding=Rt),Array.isArray(h.texture)?h.texture.forEach((c,u)=>{c.name=`EffectComposer.Buffer ${s} ${u}`,c.generateMipmaps=!1}):(h.texture.name=`EffectComposer.Buffer ${s}`,h.texture.generateMipmaps=!1),h.name=a,h}addPass(e,t){let i=this.passes,r=this.renderer,s=r.getDrawingBufferSize(new re),a=r.getContext().getContextAttributes()?.alpha??!1,n;if(e.MRTCompatible&&(n=this.inputBuffer.texture[0].type),e.MRTCompatible||(n=this.inputBuffer.texture.type),e.setRenderer(r),e.setSize(s.width,s.height),e.initialize(r,a,n),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let o=this.createDepthTexture();for(e of i)e.setDepthTexture(o)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){let r=(s,a)=>s||a.needsDepthTexture;t.reduce(r,!1)||e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null)}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,i=this.copyPass,r=this.inputBuffer,s=this.outputBuffer,a=this.inputBufferSingle,n=this.outputBufferSingle,o=!1,l,h,c,u;e===void 0&&(e=this.timer.update().getDelta());for(let d of this.passes)d.enabled&&(d.MRTCompatible?d.render(t,r,s,e,o):d.render(t,a,n,e,o),d.needsSwap&&(o&&(i.renderToScreen=d.renderToScreen,l=t.getContext(),h=t.state.buffers.stencil,h.setFunc(l.NOTEQUAL,1,4294967295),i.render(t,r,s,e,o),h.setFunc(l.EQUAL,1,4294967295)),c=r,u=a,r=s,a=n,s=c,n=u),d instanceof Hye?o=!0:d instanceof xye&&(o=!1))}setSize(e,t,i){let r=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let a=r.getSize(new re);e=a.width,t=a.height}r.setSize(e,t,i);let s=r.getDrawingBufferSize(new re);this.inputBuffer.setSize(s.width,s.height),this.outputBuffer.setSize(s.width,s.height),this.inputBufferSingle.setSize(s.width,s.height),this.outputBufferSingle.setSize(s.width,s.height);for(let a of this.passes)a.setSize(s.width,s.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},I9e=new ti({name:"CombineMaterial",uniforms:{inputBufferA:new Re(null),inputBufferB:new Re(null)},blending:Or,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),O9e=class extends os{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=I9e,this.helperPass=new qx(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new qx(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new SN({preset:sc.LOW,edgeDetectionMode:a4.COLOR});this.effectPass=new cv(this.camera,t),this.rt=new ei(10,10,{minFilter:Bt,magFilter:Bt,wrapS:Wi,wrapT:Wi,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,i){super.initialize(e,t,i),this.effectPass.initialize(e,t,i)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,i){this.rt.depthTexture=t.depthTexture;let r=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,i),this.fullscreenMaterial.uniforms.inputBufferA.value=i.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(r),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},R9e=`#define GLSLIFY 1
#include <skinning_pars_vertex>
#include <morphtarget_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,L9e=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,z9e=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,B9e=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,k9e=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,F9e=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,t3=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],N9e=new ti({vertexShader:R9e,fragmentShader:L9e}),T2=new ti({vertexShader:k9e,fragmentShader:F9e,uniforms:{texture_ao_lrez:new Re(null),texture_depth_lrez:new Re(null),texture_depth_hrez:new Re(null),near:new Re(null),far:new Re(null)}}),U9e=class extends os{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let i=1024,r=1024;this.gBuffer=new ei(i,r,{type:bf?Jo:bi,depthTexture:new Nu(i,r),minFilter:Bt,magFilter:Bt}),this.depthBufferHighRes=new ei(i,r,{depthTexture:new Nu(i,r)}),this.aoBuffer=new ei(i,r,{minFilter:Bt,magFilter:Bt}),this.splineScene=e,this.splineCamera=t;let s=new Float32Array(t3.length*2);for(let n=0;n<t3.length;n++){let o=n*2;s[o+0]=t3[n][0],s[o+1]=t3[n][1]}this.blueNoiseInDiskTexture=new ts(s,t3.length,1,pg,bi),this.blueNoiseInDiskTexture.wrapS=Bo,this.blueNoiseInDiskTexture.wrapT=Bo,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new ti({vertexShader:z9e,fragmentShader:B9e,uniforms:{near:new Re(null),far:new Re(null),fov:new Re(null),proj_info:new Re(new Mt),is_ortho:new Re(!1),resolution:new Re(new re),radius_of_influence:new Re(8),radius_in_screen_space:new Re(1),exponent:new Re(1),ao_color:new Re(new E),bias:new Re(.5),texture_depth:new Re(null),texture_normals:new Re(null),texture_blue_noise:new Re(null),texture_blue_noise_in_disk:new Re(this.blueNoiseInDiskTexture),frame_index:new Re(0),fog_enabled:new Re(!1),fog_near:new Re(1),fog_far:new Re(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new ei(i,r,{minFilter:Bt,magFilter:Bt,wrapS:Wi,wrapT:Wi,depthBuffer:!1,type:bi});let a=new SN({preset:sc.ULTRA,edgeDetectionMode:a4.COLOR});this.effectPass=new cv(this.camera,a)}initialize(e,t,i){super.initialize(e,t,i),this.effectPass.initialize(e,t,i)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let i=this._runHalfRes?.5:1,r=e*i,s=t*i;this.gBuffer.setSize(r,s),this.aoBuffer.setSize(r,s),this.hbaoMaterial.uniforms.resolution.value.set(r,s),this.aaBuffer.setSize(r,s),this.effectPass.setSize(r,s)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}setDepthTexture(e){this.depthBufferHighRes.depthTexture=e,T2.uniforms.texture_depth_hrez.value=e,T2.needsUpdate=!0}render(e,t,i){this.splineScene.overrideMaterial=N9e;let r=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=r,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let s=this.splineCamera.perspCamera.projectionMatrix.elements,a=2/s[0],n=2/s[5],o=-(1-s[8])/s[0],l=-(1+s[9])/s[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,n,o,l);let h=this.splineCamera.perspCamera.fov*(Math.PI/180),c=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(h*.5)*2),u=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*c;this.hbaoMaterial.uniforms.radius_in_screen_space.value=u,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let s=this.splineCamera.orthoCamera.projectionMatrix.elements,a=2/s[0],n=2/s[5],o=-(1+s[12])/s[0],l=-(1-s[13])/s[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,n,o,l);let h=.5*(this.hbaoMaterial.uniforms.resolution.value.y/n),c=this.hbaoMaterial.uniforms.radius_of_influence.value*h;this.hbaoMaterial.uniforms.radius_in_screen_space.value=c,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=T2,T2.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,T2.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,T2.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},V9e=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,j9e=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,G9e=class extends ua{constructor(){super(new ti({vertexShader:V9e,fragmentShader:j9e,uniforms:{tInput:new Re(null),tMap:new Re(null),uResolution:new Re(new re),uSize:new Re(new re),uCoords:new Re(new re),uScale:new Re(1),uSceneColor:new Re(new pt(16711680)),uDPR:new Re(1),uCurrent:new Re(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},H9e=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,W9e=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,q9e=[],X9e=class extends ua{constructor(){super(new ti({vertexShader:H9e,fragmentShader:W9e,uniforms:{toScene:new Re(null),fromScene:new Re(null),uResolution:new Re(new re),uDPR:new Re(1),mixRatio:new Re(0),threshold:new Re(.1),useTexture:new Re(0),tMixTexture:{value:q9e[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},Y9e=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,K9e=`
uniform sampler2D inputBuffer;
uniform sampler2D blurredInputBuffer;
uniform sampler2D overlay;
uniform float blurIntensity;

uniform vec2 uResolution;
uniform float uDPR;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( overlay, screenUv );
	vec4 texel2 = texture2D( inputBuffer, screenUv );
	vec4 texel3 = texture2D( blurredInputBuffer, screenUv );

	float blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;
    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );
}
`,Q9e=class extends ua{constructor(){super(new ti({vertexShader:Y9e,fragmentShader:K9e,uniforms:{inputBuffer:new Re(null),blurredInputBuffer:new Re(null),overlay:new Re(null),uResolution:new Re(new re),uDPR:new Re(1),blurIntensity:new Re(0)}})),this._blurEnabled=!1,this.blurTarget=new ei(1,1,{minFilter:Bt,magFilter:Bt,wrapS:Wi,wrapT:Wi}),this.blurPass=new j_({width:window.innerWidth,height:window.innerHeight,kernelSize:n4.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,t,i=1){this.uniforms.uResolution.value.set(e,t),this.uniforms.uDPR.value=i,this.blurPass.setSize(e,t),this.blurTarget.setSize(e,t),this.blurPass.setSize(e,t)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let t=e.frame;if(t){let i=t.data.backgroundBlur,r=i.radius;this._blurEnabled=i.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=r/3}}render(e,t,i,r,s){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,t,this.blurTarget,r,s)),super.render(e,t,i,r,s)}},Z9e=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,J9e=`
uniform sampler2D tInput;
uniform sampler2D tOverlayImage;
varying vec2 vUv;
uniform vec2 uResolution;
uniform vec2 uRightBottom;
uniform vec2 uImageSize;
uniform float uScale;
uniform float uDPR;

vec3 blendNormal(vec3 base, vec3 blend) {
	return blend;
}

vec3 blendNormal(vec3 base, vec3 blend, float opacity) {
	return (blendNormal(base, blend) * opacity + base * (1.0 - opacity));
}

vec4 drawFixedSizeImage(sampler2D image, vec2 screenUV, vec2 imageSize, vec2 imageCoords, vec2 screenSize, float dpr) {
	vec2 uv = (screenUV * screenSize * dpr - imageCoords) / (imageSize * dpr);
	if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {
		return vec4(0.0);
	}
	return texture2D(image, uv);
}

void main() {
    vec2 screenUV = gl_FragCoord.xy / (uResolution.xy * uDPR);
	vec2 imageCoords = vec2(uResolution.x * uDPR - uImageSize.x * uScale * uDPR - uRightBottom.x * uDPR, uRightBottom.y * uDPR);
    vec4 background = texture2D(tInput, screenUV);
    vec4 image = drawFixedSizeImage(tOverlayImage, screenUV, uImageSize * uScale, imageCoords, uResolution, uDPR);
    gl_FragColor = vec4(blendNormal(background.rgb, image.rgb, image.a), max(background.a, image.a));
}
`,$9e=class extends ua{constructor(){super(new ti({vertexShader:Z9e,fragmentShader:J9e,uniforms:{tInput:new Re(null),tOverlayImage:new Re(null),uResolution:new Re(new re),uImageSize:new Re(new re),uRightBottom:new Re(new re(20,20)),uScale:new Re(.25),uDPR:new Re(1)}}),"tInput")}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tOverlayImage.value}set texture(e){this.uniforms.tOverlayImage.value=e,this.uniforms.uImageSize.value.set(e.image.width,e.image.height)}};function vP(e,t){return t&&t.enabled&&e.push(t.effect),e}var e5e=e=>Object.values(ri).includes(e)?e:ri.NORMAL,t5e=class extends C1{constructor(e,t){super(),this._needsDOFResize=t,this.postprocessingState=Xg.defaultData,this._scene=new As,this._camera=new V1,this.effects=new Map,this.blueNoiseTexture=new ts,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new Bae,this.renderer=e,this.debug=!1,this.effects.set("bloom",new p9e),this.effects.set("chromaticAberration",new g9e),this.effects.set("vignette",new b9e),this.effects.set("noise",new x9e),this.effects.set("colorAverage",new v9e),this.effects.set("hueSaturation",new y9e),this.effects.set("brightnessContrast",new m9e),this.effects.set("depthOfField",new w9e),this.effects.set("pixelation",new _9e),this.effectComposer=new D9e(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new qx(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new T9e(this.scene,this.camera,this.renderer),this.aoPass=new U9e(this.scene,this.camera),this.taaPass=new E9e,this.taaPass.renderToScreen=!1,this.helperPass=new O9e(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new G9e,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new Q9e,this.uiOverlayPass.enabled=!1,this.logoOverlayPass=new $9e,this.logoOverlayPass.enabled=!1,this.sceneTransitionPass=new X9e,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){let t=this._camera!==e;this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),t&&this.transmissionPass.updatePasses(this.renderer),this.aoPass.setCamera(e),this.helperPass.setCamera(e),this.effects.get("depthOfField").setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let i=this.effectComposer.passes[t];if(i.enabled===!0&&!e&&this._renderToScreen){i.renderToScreen=!0,e=!0;continue}i.renderToScreen=!1}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new ts(e,128,128),this.blueNoiseTexture.wrapS=Bo,this.blueNoiseTexture.wrapT=Bo,this.blueNoiseTexture.minFilter=jt,this.blueNoiseTexture.magFilter=jt,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,i,r,s,a,n,o){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=i,this.aoPass.aoColor=r,this.aoPass.fogEnabled=s,this.aoPass.fogNear=a,this.aoPass.fogFar=n,this.aoPass.runHalfRes!==!o&&(this.aoPass.runHalfRes=!o)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){if(this.uvEffectPass?.dispose(),this.effectPass?.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let e=[this.effects.get("pixelation")].reduce(vP,[]);e.length>0&&(this.uvEffectPass=new cv(this.camera,...e),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let t=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("depthOfField"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(vP,[]);if(t.length>0&&(this.effectPass=new cv(this.camera,...t),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass),this._needsDOFResize&&this.effects.get("depthOfField")?.enabled&&window!==void 0)){let i=this.renderer.viewportWidth,r=this.renderer.viewportHeight;this.renderer.setSize(i-1,r-1),this.renderer.setSize(i,r)}}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.logoOverlayPass)}_initCopyPass(){if(this._savePass)return;let e=new re;this.renderer.getDrawingBufferSize(e),this._rt=new ei(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Bo,wrapT:Bo}),this._rt.samples=0,this._savePass=new Hx(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new Hx(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}setWatermark(e){this.logoOverlayPass.enabled=e!==null,e&&(this.logoOverlayPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...i}=e,r=!1;t!==this.postprocessingState.enabled&&(r=!0);for(let s of Object.entries(i)){let a=s[1],n=this.effects.get(s[0]);if(n){n.enabled!==a.enabled&&(r=!0),n.enabled=a.enabled;for(let[o,l]of Object.entries(a))o==="blendFunction"?n.blendFunction=e5e(l):n[o]=l}}this.postprocessingState=e,r&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,i,r){e instanceof Mt?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,i,r),this.effectComposer.outputBuffer.scissor.set(e,t,i,r));let s=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(s),this.effectComposer.outputBuffer.scissor.multiplyScalar(s),this.renderer.setScissor(e,t,i,r)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,i,r){e instanceof Mt?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,i,r),this.effectComposer.outputBuffer.viewport.set(e,t,i,r))}resize(e,t,i){if(this.effectComposer.setSize(e,t,i),this._rt){let r=this.renderer.getPixelRatio();this._rt.setSize(e*r,t*r)}}dispose(){this.uvEffectPass?.dispose(),this.effectPass?.dispose(),this.effectComposer.dispose()}},i5e=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,r5e=Lt.lights_fragment_begin,s5e=Lt.shadowmask_pars_fragment,yP=null,a5e=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},n5e=(e="medium")=>{if(yP===e)return!1;yP=e;let t=a5e(e);Lt.shadowmap_pars_fragment=i5e(t);let i=r5e.slice();i=i.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),i=i.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),Lt.lights_fragment_begin=i;let r=s5e.slice();return r=r.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),Lt.shadowmask_pars_fragment=r,!0},o5e=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;
#include <skinning_pars_vertex>
#include <morphtarget_pars_vertex>
	
void main()
{
#include <beginnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
vec3 transformed = vec3(position);
#include <morphtarget_vertex>
#include <skinning_vertex>

vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
}
`,l5e=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,O9=new ti({vertexShader:o5e,fragmentShader:l5e,uniforms:{depthContrast:{value:1}}}),xP=new $i,bP=new re,h5e=class extends Zz{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new re,this.dummyCamera=new V1,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(s=!0,a=!0,n=!0)=>{let o=this.getContext(),l=0;s&&(l|=o.COLOR_BUFFER_BIT),a&&(l|=o.DEPTH_BUFFER_BIT),n&&(l|=o.STENCIL_BUFFER_BIT),o.clear(l),o.clearBufferfv(o.COLOR,1,[0,0,0,1])},this.pipeline=new t5e(this,e?.needsDOFResize??!1),this.autoClear=!1;let t=this.setPixelRatio.bind(this),i=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=Tw,this.dummyCamera.matrixAutoUpdate=!1,this.domElement.removeAttribute("data-engine");let r=this.getContext();if(r&&"drawingBufferColorSpace"in r)try{r.drawingBufferColorSpace="display-p3"}catch(s){console.warn(s)}this.setPixelRatio=s=>{this._pixelRatio!==s&&(this._pixelRatio=s,t(s))},this.setSize=(s,a,n=!0)=>{(this.viewportWidth!==s||this.viewportHeight!==a)&&(this.viewportWidth=s,this.viewportHeight=a,i(s,a,n),this.normalRenderTarget?.setSize(s*this._pixelRatio,a*this._pixelRatio),this._resizeTransmission(s,a),this.transmissionDepthTarget?.setSize(s*this._pixelRatio/2,a*this._pixelRatio/2),this.pipeline.resize(s,a,n))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new ei(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Bt,magFilter:Bt,wrapS:Wi,wrapT:Wi,depthBuffer:!1}))}_resizeTransmission(e,t){this.transmissionRenderTarget?.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),this.aoRenderTarget?.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return yt.transmissionLod.value===1}set hdTransmission(e){yt.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new ei(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:ku,magFilter:Bt,wrapS:Wi,wrapT:Wi,depthBuffer:!1}),this.transmissionDepthTarget=new ei(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:jt,magFilter:jt,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new ei(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:jt,magFilter:jt,type:bi,depthTexture:new Nu(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,i){this.normalRenderTarget&&(this.setClearColor(0),i.layers.enable(8),i.layers.disable(0),i.layers.disable(3),t.traverseEntity(r=>{r.layers.isEnabled(8)&&(r.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),i instanceof V1?O9.uniforms.depthContrast.value=(i.far-i.near)/1e4:O9.uniforms.depthContrast.value=1,t.overrideMaterial=O9,this.render(t,i),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?$x:null,i.layers.enable(0),i.layers.enable(3),t.traverseEntity(r=>{r.layers.isEnabled(8)&&(r.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,i=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let r=t.height,s=t.width,a=this.viewportWidth/this.viewportHeight;s<r?s=r*a:r=s/a,this.dummyCamera.setViewplaneSize(s,r);for(let n=0;n<i;n++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:i=this.sceneHelpers,sceneHelpersOnTop:r=this.sceneHelpersOnTop,overrideTransmission:s=void 0,overrideNormal:a=void 0}={}){let n=e instanceof Q_?e.activePage:e,o=n.visible;n.visible=!0;let l=n.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(n.bgColor,n.bgColor.a),n.penumbraSizeArray.forEach((d,f)=>{yt.penumbraSize.value[f]=d}),yt.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?yt.resolution.value.set(this.resolution.x,this.resolution.y):yt.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),a!==void 0?(yt.normalRenderTarget.value=a,yt.normalRenderTargetDepth.value=xP):l.needsNormal()&&(this.createNormalRenderTarget(),yt.normalRenderTarget.value=this.normalRenderTarget.texture,yt.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,n,t));let h=n.data.ao,c=h.occlusion;if(c&&(this.createAORenderTarget(),yt.aoRenderTarget.value=this.aoRenderTarget.texture),yt.aoEnabled.value=c,this.pipeline.setAmbientOcclusionParams(h.occlusion,h.radius,h.bias,n.aoColor,n.fog!==null,n.backupFog.near,n.backupFog.far,h.aoFullRes&&!bf),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&n.uiCanvas?.enabled&&n.uiCanvas.texture&&n.uiCanvas.texture.image.width>0){let d=this.getSize(bP),f=this.getPixelRatio();(n.uiCanvas.width!==this.viewportWidth||n.uiCanvas.height!==this.viewportHeight||n.uiCanvas.dpr!==f)&&n.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight},f),n.uiCanvas.render(this),this.pipeline.uiOverlayPass.uiCanvas=n.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(d.x,d.y,f),this.pipeline.updateRenderToScreen()}else this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen();if(this.pipeline.logoOverlayPass.enabled){let d=this.getSize(bP),f=this.getPixelRatio();this.pipeline.logoOverlayPass.uniforms.uResolution.value.set(d.x,d.y),this.pipeline.logoOverlayPass.uniforms.uDPR.value=f}let u=!1;if(s!==void 0)yt.transmissionRenderTarget.value=s,yt.transmissionRenderTargetDepth.value=xP,this.pipeline.setTransmissionPassEnabled(!1);else{let d=l.needsTransmission();d&&(this.transmissionRenderTarget===void 0&&(u=!0),this.createTransmissionRenderTarget(),yt.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,yt.aspectRatio.value=Jge(this.viewportWidth,this.viewportHeight),yt.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(d)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=i,this.pipeline.sceneHelpersOnTop=r,this.pipeline.scene=n,this.pipeline.camera=t,u&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==n.postprocessing&&(this.pipeline.updatePostprocessing(n.postprocessing),!i&&!r&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),l.shapeBlendIntances.forEach(d=>{d.onBeforeShadowPass(this)}),n.overrideMaterial=l.wireframeState?$x:null,this.pipeline.render(),yt.frameIndex.value=(yt.frameIndex.value+1)%16,t instanceof V1&&t.copyHistory(),n.visible=o}renderFromSceneForSceneTransitionPass(e,t,i){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=i,this.sceneTransitionTimeRemaining=i,this.pipeline.renderToScreen=!0;let r=this.pipeline.sceneTransitionPass.uniforms;r.uDPR.value=window.devicePixelRatio,r.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){this._superDispose(),this.pipeline.dispose(),this.aoRenderTarget?.dispose(),this.transmissionRenderTarget?.dispose(),this.transmissionDepthTarget?.dispose(),this.normalRenderTarget?.dispose(),this.normalRenderTarget?.depthTexture?.dispose()}},AN=class extends Sf(Jae){constructor(e,t=15,i=10066329){super(e,t,i),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){Af(this.object,AN.geometryHelper,e,t)}},MN=class extends Sf(Zae){constructor(e,t=15,i=6710886){super(e,t,i),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){Af(this.object,MN.geometryHelper,e,t)}},Xx=class extends Sf(Qae){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){Af(this.object,Xx.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=Xx._vector,t=this.object.distance?this.object.distance:1e3,i=t*Math.tan(this.object.angle);this.cone.scale.set(i,i,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let r=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let s=0,a=this.cone.material.length;s<a;s++)this.cone.material[s].color.set(r);else this.cone.material.color.set(r)}}},CN=Xx;CN._vector=new E;var EN=class extends No{constructor(){super(),this.caretIndex=0,this._caretVisibleAlpha=1,this._selectionVisibleAlpha=.3,this.current={start:0,end:void 0},this.matrixAutoUpdate=!1,this.caretMesh=new zi(new Kn(1,1),new $o({transparent:!0,opacity:0,side:N1})),this.add(this.caretMesh),this.selectionMesh=new zi(new Kn(1,1),new $o({color:2857471,transparent:!0,depthTest:!1,depthWrite:!1,opacity:0,side:N1})),this.add(this.selectionMesh),this.hide()}get caretHeight(){return this.object?.AD??0}show(e){this.visible=!0,this.object=e,this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.y=-this.caretHeight*.5,this.setCaretPosition(this.caretIndex),this.update()}hide(){this.visible=!1}update(){if(this.object===void 0)return;this.updateHelperMatrix();let{depth:e}=this.object.geometry.userData.parameters;this.caretMesh.position.z=e,this.selectionMesh.position.z=e}updateHelperMatrix(){if(this.object===void 0)return;let e=this.object,t=e.parent;t!==null&&t.updateWorldMatrix(!0,!1),e.matrixAutoUpdate&&e.updateMatrix(),t!==null?(this.matrixWorld.multiplyMatrices(t.matrixWorld,e.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,e.matrix)):this.matrixWorld.multiplyMatrices(e.hiddenMatrix,e.matrix),this.matrix.copy(this.matrixWorld);for(let i of this.children)i.matrixWorld.copy(this.matrixWorld);e.updateWorldMatrix(!0,!0)}setCaretColor(e){let t=this.caretMesh.material;t.color.setRGB(e.r,e.g,e.b);let i=this._caretVisibleAlpha===t.opacity;this._caretVisibleAlpha=e.a,i&&(t.opacity=this._caretVisibleAlpha)}setSelectionColor(e){this.selectionMesh.material.color.setRGB(e.r,e.g,e.b)}setCaretPosition(e,t={}){if(this.object===void 0)return;this.caretIndex=e;let i=this.object.wrappedText,[r,s]=uv(i,e),[a,n]=e>0?uv(i,e-1):[null,null];(e>0&&i.length?i[a].charAt(n):null)===`
`&&(r++,s=0),this.current.start=e,this.current.end=void 0;let[o,l]=R9(this.object,r,s),{AD:h,descender:c}=this.object,u=c+h*.5,{width:d,height:f,depth:p}=this.object.geometry.userData.parameters,m=typeof d=="string"?0:d,g=typeof f=="string"?0:f;this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.set(o-m*.5,l+u+g*.5,p),this.hideSelectionMesh(),this.showCaretMesh()}setSelection(e,t){if(this.object===void 0)return;let i=this.object.wrappedText;this.current.start=e,this.current.end=t;let r=[],s=[],a=c5e(i,e,t),{lineHeight:n,AD:o,descender:l}=this.object,h=l+o*.5-n*.5;for(let[g,v,y]of a)if(v!==y){let[x,w]=R9(this.object,g,v),[_,b]=R9(this.object,g,y);w+=h,b+=h,b+=n;let M=r.length/3;r.push(x,w,0),r.push(_,w,0),r.push(_,b,0),r.push(x,b,0),s.push(M+0,M+1,M+2),s.push(M+2,M+3,M+0)}let c=new rt;c.setIndex(s),c.setAttribute("position",new Xe(r,3));let{width:u,height:d,depth:f}=this.object.geometry.userData.parameters,p=typeof u=="string"?0:u,m=typeof d=="string"?0:d;this.selectionMesh.geometry.dispose(),this.selectionMesh.geometry=c,this.selectionMesh.position.x=-p*.5,this.selectionMesh.position.y=m*.5,this.selectionMesh.position.z=f,this.showSelectionMesh(),this.hideCaretMesh()}getSelectionFromPosition(e,t,i="previous"){if(this.object===void 0||this.object.font===void 0)return;let r=this.object.wrappedText,s=r.length,a=this.object.lineHeight,n=s*a,{height:o,verticalAlign:l}=this.object.geometry.userData.parameters,h=typeof o=="string"?0:o,c=0;l===3?c=h-n:l===2&&(c=h*.5-n*.5);let u=Math.min(Math.floor(Math.max(Math.min(-t-c,n),0)/a),s-1),d=this.object.charCoords[u],f=this.object.charWidths[u],p=0,m=!1;if(i==="previous"){for(let g=0;g<d.length;g++)if(d[g][0]+f[g]*.5-e>0){p=g,m=!0;break}}else if(i==="closest"){let g=1/0;for(let v=0;v<d.length;v++){let y=d[v][0]+f[v]*.5,x=Math.abs(y-e);x<g&&(g=x,p=v,m=!0)}}else for(let g=0;g<d.length;g++){let v=d[g][0],y=d[g][0]+f[g];if(e>=v&&e<y){p=g,m=!0;break}}return m||(p=d.length),{index:this.getGlobalIndexFromLineAndCharIndexes(r,u,p),lineIndex:u,characterIndex:p}}getGlobalIndexFromLineAndCharIndexes(e,t,i){return e.slice(0,t).reduce((r,s)=>r+=s.length,0)+i}showSelectionMesh(){this.selectionMesh.material.opacity=this._selectionVisibleAlpha}hideSelectionMesh(){this.selectionMesh.material.opacity=0}showCaretMesh(){this.caretMesh.material.opacity=this._caretVisibleAlpha}hideCaretMesh(){this.caretMesh.material.opacity=0}};function R9(e,t,i){let{charCoords:r,charWidths:s,initialOffsetY:a,lineHeight:n}=e;if(r[t]&&r[t].length===0||r.length===0){let c=0,{horizontalAlign:u}=e.data.geometry,d=e.wrappedText,{width:f}=e.geometry.userData.parameters;return d.length===1&&d[0].length===0&&(u===3?c=f*.5:u===2&&(c=f)),[c,a-n*t]}let o=r[t];if(o===void 0||o.length===0)return[0,0];let[l,h]=o[Math.min(i,o.length-1)];return i>=o.length&&(l+=s[t][i-1]),[l,h]}function uv(e,t){let i=0;for(let r=0;r<e.length;r++){let s=e[r],a=t-i;if(a<=s.length)return[r,a];i+=s.length}return[Math.max(0,e.length-1),e[e.length-1]?.length??0]}function c5e(e,t,i){let[r,s]=uv(e,t),[a,n]=uv(e,i),o=[];s>=e[r].length&&(r++,s=0);for(let l=r;l<=a;l++){let h=e[l],c=l===r?s:0,u=l===a?n:h.length;o.push([l,c,u])}return o}function u5e(e,t){let i=g1.fromHex(3223857),r=.8;for(let s of e.layers){if(s.data.type==="light"||s.data.type==="displace"||s.data.type==="fresnel"||s.data.type==="matcap"||s.data.type==="texture"||s.data.type==="toon"||s.data.type==="outline"||s.data.type==="transmission"||s.data.type==="noise")continue;let a=typeof s.data.alpha=="string"?Number(t.getVariable(s.data.alpha)):s.data.alpha;if(s.data.type==="color"&&a>.3){i=d5e(s.data.color,t),r=a;break}else if((s.data.type==="depth"||s.data.type==="gradient")&&a>.3){let n=f5e(s.data);i={r:n[0],g:n[1],b:n[2]},r=typeof s.data.alpha=="string"?1:s.data.alpha;break}}return{...i,a:r}}function d5e(e,t){return typeof e=="string"?t.data.colors[e]:e}function f5e(e){return e.colors[0]}function p5e(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var TN=class extends U_(zae,AN){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.top=1250,r.bottom=-1250,r.right=1250,r.left=-1250,r.near=-1e4,r.far=2500;let s=new Cg(this.shadow.camera);s.visible=!1,this.gizmos.shadowmap=s}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof Cg&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let i=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&p5e(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),i&&this.update()}},wP=new E,_P=new E,SP=new wt,PN=class extends U_(Iae,CN){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=Ke.RAD2DEG*2*this.angle,r.aspect=1,r.near=100,r.far=2500;let s=new Cg(this.shadow.camera);s.visible=!1,this.gizmos.shadowmap=s,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof Cg&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),_P.setFromMatrixPosition(this.matrixWorld),SP.setFromRotationMatrix(this.matrixWorld),wP.copy(this.up).applyQuaternion(SP).negate().multiplyScalar(this.distance),this.target.position.copy(_P).add(wP),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}};function m5e(e){let t=(e[0][0]+e[1][1])/2,i=(e[0][0]-e[1][1])/2,r=(e[1][0]+e[0][1])/2,s=(e[1][0]-e[0][1])/2,a=Math.sqrt(t*t+s*s),n=Math.sqrt(i*i+r*r),o=a+n,l=a-n,h=Math.atan2(r,i),c=Math.atan2(s,t),u=(c-h)/2,d=(c+h)/2,f=[[Math.cos(d),Math.sin(d)],[-Math.sin(d),Math.cos(d)]],p=[[o,0],[0,l]],m=[[Math.cos(u),Math.sin(u)],[-Math.sin(u),Math.cos(u)]];return f[0][0]*=-1,f[0][1]*=-1,m[0][0]*=-1,m[1][0]*=-1,[f,p,m]}function zm(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0],e[0][0]*t[0][1]+e[0][1]*t[1][1]],[e[1][0]*t[0][0]+e[1][1]*t[1][0],e[1][0]*t[0][1]+e[1][1]*t[1][1]]]}function AP(e){return[[e[0][0],e[1][0]],[e[0][1],e[1][1]]]}function g5e(e){let[t,i,r]=m5e(e),s=zm(t,AP(r)),a=zm(zm(r,i),AP(r)),n=Math.atan2(s[1][0],s[0][0]),o=[a[0][0],a[1][1]],l=[a[0][1]/a[1][1],a[1][0]/a[0][0]];return{rotation:n,scale:o,shear:l}}function v5e({rotation:e,scale:t,shear:i}){let r=Math.cos(e),s=Math.sin(e),a=[[r,-s],[s,r]],n=[[t[0],i[0]*t[1]],[i[1]*t[0],t[1]]],o=zm(a,n);return[o[0][0],o[1][0],o[0][1],o[1][1]]}var ni;(e=>{function t(){return[1,0,0,0,1,0,0,0,1]}e.identity=t;function i(b,M=e.identity()){for(let S=0,A=b.length;S<A;S++)M[S]=b[S];return M}e.copy=i;function r(b,M,S,A,C,T){return e.setAbcdef(e.identity(),b,M,S,A,C,T)}e.create=r;function s(b,M,S,A,C,T,D){return b[0]=M,b[1]=A,b[2]=T,b[3]=S,b[4]=C,b[5]=D,b}e.setAbcdef=s;function a(b,M){let[S,A,C,T,D,R]=o(b),[O,j,X,N,k,ne]=o(M),te=O*S+j*C,Q=O*A+j*T,Z=X*S+N*C,de=X*A+N*T,ee=k*S+ne*C+D,le=k*A+ne*T+R;return e.create(te,Q,Z,de,ee,le)}e.append=a;function n(b,M){let[S,A,C,T,D,R]=o(b),[O,j,X,N,k,ne]=o(M),te=S,Q=A,Z=C,de=T;(O!==1||j!==0||X!==0||N!==1)&&(te=S*O+A*X,Q=S*j+A*N,Z=C*O+T*X,de=C*j+T*N);let ee=D*O+R*X+k,le=D*j+R*N+ne;return e.create(te,Q,Z,de,ee,le)}e.prepend=n;function o(b){return[b[0],b[3],b[1],b[4],b[2],b[5]]}e.getAbcdef=o;function l(b){let[M,S,A,C,T,D]=e.getAbcdef(b),R=M*C-S*A,O=C/R,j=-S/R,X=-A/R,N=M/R,k=(A*D-C*T)/R,ne=-(M*D-S*T)/R;return e.create(O,j,X,N,k,ne)}e.invert=l;function h([b,M],S){let[A,C,T,D,R,O]=e.getAbcdef(S);return[A*b+T*M+R,C*b+D*M+O]}e.apply=h;function c(b,M){let[S,A,C,T,D,R]=e.getAbcdef(M),O=1/(S*T+C*-A),[j,X]=b;return[T*O*j+-C*O*X+(R*C-D*T)*O,S*O*X+-A*O*j+(-R*S+D*A)*O]}e.applyInverse=c;function u(b,M,S=M){let[A,C,T,D,R,O]=e.getAbcdef(b);return e.setAbcdef(b,A*M,C*S,T*M,D*S,R*M,O*S),b}e.scale=u;function d(b,M){let S=Math.cos(M),A=Math.sin(M),[C,T,D,R,O,j]=e.getAbcdef(b);return e.setAbcdef(b,C*S-T*A,C*A+T*S,D*S-R*A,D*A+R*S,O*S-j*A,O*A+j*S),b}e.rotate=d;function f(b,M,S){let[A,C]=S,T=e.translate(b,-A,-C);return T=e.rotate(T,M),T=e.translate(T,A,C),T}e.rotateAround=f;function p(b,M,S){let[A,C,T,D,R,O]=e.getAbcdef(b);return e.setAbcdef(b,A,C,T,D,R+M,O+S),b}e.translate=p;function m(b,M,S){let[A,C,T,D]=e.getAbcdef(b);return e.setAbcdef(b,A,C,T,D,M,S),b}e.setTranslate=m;function g(b,M,S){let[A,C,T,D]=e.getAbcdef(b);return e.setAbcdef(b,A,C,T,D,M,S),b}e.setPosition=g;function v(b){let[M,S,A,C]=e.getAbcdef(b),T=Math.sqrt(M*M+S*S),D=Math.sqrt(A*A+C*C);return[T,D]}e.getScale=v;function y(b){let[,,,,M,S]=e.getAbcdef(b);return[M,S]}e.getPosition=y;function x(b,M){return e.decompose(b,M).rotation}e.getRotation=x;function w(b,M){let[S,A,C,T,D,R]=e.getAbcdef(b),{rotation:O,scale:j,shear:X}=g5e([[S,C],[A,T]]);return{position:[D+(M[0]*S+M[1]*C)-M[0],R+(M[0]*A+M[1]*T)-M[1]],scale:j,rotation:O,shear:X,pivot:M}}e.decompose=w;function _(b,M,S,A,C=[0,0]){let[T,D]=b,[R,O]=A,[j,X,N,k]=v5e({rotation:S,scale:M,shear:C}),ne=T-(R*j+O*N)+R,te=D-(R*X+O*k)+O;return e.create(j,X,N,k,ne,te)}e.compose=_})(ni||(ni={}));var y5e=Math.PI/180;function x5e(e,t,i,r,s,a){let n=e-i,o=t-r;return n*n/(s*s)+o*o/(a*a)<=1}function b5e(e){return e*y5e}var n1=class{constructor(e,t,i){this.uuid=e,this.data=t,this.localMatrix=ni.identity(),this.worldMatrix=ni.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new Yx,this._recursiveBBox=new Yx,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.shear=[0,0],this.emitter=r4(),this.dpr=i.dpr??1,this.dataPatched=t}project(e,t){let i=this.worldMatrix;return t&&(i=ni.append(t.worldMatrix,i)),ni.applyInverse(e,i)}intersects(e,t,i,r=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,t],i),r)}intersectsInLocalSpace(e,t,i=!1){let{min:r,max:s}=i?this.recursiveBBox:this.singleBBox;return e>=r[0]&&e<=s[0]&&t>=r[1]&&t<=s[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=ni.compose(this.position,this.scale,b5e(this.rotation),Pc.getPivot(this.dataPatched),this.shear)}updateWorldMatrix(e,t,i){let r=this.parent;t&&r!==null&&r!==void 0&&r.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=ni.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=ni.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return Pc.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let t=!1;e.position!==void 0&&(t=!0,this.position=e.position),e.rotation!==void 0&&(t=!0,this.rotation=e.rotation),e.scale!==void 0&&(t=!0,this.scale=e.scale),e.shear!==void 0&&(t=!0,this.shear=e.shear),t&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,t,i){e.type===0&&e.props.visible!==void 0&&(this.visible=e.props.visible),this.data=t,this.data=t;let r=e,s=Pi(e.path,["states","*"]);if(s!==null){if(e.type===0){let[a]=s;if(this?.stateSelection===a){let n={...e.props};if(delete n.name,Object.values(e.props).some(o=>o===void 0)){let o=this.data;if(o!==void 0){let l=jr.zoom(o,e.path.slice(2));if(l)for(let h in e.props)e.props[h]===void 0&&h in l&&(n[h]=l[h])}}r={...e,props:n,path:e.path.slice(2)}}}}else if(e.type===0){let a=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(a!==void 0){if(e.props.name!==void 0&&a.name){let{name:o,...l}=a;a=l}let n=jr.removeOverridden(e.path,e.props,a);r={...e,props:n}}}this.updateByPatchedOpBase(r,fc.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i)}changeSelectedState(e,t,i=!1){if(!(this.data.states.length===0&&!i)){for(let r of this.data.states)fc.toOps(this.data,r.data).forEach(s=>{let a=kg.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(a,this.data,t)});if(e!==null){let r=this.data.states.data(e);r&&(this.dataPatched=fc.patch(this.data,r),fc.toOps(this.data,r).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,t)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,t){e.name!==void 0&&(this.name=e.name),e.visible!==void 0&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,t,i){this.dataPatched=t,this.updateByPatchedOp(e,t,i)}updateByPatchedOp(e,t,i){e.path.length===0&&e.type===0&&this.updateState(e.props,i),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(t=>{t.data.type==="frame2d"&&e(t)})}traverseAncestors(e){let t=this.parent;for(;t;)e(t),t=t.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let t=new n1(this.uuid,this.data,e);return t.parent=void 0,t}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children;if(t){let i=t.indexOf(this)+1;return t[i]?t[i]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof n1&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}},Ga=class extends n1{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.context=i,this.children=[]}add(e){e.parent&&e.parent instanceof Ga&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let t=this.children.indexOf(e);t>=0&&(this.children.splice(t,1),e.parent=void 0)}traverse(e){let t=e(this);if(t!==!0)for(let i of this.children)i instanceof Ga?i.traverse(e):t=e(i)}intersectsChildrenHelper(e,t,i,r,s){for(let a of this.children)if(a.intersects(e,t,i,!1)&&(s.push(a),r)||a instanceof Ga&&a.intersectsChildrenHelper(e,t,i,r,s))return!0;return!1}intersectsChildren(e,t,i,r=!1,s=[],a=!1){return this.intersectsChildrenHelper(e,t,i,r,s),s}intersectsChildrenHelperReverse(e,t,i,r,s){for(let a of this.children)if(a instanceof Ga&&a.intersectsChildrenHelperReverse(e,t,i,r,s)||a.intersects(e,t,i,!1)&&(s.push(a),r))return!0;return!1}intersectsChildrenReverse(e,t,i,r=!1,s=[],a=!1){return this.intersectsChildrenHelperReverse(e,t,i,r,s),s}updateWorldMatrix(e,t,i){if(super.updateWorldMatrix(e,t,i),i&&this.children)for(let r of this.children)r.updateWorldMatrix(e,!1,!0)}find(e){let t;return this.traverse(i=>{i.uuid===e&&(t=i)}),t}innerDrawChildren(e){for(let t=this.children.length-1;t>=0;t--)this.children[t].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let t=new Ga(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}},bh=class extends Ga{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.updateState(t,i)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let t=new bh(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}};function w5e(e,t){let[[i,r],[s,a]]=e,[[n,o],[l,h]]=t,c=(i-s)*(o-h)-(r-a)*(n-l);if(c===0)return!1;let u=((i-n)*(o-h)-(r-o)*(n-l))/c,d=-((i-s)*(r-o)-(r-a)*(i-n))/c;return u>=0&&u<=1&&d>=0&&d<=1}var DN=[[-1,1],[-1,-1],[1,-1],[1,1]],MP=(e,t,i)=>{let r=e.getCenter(),s=e.getHalfSize(),a=ni.append(t,e.worldMatrix);s[0]===0&&s[1]===0?i.push(ni.apply(r,a)):DN.forEach(n=>{let o=[n[0]*s[0]+r[0],n[1]*s[1]+r[1]];i.push(ni.apply(o,a))})},Yx=class{constructor(){this.matrix=ni.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,t=!1){e.updateWorldMatrix(),this.makeEmpty(),ni.copy(e.worldMatrix,this.matrix);let i=ni.invert(e.worldMatrix);this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t,i=!1){let r=[];i===!0&&e instanceof Ga?e.traverse(s=>{s.visible&&MP(s,t,r)}):MP(e,t,r),this.setFromPoints(r)}setFromSize(e,t,i){this.makeEmpty(),ni.copy(i,this.matrix),this.expandBySize(e,t,i)}expandBySize(e,t,i){[ni.apply([0,0],i),ni.apply([0,t],i),ni.apply([e,t],i),ni.apply([e,0],i)].forEach(r=>this.expandByPoint(r))}getCenter(){let[e,t]=this.min,[i,r]=this.getHalfSize();return ni.apply([e+i,t+r],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[(this.max[0]-this.min[0])*.5,(this.max[1]-this.min[1])*.5]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let t of e)this.expandByPoint(t)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,t]=this.getHalfSize(),i=this.getCenter(),[r,s,a,n]=ni.getAbcdef(this.matrix),o=ni.create(r,s,a,n,i[0],i[1]);this.vertices=DN.map(([l,h])=>ni.apply([l*e,h*t],o))}computeEdges(){this.edges=[];for(let e=0,t=this.vertices.length;e<t;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%t]])}project(e,t){let i=this.matrix;return t&&(i=ni.append(t.worldMatrix,i)),ni.applyInverse(e,i)}intersects(e,t,i){return this.intersectsInLocalSpace(...this.project([e,t],i))}intersectsInLocalSpace(e,t){let{min:i,max:r}=this;return e>=i[0]&&e<=r[0]&&t>=i[1]&&t<=r[1]}containsPoint(e){let[t,i]=e,[r,s]=this.min,[a,n]=this.max;return t>=r&&t<=a&&i>=s&&i<=n}intersectsBBox2D(e){for(let t=0,i=this.edges.length;t<i;t++){let r=this.edges[t];for(let s=0,a=e.edges.length;s<a;s++){let n=e.edges[s];if(w5e(r,n))return!0}}for(let t=0,i=e.vertices.length;t<i;t++){let r=e.vertices[t];if(this.containsPoint(r))return!0}return!1}ensureMinMax(){let e=this.min,t=this.max;this.min=[Math.min(e[0],t[0]),Math.min(e[1],t[1])],this.max=[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],ni.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new Yx;return e.copy(this),e}},IN,_5e=new Promise(e=>{IN=e}),CP=!1,im;function S5e(){if(CP)return;if(im)return im;async function e(){let t=await Ah(()=>import("./ui-Ds7EeOeb.js"),[]);IN(t.default??t),CP=!0}return im=e(),im}function EP(e){let t=!1;return e.scene.objects.traverse((i,r)=>{(r.type==="Mesh"&&r.geometry.type==="UIGeometry"||r.type==="Page"&&r.uiFrame!==void 0)&&(t=!0)}),t}var Tt,L9;async function A5e(e){let t=await _5e;Tt||(L9||(L9=t({locateFile:()=>e})),Tt=await L9)}var TP=ni.identity(),ON=class{constructor(e,t=1){this.canvas=e,this._dpr=t,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=_i.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=_i.transparent,this._fonts=new Map,this._isSizeDirty=!1;try{let i=e.getBoundingClientRect();e.width=i.width*t,e.height=i.height*t}catch{console.log(e.width,t)}this._currentM3Transform=TP,this._currentTransform=new Float32Array(TP)}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this._isSizeDirty=!0}async init(){if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await A5e(this.wasmURL),this._surface=Tt.MakeWebGLCanvasSurface(this.canvas),this.ctx=this._surface?.getCanvas(),this._paint=new Tt.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(Tt.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(Tt.PaintStyle.Stroke),this.ctx?.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,t){let i=await(await fetch(e)).arrayBuffer();this.registerFont(i,t)}registerFont(e,t){if(this._fonts.has(t))return;let i=Tt.FontMgr.FromData(e);if(i)this._fonts.set(t,i);else throw new Error("Invalid font data for "+t)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(rm(e),Tt.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(rm(e),Tt.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth(this._strokeMode==="center"?e:e*2)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){this.ctx?.clear(Tt.TRANSPARENT)}save(){this.ctx?.save()}restore(){this.ctx?.restore()}beginPath(){this._currentPath?.delete(),this._currentPath=new Tt.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let t=e.getBounds();(t[3]-t[1]||t[2]-t[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,t,i,r,s=0,a=0,n=0,o=0){let l=Tt.XYWHRect(e,t,i,r);if(s===0&&a===0&&o===0&&n===0)this.ctx?.clipRect(l,Tt.ClipOp.Intersect,!0);else{let h=Tt.RRectXY(l,s,s);h[4]=h[5]=s,h[6]=h[7]=a,h[8]=h[9]=n,h[10]=h[11]=o,this.ctx?.clipRRect(h,Tt.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=ni.invert(this.currentTransform);this.ctx.concat(e);let t=ni.translate(ni.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(t),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,t,i=!0){if(this.ctx&&this._currentPath){let r,s=!1;if(i&&this._hasDropShadow()){let a=e.copy();a.setColor(rm(this._dropShadowColor));let n;this._dropShadowBlur>0&&(n=Tt.MaskFilter.MakeBlur(Tt.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(this.camera?.scale??1),!1),a.setMaskFilter(n)),this.ctx.save(),this.ctx.clipPath(this._currentPath,Tt.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),t(a),this.ctx.restore(),a.delete(),n?.delete()}if(this._backgroundBlur>0&&i){this.ctx.save(),this.ctx.clipPath(this._currentPath,Tt.ClipOp.Intersect,!0);let a=Tt.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,Tt.TileMode.Clamp,null),n=e.copy();n.setImageFilter(a),n.setAlphaf(1);let o=this._currentPath.computeTightBounds();this.ctx.saveLayer(n,o,null,Tt.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),n.delete(),a.delete(),s=!0}if(this._layerBlur>0){let a=e.copy();r=Tt.MaskFilter.MakeBlur(Tt.BlurStyle.Normal,this._layerBlur*this.dpr*(this.camera?.scale??1),!1),a.setMaskFilter(r),t(a),a.delete(),r.delete(),s=!0}if(s||t(e),i&&this._hasInnerShadow()){let a=new Tt.Paint;a.setAntiAlias(!0),a.setStyle(Tt.PaintStyle.Fill),a.setColor(rm(this._innerShadowColor));let n;this._innerShadowBlur>0&&(n=Tt.MaskFilter.MakeBlur(Tt.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(this.camera?.scale??1),!1),a.setMaskFilter(n));let o=this._currentPath.computeTightBounds(),[l,h,c,u]=o,d=c-l,f=u-h;this.ctx.save(),this.ctx.clipPath(this._currentPath,Tt.ClipOp.Intersect,!0),this.ctx.saveLayer(a,o,null,Tt.SaveLayerInitWithPrevious),this.ctx?.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(Tt.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+d+Math.abs(this._innerShadowOffsetX*2),2e3+f+Math.abs(this._innerShadowOffsetY*2)),a),a.setBlendMode(Tt.BlendMode.Clear),this.ctx.drawPath(this._currentPath,a),this.ctx.restore(),this.ctx.restore(),a.delete(),n?.delete()}}}_paintInner(e,t=!0){if(this.ctx&&this._currentPath&&e){let i=this.ctx,r=this._currentPath;this._applyEffectsToPaint(e,s=>{let a=!1;!t&&this._strokeMode!=="center"&&(i.save(),i.clipPath(r,this._strokeMode==="outside"?Tt.ClipOp.Difference:Tt.ClipOp.Intersect,!0),a=!0),i.drawPath(r,s),a&&i.restore()},t)}}_hasDropShadow(){return this._dropShadowColor?.a>0}_hasInnerShadow(){return this._innerShadowColor?.a>0}path(e){this._currentPath?.addPath(Tt.Path.MakeFromSVGString(e))}ellipse(e,t,i,r,s,a,n,o){if(!PP([e,t,i,r])||!this._currentPath)return;if(i<0||r<0)throw Error("radii cannot be negative");let l=Tt.XYWHRect(e-i,t-r,i*2,r*2);this._currentPath?.addOval(l)}rect(e,t,i,r,s=0,a=0,n=0,o=0){let l=Tt.XYWHRect(e,t,i,r);if(PP(l))if(s===0&&a===0&&o===0&&n===0)this._currentPath?.addRect(l);else{let h=Tt.RRectXY(l,s,s);h[4]=h[5]=s,h[6]=h[7]=a,h[8]=h[9]=n,h[10]=h[11]=o,this._currentPath?.addRRect(h)}}getHorizontalAlign(e){switch(e){case 2:return Tt.TextAlign.Right;case 3:return Tt.TextAlign.Center;case 4:return Tt.TextAlign.Justify;case 1:default:return Tt.TextAlign.Left}}drawTextInner(e,t,i,[r,s,a,n],o,l,h=!0){let c=0,{ctx:u}=this;if(!u)return c;let d=l.copy(),f=l.copy();return f.setAlphaf(0),this._applyEffectsToPaint(d,p=>{t.pushPaintStyle(i,p,f),t.addText(e);let m=t.build();m.layout(a);let g=s;o===2?g+=(n-m.getHeight())/2:o===3&&(g+=n-m.getHeight()),u.drawParagraph(m,r,g),c=m.getHeight(),t.reset(),m.delete()},h),d.delete(),f.delete(),c}drawText(e,t){let i=0,r=this._fonts.get(t.font),{ctx:s,_paintFill:a,_paintStroke:n}=this;if(r&&s){let o=new Tt.TextStyle({fontFamilies:[t.font],fontSize:t.fontSize,heightMultiplier:t.lineHeight,letterSpacing:t.letterSpacing}),l=new Tt.ParagraphStyle({textStyle:o,textAlign:this.getHorizontalAlign(t.horizontalAlign)}),h=Tt.XYWHRect(t.x,t.y,t.width,t.height),c=Tt.ParagraphBuilder.Make(l,r);a&&(i=this.drawTextInner(e,c,o,h,t.verticalAlign,a,!0)),n&&(i=this.drawTextInner(e,c,o,h,t.verticalAlign,n,!1)),c.delete()}return{height:i}}render(){this._surface?.flush()}moveTo(e,t){this._currentPath?.moveTo(e,t)}lineTo(e,t){this._currentPath?.lineTo(e,t)}bezierCurveTo(e,t,i,r,s,a){this._currentPath?.cubicTo(e,t,i,r,s,a)}quadraticCurveTo(e,t,i,r){this._currentPath?.quadTo(e,t,i,r)}setTransform(e,t=!1){if(!this.ctx)return;let i=this.ctx.getTotalMatrix(),r=ni.invert(i);if(r&&this.ctx.concat(r),this.ctx?.scale(this.dpr,this.dpr),this.camera?.enabled&&(this.ctx?.concat(this.camera.worldMatrix),t)){let s=ni.getScale(this.camera.worldMatrix);this.ctx?.scale(1/s[0],1/s[1])}this.ctx?.concat(e),this.currentTransform=e}transform(e){this.ctx?.concat(e)}setSize(e,t){!this._isSizeDirty&&e===this._width&&t===this._height||(this._isSizeDirty=!1,this._width=e,this._height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=e*this.dpr,this.canvas.height=t*this.dpr,this._surface&&(this._surface=Tt.MakeWebGLCanvasSurface(this.canvas),this.ctx=this._surface?.getCanvas()))}};function PP(e){for(let t=0;t<e.length;t++)if(e[t]!==void 0&&!Number.isFinite(e[t]))return!1;return!0}function rm({r:e,g:t,b:i,a:r}){return Tt.Color4f(e,t,i,r)}var DP=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=_i.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(t)}update(e){e.color!==void 0&&(this.color=e.color),e.enabled!==void 0&&(this.enabled=e.enabled),e.blurRadius!==void 0&&(this.blurRadius=e.blurRadius),e.offset!==void 0&&(this.offset=e.offset),e.spread!==void 0&&(this.spread=e.spread)}},IP=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.radius=0,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.radius!==void 0&&(this.radius=e.radius)}},M5e=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=_i.transparent,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color)}},C5e=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=_i.transparent,this.thickness=0,this.mode="inside",this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color),e.thickness!==void 0&&(this.thickness=e.thickness),e.mode!==void 0&&(this.mode=e.mode)}},e1=class extends n1{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.autoClose=!0,this.fill=new M5e(e+"-fill",t.fill,i),this.stroke=new C5e(e+"-stroke",t.stroke,i),this.dropShadow=new DP(e+"-dropShadow",t.dropShadow,i),this.innerShadow=new DP(e+"-innerShadow",t.innerShadow,i),this.backgroundBlur=new IP(e+"-backgroundBlur",t.backgroundBlur,i),this.layerBlur=new IP(e+"-layerBlur",t.layerBlur,i)}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:_i.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:_i.transparent,e.strokeMode=this.stroke.mode,e.lineWidth=this.stroke.thickness}applyFilters(e){this.layerBlur.enabled?e.layerBlur=this.layerBlur.radius*5:e.layerBlur=0,this.backgroundBlur.enabled?e.backgroundBlur=this.backgroundBlur.radius*5:e.backgroundBlur=0,this.dropShadow.enabled?(e.dropShadowBlur=this.dropShadow.blurRadius*5,e.dropShadowColor=this.dropShadow.color,e.dropShadowOffsetX=this.dropShadow.offset[0],e.dropShadowOffsetY=this.dropShadow.offset[1]):e.dropShadowColor=_i.transparent,this.innerShadow.enabled?(e.innerShadowSpread=this.innerShadow.spread,e.innerShadowBlur=this.innerShadow.blurRadius*5,e.innerShadowColor=this.innerShadow.color,e.innerShadowOffsetX=this.innerShadow.offset[0],e.innerShadowOffsetY=this.innerShadow.offset[1]):e.innerShadowColor=_i.transparent}innerDraw(e){}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.applyFilters(e),this.applyFillStroke(e),e.beginPath(),this.innerDraw(e),this.autoClose&&e.closePath(),this.fill.enabled&&e.fill(),this.stroke.enabled&&e.stroke(),e.restore())}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.type===0&&(Pi(e.path,["fill"])?this.fill.update(e.props):Pi(e.path,["stroke"])?this.stroke.update(e.props):Pi(e.path,["dropShadow"])?this.dropShadow.update(e.props):Pi(e.path,["innerShadow"])?this.innerShadow.update(e.props):Pi(e.path,["layerBlur"])?this.layerBlur.update(e.props):Pi(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}updateState(e,t){super.updateState(e,t),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur)}clone(e){let t=new e1(this.uuid,this.data,e);return t.parent=void 0,t}},G_=class extends e1{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.width=0,this.height=0,this.updateState(t,i)}innerDraw(e){e.ellipse(this.width*.5,this.height*.5,this.width*.5,this.height*.5,0,0,Math.PI*2)}intersectsInLocalSpace(e,t){return x5e(e,t,this.width*.5,this.height*.5,this.width*.5,this.height*.5)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e)}clone(e){let t=new G_(this.uuid,this.data,e);return t.parent=void 0,t}},Ef=class extends e1{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(t,i)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let t=new Ef(this.uuid,this.data,e);return t.parent=void 0,t}},H_=class extends e1{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(t,i)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:_i.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:_i.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){this._fontHolder?.arrayBuffer&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let t=this.data.textTransform,i=this.data.text.textValue.toString(),r=t===2?i.toUpperCase():t===3?i.toLowerCase():i,{height:s}=e.drawText(r,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=s}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:t}){e.font!==void 0&&(this._fontHolder=t.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateFontState(e,t)}clone(e){let t=new H_(this.uuid,this.data,e);return t.parent=void 0,t}},RN=class extends e1{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(t,i)}computeExtremas(){this.curves.length===0&&this.computeCurves();let e=this.curves.map(r=>dv.extremas(r)),t=[1/0,1/0],i=[-1/0,-1/0];for(let r=0,s=e.length;r<s;r++){let a=e[r];a[0][0]<t[0]&&(t[0]=a[0][0]),a[0][1]<t[1]&&(t[1]=a[0][1]),a[1][0]>i[0]&&(i[0]=a[1][0]),a[1][1]>i[1]&&(i[1]=a[1][1])}return this.extremasBBox.min=[t[0],t[1]],this.extremasBBox.max=[i[0],i[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let i=1,r=this.data.points.length;i<r;i++){let s=this.data.points[i].data,a=this.data.points[i-1].data,n={start:a.position,cp1:a.controlNext.position,cp2:s.controlPrevious.position,end:s.position};this.curves.push(n)}let e=this.data.points[0].data,t=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let i={start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(i)}}getCenter(){let[e,t]=this.extremasBBox.min,[i,r]=this.getHalfSize();return[e+i,t+r]}getHalfSize(){let{min:e,max:t}=this.extremasBBox;return[(t[0]-e[0])*.5,(t[1]-e[1])*.5]}innerDraw(e){for(let r=0,s=this.data.points.length;r<s;r++){let a=this.data.points[r].data;if(r===0){let[n,o]=a.position;e.moveTo(n,o)}else{let n=this.data.points[r-1].data,[o,l]=n.controlNext.position,[h,c]=a.controlPrevious.position,[u,d]=a.position,f={start:n.position,cp1:n.controlNext.position,cp2:a.controlPrevious.position,end:a.position};dv.derive(f),e.bezierCurveTo(o,l,h,c,u,d)}}let t=this.data.points[0].data,i=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[r,s]=i.controlNext.position,[a,n]=t.controlPrevious.position,[o,l]=t.position;e.bezierCurveTo(r,s,a,n,o,l)}}updateState(e,t){super.updateState(e,t),this.computeExtremas()}clone(e){let t=new RN(this.uuid,this.data,e);return t.parent=void 0,t}},dv;(e=>{function t(n){let o=n.start,l=n.cp1,h=n.cp2,c=n.end,u=[3*(l[0]-o[0]),3*(l[1]-o[1])],d=[3*(h[0]-l[0]),3*(h[1]-l[1])],f=[3*(c[0]-h[0]),3*(c[1]-h[1])],p={start:u,cp:d,end:f};return n.derivative=p,p.derivative=Kx.derive(p),p}e.derive=t;function i(n,o,l,h=!1){let c=n-2*o+l;if(c!==0){let u=-Math.sqrt(Math.abs(o*o-n*l)),d=-n+o,f=-(u+d)/c,p=-(-u+d)/c;return[f,p]}else if(o!==l&&c===0)return[(2*o-l)/(2*(o-l))];return[]}function r(n){let o=n.derivative??e.derive(n),l=o.start,h=o.cp,c=o.end;return[i(l[0],h[0],c[0]),i(l[1],h[1],c[1])]}e.droot=r;function s(n){let[o,l]=e.droot(n),h=[n.start[0],n.end[0]],c=[n.start[1],n.end[1]];for(let u of o)h.push(e.compute(n,Math.min(1,Math.max(0,u)))[0]);for(let u of l)c.push(e.compute(n,Math.min(1,Math.max(0,u)))[1]);return h.sort((u,d)=>u-d),c.sort((u,d)=>u-d),[[h[0],c[0]],[h[h.length-1],c[c.length-1]]]}e.extremas=s;function a(n,o){if(o===0)return[...n.start];if(o===1)return[...n.end];let l=1-o,h=l*l,c=o*o,u=h*l,d=h*o*3,f=l*c*3,p=o*c;return[u*n.start[0]+d*n.cp1[0]+f*n.cp2[0]+p*n.end[0],u*n.start[1]+d*n.cp1[1]+f*n.cp2[1]+p*n.end[1]]}e.compute=a})(dv||(dv={}));var Kx;(e=>{function t(s){let a=s.start,n=s.cp,o=s.end,l=[2*(n[0]-a[0]),2*(n[1]-a[1])],h=[2*(o[0]-n[0]),2*(o[1]-n[1])],c={start:l,end:h};return c.derivative=Qx.derive(c),s.derivative=c,c}e.derive=t;function i(s){let a=s.derivative??e.derive(s),n=a.start,o=a.end;return[n[0]!==o[0]?n[0]/(n[0]-o[0]):0,n[1]!==o[1]?n[1]/(n[1]-o[1]):0]}e.droot=i;function r(s,a){if(a===0)return[...s.start];if(a===1)return[...s.end];let n=1-a,o=n*n,l=a*a,h=o,c=n*a*2,u=l;return[h*s.start[0]+c*s.cp[0]+u*s.end[0],h*s.start[1]+c*s.cp[1]+u*s.end[1]]}e.compute=r})(Kx||(Kx={}));var Qx;(e=>{function t(r){let s=r.start,a=r.end,n=[a[0]-s[0],a[1]-s[1]];return r.derivative=n,r.derivative}e.derive=t;function i(r,s){if(s===0)return[...r.start];if(s===1)return[...r.end];let a=r.start,n=r.end;return[a[0]+(n[0]-a[0])*s,a[1]+(n[1]-a[1])*s]}e.compute=i})(Qx||(Qx={}));var Xn=class extends Ga{constructor(e,t,i){super(e,t,i),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new Ef(e+"-background",qd.defaultData,i),this.background.parent=this,this.updateState(t,i)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){super.updateLocalMatrix(),this.background?.updateLocalMatrix()}updateWorldMatrix(e,t,i){super.updateWorldMatrix(e,t,i),this.background?.updateWorldMatrix(e,t,i)}draw(e){if(!this.visible)return;e.save();let t=this.width,i=this.height;this.applyTransforms(e),this.background.width=t,this.background.height=i,this.background.draw(e),this.clipped&&e.clipRect(0,0,t,i,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur),e.clipped!==void 0&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.type===0&&(Pi(e.path,["fill"])?this.fill.update(e.props):Pi(e.path,["stroke"])?this.stroke.update(e.props):Pi(e.path,["dropShadow"])?this.dropShadow.update(e.props):Pi(e.path,["innerShadow"])?this.innerShadow.update(e.props):Pi(e.path,["layerBlur"])?this.layerBlur.update(e.props):Pi(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let t=new Xn(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}},E5e=Mh(Cz(),1),o4=class extends e1{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this._pathBBox=new DOMRect,this.path="",this.updateState(t,i),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),t.setAttribute("d",this.path),e.appendChild(t),this._pathBBox=t.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,t){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&t>=this._pathBBox.y&&t<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,t){super.updateState(e,t),e.path!==void 0&&(this.path=e.path,this.computeSVGBBox())}clone(e){let t=new o4(this.uuid,this.data,e);return t.parent=void 0,t}};function T5e(e,t=1,i=1){if(t<=0||i<=0)return e;let r=(0,E5e.parseSVG)(e).map(s=>{let a={...s};return"x"in a&&(a.x=a.x*t),"y"in a&&(a.y=a.y*i),"x1"in a&&(a.x1=a.x1*t),"x2"in a&&(a.x2=a.x2*t),"y1"in a&&(a.y1=a.y1*i),"y2"in a&&(a.y2=a.y2*i),"rx"in a&&(a.rx=a.rx*t),"ry"in a&&(a.ry=a.ry*i),a});return P5e(r)}function P5e(e){let t=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"],i;return e.map(r=>{let s=[];t.forEach(n=>{if(n in r){let o=r[n]*1;s.length&&o>=0&&s.push(","),s.push(o)}});let a=(i===r.code?s[0]<0?"":",":r.code)+s.join("");return i=r.code,a}).join("")}function D5e(e,t,i){switch(t.type){case"ellipse2d":return new G_(e,t,i);case"rectangle2d":return new Ef(e,t,i);case"text2d":return new H_(e,t,i);case"vector2d":return new RN(e,t,i);case"path2d":return new o4(e,t,i);case"frame2d":return new Xn(e,t,i);case"group2d":default:return new bh(e,t,i)}}var LN=class{constructor(e,t,i){this.uuid=e,this.data=t,this.group=new bh(LN.GROUP_ID,{...iv.defaultData},i),this.createChildrenObjects(t.objects,this.group,i)}createObject(e,t,i,r,s,a){let n=D5e(e,t,a);n&&(r.add(n),r.children.splice(s,0,r.children.pop()),n.updateWorldMatrix(),i.length>0&&(n instanceof bh||n instanceof Xn)&&this.createChildrenObjects(i,n,a))}createChildrenObjects(e,t,i){let r=0;for(let s of e)this.createObject(s.id,s.data,s.children,t,r,i),r+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,t,i,r){let s=this.find(e);if(s)try{s.updateByOp(t,i,{shared:r})}catch(a){console.error(a)}}updateTreeByOp(e,t){if(e.path.length===0&&e.type===7){let i=e.parent===null?this.group:this.find(e.parent);i!==void 0&&i instanceof Ga&&(this.createObject(e.id,e.data,e.children,i,e.localIndex,t),i.requestRender())}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i!==void 0&&i.parent!==void 0&&i.parent instanceof Ga){let r=i.parent;i.resetBBoxNeedsUpdate(),r?.remove(i),r?.requestRender()}}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i!==void 0){let r=i.parent,s=e.parent===null?this:this.find(e.parent);if(s instanceof Ga||s===this){s.add(i);let a=e.localIndex;s.children.splice(a,0,s.children.pop()),i.updateWorldMatrix(!0,!1,!0),r?.requestRender(),i.requestRender()}i.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(t=>{t!==this.group&&e(t)})}intersectsChildren(e,t,i,r=!1,s=[]){return this.group.intersectsChildren(e,t,i,r,s,!0)}intersectsChildrenReverse(e,t,i,r=!1,s=[]){return this.group.intersectsChildrenReverse(e,t,i,r,s,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,t){return this.group.project(e,t)}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let i=[],r=t;for(;r!==this.group;){let s=r;r=r.parent;let a=r.children.indexOf(s);i.splice(0,0,a)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push(r)}return t.sort((i,r)=>pk(i.sortKey,r.sortKey)),t.map(i=>i.entity)}},W_=LN;W_.GROUP_ID="scene2d";function zN({constraints:e,newParentWidth:t,newParentHeight:i,initialParentWidth:r,initialParentHeight:s,objectInitialWidth:a,objectInitialHeight:n,objectInitialPosition:o}){let{horizontalConstraint:l,verticalConstraint:h}=e,c=t-r,u=i-s,d=a,f=n,p=o[0],m=o[1];if(l!==0){if(l===1)p+=c;else if(l===3)p+=c/2;else if(l===2)d=Math.max(1,d+c);else if(l===4){let g=t/r;d*=g,p*=g}}if(h!==0){if(h===1)m+=u;else if(h===3)m+=u/2;else if(h===2)f=Math.max(1,f+u);else if(h===4){let g=i/s;f*=g,m*=g}}return{width:d,height:f,position:[p,m]}}Mh(Cz(),1);var I5e=`
	varying vec2 vUv;
	void main() {
		vUv = uv;
		gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
	}`,O5e=`
	uniform sampler2D tDiffuse;
	varying vec2 vUv;
	void main() {
		vec4 texel = texture2D( tDiffuse, vUv );
		gl_FragColor = texel;
	}`,R5e=new Nv(-1,1,1,-1,0,1),L5e=class extends rt{constructor(){super(),this.setAttribute("position",new Xe([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Xe([0,2,0,0,2,0],2))}},z5e=new L5e,B5e=class{constructor(e){this._mesh=new zi(z5e,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,R5e)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}},BN=new ti({defines:{},uniforms:{tDiffuse:new Re(null)},vertexShader:I5e,fragmentShader:O5e}),k5e=new B5e(BN),z9=null,B9=null,F5e=()=>(z9===null&&(z9=document.createElement("canvas")),z9),N5e=e=>(B9===null&&(B9=new ON(e)),B9),U5e=ni.identity(),kN=class{constructor(e,t,i,r){this.uuid=e,this.width=t,this.height=i,this.context=r,this.enabled=!0,this.isScreenSpace=!1,this.dpr=window.devicePixelRatio,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this._innerApplySize=()=>{let s=this.width,a=this.height,n=this.dpr;this.renderer.dpr=this.isScreenSpace?n:Math.floor(2048/Math.max(s,a)),this.renderer.setSize(s,a)},this.onFrameOverrideObjectEvent=s=>{if(s.target?.uuid!==void 0){let a=this.frameRoot?.find(s.target.uuid);a&&a.dispatchEvent({...s,target:a})}},this.scene2d=new W_(Ke.generateUUID(),xx.defaultData,{dpr:window.devicePixelRatio,shared:r.shared}),this.canvas=F5e(),this.renderer=N5e(this.canvas),this.promise=this.init(),this.renderTarget=new ei(1,1,{type:Jo,stencilBuffer:!1,depthBuffer:!1}),r.shared.addUIBuffer(this.uuid,this.renderTarget),this.textureHolder=r.shared.uiBuffer(this.uuid)}get canvasTexture(){return this._canvasTexture||(this._canvasTexture=new Gse(this.canvas)),this._canvasTexture}async init(){this.renderer instanceof ON&&(this.renderer.wasmURL=nN.skiaWasmUrl),await this.renderer.init()}render(e){if(this.isFrameDirty){this.isFrameDirty=!1,this._innerApplySize(),this.renderer.clear(),this.frameOverride?.draw(this.renderer),this.renderer.render(),BN.uniforms.tDiffuse.value=this.canvasTexture,this.canvasTexture.needsUpdate=!0;let t=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.clear(),k5e.render(e),e.setRenderTarget(t),this.textureHolder?.setNeedsUpdate(!0)}}updateEntity2DByOp(e,t,i,r){this.scene2d.updateEntityByOp(e,t,i,r),this.applySize()}updateTreeByOp(e,t){this.scene2d.updateTreeByOp(e,t),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let t=e?.width??this.width,i=e?.height??this.height;this.frameOverride.width=t,this.frameOverride.height=i,this.frameOverride.localMatrix=U5e,this.isScreenSpace&&(this.frameOverride.fill.color=_i.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:t,height:i},FN({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e,t=window.devicePixelRatio){let i=Math.max(1,e?.width??this.width),r=Math.max(1,e?.height??this.height);this.dpr=t,this.width=i,this.height=r,this._innerApplySize();let s=1,a=512,n=512;(i*t<a||r*t<n)&&(s=Math.max(a/(i*t),n/(r*t))),this.renderTarget.setSize(i*t*s,r*t*s),this._canvasTexture?.dispose(),this._canvasTexture=void 0,this.applyOverrides(e),this.frameOverride?.requestRender()}applyFrame(e){let t=this.context.scene.find2D(e);if(!(!t||!(t instanceof Xn)))return this.disposeFrameOverride(),this.frameRoot=t,this.frameOverride=t.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),this.frame?.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(i=>{i.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(i=>{i.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frame?.requestRender(),t}get frame(){return this.frameOverride}get frameId(){return this.frame?.uuid}find(e){return this.scene2d.find(e)}get texture(){return this.textureHolder?.getTexture(1001)}disposeFrameOverride(){this.frameOverride?.removeEventListener("render",this.onRenderRequestedDownstream),this.frameOverride?.traverse(e=>{e.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),this.frameOverride?.traverse(e=>{e.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function FN({objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:s,initialParentHeight:a}){if(e instanceof Xn&&t instanceof Xn||e instanceof bh&&t instanceof bh)for(let n=0,o=e.children.length;n<o;n++){let l=e.children[n],h=t.children[n];l&&h&&l.uuid===h.uuid&&j5e({objectOverride:l,objectRoot:h,newParentWidth:i,newParentHeight:r,initialParentWidth:s,initialParentHeight:a})}}function V5e(e){if(Zx(e))return[e.width,e.height];if(e instanceof o4){let[t,i]=e.getHalfSize();return[t*2,i*2]}else if(e instanceof bh){let[t,i]=e.recursiveBBox.getHalfSize();return[t*2,i*2]}return[0,0]}function j5e({objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:s,initialParentHeight:a}){let[n,o]=V5e(t),{width:l,height:h,position:c}=zN({constraints:e.data,newParentWidth:i,newParentHeight:r,initialParentWidth:s,initialParentHeight:a,objectInitialWidth:n,objectInitialHeight:o,objectInitialPosition:t.position});if(e.position=c,e.data={...e.data,position:c},e.states)for(let u in e.states)G5e({stateId:u,objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:s,initialParentHeight:a});if(Zx(e)||e instanceof bh)Zx(e)&&(e.width=l,e.height=h,e.data={...e.data,width:l,height:h}),FN({objectOverride:e,objectRoot:t,newParentWidth:l,newParentHeight:h,initialParentWidth:n,initialParentHeight:o});else if(e instanceof o4){let u=t,d=n!==0?l/n:1,f=o!==0?h/o:1;e.path=T5e(u.path,d,f),e.data={...e.data,path:e.path}}}function G5e({stateId:e,objectOverride:t,objectRoot:i,newParentWidth:r,newParentHeight:s,initialParentWidth:a,initialParentHeight:n}){let o=t.states?.[e],l=i.states?.[e];if(o&&l){let{width:h,height:c,position:u}=zN({constraints:t.data,newParentWidth:r,newParentHeight:s,initialParentWidth:a,initialParentHeight:n,objectInitialWidth:Pc.isResizeable(l)?l.width:0,objectInitialHeight:Pc.isResizeable(l)?l.height:0,objectInitialPosition:l.position});Object.assign(t.states[e],{position:u}),Pc.isResizeable(o)&&Object.assign(t.states[e],{width:h,height:c})}}function Zx(e){return e instanceof Ef||e instanceof Xn||e instanceof G_||e instanceof H_}var $r=class extends w_(As){constructor(e,t,i){super(),this.data=t,this.bgColor=new A1(1,1,1,1),this.fog=null,this.backupFog=new Jz(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new pt,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new V1(v0,{...Gd.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new Pae(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),t.uiScene?this.uiScene=new W_((Array.isArray(e)?e[0]:e)+"-ui",t.uiScene,{dpr:window.devicePixelRatio,shared:i.shared}):t.uiFrame&&this.createUICanvas(t.uiFrame,i)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){return this.uiCanvas?.frame}createUICanvas(e,t){this.uiCanvas=new kN(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,t),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{this.uiCanvas?.applyFrame(e),this.uiCanvas?.applySize()})}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=is(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(t=>{t instanceof Vc&&t.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof b0)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&n5e(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let i=this.scene;i.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=is(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){e.aoColor!==void 0&&(this.aoColor=is(e.aoColor,t))}updateByOp(e,t,i,r){let s=this.data.uiFrame;super.updateByOp(e,t,i,r);let a=t;Pi(e.path,["fog"])?this.updateFog(a.fog,i.shared):Pi(e.path,["ao"])?this.updateAo(a.ao,i.shared):Pi(e.path,["ambient"])?this.updateAmbientLight(a.ambient,i.shared):Pi(e.path,["shadow"])?this.updateShadow(a.shadow):e.type===0&&e.path.length===0&&(e.props.uiFrame!==void 0||s!==a.uiFrame)&&this.updateUIFrame(e.props.uiFrame,i)}updateUIFrame(e,t){e?(this.uiCanvas||this.createUICanvas(e,t),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,t){this.updateState_Entity(e,t),e.backgroundColor!==void 0&&this.setBackgroundColor(is(e.backgroundColor,t.shared)),e.fog!==void 0&&this.updateFog(e.fog,t.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,t.shared),e.ao!==void 0&&this.updateAo(e.ao,t.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}createFrame(e,t){}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){return this.scene?.find(this.data.publish.playCamera)??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(i=>{if(!i.visible)return!0;i instanceof TN&&i.visible&&e<3&&(this.penumbraSizeArrayCache[e]=i.data.penumbraSize??.5,e+=1),i instanceof PN&&i.visible&&e<2&&(this.penumbraSizeArrayCache[3+t]=i.data.penumbraSize??.5,t+=1)})}raycastWithClones(e){let t=[],i=r=>{for(let s of r.children){let a=s.cloner;Zt.is(s)&&(s.visible||a?.object.data.visible)&&((ja(s)||Vx(s)&&this.scene.enableHelpers&&s.objectHelper.visible)&&(e.intersectObject(s,!1,t),Jx(s,e,t,!0)),i(s))}};return i(this),t}updateEntity2DByOp(e,t,i,r){this.uiCanvas?.updateEntity2DByOp(e,t,i,r)}},H5e=class extends U_(Rae,MN){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=90,r.aspect=1,r.near=100,r.far=2500;let s=new E(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),a=new E(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z),n=new yr(s,a),o=new Eg(n,new pt(16755200));o.visible=!1,this.gizmos.shadowmap=o,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof Eg){let i=this.shadow.camera,r=new E(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),s=new E(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z);t.box.set(r,s),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},W5e=class extends Ir{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?P_(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},q_=class extends Ir{constructor(e,t,i){super(e,t,i),this._shapeId=null,this._context=i}updateState(e,t){super.updateState(e,t),this.updateShape(),this.refreshAttachedCloners(t)}updateShape(){let e={...this.data.geometry.extrusion.shape};for(let r in e)typeof e[r]=="string"&&(e[r]=this._context.shared.getVariable(e[r],[this.uuid,"geometry","extrusion","shape",r]));let t;if(e.type==="Custom"){let r=e.shapeId;if(r!==this._shapeId&&this.detachShape(),r){this._shapeId=r;let s=this._context.scene.find(r);s?.data&&(s.attachedPaths.add(this),t=s.geometry.userData?.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let r;switch(e.type){case"Rectangle":r=T_;break;case"Ellipse":r=E_;break;case"Polygon":r=_F;break;case"Star":r=SF;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=r.create({parameters:e}).userData.shape}let i=this.geometry;t&&i.inputs&&(i.inputs.shapeData=t,i.build())}detachShape(){this._shapeId!==null&&this._context.scene.find(this._shapeId)?.attachedPaths.delete(this)}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?P_(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},X_=class extends N_{constructor(e,t,i){super(e,t,i),this.data=t}},Au=class extends w0(No,Mf){constructor(e,t,i){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,i)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let i=Jg.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(i){let r,s;for(let a of Kl.rootOverrideProps)e[a]===void 0?(r===void 0&&(r={...e}),r[a]=i.data[a]):(s===void 0&&(s={}),s[a]=e[a],r===void 0&&(r={...e}),r[a]=sh.apply(i.data[a],e[a]));return this.overrideData=s,r}else return{...Gr.defaultData,...e,...Wn(Gr.defaultData,Kl.rootOverrideProps)}}updateByOp(e,t,i,r){let s;if(this.isInstanceRoot&&!r){if(t=this.transformAssignData(t,i),e.type===0&&e.path.length===0&&this.component)for(let a of Kl.rootOverrideProps)a in e.props&&e.props[a]===void 0&&(s===void 0&&(s={...e,props:{...e.props}}),s.props[a]=this.component.data[a]);else if(e.type===0&&e.path.length>0&&Kl.rootOverrideProps.includes(e.path[0])){let a=e.path[0];s===void 0&&(s={...e,path:[],props:{[a]:t[a]}})}}super.updateByOp(s??e,t,i,r)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){let i=e.scene.find(t.component)??null,r=!1;if(i!==this.oldComponent){if(this.oldComponent){let s=0;for(let a of this.children)if(Zt.is(a))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(a),Y_(a),s+=1;else break;this.children.splice(0,s)}r=!0}if(i){let s={};NN(e,[this.uuid],t.overrides,this,i,i,0,r,s);for(let a of this.children)if(Zt.is(a)){let n=a.data;n.type==="Empty"&&n.animations&&a.traverseEntity(o=>{let l=o.dataPatched;if(o instanceof Ir&&l.bones&&l.boneInverses){let h=o.dataPatched;if(h.bones&&h.boneInverses){let c=h.bones.map(f=>e.scene.find(s[f])),u=h.boneInverses.map(f=>new Fe().fromArray(f)),d=new Bw(c,u);o.bind(d,o.bindMatrix)}}else o.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function Y_(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let i of e.children)Zt.is(i)&&Y_(i)}}function OP(e,t,i,r){return e.component===t&&l_(e.identity,r)?e.overrideData===i?2:1:0}function NN(e,t,i,r,s,a,n,o,l){if(n>50)return!1;if(r.component!==s){if(r.component){let c=r.component.instances.indexOf(r);c>=0&&r.component.instances.splice(c,1)}s.instances.find(c=>c===r)||s.instances.push(r),r.component=s}s instanceof Au&&s.isInstanceRoot&&s.expandInstanceChildren(e);let h=0;for(let c of s.children)if(Zt.is(c)){let u=[...t,...typeof c.identity=="string"?[c.identity]:c.identity],d=Yg.resolve(i,u,1);d!=null&&!(d instanceof Rr)&&(Object.setPrototypeOf(d,Rr.prototype),console.error("wrong prototype"));let f=null,p;if(!o){let m=r.children[h];if(f=Zt.is(m)?m:null,f!==null){let g=OP(f,c,d,u);p=g>=1?f.stateSelection:void 0,g!==2&&(f=null)}if(f===null&&(f=e.scene.findInstance(u)??null,f!==null)){let g=OP(f,c,d,u);if(p=g>=1?f.stateSelection:void 0,g!==2)f=null;else{let v=f.parent.children.indexOf(f);f.parent.children.splice(v,1),r.children.splice(h,0,f),f.parent===r?v<=h&&console.error("not possible"):(f.parent=r,f.matrixWorldNeedsUpdate=!0,f.resetBBoxNeedsUpdate(),f.updateVisible(),e.pendingDeletes.delete(f))}}}if(f===null){let m=d?sh.apply(c.data,d):c.data;Fc.is(m.type)&&(m={...m,type:"Empty"}),f=Ql.createEntity(u,m,e),f.overrideData=d,r.add(f),r.children.splice(r.children.length-1,1),r.children.splice(h,0,f),f.updateState(f.data,e),p&&f.changeSelectedState(p,e),e.scene.registerInstanceAndSetUuid(f)}if(f.isBone){let m=f.identity[f.identity.length-1];l[m]=f.uuid}h+=1,NN(e,t,i,f,c,a,n+1,o,l)}if(!o){let c=h;for(;;){let u=r.children[h];if(Zt.is(u))e.pendingDeletes.add(u);else break;h+=1}r.children.splice(c,h-c)}return!0}var q5e=class extends w0($z,Mf){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}},F1=class extends Ir{constructor(e,t,i){super(e,t,i),this.onBeforeRender=r=>{this.uiCanvas.render(r)},this.uiCanvas=new kN(e+"-canvas",t.geometry.width,t.geometry.height,i),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,i.shared)})}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),e.type===0&&(e.props.frame!==void 0&&this.applyFrame(e.props.frame,i.shared),(e.props.width!==void 0||e.props.height!==void 0)&&this.applySize(e.props,i.shared))}applySize(e,t){let i=e?.width??this.dataPatched.geometry.width,r=e?.height??this.dataPatched.geometry.height;this.uiCanvas.applySize({width:i,height:r}),this.applyGeometryParametersFromFrame(t)}applyFrame(e,t){this.uiCanvas.applyFrame(e),this.applyGeometryParametersFromFrame(t),this.applyMaterialParametersFromFrame({shared:t})}applyGeometryParametersFromFrame(e){let t=this.frame;t&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:t.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:t.cornerRadius,cornerType:0})}),this.localGeometry?.dispose(),this.localGeometry=Qd(this.dataPatched.geometry,e,this.data.flatShading,this))}applyMaterialParametersFromFrame(e){let t=this.frame;if(t){let i=t.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:i.radius,alpha:i.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:i.radius,alpha:i.enabled?1:0}),this.material.reset(this.dataPatched.material,e,!0)}}updateEntity2DByOp(e,t,i,r){this.uiCanvas.updateEntity2DByOp(e,t,i,r),e===this.frameId&&t.type===0&&(t.props.cornerRadius!==void 0?this.applyGeometryParametersFromFrame(r):Pi(t.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:r}))}get frame(){return this.uiCanvas.frame}get frameId(){return this.frame?.uuid}removeInteractionGeometry(e){super.removeInteractionGeometry(e),this.applySize({},e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.applySize({width:e.width,height:e.height},t)}},X5e=class{constructor(e,t,i){this.variables=[],this.currentTextureIndex=0;let r=bi,s=new As,a=new Ch;a.position.z=1;let n={passThruTexture:{value:null}},o=c(d(),n),l=new zi(new Kn(2,2),o);s.add(l),this.setDataType=function(f){return r=f,this},this.addVariable=function(f,p,m){let g=this.createShaderMaterial(p),v={name:f,initialValueTexture:m,material:g,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:jt,magFilter:jt};return this.variables.push(v),v},this.setVariableDependencies=function(f,p){f.dependencies=p},this.init=function(){if(i.capabilities.isWebGL2===!1&&i.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(i.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let f=0;f<this.variables.length;f++){let p=this.variables[f];p.renderTargets[0]=this.createRenderTarget(e,t,p.wrapS,p.wrapT,p.minFilter,p.magFilter),p.renderTargets[1]=this.createRenderTarget(e,t,p.wrapS,p.wrapT,p.minFilter,p.magFilter),this.renderTexture(p.initialValueTexture,p.renderTargets[0]),this.renderTexture(p.initialValueTexture,p.renderTargets[1]);let m=p.material,g=m.uniforms;if(p.dependencies!==null)for(let v=0;v<p.dependencies.length;v++){let y=p.dependencies[v];if(y.name!==p.name){let x=!1;for(let w=0;w<this.variables.length;w++)if(y.name===this.variables[w].name){x=!0;break}if(!x)return"Variable dependency not found. Variable="+p.name+", dependency="+y.name}g[y.name]={value:null},m.fragmentShader=`
uniform sampler2D `+y.name+`;
`+m.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let f=this.currentTextureIndex,p=this.currentTextureIndex===0?1:0;for(let m=0,g=this.variables.length;m<g;m++){let v=this.variables[m];if(v.dependencies!==null){let y=v.material.uniforms;for(let x=0,w=v.dependencies.length;x<w;x++){let _=v.dependencies[x];y[_.name].value=_.renderTargets[f].texture}}this.doRenderTarget(v.material,v.renderTargets[p])}this.currentTextureIndex=p},this.getCurrentRenderTarget=function(f){return f.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(f){return f.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){l.geometry.dispose(),l.material.dispose();let f=this.variables;for(let p=0;p<f.length;p++){let m=f[p];m.initialValueTexture&&m.initialValueTexture.dispose();let g=m.renderTargets;for(let v=0;v<g.length;v++)g[v].dispose()}};function h(f){f.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}this.addResolutionDefine=h;function c(f,p){p=p||{};let m=new ti({uniforms:p,vertexShader:u(),fragmentShader:f});return h(m),m}this.createShaderMaterial=c,this.createRenderTarget=function(f,p,m,g,v,y){return f=f||e,p=p||t,m=m||Wi,g=g||Wi,v=v||jt,y=y||jt,new ei(f,p,{wrapS:m,wrapT:g,minFilter:v,magFilter:y,format:Ki,type:r,depthBuffer:!1})},this.createTexture=function(){let f=new Float32Array(e*t*4),p=new ts(f,e,t,Ki,bi);return p.needsUpdate=!0,p},this.renderTexture=function(f,p){n.passThruTexture.value=f,this.doRenderTarget(o,p),n.passThruTexture.value=null},this.doRenderTarget=function(f,p){let m=i.getRenderTarget(),g=i.xr.enabled,v=i.shadowMap.autoUpdate,y=i.outputEncoding,x=i.toneMapping;i.xr.enabled=!1,i.shadowMap.autoUpdate=!1,i.outputEncoding=rn,i.toneMapping=Hn,l.material=f,i.setRenderTarget(p),i.render(s,a),l.material=o,i.xr.enabled=g,i.shadowMap.autoUpdate=v,i.outputEncoding=y,i.toneMapping=x,i.setRenderTarget(m)};function u(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function d(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}},c1=new y1,sm=new E,Y5e=class{constructor(e){let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,t=this.weightAttribute,i=new Float32Array(e.count/3);for(let s=0;s<e.count;s+=3){let a=1;t&&(a=t.getX(s)+t.getX(s+1)+t.getX(s+2)),c1.a.fromBufferAttribute(e,s),c1.b.fromBufferAttribute(e,s+1),c1.c.fromBufferAttribute(e,s+2),a*=c1.getArea(),i[s/3]=a}this.distribution=new Float32Array(e.count/3);let r=0;for(let s=0;s<i.length;s++)r+=i[s],this.distribution[s]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,i){let r=this.distribution[this.distribution.length-1],s=this.binarySearch(this.randomFunction()*r);return this.sampleFace(s,e,t,i)}binarySearch(e){let t=this.distribution,i=0,r=t.length-1,s=-1;for(;i<=r;){let a=Math.ceil((i+r)/2);if(a===0||t[a-1]<=e&&t[a]>e){s=a;break}else e<t[a]?r=a-1:i=a+1}return s}sampleFace(e,t,i,r){let s=this.randomFunction(),a=this.randomFunction();return s+a>1&&(s=1-s,a=1-a),c1.a.fromBufferAttribute(this.positionAttribute,e*3),c1.b.fromBufferAttribute(this.positionAttribute,e*3+1),c1.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(c1.a,s).addScaledVector(c1.b,a).addScaledVector(c1.c,1-(s+a)),i!==void 0&&c1.getNormal(i),r!==void 0&&this.colorAttribute!==void 0&&(c1.a.fromBufferAttribute(this.colorAttribute,e*3),c1.b.fromBufferAttribute(this.colorAttribute,e*3+1),c1.c.fromBufferAttribute(this.colorAttribute,e*3+2),sm.set(0,0,0).addScaledVector(c1.a,s).addScaledVector(c1.b,a).addScaledVector(c1.c,1-(s+a)),r.r=sm.x,r.g=sm.y,r.b=sm.z),this}};function K5e(e){let t=new Float32Array(e*e*2);for(let i=0;i<e;i++)for(let r=0;r<e;r++){let s=i*e+r;t[s*2+0]=i/(e-1),t[s*2+1]=r/(e-1)}return t}function Q5e(e){let t=Math.ceil(Math.sqrt(e));return Math.max(t,1)}function Z5e(e,t){let i=new zi(e.geometry,e.material),r=[],s=[],a=new E,n=new E;i.geometry.index!==null&&(i.geometry=i.geometry.toNonIndexed());let o=new Y5e(i).build();for(let c=0;c<t;c++)o.sample(a,n),r.push(a.x,a.y,a.z),s.push(n.x,n.y,n.z);let l=new Float32Array(r),h=new Float32Array(s);return{positions:l,normals:h}}function RP(e,t){let i=e,r=new Float32Array(4*t*t);for(let a=0;a<t*t;a++)r[4*a]=i[3*a],r[4*a+1]=i[3*a+1],r[4*a+2]=i[3*a+2],r[4*a+3]=0;let s=new ts(r,t,t,Ki,bi);return s.needsUpdate=!0,s}function J5e({size:e}){let t=new Float32Array(4*e*e);for(let r=0;r<e*e;r++)t[4*r]=r,t[4*r+1]=0,t[4*r+2]=0,t[4*r+3]=0;let i=new ts(t,e,e,Ki,bi);return i.needsUpdate=!0,i}function $5e(e){let t=new Float32Array(4*e*e);for(let r=0;r<e*e;r++)t[4*r]=0,t[4*r+1]=0,t[4*r+2]=0,t[4*r+3]=0;let i=new ts(t,e,e,Ki,bi);return i.needsUpdate=!0,i}var e6e=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform float uTime;
uniform float uSpeed;     // update speed of the particles
uniform vec3 uWorldOffset;    
uniform vec4 uWorldQuaternion;
uniform float uMaxLifeTime;
uniform vec3 uEmitterSize;
uniform float uFPSRatio;     // 1  for 60 FPS

float random (vec2 st) {
    return fract(sin(dot(st.xy,
        vec2(12.9898,78.233)))*
        43758.5453123);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
    vec3 acceleration = force / mass;
    
    return acceleration;
  }
  

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted
    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided
    float lifeTime = uMaxLifeTime;

    // Calculate the position adjustment based on collision
    //     if (collisionFlag > .5) {  
    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0
    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise
    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);

    // Update position based on collision or normal movement
    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);
    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);

    // EMISSION RATE - BIRTH
    // if (isSpawning == 1.0) {
    // Better Approach to avoid If statement
    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;
    originalPosition = mix(originalPosition, newPosition, isSpawning);
    position = mix(position, originalPosition, isSpawning);;
    timeStart = mix(timeStart, uTime, isSpawning);

    // Calculate timeLeft for life normalization
    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);
    float life_Normalize = timeLeft / lifeTime;

    // Use isActive to blend between the calculated color and black
    vec4 activeColor = vec4(position, life_Normalize);
    // if (isActive == 1.0) {
    gl_FragColor = mix(vec4(0.0), activeColor, isActive);

}
`,t6e=`

    vec3 mod289(vec3 x) {
      return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 mod289(vec4 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 permute(vec4 x) {
        return mod289(((x*34.0)+1.0)*x);
    }
    
    vec4 taylorInvSqrt(vec4 r)
    {
    return 1.79284291400159 - 0.85373472095314 * r;
    }
    
    vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

    float snoise(vec3 v)
    {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y
    
    // Permutations
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
    
    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
    float n_ = 0.142857142857; // 1.0/7.0
    vec3  ns = n_ * D.wyz - D.xzx;
    
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)
    
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
    
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    
    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
    
    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);
    
    //Normalise gradients
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    
    // Mix final noise value
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                  dot(p2,x2), dot(p3,x3) ) );
    }
    
    vec3 snoiseVec3( vec3 x ){
    
      float s  = snoise(vec3( x ));
      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
      vec3 c = vec3( s , s1 , s2 );
      return c;
    
    }
    
      
    vec3 curlNoise( vec3 p, float seed){
      p += seed;
      const float e = .1;
      vec3 dx = vec3( e   , 0.0 , 0.0 );
      vec3 dy = vec3( 0.0 , e   , 0.0 );
      vec3 dz = vec3( 0.0 , 0.0 , e   );
    
      vec3 p_x0 = snoiseVec3( p - dx );
      vec3 p_x1 = snoiseVec3( p + dx );
      vec3 p_y0 = snoiseVec3( p - dy );
      vec3 p_y1 = snoiseVec3( p + dy );
      vec3 p_z0 = snoiseVec3( p - dz );
      vec3 p_z1 = snoiseVec3( p + dz );
    
      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;
    
      const float divisor = 1.0 / ( 2.0 * e );
      return normalize( vec3( x , y , z ) * divisor );
    
    }


// Classic Perlin noise
float cnoise(vec3 P)
{
  vec3 Pi0 = floor(P); // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
  return 2.2 * n_xyz;
}


vec3 fbm_vec3(vec3 p, float frequency, float offset)
{
  return vec3(
    cnoise((p+vec3(offset))*frequency),
    cnoise((p+vec3(offset+20.0))*frequency),
    cnoise((p+vec3(offset-30.0))*frequency)
  );
}

`,i6e=`
  #ifdef USE_COLLIDER
    float restitution = max(uBounce * 2., .01); // Energy Loss
    // SPHERE COLLIDER
    // **************************************************************
    #ifdef USE_SPHERE_COLLIDER       
      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
      vec3 radii = uColliderSize;
      // Adjust position relative to collider
      vec3 relPos = position - uColliderPos;
      // Apply rotation of the collider to the relative position
      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
      // Scale relative position by radii (for ellipsoid collision detection)
      vec3 scaledPos = relPos / radii;
      // Calculate ellipsoidal distance
      float dist = length(scaledPos); // Distance in terms of ellipsoid
      
      // Check for collision
      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {
          // Compute the normal at the collision point, accounting for particle size
        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          
        // Compute the normal at the collision point
        vec3 normal = ellipsoidNormal(adjustedPos, radii);
        // Rotate the normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);
        // Reflect the velocity vector off the normal
        velocity = reflect(velocity, normal) * restitution;

        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif

    // BOX COLLIDER or PLANE COLLIDER 
    // **************************************************************
    #ifdef USE_BOX_COLLIDER
      // Box dimensions and repulsion variables
      vec3 boxHalfSize = uColliderSize / 2.0;
      // Convert world position to box's local space
      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
      // Collision detection
      vec3 localDistance = abs(localPos) - boxHalfSize;
      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    

      // Collision Detected
      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      
        // Find the nearest face normal for bounce direction
        vec3 normal;
        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {
            normal = vec3(sign(localPos.x), 0.0, 0.0);
        } else if (localDistance.y > localDistance.z) {
            normal = vec3(0.0, sign(localPos.y), 0.0);
        } else {
            normal = vec3(0.0, 0.0, sign(localPos.z));
        }            
        // Rotate normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);      
        // Reflect velocity and apply repulsion force
        velocity = reflect(velocity, normal) * restitution;
        
        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif      
  #endif      
  // END COLLIDER    
`,r6e=`
  #ifdef USE_ATTRACTOR

      #ifdef USE_SPHERE_COLLIDER      
        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
        vec3 radii = uColliderSize;
        // Adjust position relative to collider
        vec3 relPos = position - uColliderPos;
        // Apply rotation of the collider to the relative position
        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
        // Scale relative position by radii (for ellipsoid collision detection)
        vec3 scaledPos = relPos / radii;
        // Calculate ellipsoidal distance
        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid
        float insideCheck = 1.0;

      #endif


      #ifdef USE_BOX_COLLIDER
        // Box dimensions
        vec3 boxHalfSize = uColliderSize / 2.0;
        // Convert world position to box's local space
        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
        vec3 localDistance = abs(localPos) - boxHalfSize;
        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));
        float insideCheck = particleSize;
      #endif      
  
      // Apply vortex force inside the Helper
      #ifdef USE_FORCE_LOCAL_SPACE
        if (distToSurface <= insideCheck ) {    
            // Define parameters for the attractor field
            #ifdef USE_SPHERE_COLLIDER      
              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed
            #endif

            #ifdef USE_BOX_COLLIDER
              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed
              #endif

            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)
          
            // Use the same radii calculation code as for the collider
            vec3 attractorRadii = uColliderSize;
            // Adjust position relative to attractor center
            vec3 relPos = position - uColliderPos;
            // Apply rotation of the collider to the relative position
            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
            // Scale relative position by radii (for ellipsoid attraction)
            vec3 scaledPos = relPos / attractorRadii;

            // Calculate ellipsoidal distance as attractor radius
            float attractorRadius = length(scaledPos);
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * attractorStrength;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= attractorDamping;
        }
      #else 
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= uForceDamping;
      #endif    
  #endif      
`,s6e=`
  #ifdef USE_VORTEX
    // Box dimensions
    vec3 boxHalfSize = uColliderSize / 2.0;
    // Convert world position to box's local space
    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
    vec3 localDistance = abs(localPos) - boxHalfSize;
    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));

    // Apply vortex force inside the box
    if (distToSurface <= particleSize) {
      float vortexStrength = uForceIntensity;
      vec3 localTopCenter = vec3(0.0, 0., 0.0);

      // Transform the local top center to the world space
      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);
      // Calculate the vector from particle to vortex center
      vec3 vortexVector = vortexCenter - position;

      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector
      // Note: important to add a tiny z component to the up vector to avoid instability
      vec3 upVector = vec3(0.0, 1.0, 0.01);
      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));
      rotationAxis = normalize(rotationAxis);

      // Add rotational component to velocity
      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; 

      vec3 rotationVelocity = rotationAxis * rotationSpeed;
      // velocity += rotationVelocity * 0.005 ;
      velocity = rotationVelocity * 0.005 ;

      // Calculate vortex force
      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;
      // Apply the vortex force to the particle
      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);
      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);
    }
  #endif      
`,a6e=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform sampler2D uDirections;     
uniform vec3 uDirectionsAxis;
uniform vec4 uWorldQuaternion;
uniform vec3 uGravity;        
uniform float uNoiseStrength;     // Variation of the noise
uniform float uNoiseScale;        // Scale of the noise
uniform float uNoiseSeed;         // Seed of the noise
uniform float particleSize;
uniform float uSpeed;     // update speed of the particles
uniform float uRandomMassFactor;

// COLLIDER
uniform vec3 uColliderPos;                // Collider Position
uniform vec3 uColliderSize;               // Collider Dimension
uniform vec4 uColliderQuaternion;         // Collider Rotation
uniform vec4 uColliderQuaternionInvert;   // Collider Rotation
uniform float uBounce;                    // Bounce factor
uniform float uForceDamping;
uniform float uForceIntensity;


`+t6e+`
float rand(vec2 co){
    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
 } 
vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
  
  return acceleration;
}

vec4 conjugate(vec4 q) {
  return vec4(q.w, -q.x, -q.y, -q.z);
}

// Function to compute the normal of the ellipsoid at a given point
vec3 ellipsoidNormal(vec3 p, vec3 radii) {
  return normalize(p / (radii * radii));
}

float friction = .3;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    vec3 directions = texture2D( uDirections, vUv ).xyz;    
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float mass = rand(originalPosition.xy) * 0.5 + 0.5;
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active
    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision

    // Randomness Mass
    mass = (1.0 - (uRandomMassFactor * mass));
    
    if (isActive == 1.0) {
      // **************************************************************
      // FORCES NOISES
      // **************************************************************
      #ifdef USE_CURL_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {
          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;
        }
      #endif
      // **************************************************************
      #ifdef USE_SIMPLEX_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {
          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);
        }
      #endif
      // ************************************************************** 
      #ifdef USE_FBM_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), uNoiseSeed);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      
          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;
        }
      #endif

      // COLLIDER
      ${i6e}
      // ATTRACTION
      ${r6e}  
      // VORTEX
      ${s6e}
    } 
    // End isActive

    // SPAWN BIRTH 
    // **************************************************************
    // if (isSpawning == 1.)
    #ifdef USE_NORMALS
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);
    #else
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    
    #endif
    
    // if (collisionFlag == 0.0)
    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);

    gl_FragColor = vec4(velocity, collisionFlag);
}
`,UN=`

  // Linear Fade In
  float linearFadeIn(float t) {
    return t;
  }


  // linear fade out
  float linearFadeOut(float t) {
    return 1.0 - t;
  }
  
  float linearInOut(float t) {
    return t < 0.5 ? t :  (1.0 - t);  
  }

    // lerp
    float lerp(float a, float b, float t) {
      return a + (b - a) * t;
    }

  // Ease In Out Quart
  float exponentialInOut(float t) {
    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :
    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :
    1.0;
   }

  // constant
  float constant(float t) {
    return 1.0;
  } 
`,n6e=`

float rand(vec3 co){
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

vec3 applyQuaternionToVector( vec4 q, vec3 v ){
  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
    
  return acceleration;
}
`,o6e=`
vec3 rgb2xyz (in vec3 rgb) {
    float r = rgb.r;
	float g = rgb.g;
	float b = rgb.b;

	r = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);
	g = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);
	b = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);

	float x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);
	float y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);
	float z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);
    
    vec3 xyz = vec3(
        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,
        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,
        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0
    );
    return(xyz);
}

vec3 xyz2lab (in vec3 xyz) {
	float x = xyz.x / 95.047;
	float y = xyz.y / 100.0;
	float z = xyz.z / 108.883;

	x = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);
	y = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);
	z = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);

    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));
    return(lab);
}

vec3 rgb2lab(in vec3 rgb) {
    vec3 xyz = rgb2xyz(rgb);
    vec3 lab = xyz2lab(xyz);
    return(lab);
}

vec3 xyz2rgb (in vec3 xyz) {
	float x = xyz.x / 100.0;
	float y = xyz.y / 100.0;
	float z = xyz.z / 100.0;
	
    
	float r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);
	float g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);
	float b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);

	r = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;
	g = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;
	b = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;

	r = min(max(0.0, r), 1.0);
	g = min(max(0.0, g), 1.0);
	b = min(max(0.0, b), 1.0);

	return(vec3(r, g, b));
}

vec3 lab2xyz (in vec3 lab) {
    float l = lab.x;
	float a = lab.y;
	float b = lab.z;

  	float y = (l + 16.0) / 116.0;
	float x = a / 500.0 + y;
	float z = y - b / 200.0;

	float y2 = pow(y, 3.0);
	float x2 = pow(x, 3.0);
	float z2 = pow(z, 3.0);

  	y = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;
	x = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;
	z = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;

	x *= 95.047;
	y *= 100.0;
	z *= 108.883;

	return(vec3(x, y, z));
}
vec3 lab2rgb (in vec3 lab) {
    vec3 xyz = lab2xyz(lab);
    vec3 rgb = xyz2rgb(xyz);
    return(rgb);
}

`,l6e=`
  uniform sampler2D uPosition;
  uniform float uSize;
  uniform float uSizeEnd;
  uniform vec3 uWorldOffset;
  uniform vec4 uWorldQuaternion;
  // Billboard Behavior - Currently at Zero, but we can change that
  uniform float uRotation;
  uniform float uRotationEnd;
  uniform vec2 center;

  // Randomness
  uniform float uRandScaleFactor;
  uniform float uRandRotationFactor;

  attribute vec2 ref;

  varying float v_LifeLeft;    // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  ${n6e}
  ${UN}
`,h6e=({easeSize:e="linearFadeOut"})=>`
  vUv = uv;  
  vRef = ref;
  // Normalized LifeTime 1 to 0
  float lifeLeft = texture2D(uPosition, ref).w;
  v_LifeLeft = lifeLeft;
  // Position From DataTexture Simulation
  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;
  // Apply World Quaternion
  pos = applyQuaternionToVector(uWorldQuaternion, pos);  
            
  #ifdef  USE_SIZE_END
    // Scaled Over Time
    float t = 1. - lifeLeft;
    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd
    vec3 scaledPosition = position * vec3(currentSize);
  #else
    // Change Size Behavior over LifeTime
    float easeSize = ${e}(1. - lifeLeft);
    // Scaled Over Time
    vec3 scaledPosition = position * vec3(uSize * easeSize);
  #endif

  // Billboard Behavior
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    
  // Randomness 
  float randRef = rand(ref);
  scale *= (1.0 - (uRandScaleFactor * randRef));
  // Rotation
  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);
  float originalRotation = (1.0 - uRotation) * 2.0 * PI;
  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;
  // OverTime
  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);

  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;
  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;
  
  mat4 instanceMatrix = mat4(
    vec4(1.0, 0.0, 0.0, 0.0),
    vec4(0.0, 1.0, 0.0, 0.0),
    vec4(0.0, 0.0, 1.0, 0.0),
    vec4(pos.x, pos.y, pos.z, 1.0)
  );  

  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix  * mvPosition;   
`,c6e=`
  uniform vec4 uColor;                // start color
  uniform vec4 uColor2;               // end color
  uniform sampler2D uTexture;         // texture
  varying float v_LifeLeft;   // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  float random(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
  }
  `+UN+`  
  ${o6e}

`,u6e=({easeOpacity:e="linearFadeOut"})=>`  
  // if Particle is dead, hide it
  if (v_LifeLeft <= 0.005 ) {
    discard;
  }

  #ifdef USE_RANDOM_COLORING
    float randVal = random(vRef); // Generate a random value based on the reference
    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors
  #else
    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);
  #endif

  // Opacity over Life Time
  float finalAlpha = ${e}(1. - v_LifeLeft);  
  vec4 textureColor = texture2D(uTexture, vUv).rgba; 
  finalColor = textureColor.rgb * color.rgb;
  finalAlpha = color.a * textureColor.a * finalAlpha;
  
  gl_FragColor = vec4(finalColor, finalAlpha);     

`,d6e=class extends ti{constructor(e,t){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,t),this.context=t}reset(){}init(e,t){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],Ur.startContext(Ur.globalContext),this.lightLayer=new Tn(0,"",{...Jr.defaultData("light","phong"),visible:!1},new R_,{},t.shared),Ur.endContext(Ur.globalContext),this.build()}updateState(e){e.coloring!==void 0&&(this.isColoringRandom=e.coloring==="random"),e.color!==void 0&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),e.color2!==void 0&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),e.size!==void 0&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),e.ease!==void 0&&(this.easeOpacity=e.ease,this.build()),e.easeSize!==void 0&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new FF;return e.needsJitter=this.needsJitter,e.addFragmentParsCode(Gge),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode(Hge),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(l6e),e.addFragmentParsCode(c6e),e.addVertexFinalCode(h6e({easeSize:this.easeSize})),e.addFragmentFinalCode(u6e({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},k9=class{constructor(e,t,i,r){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=i,this.textureSize=Q5e(t);let s=1;this.targetMesh=r?.geometry.type==="BufferGeometry"||r?.type==="Mesh"&&r&&r.geometry.hasAttribute("position")&&r.geometry.hasAttribute("normal")?r:this.getMesh(i,s);let{positions:a,dataTexture:n,dataTextureNormals:o}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(i,s));this.positionsTexture=n,this.positionsAttribute=a,this.directionsTexture=o}createPositions(e,t){let{positions:i,normals:r}=Z5e(t,e*e),s=RP(i,e),a=RP(r,e);return{dataTexture:s,positions:i,dataTextureNormals:a}}getMesh(e,t){let i=null;switch(e){case"SphereEmitterShape":{i=new pu(t*.5,32,32);break}case"TorusEmitterShape":{i=new hB(t*.5,.3,15,40);break}case"ConeEmitterShape":{i=new Uw(t,t,15);break}case"BoxEmitterShape":{i=new sn(t,t,t);break}case"PlaneEmitterShape":{i=new Kn(t,t),i.rotateX(-Math.PI/2);break}case"MeshEmitterShape":{i=new pu(t,32,32);break}default:{i=new pu(t,32,32);break}}return new zi(i,new $o({color:16711680}))}applyToShader(e,t){this.size=new E().fromArray(t.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function H2(e){let t={...e},i=jg.defaultData;t.forceFieldObjectId&&(t.colliderEntityId=t.forceFieldObjectId);let r={...i.shape,...t.shape},s={...i.renderMaterial,...t.renderMaterial};return{...i,...t,shape:r,renderMaterial:s}}var f6e=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU

uniform sampler2D uIndex; // Texture with corresponding index
uniform float uLastIndexEmitted; // Last emitted index
uniform float uParticlesToEmit; // Number of particles to emit on that frame
uniform float uTime;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    float particleIndex = texture(uIndex, vUv).x;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;


    // ********** Detect Colision to Create a flag and use it in position **********
    // We are doing this here, so

    // ********** Emit Particles **********
    // X = isSpawning 0.0 or 1.0
    // Y = isActive 0.0 or 1.0
    // Check if the vertex index is between the first value and the last value
    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {
    //     // Emit a particle by writing 1 to the red channel of the color output
    //     // r: 1. == emit the particle
    //     // g: 1. == particle is now active
    //     timeStart = uTime;
    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);
    // } else {
    //     // The Particle is either already emitted or not in the range of the particles to emit
    //     // Do not emit a particle by writing 0 to the red channel of the color output        
    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);
    // }
    // Determine if the particle is within the emission range
    float emitLowerBound = step(uLastIndexEmitted, particleIndex);
    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);
    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise

    // Set timeStart and color
    timeStart = mix(timeStart, uTime, emitParticle);
    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);


}
`,F9=10,p6e=class extends yi{constructor(e,t){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new Tae,this.currentWorldPosition=new E,this.systemQuaternion=new wt,this.worldGravity=new E(0,0,0),this.directionAxis=new E(0,0,0),this.colliderV3=new E(0,0,0),this.colliderQuaternion=new wt(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=t,this.shared=t.context.shared;let i=t.data;this.material=new d6e(i.renderMaterial,t.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:i.renderMaterial.color},uColor2:{value:i.renderMaterial.color2},uPosition:{value:new E(0,0,0)},uEmissionData:{value:new E(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new E(0,0,0)},uWorldQuaternion:{value:new Mt(0,0,0,1)},uRandScaleFactor:{value:i.randomScale??0},uRandRotationFactor:{value:i.randomRotation??0},uRotation:{value:i.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:i.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,i.renderMaterial.texture),this.init(i)}setTexture(e,t){let i=t.data;if(typeof t=="string"){let r=this.shared.image(t),s=new $i(r.img);s.needsUpdate=!0,e.uTexture.value=s;return}if(typeof i!="string"){let r=new Image;r.onload=()=>{let n=new $i(r);n.needsUpdate=!0,e.uTexture.value=n};let s=new Blob([i],{type:"image/*"}),a=URL.createObjectURL(s);r.src=a}}updateGeometryAttributes(e,t){let i=K5e(t);!this.emitterShape?.positionsAttribute||e.geometry.setAttribute("ref",new Od(i,2))}applyWorldSpace(){if(!this.system.started||!this.worldSpace||!this.positionSimRT||!this.velocitySimRT)return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,t){if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset){this.reset();return}this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let i=1e3/t,r=this.targetFPS/i,s=this.previousRatio+(r-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=s,this.previousRatio=s;let a=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=a,this.material.uniforms.uPosition.value=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT)?.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0],t=this.simFeaturesDefinition.USE_COLLIDER||this.simFeaturesDefinition.USE_ATTRACTOR||this.simFeaturesDefinition.USE_VORTEX;if(e.destroyedInAction&&t&&this.init(H2({...this.system.data,colliderEntityId:null})),!e||e.destroyedInAction)return;e.getWorldPosition(this.colliderV3),this.colliderV3.y===0&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let i=e.data.size;this.colliderV3.fromArray(i),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,t){if(!this.velocitySimRT||!this.positionSimRT)return;t[2]==="size"&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),t[2]==="sizeEnd"&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let i=(r,s)=>{let a=[...this.system.data.shape.size];a[r]=s,this.updateParticleState({shape:{...this.system.data.shape,size:a}})};t[2]==="shape_size_0"&&i(0,e),t[2]==="shape_size_1"&&i(1,e),t[2]==="shape_size_2"&&i(2,e),t[2]==="speed"&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/F9),t[2]==="gravity"&&this.worldGravity.set(0,e/100,0),t[2]==="noiseStrength"&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),t[2]==="noiseScale"&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),t[2]==="direction_x"&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),t[2]==="direction_y"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),t[2]==="direction_z"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){if(!(!this.positionSimRT||!this.velocitySimRT)){if(this.shouldReInitGPUCompute(e)&&this.init(H2(this.system.data)),e.life!==void 0&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),e.speed!==void 0&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/F9),e.collisionBounce!==void 0&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),e.noiseStrength!==void 0&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),e.noiseScale!==void 0&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),e.noiseSeed!==void 0&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),e.randomMass!==void 0&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),e.renderMaterial?.size!==void 0){let t=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(t)}if(e.renderMaterial?.spriteRotation!==void 0&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),e.shape!==void 0){let t=e.shape.size??this.system.data.shape.size,i=[Number(this.shared.getVariable(t[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(t[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(t[2],[this.uuid,"particles","shape_size_2"]))],r={...H2(this.system.data).shape,size:i};this.emitterShape?.applyToShader(this.positionSimRT.material.uniforms,r)}if(e.gravity!==void 0&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),e.direction!==void 0){let t=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(t),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}e.randomRotation!==void 0&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),e.randomScale!==void 0&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(e.forceIntensity!==void 0&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),e.forceDambing!==void 0&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let t=[Number(e[0])*Ke.DEG2RAD,Number(e[1])*Ke.DEG2RAD,Number(e[2])*Ke.DEG2RAD],i=new Vr(t[0],t[1],t[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(i).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:t,rootObjectType:i,colliderEntityId:r,shape:s,emitTimeDuration:a,emitTimeCycle:n,life:o,directionMode:l,noiseType:h}=e;return t!==void 0||i!==void 0||r||r===null||n!==void 0||s!==void 0||o!==void 0||a!==void 0||l!==void 0||h!==void 0}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:e.emitTimeCycle==="infinity"?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to 100000."),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let t=setInterval(()=>{if(this.emitterShape)if(isNaN(this.emitterShape.positionsTexture.source.data.data[0])){this.init(e);return}else clearInterval(t)},100);if(!this.emitterShape)return;let i=new X5e(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),r=this.updateSimulationDefinition(e),s=i.addVariable("uCurrentPosition",r+e6e,this.emitterShape.positionsTexture),a=i.addVariable("uCurrentVelocity",r+a6e,this.emitterShape.directionsTexture),n=i.addVariable("uCurrentEmissionRate",f6e,$5e(this.emitterShape.textureSize));i.setVariableDependencies(s,[s,a,n]),i.setVariableDependencies(a,[s,a,n]),i.setVariableDependencies(n,[s,a,n]);let o=J5e({size:this.emitterShape.textureSize}),l={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new E(0,0,0)},uWorldQuaternion:{value:new Mt(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new E(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};s.material.uniforms=l;let h=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(h),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let c=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),u={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new Mt(0,0,0,1)},uColliderPos:{value:new E(0,0,0)},uColliderSize:{value:new E(0,0,0)},uForceIntensity:{value:c?c.forceIntensity:0},uForceDamping:{value:c?c.forceDambing:0},uColliderQuaternion:{value:new Mt(0,0,0,1)},uColliderQuaternionInvert:{value:new Mt(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/F9}};a.material.uniforms=u;let d={uIndex:{value:o},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};n.material.uniforms=d;let f=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],p={...H2(this.system.data).shape,size:f};this.emitterShape.applyToShader(s.material.uniforms,p),i.init(),this.gpuCompute=i,this.positionSimRT=s,this.velocitySimRT=a,this.emissionRateSimRT=n,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){let t=Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),i=Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),r=Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]));return[t,i,r]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let i=this.system.getColliderData(e.colliderEntityId);switch(i?.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0;break}let r=i?.colliderType;r==="sphere"&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),r==="box"&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),i?.forceRange==="helper"&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}e.directionMode==="normals"&&(this.simFeaturesDefinition.USE_NORMALS=!0),e.noiseType==="curl"&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),e.noiseType==="simplex"&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),e.noiseType==="fbm"&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let t="";for(let[i,r]of Object.entries(this.simFeaturesDefinition))r&&(t+=`#define ${i}
`);return t}createShape(e,t){this.emitterShape&&this.emitterShape.dispose();let i=new E(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if(e.type==="MeshEmitterShape"){let r=null;return this.system.context.scene.traverseEntity(s=>{s.uuid===e.fromMeshId&&(r=s)}),r?new k9(i,t,e.type,r):new k9(i,t,"SphereEmitterShape")}else return new k9(i,t,e.type)}createPrimaryEmitter(e){let t,i=e*e;return t=new Vse(new Kn(1,1,1),this.material,i),this.updateGeometryAttributes(t,e),this.material.needsUpdate=!0,t.onBeforeRender=()=>{this.applyWorldSpace()},t}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:t,loopDuration:i=0}){return Math.ceil(e*(t+i))}dispose(){!this.gpuCompute||(this.rootObject?.parent?.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),this.emitterShape?.dispose())}GoEmitSomeParticles(e,t){let i=e-this.lastEmitTime,r=1/t;if(i>=r){let s=Math.max(1,Math.floor(i/r));return this.lastEmitTime=e,this.emittedParticlesAmount+s>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=s,s}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(H2(this.system.data))}startEmitting(e){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=e}stopEmitting(){this.isEmitting=!1}},id=class extends ns{constructor(e,t,i){super(e,t),this.type="ParticleSystem",this.geometry=new rt,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.timeoutId=void 0,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=r=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(r))},this.context=i,this.data={...t,...H2(t)},this.geometry.setAttribute("position",new Xe([],3)),this.material=new $o({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new p6e(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let t=this.data.emitTimeCycle==="one_time";if((this.data.emitTimeCycle==="loop"||t)&&this.currentLoopTime>this.data.emitTimeDuration*1e3&&(this.stopped||(this.stop(),t||this.start(this.data.emitTimeDelay*1e3))),this.emitter&&this.started){let i=this.actualTime/1e3;this.emitter.update(i,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(t=>t.identity===e)}getColliderData(e){let t=this.colliderEntities.find(i=>i.identity===e);return t?t.data:null}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),Pi(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...t1.drop(e,1).props}}),Pi(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...t1.drop(e,1).props}})}updateState(e,t){super.updateState(e,t),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(e.colliderEntityId!==void 0&&e.colliderEntityId!==null){let t=this.context.scene.find(e.colliderEntityId);this.colliderEntities=t?[t]:[]}e.colliderEntityId===null&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){if(this.currentLoopTime=0,e){this.timeoutId=window.setTimeout(()=>{this.start(0)},e);return}this.started=!0,this.stopped=!1,this.isFrozen=!1,this.emitter?.startEmitting(this.actualTime/1e3)}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){this.stopped=!0,this.currentLoopTime=0,this.emitter?.stopEmitting(),clearTimeout(this.timeoutId)}reset(){this.started=!1,this.stopped=!1,this.emitter?.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};function m6e(){try{let e=window.location.href;if(e.includes("reducesubdiv=")){let t=e.indexOf("reducesubdiv=")+13;return parseInt(e.slice(t,t+1))}}catch{}}var N9=m6e();function g6e(e,t,i){N9!==void 0&&(t?.geometry?.subdivisions??0)>N9&&(console.log("reducing subdivisions",t.name,t.geometry.subdivisions),t.geometry.subdivisions=N9);let r;return t.geometry.type==="TextGeometry"?new N_(e,t,i):t.geometry.type==="InputGeometry"?new X_(e,t,i):(t.geometry.type==="SubdivGeometry"?r=new Zd(e,t,i):t.geometry.type==="PathGeometry"?r=new q_(e,t,i):t.geometry.type==="VectorGeometry"?r=new W5e(e,t,i):t.geometry.type==="BooleanGeometry"?r=new Vc(e,t,i):t.geometry.type==="ShapeBlendGeometry"?r=new jc(e,t,i):t.geometry.type==="UIGeometry"?r=new F1(e,t,i):r=new Ir(e,t,i),r)}function K_(e,t,i){return console.assert(t.type!==void 0),t.type==="Mesh"?g6e(e,t,i):t.type==="Empty"?new Su(e,t):t.type==="Particle"?new id(e,t,i):t.type==="ParticleCollider"?new td(e,t,i):t.type==="Splat"?new Su(e,t):t.type==="Bone"?new q5e(e,t):t.type==="Page"?new $r(e,t,i):t.type==="PointLight"?new H5e(e,t,i):t.type==="SpotLight"?new PN(e,t,i):t.type==="DirectionalLight"?new TN(e,t,i):t.type==="Component"||t.type==="Instance"?new Au(e,t,i):Fc.is(t.type)?new V1(e,t):(console.error(t),new Su(e,t))}Ql.createEntity=K_;function v6e(e,t,i){let r=K_(e.identity,t,i),s=e.children,a=e.attachedPaths,n=e.parent,o=e.component,l=e.instances,h=e.overrideData,c=e.uuid,u=e.stateSelection;e.dispose();for(let d of Object.keys(e))delete e[d];Object.setPrototypeOf(e,Object.getPrototypeOf(r));for(let d of Object.keys(r))e[d]=r[d];e.children=[...e.children,...s],e.attachedPaths=a,e.parent=n,e.component=o,e.instances=l,e.uuid=c,e.overrideData=h,e.updateState(e.data,i),u&&e.changeSelectedState(u,i),e.resetBBoxNeedsUpdate()}Ql.changeEntityProptotype=v6e;Ql.Cloner=va;function y6e(e,t,i,r){e.updateByOp(t,i,r,!1)}var ac=5,rd=new rt;rd.setAttribute("position",new mt(new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),3));var Bm=class extends yae{constructor(e){super({...e,depthTest:!1,depthWrite:!1,glslVersion:u6,vertexShader:`
				precision highp float;
				in vec3 position;
				void main() {
					gl_Position = vec4(position, 1);
				}
			`})}customProgramCacheKey(){return""}};function x6e(){return{shapeInput:()=>`
			const float posRowCoord = ${.5/ac};  // vec4: px py pz opType
			const float quatRowCoord = ${1.5/ac};  // vec4: qx qy qz qw
			const float param1RowCoord = ${2.5/ac};// vec4: type param1 param2 param3
			const float param2RowCoord = ${3.5/ac};// vec4: blendRange roundness scale param4
			const float colorRowCoord = ${4.5/ac}; // vec4: r g b a
			uniform sampler2D shapesDataTexture;
			vec4 shapePos(float iin) { 
				vec4 r = texture(shapesDataTexture, vec2(iin, posRowCoord));
				return r;
			}
			vec4 shapeQuat(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, quatRowCoord));
				return r;
			}
			vec4 shapeParams1(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, param1RowCoord));
				return r;
			}
			vec4 shapeParams2(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, param2RowCoord));
				return r;
			}
			vec4 shapeColor(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, colorRowCoord));
				return r;
			}
		`,getxyzi:`
			// this code must complement lookup
			float xi = mod(gl_FragCoord.x - 0.5, VOXEL_RESOLUTION);
			float yi = mod(gl_FragCoord.y - 0.5, VOXEL_RESOLUTION);
			float zi = floor((gl_FragCoord.x - 0.5) * INV_VOXEL_RESOLUTION) + floor((gl_FragCoord.y - 0.5) * INV_VOXEL_RESOLUTION) * Z_LAYERS_PER_ROW;
		`,lookup:`
			uniform sampler2D potentialPassTexture;
			uniform sampler2D voxelPassTexture; // includes normal (in xyz) and key (in w)
			
			// box or marching cube lookup value in value texture, integer box coord inputs
			// this code must complement codebits.getxyzi
			vec4 look(float xi, float yi, float zi, sampler2D rt) {// range 0 .. numv etc
				vec2 uv = vec2(
					mod(zi, Z_LAYERS_PER_ROW) + (xi + 0.5) / VOXEL_RESOLUTION,
					floor(zi / Z_LAYERS_PER_ROW) + (yi + 0.5) / VOXEL_RESOLUTION
				); 
				uv /= Z_LAYERS_PER_ROW;
				return texture(rt, uv);
			}
		`,getpart:`
			float getpart(inout float a, float b) {
				float t = floor(a/b);
				float r = a - t*b;
				a = t;
				return r;
			}
		`,triTable:new Float32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,1,1,8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,10,2,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,9,9,2,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,2,8,10,2,8,9,10,-1,-1,-1,-1,-1,-1,-1,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,0,0,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,11,3,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,1,11,9,1,11,8,9,-1,-1,-1,-1,-1,-1,-1,1,10,3,3,10,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,10,0,10,8,0,10,11,8,-1,-1,-1,-1,-1,-1,-1,0,9,3,9,11,3,9,10,11,-1,-1,-1,-1,-1,-1,-1,10,8,9,11,8,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,4,4,3,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,7,4,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,4,1,7,4,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,2,1,7,4,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,4,3,4,0,3,10,2,1,-1,-1,-1,-1,-1,-1,-1,10,2,9,2,0,9,7,4,8,-1,-1,-1,-1,-1,-1,-1,9,10,2,7,9,2,3,7,2,4,9,7,-1,-1,-1,-1,7,4,8,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,4,11,4,2,11,4,0,2,-1,-1,-1,-1,-1,-1,-1,1,0,9,7,4,8,11,3,2,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,9,2,11,9,1,2,9,-1,-1,-1,-1,1,10,3,10,11,3,4,8,7,-1,-1,-1,-1,-1,-1,-1,10,11,1,11,4,1,4,0,1,4,11,7,-1,-1,-1,-1,8,7,4,11,0,9,10,11,9,3,0,11,-1,-1,-1,-1,11,7,4,9,11,4,10,11,9,-1,-1,-1,-1,-1,-1,-1,4,5,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,9,3,8,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,0,0,5,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,8,5,3,8,5,1,3,-1,-1,-1,-1,-1,-1,-1,10,2,1,4,5,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,3,10,2,1,5,9,4,-1,-1,-1,-1,-1,-1,-1,10,2,5,2,4,5,2,0,4,-1,-1,-1,-1,-1,-1,-1,5,10,2,5,2,3,4,5,3,8,4,3,-1,-1,-1,-1,4,5,9,11,3,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,0,11,8,0,5,9,4,-1,-1,-1,-1,-1,-1,-1,4,5,0,5,1,0,11,3,2,-1,-1,-1,-1,-1,-1,-1,5,1,2,8,5,2,11,8,2,5,8,4,-1,-1,-1,-1,11,3,10,3,1,10,4,5,9,-1,-1,-1,-1,-1,-1,-1,5,9,4,1,8,0,1,10,8,10,11,8,-1,-1,-1,-1,0,4,5,11,0,5,10,11,5,3,0,11,-1,-1,-1,-1,8,4,5,10,8,5,11,8,10,-1,-1,-1,-1,-1,-1,-1,8,7,9,9,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,9,3,5,9,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,7,0,7,1,0,7,5,1,-1,-1,-1,-1,-1,-1,-1,3,5,1,7,5,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,7,9,7,5,9,2,1,10,-1,-1,-1,-1,-1,-1,-1,2,1,10,0,5,9,0,3,5,3,7,5,-1,-1,-1,-1,2,0,8,5,2,8,7,5,8,2,5,10,-1,-1,-1,-1,5,10,2,3,5,2,7,5,3,-1,-1,-1,-1,-1,-1,-1,5,9,7,9,8,7,2,11,3,-1,-1,-1,-1,-1,-1,-1,7,5,9,2,7,9,0,2,9,11,7,2,-1,-1,-1,-1,11,3,2,8,1,0,8,7,1,7,5,1,-1,-1,-1,-1,1,2,11,7,1,11,5,1,7,-1,-1,-1,-1,-1,-1,-1,8,5,9,7,5,8,3,1,10,11,3,10,-1,-1,-1,-1,0,7,5,9,0,5,0,11,7,10,0,1,0,10,11,-1,0,10,11,3,0,11,0,5,10,7,0,8,0,7,5,-1,5,10,11,5,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,6,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,0,9,6,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,1,8,9,1,6,10,5,-1,-1,-1,-1,-1,-1,-1,5,6,1,1,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,6,1,6,2,1,8,0,3,-1,-1,-1,-1,-1,-1,-1,5,6,9,6,0,9,6,2,0,-1,-1,-1,-1,-1,-1,-1,8,9,5,2,8,5,6,2,5,8,2,3,-1,-1,-1,-1,11,3,2,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,11,0,2,11,5,6,10,-1,-1,-1,-1,-1,-1,-1,9,1,0,11,3,2,6,10,5,-1,-1,-1,-1,-1,-1,-1,6,10,5,2,9,1,2,11,9,11,8,9,-1,-1,-1,-1,11,3,6,3,5,6,3,1,5,-1,-1,-1,-1,-1,-1,-1,11,8,0,5,11,0,1,5,0,6,11,5,-1,-1,-1,-1,6,11,3,6,3,0,5,6,0,9,5,0,-1,-1,-1,-1,9,5,6,11,9,6,8,9,11,-1,-1,-1,-1,-1,-1,-1,6,10,5,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,4,3,7,4,10,5,6,-1,-1,-1,-1,-1,-1,-1,0,9,1,6,10,5,7,4,8,-1,-1,-1,-1,-1,-1,-1,5,6,10,7,9,1,3,7,1,4,9,7,-1,-1,-1,-1,2,1,6,1,5,6,8,7,4,-1,-1,-1,-1,-1,-1,-1,5,2,1,6,2,5,4,0,3,7,4,3,-1,-1,-1,-1,7,4,8,5,0,9,5,6,0,6,2,0,-1,-1,-1,-1,9,3,7,4,9,7,9,2,3,6,9,5,9,6,2,-1,2,11,3,4,8,7,5,6,10,-1,-1,-1,-1,-1,-1,-1,6,10,5,2,7,4,0,2,4,11,7,2,-1,-1,-1,-1,9,1,0,8,7,4,11,3,2,6,10,5,-1,-1,-1,-1,1,2,9,2,11,9,11,4,9,4,11,7,6,10,5,-1,7,4,8,5,11,3,1,5,3,6,11,5,-1,-1,-1,-1,11,1,5,6,11,5,11,0,1,4,11,7,11,4,0,-1,9,5,0,5,6,0,6,3,0,3,6,11,7,4,8,-1,9,5,6,11,9,6,9,7,4,9,11,7,-1,-1,-1,-1,9,4,10,10,4,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,10,4,10,9,4,3,8,0,-1,-1,-1,-1,-1,-1,-1,1,0,10,0,6,10,0,4,6,-1,-1,-1,-1,-1,-1,-1,1,3,8,6,1,8,4,6,8,10,1,6,-1,-1,-1,-1,9,4,1,4,2,1,4,6,2,-1,-1,-1,-1,-1,-1,-1,8,0,3,9,2,1,9,4,2,4,6,2,-1,-1,-1,-1,4,2,0,6,2,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,4,2,8,6,2,4,-1,-1,-1,-1,-1,-1,-1,9,4,10,4,6,10,3,2,11,-1,-1,-1,-1,-1,-1,-1,2,8,0,11,8,2,10,9,4,6,10,4,-1,-1,-1,-1,2,11,3,6,1,0,4,6,0,10,1,6,-1,-1,-1,-1,1,4,6,10,1,6,1,8,4,11,1,2,1,11,8,-1,4,6,9,6,3,9,3,1,9,3,6,11,-1,-1,-1,-1,1,11,8,0,1,8,1,6,11,4,1,9,1,4,6,-1,6,11,3,0,6,3,4,6,0,-1,-1,-1,-1,-1,-1,-1,8,4,6,8,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,10,7,10,8,7,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,7,0,7,10,0,10,9,0,10,7,6,-1,-1,-1,-1,7,6,10,7,10,1,8,7,1,0,8,1,-1,-1,-1,-1,7,6,10,1,7,10,3,7,1,-1,-1,-1,-1,-1,-1,-1,6,2,1,8,6,1,9,8,1,7,6,8,-1,-1,-1,-1,9,6,2,1,9,2,9,7,6,3,9,0,9,3,7,-1,0,8,7,6,0,7,2,0,6,-1,-1,-1,-1,-1,-1,-1,2,3,7,2,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,3,2,8,6,10,9,8,10,7,6,8,-1,-1,-1,-1,7,0,2,11,7,2,7,9,0,10,7,6,7,10,9,-1,0,8,1,8,7,1,7,10,1,10,7,6,11,3,2,-1,1,2,11,7,1,11,1,6,10,1,7,6,-1,-1,-1,-1,6,9,8,7,6,8,6,1,9,3,6,11,6,3,1,-1,1,9,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,6,0,7,0,11,3,0,6,11,-1,-1,-1,-1,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,3,6,7,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,6,7,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,8,1,3,8,6,7,11,-1,-1,-1,-1,-1,-1,-1,2,1,10,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,1,8,0,3,7,11,6,-1,-1,-1,-1,-1,-1,-1,0,9,2,9,10,2,7,11,6,-1,-1,-1,-1,-1,-1,-1,7,11,6,3,10,2,3,8,10,8,9,10,-1,-1,-1,-1,3,2,7,7,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,7,0,6,7,0,2,6,-1,-1,-1,-1,-1,-1,-1,6,7,2,7,3,2,9,1,0,-1,-1,-1,-1,-1,-1,-1,2,6,1,6,8,1,8,9,1,6,7,8,-1,-1,-1,-1,6,7,10,7,1,10,7,3,1,-1,-1,-1,-1,-1,-1,-1,6,7,10,10,7,1,7,8,1,8,0,1,-1,-1,-1,-1,7,3,0,10,7,0,9,10,0,7,10,6,-1,-1,-1,-1,10,6,7,8,10,7,9,10,8,-1,-1,-1,-1,-1,-1,-1,4,8,6,6,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,6,3,6,0,3,6,4,0,-1,-1,-1,-1,-1,-1,-1,11,6,8,6,4,8,1,0,9,-1,-1,-1,-1,-1,-1,-1,6,4,9,3,6,9,1,3,9,6,3,11,-1,-1,-1,-1,4,8,6,8,11,6,1,10,2,-1,-1,-1,-1,-1,-1,-1,10,2,1,11,0,3,11,6,0,6,4,0,-1,-1,-1,-1,8,11,4,11,6,4,9,2,0,9,10,2,-1,-1,-1,-1,3,9,10,2,3,10,3,4,9,6,3,11,3,6,4,-1,3,2,8,2,4,8,2,6,4,-1,-1,-1,-1,-1,-1,-1,2,4,0,2,6,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,4,3,2,6,4,2,8,3,4,-1,-1,-1,-1,4,9,1,2,4,1,6,4,2,-1,-1,-1,-1,-1,-1,-1,3,1,8,1,6,8,6,4,8,1,10,6,-1,-1,-1,-1,0,1,10,6,0,10,4,0,6,-1,-1,-1,-1,-1,-1,-1,3,6,4,8,3,4,3,10,6,9,3,0,3,9,10,-1,4,9,10,4,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,9,4,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,5,9,4,6,7,11,-1,-1,-1,-1,-1,-1,-1,1,0,5,0,4,5,11,6,7,-1,-1,-1,-1,-1,-1,-1,6,7,11,4,3,8,4,5,3,5,1,3,-1,-1,-1,-1,4,5,9,2,1,10,11,6,7,-1,-1,-1,-1,-1,-1,-1,7,11,6,10,2,1,3,8,0,5,9,4,-1,-1,-1,-1,11,6,7,10,4,5,10,2,4,2,0,4,-1,-1,-1,-1,8,4,3,4,5,3,5,2,3,2,5,10,6,7,11,-1,3,2,7,2,6,7,9,4,5,-1,-1,-1,-1,-1,-1,-1,4,5,9,6,8,0,2,6,0,7,8,6,-1,-1,-1,-1,2,6,3,6,7,3,0,5,1,0,4,5,-1,-1,-1,-1,8,2,6,7,8,6,8,1,2,5,8,4,8,5,1,-1,4,5,9,6,1,10,6,7,1,7,3,1,-1,-1,-1,-1,10,6,1,6,7,1,7,0,1,0,7,8,4,5,9,-1,10,0,4,5,10,4,10,3,0,7,10,6,10,7,3,-1,10,6,7,8,10,7,10,4,5,10,8,4,-1,-1,-1,-1,5,9,6,9,11,6,9,8,11,-1,-1,-1,-1,-1,-1,-1,11,6,3,3,6,0,6,5,0,5,9,0,-1,-1,-1,-1,8,11,0,11,5,0,5,1,0,11,6,5,-1,-1,-1,-1,3,11,6,5,3,6,1,3,5,-1,-1,-1,-1,-1,-1,-1,10,2,1,11,5,9,8,11,9,6,5,11,-1,-1,-1,-1,3,11,0,11,6,0,6,9,0,9,6,5,10,2,1,-1,5,8,11,6,5,11,5,0,8,2,5,10,5,2,0,-1,3,11,6,5,3,6,3,10,2,3,5,10,-1,-1,-1,-1,9,8,5,8,2,5,2,6,5,2,8,3,-1,-1,-1,-1,6,5,9,0,6,9,2,6,0,-1,-1,-1,-1,-1,-1,-1,8,5,1,0,8,1,8,6,5,2,8,3,8,2,6,-1,6,5,1,6,1,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,3,1,10,6,1,6,8,3,9,6,5,6,9,8,-1,0,1,10,6,0,10,0,5,9,0,6,5,-1,-1,-1,-1,8,3,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,5,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,11,11,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,11,5,7,11,0,3,8,-1,-1,-1,-1,-1,-1,-1,7,11,5,11,10,5,0,9,1,-1,-1,-1,-1,-1,-1,-1,5,7,10,7,11,10,1,8,9,1,3,8,-1,-1,-1,-1,2,1,11,1,7,11,1,5,7,-1,-1,-1,-1,-1,-1,-1,3,8,0,7,2,1,5,7,1,11,2,7,-1,-1,-1,-1,5,7,9,7,2,9,2,0,9,7,11,2,-1,-1,-1,-1,2,5,7,11,2,7,2,9,5,8,2,3,2,8,9,-1,10,5,2,5,3,2,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,2,8,2,5,8,5,7,8,5,2,10,-1,-1,-1,-1,1,0,9,3,10,5,7,3,5,2,10,3,-1,-1,-1,-1,2,8,9,1,2,9,2,7,8,5,2,10,2,5,7,-1,5,3,1,5,7,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,1,7,0,5,7,1,-1,-1,-1,-1,-1,-1,-1,3,0,9,5,3,9,7,3,5,-1,-1,-1,-1,-1,-1,-1,7,8,9,7,9,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,5,8,10,5,8,11,10,-1,-1,-1,-1,-1,-1,-1,4,0,5,0,11,5,11,10,5,0,3,11,-1,-1,-1,-1,9,1,0,10,4,8,11,10,8,5,4,10,-1,-1,-1,-1,4,11,10,5,4,10,4,3,11,1,4,9,4,1,3,-1,1,5,2,5,8,2,8,11,2,8,5,4,-1,-1,-1,-1,11,4,0,3,11,0,11,5,4,1,11,2,11,1,5,-1,5,2,0,9,5,0,5,11,2,8,5,4,5,8,11,-1,5,4,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,2,2,5,3,5,4,3,4,8,3,-1,-1,-1,-1,2,10,5,4,2,5,0,2,4,-1,-1,-1,-1,-1,-1,-1,2,10,3,10,5,3,5,8,3,8,5,4,9,1,0,-1,2,10,5,4,2,5,2,9,1,2,4,9,-1,-1,-1,-1,5,4,8,3,5,8,1,5,3,-1,-1,-1,-1,-1,-1,-1,5,4,0,5,0,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,4,8,3,5,8,5,0,9,5,3,0,-1,-1,-1,-1,5,4,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,11,4,11,9,4,11,10,9,-1,-1,-1,-1,-1,-1,-1,3,8,0,7,9,4,7,11,9,11,10,9,-1,-1,-1,-1,11,10,1,4,11,1,0,4,1,11,4,7,-1,-1,-1,-1,4,1,3,8,4,3,4,10,1,11,4,7,4,11,10,-1,7,11,4,4,11,9,11,2,9,2,1,9,-1,-1,-1,-1,4,7,9,7,11,9,11,1,9,1,11,2,3,8,0,-1,4,7,11,2,4,11,0,4,2,-1,-1,-1,-1,-1,-1,-1,4,7,11,2,4,11,4,3,8,4,2,3,-1,-1,-1,-1,10,9,2,9,7,2,7,3,2,9,4,7,-1,-1,-1,-1,7,10,9,4,7,9,7,2,10,0,7,8,7,0,2,-1,10,7,3,2,10,3,10,4,7,0,10,1,10,0,4,-1,2,10,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,4,7,1,4,3,1,7,-1,-1,-1,-1,-1,-1,-1,1,9,4,7,1,4,1,8,0,1,7,8,-1,-1,-1,-1,3,0,4,3,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,10,9,8,11,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,3,11,9,3,10,9,11,-1,-1,-1,-1,-1,-1,-1,10,1,0,8,10,0,11,10,8,-1,-1,-1,-1,-1,-1,-1,10,1,3,10,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,2,1,9,11,1,8,11,9,-1,-1,-1,-1,-1,-1,-1,9,0,3,11,9,3,9,2,1,9,11,2,-1,-1,-1,-1,11,2,0,11,0,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,2,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,10,8,2,9,8,10,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,10,8,2,8,1,0,8,10,1,-1,-1,-1,-1,2,10,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),numTrisTable:new Float32Array([0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,2,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,2,3,4,4,3,3,4,4,3,4,5,5,2,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,4,2,3,3,4,3,4,2,3,3,4,4,5,4,5,3,2,3,4,4,3,4,5,3,2,4,5,5,4,5,2,4,1,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,4,3,4,4,5,3,2,4,3,4,3,5,2,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,4,3,4,4,3,4,5,5,4,4,3,5,2,5,4,2,1,2,3,3,4,3,4,4,5,3,4,4,5,2,3,3,2,3,4,4,5,4,5,5,2,4,3,5,4,3,2,4,1,3,4,4,5,4,5,3,4,4,5,5,2,3,4,2,1,2,3,3,2,3,4,2,1,3,2,4,1,2,1,1,0])}}var km=new Ch,b6e=class{constructor(){this.pyramidPassScene=new As,this.pyramidPassMaterial=new Bm({name:"PyramidPass"}),this.pyramidPassUniforms={inputTexture:{value:void 0},inputWidth:{value:0},inputHeight:{value:0},inputShiftX:{value:0},outputShiftX:{value:0}},this.pyramidTopLevelReadPixelBuffer=new Float32Array(4);let e=`
			precision highp float;
			precision highp sampler2D;
			layout(location = 0) out vec4 pc_FragColor;
			uniform sampler2D inputTexture;
			uniform float inputWidth;
			uniform float inputHeight;
			uniform float inputShiftX;
			uniform float outputShiftX;
			const vec2 half_unit_coord = vec2(0.5);
			const vec4 one = vec4(1.0);
			void main() {
				vec2 inputSize = vec2(inputWidth, inputHeight);
				vec2 input_pixel_uv = 1. / inputSize;
				vec2 coord = gl_FragCoord.xy - half_unit_coord;
				coord.x -= outputShiftX;
				coord = coord * 2. + half_unit_coord;
				coord.x += inputShiftX;

				// sample bottom left corner
				vec2 input_uv = coord / inputSize;
				float bl = texture(inputTexture, input_uv).r;

				// sample bottom right corner
				input_uv.x += input_pixel_uv.x;
				float br = texture(inputTexture, input_uv).r;

				// sample top right corner
				input_uv.y += input_pixel_uv.y;
				float tr = texture(inputTexture, input_uv).r;

				// sample top left corner
				input_uv.x -= input_pixel_uv.x;
				float tl = texture(inputTexture, input_uv).r;

				pc_FragColor.a = bl;
				pc_FragColor.b = pc_FragColor.a + br;
				pc_FragColor.g = pc_FragColor.b + tr;
				pc_FragColor.r = pc_FragColor.g + tl; 
			}
		`;this.pyramidPassMaterial.fragmentShader=e,this.pyramidPassMaterial.uniforms=this.pyramidPassUniforms,this.pyramidPassMaterial.depthTest=!1,this.pyramidPassMaterial.depthWrite=!1;let t=new zi(rd,this.pyramidPassMaterial);t.frustumCulled=!1,this.pyramidPassScene.add(t)}renderPyramid(e,t,i,r,s){new Ww().min.setScalar(0);let a=t.length-1,n=new Mt;i.getViewport(n),this.pyramidPassUniforms.inputShiftX.value=0,this.pyramidPassUniforms.outputShiftX.value=0;let o=a-1;for(let h=o;h>=0;h--){let c=h%2===o%2?s[0]:s[1],u=h===o?r:h%2===o%2?s[1]:s[0];this.pyramidPassUniforms.inputTexture.value=Array.isArray(u.texture)?u.texture[1]:u.texture,this.pyramidPassUniforms.inputWidth.value=u.width,this.pyramidPassUniforms.inputHeight.value=u.height,i.setRenderTarget(c);let d=t[h],f=i.getPixelRatio();i.setViewport(this.pyramidPassUniforms.outputShiftX.value/f,0,d/f,d/f),h===2&&e%2!==0&&i.setViewport(this.pyramidPassUniforms.outputShiftX.value/f,0,3/f,3/f),i.render(this.pyramidPassScene,km);let p=this.pyramidPassUniforms.inputShiftX.value;this.pyramidPassUniforms.inputShiftX.value=this.pyramidPassUniforms.outputShiftX.value,this.pyramidPassUniforms.outputShiftX.value=p,h<o&&(this.pyramidPassUniforms.outputShiftX.value+=t[h+1])}i.setViewport(n);let l=t.length%2===0?0:1;return i.readRenderTargetPixelsAsync(s[l],s[l].width-1,0,1,1,this.pyramidTopLevelReadPixelBuffer).then(()=>this.pyramidTopLevelReadPixelBuffer[0])}},ka=24,d1=96,yn=x6e(),po=2,VN=class extends Ir{constructor(e,t,i){super(e,t,i),this.data=t,this.needsRebuild=!0,this.customDepthMaterialNeedsUpdate=!1,this._npart=-1,this.spatialn=1,this.drawRangeNeedsForceUpdate=!0,this._resolutionLevel=-1,this.resolution=64,this.spatialDivisions=25,this.zLayersPerRow=8,this.basePyramidSize=512,this.pyramidTexture1Width=341,this.pyramidTexture1Height=256,this.pyramidTexture2Width=170,this.pyramidTexture2Height=128,this.numLevels=9,this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512],this.bboxSize=0,this.bboxOffset=0,this.shapesDataTexture={value:void 0},this.spatialscene=new As,this.potentialPassScene=new As,this.voxelPassScene=new As,this._spatialPassRenderTargets=[],this._potentialPassRenderTargets=[],this._voxelPassRenderTargets=[],this._pyramidRenderTargets=[],this.geometry=new rt,this.geometry.drawRange.count=0,this.spatialPassUniforms={span:{value:-1},shapesDataTexture:this.shapesDataTexture,npart:{value:this.npart},spatialn:{value:this.spatialn}},this.spatialMesh=new zi(rd,this.spatialPassMaterial()),this.spatialMesh.frustumCulled=!1,this.spatialscene.add(this.spatialMesh);let r=new ts(yn.triTable,16,256,Mm,bi);r.needsUpdate=!0;let s=new ts(yn.numTrisTable,256,1,Mm,bi);s.needsUpdate=!0,this.voxelPassUniforms={potentialPassTexture:{value:void 0},numTrisTable:{value:s}},this.voxelMesh=new zi(rd,this.voxelPassMaterial()),this.voxelMesh.frustumCulled=!1,this.voxelPassScene.add(this.voxelMesh),this.potentialPassUniforms={shapesDataTexture:this.shapesDataTexture,spatialPassTexture:{value:void 0},npart:{value:this.npart},spatialn:{value:this.spatialn}},this.potentialMesh=new zi(rd,this.potentialPassMaterial()),this.potentialMesh.frustumCulled=!1,this.potentialPassScene.add(this.potentialMesh),this.marchPassUniforms={triTable:{value:r},potentialPassTexture:{value:void 0},voxelPassTexture:{value:void 0},pyramidTexture1:{value:void 0},pyramidTexture1Size:{value:void 0},pyramidTexture2:{value:void 0},pyramidTexture2Size:{value:void 0}},this.frustumCulled=!1,this.onBeforeShadowPass=a=>{if(M6e.call(this),this.npart===0){this.geometry.drawRange.count=0;return}let n=this.material.root;if(!n.shadersPatchedForShapeBlend)this.patchVertexShaderForShapeBlend(n),n.shadersPatchedForShapeBlend=!0,this.customDepthMaterialNeedsUpdate=!0;else if(this.customDepthMaterialNeedsUpdate){this.customDepthMaterialNeedsUpdate=!1,this.customDepthMaterial=new ti({vertexShader:n.vertexShader,fragmentShader:`
						#include <packing>
						void main()
						{
							gl_FragColor = packDepthToRGBA(gl_FragCoord.z);
						}
					`,uniforms:n.uniforms,defines:this.material.defines}),this.isMeshDepthMaterial=!0,this.customDistanceMaterial=new ti({vertexShader:n.vertexShader,fragmentShader:`
					#include <common>
					#include <packing>
					uniform vec3 referencePosition;
					uniform float nearDistance;
					uniform float farDistance;
					// World-space position
					varying vec3 vWPosition;
					void main()
					{
						float dist = length(vWPosition - referencePosition);
						dist = (dist - nearDistance) / (farDistance - nearDistance);
						dist = saturate(dist);
						// Required by Three.js for this to work
						gl_FragColor = packDepthToRGBA( dist );
					}`,uniforms:{nearDistance:{value:0},farDistance:{value:0},referencePosition:{value:new E},opacity:{value:0},...n.uniforms},defines:this.material.defines});let h=this.customDistanceMaterial;h.referencePosition=new E,h.nearDistance=0,h.farDistance=0,h.opacity=1,h.isMeshDistanceMaterial=!0}if(this.spatialPassUniforms.npart.value=this.npart,this.spatialPassUniforms.spatialn.value=this.spatialn,this.potentialPassUniforms.npart.value=this.npart,this.potentialPassUniforms.spatialn.value=this.spatialn,this.needsRebuild){this.needsRebuild=!1,this.spatialMesh.material.defines.RES=this.resolutionLevel,this.spatialMesh.material.needsUpdate=!0,this.potentialMesh.material.defines.RES=this.resolutionLevel,this.potentialPassUniforms.spatialPassTexture.value=this.spatialPassRenderTarget.texture,this.potentialMesh.material.needsUpdate=!0,this.voxelMesh.material.defines.RES=this.resolutionLevel,this.voxelMesh.material.needsUpdate=!0,this.voxelPassUniforms.potentialPassTexture.value=this.potentialPassRenderTarget.texture,this.marchPassUniforms.potentialPassTexture.value=this.potentialPassRenderTarget.texture,this.marchPassUniforms.voxelPassTexture.value=this.voxelPassRenderTarget.texture[0],this.material.defines.RES=this.resolutionLevel,this.material.defines.LEVELS=this.pyramidLevelSizes.length,this.material.defines.LOOP=this.pyramidLevelSizes.length%2===0?this.pyramidLevelSizes.length-3:this.pyramidLevelSizes.length-2,this.material.defines.HALF=this.pyramidLevelSizes.length%2===0?1:0,this.material.needsUpdate=!0;let h=this.pyramidLevelSizes.length%2===0?0:1,c=this.pyramidLevelSizes.length%2===0?1:0;this.marchPassUniforms.pyramidTexture2.value=this.pyramidRenderTarget[h].texture,this.marchPassUniforms.pyramidTexture2Size.value=new re(this.pyramidRenderTarget[h].width,this.pyramidRenderTarget[h].height),this.marchPassUniforms.pyramidTexture1.value=this.pyramidRenderTarget[c].texture,this.marchPassUniforms.pyramidTexture1Size.value=new re(this.pyramidRenderTarget[c].width,this.pyramidRenderTarget[c].height),Object.assign(this.material.uniforms,this.marchPassUniforms)}let o=a.shadowMap.enabled;a.shadowMap.enabled=!1;let l=a.getRenderTarget();a.setRenderTarget(this.spatialPassRenderTarget),a.render(this.spatialscene,km),a.setRenderTarget(this.potentialPassRenderTarget),a.render(this.potentialPassScene,km),a.setRenderTarget(this.voxelPassRenderTarget),a.render(this.voxelPassScene,km),VN.streamCompaction.renderPyramid(this.resolutionLevel,this.pyramidLevelSizes,a,this.voxelPassRenderTarget,this.pyramidRenderTarget).then(h=>{this.material.wireframe&&(h*3>this.geometry.attributes.position.count||this.drawRangeNeedsForceUpdate)&&(this.geometry.dispose(),this.geometry=new rt,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]},this.geometry.attributes.position=new mt(new Float32Array(h*3*2),3)),(h*3>this.geometry.drawRange.count||this.drawRangeNeedsForceUpdate)&&(this.geometry.drawRange.count=Math.floor(h*1.2)*3),this.drawRangeNeedsForceUpdate=!1}),a.shadowMap.enabled=o,a.setRenderTarget(l)}}set npart(e){e!==this._npart&&(this.drawRangeNeedsForceUpdate=!0,this._npart=e,this.spatialn=Math.ceil(e/(4*ka)))}get npart(){return this._npart}set resolutionLevel(e){let t=Math.min(8,Math.max(5,e));if(t!==this._resolutionLevel){switch(this._resolutionLevel=t,this.resolution=Math.pow(2,t),this.resolutionLevel){case 5:this.pyramidLevelSizes=[1,2,4,6,12,24,48,96,192],this.bboxSize=248*po,this.bboxOffset=8*po*-1/2;break;case 6:this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512],this.bboxSize=252*po,this.bboxOffset=4*po*-1/2;break;case 7:this.pyramidLevelSizes=[1,2,4,6,12,24,48,96,192,384,768,1536],this.bboxSize=254*po,this.bboxOffset=2*po*-1/2;break;case 8:this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096],this.bboxSize=255*po,this.bboxOffset=po*-1/2;break}this.pyramidTexture1Width=0,this.pyramidTexture2Width=0,this.pyramidTexture1Height=this.pyramidLevelSizes[this.pyramidLevelSizes.length-2],this.pyramidTexture2Height=this.pyramidLevelSizes[this.pyramidLevelSizes.length-3];for(let i=this.pyramidLevelSizes.length-2;i>=0;i--)(this.pyramidLevelSizes.length-2)%2===i%2?this.pyramidTexture1Width+=this.pyramidLevelSizes[i]:this.pyramidTexture2Width+=this.pyramidLevelSizes[i];this.basePyramidSize=this.pyramidLevelSizes[this.pyramidLevelSizes.length-1],this.zLayersPerRow=this.basePyramidSize/this.resolution,this.numLevels=this.pyramidLevelSizes.length-1,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]},this.needsRebuild=!0,this.customDepthMaterialNeedsUpdate=!0}}get resolutionLevel(){return this._resolutionLevel}get spatialPassRenderTarget(){let e=this._spatialPassRenderTargets[this.resolutionLevel];return e||(e=new ei(this.spatialDivisions*this.spatialn,this.spatialDivisions**2,{format:Ki,type:bi,stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:jt,magFilter:jt}),this._spatialPassRenderTargets[this.resolutionLevel]=e),e}get potentialPassRenderTarget(){let e=this._potentialPassRenderTargets[this.resolutionLevel];return e||(e=new ei(this.basePyramidSize,this.basePyramidSize,{format:Ki,type:bi,stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:jt,magFilter:jt}),this._potentialPassRenderTargets[this.resolutionLevel]=e),e}get voxelPassRenderTarget(){let e=this._voxelPassRenderTargets[this.resolutionLevel];return e||(e=new jz(this.basePyramidSize,this.basePyramidSize,2,{stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:jt,magFilter:jt}),e.texture[0].format=Ki,e.texture[0].type=bi,e.texture[1].format=Mm,e.texture[1].type=bi,this._voxelPassRenderTargets[this.resolutionLevel]=e),e}get pyramidRenderTarget(){let e=this._pyramidRenderTargets[this.resolutionLevel];if(!e){let t=new ei(this.pyramidTexture1Width,this.pyramidTexture1Height,{format:Ki,type:bi,stencilBuffer:!1,depthBuffer:!1,magFilter:jt,minFilter:jt}),i=new ei(this.pyramidTexture2Width,this.pyramidTexture2Height,{format:Ki,type:bi,stencilBuffer:!1,depthBuffer:!1,magFilter:jt,minFilter:jt});e=[t,i],this._pyramidRenderTargets[this.resolutionLevel]=e}return e}updateState(e,t){let i=this.material;super.updateState(e,t),i!==this.material&&(this.needsRebuild=!0),e.geometry&&(this.resolutionLevel=e.geometry.resolutionLevel,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]}),e.wireframe&&!this.geometry.getAttribute("position")?this.geometry.setAttribute("position",new mt(new Float32Array(this.geometry.drawRange.count*3),3)):!e.wireframe&&this.geometry.getAttribute("position")&&this.geometry.deleteAttribute("position")}spatialPassMaterial(){let e=`
			precision highp float;
			out vec4 pc_FragColor;
			const float spatialDivisions = ${this.spatialDivisions}.;
			uniform float span;
			uniform float npart;
			uniform float spatialn;
			${yn.shapeInput()}

			vec3 low, high;     // range of current div; subset of -1 .. 1 with span border

			// lookup one element/channel's worth of spheres for current division
			// stating with low sphere number lowi
			// gives a key to which spheres from lowi..lowi+23 are active within given div (low..high)
			float spatialKey(float lowi) {
				float t = 0.;
				for (float ii = ${ka-1}.; ii >= 0.; ii--) {
					float i = ii + lowi;
					float iin = (i + 0.5) / ${d1}.;
					vec4 shape = shapePos(iin);
					vec3 d = shape.xyz;
					float op = shape.w;
	
					t *= 2.;
					t += (
						low.x < d.x && d.x < high.x &&
						low.y < d.y && d.y < high.y &&
						low.z < d.z && d.z < high.z &&
						i < npart || op == -2. // always include if op is -2, which is the intersection operation
					) ? 1. : 0.;
				}
				return t;
			}

			${yn.getpart}

			void main() {               // spatialial fragment shader
				// find active div
				vec3 div;                               // which div is current
				// out holds x=> x, lowi faster moving and y=> z, y faster moving
				float yz = float(gl_FragCoord.y - 0.5);     // contains  z, y faster moving
				div.y = getpart(yz, spatialDivisions);
				div.z = yz; // getpart(yz, spatialDivisions.z); // what's left, should be the same as getpart

				float lx = float(gl_FragCoord.x - 0.5);     // contains x, lowi faster moving
				float lowi = getpart(lx, spatialn) * ${4*ka}.;
				div.x = lx;

				low = div / spatialDivisions * 2. - 1. - span;
				high = (div+1.) / spatialDivisions * 2. - 1. + span;

				// find active range of spheres
				pc_FragColor.x = spatialKey(lowi);
				pc_FragColor.y = spatialKey(lowi+${ka}.);
				pc_FragColor.z = spatialKey(lowi+${2*ka}.);
				pc_FragColor.w = spatialKey(lowi+${3*ka}.);
			}
		`;return new Bm({name:"Spatial Pass",fragmentShader:e,uniforms:this.spatialPassUniforms})}potentialPassMaterial(){let e=`
			precision highp float;
			out vec4 pc_FragColor;

			${yn.shapeInput()}
			uniform sampler2D spatialPassTexture;

			const float res = float(RES);
			const float VOXEL_RESOLUTION = pow(2., res);
			const float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));
			const float VOXEL_RESOLUTION_SUB1 = VOXEL_RESOLUTION - 1.;
			const float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;

			uniform float npart;
			uniform float spatialn;
			const float spatialDivisions = ${this.spatialDivisions}.;
			const float spatialDivisions2 = spatialDivisions * spatialDivisions;
			const float spatialDivisionsSub1 = spatialDivisions - 1.;

			${yn.getpart}

			vec3 packRGBAToVec3(vec4 color) {
				uint r = uint(color.r * 255.);
				uint g = uint(color.g * 255.);
				uint combined = (r << 8) | g; 
				return vec3(float(combined) * 0.00001525902, color.b, color.a); // 1/65535
			}

			void applyQuaternionToVector(in vec4 q, inout vec3 v) {
				v += 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
			}

			/**
			 * SDF functions (reference: https://iquilezles.org/articles/distfunctions/)
			 */

			// branchless version of "Smooth Union, Subtraction and Intersection - bound, bound, bound" in above reference
			float smoothOperation(float op, float sdf, float d, float k) {
			  //        union: op =  1 => signSubtract =  1, signIntersection =  1
			  //     subtract: op = -1 => signSubtract = -1, signIntersection =  1
				// intersection: op = -2 => signSubtract = -1, signIntersection = -1

				float signSubtract = clamp(op, -1., 1.);
				float signIntersection = 2. * (op - signSubtract) + 1.;
				float h = clamp(
					0.5 + signSubtract * 0.5 * (sdf - signSubtract * signIntersection * d) / k,
					0.0,
					1.0
				);
				return mix(sdf, signSubtract * signIntersection * d, h) - 
							 signSubtract * k * h * (1.0 - h);
			}

			float sdSphere( vec3 p, float s )
			{
				return length(p)-s;
			}

			float sdEllipsoid( vec3 p, vec3 r )
			{
				float k0 = length(p/r);
				float k1 = length(p/(r*r));
				return k0*(k0-1.0)/k1;
			}

			float sdBox( vec3 p, vec3 b )
			{
				vec3 q = abs(p) - b;
				return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0);
			}

			float sdTorus( vec3 p, vec2 t )
			{
				vec2 q = vec2(length(p.xy)-t.x,p.z);
				return length(q)-t.y;
			}

			float sdCappedTorus( vec3 p, vec2 sc, float ra, float rb)
			{
				p.x = abs(p.x);
				float k = (sc.y*p.x>sc.x*p.y) ? dot(p.xy,sc) : length(p.xy);
				return sqrt( dot(p,p) + ra*ra - 2.0*ra*k ) - rb;
			}

			float dot2( in vec2 v ) { return dot(v,v); }
			float sdCappedCone( vec3 p, float h, float r1, float r2 )
			{
				vec2 q = vec2( length(p.xz), p.y );
				vec2 k1 = vec2(r2,h);
				vec2 k2 = vec2(r2-r1,2.0*h);
				vec2 ca = vec2(q.x-min(q.x,(q.y<0.0)?r1:r2), abs(q.y)-h);
				vec2 cb = q - k1 + k2*clamp( dot(k1-q,k2)/dot2(k2), 0.0, 1.0 );
				float s = (cb.x<0.0 && ca.y<0.0) ? -1.0 : 1.0;
				return s*sqrt( min(dot2(ca),dot2(cb)) );
			}

			float sdCappedCylinder( vec3 p, float h, float r )
			{
				vec2 d = abs(vec2(length(p.xz),p.y)) - vec2(r,h);
				return min(max(d.x,d.y),0.0) + length(max(d,0.0));
			}

			float maxBlend = 0.0;
			// compute potential from A (=24) spheres, using the bit flags in 'activeKey'
			// to avoid lookup/compute for inactive spheres
			// return field potential, side effect updates track,
			// compute and return +ve and -ve values separately
			void fillSpatialInner(
				float ii,
				float activeKey,
				vec3 corner,
				inout float sdf,
				inout float colorDivisor,
				inout vec4 trackColor
			) {
				for (float i = 0.; i < ${ka}.; i++) {
					if (activeKey < 1.) break; // activeKey exhausted, no more active spheres
					activeKey *= 0.5;
					if (fract(activeKey) < 0.5) continue;

					float iin = (i + ii + 0.5) * ${1/d1};
					vec4 shape = shapePos(iin);
					vec4 quat = shapeQuat(iin);
					vec4 params1 = shapeParams1(iin);
					vec4 params2 = shapeParams2(iin);

					vec3 p = corner - shape.xyz;
					applyQuaternionToVector(quat, p);
					p /= params2.z; // scale
					float d; // d in -1..1 coordinates
					switch (int(params1.x)) {
						case 0: d = sdSphere(p, params1.y); break;
						case 1: d = sdEllipsoid(p, params1.yzw); break;
						case 2: d = sdBox(p, params1.yzw); break;
						case 3: d = sdCappedCylinder(p, params1.y, params1.z); break;
						case 4: d = sdCappedCone(p, params1.y, params1.z, params1.w); break;
						case 5: d = sdTorus(p, params1.yz); break;
						case 6: d = sdCappedTorus(p, params1.yz, params1.w, params2.w); break;
					}
					d -= params2.y; // rounded edge
					d *= params2.z; // scale

					float k = params2.x;
					float op = shape.w;

					sdf = smoothOperation(shape.w, sdf, d, k);

					float isNegativeOne = step(-1.5, op) * step(op, -0.5); // 1 when op == -1, 0 otherwise
					float colorCull = smoothstep(maxBlend, 0., -d);
					float cullFactor = mix(1.0, colorCull, isNegativeOne);
					trackColor *= cullFactor;
					colorDivisor *= cullFactor;

					maxBlend = max(maxBlend, k);

					k += 2. * INV_VOXEL_RESOLUTION; // avoid division by zero, and other color artifacts with very small k
					float nearness = smoothstep(k, 0., d);

					vec4 color = shapeColor(iin);
					nearness *= float(color.a >= 0.);

					colorDivisor += nearness;
					trackColor += color * nearness;
				}
			}

			vec3 div;
			// compute potential from all spheres; collect +ve and =ve values separately
			// work in blocks of A*4 (=96) spheres, using the bit flags in 4 float channel 'activeKey' values
			// TODO check if extra vec3 output useful, not really used at present
			float fillSpatial(vec3 corner, inout vec4 trackColor) {
				float sdf = 1e3; // hack: initialize to large value
				float colorDivisor = 0.;
				// spatialPassTexture holds x=> lowi, x faster moving and y=> z, y faster moving
				float divyz = (div.y + div.z * spatialDivisions + 0.5) / (spatialDivisions2);
				for (float ii = 0.; ii < spatialn; ii++) {
					float i = ii * ${4*ka}.;

					vec4 activeKey = texture(spatialPassTexture, vec2((div.x * spatialn + ii + 0.5)/(spatialn * spatialDivisions), divyz));
					fillSpatialInner(i, activeKey.x, corner, sdf, colorDivisor, trackColor);
					fillSpatialInner(i+${ka}., activeKey.y, corner, sdf, colorDivisor, trackColor);
					fillSpatialInner(i+${2*ka}., activeKey.z, corner, sdf, colorDivisor, trackColor);
					fillSpatialInner(i+${3*ka}., activeKey.w, corner, sdf, colorDivisor, trackColor);
				}

				trackColor /= colorDivisor;
				return mix(sdf, 0.0, step(1e20 - 0.1, sdf));
			}

			void main() {
				${yn.getxyzi}    // get xi yi zi from 2d position

				vec3 xyzi = vec3(xi,yi,zi);
				vec3 corner = xyzi / VOXEL_RESOLUTION_SUB1 * 2. - 1.;  // -1..1 coords

				div = floor(xyzi / VOXEL_RESOLUTION_SUB1 * spatialDivisionsSub1);

				vec4 c = vec4(0.);
				float t = fillSpatial(corner, c);

				pc_FragColor = vec4(t, packRGBAToVec3(c)); // RGB texture
			}
		`;return new Bm({name:"PotentialPass",fragmentShader:e,uniforms:this.potentialPassUniforms})}voxelPassMaterial(){let e=`
			precision highp float;
			layout(location = 0) out vec4 pc_FragColor;
			layout(location = 1) out vec4 numTris;

			const float res = float(RES);
			const float VOXEL_RESOLUTION = pow(2., res);
			const float VOXEL_RESOLUTION_SUB1 = VOXEL_RESOLUTION - 1.; 
			const float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));
			const float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;
			uniform sampler2D numTrisTable; // 256 x 1

			float keyi(float f000, float f100, float f010, float f110, float f001, float f101, float f011, float f111) {
				return (float(f000 < 0.) * 1.) +
							 (float(f100 < 0.) * 2.) +
							 (float(f010 < 0.) * 8.) +
							 (float(f110 < 0.) * 4.) +
							 (float(f001 < 0.) * 16.) +
							 (float(f101 < 0.) * 32.) +
							 (float(f011 < 0.) * 128.) +
							 (float(f111 < 0.) * 64.);
			}

			${yn.lookup}

			vec3 compNormi(float xi, float yi, float zi) {
				float dx = look(xi + 1., yi, zi, potentialPassTexture).r - look(xi - 1., yi, zi, potentialPassTexture).r;
				float dy = look(xi, yi + 1., zi, potentialPassTexture).r - look(xi, yi - 1., zi, potentialPassTexture).r;
				float dz = look(xi, yi, zi + 1., potentialPassTexture).r - look(xi, yi, zi - 1., potentialPassTexture).r;
				// if we allow (common) 0,0,0 case through then NaN can spread
				// eg r = vec4(compNorm i(???), 1.) will pollute r.w
				if (dx == 0.0 && dy == 0.0 && dz == 0.0) {
					return vec3(0.199, 0.299, 0.399);
				}
				return normalize(vec3(dx, dy, dz));
			}

			void main() {
				${yn.getxyzi}    // get xi yi zi from 2d

				vec3 normal = compNormi(xi, yi, zi);  // even if our key is -1 this may be needed by a neighbouring voxel

				if (xi >= VOXEL_RESOLUTION_SUB1 || yi >= VOXEL_RESOLUTION_SUB1 || zi >= VOXEL_RESOLUTION_SUB1) {
					pc_FragColor = vec4(normal, 0.);
					numTris = vec4(0.);
					return;
				}

				float
					f000 = look(xi, yi, zi, potentialPassTexture).r,
					f100 = look(xi+1., yi, zi, potentialPassTexture).r,
					f010 = look(xi, yi+1., zi, potentialPassTexture).r,
					f110 = look(xi+1., yi+1., zi, potentialPassTexture).r,
					f001 = look(xi, yi, zi+1., potentialPassTexture).r,
					f101 = look(xi+1., yi, zi+1., potentialPassTexture).r,
					f011 = look(xi, yi+1., zi+1., potentialPassTexture).r,
					f111 = look(xi+1., yi+1., zi+1., potentialPassTexture).r;
				float key = keyi(f000, f100, f010, f110, f001, f101, f011, f111);

				pc_FragColor = vec4(normal, key);

				numTris = texture(numTrisTable, vec2((key + 0.5) / 256., 0.5));
			}
		`;return new Bm({name:"VoxelPass",fragmentShader:e,uniforms:this.voxelPassUniforms})}patchVertexShaderForShapeBlend(e){let t=`
		#ifdef SHAPEBLEND 
			precision highp sampler2D;

			uniform float isol;

			uniform sampler2D triTable;     // 256 x 16
			uniform sampler2D pyramidTexture1;
			uniform vec2 pyramidTexture1Size;
			uniform sampler2D pyramidTexture2;
			uniform vec2 pyramidTexture2Size;

			const vec2 halfPixelOffset = vec2(0.5, 0.5);

			const vec2 rShift = vec2(0., 1.);
			const vec2 gShift = vec2(1., 1.);
			const vec2 bShift = vec2(1., 0.);

			const float res = float(RES);
			const float VOXEL_RESOLUTION = pow(2., res);
			const float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));
			const float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;

			const float scale_factor = ${po}.;

			#if SHAPEBLEND == 5
				const float levelShiftX[7] = float[7](4., 6., 12., 24., 48., 96., 192.);
				const float scale = 8. * scale_factor;
				const vec3 originOffset = vec3(16.);
			#elif SHAPEBLEND == 7
				const float levelShiftX[10] = float[10](4., 6., 12., 24., 48., 96., 192., 384., 768., 1536.); 
				const float scale = 2. * scale_factor;
				const vec3 originOffset = vec3(64.);
			#elif SHAPEBLEND == 8
				const float levelShiftX[11] = float[11](4., 8., 16., 32., 64., 128., 256., 512., 1024., 2048., 4096.);
				const float scale = scale_factor;
				const vec3 originOffset = vec3(128.);
			#else
				const float levelShiftX[8] = float[8](4., 8., 16., 32., 64., 128., 256., 512.);
				const float scale = 4. * scale_factor;
				const vec3 originOffset = vec3(32.);
			#endif

			${yn.lookup}

			const vec3 offsets[24] = vec3[](
				vec3(0., 0., 0.), vec3(1., 0., 0.),
				vec3(1., 0., 0.), vec3(1., 1., 0.),
				vec3(0., 1., 0.), vec3(1., 1., 0.),
				vec3(0., 0., 0.), vec3(0., 1., 0.),
				vec3(0., 0., 1.), vec3(1., 0., 1.),
				vec3(1., 0., 1.), vec3(1., 1., 1.),
				vec3(0., 1., 1.), vec3(1., 1., 1.),
				vec3(0., 0., 1.), vec3(0., 1., 1.),
				vec3(0., 0., 0.), vec3(0., 0., 1.),
				vec3(1., 0., 0.), vec3(1., 0., 1.),
				vec3(1., 1., 0.), vec3(1., 1., 1.),
				vec3(0., 1., 0.), vec3(0., 1., 1.)
			);

			vec2 computeShiftedPosition1(vec2 xy, float levelOriginX) {
				vec2 xyShifted = xy;
				xyShifted.x += levelOriginX;
				return (xyShifted + halfPixelOffset) / pyramidTexture1Size;
			}

			vec2 computeShiftedPosition2(vec2 xy, float levelOriginX) {
				vec2 xyShifted = xy;
				xyShifted.x += levelOriginX;
				return (xyShifted + halfPixelOffset) / pyramidTexture2Size;
			}

			vec4 unpackVec3ToRGBA(vec3 vec) {
				uint combined = uint(vec.x * 65535.0 + 0.5); // Add 0.5 for rounding
				float g = float(combined & uint(0xFF)) * 0.00392156862; // 1/255
				float r = float((combined >> 8) & uint(0xFF)) * 0.00392156862; 
		
				return vec4(r, g, vec.y, vec.z);
			}

			out vec4 marchColor;
			// end of marchvertPre
		#endif
		`,i=`
		#ifdef SHAPEBLEND
			float triIndex = floor(float(gl_VertexID/3));
			float vertexIndex = float(gl_VertexID);
			
			// Initial pyramid lookup
			float levelOriginX1 = pyramidTexture1Size.x - 2.;
			float levelOriginX2 = pyramidTexture2Size.x - 1.;
			vec2 xy = vec2(0.);
			vec4 lookUp = texture(pyramidTexture2, computeShiftedPosition2(xy, levelOriginX2));
			
			// Early exit check
			if (triIndex >= lookUp.r) return;
			
			// Optimize loop variables
			float start = 0.;
			vec4 triIndexVec = vec4(triIndex);
			
			// Main position computation loop
			for (int i = 0; i < LOOP;) {
				// Compute boundaries
				vec4 ends = lookUp + vec4(start);
				vec4 starts = vec4(ends.gba, start);
				vec4 check = vec4(greaterThanEqual(triIndexVec, starts)) * 
											vec4(lessThan(triIndexVec, ends));
				
				// Update position
				xy *= 2.;
				xy += check.r * rShift + check.g * gShift + check.b * bShift;
				
				// Update loop variables
				start = dot(check, starts);
				levelOriginX2 -= levelShiftX[i];
				
				// Update lookup
				lookUp = texture(pyramidTexture1, computeShiftedPosition1(xy, levelOriginX1));
				i++;

				ends = lookUp + vec4(start);
				starts = vec4(ends.gba, start);
				check = vec4(greaterThanEqual(triIndexVec, starts)) * 
											vec4(lessThan(triIndexVec, ends));
				
				// Update position
				xy *= 2.;
				xy += check.r * rShift + check.g * gShift + check.b * bShift;
				
				// Update loop variables
				start = dot(check, starts);
				levelOriginX1 -= levelShiftX[i];
				
				// Update lookup
				lookUp = texture(pyramidTexture2, computeShiftedPosition2(xy, levelOriginX2));

				i++;
			}

			#if HALF == 1
				vec4 ends = lookUp + vec4(start);
				vec4 starts = vec4(ends.gba, start);
				vec4 check = vec4(greaterThanEqual(triIndexVec, starts)) * vec4(lessThan(triIndexVec, ends));
			
				// Update position
				xy *= 2.;
				xy += check.r * rShift + check.g * gShift + check.b * bShift;
			
				// Update loop variables
				start = dot(check, starts);
			#endif
			
			// Compute final coordinates
			vec3 gridPos;
			gridPos.x = mod(xy.x, VOXEL_RESOLUTION);
			gridPos.y = mod(xy.y, VOXEL_RESOLUTION);
			gridPos.z = floor(xy.x * INV_VOXEL_RESOLUTION) + 
									floor(xy.y * INV_VOXEL_RESOLUTION) * Z_LAYERS_PER_ROW;
			
			// Vertex key computation
			vertexIndex -= start * 3.;
			float vk = vertexIndex * 0.0625 + 0.03125; // Optimized division by 16 and addition of 1/32
			
			// Voxel lookup and edge computation
			vec4 voxel = look(gridPos.x, gridPos.y, gridPos.z, voxelPassTexture);
			float key = (voxel.w + 0.5) * 0.00390625; // Optimized division by 256
			
			// Edge lookup and offset computation
			float edgeNum = texture(triTable, vec2(vk, key)).x;
			int edgeIndex = int(edgeNum) * 2;
			
			// Compute edge positions
			vec3 p1 = gridPos + offsets[edgeIndex];
			vec3 p2 = gridPos + offsets[edgeIndex + 1];
			
			// Compute potentials and normals
			vec4 potential1 = look(p1.x, p1.y, p1.z, potentialPassTexture);
			vec4 potential2 = look(p2.x, p2.y, p2.z, potentialPassTexture);
			
			// Final position and normal computation
			float mu = potential1.r / (potential1.r - potential2.r);

			marchColor = mix(
				unpackVec3ToRGBA(potential1.gba),
				unpackVec3ToRGBA(potential2.gba),
				mu
			);

			transformed = p1 + (p2 - p1) * mu;
			transformed -= originOffset;
			transformed *= scale;
			vec4 data1 = look(p1.x, p1.y, p1.z, voxelPassTexture);
			vec4 data2 = look(p2.x, p2.y, p2.z, voxelPassTexture);
			objectNormal = normalize(mix(data1.xyz, data2.xyz, mu));
			transformedNormal = normalMatrix * objectNormal;
			#ifndef FLAT_SHADED
				vNormal = transformedNormal;
			#endif
		#endif
		`;e.vertexShader=t+e.vertexShader.replace("#include <project_vertex>",i+`
#include <project_vertex>`);let r=e.fragmentShader.match(/vec3 diffuseColor[^\n]*\n/);if(!r)return;let s=`
		#ifdef SHAPEBLEND_C
			#if SHAPEBLEND_C == 1
				${r[0].replace(/nodeU0,/g,"marchColor.rgb,").replace(/nodeU\d+(?=,g_uid\d+_calpha\))/g,"marchColor.a")}
			#else
				${r[0]}
			#endif
		#else
			${r[0]}
		#endif
		`;e.fragmentShader=`in vec4 marchColor;
`+e.fragmentShader.replace(r[0],s),Object.assign(e.uniforms,this.marchPassUniforms)}initDebugPass(e){console.log("fboToDebug.width",e.width,e.height),this.geometry=new Kn(e.width,e.height),this.geometry.userData={parameters:{width:4,height:4}};let t={inputTexture:{value:Array.isArray(e.texture)?e.texture[1]:e.texture},pyramidTextureSize:{value:void 0}},i=r=>{r.vertexShader=`
				precision highp float;

				varying vec2 vUv;

				void main() {
						gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
						vUv = uv;
				}
			`,r.fragmentShader=`
				layout(location = 1) out vec4 gVelocity;

				precision highp float;
				
				uniform sampler2D inputTexture;
				varying vec2 vUv;

				uniform vec2 pyramidTextureSize;

				void main() {
						// Sample the input texture using UV coordinates
						gl_FragColor = texture(inputTexture, vUv);
						gVelocity = vec4(0.0);
				}
			`,t.pyramidTextureSize.value=new re(this.pyramidRenderTarget.width,this.pyramidRenderTarget.height),Object.assign(r.uniforms,t)};this.material.shapeBlendhack=i,this.material.root.shapeBlendhack=i}},jc=VN;jc.streamCompaction=new b6e;var w6e=new Fe,_6e=new Fe,P2=new wt,Sl=new E,am=new E,S6e=new wt;function A6e(e,t=0){let i=this.children.length;for(;i--;){let r=this.children[i];Nc.is(r)&&jN.call(r,e,t+1)}}function jN(e,t=0){if(e(this,t)!==!0){let i=this.children.length;for(;i--;){let r=this.children[i];Nc.is(r)&&jN.call(r,e,t+1)}}}function M6e(){if(this.shapesDataTexture.value===void 0){let n=new ts(new Float32Array(4*d1*ac),d1,ac,Ki,bi);this.shapesDataTexture.value=n}let e=this.shapesDataTexture.value,t=e.image.data;e.needsUpdate=!0;let i=0,r=this.data.geometry.blendRange,s=w6e.copy(this.matrixWorld).invert(),a=0;A6e.call(this,n=>{if(n.visible===!1)return!0;let o;if(n instanceof va||n instanceof td||n instanceof id)return;n instanceof _1?o=n.object:o=n;let l=n.data?.cloner;if(Zt.is(n)&&l&&!l.hideBase&&l.type!=="radial"&&l.disabled!==!0||!(o instanceof Ir))return;let h=o.geometry.userData.parameters,c=h.shapeBlendNode;if(c===void 0)return;if(_6e.multiplyMatrices(s,n.matrixWorld).decompose(am,P2,Sl),h.type==="TorusGeometry"&&h.arc!==360){let v=h.arc*Math.PI/180;v=v/4,P2.multiply(S6e.set(0,0,Math.sin(v),Math.cos(v)))}let u=c.overrideGlobalBlend?c.blendRange:r;u=u/this.bboxSize*2,t[a*4]=(am.x-this.bboxOffset)/this.bboxSize*2,t[a*4+1]=(am.y-this.bboxOffset)/this.bboxSize*2,t[a*4+2]=(am.z-this.bboxOffset)/this.bboxSize*2,t[a*4+3]=c.operation===0?1:c.operation===2?-1:-2,t[d1*4+a*4]=-P2.x,t[d1*4+a*4+1]=-P2.y,t[d1*4+a*4+2]=-P2.z,t[d1*4+a*4+3]=P2.w;let d=new Float32Array(4),f=0;if(h.type==="SphereGeometry")h.width===h.height&&h.width===h.depth?d[0]=0:d[0]=1,d[1]=h.width/this.bboxSize,d[2]=h.height/this.bboxSize,d[3]=h.depth/this.bboxSize,i=Math.max(i,d[1]*Sl.x+u,d[2]*Sl.x+u,d[3]*Sl.x+u);else if(h.type==="CubeGeometry"){f=h.cornerRadius;let v=h.width,y=h.height,x=h.depth;d[0]=2,d[1]=(v-2*f)/this.bboxSize,d[2]=(y-2*f)/this.bboxSize,d[3]=(x-2*f)/this.bboxSize,i=Math.max(i,Math.sqrt(v**2+y**2+x**2)/this.bboxSize*Sl.x+u)}else if(h.type==="CylinderGeometry"){f=h.cornerRadius;let v=h.height,y=h.radiusBottom,x=h.radiusTop;if(x>=y){let w=Math.atan2(x-y,v),_=(Math.PI/2-w)/2;x-=f/Math.tan(_),y-=f*Math.tan(_)}else if(y>x){let w=Math.atan2(y-x,v),_=(Math.PI/2-w)/2;x-=f*Math.tan(_),y-=f/Math.tan(_)}d[1]=(h.height-2*f)/this.bboxSize,y===x?(d[0]=3,d[2]=y/this.bboxSize*2):(d[0]=4,d[2]=y/this.bboxSize*2,d[3]=x/this.bboxSize*2),i=Math.max(i,d[1]*4*Sl.x+u)}else if(h.type==="TorusGeometry"){if(d[0]=5,d[1]=(h.width-h.depth)/this.bboxSize,d[2]=h.depth/this.bboxSize,h.arc!==360){d[0]=6,d[3]=d[1],t[d1*12+a*4+3]=d[2];let v=2*Math.atan2(d[2]/2,d[1]),y=h.arc*Math.PI/180/2-v;d[1]=Math.sin(y),d[2]=Math.cos(y)}i=Math.max(i,h.width*Sl.x/this.bboxSize+u)}t.set(d,d1*8+a*4),t[d1*12+a*4]=u,t[d1*12+a*4+1]=f/this.bboxSize*2,t[d1*12+a*4+2]=Sl.x;let p=o.material,m=p.uniforms.nodeU0.node.value,g=p.uniforms.nodeU1.value;c.operation!==0&&!c.useColor&&(g=-1),t[d1*16+a*4]=m.r,t[d1*16+a*4+1]=m.g,t[d1*16+a*4+2]=m.b,t[d1*16+a*4+3]=g,g<1&&this.material.defines.SHAPEBLEND_C===1&&(this.material.transparent=!0),a++}),this.npart=a,this.spatialPassUniforms.span.value=i*1.4}var GN=512;function LP(e,t){let i=!1,r=e.layers.mask&GN,s=t.getLayersOfType("transmission"),a=t.getLayersOfType("outline");return a.length>0&&(e.layers.set(8),s.length>0&&e.layers.enable(3),i=!0,F_(e),k_(e)),s.length===0&&a.length===0&&e.layers.set(0),r&&e.layers.set(9),e instanceof b0&&e.needsAO&&e.layers.enable(5),i}function zP(e,t){if(!t.layers)return!1;let i=e.layers.mask&GN,r=!1,s=t.getLayersOfType("transmission").filter(n=>n.data.visible),a=t.getLayersOfType("outline").filter(n=>n.data.visible);return s.length>0&&(e.layers.set(3),a.length>0&&e.layers.enable(8),r=!0),s.length===0&&a.length===0&&e.layers.set(0),i&&e.layers.set(9),e.needsAO&&e.layers.enable(5),r}function C6e(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof b0)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)LP(i,i.material[r])&&(t=!0);else LP(i,i.material)&&(t=!0)}),t}function E6e(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof b0)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)zP(i,i.material[r])&&(t=!0);else zP(i,i.material)&&(t=!0)}),t}var T6e=new yB,P6e=new Fe,D6e=new n0;function Jx(e,t,i,r=!1){let s=e.cloner;if(s)for(let a of s.children){let n=P6e.copy(a.matrixWorld).invert(),o=D6e.copy(t.ray).applyMatrix4(n),l=e.matrixWorld;o.applyMatrix4(l);let h=T6e;h.set(o.origin,o.direction),h.near=t.near,h.far=t.far;let c=h.intersectObject(e,!1);c.length>0&&i.push({...c[0],object:r?a:e})}}var I6e=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((i,r)=>{let s=[r,i],a=i;for(;this._constraints.has(a);){if(a=this._constraints.get(a),s.includes(a)){console.warn(`circular dependency detected: ${s.join(" -> ")}`);break}t.has(a)||s.push(a)}for(let n=s.length-2;n>=0;n--)if(!t.has(s[n])){let o=e.find(s[n]);o?o.applyPathSnapping(e):console.warn(`missing entity ${s[n]}`),t.add(s[n])}})}findDependency(e,t){let i=e;for(;this._constraints.has(i);)if(i=this._constraints.get(i),i===t)return!0;return!1}},O6e="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",Jl=class{};p3(Jl,"DepthMapRange",65536),p3(Jl,"MemoryPageSize",65536),p3(Jl,"BytesPerFloat",4),p3(Jl,"BytesPerInt",4);function R6e(e){let t,i,r,s,a,n,o,l,h,c,u,d,f,p,m,g;function v(T){let D=new Float64Array(c,n,16);for(let O=0;O<16;O++)D[O]=T[O];let R;if(r>1){t.exports.sortIndexes(s,a,h,n,o,l,d.DepthMapRange,r);let O=new Uint32Array(r);R=O.buffer,O.set(new Uint32Array(c,l,r))}else if(r===1){let O=new Uint32Array(r);O[0]=new Uint32Array(c,s,i)[0],R=O.buffer}else R=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:R},[R])}function y(T,D,R){let O=new Float32Array(c,a,i*3);r=0;let j=new Uint32Array(c,s,i);for(let X=0;X<R.length-1;X++){let N=D[X],k=T[X].elements,ne=N.filter(Q=>Q.enabled&&Q.mode==="Include").map(Q=>Q.type==="Box"?b(Q):A(Q)),te=N.filter(Q=>Q.enabled&&Q.mode==="Exclude").map(Q=>Q.type==="Box"?b(Q):A(Q));for(let Q=R[X];Q<R[X+1];Q++){let Z=f[Q*3],de=f[Q*3+1],ee=f[Q*3+2];if((ne.length===0||w(Z,de,ee,ne))&&(te.length===0||!w(Z,de,ee,te))){let le=1/(k[3]*Z+k[7]*de+k[11]*ee+k[15]);O[r*3]=(k[0]*Z+k[4]*de+k[8]*ee+k[12])*le,O[r*3+1]=(k[1]*Z+k[5]*de+k[9]*ee+k[13])*le,O[r*3+2]=(k[2]*Z+k[6]*de+k[10]*ee+k[14])*le,j[r]=Q,r++}}}}function x(T,D){let R=[],O=D.filter(N=>N.enabled&&N.mode==="Include").map(N=>N.type==="Box"?b(N):A(N)),j=D.filter(N=>N.enabled&&N.mode==="Exclude").map(N=>N.type==="Box"?b(N):A(N)),X=T.length;for(let N=0;N<X;N+=3){let k=T[N],ne=T[N+1],te=T[N+2];(O.length===0||w(k,ne,te,O))&&(j.length===0||!w(k,ne,te,j))||R.push(N/3)}return R}function w(T,D,R,O,j){return O[j==="Intersect"?"every":"some"](X=>{let N=_(T,D,R,X.invRotationMatrix,X.cropCenter);return Array.isArray(X)?S(N.x,N.y,N.z,X):C(N.x,N.y,N.z,X)})}function _(T,D,R,O,j){let X=T-j[0],N=D-j[1],k=R-j[2],ne=1/(O[3]*X+O[7]*N+O[11]*k+O[15]);return{x:(O[0]*X+O[4]*N+O[8]*k+O[12])*ne+j[0],y:(O[1]*X+O[5]*N+O[9]*k+O[13])*ne+j[1],z:(O[2]*X+O[6]*N+O[10]*k+O[14])*ne+j[2]}}function b(T){let D=T.cropSize[0]/2,R=T.cropSize[1]/2,O=T.cropSize[2]/2,j=[T.cropCenter[0]-D,T.cropCenter[1]-R,T.cropCenter[2]-O,T.cropCenter[0]+D,T.cropCenter[1]+R,T.cropCenter[2]+O],X=M(T.cropRotation);return Object.assign(j,{invRotationMatrix:X,cropCenter:T.cropCenter})}function M(T){let D=[],R=T[0]*Math.PI/180,O=T[1]*Math.PI/180,j=T[2]*Math.PI/180,X=Math.cos(R),N=Math.sin(R),k=Math.cos(O),ne=Math.sin(O),te=Math.cos(j),Q=Math.sin(j),Z=X*te,de=X*Q,ee=N*te,le=N*Q;return D[0]=k*te,D[1]=-k*Q,D[2]=ne,D[4]=de+ee*ne,D[5]=Z-le*ne,D[6]=-N*k,D[8]=le-Z*ne,D[9]=ee+de*ne,D[10]=X*k,D[12]=0,D[13]=0,D[14]=0,D[3]=0,D[7]=0,D[11]=0,D[15]=1,D}function S(T,D,R,O){return T>=O[0]&&T<=O[3]&&D>=O[1]&&D<=O[4]&&R>=O[2]&&R<=O[5]}function A(T){let D=2/T.cropSize[0],R=2/T.cropSize[1],O=2/T.cropSize[2],j=M(T.cropRotation);return{invRadiusX:D,invRadiusY:R,invRadiusZ:O,cropCenter:T.cropCenter,invRotationMatrix:j}}function C(T,D,R,O){let j=(T-O.cropCenter[0])*O.invRadiusX,X=(D-O.cropCenter[1])*O.invRadiusY,N=(R-O.cropCenter[2])*O.invRadiusZ;return j*j+X*X+N*N<=1}e.onmessage=T=>{if(T.data.getCroppedIndexes){let D=new Uint32Array(x(new Float32Array(T.data.positions),T.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:D},[D])}else if(T.data.positions)u=T.data.positions,f=new Float32Array(u),m=T.data.meshMatrixWorlds,g=T.data.cropsArray,p=T.data.meshIndexIntervals,y(m,g,p),e.postMessage({sortSetupComplete:!0});else if(T.data.sort||T.data.newMatrixWorlds||T.data.newCropsArray)(T.data.newMatrixWorlds||T.data.newCropsArray)&&(g=T.data.newCropsArray||g,m=T.data.newMatrixWorlds||m,y(m,g,p)),v(T.data.sort.view,T.data.sort.cameraPosition);else if(T.data.init){d=T.data.init.Constants,i=T.data.init.splatCount;let D=d.BytesPerInt,R=d.BytesPerFloat*3,O=new Uint8Array(T.data.init.sorterWasmBytes),j=D+R,X=i*j,N=i*d.BytesPerInt*2+d.DepthMapRange*d.BytesPerInt*2,k=d.MemoryPageSize*32,ne=X+N+k,te=Math.floor(ne/d.MemoryPageSize)+1,Q={module:{},env:{memory:new WebAssembly.Memory({initial:te*2,maximum:te*3,shared:!0})}};WebAssembly.compile(O).then(Z=>WebAssembly.instantiate(Z,Q)).then(Z=>{t=Z,s=0,a=i*D,n=a+i*R,h=n+16*d.BytesPerFloat*2,o=h+i*d.BytesPerInt,l=o+d.DepthMapRange*d.BytesPerInt,c=Q.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function L6e(e){let t=new Worker(URL.createObjectURL(new Blob(["(",R6e.toString(),")(self)"],{type:"application/javascript"}))),i=atob(O6e),r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return t.postMessage({init:{sorterWasmBytes:r.buffer,splatCount:e,Constants:{BytesPerFloat:Jl.BytesPerFloat,BytesPerInt:Jl.BytesPerInt,DepthMapRange:Jl.DepthMapRange,MemoryPageSize:Jl.MemoryPageSize}}}),t}var U9=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(i){return e[0]=i,t[0]}}(),z6e=function(e,t,i,r){return e+(t<<8)+(i<<16)+(r<<24)},nm=new re;function BP(e){let t=!1;return e.scene.objects.traverse((i,r)=>{if(r.visible===!1)return!0;r.type==="Splat"&&(t=!0)}),t}var Fm=class extends zi{constructor(e,t,i,r,s=!1,a=1,n,o){super(i,r),this.splatCount=t,this.meshIndexIntervals=n,this.meshMatrixWorlds=o,this.splatBuffers=e,this.geometry=i,this.material=r,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=s,this.devicePixelRatio=a,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,i=!1,r=1,s,a){let n=Fm.buildGeomtery(t),o=Fm.buildMaterial(s);return new Fm(e,t,n,o,i,r,s,a)}static buildMaterial(e){let t=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,i=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,r={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new re},viewport:{type:"v2",value:new re},basisViewport:{type:"v2",value:new re},debugColor:{type:"v3",value:new pt},covariancesTextureSize:{type:"v2",value:new re(1024,1024)},centersColorsTextureSize:{type:"v2",value:new re(1024,1024)},orthoZoom:{type:"f",value:-1}};return new ti({uniforms:r,vertexShader:t,fragmentShader:i,transparent:!0,alphaTest:1,blending:Ac,depthTest:!0,depthWrite:!1,side:N1})}static buildGeomtery(e){let t=new rt;t.setIndex([0,1,2,0,2,3]);let i=new Float32Array(12),r=new mt(i,3);t.setAttribute("position",r),r.setXYZ(0,-1,-1,0),r.setXYZ(1,-1,1,0),r.setXYZ(2,1,1,0),r.setXYZ(3,1,-1,0),r.needsUpdate=!0;let s=new gB().copy(t),a=new Uint32Array(e),n=new Od(a,1,!1);return n.setUsage(Cee),s.setAttribute("splatIndex",n),s.instanceCount=e,s}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(r=>r.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,t=0,i=0;for(let r of this.splatBuffers){let s=r.nsplats;this.colors.subarray(e,e+s*4).set(r.colorsA),e+=s*4,this.centers.subarray(t,t+s*3).set(r.decoded.xyz.denormDequant().data),t+=s*3,this.covariances.subarray(i,i+s*6).set(new Float32Array(r.precomputedCovarianceBufferData)),i+=s*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new re(4096,1024);for(;t.x*t.y*2<e*6;)t.y*=2;let i=new re(4096,1024);for(;i.x*i.y*4<e*4;)i.y*=2;let r,s;if(this.halfPrecisionCovariancesOnGPU){s=new Uint16Array(t.x*t.y*2);for(let c=0;c<this.covariances.length;c++)s[c]=rne.toHalfFloat(this.covariances[c]);r=new ts(s,t.x,t.y,pg,Jo)}else s=new Float32Array(t.x*t.y*2),s.set(this.covariances),r=new ts(s,t.x,t.y,pg,bi);r.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=r,this.material.uniforms.covariancesTextureSize.value.copy(t);let a=new Uint32Array(i.x*i.y*4);for(let c=0;c<e;c++){let u=c*4,d=c*3,f=c*4;a[f]=z6e(this.colors[u],this.colors[u+1],this.colors[u+2],this.colors[u+3]),a[f+1]=U9(this.centers[d]),a[f+2]=U9(this.centers[d+1]),a[f+3]=U9(this.centers[d+2])}let n=new ts(a,i.x,i.y,Oz,ko);n.internalFormat="RGBA32UI",n.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=n,this.material.uniforms.centersColorsTextureSize.value.copy(i);let o=256*4,l=new Float32Array(256*16);for(let c=0;c<this.meshMatrixWorlds.length;c++)l.set(this.meshMatrixWorlds[c].elements,c*16);let h=new ts(l,o,1,Ki,bi);h.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=h,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:s,texture:r,size:t},centerColors:{data:a,texture:n,size:i},meshMatrixWorlds:{data:l,texture:h}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,i,r){this.splatCount>0&&(nm.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(nm),this.material.uniforms.basisViewport.value.set(2/nm.x,2/nm.y),this.material.uniforms.focal.value.set(t,i),this.material.uniforms.orthoZoom.value=r,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose()),this.removeFromParent()}},HN,B6e=new Promise(e=>{HN=e}),kP=!1,om;function k6e(){if(kP)return;if(om)return om;async function e(){let t=await Ah(()=>import("./gaussian-splat-compression-CYQZ50o2.js"),[]);HN(t),kP=!0}return om=e(),om}var WN;B6e.then(e=>WN=e);var F6e=class{constructor(e={}){p3(this,"updateView",function(){let t=new Fe,i=[],r=new E(0,0,-1),s=new E(0,0,-1),a=new E,n=new E;return function(o=!1,l){let h=this.updateMatrixWorldsInWorkerIfNeeded(),c=this.cropsChanged();if(!o){s.set(0,0,-1).applyQuaternion(l.quaternion);let d=!1,f=!1;if(s.dot(r)<=.95&&(d=!0),n.copy(l.position).sub(a).length()>=1&&(f=!0),!d&&!f&&!h&&!c&&!this.needsInitialRender)return}this.needsInitialRender=!1,a.copy(l.position),r.copy(s),t.copy(l.matrixWorld).invert(),t.premultiply(this.dummyPerspectiveMatrix),i[0]=l.position.x,i[1]=l.position.y,i[2]=l.position.z;let u={sort:{view:t.elements,cameraPosition:i,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...h?{newMatrixWorlds:this.meshMatrixWorlds}:{},...c?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=u:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(u))}}()),this.scene=e.scene,this.currentPage=null,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null,this.needsInitialRender=!0,this.dummyPerspectiveMatrix=new Fe().makePerspective(-1,1,-1,1,.1,1e3)}updateSplatMeshUniforms(e,t){let i=new re;this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(e.getSize(i),this.cameraFocalLengthX=t.projectionMatrix.elements[0]*this.devicePixelRatio*i.x*.45,this.cameraFocalLengthY=t.projectionMatrix.elements[5]*this.devicePixelRatio*i.y*.45,this.splatMesh.updateUniforms(i,this.cameraFocalLengthX,this.cameraFocalLengthY,t.isPerspectiveCamera?-1:t.zoom*this.devicePixelRatio))}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new E().fromArray(e.position)),e.orientation&&(e.orientation=new wt().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseVisibleEntity(a=>{a.data.type==="Splat"&&t.push(a)}),this.splatMesh&&this.splatMesh.dispose(),t.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(a=>a.matrixWorld),this.meshMatrixWorldsOld=t.map(a=>a.matrixWorld.clone()),this.cropsArray=t.map(a=>a.data.crops.map(n=>n.data));let i=t.map(a=>new WN.GSplineBuffer(new Uint8Array(a.data.buffer).buffer)),r=0,s=[0];for(let a of i)r+=a.getSplatCount(),s.push(r);return this.setupSplatMesh(i,r,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,s,this.meshMatrixWorlds),this.setupSortWorker(r),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,t*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((t,i)=>t.equals(this.meshMatrixWorldsOld[i]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(t=>t.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,i)=>{t.data.crops.forEach((r,s)=>{this.cropsArray[i][s]===void 0?(e=!0,this.cropsArray[i][s]=r.data):Object.entries(r.data).forEach(([a,n])=>{Array.isArray(n)&&n.some((o,l)=>o!==this.cropsArray[i][s][a][l])?(e=!0,this.cropsArray[i][s][a]=n):n!==this.cropsArray[i][s]?.[a]&&(e=!0,this.cropsArray[i][s][a]=n)})}),t.data.crops.length!==this.cropsArray[i]?.length&&(this.cropsArray[i].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t,i=new E,r=new wt,s=!1,a=1,n,o){this.splatMesh=Fm.buildMesh(e,t,s,a,n,o),this.splatMesh.position.copy(i),this.splatMesh.quaternion.copy(r),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=99999,this.splatRenderCount=t,this.splatMesh.onBeforeRender=(l,h,c)=>this.update(l,c)}setupSortWorker(e){this.sortWorker=L6e(e),this.sortWorker.onmessage=t=>{t.data.sortDone?(this.sortRunning=!1,this.splatMesh?.updateIndexes(new Uint32Array(t.data.indexesBuffer)),this.lastSortTime=t.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):t.data.sortCanceled?this.sortRunning=!1:t.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):t.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.scene.activePage.add(this.splatMesh),this.needsInitialRender=!0)}}update(e,t){this.splatMesh!==null&&(this.updateSplatMeshUniforms(e,t),this.updateView(!1,t))}getSplatMesh(){return this.splatMesh}},$x=new $o;$x.wireframe=!0;var FP=new E,Q_=class extends As{constructor(e,t){super(),this.data=e,this.sharedAssets=t,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.shapeBlendIntances=[],this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new I6e,this.invisibleObjects=new Su("jflkdsafjasdifjaslk",{...nx.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1,this.errorPage=new $r("fdasfa",{...Yu.defaultData,name:""},{shared:t,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=E6e(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=C6e(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),i=this.entityIdentityToEntity[t];i&&(e.uuid=i.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof $r&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let i=[],r=t;for(;r!==this;){let s=r;r=r.parent;let a=r.children.indexOf(s);i.splice(0,0,a)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push(r)}return t.sort((i,r)=>pk(i.sortKey,r.sortKey)),t.map(i=>i.entity)}nonExistOrDescendantOf(e,t){let i=this.find(e);if(i===void 0)return!0;for(;i;){if(i.uuid===t)return!0;i=i.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===v0)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}find2D(e){for(let t of this.children)if(t instanceof $r&&t.uiScene){let i=t.uiScene.find(e);if(i)return i}}findScene2DfromObject2D(e){for(let t of this.children)if(t instanceof $r&&t.uiScene&&t.uiScene.find(e))return t.uiScene}find2DInUIObjects(e){let t;return this.traverseEntity(i=>{t===void 0&&i instanceof F1&&(t=i.uiCanvas.find(e))}),t}traverse2D(e){for(let t of this.children)t instanceof $r&&t.uiScene&&t.uiScene.traverse(e)}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{e.cloner?.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){if(e.path.length===0&&e.type===7){let i=e.parent===null?this:this.find(e.parent);if(i===void 0)throw new Error("unexpected");let r=this.createObject(e.id,e.data,e.children,i,e.localIndex,t);r.updateVisible(this),r.resetBBoxNeedsUpdate(),ja(r)&&jo(r.parent)&&(r.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(r),this.markToExpandCloner(r),this.markPenumbraSizeDirty(),r.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");i.traverseEntity(s=>{s instanceof jc&&(this.shapeBlendIntances=this.shapeBlendIntances.filter(a=>a!==s))}),this.markToExpandCloner(i),i.resetBBoxNeedsUpdate(),this.unregisterObject(i);let r=i.parent;this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(i),this.markPenumbraSizeDirty(),i.parent.remove(i),jo(i.parent)&&(i.parent.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),ja(i)&&(i.freeBooleanPointer(),r instanceof Vc&&r.invalidateDownstreamBooleanData().recomputeBoolean()),i instanceof q_&&i.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),this.pathConstraints.removeDependencies(i.uuid),i.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(i);let r=i.parent;this.markNeedsRecomputeInstancesForAncessors(r),i.cloner?.resetOnMove(),this.markToExpandCloner(i);let s=e.parent===null?this:this.find(e.parent);if(s===void 0)throw new Error("unexpected");s.add(i),this.markNeedsRecomputeInstancesForAncessors(s),this.markToExpandCloner(i),i.invalidateClonerTransform(i),i.updateVisible(this),i.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let a=e.localIndex;s.children.splice(a,0,s.children.pop()),ja(i)&&(i.invalidateUpstreamBooleanData(),jo(i.parent)?i.parent.invalidateDownstreamBooleanData().recomputeBoolean():r instanceof Vc&&r.invalidateDownstreamBooleanData().recomputeBoolean()),i.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let t of this.children)t instanceof $r&&(t.visible=t.uuid===e,t.visible&&(this.activePage=t,this.activePage.onActive(this)));this.activePage!==this.splatViewer?.activePage&&this.reloadSplats()}updateEntityByOp(e,t,i,r){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:a}=t.props;t={...t,props:a},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let s=this.find(e);if(s)try{y6e(s,t,i,{scene:this,shared:r}),s instanceof Ir&&s.updateGeometryGroupsIfNeeded()}catch(a){console.error(a)}}updateEntity2DByOp(e,t,i,r,s,a=[]){e.updateEntityByOp(t,i,r,s),this.traverseEntity(n=>{(n instanceof F1||n instanceof $r)&&(a.includes(n.frameId??"")||n.frameId===t)&&n.updateEntity2DByOp(t,i,r,s)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let i=Object.entries(t.data.lib.components).map((r,s)=>({data:r[1].asset.data,children:r[1].asset.children,id:r[0],fi:s}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(i,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(r=>{r instanceof V1&&r.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){Zt.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{Zt.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,i,r,s,a,n){if(e){let o=r.find(e);o&&o!==r&&s.forInstancesRec(l=>{l.data=jd(l.data,h=>{let c=h.events.data(n.id),u=l.goUp(a);if(u){let d=[...fk(u.identity),e].join("-"),f=this.entityIdentityToEntity[d];if(f){let p=f.uuid,m=jr.zoom(c,t);m[i]=p}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,i,r,s,a){e.forEach(n=>{n.data.type==="Transition"?this.relativeizeInner(n.data.object,[...t,n.id],"object",i,r,s,a):n.data.type==="Animation"?this.relativeizeInner(n.data.object,[...t,n.id],"object",i,r,s,a):n.data.type==="Conditional"&&(this.rewriteActions(n.data.ifActions,[...t,n.id,"ifActions"],i,r,s,a),this.rewriteActions(n.data.elseActions,[...t,n.id,"elseActions"],i,r,s,a))})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof Au&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,i)=>{t.data.events.forEach(r=>{if(r.data.type==="GameControl"){let s=!1;if(t.forInstancesRec(a=>{a.data=jd(a.data,n=>{a.isInstanceRoot||(n.events.delete(r.id),s=!0)}).data}),s===!1)for(let a of Qg.list)this.rewriteActions(r.data.gameActions[a],["gameActions",a],e,t,i,r)}else r.data.type==="Conditional"?(r.data.condition.type==="Distance"?(this.relativeizeInner(r.data.condition.fromObject,["condition"],"fromObject",e,t,i,r),this.relativeizeInner(r.data.condition.toObject,["condition"],"toObject",e,t,i,r)):r.data.condition.type==="State"?this.relativeizeInner(r.data.condition.object,["condition"],"object",e,t,i,r):r.data.condition.type==="Comparison"&&(r.data.condition.lOperand.type==="Property"&&this.relativeizeInner(r.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,i,r),r.data.condition.rOperand.type==="Property"&&this.relativeizeInner(r.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,i,r)),this.rewriteActions(r.data.inActions,["inActions"],e,t,i,r),this.rewriteActions(r.data.outActions,["outActions"],e,t,i,r)):"actions"in r.data&&this.rewriteActions(r.data.actions,["actions"],e,t,i,r)})}),!0})}expandInstances(e,t,i){let r=new Set;this.traverseEntity(s=>{if(s instanceof Au&&s.isInstanceRoot)return s.expandInstanceChildren({scene:this,shared:e,pendingDeletes:r}),t||s.resetBBoxNeedsUpdate(),i&&s.traverseEntity(a=>{i.addClip(a)}),!0});for(let s of r)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(s),Y_(s)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(i=>{i instanceof Au&&i.isInstanceRoot&&(i.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let i=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[i]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[i]),t.dispose()})}clearScene(){for(let e of this.children)Zt.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let i=[],r=s=>{for(let a of s.children){let n=a.cloner;if(Zt.is(a)&&!a.raycastLock&&(a.visible||n?.object.data.visible))if(t===!0&&a.isInstanceRoot){let o=[];if(e.intersectObject(a,!0,o),o.length){let l=o[0];l.object=a,l.point.applyMatrix4(l.object.matrixWorld);let h=a.matrixWorld.clone().invert();l.point.applyMatrix4(h),i.push(l)}}else(ja(a)||Vx(a)&&this.enableHelpers&&a.objectHelper.visible)&&(e.intersectObject(a,!1,i),Jx(a,e,i)),r(a)}};return r(this.activePage),i}raycastWithClones(e){let t=[],i=r=>{for(let s of r.children){let a=s.cloner;Zt.is(s)&&(s.visible||a?.object.data.visible)&&((ja(s)||Vx(s)&&this.enableHelpers&&s.objectHelper.visible)&&(e.intersectObject(s,!1,t),Jx(s,e,t,!0)),i(s))}};return i(this),t}forEachEntity(e){for(let t of this.children)Zt.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)Zt.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)Zt.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(i=>{if(i instanceof Ir&&i.data.type==="Mesh"&&(i.data.geometry.type==="TextGeometry"||i.data.geometry.type==="InputGeometry")&&i.data.geometry.font===e){let r=i.geometry,s=i.data.geometry;r.updateFont(e,t).then(()=>{r.update(s,t);let a=i.invalidateDownstreamBooleanData();jo(a)&&a.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)Nc.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)Zt.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,i){let r=0;for(let s of e)this.createObject(s.id,s.data,s.children,t,r,i),r+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,i,r,s,a){let n={scene:this,shared:a},o=K_(e,t,n);return o instanceof jc&&this.shapeBlendIntances.push(o),o&&(this.entityByUuid[e]=o,r.add(o),r.children.splice(s,0,r.children.pop()),i.length>0&&(o.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(i,o,a)),o.updateState(t,n),o instanceof Ir&&o.updateGeometryGroupsIfNeeded(),o.updateVisible(this),o.cloner&&this.toExpandCloner.add(o),t.pathSnapping?.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&o.traverseEntity(l=>{let h=l.dataPatched;if(l instanceof Ir&&h.bones&&h.boneInverses){let c=h.bones.map(f=>this.find(f)),u=h.boneInverses.map(f=>new Fe().fromArray(f)),d=new Bw(c,u);l.bind(d,l.bindMatrix)}else l.matrixAutoUpdate=!0}),o}getCenter(e){let t=[];for(let r=0,s=e.length;r<s;++r){let{id:a,recursive:n}=e[r],o=this.find(a),l=n?o.recursiveBBox:o.singleBBox;t.push(...l.vertices)}let i=new yr;return i.setFromPoints(t),i.getCenter(FP),FP}copyMatrixWorld(e,t){if(e===null){t.identity();return}let i=this.find(e);i?t.copy(i.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){if(e===null){t.identity();return}let i=this.find(e)?.parent;i?t.copy(i.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof ns)if(Array.isArray(t.material))for(let i=0;i<t.material.length;i++)t.material[i]instanceof xh&&e(t.material[i]);else t.material instanceof xh&&e(t.material)})}updateViewPlaneSize(e,t,i=!1){this.traverseConcreteEntity(r=>{r instanceof V1&&r.setViewplaneSize(e,t,i)})}initializeSplatViewer(){this.splatViewer=new F6e({scene:this}),this.reloadSplats()}reloadSplats(){this.splatViewer?.loadSplat()}},Nm=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)},N6e=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return V6e(Math.atan2(r,i))},U6e=(e,t,i)=>{let r={x:0,y:0};return i=eb(i),r.x=e.x-t*Math.cos(i),r.y=e.y-t*Math.sin(i),r},eb=e=>e*(Math.PI/180),V6e=e=>e*(180/Math.PI),j6e=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,V9=new Map,NP=e=>{V9.has(e)&&clearTimeout(V9.get(e)),V9.set(e,setTimeout(e,100))},fv=(e,t,i)=>{let r=t.split(/[ ,]+/g),s;for(let a=0;a<r.length;a+=1)s=r[a],e.addEventListener?e.addEventListener(s,i,!1):e.attachEvent&&e.attachEvent(s,i)},UP=(e,t,i)=>{let r=t.split(/[ ,]+/g),s;for(let a=0;a<r.length;a+=1)s=r[a],e.removeEventListener?e.removeEventListener(s,i):e.detachEvent&&e.detachEvent(s,i)},qN=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),VP=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},tb=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},Z_=(e,t,i)=>{let r=XN(e);for(let s in r)if(r.hasOwnProperty(s))if(typeof t=="string")r[s]=t+" "+i;else{let a="";for(let n=0,o=t.length;n<o;n+=1)a+=t[n]+" "+i+", ";r[s]=a.slice(0,-2)}return r},G6e=(e,t)=>{let i=XN(e);for(let r in i)i.hasOwnProperty(r)&&(i[r]=t);return i},XN=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(i){t[i+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},j9=(e,t)=>{for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},H6e=(e,t)=>{let i={};for(let r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?i[r]=t[r]:e.hasOwnProperty(r)&&(i[r]=e[r]);return i},ib=(e,t)=>{if(e.length)for(let i=0,r=e.length;i<r;i+=1)t(e[i]);else t(e)},W6e=(e,t,i)=>({x:Math.min(Math.max(e.x,t.x-i),t.x+i),y:Math.min(Math.max(e.y,t.y-i),t.y+i)});typeof window<"u"&&(YN="ontouchstart"in window,KN=!!window.PointerEvent,QN=!!window.MSPointerEvent);var YN,KN,QN,i3={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},ru,Jd={};KN?ru=i3.pointer:QN?ru=i3.MSPointer:YN?(ru=i3.touch,Jd=i3.mouse):ru=i3.mouse;function Kc(){}Kc.prototype.on=function(e,t){var i=this,r=e.split(/[ ,]+/g),s;i._handlers_=i._handlers_||{};for(var a=0;a<r.length;a+=1)s=r[a],i._handlers_[s]=i._handlers_[s]||[],i._handlers_[s].push(t);return i};Kc.prototype.off=function(e,t){var i=this;return i._handlers_=i._handlers_||{},e===void 0?i._handlers_={}:t===void 0?i._handlers_[e]=null:i._handlers_[e]&&i._handlers_[e].indexOf(t)>=0&&i._handlers_[e].splice(i._handlers_[e].indexOf(t),1),i};Kc.prototype.trigger=function(e,t){var i=this,r=e.split(/[ ,]+/g),s;i._handlers_=i._handlers_||{};for(var a=0;a<r.length;a+=1)s=r[a],i._handlers_[s]&&i._handlers_[s].length&&i._handlers_[s].forEach(function(n){n.call(i,{type:s,target:i},t)})};Kc.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=H6e(t.options,e))};Kc.prototype.bindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[t]=function(){typeof i["on"+t]=="function"?i["on"+t].apply(i,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},fv(e,ru[t],i._domHandlers_[t]),Jd[t]&&fv(e,Jd[t],i._domHandlers_[t]),i};Kc.prototype.unbindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},UP(e,ru[t],i._domHandlers_[t]),Jd[t]&&UP(e,Jd[t],i._domHandlers_[t]),delete i._domHandlers_[t],this};var J_=Kc;function Yr(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Yr.id,Yr.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Yr.prototype=new J_;Yr.constructor=Yr;Yr.id=0;Yr.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Yr.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=G6e("borderRadius","50%"),i=Z_("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},j9(r.el,i),this.options.shape==="circle"&&j9(r.back,t),j9(r.front,t),this.applyStyles(r),this};Yr.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var i in e[t])this.ui[t].style[i]=e[t][i];return this};Yr.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Yr.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Yr.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Yr.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};Yr.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var i=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=i,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let i=t.options.restJoystick,r={};r.x=i===!0||i.x!==!1?0:t.instance.frontPosition.x,r.y=i===!0||i.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,r)}return t};Yr.prototype.setPosition=function(e,t){var i=this;i.frontPosition={x:t.x,y:t.y};var r=i.options.fadeTime+"ms",s={};s.front=Z_("transition",["top","left"],r);var a={front:{}};a.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(s),i.applyStyles(a),i.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(i),i.restCallback()},i.options.fadeTime)};Yr.prototype.restCallback=function(){var e=this,t={};t.front=Z_("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};Yr.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Yr.prototype.computeDirection=function(e){var t=e.angle.radian,i=Math.PI/4,r=Math.PI/2,s,a,n;if(t>i&&t<i*3&&!e.lockX?s="up":t>-i&&t<=i&&!e.lockY?s="left":t>-i*3&&t<=-i&&!e.lockX?s="down":e.lockY||(s="right"),e.lockY||(t>-r&&t<r?a="left":a="right"),e.lockX||(t>0?n="up":n="down"),e.force>this.options.threshold){var o={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(o[l]=this.direction[l]);var h={};this.direction={x:a,y:n,angle:s},e.direction=this.direction;for(l in o)o[l]===this.direction[l]&&(h[l]=!0);if(h.x&&h.y&&h.angle)return e;(!h.x||!h.y)&&this.trigger("plain",e),h.x||this.trigger("plain:"+a,e),h.y||this.trigger("plain:"+n,e),h.angle||this.trigger("dir dir:"+s,e)}else this.resetDirection();return e};var q6e=Yr;function xr(e,t){var i=this;i.nipples=[],i.idles=[],i.actives=[],i.ids=[],i.pressureIntervals={},i.manager=e,i.id=xr.id,xr.id+=1,i.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},i.config(t),(i.options.mode==="static"||i.options.mode==="semi")&&(i.options.multitouch=!1),i.options.multitouch||(i.options.maxNumberOfNipples=1);let r=getComputedStyle(i.options.zone.parentElement);return r&&r.display==="flex"&&(i.parentIsFlex=!0),i.updateBox(),i.prepareNipples(),i.bindings(),i.begin(),i.nipples}xr.prototype=new J_;xr.constructor=xr;xr.id=0;xr.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(i){if(i===void 0)return t[0];for(var r=0,s=t.length;r<s;r+=1)if(t[r].identifier===i)return t[r];return!1}};xr.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};xr.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var i=e.createNipple(t.position,e.manager.getIdentifier());i.add(),e.idles.push(i)}};xr.prototype.createNipple=function(e,t){var i=this,r=i.manager.scroll,s={},a=i.options,n={x:i.parentIsFlex?r.x:r.x+i.box.left,y:i.parentIsFlex?r.y:r.y+i.box.top};if(e.x&&e.y)s={x:e.x-n.x,y:e.y-n.y};else if(e.top||e.right||e.bottom||e.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=e.top,o.style.right=e.right,o.style.bottom=e.bottom,o.style.left=e.left,o.style.position="absolute",a.zone.appendChild(o);var l=o.getBoundingClientRect();a.zone.removeChild(o),s=e,e={x:l.left+r.x,y:l.top+r.y}}var h=new q6e(i,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restJoystick:a.restJoystick,restOpacity:a.restOpacity,mode:a.mode,identifier:t,position:e,zone:a.zone,frontPosition:{x:0,y:0},shape:a.shape});return a.dataOnly||(tb(h.ui.el,s),tb(h.ui.front,h.frontPosition)),i.nipples.push(h),i.trigger("added "+h.identifier+":added",h),i.manager.trigger("added "+h.identifier+":added",h),i.bindNipple(h),h};xr.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};xr.prototype.bindNipple=function(e){var t=this,i,r=function(s,a){i=s.type+" "+a.id+":"+s.type,t.trigger(i,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};xr.prototype.pressureFn=function(e,t,i){var r=this,s=0;clearInterval(r.pressureIntervals[i]),r.pressureIntervals[i]=setInterval((function(){var a=e.force||e.pressure||e.webkitForce||0;a!==s&&(t.trigger("pressure",a),r.trigger("pressure "+t.identifier+":pressure",a),s=a)}).bind(r),100)};xr.prototype.onstart=function(e){var t=this,i=t.options,r=e;e=qN(e),t.updateBox();var s=function(a){t.actives.length<i.maxNumberOfNipples?t.processOnStart(a):r.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(n){if(Object.values(r.touches).findIndex(function(l){return l.identifier===n})<0){var o=[e[0]];o.identifier=n,t.processOnEnd(o)}}),t.actives.length<i.maxNumberOfNipples&&t.processOnStart(a))};return ib(e,s),t.manager.bindDocument(),!1};xr.prototype.processOnStart=function(e){var t=this,i=t.options,r,s=t.manager.getIdentifier(e),a=e.force||e.pressure||e.webkitForce||0,n={x:e.pageX,y:e.pageY},o=t.getOrCreate(s,n);o.identifier!==s&&t.manager.removeIdentifier(o.identifier),o.identifier=s;var l=function(c){c.trigger("start",c),t.trigger("start "+c.id+":start",c),c.show(),a>0&&t.pressureFn(e,c,c.identifier),t.processOnMove(e)};if((r=t.idles.indexOf(o))>=0&&t.idles.splice(r,1),t.actives.push(o),t.ids.push(o.identifier),i.mode!=="semi")l(o);else{var h=Nm(n,o.position);if(h<=i.catchDistance)l(o);else{o.destroy(),t.processOnStart(e);return}}return o};xr.prototype.getOrCreate=function(e,t){var i=this,r=i.options,s;return/(semi|static)/.test(r.mode)?(s=i.idles[0],s?(i.idles.splice(0,1),s):r.mode==="semi"?i.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(s=i.createNipple(t,e),s)};xr.prototype.processOnMove=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),s=t.nipples.get(r),a=t.manager.scroll;if(!j6e(e)){this.processOnEnd(e);return}if(!s){console.error("Found zombie joystick with ID "+r),t.manager.removeIdentifier(r);return}if(i.dynamicPage){var n=s.el.getBoundingClientRect();s.position={x:a.x+n.left,y:a.y+n.top}}s.identifier=r;var o=s.options.size/2,l={x:e.pageX,y:e.pageY};i.lockX&&(l.y=s.position.y),i.lockY&&(l.x=s.position.x);var h=Nm(l,s.position),c=N6e(l,s.position),u=eb(c),d=h/o,f={distance:h,position:l},p,m;if(s.options.shape==="circle"?(p=Math.min(h,o),m=U6e(s.position,p,c)):(m=W6e(l,s.position,o),p=Nm(m,s.position)),i.follow){if(h>o){let x=l.x-m.x,w=l.y-m.y;s.position.x+=x,s.position.y+=w,s.el.style.top=s.position.y-(t.box.top+a.y)+"px",s.el.style.left=s.position.x-(t.box.left+a.x)+"px",h=Nm(l,s.position)}}else l=m,h=p;var g=l.x-s.position.x,v=l.y-s.position.y;s.frontPosition={x:g,y:v},i.dataOnly||tb(s.ui.front,s.frontPosition);var y={identifier:s.identifier,position:l,force:d,pressure:e.force||e.pressure||e.webkitForce||0,distance:h,angle:{radian:u,degree:c},vector:{x:g/o,y:-v/o},raw:f,instance:s,lockX:i.lockX,lockY:i.lockY};y=s.computeDirection(y),y.angle={radian:eb(180-c),degree:180-c},s.trigger("move",y),t.trigger("move "+s.id+":move",y)};xr.prototype.processOnEnd=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),s=t.nipples.get(r),a=t.manager.removeIdentifier(s.identifier);!s||(i.dataOnly||s.hide(function(){i.mode==="dynamic"&&(s.trigger("removed",s),t.trigger("removed "+s.id+":removed",s),t.manager.trigger("removed "+s.id+":removed",s),s.destroy())}),clearInterval(t.pressureIntervals[s.identifier]),s.resetDirection(),s.trigger("end",s),t.trigger("end "+s.id+":end",s),t.ids.indexOf(s.identifier)>=0&&t.ids.splice(t.ids.indexOf(s.identifier),1),t.actives.indexOf(s)>=0&&t.actives.splice(t.actives.indexOf(s),1),/(semi|static)/.test(i.mode)?t.idles.push(s):t.nipples.indexOf(s)>=0&&t.nipples.splice(t.nipples.indexOf(s),1),t.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(t.manager.ids[a.id]=a.identifier))};xr.prototype.onDestroyed=function(e,t){var i=this;i.nipples.indexOf(t)>=0&&i.nipples.splice(i.nipples.indexOf(t),1),i.actives.indexOf(t)>=0&&i.actives.splice(i.actives.indexOf(t),1),i.idles.indexOf(t)>=0&&i.idles.splice(i.idles.indexOf(t),1),i.ids.indexOf(t.identifier)>=0&&i.ids.splice(i.ids.indexOf(t.identifier),1),i.manager.removeIdentifier(t.identifier),i.manager.unbindDocument()};xr.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(i){i.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var X6e=xr;function l1(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=VP(),t.config(e),t.prepareCollections();var i=function(){var s;t.collections.forEach(function(a){a.forEach(function(n){s=n.el.getBoundingClientRect(),n.position={x:t.scroll.x+s.left,y:t.scroll.y+s.top}})})};if(typeof window>"u")return t.collections;fv(window,"resize",function(){NP(i)});var r=function(){t.scroll=VP()};return fv(window,"scroll",function(){NP(r)}),t.collections}l1.prototype=new J_;l1.constructor=l1;l1.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var i;return e.collections.every(function(r){return i=r.get(t),!i}),i}};l1.prototype.create=function(e){return this.createCollection(e)};l1.prototype.createCollection=function(e){var t=this,i=new X6e(t,e);return t.bindCollection(i),t.collections.push(i),i};l1.prototype.bindCollection=function(e){var t=this,i,r=function(s,a){i=s.type+" "+a.id+":"+s.type,t.trigger(i,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};l1.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};l1.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};l1.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};l1.prototype.removeIdentifier=function(e){var t={};for(var i in this.ids)if(this.ids[i]===e){t.id=i,t.identifier=this.ids[i],delete this.ids[i];break}return t};l1.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};l1.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};l1.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};l1.prototype.onAny=function(e,t){var i=this,r,s="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=qN(t);var a=function(o,l,h){h.ids.indexOf(l)>=0&&(h[s](o),o._found_=!0)},n=function(o){r=i.getIdentifier(o),ib(i.collections,a.bind(null,o,r)),o._found_||i.removeIdentifier(r)};return ib(t,n),!1};l1.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};l1.prototype.onDestroyed=function(e,t){var i=this;if(i.collections.indexOf(t)<0)return!1;i.collections.splice(i.collections.indexOf(t),1)};var Y6e=l1,jP=new Y6e,K6e={create:function(e){return jP.create(e)},factory:jP},ZN=new Map,sd=new Map,mc=class{constructor(e,t,i,r){this.data=t;let{audio:s,volume:a,delay:n,loop:o}=t;if(!s)throw new Error("Missing property");let l=typeof s=="string"?r.getAudio(s).src:s.data;this.audioPlayer=new A3({src:l,volume:a,delay:n,loop:o}),sd.has(i.uuid)?sd.get(i.uuid).push(this):sd.set(i.uuid,[this]),ZN.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},rb=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=ZN.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=sd.get(e);!t?.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>i.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(i=>i.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...sd.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(i=>{i.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(i=>{i.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},JN=class{constructor(e,t,i,r,s){if(this.data=t,this.shared=r,this.condition=s,t.interaction==="play")this.interaction=new mc(e,t,i,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new rb(t);else throw new Error("Missing property")}dispatchBasic(){if(ji(this.shared,this.condition)===!1)return!1;this.interaction instanceof mc?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(ji(this.shared,this.condition)===!1)return!1;this.interaction instanceof mc?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(ji(this.shared,this.condition)===!1)return!1;this.interaction instanceof mc&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},$N=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.delay=0,this.emission=e.emission,e.delay!==void 0&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop(this.delay):this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze(this.delay):this.unFreeze(this.delay)}start(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},e);return}this.particleSystem.start()}stop(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.stop(0),this.clearDelay()},e);return}this.particleSystem.stop()}freeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.freeze(0),this.clearDelay()},e);return}this.particleSystem.froze()}unFreeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.unFreeze(0),this.clearDelay()},e);return}this.particleSystem.unFroze()}reset(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.reset(0),this.clearDelay()},e);return}this.particleSystem.reset()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze();break}}dispatchBasic(){if(ji(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze(this.delay);break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchConditional(){if(ji(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchGameControl(e){if(ji(this.shared,this.condition)===!1||!this.particleSystem)return!1;e==="start"?this.start(this.delay):this.stop(this.delay)}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},Q6e="text/plain",Z6e="us-ascii",GP=(e,t)=>t.some(i=>i instanceof RegExp?i.test(e):i===e),J6e=(e,{stripHash:t})=>{let i=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!i)throw new Error(`Invalid URL: ${e}`);let{type:r,data:s,hash:a}=i.groups,n=r.split(";");a=t?"":a;let o=!1;n[n.length-1]==="base64"&&(n.pop(),o=!0);let l=(n.shift()||"").toLowerCase(),h=[...n.map(c=>{let[u,d=""]=c.split("=").map(f=>f.trim());return u==="charset"&&(d=d.toLowerCase(),d===Z6e)?"":`${u}${d?`=${d}`:""}`}).filter(Boolean)];return o&&h.push("base64"),(h.length>0||l&&l!==Q6e)&&h.unshift(l),`data:${h.join(";")},${o?s.trim():s}${a?`#${a}`:""}`};function $6e(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return J6e(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let i=e.startsWith("//");!i&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&r.protocol==="https:"&&(r.protocol="http:"),t.forceHttps&&r.protocol==="http:"&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,n=0,o="";for(;;){let h=a.exec(r.pathname);if(!h)break;let c=h[0],u=h.index,d=r.pathname.slice(n,u);o+=d.replace(/\/{2,}/g,"/"),o+=c,n=u+c.length}let l=r.pathname.slice(n,r.pathname.length);o+=l.replace(/\/{2,}/g,"/"),r.pathname=o}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let a=r.pathname.split("/"),n=a[a.length-1];GP(n,t.removeDirectoryIndex)&&(a=a.slice(0,-1),r.pathname=a.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let a of[...r.searchParams.keys()])GP(a,t.removeQueryParameters)&&r.searchParams.delete(a);if(t.removeQueryParameters===!0&&(r.search=""),t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,""));let s=e;return e=r.toString(),!t.removeSingleSlash&&r.pathname==="/"&&!s.endsWith("/")&&r.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||r.pathname==="/")&&r.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),i&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var exe=class{constructor({url:e,context:t},i,r,s){if(this.controlsManager=i,this.shared=r,this.condition=s,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:$6e(e,{removeTrailingSlash:!1,removeSingleSlash:!1,stripWWW:!1}),this.context=t??"tab"}dispatch(){if(ji(this.shared,this.condition)===!1)return!1;bf?window.location.assign(this.url):(this.context==="tab"||dk&&this.context==="none"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),this.controlsManager.orbitControls?.onPointerUp(xt[0]),pde())}},eU=class{constructor(e,t,i,r,s){this.data=e,this.page=t,this.controlsManager=i,this.shared=r,this.condition=s,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=a=>{this.timeoutIdQueue.shift();let n=this.page.scene.find(a);if(n===void 0)return;let o=this.controlsManager.sharedGameControlGlobals.rapierWorld,l=o?n.dataPatched.physics?.fusedBody:!0;if(n.cloner){for(let h of n.cloner.children)l?(h.playModeVisible=!1,h.rigidBody&&n.dataPatched.physics?.rigidBody==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(h.rigidBody.collider(0).handle),o.removeRigidBody(h.rigidBody),h.rigidBody=void 0),h.bvhGeometry&&(h.bvhGeometry=void 0)):this.clone===void 0||this.clone===h?(h.playModeVisible=!1,h.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(h.rigidBody.collider(0).handle),o.removeRigidBody(h.rigidBody),h.rigidBody=void 0)):h.playModeVisible===void 0&&(h.playModeVisible=!0);(l||this.clone===void 0||this.clone===!1)&&(n.visible=!1,n.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(n.rigidBody.collider(0).handle),o.removeRigidBody(n.rigidBody),n.rigidBody=void 0),n.bvhGeometry&&(n.bvhGeometry=void 0))}else n.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(n.rigidBody.collider(0).handle),o.removeRigidBody(n.rigidBody),n.rigidBody=void 0),n.bvhGeometry&&(n.bvhGeometry=void 0),n.visible=!1;o===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(h=>h.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(h=>h.rigidBody!==void 0),n.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(ji(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(ji(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},tU=class{constructor(e,t,i,r,s){this.data=e,this.page=t,this.shared=i,this.eventManager=r,this.condition=s,this.shared=i}dispatch(){if(ji(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{this.shared.reset(this.shared.data,!0),h7(this.page,this.shared,!0),this.eventManager.reset(),this.eventManager.controlsManager.gameControl?.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},iU={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},$_={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},txe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],pv={CSS:{},springs:{}};function qa(e,t,i){return Math.min(Math.max(e,t),i)}function ad(e,t){return e.indexOf(t)>-1}function G9(e,t){return e.apply(null,t)}var _t={arr:function(e){return Array.isArray(e)},obj:function(e){return ad(Object.prototype.toString.call(e),"Object")},pth:function(e){return _t.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||_t.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return _t.hex(e)||_t.rgb(e)||_t.hsl(e)},key:function(e){return!iU.hasOwnProperty(e)&&!$_.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function rU(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(i){return parseFloat(i)}):[]}function sU(e,t){var i=rU(e),r=qa(_t.und(i[0])?1:i[0],.1,100),s=qa(_t.und(i[1])?100:i[1],.1,100),a=qa(_t.und(i[2])?10:i[2],.1,100),n=qa(_t.und(i[3])?0:i[3],.1,100),o=Math.sqrt(s/r),l=a/(2*Math.sqrt(s*r)),h=l<1?o*Math.sqrt(1-l*l):0,c=1,u=l<1?(l*o+-n)/h:-n+o;function d(p){var m=t?t*p/1e3:p;return l<1?m=Math.exp(-m*l*o)*(c*Math.cos(h*m)+u*Math.sin(h*m)):m=(c+u*m)*Math.exp(-m*o),p===0||p===1?p:1-m}function f(){var p=pv.springs[e];if(p)return p;for(var m=1/6,g=0,v=0;;)if(g+=m,d(g)===1){if(v++,v>=16)break}else v=0;var y=g*m*1e3;return pv.springs[e]=y,y}return t?d:f}function ixe(e){return e===void 0&&(e=10),function(t){return Math.ceil(qa(t,1e-6,1)*e)*(1/e)}}var rxe=function(){var e=11,t=1/(e-1);function i(c,u){return 1-3*u+3*c}function r(c,u){return 3*u-6*c}function s(c){return 3*c}function a(c,u,d){return((i(u,d)*c+r(u,d))*c+s(u))*c}function n(c,u,d){return 3*i(u,d)*c*c+2*r(u,d)*c+s(u)}function o(c,u,d,f,p){var m,g,v=0;do g=u+(d-u)/2,m=a(g,f,p)-c,m>0?d=g:u=g;while(Math.abs(m)>1e-7&&++v<10);return g}function l(c,u,d,f){for(var p=0;p<4;++p){var m=n(u,d,f);if(m===0)return u;var g=a(u,d,f)-c;u-=g/m}return u}function h(c,u,d,f){if(!(0<=c&&c<=1&&0<=d&&d<=1))return;var p=new Float32Array(e);if(c!==u||d!==f)for(var m=0;m<e;++m)p[m]=a(m*t,c,d);function g(v){for(var y=0,x=1,w=e-1;x!==w&&p[x]<=v;++x)y+=t;--x;var _=(v-p[x])/(p[x+1]-p[x]),b=y+_*t,M=n(b,c,d);return M>=.001?l(v,b,c,d):M===0?b:o(v,y,y+t,c,d)}return function(v){return c===u&&d===f||v===0||v===1?v:a(g(v),u,f)}}return h}(),aU=function(){var e={linear:function(){return function(r){return r}}},t={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var s,a=4;r<((s=Math.pow(2,--a))-1)/11;);return 1/Math.pow(4,3-a)-7.5625*Math.pow((s*3-2)/22-r,2)}},Elastic:function(r,s){r===void 0&&(r=1),s===void 0&&(s=.5);var a=qa(r,1,10),n=qa(s,.1,2);return function(o){return o===0||o===1?o:-a*Math.pow(2,10*(o-1))*Math.sin((o-1-n/(Math.PI*2)*Math.asin(1/a))*(Math.PI*2)/n)}}},i=["Quad","Cubic","Quart","Quint","Expo"];return i.forEach(function(r,s){t[r]=function(){return function(a){return Math.pow(a,s+2)}}}),Object.keys(t).forEach(function(r){var s=t[r];e["easeIn"+r]=s,e["easeOut"+r]=function(a,n){return function(o){return 1-s(a,n)(1-o)}},e["easeInOut"+r]=function(a,n){return function(o){return o<.5?s(a,n)(o*2)/2:1-s(a,n)(o*-2+2)/2}}}),e}();function e7(e,t){if(_t.fnc(e))return e;var i=e.split("(")[0],r=aU[i],s=rU(e);switch(i){case"spring":return sU(e,t);case"cubicBezier":return G9(rxe,s);case"steps":return G9(ixe,s);default:return G9(r,s)}}function nU(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function l4(e,t){for(var i=e.length,r=arguments.length>=2?arguments[1]:void 0,s=[],a=0;a<i;a++)if(a in e){var n=e[a];t.call(r,n,a,e)&&s.push(n)}return s}function h4(e){return e.reduce(function(t,i){return t.concat(_t.arr(i)?h4(i):i)},[])}function HP(e){return _t.arr(e)?e:(_t.str(e)&&(e=nU(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function t7(e,t){return e.some(function(i){return i===t})}function i7(e){var t={};for(var i in e)t[i]=e[i];return t}function sb(e,t){var i=i7(e);for(var r in e)i[r]=t.hasOwnProperty(r)?t[r]:e[r];return i}function c4(e,t){var i=i7(e);for(var r in t)i[r]=_t.und(e[r])?t[r]:e[r];return i}function sxe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function axe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=e.replace(t,function(o,l,h,c){return l+l+h+h+c+c}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),s=parseInt(r[1],16),a=parseInt(r[2],16),n=parseInt(r[3],16);return"rgba("+s+","+a+","+n+",1)"}function nxe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(t[1],10)/360,r=parseInt(t[2],10)/100,s=parseInt(t[3],10)/100,a=t[4]||1;function n(d,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?d+(f-d)*6*p:p<1/2?f:p<2/3?d+(f-d)*(2/3-p)*6:d}var o,l,h;if(r==0)o=l=h=s;else{var c=s<.5?s*(1+r):s+r-s*r,u=2*s-c;o=n(u,c,i+1/3),l=n(u,c,i),h=n(u,c,i-1/3)}return"rgba("+o*255+","+l*255+","+h*255+","+a+")"}function oxe(e){if(_t.rgb(e))return sxe(e);if(_t.hex(e))return axe(e);if(_t.hsl(e))return nxe(e)}function Ho(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function lxe(e){if(ad(e,"translate")||e==="perspective")return"px";if(ad(e,"rotate")||ad(e,"skew"))return"deg"}function ab(e,t){return _t.fnc(e)?e(t.target,t.id,t.total):e}function Un(e,t){return e.getAttribute(t)}function r7(e,t,i){var r=Ho(t);if(t7([i,"deg","rad","turn"],r))return t;var s=pv.CSS[t+i];if(!_t.und(s))return s;var a=100,n=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(n),n.style.position="absolute",n.style.width=a+i;var l=a/n.offsetWidth;o.removeChild(n);var h=l*parseFloat(t);return pv.CSS[t+i]=h,h}function oU(e,t,i){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return i?r7(e,s,i):s}}function s7(e,t){if(_t.dom(e)&&!_t.inp(e)&&(Un(e,t)||_t.svg(e)&&e[t]))return"attribute";if(_t.dom(e)&&t7(txe,t))return"transform";if(_t.dom(e)&&t!=="transform"&&oU(e,t))return"css";if(e[t]!=null)return"object"}function lU(e){if(_t.dom(e)){for(var t=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map,s;s=i.exec(t);)r.set(s[1],s[2]);return r}}function hxe(e,t,i,r){var s=ad(t,"scale")?1:0+lxe(t),a=lU(e).get(t)||s;return i&&(i.transforms.list.set(t,a),i.transforms.last=t),r?r7(e,a,r):a}function a7(e,t,i,r){switch(s7(e,t)){case"transform":return hxe(e,t,r,i);case"css":return oU(e,t,i);case"attribute":return Un(e,t);default:return e[t]||0}}function n7(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var r=Ho(e)||0,s=parseFloat(t),a=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return s+a+r;case"-":return s-a+r;case"*":return s*a+r}}function hU(e,t){if(_t.col(e))return oxe(e);if(/\s/g.test(e))return e;var i=Ho(e),r=i?e.substr(0,e.length-i.length):e;return t?r+t:r}function o7(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function cxe(e){return Math.PI*2*Un(e,"r")}function uxe(e){return Un(e,"width")*2+Un(e,"height")*2}function dxe(e){return o7({x:Un(e,"x1"),y:Un(e,"y1")},{x:Un(e,"x2"),y:Un(e,"y2")})}function cU(e){for(var t=e.points,i=0,r,s=0;s<t.numberOfItems;s++){var a=t.getItem(s);s>0&&(i+=o7(r,a)),r=a}return i}function fxe(e){var t=e.points;return cU(e)+o7(t.getItem(t.numberOfItems-1),t.getItem(0))}function uU(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return cxe(e);case"rect":return uxe(e);case"line":return dxe(e);case"polyline":return cU(e);case"polygon":return fxe(e)}}function pxe(e){var t=uU(e);return e.setAttribute("stroke-dasharray",t),t}function mxe(e){for(var t=e.parentNode;_t.svg(t)&&_t.svg(t.parentNode);)t=t.parentNode;return t}function dU(e,t){var i=t||{},r=i.el||mxe(e),s=r.getBoundingClientRect(),a=Un(r,"viewBox"),n=s.width,o=s.height,l=i.viewBox||(a?a.split(" "):[0,0,n,o]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:n/l[2],h:o/l[3]}}function gxe(e,t){var i=_t.str(e)?nU(e)[0]:e,r=t||100;return function(s){return{property:s,el:i,svg:dU(i),totalLength:uU(i)*(r/100)}}}function vxe(e,t){function i(o){o===void 0&&(o=0);var l=t+o>=1?t+o:0;return e.el.getPointAtLength(l)}var r=dU(e.el,e.svg),s=i(),a=i(-1),n=i(1);switch(e.property){case"x":return(s.x-r.x)*r.w;case"y":return(s.y-r.y)*r.h;case"angle":return Math.atan2(n.y-a.y,n.x-a.x)*180/Math.PI}}function WP(e,t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=hU(_t.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:_t.str(e)||t?r.split(i):[]}}function fU(e){var t=e?h4(_t.arr(e)?e.map(HP):HP(e)):[];return l4(t,function(i,r,s){return s.indexOf(i)===r})}function pU(e){var t=fU(e);return t.map(function(i,r){return{target:i,id:r,total:t.length,transforms:{list:lU(i)}}})}function yxe(e,t){var i=i7(t);if(/^spring/.test(i.easing)&&(i.duration=sU(i.easing)),_t.arr(e)){var r=e.length,s=r===2&&!_t.obj(e[0]);s?e={value:e}:_t.fnc(t.duration)||(i.duration=t.duration/r)}var a=_t.arr(e)?e:[e];return a.map(function(n,o){var l=_t.obj(n)&&!_t.pth(n)?n:{value:n};return _t.und(l.delay)&&(l.delay=o?0:t.delay),_t.und(l.endDelay)&&(l.endDelay=o===a.length-1?t.endDelay:0),l}).map(function(n){return c4(n,i)})}function xxe(e){for(var t=l4(h4(e.map(function(a){return Object.keys(a)})),function(a){return _t.key(a)}).reduce(function(a,n){return a.indexOf(n)<0&&a.push(n),a},[]),i={},r=function(a){var n=t[a];i[n]=e.map(function(o){var l={};for(var h in o)_t.key(h)?h==n&&(l.value=o[h]):l[h]=o[h];return l})},s=0;s<t.length;s++)r(s);return i}function bxe(e,t){var i=[],r=t.keyframes;r&&(t=c4(xxe(r),t));for(var s in t)_t.key(s)&&i.push({name:s,tweens:yxe(t[s],e)});return i}function wxe(e,t){var i={};for(var r in e){var s=ab(e[r],t);_t.arr(s)&&(s=s.map(function(a){return ab(a,t)}),s.length===1&&(s=s[0])),i[r]=s}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function _xe(e,t){var i;return e.tweens.map(function(r){var s=wxe(r,t),a=s.value,n=_t.arr(a)?a[1]:a,o=Ho(n),l=a7(t.target,e.name,o,t),h=i?i.to.original:l,c=_t.arr(a)?a[0]:h,u=Ho(c)||Ho(l),d=o||u;return _t.und(n)&&(n=h),s.from=WP(c,d),s.to=WP(n7(n,c),d),s.start=i?i.end:0,s.end=s.start+s.delay+s.duration+s.endDelay,s.easing=e7(s.easing,s.duration),s.isPath=_t.pth(a),s.isColor=_t.col(s.from.original),s.isColor&&(s.round=1),i=s,s})}var mU={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,r,s){if(r.list.set(t,i),t===r.last||s){var a="";r.list.forEach(function(n,o){a+=o+"("+n+") "}),e.style.transform=a}}};function gU(e,t){var i=pU(e);i.forEach(function(r){for(var s in t){var a=ab(t[s],r),n=r.target,o=Ho(a),l=a7(n,s,o,r),h=o||Ho(l),c=n7(hU(a,h),l),u=s7(n,s);mU[u](n,s,c,r.transforms,!0)}})}function Sxe(e,t){var i=s7(e.target,t.name);if(i){var r=_xe(t,e),s=r[r.length-1];return{type:i,property:t.name,animatable:e,tweens:r,duration:s.end,delay:r[0].delay,endDelay:s.endDelay}}}function Axe(e,t){return l4(h4(e.map(function(i){return t.map(function(r){return Sxe(i,r)})})),function(i){return!_t.und(i)})}function vU(e,t){var i=e.length,r=function(a){return a.timelineOffset?a.timelineOffset:0},s={};return s.duration=i?Math.max.apply(Math,e.map(function(a){let n=a.startOnceDelay??0,o=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return r(a)+n+o+l+a.duration*(a.loop??1)})):t.duration,s.delay=i?Math.min.apply(Math,e.map(function(a){let n=a.startOnceDelay??0,o=a.pingPongDelayCorrection??0;return r(a)+n+o+a.delay})):t.delay,s.endDelay=i?s.duration-Math.max.apply(Math,e.map(function(a){let n=a.startOnceDelay??0,o=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return r(a)+n+o+a.duration*(a.loop??1)-a.endDelay-l})):t.endDelay,s}var qP=0;function Mxe(e){var t=sb(iU,e),i=sb($_,e),r=bxe(i,e),s=pU(e.targets),a=Axe(s,r),n=vU(a,i),o=qP;return qP++,c4(t,{id:o,children:[],animatables:s,animations:a,duration:n.duration,delay:n.delay,endDelay:n.endDelay,startOnceDelay:i.startOnceDelay,pingPongDelayCorrection:i.pingPongDelayCorrection,pingPongEndDelayCorrection:i.pingPongEndDelayCorrection})}var _a=[],XP=[],W2,YP=function(){let e=0,t=!0;function i(a){let n=_a.length;if(n){let o=0;for(;o<n;){let l=_a[o];l.paused?(_a.splice(o,1),n--):(l.tick(a),o++)}W2=requestAnimationFrame(i)}else W2&&(cancelAnimationFrame(W2),W2=null)}function r(){e=performance.now(),W2=requestAnimationFrame(i)}function s(a){e+=a,i(e)}return{isUsingInternalRaf:t,play:r,update:s}}();function Cxe(e){document.hidden?(_a.forEach(function(t){return t.pause(e.timeStamp)}),XP=_a.slice(0),vr.running=_a=[]):XP.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",Cxe);function vr(e){e===void 0&&(e={});var t=0,i=0,r=0,s,a,n=0,o=null;function l(b){var M=window.Promise&&new Promise(function(S){return o=S});return b.finished=M,M}var h=Mxe(e);l(h);function c(){var b=h.direction;b!=="alternate"&&(h.direction=b!=="normal"?"normal":"reverse"),h.reversed=!h.reversed,a.forEach(function(M){(M.loop===1||M.loop%2===0)&&(M.reversed=h.reversed)})}function u(){h.direction="normal",h.reversed=!1,a.forEach(function(b){return b.reversed=!1})}function d(b){return h.reversed?h.duration-b:b}function f(){t=0,i=d(h.currentTime)*(1/vr.speed)}function p(b,M,S=!1){M&&(h.reversed?M.seek(M.duration*M.loop-(b-M.timelineOffset-M.pingPongDelayCorrection),S):M.seek(b-M.timelineOffset-M.startOnceDelay-M.pingPongDelayCorrection,S))}function m(b,M=!1){if(h.reversed)for(var S=n;S--;)p(b,a[S],M);else for(var A=0;A<n;A++)p(b,a[A],M)}function g(b){var M=0,S=h.animations,A=S.length;for(h.direction!=="alternate"&&h.parent?.direction==="alternate"?h.parent?.rewind===!1&&h.reversePlayback===!0&&h.rewind===!1&&(h.parent?.reversed&&h.direction==="alternate"?b=h.duration-h.delay+h.endDelay-b:b=h.duration+h.delay-h.endDelay-b):w(!1,h.parent?.rewind,h.rewind,h.parent?.reversePlayback,h.reversePlayback)&&(h.parent?.reversed&&h.direction==="alternate"?b=h.duration-h.delay+h.endDelay-b:b=h.duration+h.delay-h.endDelay-b);M<A;){var C=S[M],T=C.animatable,D=C.tweens,R=D.length-1,O=D[R];R&&(O=l4(D,function(J){return b<J.end})[0]||O);let K;h.parent?.reversed&&h.direction==="alternate"?K=qa(b-O.start-O.endDelay,0,O.duration)/O.duration:K=qa(b-O.start-O.delay,0,O.duration)/O.duration;for(var j=isNaN(K)?1:O.easing(K),X=O.to.strings,N=O.round,k=[],ne=O.to.numbers.length,te=void 0,Q=0;Q<ne;Q++){var Z=void 0;let J,se;h.direction!=="alternate"?h.parent?.rewind===!1&&h.reversePlayback===!0&&h.rewind===!1?(J=O.to.numbers[Q],se=O.from.numbers[Q]||0):(se=O.to.numbers[Q],J=O.from.numbers[Q]||0):w(!0,h.parent?.rewind,h.rewind,h.parent?.reversePlayback,h.reversePlayback)?(J=O.to.numbers[Q],se=O.from.numbers[Q]||0):(se=O.to.numbers[Q],J=O.from.numbers[Q]||0),O.isPath?Z=vxe(O.value,j*se):Z=J+j*(se-J),N&&(O.isColor&&Q>2||(Z=Math.round(Z*N)/N)),k.push(Z)}var de=X.length;if(!de)te=k[0];else{te=X[0];for(var ee=0;ee<de;ee++){X[ee];var le=X[ee+1],$=k[ee];isNaN($)||(le?te+=$+le:te+=$+" ")}}mU[C.type](T.target,C.property,te,T.transforms),C.currentValue=te,M++}}function v(b){h[b]&&!h.passThrough&&h[b](h)}function y(){h.remaining&&h.remaining!==!0&&h.remaining--}let x={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function w(b,M,S,A,C){return x[b<<4|M<<3|S<<2|A<<1|C]}function _(b,M=!1){var S=h.duration;let A=h.delay,C=S-h.endDelay;h.parent?.reversed&&h.direction==="alternate"&&(A=h.endDelay,C=S-h.delay);var T=d(b);if(h.progress=qa(T/S*100,0,100),M||(h.reversePlayback=T<h.currentTime),n&&m(T,M),!h.began&&h.currentTime>=0&&(h.began=!0,v("begin")),!h.loopBegan&&h.currentTime>0&&(h.loopBegan=!0,v("loopBegin")),(h.reversed||T>=0)&&T<=A&&h.currentTime!==0&&(g(0),v("change")),(T>=C&&h.currentTime!==S+h.pingPongDelayCorrection||!S)&&(g(S),v("change")),T>A&&T<C?(h.changeBegan||(h.changeBegan=!0,h.changeCompleted=!1,v("changeBegin")),g(T),v("change")):h.changeBegan?(h.changeCompleted=!0,h.changeBegan=!1,v("change"),n&&v("timelineChangeComplete")):h.began&&T>C&&v("changeComplete"),h.currentTime=qa(T,0,S+h.pingPongDelayCorrection),h.began&&v("update"),b>=S)if(y(),!h.remaining)h.paused=!0,h.completed||(h.completed=!0,v("loopComplete"),v("complete"),!h.passThrough&&"Promise"in window&&(o(),l(h)));else{n?t+=h.duration/vr.speed:t+=h.duration;for(let D of a)D.setStartTime(0),D.remaining=D.loop;v("loopComplete"),h.loopBegan=!1,h.direction==="alternate"?c():n&&u()}}return h.reset=function(){var b=h.direction;h.passThrough=!1,h.currentTime=0,h.progress=0,h.paused=!0,h.began=!1,h.loopBegan=!1,h.changeBegan=!1,h.completed=!1,h.changeCompleted=!1,h.reversePlayback=!1,h.reversed=b==="reverse",h.remaining=h.loop,a=h.children,n=a.length;for(var M=n;M--;)h.children[M].reset();g(h.reversed?h.duration:0)},h.setStartTime=function(b){t=b},h.set=function(b,M){return gU(b,M),h},h.tick=function(b){r=b,t||(t=r),_((r+(i-t))*vr.speed)},h.seek=function(b,M=!1){_(b-t,M)},h.pause=function(b){h.paused=!0,n&&(s=b??performance.now())},h.play=function(b){!h.paused||(h.completed&&h.reset(),h.paused=!1,_a.push(h),n&&s!==void 0&&(t+=(b??performance.now())-s),!W2&&YP.isUsingInternalRaf&&YP.play())},h.reverse=function(){c(),h.completed=!h.reversed,f()},h.restart=function(){h.reset(),h.play()},h.reset(),h.autoplay&&h.play(),h}function KP(e,t){for(var i=t.length;i--;)t7(e,t[i].animatable.target)&&t.splice(i,1)}function Exe(e){for(var t=fU(e),i=_a.length;i--;){var r=_a[i],s=r.animations,a=r.children;KP(t,s);for(var n=a.length;n--;){var o=a[n],l=o.animations;KP(t,l),!l.length&&!o.children.length&&a.splice(n,1)}!s.length&&!a.length&&r.pause()}}function Txe(e,t){t===void 0&&(t={});var i=t.direction||"normal",r=t.easing?e7(t.easing):null,s=t.grid,a=t.axis,n=t.from||0,o=n==="first",l=n==="center",h=n==="last",c=_t.arr(e),u=parseFloat(c?e[0]:e),d=c?parseFloat(e[1]):0,f=Ho(c?e[1]:e)||0,p=t.start||0+(c?u:0),m=[],g=0;return function(v,y,x){if(o&&(n=0),l&&(n=(x-1)/2),h&&(n=x-1),!m.length){for(var w=0;w<x;w++){if(!s)m.push(Math.abs(n-w));else{var _=l?(s[0]-1)/2:n%s[0],b=l?(s[1]-1)/2:Math.floor(n/s[0]),M=w%s[0],S=Math.floor(w/s[0]),A=_-M,C=b-S,T=Math.sqrt(A*A+C*C);a==="x"&&(T=-A),a==="y"&&(T=-C),m.push(T)}g=Math.max.apply(Math,m)}r&&(m=m.map(function(R){return r(R/g)*g})),i==="reverse"&&(m=m.map(function(R){return a?R<0?R*-1:-R:Math.abs(g-R)}))}var D=c?(d-u)/g:u;return p+D*(Math.round(m[y]*100)/100)+f}}function Pxe(e){e===void 0&&(e={});var t=vr(e);return t.duration=0,t.add=function(i,r){var s=_a.indexOf(t),a=t.children;s>-1&&_a.splice(s,1);function n(d){d.passThrough=!0}for(var o=0;o<a.length;o++)n(a[o]);var l=c4(i,sb($_,e));l.targets=l.targets||e.targets;var h=t.duration;l.autoplay=!1,l.timelineOffset=_t.und(r)?h:n7(r,h),n(t);var c=vr(l);n(c),a.push(c),c.parent=t;var u=vU(a,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,c.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}vr.version="3.2.0";vr.speed=1;vr.running=_a;vr.remove=Exe;vr.get=a7;vr.set=gU;vr.convertPx=r7;vr.path=gxe;vr.setDashoffset=pxe;vr.stagger=Txe;vr.timeline=Pxe;vr.easing=e7;vr.penner=aU;vr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var nd=vr,QP=new E,ZP=new E,JP=new wt;function Dxe(e,t,i,r){if(r===0)return i.copy(e);if(r===1)return i.copy(t);let s=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(s>=1)return i.copy(e);let a=1-s*s;if(a<=Number.EPSILON){let c=1-r;return i.w=c*e.w+r*t.w,i.x=c*e.x+r*t.x,i.y=c*e.y+r*t.y,i.z=c*e.z+r*t.z,i.normalize(),i}let n=Math.sqrt(a),o=Math.atan2(n,s),l=Math.sin((1-r)*o)/n,h=Math.sin(r*o)/n;return i.w=e.w*l+t.w*h,i.x=e.x*l+t.x*h,i.y=e.y*l+t.y*h,i.z=e.z*l+t.z*h,i}function m1(e,t,i,r,s,a){let n=i[e]!==void 0?i[e]:void 0,o=r[e];if(o==null)return;let l=n!=null?typeof n=="string"?Number(s.getVariable(n)??0):n:t[e],h=typeof o=="string"?Number(s.getVariable(o)??0):o;if(l!==h)return{update:c=>{let u=Ke.lerp(l,h,c);a?t[e]=Math.trunc(u):t[e]=u},start:()=>{t[e]=l},end:()=>{t[e]=h}}}function l7(e,t,i,r,s,a){let n=i[e]?i[e]:void 0,o=r[e];if(!o)return;let l=t[e],h=[...n??l].map(u=>typeof u=="string"?Number(s.getVariable(u)??0):u),c=[...o].map(u=>typeof u=="string"?Number(s.getVariable(u)??0):u);if(!(h.length!==c.length||l_(h,c)))return{update:u=>{h.forEach((d,f)=>{let p=Ke.lerp(d,c[f],u);t[e][f]=a?Math.trunc(p):p})},start:()=>{Object.assign(t[e],h)},end:()=>{Object.assign(t[e],c)}}}function mv(e,t,i){return t.forEach((r,s)=>{e.setComponent(s,typeof r=="string"?Number(i.getVariable(r)??0):r)}),e}function $P(e,t,i,r,s){let a=i[e]?i[e]:void 0,n=r[e];if(!n)return;let o=t[e],l=a?mv(new E,a,s):o.clone(),h=mv(new E,n,s);if(!l.equals(h))return{update:c=>{o.lerpVectors(l,h,c)},start:()=>{o.copy(l)},end:()=>{o.copy(h)}}}function eD(e,t,i){return t.forEach((r,s)=>{e.setComponent(s,typeof r=="string"?Number(i.getVariable(r)??0):r)}),e}function gv(e,t,i,r,s){let a=i[e]?i[e]:void 0,n=r[e];if(!n)return;let o=t[e],l=!(o instanceof re),h=o instanceof re?o:new re().fromArray(o),c=a?eD(new re,a,s):h.clone(),u=eD(new re,n,s);if(!c.equals(u))return{update:d=>{h.lerpVectors(c,u,d),l&&(t[e]=h.toArray())},start:()=>{h.copy(c),l&&(t[e]=h.toArray())},end:()=>{h.copy(u),l&&(t[e]=h.toArray())}}}function Ixe(e,t,i,r){let s=i[e]?i[e]:void 0,a=r[e];if(!a)return;let n=t[e],o=s?new Fe().fromArray(s):n.clone(),l=new E,h=new wt,c=new E;o.decompose(l,h,c);let u=new Fe().fromArray(a),d=new E,f=new wt,p=new E;if(u.decompose(d,f,p),!o.equals(u))return{update:m=>{JP.slerpQuaternions(h,f,m),QP.lerpVectors(l,d,m),ZP.lerpVectors(c,p,m),n.compose(QP,JP,ZP)},start:()=>{n.compose(l,h,c)},end:()=>{n.compose(d,f,p)}}}function Oxe(e,t,i,r,s){let a=i[e]?i[e]:void 0,n=r[e];if(!n)return;let o=t[e],l=a?typeof a=="string"?s.getColor(a).clone():new pt().setRGB(a.r,a.g,a.b):o.clone(),h=typeof n=="string"?s.getColor(n).clone():new pt().setRGB(n.r,n.g,n.b);if(l.equals(h))return;let c=o.clone();return{update:u=>{c.lerpColors(l,h,u),t[e]?.copy?.(c)},start:()=>{c.copy(l)},end:()=>{c.copy(h)}}}function lm(e,t,i,r,s){let a=i[e]?i[e]:void 0,n=r[e];if(!n)return;let o=t[e],l=new A1(o.r,o.g,o.b,o.a),h=a?typeof a=="string"?s.getColor(a).clone():new A1(a.r,a.g,a.b,a.a):l.clone(),c=typeof n=="string"?s.getColor(n).clone():new A1(n.r,n.g,n.b,n.a);if(!h.equals(c))return{update:u=>{l.lerpColors(h,c,u);let d=Ke.lerp(h.a,c.a,u);l.a=d,t[e]={r:l.r,g:l.g,b:l.b,a:l.a}},start:()=>{l.copy(h)},end:()=>{l.copy(c)}}}function Th(e,t,i,r,s){if(typeof t[e]=="number")return m1(e,t,i??{},r,s);if(Array.isArray(t[e]))return l7(e,t,i??{},r,s)}function Rxe(e,t,i,r){let s=[],a=e.cameraType==="OrthographicCamera"?t.orthographic?.zoom:t.perspective?.zoom,n=e.cameraType==="OrthographicCamera"?i.orthographic?.zoom:i.perspective?.zoom;if(n!==void 0){let o=a??e.zoom,l=n;o!==l&&s.push({update:h=>{e.zoom=Ke.lerp(o,l,h),e.updateProjectionMatrix()},start:()=>{e.zoom=o,e.updateProjectionMatrix()},end:()=>{e.zoom=l,e.updateProjectionMatrix()}})}if(i.targetOffset!==void 0){let o=m1("targetOffset",e,t,i,r);o&&s.push(o)}return s}function Lxe(e,t,i,r){if(i.scaleBaked===void 0)return;let s=(t.scaleBaked??e.data.geometry.scaleBaked).map(o=>typeof o=="string"?Number(r.getVariable(o)??0):o),a=i.scaleBaked.map(o=>typeof o=="string"?Number(r.getVariable(o)??0):o);if(Tc.isEqual(s,a))return;let n=[];return n.push({update:o=>{e.updateGeometryInteractions({scaleBaked:[Ke.lerp(s[0],a[0],o),Ke.lerp(s[1],a[1],o),Ke.lerp(s[2],a[2],o)]},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},start:()=>{e.updateGeometryInteractions({scaleBaked:s},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},end:()=>{e.updateGeometryInteractions({scaleBaked:a},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()}}),n}function zxe(e,t,i,r){if(!i.extrusion)return;let s=e.extrusion,a=t.extrusion??{},n=i.extrusion,o=[];return Kk.forEach(l=>{let h=Th(l,s,a,n,r);h&&o.push(h)}),o}function Bxe(e,t,i,r){let s=[];if(!("geometry"in i))return s;let a=e.geometry.userData.parameters,n="geometry"in t?t.geometry:{},o=i.geometry;if(e instanceof Zd){let l=Lxe(e,n,o,r);l&&s.push(...l)}else{let l={};if(Object.assign(l,Wn(a,Ky),Wn(n,Ky)),Ky.forEach(h=>{let c=Th(h,l,n,o,r);c&&s.push(c)}),e instanceof q_){Object.assign(l,{extrusion:{...a.extrusion}});let h=zxe(l,n,o,r);h&&s.push(...h)}s.length&&s.push({update:h=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},start:h=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},end:h=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()}})}return s}function kxe(e,t,i,r){let s=[];if(i.intensity!==void 0){let a=m1("intensity",e,t,i,r);a&&s.push(a)}if(i.color!==void 0){let a=Oxe("color",e,t,i,r);a&&s.push(a)}return s}function Fxe(e,t,i,r){let s=[];if(Array.isArray(e.material)){if(!("materials"in i&&i.materials))return s;let a="materials"in t&&t.materials?t.materials:[],n=i.materials;e.material.forEach((o,l)=>{if(!n[l])return;let h=a[l]??{},c=n[l];typeof h=="string"||typeof c=="string"||s.push(...tD(o,h,c,r))})}else{if(!("material"in i&&i.material))return s;let a="material"in t&&t.material?t.material:{},n=i.material;if(typeof a=="string"||typeof n=="string")return s;s.push(...tD(e.material,a,n,r))}return s}function tD(e,t,i,r){let s=[],a=iu(i,r)||!!t.layers&&iu(t,r);s.push(Xxe(e,a));for(let n of e.layers){let o=t.layers?.data(n.uuid),l=i.layers.data(n.uuid);if(!l||n.type!=="light"&&(!(n.visible??!0)||!(l.visible??!0)))continue;let h=n.getNames().filter(c=>!qk.some(u=>c.includes(u)));for(let c of h)try{let u=n.getValue(c),d;if(c==="colors")d=Wxe(n,o,l,c);else if(Array.isArray(u))c==="steps"&&(d=Hxe(n,o,l,c));else if(typeof u=="number")d=Nxe(n,o,l,c,r);else{if(typeof u=="boolean")continue;u instanceof re?d=Uxe(n,o,l,c):u instanceof E?d=Vxe(n,o,l,c,r):u instanceof A1?d=Gxe(n,o,l,c,r):u instanceof pt?d=jxe(n,o,l,c,r):"isTexture"in u&&(d=qxe(n,o,l,c))}d&&(Array.isArray(d)?s.push(...d):s.push(d))}catch(u){console.error(`lerpMaterial: unexpected material layer for ${c}`,u)}}return s}function Nxe(e,t,i,r,s){if(!e.hasValue(r)||!(r in i))return;let a=t?t[r]:e.getValue(r),n=i[r],o=typeof a=="string"?Number(s.getVariable(a)??0):a,l=typeof n=="string"?Number(s.getVariable(n)??0):n;if(o!==l)return{update:h=>{e.setValue(r,Ke.lerp(o,l,h))},start:()=>{e.setValue(r,o)},end:()=>{e.setValue(r,l)}}}function Uxe(e,t,i,r){if(!e.hasValue(r)||!(r in i))return;let s=e.getValue(r),a=t?new re().fromArray(t[r]):s.clone(),n=new re().fromArray(i[r]);if(!a.equals(n))return{update:o=>{s.lerpVectors(a,n,o)},start:()=>{s.copy(a)},end:()=>{s.copy(n)}}}function Vxe(e,t,i,r,s){if(!e.hasValue(r)||!(r in i))return;let a=e.getValue(r),n=t?t[r]:void 0,o=i[r],l=n?mv(new E,n,s):a.clone(),h=mv(new E,o,s);if(!l.equals(h))return{update:c=>{a.lerpVectors(l,h,c)},start:()=>{a.copy(l)},end:()=>{a.copy(h)}}}function jxe(e,t,i,r,s){if(!e.hasValue(r)||!(r in i))return;let a=t?t[r]:void 0,n=i[r],o=e.getValue(r),l=a?typeof a=="string"?s.getColor(a).clone():new pt().setRGB(a.r,a.g,a.b):o.clone(),h=typeof n=="string"?s.getColor(n).clone():new pt().setRGB(n.r,n.g,n.b);if(l.equals(h))return;let c=o.clone();return{update:u=>{e.getValue(r)!==c&&e.setValue(r,c),c.lerpColors(l,h,u)},start:()=>{c.copy(l)},end:()=>{c.copy(h)}}}function Gxe(e,t,i,r,s){if(!e.hasValue(r)||!(r in i))return;let a=t?t[r]:void 0,n=i[r],o=e.getValue(r),l=a?typeof a=="string"?s.getColor(a).clone():new pt().setRGB(a.r,a.g,a.b):o.clone(),h=typeof n=="string"?s.getColor(n).clone():new A1(n.r,n.g,n.b,n.a);if(l.equals(h))return;let c=o.clone();return{update:u=>{e.getValue(r)!==c&&e.setValue(r,c),c.lerpColors(l,h,u)},start:()=>{c.copy(l)},end:()=>{c.copy(h)}}}function Hxe(e,t,i,r="steps"){if(!e.hasValue(r)||!(r in i))return;let s=[],a=e.getValue(r),n=t?t[r]:a,o=i[r];return l_(n,o)||s.push({update:l=>{let h=[...a];for(let c=0;c<a.length;++c){let u=n[c],d=o[c];h[c]=Ke.lerp(u,d,l)}e.setValue(r,h)},start:()=>{e.setValue(r,n)},end:()=>{e.setValue(r,o)}}),s.length?s:void 0}function Wxe(e,t,i,r="colors"){if(!e.hasValue(r)||!(r in i))return;let s=[],a=e.getValue(r),n=t?t[r]:a.map(l=>l.toArray()),o=i[r];for(let l=0;l<a.length;++l){let h=[...n[l]],c=[...o[l]];Vg.isEqual(h,c)||s.push({update:u=>{a[l].fromArray(Vg.lerp(h,c,u))},start:()=>{a[l].fromArray(h)},end:()=>{a[l].fromArray(c)}})}return s.length?s:void 0}function qxe(e,t,i,r="texture"){if(!e.hasValue(r)||!(r in i))return;let s=e.getNode("rotation"),a=t?.[r]?.rotation??0,n=i[r]?.rotation??0;if(s&&a!==n)return{update:g=>{s.value=Ke.lerp(a,n,g)*Ke.DEG2RAD},start:()=>{s.value=a*Ke.DEG2RAD},end:()=>{s.value=n*Ke.DEG2RAD}};let o=e.getNode("mat");if(!o)return;let l=t?t[r]:o,h=i[r],c=[...l.repeat],u=[...l.offset],d=[...h.repeat],f=[...h.offset],p=l.rotation??0,m=h.rotation??0;if(!Uo.isEqual(c,d)||!Uo.isEqual(u,f)||p!==m)return{update:g=>{o.repeat=Uo.lerp(c,d,g),o.offset=Uo.lerp(u,f,g),o.rotation=Ke.lerp(p,m,g),o.updateMatrix()},start:()=>{o.repeat=[...c],o.offset=[...u],o.rotation=p,o.updateMatrix()},end:()=>{o.repeat=[...d],o.offset=[...f],o.rotation=m,o.updateMatrix()}}}function Xxe(e,t){return{update:()=>{e.transparent=t}}}var H9=new E,iD=new Vr;function Yxe(e,t,i,r,s){let a=[],n,o,l,h,c,u,d,f;if(e instanceof n1?(n=gv("position",e,t,i,s),n&&a.push(n),l=m1("rotation",e,t,i,s),l&&a.push(l),h=gv("shear",e,t,i,s),h&&a.push(h)):(f={slide:t.pathSnapping?.slide??e.updatedPathSnapping?.slide??e.dataPatched.pathSnapping?.slide??0,offset:t.pathSnapping?.offset??e.updatedPathSnapping?.offset??e.dataPatched.pathSnapping?.offset??0},u=m1("slide",f,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,i.pathSnapping??e.dataPatched.pathSnapping,s),u&&a.push(u),d=m1("offset",f,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,i.pathSnapping??e.dataPatched.pathSnapping,s),d&&a.push(d),!u&&!d&&(n=$P("position",e,t,i,s),n&&a.push(n),o=$P("scale",e,t,i,s),o&&a.push(o),l=Kxe(e,t,i,r,s),l&&a.push(l),c=Ixe("hiddenMatrix",e,t,i),c&&a.push(c))),n||o||l||c||u||d){let p=e instanceof n1?()=>{e.updateWorldMatrix(!0,!1,!0),e.resetBBoxNeedsUpdate()}:()=>{e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),e.parent?.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),ja(e)&&jo(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,f))};a.push({update:p,start:p,end:p})}return a}function Kxe(e,t,i,r,s){let a=t?.rotation?t.rotation.map(c=>(typeof c=="string"?Number(s.getVariable(c)??0):c)*Ke.DEG2RAD):void 0,n=i.rotation?.map(c=>(typeof c=="string"?Number(s.getVariable(c)??0):c)*Ke.DEG2RAD);if(!n)return;let o=a?new E().fromArray(a):new E().setFromEuler(e.rotation),l=new E().fromArray(n);if(o.equals(l))return;let h=H9.subVectors(l,o);if(r&&h.toArray().every(c=>Math.abs(c)<2*Math.PI)){let c=new wt().setFromEuler(iD.setFromVector3(o)),u=new wt().setFromEuler(iD.setFromVector3(l));return{update:d=>{Dxe(c,u,e.quaternion,d)},start:()=>{e.rotation.setFromVector3(o)},end:()=>{e.rotation.setFromVector3(l)}}}else return{update:c=>{H9.lerpVectors(o,l,c),e.rotation.setFromVector3(H9)},start:()=>{e.rotation.setFromVector3(o)},end:()=>{e.rotation.setFromVector3(l)}}}function Qxe(e,t,i,r){let s=[];if(!("cloner"in i)||!e.cloner)return s;let a=e.cloner,n="cloner"in t?t.cloner:{},o=i.cloner;Uk.forEach(f=>{let p;f==="count"?p=m1("count",a.parameters,n,o,r,!0):p=Th(f,a.parameters,n??{},o,r),p&&s.push(p)});let l=Zxe(a,n,o,r);l?.length&&s.push(...l);let h=Jxe(a,n,o,r);h?.length&&s.push(...h);let c=$xe(a,n,o,r);c?.length&&s.push(...c);let u=ebe(a,n,o,r);u?.length&&s.push(...u);let d=tbe(a,n,o,r);return d?.length&&s.push(...d),s.length&&s.push({update:()=>{a.update()}}),s}function Zxe(e,t,i,r){if(e.parameters.type!=="radial")return;let s=t.radial,a=i.radial;if(!a)return;let n=e.parameters.radial,o=[];return Vk.forEach(l=>{let h=Th(l,n,s??{},a,r);h&&o.push(h)}),o}function Jxe(e,t,i,r){if(e.parameters.type!=="linear")return;let s=t.linear,a=i.linear;if(!a)return;let n=[],o=e.parameters.linear;return jk.forEach(l=>{let h=Th(l,o,s??{},a,r);h&&n.push(h)}),n}function $xe(e,t,i,r){if(e.parameters.type!=="grid")return;let s=t.grid,a=i.grid;if(!a)return;let n=[],o=e.parameters.grid;return Gk.forEach(l=>{let h;l==="count"?h=l7(l,o,s??{},a,r,!0):h=Th(l,o,s??{},a,r),h&&n.push(h)}),n}function ebe(e,t,i,r){if(e.parameters.type!=="toObject")return;let s=t.toObject,a=i.toObject;if(!a)return;let n=[],o=e.parameters.toObject;return Hk.forEach(l=>{let h;l==="count"?h=m1(l,o,s??{},a,r,!0):h=Th(l,o,s??{},a,r),h&&n.push(h)}),n}function tbe(e,t,i,r){if(!e.parameters.randomness)return;let s=t.randomnessObject,a=i.randomnessObject;if(!a)return;let n=[],o=e.parameters.randomnessObject;return Wk.forEach(l=>{let h=Th(l,o,s??{},a,r);h&&n.push(h)}),n}function ibe(e,t){return{update:()=>{e instanceof e1&&(e.fill.enabled=t)}}}function rbe(e,t){return{update:()=>{e instanceof e1&&(e.stroke.enabled=t)}}}function sbe(e,t){return{update:()=>{e instanceof e1&&(e.dropShadow.enabled=t)}}}function abe(e,t){return{update:()=>{e instanceof e1&&(e.innerShadow.enabled=t)}}}function nbe(e,t){return{update:()=>{e instanceof e1&&(e.backgroundBlur.enabled=t)}}}function obe(e,t){return{update:()=>{e instanceof e1&&(e.layerBlur.enabled=t)}}}function lbe(e,t,i,r,s){let a=[],n,o,l,h,c,u,d,f,p,m,g,v,y,x,w;if("width"in e&&(n=m1("width",e,t,i,s),n&&a.push(n)),"height"in e&&(o=m1("height",e,t,i,s),o&&a.push(o)),e instanceof e1||e instanceof Xn){let _={...t.fill},b={...i.fill};_.enabled!==void 0&&_.enabled!==b.enabled&&(a.push(ibe(e,!0)),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}}),b.enabled||Object.assign(b,{enabled:!0,color:{...b.color,a:0}})),l=lm("color",e.fill,_,b,s),l&&a.push(l)}if(e instanceof e1){let _={...t.stroke},b={...i.stroke};(_.enabled||b.enabled)&&(a.push(rbe(e,!0)),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}}),b.enabled||Object.assign(b,{enabled:!0,color:{...b.color,a:0}})),h=lm("color",e.stroke,_,b,s),h&&a.push(h),c=m1("thickness",e.stroke,_,b,s),c&&a.push(c)}if(e instanceof e1){let _={...t.dropShadow},b={...i.dropShadow};(_.enabled||b.enabled)&&(a.push(sbe(e,!0)),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}}),b.enabled||Object.assign(b,{enabled:!0,color:{...b.color,a:0}})),u=lm("color",e.dropShadow,_,b,s),u&&a.push(u),d=m1("blurRadius",e.dropShadow,_,b,s),d&&a.push(d),p=m1("spread",e.dropShadow,_,b,s),p&&a.push(p),f=gv("offset",e.dropShadow,_,b,s),f&&a.push(f)}if(e instanceof e1){let _={...t.innerShadow},b={...i.innerShadow};(_.enabled||b.enabled)&&(a.push(abe(e,!0)),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}}),b.enabled||Object.assign(b,{enabled:!0,color:{...b.color,a:0}})),m=lm("color",e.innerShadow,_,b,s),m&&a.push(m),g=m1("blurRadius",e.innerShadow,_,b,s),g&&a.push(g),y=m1("spread",e.innerShadow,_,b,s),y&&a.push(y),v=gv("offset",e.innerShadow,_,b,s),v&&a.push(v)}if(e instanceof e1||e instanceof Xn){let _={...t.backgroundBlur},b={...i.backgroundBlur};(_.enabled||b.enabled)&&(a.push(nbe(e,!0)),_.enabled||Object.assign(_,{enabled:!0,radius:0}),b.enabled||Object.assign(b,{enabled:!0,radius:0})),x=m1("radius",e.backgroundBlur,_,b,s),x&&a.push(x)}if(e instanceof e1){let _={...t.layerBlur},b={...i.layerBlur};(_.enabled||b.enabled)&&(a.push(obe(e,!0)),_.enabled||Object.assign(_,{enabled:!0,radius:0}),b.enabled||Object.assign(b,{enabled:!0,radius:0})),w=m1("radius",e.layerBlur,_,b,s),w&&a.push(w)}if(e instanceof Xn||e instanceof Ef){let _=l7("cornerRadius",e,t,i,s);_&&a.push(_)}return a}function rD(e,t,i,r,s){let a=[];return e.data.visible&&a.push(...Yxe(e,t,i,s,r)),e instanceof n1?a.push(...lbe(e,t,i,s,r)):(e.data.visible&&a.push(...Qxe(e,t,i,r)),ja(e)?(e instanceof Ir&&e.data.visible&&a.push(...Bxe(e,t,i,r)),e.data.visible&&a.push(...Fxe(e,t,i,r))):Y4e(e)?e.data.visible&&a.push(...kxe(e,t,i,r)):X4e(e)&&a.push(...Rxe(e,t,i,r))),a.length?{update:n=>{a.forEach(o=>o.update(n))},start:n=>{a.forEach(o=>o.start?.(n))},end:n=>{a.forEach(o=>o.end?.(n))}}:void 0}var sD=new E;function h7(e,t,i=!1){let r=[],s=a=>{let n=a.data;delete a.states,a.currentState=null,a.reversibleToState=null,a.currentTransitionEvent=null;for(let o of n.states){let l={...o.data};a.states||(a.states={}),a.states[o.id]=fc.patch(n,l)}nD(e.scene,a,null,t,n.events.find(o=>o.data.type==="Follow"||o.data.type==="LookAt")!==void 0),aD(e)};e.scene.traverse2D(s),e.traverseChildren(a=>{if(i&&(a.rigidBody?.setTranslation(a.position0,!0),a.rigidBody?.setRotation(a.rotation0,!0),a.rigidBody?.setLinvel(sD,!0),a.rigidBody?.setAngvel(sD,!0)),!Zt.is(a))return;let n=a.uuid,o=a.data;if(delete a.states,a.uuid===v0)return;let l=!1;r.some(h=>e.scene.find(n)?.isDescendantOf(h))?l=!0:o.physics?.fusedBody===!0&&o.physics.rigidBody==="dynamic"&&r.push(n),a.data=o,a.currentState=null,a.reversibleToState=null,a.currentTransitionEvent=null;for(let h of o.states){let c={...h.data};e.data.globalPhysics.usePhysics===!0&&o.physics&&(o.physics.rigidBody==="dynamic"||l)&&(h.data.position!==void 0&&delete c.position,h.data.rotation!==void 0&&delete c.rotation,h.data.hiddenMatrix!==void 0&&delete c.hiddenMatrix),a.states||(a.states={}),a.states[h.id]=cc.patch(o,c)}nD(e.scene,a,null,t,o.events.find(h=>h.data.type==="Follow"||h.data.type==="LookAt")!==void 0),a instanceof F1&&a.frame&&(a.frame.traverse(h=>s(h)),a.uiCanvas?.applySize())}),aD(e),e.frame&&(e.frame.traverse(a=>s(a)),e.uiCanvas?.applySize())}function aD(e){e.traverseEntity(t=>{for(let i of t.data.events){let r=[];switch(i.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":r.push(...i.data.actions);break;case"GameControl":for(let s of Object.values(i.data.gameActions))r.push(...s);break;case"DragDrop":r.push(...i.data.dragDropActions.drag,...i.data.dragDropActions.drop);break;case"Conditional":r.push(...i.data.inActions,...i.data.outActions);break}for(let s of r)if(s.data.type==="Create"&&s.data.hideBase==="Yes"){let a=e.scene.find(s.data.object);a&&(a.visible=!1)}}})}function nD(e,t,i,r,s=!1){if(t instanceof Ir&&!(t instanceof jc)&&t.removeInteractionGeometry(r),t instanceof n1?t.changeSelectedState(i,{shared:r},s):t.changeSelectedState(i,{scene:e,shared:r},s),t instanceof Ir&&t.updateGeometryGroupsIfNeeded(),t instanceof V1&&t.updateCameraState(t.dataPatched,{scene:e,shared:r}),!(t instanceof n1)){if(t.cloner)for(let a of t.cloner.children)a.playModeVisible=void 0;t.updateVisible()}}function yU(e){let t;if(e.easing===5){let{control1:i,control2:r}=e;t=`cubicBezier(
			${i[0]}, ${i[1]}, ${r[0]}, ${r[1]}
		)`}else if(e.easing===6){let{mass:i,stiffness:r,damping:s,velocity:a}=e;t=`spring( ${i}, ${r}, ${s}, ${a} )`}else{let i;switch(e.easing){case 0:i=Rl.linear;break;case 1:i=Rl.ease;break;case 2:i=Rl.easeIn;break;case 3:i=Rl.easeOut;break;case 4:i=Rl.easeInOut;break;default:i=Rl.linear}let[r,s,a,n]=i;t=`cubicBezier( ${r}, ${s}, ${a}, ${n} )`}return{duration:Math.max(e.duration,1e-4),easing:t}}function nb(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var hbe={type:"beginState"},cbe={type:"completeState",isfromEntity:!1},ob=class{constructor(e,t,i,r,s,a){if(this.object=e,this.data=r,this.sharedAssets=s,this.allowSlerp=a,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let n=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=n,this.object.dispatchEvent({type:"beginState",state:n}),this.object instanceof n1||this.object.traverseEntity(o=>{o!==this.object&&o instanceof V1&&o.dispatchEvent(hbe)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let n=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=n,this.object.dispatchEvent({type:"completeState",state:n}),this.object instanceof n1||this.object.traverseEntity(o=>{o!==this.object&&o instanceof V1&&o.dispatchEvent(cbe)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=rD(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let n=Um(this.object,this.object.currentState===i?this.object.prevState:this.object.currentState);if(!n)throw new Error("Missing property");this.from=n}else{let n=Um(this.object,t);if(!n)throw new Error("Missing property");this.from=n}if(i===void 0)throw new Error("Missing property");{let n=Um(this.object,i);if(!n)throw new Error("Missing property");this.to=n}this.useCurrentState=t===void 0||i===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...nb(r),...yU(r),change:this.onChange},this.callback=rD(this.object,this.from?.data??{},i===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},xU=class extends C1{constructor(e,t,i,r,s){if(super(),this.eventType=e,this.data=t,this.page=i,this.shared=r,this.condition=s,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.hasPlayedOnce=!1,this.onTimelineChangeComplete=()=>{this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&(this.timeline?.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let a=this.page.scene.find(t.object)??this.page.uiCanvas?.find(t.object)??this.page.scene.find2DInUIObjects(t.object);if(!a)throw new Error("Missing property");if(!a.states)throw new Error("Missing property");if(this.object=a,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=t.tweens[0].data.delayDirection==="start-once"?t.tweens[0].data.delay:0,this.init()}get playing(){return this.timeline?.paused===!1}get changeBegan(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.initialCurrentState=Um(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.data.runMode==="Toggle"&&s8(this.eventType)?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:i=!1}={}){try{let r=nb(this.data.tweens[0].data);i&&typeof r.loop=="number"&&r.loop--,this.timeline?.pause(),this.timeline=nd.timeline({autoplay:!1,...r,...r.loop===!0||r.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let s=this.tweens.findIndex(a=>a?.changeBegan);if(t===!0&&(this.timelineNeedsRebuild=!0),e){let a=s===-1?0:s;for(let n=a;n<this.data.tweens.length-1;n++){let o=this.data.tweens[n],l=this.data.tweens[n+1],h;n===a&&(this.object.wasMovedByUser===!0||this.object.previousAction?.changeBegan===!0)?(h=void 0,this.object instanceof V1&&(this.object.wasMovedByUser=!1)):h=o.data.state===void 0?this.currentState:o.data.state;let c=new ob(this.object,h,l.data.state===void 0?this.currentState:l.data.state,l.data,this.shared,this.data.allowSlerp??!1);s!==-1&&n===a&&Object.assign(c.params,{startOnceDelay:0}),this.tweens[n]=c,this.timeline.add(c.params,this.timeline.duration+(n===a?r.delay:0))}this.timeline.duration+=r.endDelay}else{let a=s===-1?this.data.tweens.length-1:s+1;for(let n=a;n>0;n--){let o=this.data.tweens[n],l=this.data.tweens[n-1],h;n===a&&(this.object.wasMovedByUser===!0||this.object.previousAction?.changeBegan===!0)?(h=void 0,this.object instanceof V1&&(this.object.wasMovedByUser=!1)):h=o.data.state===void 0?this.currentState:o.data.state;let c=new ob(this.object,h,l.data.state===void 0?this.currentState:l.data.state,o.data,this.shared,this.data.allowSlerp??!1);s!==-1&&n===a&&Object.assign(c.params,{startOnceDelay:0}),this.tweens[n-1]=c,this.timeline.add(c.params,this.timeline.duration+(n===a?r.endDelay:0))}this.timeline.duration+=r.delay}}catch(r){r instanceof Error&&console.error(r.message)}this.object.previousAction?.playing===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(ji(this.shared,this.condition)===!1||s8(this.eventType)&&this.data.runMode==="Once"&&this.hasPlayedOnce||(this.hasPlayedOnce=!0,this.playing))return!1;clearTimeout(this.timeoutId);let e=nb(this.data.tweens[0].data).pingPongDelayCorrection;nd({targets:{},duration:this.startOnceDelay+e,easing:"linear",complete:()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}}})}pause(){this.timeline?.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof n1?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){if(ji(this.shared,this.condition)===!1)return!1;this.timeline===void 0&&this.buildTimeline(),this.timeline?.seek(e*this.timeline.duration,!0)}toggle(e){if(ji(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?(this.timeline?.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):nd({targets:{},duration:this.startOnceDelay,easing:"linear",complete:()=>{this.timeline?.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()}})}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function Um(e,t){let i,r;if(typeof t=="string"?(i=t,r=e.states?.[i]):t===null&&(i=null,r=e.data),!(i===void 0||r===void 0))return{id:i,data:r}}var ube={type:"beginState"},oD={type:"completeState",isfromEntity:!1},lD={type:"requestRender"},bU=class extends C1{constructor(e,t,i,r){super(),this.data=e,this.page=t,this.shared=i,this.condition=r,this.toggleIsForward=!1,this.posStart=new E,this.posEnd=new E,this.qStart=new wt,this.qEnd=new wt,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let i={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=nd({targets:i,t:1,...yU(this.data),update:()=>{i.t===0&&(this.data.runMode==="Toggle"&&!this.toggleIsForward?this.fromCamera&&(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(ube));let r=this.page.activeCamera;r.position.lerpVectors(this.posStart,this.posEnd,i.t),r.quaternion.slerpQuaternions(this.qStart,this.qEnd,i.t),r.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*i.t,r.wasMovedBySwitchCameraAction=!0,r.updateMatrix(),r.updateMatrixWorld(),r.updateProjectionMatrix(),r.dispatchEvent(lD),i.t===1&&r.dispatchEvent(oD)}})}switchCamera(e){let t=this.page.activeCamera,i=this.page.scene.find(e);if(!i||!i.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(i),t.dispatchEvent({type:"cameraChange",camera:i})}play(){if(ji(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{delete this.timeoutId,this.data.animate?(this.buildAnimation(),this.animation?.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){this.animation?.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){if(ji(this.shared,this.condition)===!1)return!1;if(window.clearTimeout(this.timeoutId),delete this.timeoutId,e!==this.toggleIsForward)try{this.playing?(this.animation?.pause(),this.toggleIsForward=e??!this.toggleIsForward,this.buildAnimation(!0),this.animation?.play()):this.timeoutId=window.setTimeout(()=>{this.toggleIsForward=e??!this.toggleIsForward,this.data.animate?(this.animation?.pause(),this.buildAnimation(),this.animation?.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.fromCamera&&this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(oD),this.page.activeCamera.dispatchEvent(lD))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}};function wU(e){let t=e?.tracks.filter(i=>i.ValueTypeName==="vector"||i.ValueTypeName==="quaternion").map(i=>i.times.length);if(t?.length){let i=L3e(t);return i&&i>2?i:2}return 2}var _U=class extends C1{constructor(e,t,i,r,s){super(),this.data=e,this.page=t,this.animationControls=i,this.shared=r,this.condition=s,this.startOnceDelay=0,this.toggleIsForward=!1;let a=e.object,n=t.scene.find(e.object);n&&Array.isArray(n.identity)&&(a=n.identity[0]),this.data={...e,object:a};let o=this.animationControls.clipIdToAction[e.clipId+"/"+a];if(this.duration=o?.getClip()?.duration??1,this.data.crop2){let l=wU(o?.getClip());this.leftFrameTime=this.data.crop2[0]/(l-1)*this.duration,this.rightFrameTime=this.data.crop2[1]/(l-1)*this.duration}else{let l=o?.getClip()?.tracks[0]?.times.length;l&&l>1?(this.leftFrameTime=this.data.crop[0]/l*this.duration,this.rightFrameTime=this.data.crop[1]/l*this.duration):(this.leftFrameTime=0,this.rightFrameTime=this.duration)}this.startOnceDelay=e.delay}get playing(){return this.threeAnimAction?.isRunning()??!1}play(e=!1){if(ji(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([i,r])=>{let s=i.split("/")[1];this.threeAnimAction!==r&&s===t&&r.isRunning()&&(e?r.fadeOut(.2):r.stop())}),e&&this.threeAnimAction?.fadeIn(.2)},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){this.threeAnimAction?.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=Ke.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(ji(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let i=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([r,s])=>{let a=r.split("/")[1];this.threeAnimAction!==s&&a===i&&s.isRunning()&&(t?s.fadeOut(.2):s.stop())}),t&&this.threeAnimAction?.fadeIn(.2)}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){let e=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object]?.getClip();e&&(e.duration=this.duration),this.pause()}},SU=class{constructor(e,t,i,r,s){this.data=e,this.page=t,this.eventManager=i,this.shared=r,this.condition=s,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(ji(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target||t.data.uiScene))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(t=>{t.type==="ParticleSystem"&&(t.sleep(),t.wakeUp(),t.data.autoPlay?t.start():t.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),h7(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},AU=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=ji(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),t=CF(this.data.expression,this.shared,w1.typeOfVariable(e));t!==void 0&&this.shared.updateVariable(this.data.variableId,typeof t=="string"?{textValue:t}:t)}dispose(){}},MU=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.timeoutId=null}dispatchInner(){if(ji(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,t===void 0?!1:!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&t==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},dbe=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r}dispatch(){if(ji(this.shared,this.condition)===!1)return!1;(this.data.target==="single"?this.data.variableId?[this.data.variableId]:[]:Object.keys(this.shared.getVariables())).forEach(e=>{this.shared.getVariable(e);let t=this.shared.data.variables.data(e)?.value;t!==void 0&&this.shared.updateVariable(e,t),this.shared.enableLocalStorageForPersistentVariables&&localStorage.removeItem(Fx(e))})}dispose(){}},fbe=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r}dispatch(){if(ji(this.shared,this.condition)===!1)return!1;this.data.userAPIId&&this.shared.getUserAPI(this.data.userAPIId)?.callUserAPI(this.shared)}dispose(){}};function ji(e,t){if(t===void 0)return!0;if(t.expression.length===0)return!1;let i=CF(t.expression,e,"boolean");return t.negate?!i:!!i}function Lr(e,t,i,r,s,a){let n={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[],ClearLocalStorage:[],UserAPI:[]},o=l=>({id:h,data:c})=>{try{c.type==="Audio"?I1[e.type].includes("Audio")&&n.Audio.push(new JN(h,c,a,r,l)):c.type==="Video"&&!(a instanceof n1)?I1[e.type].includes("Video")&&n.Video.push(new EU(h,c,a,r,l)):c.type==="Particles"?I1[e.type].includes("Particles")&&n.Particles.push(new $N(c,i,r,l)):c.type==="Link"?I1[e.type].includes("Link")&&n.Link.push(new exe(c,s.controlsManager,r,l)):c.type==="Create"?I1[e.type].includes("Create")&&n.Create.push(new TU(c,i,s.controlsManager,r,l)):c.type==="Destroy"?I1[e.type].includes("Destroy")&&n.Destroy.push(new eU(c,i,s.controlsManager,r,l)):c.type==="Reset"?I1[e.type].includes("Reset")&&n.Reset.push(new tU(c,i,r,s,l)):c.type==="Transition"?I1[e.type].includes("Transition")&&n.Transition.push(new xU(e.type,c,i,r,l)):c.type==="SwitchCamera"?I1[e.type].includes("SwitchCamera")&&n.SwitchCamera.push(new bU(c,i,r,l)):c.type==="SceneTransition"?I1[e.type].includes("SceneTransition")&&n.SceneTransition.push(new SU(c,i,s,r,l)):c.type==="Animation"?I1[e.type].includes("Animation")&&n.Animation.push(new _U(c,i,s.animationControls,r,l)):c.type==="SetVariable"?I1[e.type].includes("SetVariable")&&n.SetVariable.push(new AU(c,i,r,l)):c.type==="DynamicVariablePlay"?I1[e.type].includes("DynamicVariablePlay")&&n.DynamicVariablePlay.push(new MU(c,i,r,l)):c.type==="Conditional"?I1[e.type].includes("Conditional")&&(c.ifActions.forEach(o({expression:c.condition,negate:!1})),c.elseActions.forEach(o({expression:c.condition,negate:!0}))):c.type==="ClearLocalStorage"?I1[e.type].includes("ClearLocalStorage")&&n.ClearLocalStorage.push(new dbe(c,i,r,l)):c.type==="UserAPI"&&I1[e.type].includes("UserAPI")&&n.UserAPI.push(new fbe(c,i,r,l))}catch{}};return t.forEach(o()),n}function s1(e){Object.values(e).forEach(t=>{t.forEach(i=>{(i instanceof JN||i instanceof EU||i instanceof $N||i instanceof _U||i instanceof xU||i instanceof TU||i instanceof eU||i instanceof bU||i instanceof SU||i instanceof tU||i instanceof AU||i instanceof MU)&&i.dispose()})})}function pbe(e,t){let i;if("material"in e){let r=e.material;Array.isArray(r)?i=e.material[0].layers.find(s=>s.uuid===t):i=e.material.layers.find(s=>s.uuid===t)}if(i)return i.color.texture.image.img instanceof HTMLVideoElement?i.color.texture.image.img:void 0}var CU=new Map,od=new Map,$l=class{constructor(e,t,i){this.data=t,this.delay=0,this.status="stopped";let{layerId:r,loop:s,volume:a,delay:n}=t;if(this.object=i,r===void 0)throw new Error("Missing property");let o=pbe(i,r);o&&(this.videoElement=o,this.videoElement.loop=s===1/0,bf&&(this.videoElement.autoplay=!0),a!==void 0&&(this.videoElement.volume=a)),n!==void 0&&(this.delay=n),od.has(i.uuid)?od.get(i.uuid).push(this):od.set(i.uuid,[this]),CU.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let i=this.videoElement.play();i!==void 0&&i.then(r=>{}).catch(r=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}seek(e){return new Promise((t,i)=>{if(!this.videoElement)return i();let r=this.videoElement.duration;if(r>0){let s=e%r;this.videoElement.currentTime=s}this.videoElement.addEventListener("seeked",()=>t(),{once:!0})})}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},lb=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=CU.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=od.get(e);!t?.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>i[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(i=>i[this.data.interaction]()))}pauseAllVideos(){let e=[...od.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(i=>{i[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(i=>{i[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},EU=class{constructor(e,t,i,r,s){if(this.data=t,this.shared=r,this.condition=s,t.interaction==="play")this.interaction=new $l(e,t,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new lb(t);else throw new Error("Missing property")}dispatchBasic(){if(ji(this.shared,this.condition)===!1)return!1;this.interaction instanceof $l?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(ji(this.shared,this.condition)===!1)return!1;this.interaction instanceof $l?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},hD=(()=>{let e,t,i,r;function s(o){!e&&!cD()&&t?.sharedGameControlGlobals.createdObjects.length>0&&(e=requestAnimationFrame(a)),o&&(t=o,r=o.requestRender)}function a(o){let l=i?o-i:0,h=t.sharedGameControlGlobals.createdObjects,c=t.sharedGameControlGlobals.nCreatedPerAction,u=h.length,d=0;for(;d<u;){let f=h[d];f.userData.createdTime===void 0&&(f.userData.createdTime=o),f.userData.lifetime===void 0&&f.userData.quantity===void 0||f.userData.lifetime&&o-f.userData.createdTime<f.userData.lifetime||f.userData.quantity&&c[f.userData.actionId]<=f.userData.quantity?(f.userData.velocity&&(f.position.addScaledVector(f.userData.velocity,l/1e3),f.updateMatrix(),r()),d++):(c[f.userData.actionId]>f.userData.quantity&&c[f.userData.actionId]--,h.splice(d,1),f.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&f.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(f.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(f.rigidBody)):(f.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(p=>p.bvhGeometry!==void 0)),u--,r())}e=d>0?requestAnimationFrame(a):void 0,i=d>0?o:void 0}function n(){cD()?e&&(cancelAnimationFrame(e),e=void 0,i=void 0):s()}return typeof document<"u"&&document.addEventListener("visibilitychange",n),s})();function cD(){return!!document&&document.hidden}var uD=new wt,mbe=new E,gbe=new E,TU=class{constructor(e,t,i,r,s){this.data=e,this.page=t,this.controlsManager=i,this.shared=r,this.condition=s,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=Ke.generateUUID(),this.dispatch=()=>{if(ji(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(ji(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=J3e(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let n=new _1(this.object);if(n.playModeVisible=!0,n.expand(),this.data.coordinateSystem!=="world"){let l=this.data.coordinateSystem,h=this.page.scene.find(l);h&&(h.updateMatrixWorldSVD(),n.hiddenMatrix.copy(h.matrixWorldRigid))}n.scale.copy(this.object.scale),n.position.fromArray(this.data.position),n.rotation.fromArray(this.data.rotation),n.updateMatrix(),this.page.add(n);let o=this.controlsManager.sharedGameControlGlobals;o.createdObjects.push(n),o.nCreatedPerAction[this.uniqueId]===void 0?o.nCreatedPerAction[this.uniqueId]=1:o.nCreatedPerAction[this.uniqueId]++,n.updateWorldMatrix(!0,!0),n.traverseObject(this.traverseObjectCB),hD(),this.controlsManager.requestRender()},this.traverseObjectCB=n=>{n.hasNonUniformScale&&n.updateMatrixWorldSVD();let o;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(n instanceof va)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;o=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof _1)o=n.object;else if(o=n,o.dataPatched.cloner?.hideBase)return!0}else{if(n instanceof va)return;n instanceof _1?o=n.object:o=n}this.data.destroy==="Time"?n.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(n.userData.quantity=this.data.destroyAfterQuantity,n.userData.actionId=this.uniqueId);let l=new E().fromArray(this.data.velocity),h=o.dataPatched;if(!(h.physics.enabled==="visibility"?!h.visible:!h.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(n,o,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&(n.rigidBody?.collider(0).setActiveEvents(1),n.userData.hasCollisionDestroy=!0),n.matrixWorld.decompose(mbe,uD,gbe),l.applyQuaternion(uD),this.data.velocity.some(c=>c!==0)&&this.data.dynamic&&n.rigidBody?.setLinvel(l.divideScalar(this.controlsManager.pixelsPerMeter),!0)):("geometry"in n.object&&this.controlsManager.addBoundsTree(n),this.data.velocity.some(c=>c!==0)&&this.data.dynamic&&(n.userData.velocity=l)),o.dataPatched.physics?.fusedBody===!0))return!0};let a=this.page.scene.find(this.data.object);if(!a)throw new Error("Missing Property");if(this.object=a,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");hD(i)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},PU=200,W9=.02,q9=.3,vbe=65;new E;var dD=new E,fD=new E,ybe=new E,X1=new E,cs=new E,Al=new E,X9=new Fe,pD=new Fe,xbe=new Fe;new Fe;var Fa=new wt,mo=new wt,xn=new Vr(0,0,0,"YXZ"),bbe=new E(1,0,0),Na=new E(0,1,0),wbe=new E(0,0,1),mD=new E(1,1,1);new Cs;var _be=1,Sbe=.025,Abe=16e-6,gD=12,Mbe=20,Qr=new wa,ra=new yr,Cbe={type:"requestRender"},Ebe={type:"updateMatrix"},vD=Math.PI/6,hb=class extends C1{constructor(e,t,i,r,s,a,n,o,l){super(),this.object=e,this.domElement=t,this.data=i,this.gloabalPhysics=r,this.controlsManager=s,this.cameraFollow=a,this.camera=n,this.page=o,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new Fe,this.target0=new E,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=PU,this.euler0=new Vr(0,0,0,"YXZ"),this.position0Cam=new E,this.quat0Cam=new wt,this.scale0Cam=new E,this.hiddenMatrix0Cam=new Fe,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new wa(new E(0,-40,0),new E(0,40,0)),matrix:new Fe,position:new E,rotation:new wt},this.euler=new Vr(0,0,0,"YXZ"),this.eulerDelta=new E,this.lastPosition=new E,this.lastCameraQuaternion=new wt,this.lastCameraPosition=new E,this.PI_2=Math.PI/2,this.prevMouse=new re,this.velocityTarget=new E,this.velocity=new E,this.directionXZ=new E,this.rotVelocityStick=new E,this.rotVelocityTarget=new E,this.rotVelocity=new E,this.rotDirection=new E,this.nonColliderRotOffset=new Fe,this.nonColliderPosOffset=new Fe,this.firstPointerId=-1,this.rot=new E,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new Fe,this.objectToTarget=new E,this.objectToTarget0=new E,this.objectToCamXZ=new E,this.objectToCamXZ0=new E,this.targetToCamera=new E,this.targetToCamera0=new E,this.cameraPolarAxis0=new E,this.targetPos=new E,this.targetQuat=new wt,this.lerpFactorPos=new E().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new wt,this.objXZQuatInv=new wt,this.objXZRotMat=new Fe,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new E,this.pushedVelocity=new E,this.groundYRotation=0,this.objectRealQuat=new wt,this.colliderWorldQuat=new wt,this.groundNormal=new E,this.groundTilt=new wt,this.groundTiltInv=new wt,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new E,this.quaternion=new wt,this.scale=new E,this.initialAction=!0,this.onPointerDown=p=>{!(p.target===this.domElement||p.target instanceof HTMLElement&&p.target.tagName==="SPLINE-VIEWER"&&p.target.shadowRoot?.contains(this.domElement))||this.firstPointerId!==-1||(this.firstPointerId=p.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Vs&&!GE&&this.domElement.requestPointerLock(),this.prevMouse.set(p.clientX,p.clientY))},this.onPointerUp=p=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),p.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=p=>{if(p.pointerId!==this.firstPointerId)return;let m=p.clientX-this.prevMouse.x,g=p.clientY-this.prevMouse.y;this.prevMouse.set(p.clientX,p.clientY),p.pointerType==="mouse"&&this.rotBy!=="keys"&&(GE&&dde<15.5&&!Vs?(this.eulerDelta.y=-m*this.mouseOrbitSensitivity,this.eulerDelta.x=-g*this.mouseOrbitSensitivity):(this.eulerDelta.y=-p.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-p.movementY*this.mouseOrbitSensitivity)),p.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-m*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-g*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=p=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?hb.isLocked=!0:hb.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document?.hidden)for(let p in this.movementState)this.movementState[p]=0},this.onKeyDown=p=>{!(p.target instanceof HTMLInputElement)&&(p.code==="ArrowLeft"||p.code==="ArrowUp"||p.code==="ArrowRight"||p.code==="ArrowDown"||p.code==="Space")&&p.preventDefault();for(let m of this.keyAssignments)if(p.key.toUpperCase()===m[1]||p.key===m[1]){this.movementState[m[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=p=>{for(let m of this.keyAssignments)if(p.key.toUpperCase()===m[1]||p.key===m[1]||p.code.slice(3,p.code.length).toUpperCase()===m[1]){this.movementState[m[0]]=0;break}},this.copyVRGamePadValues=(p,m)=>{for(let g=2;g<4;g++){let v=p.axes[g];m===0?g===2?this.movementState.movePosX=v:this.movementState.movePosZ=v:(p.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,g===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(v)>=.3&&(this.vrEulerYOffset+=v<0?1:-1),this.movementState.rotPosY=v):this.moveMode==="fly"&&(this.movementState.moveNegY=v))}},this.sharedGameControlGlobals=s.sharedGameControlGlobals,e===n&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let h=this.euler0.clone(),c=h.y;if(this.objectRealQuat.copy(this.quaternion),h.y=0,this.quaternion.setFromEuler(h),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),h.set(0,c,0),this.quaternion.setFromEuler(h),this.rot.setFromEuler(h),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy(this.camera?.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let p=new E(0,0,-1).applyQuaternion(this.camera.quaternion),m=new E().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(m),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let g,v;Math.abs(p.y)<1e-6?(m.y=0,p.y=0,v=m.projectOnVector(p)):m.y/p.y>0?v=p.multiplyScalar(m.y/p.y):v=p.multiplyScalar(m.length()),this.targetToCamera0.copy(v).negate(),g=this.camera.position.clone().add(v),this.objectToTarget0.subVectors(g,this.position);let y=new Vr().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-y.x,y.x=0,y.z=0,y.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(y)}if(this.object instanceof V1&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=i.rotByTouch??"joystick",this.rotBy=i.rotBy??"keys",this.rotationMode=i.rotationMode??"normal",this.moveMode=i.moveMode??"walk",this.collisionEnabled=i.collisionEnabled,this.speedTranslate=(i.speedTranslate??250)*_be,this.speedOrbit=(i.speedRotate??100)*Sbe,this.mouseOrbitSensitivity=(i.speedRotate??100)*Abe,this.keyAssignments=i.keyAssignments.map(p=>{let m=[p[0],p[1]];return m[1]==="▲"?m[1]="ArrowUp":m[1]==="◀"?m[1]="ArrowLeft":m[1]==="▼"?m[1]="ArrowDown":m[1]==="▶"?m[1]="ArrowRight":m[1]==="⇧"?m[1]="Shift":m[1]==="↵"?m[1]="Enter":m[1]==="Space"?m[1]=" ":m[1]==="⌘"?m[1]="Meta":m[1]==="Ctrl"?m[1]="Control":m[1]==="Esc"&&(m[1]="Escape"),m}),i.rotBy==="mouse"){let p;p=this.keyAssignments.findIndex(m=>m[0]==="rotNegX"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(m=>m[0]==="rotPosX"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(m=>m[0]==="rotPosY"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(m=>m[0]==="rotNegY"),p!==-1&&(this.keyAssignments[p][1]="")}this.lerpFactorPosStart=1-.02**(1/((i.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((i.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((i.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((i.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((i.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((i.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??qu.defaultData.gravity)*gD,this.usePhysics=this.gloabalPhysics.usePhysics??qu.defaultData.usePhysics,this.jumpPower=i.jumpPower*Mbe,this.resetYPosition=this.position.y+Math.abs(i.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=i.alignToGround??!1,this.orientMode=i.autoOrientMove?i.orientMode:"none",this.orientWith=i.orientWith??Zg.defaultDataThirdPerson.orientWith,this.slopeThresh=vbe*Math.PI/180,i.collider.type==="capsule"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=i.collider.height/2-i.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=i.collider.height*W9/this.pixelsPerMeter,this.stepThresh=i.collider.height*q9/this.pixelsPerMeter,this.colliderHeight=i.collider.height):i.collider.type==="sphere"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*i.collider.radius*W9/this.pixelsPerMeter,this.stepThresh=2*i.collider.radius*q9/this.pixelsPerMeter,this.colliderHeight=i.collider.radius*2):(this.offset=i.collider.height*W9/this.pixelsPerMeter,this.stepThresh=i.collider.height*q9/this.pixelsPerMeter,this.colliderHeight=i.collider.height),this.collider.type=i.collider.type;let u=new E().fromArray(i.collider.position),d=new wt().setFromEuler(new Vr().fromArray([...i.collider.rotation,"XYZ"]));this.collider.position.copy(u).multiply(this.scale),this.collider.rotation.copy(d),this.collider.matrix.compose(u,d,mD),i.cameraXAxis!==void 0&&(this.cameraXAxis=i.cameraXAxis,this.cameraYAxis=i.cameraYAxis,this.minPolarAngle=i.cameraRotXLimits[0],this.maxPolarAngle=i.cameraRotXLimits[1],this.minAzimuthAngleRel=i.cameraRotYLimits[0],this.maxAzimuthAngleRel=i.cameraRotYLimits[1]),this.forwardDir=i.forwardDirection??"-z",this.isFirstPerson&&(this.forwardDir="-z"),this.runMultiplier=i.runMultiplier??2;let f=i.navmesh.destinationHelperRadius*2;if(f>0){let p=new nt;p.push({fi:0,data:{...Jr.defaultData("light","phong"),alpha:0},id:"layer1"}),p.push({fi:0,data:{...Jr.defaultData("color"),color:i.navmesh.destinationHelperColor,alpha:i.navmesh.destinationHelperColor.a},id:"layer2"});let m=new L_({layers:p},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new zi(sF.create({parameters:{width:f,height:f/10,hollow:.7}}),m),this.navMeshPathDest.material.userData.opacity0=i.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new Vr().setFromQuaternion(this.quaternion,"YXZ"),i=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,i,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof V1?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){this.deactivate(),this.navMeshPathDest?.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},Qg.list.forEach(i=>{this.actions[i]=Lr({...e,disabled:!1,type:"GameControl"},e.gameActions[i],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),s1(this.actions.idle),s1(this.actions.move),s1(this.actions.run),s1(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(this.initialAction===!1)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return X1.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,i){if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let r=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let s=r*60,a=!1;if(this.usePhysics&&this.collisionEnabled){let o=cs.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*gD),1)*(this.gravity>0?1:-1):this.velocity.y)*r,0).divideScalar(this.pixelsPerMeter),l=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,o,this.object.rigidBody?.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(l){this.onObject=!0,this.groundNormal.set(l.normal2.x,l.normal2.y,l.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(a=!0),l.collider.parent()?.bodyType()===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let h=l.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let c of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(c.rigidBody===h&&c.userData.isFollowingObj!==this.object.uuid){(c.hasNonUniformScale?c.matrixWorldRigid:c.matrixWorld).decompose(X1,mo,cs),this.groundVelocity.subVectors(X1,c.prevT),this.object.getWorldPosition(cs).add(this.collider.position).sub(X1),this.groundYRotation=xn.setFromQuaternion(mo).y-c.prevR.y,Al.copy(cs).applyAxisAngle(Na,this.groundYRotation),this.groundVelocity.add(Al.sub(cs)).divideScalar(r);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*s),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let o=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let l=X1.subVectors(this.path[1],this.position),h=cs.subVectors(this.path[1],this.path[0]);l.dot(h)<0?this.path.shift():(this.directionXZ.x=h.x,this.directionXZ.z=h.z),o.opacity=o.userData.opacity0}else o.opacity-=.05*o.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**s),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**s),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**s)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let n=ybe.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let o=cs.copy(n);o.y=0,n.set(0,n.y,o.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none"&&this.isFirstPerson===!1)if(this.orientWith==="camera"&&this.path.length<=1){let o=X1;this.camera.getWorldDirection(o);let l=Al.copy(Na).multiplyScalar(o.dot(Na));o.sub(l);let h=cs.copy(this.directionXZ);h.x*=-1,this.rot.y=o.angleTo(h)*(o.cross(h).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(xn.setFromVector3(this.rot),this.moveMode==="walk"&&(xn.x=0),n.applyEuler(xn),a&&(mo.setFromUnitVectors(Na,this.groundNormal),n.applyQuaternion(mo)),i){let o=xn.set(0,this.vrEulerYOffset*vD,0);i.applyEuler(o),n.x+=i.x,n.z+=i.z,this.nonColliderPosOffset.elements[13]+=i.y*r}if(this.usePhysics===!0){let o=cs;this.pushedVelocity.set(0,0,0);for(let l of this.sharedGameControlGlobals.entitiesWithTransformAnim){let h=Al.setFromMatrixPosition(l.matrixWorld).sub(l.prevT).divideScalar(r).divideScalar(this.pixelsPerMeter),c=l.rigidBody.collider(0).castCollider(h,this.object.rigidBody.collider(0),X1.copy(n).divideScalar(this.pixelsPerMeter),r,!1);h.multiplyScalar(this.pixelsPerMeter);let u=Zt.is(l)?l:l.object;if(c!==null&&this.lastHitObj!==u){let d;l instanceof _1&&(d=l);let f=this.sharedGameControlGlobals.entityToCollisionEvents[u.uuid];if(f)for(let p of f)p.data.target==="character"&&(p.dispatch(d),u.dispatchEvent(ub));this.lastHitObj=u}if(c!==null){this.pushedVelocity.copy(h),o.copy(c.normal1).applyQuaternion(l.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let l=o.dot(n);l<0&&n.addScaledVector(o,-l),n.add(this.pushedVelocity)}else n.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(r),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**s):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**s),this.euler.x+=this.rotVelocity.x*r,this.euler.y+=this.rotVelocity.y*r+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*r),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(Na,this.euler.y-this.euler0.y);let o=cs.copy(this.objectToCamXZ).normalize(),l=Al.copy(n).multiplyScalar(r);l.y=0;let h=l.sub(X1.copy(o).multiplyScalar(l.dot(o))).cross(o).y;this.euler.y-=Math.atan2(h,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*r+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Ke.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Ke.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Ke.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(xn.copy(t),xn.y=0):(xn.copy(this.euler),xn.y=0),this.nonColliderRotOffset.makeRotationFromEuler(xn)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*vD),Fa.setFromAxisAngle(bbe,this.rot.x),mo.setFromAxisAngle(Na,this.rot.y),mo.multiply(Fa),Fa.setFromAxisAngle(wbe,this.rot.z),mo.multiply(Fa),this.quaternion.copy(mo),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let o=cs.copy(n).multiplyScalar(r/this.pixelsPerMeter),l=null;this.didHit=!1;let h=new E;for(let c=0;c<5;c++){let u=o.length(),d=Al.copy(o).normalize();if(l=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(h),this.colliderWorldQuat,d,this.object.rigidBody?.collider(0).shape,u,!1,24,void 0,void 0,this.object.rigidBody),l!==null){this.didHit=!0;let f=this.sharedGameControlGlobals.colliderToEntity.get(l.collider.handle);if(f!==this.lastHitObj&&c===0){this.lastHitObj=f;let v=this.sharedGameControlGlobals.entityToCollisionEvents[f?.uuid];if(v){for(let y of v)if(y.data.target==="character"){let x=(this.sharedGameControlGlobals.rapierWorld?.getCollider(l.collider.handle))._parent,w;if(f.cloner){for(let _ of f.cloner.children)if(_.rigidBody===x){w=_;break}}y.dispatch(w),f.dispatchEvent(ub)}}}let p=dD.set(l.normal2.x,l.normal2.y,l.normal2.z).applyQuaternion(this.colliderWorldQuat),m=fD.copy(d).multiplyScalar(l.toi).dot(p),g=l.toi;if(g===0&&(this.position.y+=this.offset*this.pixelsPerMeter),m>this.offset&&(g=l.toi*(m-this.offset)/m,h.addScaledVector(d,g)),o.copy(d).multiplyScalar(u-g),Math.acos(-p.y)>this.slopeThresh){let v=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(h),y=Al.copy(l.witness2).applyQuaternion(this.colliderWorldQuat);y.y=0;let x=v.add(y);x.y+=this.stepThresh;let w=this.sharedGameControlGlobals.rapierWorld.castShape(x,this.colliderWorldQuat,o,this.object.rigidBody?.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);w!==null&&w.toi===0&&(p.y=0,p.normalize())}o.addScaledVector(p,-o.dot(p))}else{c===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),h.add(o);break}}this.position.addScaledVector(h,this.pixelsPerMeter),this.object.rigidBody?.setTranslation(X1.copy(this.position).divideScalar(this.pixelsPerMeter),!0),this.object.rigidBody?.setRotation(Fa.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let o=this.onObject?1:5,l=n.multiplyScalar(r/o);for(let h=0;h<o;h++)this.position.add(l),this.collisionAdjustment(r/o)}else this.position.addScaledVector(n,r);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let o=this.objectToTarget.add(this.position),l=this.targetToCamera.add(o);X9.lookAt(l,o,Na).setPosition(l),X9.decompose(this.targetPos,this.targetQuat,X1),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**s),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**s),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Ke.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Ke.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(Ebe),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*this.navMeshPathDest?.material?.userData.opacity0)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(Cbe),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=Fa.setFromAxisAngle(Na,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Ke.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=Ke.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=Ke.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let i=X1.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&i.applyQuaternion(e);let r=mo.setFromAxisAngle(i,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(r)}groundTiltAdjustment(e){Na.angleTo(e)*180/Math.PI<15||Na.angleTo(e)*180/Math.PI>85?Fa.identity():Fa.setFromUnitVectors(Na,e),this.groundTilt.slerp(Fa,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){let t=fD.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let i=X9.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(X1,Fa,cs).compose(X1,Fa,mD);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(s=>{if(s===this.object||s.isDescendantOf(this.object))return;ra.makeEmpty(),s.updateMatrixWorldSVD();let a=s.matrixWorldRigid,n=pD.copy(a).invert(),o=xbe.copy(pD).multiply(i);Qr.copy(this.collider.segment),Qr.start.applyMatrix4(o),Qr.end.applyMatrix4(o);let l=dD.copy(this.position).applyMatrix4(n);ra.expandByPoint(Qr.start),ra.expandByPoint(Qr.end),ra.min.addScalar(-this.collider.radius),ra.max.addScalar(this.collider.radius),s.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(h){return h.distanceToPoint(Qr.end)},intersectsBounds:h=>h.intersectsBox(ra),intersectsTriangle:h=>{let c=X1,u=cs,d=h.closestPointToSegment(Qr,c,u);if(d<this.collider.radius){let f=this.collider.radius-d,p=u.sub(c).normalize(),m=Al.copy(l);m.addScaledVector(p,f);let g=m.applyMatrix4(a).sub(this.position);t.add(g),Qr.start.addScaledVector(p,f),Qr.end.addScaledVector(p,f)}}})}),ra.makeEmpty(),Qr.copy(this.collider.segment),Qr.start.applyMatrix4(i),Qr.end.applyMatrix4(i),ra.expandByPoint(Qr.start),ra.expandByPoint(Qr.end),ra.min.addScalar(-this.collider.radius),ra.max.addScalar(this.collider.radius),this.sharedGameControlGlobals.staticMeshBVH?.shapecast({traverseBoundsOrder(s){return s.distanceToPoint(Qr.end)},intersectsBounds:s=>s.intersectsBox(ra),intersectsTriangle:s=>{let a=X1,n=cs,o=s.closestPointToSegment(Qr,a,n);if(o<this.collider.radius){let l=this.collider.radius-o,h=n.sub(a).normalize();this.alignToGround&&this.groundTiltAdjustment(h),t.addScaledVector(h,l),Qr.start.addScaledVector(h,l),Qr.end.addScaledVector(h,l)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let r=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(r),this.position.add(t)}pause(){this.firstPointerId=-1,this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.deactivate()}resume(){this.activate()}},DU=hb;DU.isLocked=!1;var Tbe=Mh(Mz());function IU(e){let t=e.elements,i=t[0]**2+t[1]**2+t[2]**2,r=t[4]**2+t[5]**2+t[6]**2,s=t[8]**2+t[9]**2+t[10]**2,a=t[0]**2+t[4]**2+t[8]**2,n=t[1]**2+t[5]**2+t[9]**2,o=t[2]**2+t[6]**2+t[10]**2,l=1e-8;return i<l||r<l||s<l||a<l||n<l||o<l}function Po(e,t){let i=new rt;if(t&&IU(t))return i.setAttribute("position",new Xe([],3)),i.setIndex([]),i;if(!e.getAttribute("position"))return i.setAttribute("position",new Xe([],3)),i.setIndex([]),i;let{positions:r,triIndices:s}=s4(e.getAttribute("position"),e.getIndex());return i.setAttribute("position",new Xe(r,3)),i.setIndex(s),t&&i.applyMatrix4(t),i}var Pbe=new Fe,Dbe=new Fe,bn=[[0,0,0],[0,0,0],[0,0,0]];function OU(e){let t=e.elements;bn[0][0]=t[0],bn[0][1]=t[4],bn[0][2]=t[8],bn[1][0]=t[1],bn[1][1]=t[5],bn[1][2]=t[9],bn[2][0]=t[2],bn[2][1]=t[6],bn[2][2]=t[10];let{u:i,v:r}=(0,Tbe.SVD)(bn),s=Pbe.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=Dbe.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1);return s.multiply(a.transpose())}var Ibe=class extends yB{constructor(){super(),this.layers.enable(3),this.layers.enable(8),this.layers.enable(9)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,i=[]){return e.forEach(r=>{r.visible&&this.intersectObject(r,t,i)}),i}createRaycastLineHelper(){let e=new Eh({color:65280,linewidth:10}),t=new E(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),i=new E(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),r=this.camera.far-this.camera.near,s=new E().addVectors(t,i.multiplyScalar(r)),a=new rt;return a.setFromPoints([t,s]),new bg(a,e)}},RU=e=>e instanceof Su||e instanceof Au;function Obe(e,t){return e.distance-t.distance}function LU(e,t,i){if(!(!To(t)||!t.visible)){ja(t)&&t.raycast(e,i);for(let r of t.children)LU(e,r,i)}}function Vm(e,t,i,r=!1){if(!r&&!i.some(a=>vv(e,a)!==void 0))return[];let s=[];return t.children.forEach(a=>LU(e,a,s)),s.sort(Obe),s}function cb(e){let t=[];if(e.length){let i=e[0].object;To(i)&&t.push(i);let r=i.parent;for(;r;)RU(r)&&t.push(r),r=r.parent}return t}function Do(e,t,i,r){let s=e.frame;if(s){let a=t[0]*s.width,n=(1-t[1])*s.height;for(let o of i){let l=o===s.uuid?s:s.find(o);if(l?.intersects(a,n))return r(l),!0}}return!1}function vv(e,t){if(ja(t)){if(t.visible){let i=[];return t.raycast(e,i),i.length?i[0]:void 0}}else if(RU(t))return zU(e,t)}function zU(e,t){if(!(!To(t)||!t.visible)){if(ja(t)){let i=[];if(t.raycast(e,i),i.length)return i[0]}for(let i of t.children){let r=zU(e,i);if(r)return r}}}function Rbe(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width*2-1,y:-((t-(i.top+window.scrollY))/i.height)*2+1}}function Lbe(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width,y:1-(t-(i.top+window.scrollY))/i.height}}var zbe=class{constructor(e,t,i,r,s,a,n,o){this.renderer=e,this.publish=t,this.scene=i,this.getCamera=r,this.sharedAssets=s,this.requestRender=a,this.isExport=n,this.frame=o,this.raycaster=new Ibe,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){let{pageX:t,pageY:i}=e.touches?.length>0?e.touches[0]:e;this.pointerWorld=Rbe(t,i,this._domRect),this.pointerScreen=Lbe(t,i,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},G1=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},c7=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],BU=e=>c7.find(([t,i])=>i===e)?.[0],Tf=e=>c7.find(([t])=>t===e)?.[1],Bbe=(e,t)=>{let i=BU(e);if(i){let r=new CustomEvent(i,{bubbles:!0});return Object.defineProperty(r,"target",{writable:!1,value:t}),r}},kbe=class extends G1{constructor(){super(...arguments),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=e=>{if(!e.eventName||!e.target||e.eventName==="Scroll")return;let t=this.splineEvents[BU(e.eventName)]?.[e.target.uuid];if(!t)return;e.eventName==="Scroll"&&e.deltaY!==void 0&&Object.assign(t,{deltaY:e.deltaY});let{domElement:i}=this.eventContext;i.dispatchEvent(t)}}connect(){let{page:e}=this.eventContext;e.traverseEntity(t=>{if(t.data?.events.length){for(let[i,r]of c7)if(t.data.events.some(s=>s.data.type===r&&!s.data.disabled)){this.objectsPerEvents.has(i)?this.objectsPerEvents.get(i)?.push(t):this.objectsPerEvents.set(i,[t]);let s={id:t.uuid,name:t.name},a=Bbe(r,s),n=this.splineEvents[i];n?n[t.uuid]=a:this.splineEvents[i]={[t.uuid]:a}}}}),this.objectsPerEvents.forEach(t=>{t.forEach(i=>{i.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},Fbe=class{constructor(e,t,i,r,s,a){if(this.id=e,this.data=t,this.object=i,this.entered=!1,(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=Lr(t,t.actions,r,s,a,i)}disconnect(){s1(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.SwitchCamera.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.SwitchCamera.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},Nbe=class extends G1{constructor(e,t,i){super(e),this.eventManager=t,this.useForRaycastProperty=i,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=r=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(r);let{raycaster:s,page:a}=this.eventContext,n=Vm(s,a,[],!0);this.sceneInterects=n,n.length&&(this.eventContext.sharedAssets.raycastProperty={x:n[0].point.x,y:n[0].point.y,z:n[0].point.z,objX:n[0].object.matrixWorld.elements[12],objY:n[0].object.matrixWorld.elements[13],objZ:n[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=r=>{(r.target===this.eventContext.domElement||r.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(s=>{(s.data.type==="MouseDown"||s.data.type==="MousePress")&&(this.onCanvasRaycast(r),s.dispatch())})},this.onCanvasMouseUp=r=>{(r.target===this.eventContext.domElement||r.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(s=>{s.data.type==="MouseUp"?(this.onCanvasRaycast(r),s.dispatch()):s.data.type==="MousePress"&&s.dispatchRelease()})},this.onMouseDown=r=>{xt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseDown"))},this.onMouseUp=r=>{xt.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=r=>{xt.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent())},this.onMousePressRelease=r=>{xt.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent(!0))},this.onKeyDown=r=>{this.heldKeys[r.key]||(this.handleKeyEvent(r,"KeyDown"),this.handleKeyEventHeld(r,"KeyDown",!0)),this.heldKeys[r.key]=!0},this.onKeyUp=r=>{this.handleKeyEvent(r,"KeyUp"),this.handleKeyEventHeld(r,"KeyUp",!0)},this.onKeyPressDown=r=>{this.heldKeysPress[r.key]?this.handleKeyEventHeld(r,"KeyPress"):(this.handleKeyEvent(r,"KeyPress"),this.handleKeyEventHeld(r,"KeyPress",!0)),this.heldKeysPress[r.key]=!0},this.onKeyPressUp=r=>{this.handleKeyEvent(r,"KeyPress",!0)},this.releaseHeldKey=r=>{delete this.heldKeys[r.key]},this.releaseHeldKeyPress=r=>{delete this.heldKeysPress[r.key]},this._onUserEvent=({eventName:r,target:s,reverse:a})=>{if(!r||!s)return;let n=Tf(r);n&&(n==="MouseDown"||n==="MouseUp"||n==="MousePress"?(s.dispatchEvent({type:"beginEvent",eventName:n}),this.eventsPerObjects[n]?.[s.uuid]?.forEach(o=>{o.dispatchUserEvent(a)})):(n==="KeyDown"||n==="KeyUp"||n==="KeyPress")&&(s.dispatchEvent({type:"beginEvent",eventName:n}),this.eventsPerObjects[n]?.[s.uuid]?.forEach(o=>{o.dispatchUserEvent()})))}}connect(){let{page:e,sharedAssets:t,domElement:i}=this.eventContext,r=(s,a)=>{if(!s.data?.events.length)return;let n=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let o of n){let l=this.eventsPerObjects[o];if(s.data.events.filter(({data:h})=>h.type===o&&h.disabled!==!0).forEach(({id:h,data:c})=>{try{let u=new Fbe(h,c,s,e,t,this.eventManager);u.actions.Video.length&&(this.hasVideoAction=!0),(c.type==="MouseDown"||c.type==="MouseUp"||c.type==="MousePress")&&(c.mode==="Canvas"||c.mode==="Window")?this.canvasMouseEvents.push(u):(l[s.uuid]?l[s.uuid].some(d=>d.id===u.id)||l[s.uuid].push(u):l[s.uuid]=[u],s instanceof jc&&s.traverseChildren(d=>{if(!d.visible)return!0;d instanceof Ir&&d.data.geometry.shapeBlendNode?.operation!==2&&(l[d.uuid]?l[d.uuid].push(u):l[d.uuid]=[u])}))}catch{}}),l[s.uuid]?.length&&(this.objectsPerTypes[o].push(s instanceof n1&&(o==="MouseDown"||o==="MouseUp"||o==="MousePress")?a:s),s instanceof jc)){let h=this.objectsPerTypes[o];s.traverseChildren(c=>{if(!c.visible)return!0;c instanceof Ir&&h.indexOf(c)===-1&&h.push(c)})}}};e.traverseEntity(s=>{(s instanceof F1||s instanceof $r)&&s.frame?.traverse(a=>{r(a,s)}),r(s)}),this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),i.addEventListener("pointerdown",this.onCanvasMouseDown),i.addEventListener("pointerup",this.onCanvasMouseUp),(this.objectsPerTypes.MouseDown?.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),i.addEventListener("pointerdown",this.onMouseDown)),this.objectsPerTypes.MouseUp?.length&&(this.domEventsNeeded.add("pointerup"),i.addEventListener("pointerup",this.onMouseUp)),this.objectsPerTypes.MousePress?.length&&(this.domEventsNeeded.add("pointerdown"),i.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),i.addEventListener("pointerup",this.onMousePressRelease)),this.objectsPerTypes.KeyDown?.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),this.objectsPerTypes.KeyUp?.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),this.objectsPerTypes.KeyPress?.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([s,a])=>{a.forEach(n=>{n.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(i=>{i.forEach(r=>{r.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,i])=>{i.forEach(r=>{r.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){let{stopRaycast:t,raycaster:i,page:r,pointerScreen:s}=this.eventContext,a=this.objectsPerTypes[e],n=a.filter(o=>!(o instanceof n1));if(!(!a.length&&!this.useForRaycastProperty)&&!(r.uiCanvas&&Do(r,[s.x,s.y],Object.keys(this.eventsPerObjects[e]),o=>{this.handleObjectMouseEventDispatch(o,e)}))){if(t||this.useForRaycastProperty){let o;if(this.sceneInterects===null?o=Vm(i,r,n,this.useForRaycastProperty):(o=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&o.length&&(this.eventContext.sharedAssets.raycastProperty={x:o[0].point.x,y:o[0].point.y,z:o[0].point.z,objX:o[0].object.matrixWorld.elements[12],objY:o[0].object.matrixWorld.elements[13],objZ:o[0].object.matrixWorld.elements[14]}),t){let l=[o[0]?.uv?.x??0,o[0]?.uv?.y??0];cb(o).forEach(h=>{h instanceof F1&&Do(h,l,Object.keys(this.eventsPerObjects[e]),c=>{this.handleObjectMouseEventDispatch(c,e)}),this.eventsPerObjects[e][h.uuid]&&this.handleObjectMouseEventDispatch(h,e)})}}t||n.forEach(o=>{let l=vv(i,o);l&&(this.handleObjectMouseEventDispatch(o,e),o instanceof F1&&Do(o,[l?.uv?.x??0,l?.uv?.y??0],Object.keys(this.eventsPerObjects[e]),h=>{this.handleObjectMouseEventDispatch(h,e)}))})}}handleMousePressEvent(e=!1){let t="MousePress",i=this.objectsPerTypes[t],r=i.filter(a=>!(a instanceof n1)),s=[];if(i.length){if(!e){let{stopRaycast:a,raycaster:n,page:o,pointerScreen:l}=this.eventContext,h=!1;if(o.uiCanvas&&(h=Do(o,[l.x,l.y],Object.keys(this.eventsPerObjects[t]),c=>{s.push(c)})),a&&!h){let c=Vm(n,o,r);s=cb(c),c.forEach(u=>{u.object instanceof F1&&Do(u.object,[u?.uv?.x??0,u?.uv?.y??0],Object.keys(this.eventsPerObjects[t]),d=>{s.push(d)})})}else r.forEach(c=>{let u=vv(n,c);u&&(s.push(c),c instanceof F1&&Do(c,[u?.uv?.x??0,u?.uv?.y??0],Object.keys(this.eventsPerObjects[t]),d=>{s.push(d)}))})}this._prevObjects.length&&this._prevObjects.forEach(a=>{s.includes(a)||this.handleObjectMouseEventDispatchRelease(a,t)}),s.length&&s.forEach(a=>{this.handleObjectMouseEventDispatch(a,t)}),this._prevObjects=s}}handleObjectMouseEventDispatch(e,t){e.dispatchEvent({type:"beginEvent",eventName:t}),this.eventsPerObjects[t]?.[e.uuid]?.forEach(i=>{i.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){e.dispatchEvent({type:"beginEvent",eventName:t}),this.eventsPerObjects[t]?.[e.uuid]?.forEach(i=>{i.dispatchRelease()})}handleKeyEvent(e,t,i=!1){this.objectsPerTypes[t].forEach(r=>{let s=this.eventsPerObjects[t][r.uuid];s.some(({data:a})=>"key"in a&&a.key===e.key)&&r.dispatchEvent({type:"beginEvent",eventName:t}),s.forEach(a=>{"key"in a.data&&a.data.key===e.key&&(i?a.dispatchRelease():a.dispatch(!0))})})}handleKeyEventHeld(e,t,i=!1){this.objectsPerTypes[t].forEach(r=>{this.eventsPerObjects[t][r.uuid].forEach(s=>{"key"in s.data&&s.data.key===e.key&&s.dispatchHeld(i)})})}},Ube=new E,Vbe=new E,kU=class{constructor(e,t,i,r,s){this.actionsIn=Lr(e,e.inActions,i,r,s,t),this.actionsOut=Lr(e,e.outActions,i,r,s,t)}disconnect(){s1(this.actionsIn),s1(this.actionsOut)}},jbe=class extends kU{constructor(e,t,i,r,s,a){super(t,i,r,s,a),this.id=e,this.data=t,this.object=i,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let d of this.objects)if(!d.visible)return;let h=Ube.setFromMatrixPosition(this.objects[0].matrixWorld),c=Vbe.setFromMatrixPosition(this.objects[1].matrixWorld),u=h.distanceTo(c)<=this.distance?"in":"out";if(this.stage!==u){this.stage=u;let d=u==="in"?this.actionsIn:this.actionsOut;d.Audio.forEach(f=>f.dispatchConditional()),d.Particles.forEach(f=>f.dispatchConditional()),d.Video.forEach(f=>f.dispatchConditional()),d.Link.forEach(f=>f.dispatch()),d.Create.forEach(f=>f.dispatch()),d.Destroy.forEach(f=>f.dispatch()),d.Reset.forEach(f=>f.dispatch()),d.Transition.forEach(f=>{f.object.currentTransitionEvent!==this&&(f.object.currentTransitionEvent=this),f.init()}),d.Transition.forEach(f=>f.play()),d.Animation.forEach(f=>f.play()),d.SwitchCamera.forEach(f=>f.play()),d.SceneTransition.forEach(f=>f.dispatch()),d.SetVariable.forEach(f=>f.checkConditions()),d.SetVariable.forEach(f=>f.dispatch()),d.DynamicVariablePlay.forEach(f=>f.dispatch()),d.ClearLocalStorage.forEach(f=>f.dispatch()),d.UserAPI.forEach(f=>f.dispatch())}};let{distance:n,fromObject:o,toObject:l}=t.condition;this.distance=n;for(let h of[o,l]){if(!h)throw new Error("Missing property");let c=r.find(h);if(!c)throw new Error("Missing property");this.objects.push(c)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},Gbe=class extends kU{constructor(e,t,i,r,s,a){super(t,i,r,s,a),this.id=e,this.data=t,this.object=i,this.onBegin=({target:l,state:h})=>{this.toState!==h&&(this.actionsOut.Audio.forEach(c=>c.dispatchConditional()),this.actionsOut.Particles.forEach(c=>c.dispatchConditional()),this.actionsOut.Video.forEach(c=>c.dispatchConditional()),this.actionsOut.Link.forEach(c=>c.dispatch()),this.actionsOut.Create.forEach(c=>c.dispatch()),this.actionsOut.Destroy.forEach(c=>c.dispatch()),this.actionsOut.Reset.forEach(c=>c.dispatch()),this.actionsIn.Transition.forEach(c=>c.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(c=>c.play()),this.actionsOut.Animation.forEach(c=>c.play()),this.actionsIn.SwitchCamera.forEach(c=>c.pause()),this.actionsOut.SwitchCamera.forEach(c=>c.play()),this.actionsOut.SceneTransition.forEach(c=>c.dispatch()),this.actionsOut.SetVariable.forEach(c=>c.checkConditions()),this.actionsOut.SetVariable.forEach(c=>c.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(c=>c.dispatch()),this.actionsOut.ClearLocalStorage.forEach(c=>c.dispatch()),this.actionsOut.UserAPI.forEach(c=>c.dispatch()))},this.onComplete=({target:l,state:h})=>{this.toState===h&&(this.actionsIn.Audio.forEach(c=>c.dispatchConditional()),this.actionsIn.Particles.forEach(c=>c.dispatchConditional()),this.actionsIn.Video.forEach(c=>c.dispatchConditional()),this.actionsIn.Link.forEach(c=>c.dispatch()),this.actionsIn.Create.forEach(c=>c.dispatch()),this.actionsIn.Destroy.forEach(c=>c.dispatch()),this.actionsIn.Reset.forEach(c=>c.dispatch()),this.actionsOut.Transition.forEach(c=>c.pause()),this.actionsOut.Transition.forEach(c=>c.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(c=>c.play()),this.actionsIn.Animation.forEach(c=>c.play()),this.actionsOut.SwitchCamera.forEach(c=>c.pause()),this.actionsIn.SwitchCamera.forEach(c=>c.play()),this.actionsIn.SceneTransition.forEach(c=>c.dispatch()),this.actionsIn.SetVariable.forEach(c=>c.checkConditions()),this.actionsIn.SetVariable.forEach(c=>c.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(c=>c.dispatch()),this.actionsOut.ClearLocalStorage.forEach(c=>c.dispatch()),this.actionsOut.UserAPI.forEach(c=>c.dispatch()))};let{condition:n}=t;if(!n.object)throw new Error("Missing property");let o=r.find(n.object)??r.scene.find2D(n.object);if(!o)throw new Error("Missing property");if(this.toObject=o,n.state&&!this.toObject.states?.[n.state])throw new Error("Missing property");this.toState=n.state}connect(){hc(this.actionsOut).forEach(e=>{this.actionsOut[e]?.length&&this.toObject.addEventListener("beginState",this.onBegin)}),hc(this.actionsIn).forEach(e=>{this.actionsIn[e]?.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),hc(this.actionsOut).forEach(e=>{this.actionsIn[e]?.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),hc(this.actionsIn).forEach(e=>{this.actionsIn[e]?.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},Hbe=class extends G1{constructor(e,t){super(e),this.eventManager=t,this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1}connect(){super.connect();let{page:e,sharedAssets:t}=this.eventContext;e.traverseEntity(i=>{if(i.data?.events.length){for(let{id:r,data:s}of i.data.events)if(!s.disabled&&s.type==="Conditional")try{let a;s.condition.type==="Comparison"||(s.condition.type==="Distance"?a=new jbe(r,s,i,e,t,this.eventManager):s.condition.type==="State"&&(a=new Gbe(r,s,i,e,t,this.eventManager))),a&&(this.eventsPerConditions[s.condition.type].push(a),(a.actionsIn.Video.length||a.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}}),Object.values(this.eventsPerConditions).forEach(i=>i.forEach(r=>r.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},r3=new E,Ml=new E,Vh=new E,yD=new ds,Wbe=.01,ui=new E,Nr=new E,xD=new E,gc=new wt,Y9=new Vr,qbe=new Fe,K9=new Dr,D2=new E,wn=new E,I2=.2;function Q9(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var Xbe=function(){let e=new Fe;return(t,i,r)=>{let s=t.obj;e.copy(s.hiddenMatrix),s.parent!==null&&e.premultiply(s.parent.matrixWorld),e.invert(),s.position.copy(i),t.reference==="global"&&Q9(s.position,t.limits),s.position.applyMatrix4(e),t.reference==="parent"?Q9(s.position,t.limits):t.reference==="local"&&(gc.copy(t.quat0).invert(),s.position.sub(t.position0),s.position.applyQuaternion(gc),Q9(s.position,t.limits),gc.invert(),s.position.applyQuaternion(gc),s.position.add(t.position0)),e.multiply(r??s.matrixWorld).decompose(ui,s.quaternion,Nr),s.updateMatrix(),s.hasNonUniformScale&&(s.updateMatrixWorld(),s.updateMatrixWorldSVD()),s instanceof ns&&jo(s.parent)&&s.invalidateDownstreamBooleanData(!0)}}(),Ybe=class{constructor(e,t,i,r,s,a,n){this.object=e,this.id=t,this.data=i,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Lr(i,i.dragDropActions.drag,r,s,a,this.object),this.actionsDrop=Lr(i,i.dragDropActions.drop,r,s,a,this.object);let o=[];this.data.objects.forEach(l=>{let h=r.find(l);!h||h.data.visible!==!1&&(o.push(h),n[h.uuid]&&n[h.uuid].forEach(c=>{let u=r.find(c);!u||u.data.visible!==!1&&o.push(u)}))}),this.data.dropDestinations.forEach(l=>{let h=r.find(l);!h||h.data.visible!==!1&&(this.dropDestIds.push(h.uuid),n[h.uuid]&&n[h.uuid].forEach(c=>{let u=r.find(c);!u||u.data.visible!==!1&&this.dropDestIds.push(u.uuid)}))}),this.dragItems=o.map(l=>(this.data.planeMode==="locked"&&(l.userData.lockedPlane=!0),l.userData.worldPosition0=new E().setFromMatrixPosition(l.matrixWorld),{obj:l,fromPosition:new E().setFromMatrixPosition(l.matrixWorld),pointStart:new E,pointEnd:new E,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new E().copy(l.position),quat0:new wt().copy(l.quaternion),snapped:!1,orientationMatrix:new Fe,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){s1(this.actionsDrag),s1(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},Kbe=class extends G1{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=i=>{if(xt.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:r,page:s}=this.eventContext,a=s.raycastWithClones(r);if(this.lastDropDestination=null,a.length===0){this.activeEvent=null;return}for(let n of this.events){let o=0;for(let{obj:l,pointEnd:h,pointStart:c}of n.dragItems){if(l===a[0].object||l===a[0].object.object||Zt.is(l)&&l.isAncestorOf(a[0].object.uuid)){if(n.activeIdx=o,n.activeDragItem.reset=!1,n.activeDragItem.currentDampingFactor=n.data.dampingFactor,n.activeDragItem.snapped=!1,n.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){n.activeDragItem.obj.rigidBody&&n.activeDragItem.obj.rigidBody.setBodyType(2,!0);let u=n.activeDragItem.obj;l.hasNonUniformScale&&l.updateMatrixWorldSVD(),(u.hasNonUniformScale?u.matrixWorldRigid:u.matrixWorld).decompose(ui,gc,Nr),Y9.setFromQuaternion(gc),u.prevR===void 0?(u.prevR=Y9.clone(),u.prevT=ui.clone()):(u.prevR.copy(Y9),u.prevT.copy(ui)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(n.activeDragItem.obj)}this.calcPlaneIntersectPos(l,c,n.data.plane,n.data.referenceFrame),h.copy(c),(this.eventManager.controlsManager.usePhysics&&l.data.physics?.rigidBody==="dynamic"||n.data.drop===!1||n.data.resetOnSnapFail===!1)&&n.activeDragItem.fromPosition.setFromMatrixPosition(n.activeDragItem.obj.matrixWorld),this.activeEvent=n,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}o++}}this.activeEvent=null},this.onPointerMove=i=>{if(xt.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:r,page:s}=this.eventContext,a=s.raycastWithClones(r);if(xt.length===0){let n=!1;for(let o of this.events){for(let{obj:l}of o.dragItems)if(l===a[0]?.object||l===a[0]?.object?.object||Zt.is(l)&&l.isAncestorOf(a[0]?.object.uuid)){switch(n=!0,o.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(n)break}n||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let n=this.activeEvent.activeDragItem;n.snapped=!1;let o;if(this.activeEvent.data.drop&&(o=a.filter(l=>n.obj!==l.object&&!n.obj.isAncestorOf(l.object.uuid)&&!(l.object instanceof Su)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(h=>h===l.object.uuid||s.scene.find(h).isAncestorOf(l.object.uuid))))[0]),o){let l=xD.copy(o.face.normal).applyMatrix3(K9.getNormalMatrix(o.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")n.fromPosition.setFromMatrixPosition(o.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(n.fromPosition.copy(o.point),this.activeEvent.data.snapSurfaceMode==="bbox"){ui.copy(l).applyMatrix3(K9.setFromMatrix4(n.obj.matrixWorld).transpose());let h=n.obj;ui.x>I2?Nr.x=-h.recursiveBBox.min.x:ui.x<-I2&&(Nr.x=-h.recursiveBBox.max.x),ui.y>I2?Nr.y=-h.recursiveBBox.min.y:ui.y<-I2&&(Nr.y=-h.recursiveBBox.max.y),ui.z>I2?Nr.z=-h.recursiveBBox.min.z:ui.z<-I2&&(Nr.z=-h.recursiveBBox.max.z),Nr.applyMatrix3(K9.invert())}else Nr.copy(l).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);n.fromPosition.add(Nr)}this.activeEvent.data.autoOrient&&(ui.set(0,1,0).cross(l),ui.length()<1e-4&&ui.set(-1,0,0).cross(l),Nr.crossVectors(xD,ui),n.orientationMatrix.makeBasis(ui,Nr,l)),n.pointStart.copy(n.fromPosition),n.pointEnd.copy(n.pointStart),n.currentDampingFactor=this.activeEvent.snapDampingFactor,n.snapped=!0,this.lastDropDestination!==o.object&&(this.lastDropDestination=o.object,this.activeEvent.actionsDrop.Transition.forEach(h=>{h.play()}),this.activeEvent.actionsDrop.Animation.forEach(h=>{h.play()}),this.activeEvent.actionsDrop.Audio.forEach(h=>{h.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(h=>{h.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(h=>{h.dispatchThrottled()}))}else n.orientationMatrix.makeRotationFromQuaternion(n.quat0),this.lastDropDestination=null,n.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(n.obj,n.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(l=>{l.stop(),l.object.currentState!==null&&l.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(l=>{l.stop()}),this.activeEvent.actionsDrop.Audio.forEach(l=>{l.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(l=>{l.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(l=>{l.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(l=>l.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(l=>l.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(l=>l.dispatch()),this.activeEvent.actionsDrag.ClearLocalStorage.forEach(l=>l.dispatch()),this.activeEvent.actionsDrag.UserAPI.forEach(l=>l.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(l=>{l.play()}),this.activeEvent.actionsDrag.Animation.forEach(l=>{l.play()}),this.activeEvent.actionsDrag.Audio.forEach(l=>{l.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(l=>{l.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(l=>{l.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(l=>{l.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(l=>{l.stop(),l.object.currentState!==null&&l.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(l=>{l.stop()}))},500),this.updateDragItem(n),n.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=i=>{if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let r=this.activeEvent.activeDragItem.obj.data.physics?.rigidBody==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!r)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&r&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(s=>{s.stop(),s.object.currentState!==null&&s.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(s=>{s.stop()}),this.activeEvent.actionsDrag.Audio.forEach(s=>{s.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(s=>{s.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(s=>s.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(s=>s.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(s=>s.dispatch()),this.activeEvent.actionsDrop.ClearLocalStorage.forEach(s=>s.dispatch()),this.activeEvent.actionsDrop.UserAPI.forEach(s=>s.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}}}connect(){let e={};if(this.eventContext.page.traverseEntity(i=>{i.component&&(e[i.component.uuid]?e[i.component.uuid].push(i.uuid):e[i.component.uuid]=[i.uuid])}),this.eventContext.page.traverseEntity(i=>{i.data?.events.filter(r=>r.data.type==="DragDrop"&&!r.data.disabled).forEach(r=>{this.events.push(new Ybe(i,r.id,r.data,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager,e))})}),!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,i,r){let{getCamera:s,raycaster:a}=this.eventContext;s().getWorldDirection(Ml),Ml.negate();let n=gc.identity();switch(r==="parent"?qbe.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(ui,n,Nr):r==="local"&&e.matrixWorld.decompose(ui,n,Nr),i){case"x":ui.set(1,0,0).applyQuaternion(n),D2.copy(Ml).cross(ui),wn.copy(ui).cross(D2);break;case"y":ui.set(0,1,0).applyQuaternion(n),D2.copy(Ml).cross(ui),wn.copy(ui).cross(D2);break;case"z":ui.set(0,0,1).applyQuaternion(n),D2.copy(Ml).cross(ui),wn.copy(ui).cross(D2);break;case"xy":wn.set(0,0,1).applyQuaternion(n);break;case"yz":wn.set(1,0,0).applyQuaternion(n);break;case"xz":wn.set(0,1,0).applyQuaternion(n);break;case"adaptive":Ml.angleTo(Nr.set(0,1,0))>Math.PI/6?(ui.crossVectors(Nr.set(0,1,0),Ml),wn.crossVectors(ui,Nr)):wn.set(0,1,0);break;default:wn.copy(Ml);break}Vh.setFromMatrixPosition(e.matrixWorld);let o=e.userData.lockedPlane?e.userData.worldPosition0:Vh;if(yD.setFromNormalAndCoplanarPoint(wn,o),!!a.ray.intersectPlane(yD,t)&&(i==="x"||i==="y"||i==="z")){let l=Nr.subVectors(t,o).dot(ui);t.copy(o).addScaledVector(ui,l)}}updateDragItem(e,t=!1){Vh.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?r3.subVectors(e.fromPosition,Vh).divideScalar(e.currentDampingFactor):e.reset==="original"?(r3.subVectors(e.obj.userData.worldPosition0,Vh).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):r3.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(Vh).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?r3.length()<Wbe:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&Xbe(e,r3.add(Vh),this.activeEvent?.data.drop&&this.activeEvent?.data.autoOrient?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},O2=new E,Z9=new E,go=new E,vo=new E,bD=new ds,Qbe=.01,Zbe={type:"requestRender"},Jbe=function(){let e=new E,t=new E;return(i,r,s)=>s>0?(e.subVectors(i,r),e.length()<=s?i:t.copy(r).add(e.normalize().multiplyScalar(s))):r}(),wD=function(){let e=new Fe;return(t,i)=>{t.position.copy(i),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof ns&&jo(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),$be=class{constructor(e,t,i,r,s,a){this.data=e,this.id=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new E,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...F6.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Lr(e,e.actions,r,s,a,i)}},ewe=class extends G1{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.pairOfEventListeners=[],this.onMouseMove=i=>{if(!(xt.length>1)){this.eventContext.updateRaycaster(i);for(let r of this.events)r.target===void 0&&this.updateSingleEvent(r)}},this.onMouseEnter=i=>{for(let r of this.events)r.target===void 0&&(r.isReset=!1,r.currentDampingFactor=r.data.dampingFactor)},this.onMouseLeave=i=>{for(let r of this.events)r.target===void 0&&(r.data.resetOnPointerLeave&&(r.isReset=!0,r.currentDampingFactor=r.resetDampingFactor),this.updateSingleEvent(r))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(r=>{let s=r.data?.events.find(a=>a.data.type==="Follow"&&!a.data.disabled);s&&(!e.data.globalPhysics.usePhysics||r.dataPatched.physics?.rigidBody!=="dynamic")&&this.events.push(new $be(s.data,s.id,r,e,this.eventContext.sharedAssets,this.eventManager))}),!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Vs&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(r.target!==void 0){let s=r.target,a=this.onTargetChange(r);this.pairOfEventListeners.push([s,a]),s.addEventListener("requestRender",a)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Vs&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[i,r]of this.pairOfEventListeners)i.removeEventListener("requestRender",r);for(let i of this.events)i.paused=!0,i.isReset=!1,s1(i.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){this.events.forEach(n=>{n.actions.Create.forEach(o=>{o.dispatchThrottled()})});let{plane:i,limitDistance:r,limitDistanceEnabled:s}=e.data;if(e.object.getWorldPosition(go),e.isReset)vo.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(vo);else{let{getCamera:n,raycaster:o}=this.eventContext;if(i==="custom"?(n().getWorldDirection(Z9),Z9.negate(),O2.copy(Z9)):i==="xy"?O2.set(0,0,1):i==="xz"?O2.set(0,1,0):i==="yz"&&O2.set(1,0,0),bD.setFromNormalAndCoplanarPoint(O2,go),!o.ray.intersectPlane(bD,vo))return}if(!e.isReset){if(vo.distanceTo(e.worldPosition0)>r&&s&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)vo.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(vo.x=go.x),e.data.enabledTranslation[1]===!1&&(vo.y=go.y),e.data.enabledTranslation[2]===!1&&(vo.z=go.z);let a=Jbe(go,vo,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let n=O2.subVectors(a,go).divideScalar(e.currentDampingFactor);go.add(n),t&&wD(e.object,go),e.paused=n.length()<Qbe}else wD(e.object,a),e.paused=!0;e.object?.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(Zbe)}},s3=new E,hm=new E,a3=new Fe,R2=new wt,Cl=new wt,n3=new E,o3=new E,jh=new E,yo=new E,J9=new ds,twe=1e-6,iwe={type:"requestRender"},rwe={type:"changeRotation"},_D=function(){let e=new Fe;return function(t,i){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),i.premultiply(OU(e).invert()),t.rotation.setFromRotationMatrix(i),t.updateMatrix(),t instanceof ns&&jo(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),swe=class{constructor(e,t,i,r){this.id=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new wt,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...N6.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},awe=class extends G1{constructor(){super(...arguments),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=e=>{if(!(xt.length>1)){this._lastMouseEvent=e,this.eventContext.updateRaycaster(e);for(let t of this.events)t.target===void 0&&this.updateSingleEvent(t)}},this.onMouseEnter=e=>{for(let t of this.events)t.target===void 0&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)t.target===void 0&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onScroll=e=>{if(this._lastMouseEvent){let t=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(t)}},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)},this.createUserEventListener=e=>({eventName:t,target:i})=>{if(!t||!i)return;let r=Tf(t);r&&r==="LookAt"&&this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(r=>{let s=r.data?.events.find(a=>a.data.type==="LookAt"&&!a.data.disabled);s&&(!e.data.globalPhysics.usePhysics||r.dataPatched.physics?.rigidBody!=="dynamic")&&this.events.push(new swe(s.data,s.id,r,e))}),!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Vs&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?i.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(r.target!==void 0){let n=this.onTargetChange(r),o=r.target;this.pairOfEventListeners.push([o,n]),o.addEventListener("requestRender",n)}let s=this.createUserEventListener(r),a=r.object;this.pairOfUserEventListeners.push([a,s]),a.addEventListener("userEvent",s)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Vs&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[i,r]of this.pairOfEventListeners)i.removeEventListener("requestRender",r);for(let[i,r]of this.pairOfUserEventListeners)i.removeEventListener("userEvent",r);for(let i of this.events)i.paused=!0,i.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){let{tilt:t,axis:i,distance:r,plane:s,limitDistance:a,enabledRotation:n,limitDistanceEnabled:o}=e.data,{getCamera:l,raycaster:h}=this.eventContext,{object:c,target:u}=e;if(c.getWorldPosition(n3),!e.isReset)if(e.target)e.target.getWorldPosition(o3);else{if(s==="custom"?(l().getWorldDirection(hm),hm.negate(),J9.setFromNormalAndCoplanarPoint(hm,n3)):(s==="xy"?s3.set(0,0,1):s==="xz"?s3.set(0,1,0):s==="yz"&&s3.set(1,0,0),J9.setFromNormalAndCoplanarPoint(s3,n3)),!h.ray.intersectPlane(J9,o3))return;r>0&&(s==="custom"||s===void 0)&&o3.addScaledVector(hm,r)}if(e.isReset||(u?t==="target"?jh.copy(u.up).applyMatrix4(a3.extractRotation(u.matrixWorld)).normalize():n.some(d=>d===!1)?(i==="x"?(yo.set(0,0,1),n[2]===!1&&yo.set(0,1,0)):i==="y"?(yo.set(1,0,0),n[0]===!1&&yo.set(0,0,1)):(yo.set(0,1,0),n[1]===!1&&yo.set(1,0,0)),jh.copy(yo).applyQuaternion(e.worldQuaternion0).normalize()):jh.set(0,1,0):s==="custom"?jh.set(0,1,0):jh.copy(s3)),e.isReset)Cl.copy(e.worldQuaternion0);else if(n3.distanceTo(o3)>a&&o&&u)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Cl.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;nwe(a3,o3,n3,jh,i,yo),Cl.setFromRotationMatrix(a3),R2.setFromUnitVectors(yo.applyQuaternion(Cl),jh),n.some(d=>d===!1)&&t!=="target"&&Cl.premultiply(R2).normalize()}e.currentDampingFactor>1?(c.updateWorldMatrix(!0,!1),R2.setFromRotationMatrix(OU(c.matrixWorld)),R2.slerp(Cl,1/e.currentDampingFactor),_D(c,a3.makeRotationFromQuaternion(R2)),e.paused=8*(1-R2.dot(Cl))<twe):(_D(c,a3.makeRotationFromQuaternion(Cl)),e.paused=!0),e.object?.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),c.dispatchEvent(iwe),c.dispatchEvent(rwe)}},sa=new E,Fr=new E,fr=new E;function nwe(e,t,i,r,s,a){let n=e.elements;fr.subVectors(t,i),fr.lengthSq()===0&&(fr.z=1),fr.normalize(),Fr.crossVectors(r,fr),Fr.lengthSq()===0&&(Math.abs(r.z)===1?fr.x+=1e-4:fr.z+=1e-4,fr.normalize(),Fr.crossVectors(r,fr)),Fr.normalize(),sa.crossVectors(fr,Fr),s==="x"?a.z===1?[Fr,sa,fr]=[fr,Fr,sa]:(Fr.negate(),[Fr,fr]=[fr,Fr]):s==="y"?a.x===1?[Fr,sa,fr]=[sa,fr,Fr]:(Fr.negate(),[sa,fr]=[fr,sa]):a.x===1&&(Fr.negate(),[Fr,sa]=[sa,Fr]),n[0]=Fr.x,n[4]=sa.x,n[8]=fr.x,n[1]=Fr.y,n[5]=sa.y,n[9]=fr.y,n[2]=Fr.z,n[6]=sa.z,n[10]=fr.z}var owe=class{constructor(e,t,i,r,s,a){this.id=e,this.data=t,this.object=i,this.entered=!1,this.actions=Lr(t,t.actions,r,s,a,i)}disconnect(){s1(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatchStart()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Create.forEach(e=>e.dispatchStop()),this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Particles.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Particles.forEach(t=>t.dispatchBasic()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},lwe=class extends G1{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=i=>{xt.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onMouseUp=i=>{xt.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=i=>{xt.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:i,target:r,reverse:s})=>{if(!i||!r)return;let a=Tf(i);a&&a==="MouseHover"&&(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),this.eventsPerObjects[r.uuid]?.forEach(n=>n.dispatchUserEvent(s)))}}connect(){let{page:e,sharedAssets:t}=this.eventContext,i=(s,a)=>{if(!(!s.visible||!s.data?.events.length)){for(let{id:n,data:o}of s.data.events)if(!o.disabled&&o.type==="MouseHover")try{let l=new owe(n,o,s,e,t,this.eventManager);this.eventsPerObjects[s.uuid]?this.eventsPerObjects[s.uuid].push(l):this.eventsPerObjects[s.uuid]=[l]}catch{}this.eventsPerObjects[s.uuid]?.length&&this.objects.push(s instanceof n1?a:s)}};if(e.traverseEntity(s=>{(s instanceof F1||s instanceof $r)&&s.frame?.traverse(a=>{i(a,s)}),i(s)}),!this.objects.length)return;let{domElement:r}=this.eventContext;this.domEventsNeeded.clear(),Vs&&(this.domEventsNeeded.add("pointerdown"),r.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),r.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),r.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(s=>{s.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Vs&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(i=>{i.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:i,raycaster:r,page:s,pointerScreen:a}=this.eventContext,n=!1;if(s.uiCanvas&&(n=Do(s,[a.x,a.y],Object.keys(this.eventsPerObjects),o=>{t.push(o)})),i&&!n){let o=Vm(r,s,this.objects);t=cb(o),o.forEach(l=>{l.object instanceof F1&&Do(l.object,[l?.uv?.x??0,l?.uv?.y??0],Object.keys(this.eventsPerObjects),h=>{t.push(h)})})}else this.objects.forEach(o=>{let l=vv(r,o);l&&(t.push(o),o instanceof F1&&Do(o,[l?.uv?.x??0,l?.uv?.y??0],Object.keys(this.eventsPerObjects),h=>{t.push(h)}))})}this._prevObjects.length&&this._prevObjects.forEach(i=>{t.includes(i)||(i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),this.eventsPerObjects[i.uuid]?.forEach(r=>r.dispatchLeave()))}),t.length&&t.forEach(i=>{i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),this.eventsPerObjects[i.uuid]?.forEach(r=>r.dispatchEnter())}),this._prevObjects=t}},hwe=class{constructor(e,t,i,r,s,a){this.id=e,this.data=t,this.object=i,this.scrollCounter=0,this.actions=Lr(t,t.actions,r,s,a,i)}connect(){this.scrollCounter=0}disconnect(){s1(this.actions)}dispatch(e){this.actions.Transition.forEach(r=>{r.object.currentTransitionEvent!==this&&(r.object.currentTransitionEvent=this,r.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let i=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(r=>r.seek(i)),this.actions.Animation.forEach(r=>r.seek(t)),this.actions.Create.forEach(r=>r.dispatchThrottled()),this.actions.SetVariable.forEach(r=>r.checkConditions()),this.actions.SetVariable.forEach(r=>r.dispatch()),this.actions.DynamicVariablePlay.forEach(r=>r.dispatch()),this.actions.ClearLocalStorage.forEach(r=>r.dispatch()),this.actions.UserAPI.forEach(r=>r.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},cwe=class{constructor(e,t,i,r,s,a,n){this.id=e,this.data=t,this.object=i,this.domElement=a,this.eventManager=n,this.scrollStart=0,this.scrollEnd=0,this.actions=Lr(t,t.actions,r,s,n,i)}getStickyParentElement(){let e=this.domElement;for(;e;){if(window.getComputedStyle(e).position==="sticky")return e;e=e.parentElement}return null}computeScrollBounds(){let e=this.getStickyParentElement(),t=e?.parentElement,i=this.domElement.getBoundingClientRect(),r={top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:i.width,height:i.height};if(t){let h=t.getBoundingClientRect(),c=window.getComputedStyle(e),u=parseFloat(c.marginTop)+parseFloat(c.marginBottom),d=parseFloat(c.top),f=parseFloat(c.bottom),p=h.height-u;if(!isNaN(d))i.top===d?(r.top+=h.top-d,r.bottom+=h.top-d):i.top<0&&(r.top-=p-i.height,r.bottom-=p-i.height);else if(!isNaN(f)){let m=document.body.clientHeight??window.innerHeight,g=window.innerWidth-(document.documentElement.clientWidth??window.innerWidth);i.bottom===m-f?(r.top+=h.top-i.height+f+g,r.bottom+=h.top-i.height+f+g):i.bottom<m-f&&(r.top-=p-i.height,r.bottom-=p-i.height)}}let s=document.body,a=document.documentElement,n=window.pageYOffset||a.scrollTop||s.scrollTop,o=a.clientTop||s.clientTop||0,l=Math.round(r.top+n-o);if(this.data.startFrom==="enter"){let h=window.innerHeight,c=r.height,u=this.data.enterAnchor,d=u==="top"?h:u==="bottom"?h-c:h-c*.5;this.scrollStart=l-d}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=r,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){s1(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(s=>{s.object.currentTransitionEvent!==this&&(s.object.currentTransitionEvent=this,s.init())});let i=this.scrollEnd-this.scrollStart,r=Math.min(1,Math.max(0,(t-this.scrollStart)/i));this.actions.Transition.forEach(s=>s.seek(r)),this.actions.Animation.forEach(s=>s.seek(r)),this.actions.Create.forEach(s=>s.dispatchThrottled()),this.actions.SetVariable.forEach(s=>s.checkConditions()),this.actions.SetVariable.forEach(s=>s.dispatch()),this.actions.DynamicVariablePlay.forEach(s=>s.dispatch()),this.actions.ClearLocalStorage.forEach(s=>s.dispatch()),this.actions.UserAPI.forEach(s=>s.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},uwe=class extends G1{constructor(e,t){super(e),this.managers=t,this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([i,r])=>{r.forEach(s=>s.handleResize())})},this.onScroll=i=>{if(!this.isInview)return;let r={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([s,a])=>{s.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:r}),a.forEach(n=>n.dispatch(r))})},this.onWheel=i=>{!this.isInview||i.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:i.deltaY}),s.forEach(a=>a.dispatch(i.deltaY))})},this.onUserEvent=({eventName:i,target:r,reverse:s})=>{if(!i||!r)return;let a=Tf(i);a&&a==="Scroll"&&(r.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),this.wheelEventsPerObject.get(r)?.forEach(n=>{n.dispatchUserEvent(s)}))}}connect(){let{page:e,sharedAssets:t,domElement:i,isExport:r}=this.eventContext,s=a=>{if(a.data?.events.length){for(let{id:n,data:o}of a.data.events)if(!o.disabled&&o.type==="Scroll")if(o.trigger==="load"||!r){let l=new hwe(n,o,a,e,t,this.managers);this.wheelEventsPerObject.has(a)?this.wheelEventsPerObject.get(a)?.push(l):this.wheelEventsPerObject.set(a,[l])}else{let l=new cwe(n,o,a,e,t,i,this.managers);this.scrollEventsPerObject.has(a)?this.scrollEventsPerObject.get(a)?.push(l):this.scrollEventsPerObject.set(a,[l])}}};e.traverseEntity(a=>{(a instanceof F1||a instanceof $r)&&a.frame?.traverse(n=>{s(n)}),s(a)}),this.intersectionObserver=new IntersectionObserver(a=>{let n=a[0];n&&(this.isInview=n.isIntersecting)},{root:null}),this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([a,n])=>{n.forEach(o=>o.connect()),a.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([a,n])=>{n.forEach(o=>o.connect()),a.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(a=>a.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(a=>a.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},dwe=class{constructor(e,t,i,r,s,a){this.id=e,this.data=t,this.object=i,this.actions=Lr(t,t.actions,r,s,a,i)}disconnect(){s1(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof mc?t.interaction.audioPlayer.play():t.interaction instanceof rb&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let i=t.interaction.data.triggerAfter??"autoplay";i===e&&(t.interaction instanceof $l?t.interaction.play(i==="autoplay"):t.interaction instanceof lb&&t.interaction.dispatch())}),this.actions.Particles.forEach(t=>{(t.data.triggerAfter??"any")===e&&t.dispatchBasic()})}async seekVideos(e){let t=[];this.actions.Video.forEach(i=>{(i.interaction.data.triggerAfter??"autoplay")==="autoplay"&&i.interaction instanceof $l&&t.push(i.interaction.seek(e))}),await Promise.all(t)}pauseVideos(){this.actions.Video.forEach(e=>{e.interaction instanceof $l&&e.interaction.pause()})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof mc?t.interaction.audioPlayer.play():t.interaction instanceof rb&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof $l?t.interaction.play():t.interaction instanceof lb&&t.interaction.dispatch()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()})}},fwe=class extends G1{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(s=>{s.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(s=>{s.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:i,isExport:r}=this.eventContext,s=r?document:i;s.removeEventListener("pointerdown",this.onAny),s.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([a,n])=>{a.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(o=>{o.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(s=>{s.actions.Audio.forEach(a=>{a.interaction instanceof mc&&a.interaction.audioPlayer.play()}),s.actions.Video.forEach(a=>{let n=a.interaction.data.triggerAfter??"autoplay";a.interaction instanceof $l&&a.interaction.play(n==="autoplay")}),s.actions.Particles.forEach(a=>{a.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(s=>{s.dispatchAfter("autoplay")})})},this.seekVideos=async i=>{let r=[];[...this.eventsAfterPerObject.entries()].forEach(([s,a])=>{a.forEach(n=>{r.push(n.seekVideos(i))})}),await Promise.all(r)},this.pauseVideos=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{r.forEach(s=>{s.pauseVideos()})})},this.onUserEvent=({eventName:i,target:r,reverse:s})=>{if(!i||!r)return;let a=Tf(i);a&&a==="Start"&&(r instanceof n1||r.dispatchEvent({type:"beginEvent",eventName:"Start"}),this.eventsPerObject.get(r)?.forEach(n=>{n.dispatchUserEvent(s)}),this.eventsAfterPerObject.get(r)?.forEach(n=>{n.dispatchUserEvent(s)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext,i=r=>{if(r.data?.events.length)for(let{id:s,data:a}of r.data.events){if(a.disabled||a.type!=="Start")continue;let n=new dwe(s,a,r,t,e,this.eventManager);(n.actions.Transition.length||n.actions.Animation.length||n.actions.SwitchCamera.length||n.actions.Create.length||n.actions.Destroy.length||n.actions.SceneTransition.length||n.actions.Reset.length||n.actions.SetVariable.length||n.actions.DynamicVariablePlay.length||n.actions.ClearLocalStorage.length||n.actions.UserAPI.length)&&(this.eventsPerObject.has(r)?this.eventsPerObject.get(r)?.push(n):this.eventsPerObject.set(r,[n])),n.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?this.eventsAfterPerObject.get(r)?.push(n):this.eventsAfterPerObject.set(r,[n])),n.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?this.eventsAfterPerObject.get(r)?.push(n):this.eventsAfterPerObject.set(r,[n])),n.actions.Particles.length&&(this.eventsAfterPerObject.has(r)?this.eventsAfterPerObject.get(r)?.push(n):this.eventsAfterPerObject.set(r,[n]))}};if(t.traverseEntity(r=>{(r instanceof F1||r instanceof $r)&&r.frame?.traverse(s=>{i(s)}),i(r)}),[...this.eventsAfterPerObject.values()].some(r=>r.length)){if(this.eventManager.activateCount===0){let{domElement:r,isExport:s}=this.eventContext,a=s?document:r;a.addEventListener("pointerdown",this.onMouseDown,{once:!0}),a.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),a.addEventListener("pointerdown",this.onAny),a.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([n,o])=>{n.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(a=>a.dispatch()),r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,i=t?document:e;i.removeEventListener("pointerdown",this.onMouseDown),i.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),i.removeEventListener("pointerdown",this.onAny),i.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.removeEventListener("userEvent",this.onUserEvent),s.forEach(a=>a.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(i=>i.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},pwe=class{constructor(e,t,i,r,s,a){this.id=e,this.data=t,this.object=i,this.initialDisabled=!1,this.actions=Lr(t,t.actions,r,s,a,i),this.target=t.target}disconnect(){s1(this.actions)}dispatch(e){this.initialDisabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()))}},mwe=class extends G1{constructor(e,t,i,r,s){super(e),this.sharedVariables=t,this.eventManager=i,this.needsMouse=r,this.needsRaycast=s,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.isOutOfFocus=!1,this.events=[],this.onFrame=a=>{let n=this.eventContext.sharedAssets;if(this.rafId=window.requestAnimationFrame(this.onFrame),this.isOutOfFocus)return;let o=new Date,l=[],h=[];for(let d=0;d<this.propertiesToWatch.length;d++){let{objectId:f,property:p,prevValue:m}=this.propertiesToWatch[d],g=this.eventContext.scene.find(f),v=V6.propertyPaths[p];if(v[0]==="width"||v[0]==="height"||v[0]==="depth")g=g.geometry.userData.parameters[v[0]];else for(let y=0;y<v.length;y++)g=g[v[y]];m===null?this.propertiesToWatch[d].prevValue=g instanceof E?g.clone():g:(g instanceof E?!g.equals(m):m!==g)&&(h.push({objId:f,property:p}),g instanceof E?this.propertiesToWatch[d].prevValue.copy(g):this.propertiesToWatch[d].prevValue=g)}for(let d=0;d<this.variablesToWatch.length;d++){let{id:f,prevValue:p}=this.variablesToWatch[d],m=n.getVariable(f);m!==p&&(l.push(f),this.variablesToWatch[d].prevValue=m)}for(let d=0;d<this.dynamicVars.length;d++){let{id:f,expectedTime:p,last:m,data:g,timerSeconds:v,startValue:y}=this.dynamicVars[d],x=1e3;if((g.dynamicVariableType==="timer"||g.dynamicVariableType==="stopwatch")&&g.format==="number3decimal"?x=1:g.dynamicVariableType==="counter"?x=g.updateInterval:g.dynamicVariableType==="random"&&(x=g.isStatic?1/0:g.updateInterval),p===-1){this.dynamicVars[d].last=a,this.dynamicVars[d].expectedTime=a+x;continue}if(!((n.getDynamicVariablePlayState(f)==="Stopped"||n.getDynamicVariablePlayState(f)==="Restarted")&&(this.dynamicVars[d].last=a,this.dynamicVars[d].expectedTime=a+x,g.dynamicVariableType==="counter"&&n.getVariable(f)!==y&&(n.updateVariable(f,y),this.eventManager.requestRender()),(g.dynamicVariableType==="timer"||g.dynamicVariableType==="stopwatch")&&this.dynamicVars[d].timerSeconds!==y&&(this.dynamicVars[d].timerSeconds=y,n.updateVariable(f,ha.getFormattedTimerTime(y,g)),this.eventManager.requestRender()),n.getDynamicVariablePlayState(f)==="Restarted"&&n.setDynamicVariablePlayState(f,"Playing"),n.getDynamicVariablePlayState(f)==="Stopped"))){if(n.getDynamicVariablePlayState(f)==="Paused"){this.dynamicVars[d].deltaToExpectedTime===void 0&&(this.dynamicVars[d].deltaToExpectedTime=Math.max(this.dynamicVars[d].expectedTime-a,0)),this.dynamicVars[d].last=a-(x-this.dynamicVars[d].deltaToExpectedTime),this.dynamicVars[d].expectedTime=a+this.dynamicVars[d].deltaToExpectedTime;continue}else this.dynamicVars[d].deltaToExpectedTime=void 0;if(a>=p)if(this.dynamicVars[d].last=a,this.dynamicVars[d].expectedTime+=x,g.dynamicVariableType==="random"){let w=g.min+Math.random()*(g.max-g.min),_=g.decimals;w=Math.round(w*Math.pow(10,_))/Math.pow(10,_),n.updateVariable(f,w),l.push(f),this.eventManager.requestRender()}else if(g.dynamicVariableType==="counter"){let w=n.getVariable(f),_=n.getDynamicVariableToggleIsForward(f)??!0,b=n.getVariable(f)+g.increment*(_?1:-1);g.hasEnd&&(b=g.increment>0?Ke.clamp(b,y,g.endValue):Ke.clamp(b,g.endValue,y),b===y&&n.setDynamicVariableToggleIsForward(f,void 0),g.repeat?b===g.endValue&&(b=y):(b===y||b===g.endValue)&&n.setDynamicVariablePlayState(f,"Paused")),b!==w&&(l.push(f),n.updateVariable(f,b),this.eventManager.requestRender())}else if(g.dynamicVariableType==="time"){let w=n.getVariable(f),_=BT(o,g);if(typeof w=="object"&&"textValue"in w&&typeof _=="object"&&"textValue"in _){if(Array.isArray(w.textValue)&&Array.isArray(_.textValue)){if(w.textValue.every((b,M)=>b===_.textValue[M]))continue}else if(w.textValue===_.textValue)continue}else if(w===_)continue;n.updateVariable(f,_),l.push(f),this.eventManager.requestRender()}else{let w=w1.isTextValue(g.endValue)?SD(g.endValue.textValue):g.endValue,_=n.getDynamicVariableToggleIsForward(f)??!0,b=v+(a-m)/1e3*(g.dynamicVariableType==="timer"?-1:1)*(_?1:-1);b=Math.max(b,0),g.hasEnd&&(b=g.dynamicVariableType==="stopwatch"?Ke.clamp(b,y,w):Ke.clamp(b,w,y),b===y&&n.setDynamicVariableToggleIsForward(f,void 0),g.repeat?Math.abs(b-w)<(g.format==="number3decimal"?1e-4:.1)&&(b=y):(Math.abs(b-y)<(g.format==="number3decimal"?1e-4:.1)||Math.abs(b-w)<(g.format==="number3decimal"?1e-4:.1))&&n.setDynamicVariablePlayState(f,"Paused")),b!==v&&(l.push(f),this.dynamicVars[d].timerSeconds=b,n.updateVariable(f,ha.getFormattedTimerTime(b,g)),this.eventManager.requestRender())}}}let c=!1;n.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=n.mouseProperty,c=!0);let u=!1;n.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=n.raycastProperty,u=!0),this.events.forEach(d=>{(l.includes(d.data.variableId)||h.find(f=>f.objId===d.data.objectId&&f.property===d.data.property)||d.data.variableId==="mouseProperty"&&c||d.data.variableId==="raycastProperty"&&u)&&(d.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()}}pause(){this.isOutOfFocus||(this.isOutOfFocus=!0,this.pauseTime=Date.now())}resume(){if(!this.isOutOfFocus)return;this.isOutOfFocus=!1;let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.eventContext.page.traverseEntity(t=>{t.data?.events.filter(i=>i.data.type==="VariableChange"&&!i.data.disabled).forEach(i=>{this.events.push(new gwe(i.id,i.data,t,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.propertiesToWatch=this.events.filter(t=>t.data.variableId==="objectProperty"&&t.data.objectId!==null).map(t=>({objectId:t.data.objectId,property:t.data.property,prevValue:null}));let e=this.eventContext.sharedAssets;this.sharedVariables.forEach(({id:t,data:i})=>{if(!("dynamicVariableType"in i)){this.events.find(s=>s.data.variableId===t)&&this.variablesToWatch.push({id:t,prevValue:e.getVariable(t)});return}let r;if(i.dynamicVariableType==="timer"||i.dynamicVariableType==="stopwatch"){let s;if(w1.isTextValue(i.value)&&Array.isArray(i.value.textValue)){let a=i.value.textValue;a.length===3?s=a[2]+a[1]*60+a[0]*3600:s=a[1]+a[0]*60}else s=i.value;r=s,this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:i,timerSeconds:s,startValue:r})}else i.dynamicVariableType==="time"&&e.updateVariable(t,BT(new Date,i)),i.dynamicVariableType==="counter"&&(r=w1.isTextValue(i.value)?SD(i.value.textValue):i.value),this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:i,startValue:r})}),this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},gwe=class{constructor(e,t,i,r,s,a){this.id=e,this.data=t,this.object=i,this.actions=Lr(t,t.actions,r,s,a,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispose(){s1(this.actions)}};function SD(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var vwe="https://unpkg.com/@splinetool/runtime@1.10.37/build/",ywe="https://unpkg.com/@splinetool/navmesh-wasm@1.10.37/build/",xwe=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${vwe}' + 'navmesh.js'),
		fetch('${ywe}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,bwe=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,wwe=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,_we=.001,Swe={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},FU,Kt,u1;vde.then(e=>{FU=e,Kt=new e.Vec3,u1=new e.Vec3});var Awe=new E,Mwe=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=i=>{if(xt.length!==1)return;let{raycaster:r,page:s}=this.eventContext;this.eventContext.updateRaycaster(i);let a=s.raycastWithClones(r);if(a.length!==0){if(this.gameControl){let n=Awe.copy(this.gameControl.colliderWorldPosition);n.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(n,a[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(i,r)=>s=>{let a;if(s instanceof va)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;a=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof _1)a=s.object;else if(a=s,a.dataPatched.cloner?.disabled===!1&&a.dataPatched.cloner?.hideBase&&a.dataPatched.physics?.fusedBody!==!0)return!0;if(r&&!a.userData.navmesh)return;let n=a.dataPatched;if(!n.visible&&n.physics?.enabled!==!0)return!0;s.updateMatrixWorldSVD();let o=yv(n),l=a.userData.hasDestroy,h=a.userData.hasDrag,c=!1,u=!1;for(let d of n.events)d.data.disabled!==!0&&(d.data.type==="GameControl"?c=!0:d.data.type==="Follow"&&(u=!0));if(c||o||u||l||h)return!0;if(this.usePhysics&&n.physics?.rigidBody==="dynamic"){if(this.usePhysics&&n.physics?.fusedBody)return!0}else if("geometry"in s&&s.geometry&&i.push(Po(s.geometry,s.matrixWorld)),this.usePhysics&&n.physics?.fusedBody)return s.traverseObject((d,f)=>{if(f===0)return;let p;if(d instanceof va)if(d.objectForSample){if(d.objectForSample.dataPatched.physics.fusedBody)return;p=d.object}else return d.object.dataPatched.physics.fusedBody===!0&&d.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(d instanceof _1)p=d.object;else if(p=d,d.dataPatched.cloner?.hideBase)return!0;let m=p.dataPatched;if(!m.visible&&m.physics?.enabled!==!0)return!0;"geometry"in d&&d.geometry&&i.push(Po(d.geometry,d.matrixWorld))}),!0},this.traverseNoPhysics=(i,r)=>s=>{let a;if(s instanceof va)return;s instanceof _1?a=s.object:a=s;let n=a.dataPatched;if(n.physics.enabled==="visibility"?!n.visible:!n.physics.enabled)return!0;if(r&&!a.userData.navmesh)return;let o=s.geometry,l=a.userData.hasDestroy===!0,h=a.userData.hasDrag===!0;if(yv(n)||l||h||a.dataPatched.events.some(c=>c.data.disabled!==!0&&c.data.type==="GameControl"))return!0;o&&i.push(Po(o,s.matrixWorld))},this.navmeshWasm=FU,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?xwe:bwe)+wwe])),this._worker=new Worker(this._workerURL)}init(e,t,i){this.gameControl=t,this.eventContext=i,this.setDefaultQueryExtent(new E().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(i.page,e,r=>{this.buildFromNavmeshData(r.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,i){t.objects.forEach(l=>{let h=e.scene.find(l);h.traverseEntity(c=>{c.userData.navmesh=!0}),h.cloner?.traverseObject(c=>{c.userData.navmesh=!0})});let r=[],s=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(r,t.zones==="custom");if(e.traverseChildren(s),t.objects.forEach(l=>{let h=e.scene.find(l);h.traverseEntity(c=>{c.userData.navmesh=void 0}),h.cloner?.traverseObject(c=>{c.userData.navmesh=void 0})}),r.length===0)return!1;let a=pc(r),{positions:n,triIndices:o}=s4(a.getAttribute("position"),a.getIndex());return this._worker.postMessage([n,n.length/3,o,o.length,{...Swe,...t}]),this._worker.onmessage=i,!0}createDebugNavGeometry(){let e,t,i=this.navMesh.getDebugNavMesh(),r=i.getTriangleCount(),s=new Uint32Array(r*3),a=new Float32Array(r*3*3);for(e=0;e<r*3;e++)s[e]=e;for(e=0;e<r;e++)for(t=0;t<3;t++){let o=i.getTriangle(e).getPoint(t);a[e*9+t*3+0]=o.x,a[e*9+t*3+1]=o.y,a[e*9+t*3+2]=o.z}let n=new rt;return n.setIndex(new mt(s,1)),n.setAttribute("position",new mt(a,3)),n}getClosestPoint(e){return Kt.x=e.x,Kt.y=e.y,Kt.z=e.z,this.navMesh.getClosestPoint(Kt)}getClosestPointToRef(e,t){Kt.x=e.x,Kt.y=e.y,Kt.z=e.z;let i=this.navMesh.getClosestPoint(Kt);t.set(i.x,i.y,i.z)}getRandomPointAround(e,t){return Kt.x=e.x,Kt.y=e.y,Kt.z=e.z,this.navMesh.getRandomPointAround(Kt,t)}getRandomPointAroundToRef(e,t,i){Kt.x=e.x,Kt.y=e.y,Kt.z=e.z;let r=this.navMesh.getRandomPointAround(Kt,t);i.set(r.x,r.y,r.z)}moveAlong(e,t){return Kt.x=e.x,Kt.y=e.y,Kt.z=e.z,u1.x=t.x,u1.y=t.y,u1.z=t.z,this.navMesh.moveAlong(Kt,u1)}moveAlongToRef(e,t,i){return Kt.x=e.x,Kt.y=e.y,Kt.z=e.z,u1.x=t.x,u1.y=t.y,u1.z=t.z,this.navMesh.moveAlong(Kt,u1)}computePath(e,t){let i=this.getClosestPoint(t);if(u1.x=i.x,u1.y=i.y,u1.z=i.z,Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)+Math.pow(t.z-i.z,2))>this.getDefaultQueryExtent().y)return[];this.getClosestPoint(e);let r=this.navMesh.computePath(Kt,u1),s=r.getPointCount(),a=[];for(let n=0;n<s;n++){let o=r.getPoint(n);a.push(new E(o.x,o.y,o.z))}return a}createCrowd(e,t){return new Cwe(this,e,t)}setDefaultQueryExtent(e){Kt.x=e.x,Kt.y=e.y,Kt.z=e.z,this.navMesh.setDefaultQueryExtent(Kt)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,i=this.navmeshWasm._malloc(t),r=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,i,t);r.set(e);let s=new this.navmeshWasm.NavmeshData;s.dataPointer=r.byteOffset,s.size=e.length,this.navMesh.buildFromNavmeshData(s),this.navmeshWasm._free(r.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),i=new Uint8Array(e.size);return i.set(t),this.navMesh.freeNavmeshData(e),i}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),this.eventContext?.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,i){return Kt.x=e.x,Kt.y=e.y,Kt.z=e.z,this.navMesh.addCylinderObstacle(Kt,t,i)}addBoxObstacle(e,t,i){return Kt.x=e.x,Kt.y=e.y,Kt.z=e.z,u1.x=t.x,u1.y=t.y,u1.z=t.z,this.navMesh.addBoxObstacle(Kt,u1,i)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},Cwe=class{constructor(e,t,i){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,i,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,i){let r=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;r.radius=t.radius,r.height=t.height,r.maxAcceleration=t.maxAcceleration,r.maxSpeed=t.maxSpeed,r.collisionQueryRange=t.collisionQueryRange,r.pathOptimizationRange=t.pathOptimizationRange,r.separationWeight=t.separationWeight,r.updateFlags=7,r.obstacleAvoidanceType=0,r.queryFilterType=0,r.userData=0;let s=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),r);return this.transforms.push(i),this.agents.push(s),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new E(0,0,0)),s}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let i=this.crowd.getAgentPosition(e);t.set(i.x,i.y,i.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let i=this.crowd.getAgentVelocity(e);t.set(i.x,i.y,i.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let i=this.crowd.getAgentNextTargetPath(e);t.set(i.x,i.y,i.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let i=this.agents.indexOf(e);i>-1&&(this._agentDestinationArmed[i]=!0,this._agentDestination[i].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let i=this.crowd.getAgentParameters(e);t.radius!==void 0&&(i.radius=t.radius),t.height!==void 0&&(i.height=t.height),t.maxAcceleration!==void 0&&(i.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(i.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(i.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(i.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(i.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,i)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=_we)return;let t=1/60,i=10;{let r=Math.floor(e/t);r>i&&(r=i),r<1&&(r=1);let s=e/r;for(let a=0;a<r;a++)this.crowd.update(s)}for(let r=0;r<this.agents.length;r++){let s=this.agents[r],a=this.getAgentPosition(s);if(this.transforms[r].copy(a),this._agentDestinationArmed[r]){let n=a.x-this._agentDestination[r].x,o=a.z-this._agentDestination[r].z,l=this.reachRadii[r],h=this._agentDestination[r].y-this.reachRadii[r],c=this._agentDestination[r].y+this.reachRadii[r],u=n*n+o*o;a.y>h&&a.y<c&&u<l*l&&(this.onReachTarget(s,this._agentDestination[r]),this._agentDestinationArmed[r]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,i=this.crowd.getCorners(e),r=i.getPointCount(),s=[];for(t=0;t<r;t++){let a=i.getPoint(t);s.push(new E(a.x,a.y,a.z))}return s}dispose(){this.crowd.destroy()}};function Ewe(e){let t=!1;return e.scene.objects.forEach(i=>{i.data.type==="Page"&&!t&&i.data.publish.gameControlObject&&Hd.traverseModuleInstances(e,i.id,(r,s,a)=>{for(let n of a)n.data.type==="GameControl"&&n.data.navmesh.enabled&&(t=!0)})}),t}var Twe={type:"change"},AD={type:"changeZoom"},Pwe={type:"changePan"},Gh={type:"start"},Hh={type:"end",changed:!0},Dwe={type:"end",changed:!1},$9=new wt,MD=new re,Iwe=2*Math.PI,Owe=1e-8,Rwe=.01,e5=new E,cm=new re,t5=new E,um=new wt,CD=new Fe,Lwe={type:"requestRender"},NU=class extends C1{constructor(e,t,i={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=i,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,$s.DOLLY_ROTATE,$s.PAN],this.offset=new E,this.eye=new E,this.lastPosition=new E,this.lastQuaternion=new wt,this.current=new re,this.overShoot=new re,this.overRatio=new re,this.spherical=new eE,this.sphericalDelta=new eE,this.panOffset=new E,this.panLeftV=new E,this.panUpV=new E,this.panV=new E,this.rotateStart=new re,this.rotateEnd=new re,this.rotateDelta=new re,this.panStart=new re,this.panEnd=new re,this.panDelta=new re,this.dollyStart=new re,this.dollyEnd=new re,this.dollyDelta=new re,this.rotationRangeFactor=new re,this.panRangeFactor=new re,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.isCurrentlyDamping=!1,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=r=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=r.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(t5,um,e5),this.offset.copy(t5).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&this.object.isPerspectiveCamera&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion($9.copy(um).invert()),this.panOffset.applyQuaternion($9),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(um),this.panOffset.applyQuaternion(um)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),t5.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(CD.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(CD));let r=this.spherical.phi%Iwe;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(yi.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),r>0&&r>Math.PI||r<0&&r>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let s=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-s,this.sphericalDelta.phi*=1-s}else this.sphericalDelta.set(0,0,0);if(this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>Rwe||8*(1-this.lastQuaternion.dot(this.object.quaternion))>Owe){this.dispatchEvent(Twe),this.object.dispatchEvent(Lwe),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,this.isCurrentlyDamping=!0;return}this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),this.isCurrentlyDamping=!1},this.onPointerDown=r=>{this.enabled!==!1&&(r.pointerType==="touch"||r.pointerType==="pen"&&Vs?this.onPointerDownTouch(r):this.onPointerDownMouse(r),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(Gh),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),r.stopPropagation(),r.pointerType==="touch"||r.pointerType==="pen"&&Vs||this.domElement.setPointerCapture(r.pointerId)))},this.onPointerLeave=r=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,e5.subVectors(this.position0,this.target0),this.spherical.setFromVector3(e5),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=r},this.onPointerEnter=r=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?cm.set(r.clientX-this.domElement.clientWidth/2,r.clientY-this.domElement.clientHeight/2):cm.set(r.clientX-this.pointerLeaveEvent.clientX,r.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(cm).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(MD,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(r.clientX,r.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(cm).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(r.clientX,r.clientY)),this.update()},this.onPointerMove=r=>{this.enabled!==!1&&(this.checkRaycastLock()||(r.pointerType==="touch"||r.pointerType==="pen"&&Vs?this.onPointerMoveTouch(r):this.onPointerMoveMouse(r),r.stopPropagation()))},this.onPointerUp=r=>{this.isPointerDown=!1,xt.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),xt.length>1&&r.preventDefault(),this.hasChange?this.dispatchEvent(Hh):this.dispatchEvent(Dwe),this.state=-1,r&&(r.stopPropagation(),r.pointerType==="touch"||r.pointerType==="pen"&&Vs||this.domElement.releasePointerCapture(r.pointerId))},this.onPointerDownMouse=r=>{let s;switch(this.useKeyEvents?s=this.mouseButtons[r.button]:s=this.mouseButtonsPlay[r.button],s){case 0:if(r.altKey===!0&&!r.shiftKey&&!wp(r)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2;break;case 3:if(wp(r)||r.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}break;case 5:if(wp(r)||r.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=r=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(r);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(r);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(r);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=r=>{switch(xt.length>1&&r.preventDefault(),this.touches[xt.length-1]){case $s.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case $s.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case $s.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case $s.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=r=>{switch(xt.length>1&&r.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(r),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(r),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(r),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(r),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=Nd(()=>this.dispatchEvent(Hh),33),this.onMouseWheel=r=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&r.preventDefault(),this.dispatchEvent(Gh),this.handleMouseWheel(r),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=r=>{if(r.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!bf)if(r.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(Gh),r.scale>this.prevScale?this.dollyIn(this.getZoomScale()):r.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=r.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(Hh)},this.onContextMenu=r=>{r.preventDefault()},this.onTouchEnd=r=>{r.preventDefault()},this.onKeyDown=r=>{this.enabled!==!1&&(this.key=r.key,r.key===" "&&this.dispatchEvent(Gh))},this.onKeyUp=r=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&r.key==="Alt"&&this.onPointerUp(xt[0]),r.key===" "&&this.dispatchEvent(Hh))},this.onPointerHover=r=>{r.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(r,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(r,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=r=>{r.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.initialSphericalRadius=this.spherical.radius,this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let i=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=i**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/this.maxZoom,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let r=this.object.getTarget().applyQuaternion($9.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+r.y,this.maxV=e.panVerticalOffset.max+r.y,this.minH=-e.panHorizontalOffset.min+r.x,this.maxH=e.panHorizontalOffset.max+r.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=_n(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=_n(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=_n(_n(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=_n(_n(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=$s.ROTATE),e.panTouches===1&&(this.touches[0]=$s.PAN),e.orbitTouches===2&&(this.touches[1]=$s.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=$s.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=$s.ROTATE),e.panTouches===3&&(this.touches[2]=$s.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,i,r,s,a,n,o){this.overShoot.set(0,0);let l,h,c;e instanceof E?(l=e.x,h=e.y,this.current.set(this.target.x,this.target.y),c=!0):(l=e.theta,h=e.phi,this.current.set(_n(this.spherical.theta),_n(this.spherical.phi)),c=!1),i===0&&(this.current.x+=l,this.current.y+=h),(t===3||t===2)&&(!c&&this.isThetaFlipped?this.current.x>r&&this.current.x<0?this.overShoot.x=r-this.current.x:this.current.x<s&&this.current.x>0&&(this.overShoot.x=s-this.current.x):this.current.x>r?this.overShoot.x=r-this.current.x:this.current.x<s&&(this.overShoot.x=s-this.current.x)),(t===3||t===1)&&(this.current.y>a?this.overShoot.y=a-this.current.y:this.current.y<n&&(this.overShoot.y=n-this.current.y)),c||(this.overShoot.x=_n(this.overShoot.x),this.overShoot.y=_n(this.overShoot.y)),i!==0?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),i===1&&(this.overRatio.x=ED(Math.abs(this.overRatio.x)),this.overRatio.y=ED(Math.abs(this.overRatio.y))),this.isPointerDown||i===1?i===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),h*this.overShoot.y<0&&!this.phiIsFree&&(h*=1-this.overRatio.y)):i===2&&(!c&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||c&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(h=this.overShoot.y*.05),c?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):c?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,h+=this.overShoot.y),e instanceof E?(e.x=l,e.y=h):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=h))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let i=this.domElement;if(i&&this.object.isPerspectiveCamera){let r=this.object.position;this.panV.copy(r).sub(this.target);let s=this.panV.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*s/i.clientHeight,this.object.matrixWorld),this.panUp(2*t*s/i.clientHeight,this.object.matrixWorld)}else i&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrixWorld));this.dispatchEvent(Pwe)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(AD)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(AD)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Gh),this.dollyOut(e),this.dispatchEvent(Hh)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Gh),this.dollyIn(e),this.dispatchEvent(Hh)}setZoom(e){if(this.dispatchEvent(Gh),this.object.isPerspectiveCamera){let t=this.initialSphericalRadius/e/this.spherical.radius;this.scale=t}else this.object.isOrthographicCamera&&(this.object.zoom=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0);this.dispatchEvent(Hh)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(MD,-this.object.angleOffsetFromUp);let i=this.domElement,r=this.useWindowEvents?window.innerHeight:i.clientHeight,s=2*Math.PI*this.rotateDelta.x/r,a=2*Math.PI*this.rotateDelta.y/r;this.rotateLeft(s),this.rotateUp(a),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(ude===!1&&wp(e)===!1&&fde(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1||this.gesture)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(xt.length===2){let e=.5*(xt[0].pageX+xt[1].pageX),t=.5*(xt[0].pageY+xt[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(xt[0].pageX,xt[0].pageY)}handleTouchStartPan(){if(xt.length===2){let e=.5*(xt[0].pageX+xt[1].pageX),t=.5*(xt[0].pageY+xt[1].pageY);this.panStart.set(e,t)}else this.panStart.set(xt[0].pageX,xt[0].pageY)}handleTouchStartDolly(){let e=xt[0].pageX-xt[1].pageX,t=xt[0].pageY-xt[1].pageY,i=Math.sqrt(e*e+t*t);this.dollyStart.set(0,i)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(xt.length===2){let i=Hy(e),r=.5*(e.pageX+i.x),s=.5*(e.pageY+i.y);this.rotateEnd.set(r,s)}else{if(e.pointerId!==xt[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(xt.length===2){let t=Hy(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this.panEnd.set(i,r)}else{if(e.pointerId!==xt[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=Hy(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this.dollyEnd.set(0,s),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let e=this.options?.showCameraLock;return e&&e(),!0}}else return!1}};function _n(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function ED(e){return 1-Math.pow(1-e,4)}var TD=class{constructor(e,t,i,r,s,a){this.id=e,this.data=t,this.object=i,this.page=r,this.currentIntersectedObjects=[],this.actions=Lr(t,t.actions,r,s,a,i),this.target=t.target,this.triggeringObjects=[];for(let n of t.triggeringObjects){let o=r.scene.find(n);o&&this.triggeringObjects.push(o)}}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){s1(this.actions)}dispatch(){this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.actions.Transition.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.SwitchCamera.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}},ii;xde.then(e=>ii=e);var Sr=new E,Ua=new wt,El=new E,i5=new Vr(0,0,0,"YXZ"),PD=new Vr(0,0,0,"XYZ"),Va=new E,r5=new E,s5=new E(1,1,1),L2=new wt,dm=new Fe,DD=new Fe,zwe={type:"updateMatrix"},ID=new wt,a5=new Cs,ub={type:"beginEvent",eventName:"Collision"},Bwe={type:"beginEvent",eventName:"Trigger"};function kwe(e){if(Hd.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((i,r)=>{if(r.events){if(Array.isArray(r.events)){for(let s of r.events)if(s.data.disabled!==!0&&s.data.type==="GameControl"&&s.data.collisionEnabled){t=!0;break}}else for(let s of Object.values(r.events))if(s.disabled!==!0&&s.type==="GameControl"&&s.collisionEnabled){t=!0;break}}}),t}var yv=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),Fwe=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.skipRender=!0,this.processRigidBody=t=>{if(t.bodyType()!==ii.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[i,r,s]=this.rigidBodyToMesh.get(t.handle);if(Sr.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),Ua.copy(t.rotation()),i.matrixWorld.compose(Sr,Ua,r),i.hasNonUniformScale&&i.matrixWorld.multiply(i.shearScale),i.dispatchEvent(zwe),s){let a=i.cloner;if(a&&a.objectForSample===void 0){a.matrixWorld.copy(i.matrixWorld);for(let n of a.children)n.updateMatrixWorld(!0)}for(let n of i.children)n.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,i,r)=>{if(r===!1)return;let s,a;if(this.sensorToTriggerEvent[t]?(s=this.sensorToTriggerEvent[t],a=this.sharedGameControlGlobals.colliderToEntity.get(i)):this.sensorToTriggerEvent[i]&&(s=this.sensorToTriggerEvent[i],a=this.sharedGameControlGlobals.colliderToEntity.get(t)),s&&a&&s.isValidTriggeringObject(a)){s.dispatch();return}for(let n=this.sharedGameControlGlobals.createdObjects.length-1;n>=0;n--){let o=this.sharedGameControlGlobals.createdObjects[n];if(o.userData.hasCollisionDestroy&&(o.rigidBody?.collider(0).handle===t||o.rigidBody?.collider(0).handle===i)){this.sharedGameControlGlobals.createdObjects.splice(n,1),o.removeFromParent(),requestAnimationFrame(()=>this.sharedGameControlGlobals.rapierWorld?.removeRigidBody(o.rigidBody));break}}if(this.gameControl?.object!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(t)){let n=this.sharedGameControlGlobals.colliderToEntity.get(i),o=this.sharedGameControlGlobals.entityToCollisionEvents[n.uuid];if(o===void 0)return;for(let l of o)l.data.target==="character"&&this.dispatchCollisionEvent(l,n,i)}else if(this.gameControl?.object!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(i)){let n=this.sharedGameControlGlobals.colliderToEntity.get(t),o=this.sharedGameControlGlobals.entityToCollisionEvents[n.uuid];if(o===void 0)return;for(let l of o)l.data.target==="character"&&this.dispatchCollisionEvent(l,n,t)}else{let n=this.sharedGameControlGlobals.colliderToEntity.get(t),o=this.sharedGameControlGlobals.entityToCollisionEvents[n.uuid];if(o!==void 0)for(let c of o)c.data.target==="scene"&&this.dispatchCollisionEvent(c,n,t);let l=this.sharedGameControlGlobals.colliderToEntity.get(i),h=this.sharedGameControlGlobals.entityToCollisionEvents[l?.uuid];if(h!==void 0)for(let c of h)c.data.target==="scene"&&this.dispatchCollisionEvent(c,l,i)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=PU,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",i=>{"gamepad"in i.data&&"axes"in i.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(i.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let i of t.events){if(i.data.disabled===!0)continue;let r=i.data.actions?.find(s=>s.data.type==="Destroy")?.data;if(r)for(let s of r.objects){let a=this.page.scene.find(s);a&&(a.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let i of t.events)if(!(i.data.disabled===!0||i.data.type!=="DragDrop"))for(let r of i.data.objects){let s=this.page.scene.find(r);s&&(s.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{let i,r=t instanceof td,s=t instanceof id;if(t instanceof va||r||s)return;t instanceof _1?i=t.object:i=t;let a=i.dataPatched;if(a.physics?.enabled==="visibility"?!a.visible:!a.physics?.enabled)return!0;let n=t.geometry,o=i.userData.hasDestroy===!0,l=i.userData.hasDrag===!0;if(yv(a)||o||l||i.dataPatched.events.some(h=>h.data.disabled!==!0&&(h.data.type==="GameControl"||h.data.type==="Follow")))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;n&&e.push(Po(n,t.matrixWorld))}),e.length>0){let t=pc(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new $3(t)}}addRigidBody(e,t,i){if(IU(e.matrixWorld))return;let r=[],s="geometry"in e?e.geometry:void 0,a=t.dataPatched;if(s?.getAttribute("position")!==void 0&&r.push(Po(s,e.shearScale)),a.physics.fusedBody){let n=this.gatherChildrenGeom(e,r);e.traverseObject(n),e.children.forEach(l=>l.updateMatrixWorld(!0));let o=e.cloner;o&&o.objectForSample===void 0&&a.physics.rigidBody==="dynamic"&&(o.traverseObject(n),o.children.forEach(l=>l.updateMatrixWorld(!0)))}if(r.length>0){let n,o=!i.fromCreate&&a.physics.rigidBody==="dynamic"||i.fromCreate&&i.dynamic;o?(n=ii.RigidBodyDesc.dynamic(),n.setLinearDamping(a.physics.damping).setAngularDamping(a.physics.damping).setAdditionalMass(1e-9).setGravityScale(a.physics.gravityScale).enabledRotations(...a.physics.enabledRotation).enabledTranslations(...a.physics.enabledTranslation)):(i.hasTransformAnim||i.hasFollow||i.hasDrag)&&!i.fromCreate?(n=ii.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):n=ii.RigidBodyDesc.fixed();let l=pc(r);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Sr,Ua,El),e.position0=Sr.clone().divideScalar(this.pixelsPerMeter),e.rotation0=Ua.clone(),Sr.divideScalar(this.pixelsPerMeter),n.setTranslation(Sr.x,Sr.y,Sr.z).setRotation(Ua),s?l?.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l?.scale(El.x/this.pixelsPerMeter,El.y/this.pixelsPerMeter,El.z/this.pixelsPerMeter);let h=this.sharedGameControlGlobals.rapierWorld.createRigidBody(n);o&&this.rigidBodyToMesh.set(h.handle,[e,El.clone(),a.physics.fusedBody]);let c=!(a.geometry===void 0||a.geometry.type==="SubdivGeometry"||a.geometry.type==="NonParametricGeometry"||a.geometry.type==="BooleanGeometry"||a.geometry.type==="VectorGeometry"||a.geometry.type==="StarGeometry"||a.geometry.type==="RectangleGeometry"||a.geometry.type==="EllipseGeometry"||a.geometry.type==="TriangleGeometry"||a.geometry.type==="TorusGeometry"||a.geometry.type==="HelixGeometry");try{this.addCollider(h,a.physics,l,t,c)}catch{try{this.addCollider(h,a.physics,l,t,!1)}catch(u){console.error(u)}}e.rigidBody=h}}addBoundsTree(e){let t=[];if(e.geometry?.getAttribute("position")!==void 0&&e.geometry?.getAttribute("position").count>0&&t.push(Po(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(i=>i.updateMatrixWorld(!0)),t.length>0){let i=pc(t,!1);e.bvhGeometry=i,i.getAttribute("position").count>0&&(e.bvhGeometry.boundsTree=new $3(i),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e))}}addCollider(e,t,i,r,s=!0){if(i?.getAttribute("position").count===0||i?.getIndex()?.count===0)return;let a;i&&(t.colliderType==="trimesh"?a=ii.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array):a=ii.ColliderDesc.convexMesh(i.getAttribute("position").array,s?i.getIndex().array:void 0)),a.setFrictionCombineRule(ii.CoefficientCombineRule.Average).setRestitutionCombineRule(ii.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let n=this.sharedGameControlGlobals.rapierWorld.createCollider(a,e);this.sharedGameControlGlobals.colliderToEntity.set(n.handle,r),this.sharedGameControlGlobals.entityToCollisionEvents[r.uuid]?.some(o=>o.target==="scene")&&n.setActiveEvents(ii.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(i,r)=>{if(r===0)return;let s;if(i instanceof va)if(i.objectForSample){if(i.objectForSample.dataPatched.physics.fusedBody)return;s=i.object}else return i.object.dataPatched.physics.fusedBody===!0&&i.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(i instanceof _1)s=i.object;else if(s=i,s.dataPatched.cloner?.hideBase)return!0;let a=s.dataPatched;if(a.physics.enabled==="visibility"?!a.visible:!a.physics.enabled)return!0;r===1?e.hasNonUniformScale?i.matrixWorld.multiplyMatrices(e.shearScale,i.hiddenMatrix):i.matrixWorld.copy(i.hiddenMatrix):i.matrixWorld.multiplyMatrices(i.parent.matrixWorld,i.hiddenMatrix),i.matrixWorld.multiply(i.matrix);let n=i.geometry;n?.getAttribute("position")!==void 0&&t.push(Po(n,i.matrixWorld))}}activate(e){if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,i=!1,r=5,s=8,a=9,n="drag",o=this.page.data.publish.gameControlObject,l=o!==null?this.page.find(o):null,h=null;if(l)for(let d of l.data.events){if(d.data.disabled||d.data.type!=="GameControl")continue;let f=l;for(;this.usePhysics&&(f=f.parent)?.parent!==null;)f.data.physics?.fusedBody;d.data.collisionEnabled&&(this.needsCollisionDetection=!0),h===null&&(h=d.data)}if(this.page.traverseEntity(d=>{for(let f of d.dataPatched.events)if(f.data.disabled===!1&&f.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),l&&h&&(l.data.visible===!0||l.data.physics.enabled===!0)){i=i||h.camera===t.uuid||l.uuid===t.uuid;let d=new DU(l,this.renderer.domElement,h,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&h.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=d,r=h.joystickPosLoc,s=h.joystickRotLoc,a=h.jumpTouchButtonLoc,n=h.rotByTouch,Vs&&h.touchControl&&(this.joystickToGameControls[r]="pos",h.moveMode==="walk"&&(this.joystickToGameControls[a]="jmp"),n==="joystick"&&(this.joystickToGameControls[s]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let d=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new Mwe(this.usePhysics,this.isExport);let f;d.collider.type==="sphere"?f=d.collider.radius*2:f=d.collider.height,f=Math.floor(f/d.navmesh.ch-1),this.navigationMeshWrapper.init({...d.navmesh,walkableHeight:f},this.gameControl,this.eventContext)}}if(i===!1){let{enableRotate:d,enablePan:f,enableZoom:p,autoRotate:m,hoverRotatePanMode:g}=this.eventManager.publish.orbitControls;(d||f||p||m||g!==0)&&(this.orbitControls=new NU(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let c=this.renderer.domElement.width/this.renderer.getPixelRatio(),u=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((d,f)=>{let p=document.body.appendChild(document.createElement("div")),[m,g,v]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[f],y=(c-5*m)/4+m,x={},w=d==="jmp",_=w?0:m;f<10?(f<5?x.top=_/2:x.bottom=_/2,x.left=_/2+f%5*y):f===10?(x.left=_/2,x.top=u/2):(x.right=_/2,x.top=u/2),x.top?x.top-=g[1]:x.bottom+=g[1],x.left?x.left+=g[0]:x.right-=g[0];for(let S in x)x[S]+="px";if(w){let S=p.appendChild(document.createElement("div"));Object.assign(S.style,x,{position:"absolute",width:m+"px",height:m+"px",backgroundColor:`rgba(255,255,255,${v==="show"?.4:0})`,zIndex:"9999",borderRadius:m+"px",border:v==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let A=m/16*16*.4;v==="show"&&(S.innerHTML=`
						<svg width="${A}" height="${m*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),S.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),S.addEventListener("touchend",C=>C.preventDefault()),this.joysticks[f]=[void 0,p];return}let b={zone:p,mode:"static",position:x,size:m};v==="hide"&&(b.restOpacity=0);let M=K6e.create(b);M.on("move",(S,A)=>{let C=this.gameControl;d==="pos"?A.force<.2?C.moveForce=0:(C.movementState.movePosZ=Math.sin(-A.angle.radian),C.movementState.movePosX=Math.cos(-A.angle.radian),A.force>1.2?C.movementState.run=1:C.movementState.run=0,A.force<.3?C.moveForce=(A.force-.2)/.1:C.moveForce=1):d==="rot"&&(A.force<.2?C.rotForce=0:(C.movementState.rotPosX=A.vector.y,C.movementState.rotPosY=-A.vector.x,A.force<.3?C.rotForce=(A.force-.2)/.1:C.rotForce=1)),this.requestRender()}),M.on("end",(S,A)=>{let C=this.gameControl;d==="pos"?(C.movementState.movePosZ=0,C.movementState.movePosX=0,C.moveForce=1):d==="rot"&&(C.movementState.rotPosX=0,C.movementState.rotPosY=0,C.rotForce=1)}),this.joysticks[f]=[M,p]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(d=>d.initialDisabled=!1)},80)}initPhysics(){this.sharedGameControlGlobals.rapierWorld?.free(),this.sharedGameControlGlobals.rapierWorld=new ii.World(new ii.Vector3(0,this.gravity,0)),this.events=new ii.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(n=>{let o;if(n instanceof va)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;o=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof _1)o=n.object;else{if(n instanceof id||n instanceof td)return;if(o=n,o.dataPatched.cloner?.disabled===!1&&o.dataPatched.cloner?.hideBase&&o.dataPatched.physics?.fusedBody!==!0)return!0}let l=o.dataPatched,h;for(let g of l.events)g.data.disabled!==!0&&g.data.type==="GameControl"&&(h=g.data);if(!l.physics||(l.physics.enabled==="visibility"?!l.visible:!l.physics.enabled))return!0;n.updateMatrixWorldSVD();let c=yv(l),u=!1,d=o.userData.hasDestroy,f=o.userData.hasDrag,p=!1;for(let g of l.events)if(g.data.disabled!==!0){if(g.data.type==="Collision"){u=!0;let v=new pwe(g.id,g.data,o,this.page,this.sharedAssets,this.eventManager);v.initialDisabled=!0,this.collisionEvents.push(v),this.sharedGameControlGlobals.entityToCollisionEvents[o.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[o.uuid].every(y=>y.id!==g.id)?this.sharedGameControlGlobals.entityToCollisionEvents[o.uuid].push(v):this.sharedGameControlGlobals.entityToCollisionEvents[o.uuid]=[v]}else if(g.data.type==="Follow"){p=!0;let v=g.data.target;n.traverseVisible(y=>{y.userData.isFollowingObj=v})}}l.physics.rigidBody==="dynamic"&&l.physics.fusedBody===!1&&(n.matrixWorldFusedFalse=n.matrixWorld.clone());let m=n.geometry;if(h!==void 0){let g=ii.RigidBodyDesc.kinematicPositionBased();(n.hasNonUniformScale?n.matrixWorldRigid:n.matrixWorld).decompose(Sr,Ua,El),n.position0=Sr.clone().divideScalar(this.pixelsPerMeter),n.rotation0=Ua.clone(),Sr.divideScalar(this.pixelsPerMeter),g.setTranslation(Sr.x,Sr.y,Sr.z).setRotation(Ua);let v=this.sharedGameControlGlobals.rapierWorld.createRigidBody(g);n.rigidBody=v;let y;h.collider.type==="sphere"?y=ii.ColliderDesc.ball(h.collider.radius/this.pixelsPerMeter):h.collider.type==="capsule"?y=ii.ColliderDesc.capsule((h.collider.height/2-h.collider.radius)/this.pixelsPerMeter,h.collider.radius/this.pixelsPerMeter):y=ii.ColliderDesc.cuboid(h.collider.width/this.pixelsPerMeter/2,h.collider.height/this.pixelsPerMeter/2,h.collider.depth/this.pixelsPerMeter/2),y.setFrictionCombineRule(ii.CoefficientCombineRule.Average).setRestitutionCombineRule(ii.CoefficientCombineRule.Average).setDensity(l.physics.density).setFriction(l.physics.friction).setRestitution(l.physics.restitution);let x=this.sharedGameControlGlobals.rapierWorld.createCollider(y,v);this.sharedGameControlGlobals.colliderToEntity.set(x.handle,o),Sr.fromArray(h.collider.position).multiply(El.setFromMatrixScale(o.matrixWorld)).divideScalar(this.pixelsPerMeter),x.setTranslationWrtParent(Sr);let w=new wt().setFromEuler(new Vr().setFromVector3(new E().fromArray(h.collider.rotation)));x.setRotationWrtParent(w),x.setActiveEvents(ii.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(o,!0)}else l.physics.rigidBody==="dynamic"||c||p||d||f||u?(this.addRigidBody(n,o,{hasFollow:p,hasTransformAnim:c,hasDrag:f}),this.generateSensorColliderDescs(o,l.physics.fusedBody)):(m&&e.push(Po(m,n.matrixWorld)),l.physics.fusedBody&&n.traverseObject((g,v)=>{if(v===0)return;let y;if(g instanceof va)if(g.objectForSample){if(g.objectForSample.dataPatched.physics.fusedBody)return;y=g.object}else return g.object.dataPatched.physics.fusedBody===!0&&g.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else{if(g instanceof id||g instanceof td)return;if(g instanceof _1)y=g.object;else if(y=g,y.dataPatched.cloner?.hideBase)return!0}let x=y.dataPatched;if(x.physics.enabled==="visibility"?!x.visible:!x.physics.enabled)return!0;let w=g.geometry;w?.getAttribute("position")!==void 0&&e.push(Po(w,g.matrixWorld))}),this.generateSensorColliderDescs(o,l.physics.fusedBody,t));if(l.physics?.fusedBody===!0||h)return!0}),e.length===0)return;let i=pc(e);i.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let r=ii.RigidBodyDesc.fixed(),s=this.sharedGameControlGlobals.rapierWorld.createRigidBody(r),a=ii.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array).setFrictionCombineRule(ii.CoefficientCombineRule.Multiply).setRestitutionCombineRule(ii.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(a,s);for(let[n,o]of t){let l=this.sharedGameControlGlobals.rapierWorld.createCollider(n,s);this.sensorToTriggerEvent[l.handle]=o}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let i=new TD(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),r=new Fe().compose(Va.fromArray(t.data.position),L2.setFromEuler(PD.fromArray(t.data.rotation)),s5);if(t.data.triggerZone==="box"){let s=new yr;s.min.fromArray(t.data.size).multiplyScalar(-.5),s.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([s,r,e,i])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,r,e,i])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){if(this.isEnabled){this.isEnabled=!1,this.page.traverse(e=>{let t=e;t.matrixWorldFusedFalse&&(t.matrixWorldFusedFalse=void 0),t.rigidBody&&(t.rigidBody=void 0),t.position0&&(t.position0=void 0),t.rotation0&&(t.rotation0=void 0)}),this.sharedGameControlGlobals.rapierWorld?.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),this.gameControl?.reset(),this.gameControl?.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([e,t])=>{e?.destroy(),t.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),this.navigationMeshWrapper?.dispose(),this.navigationMeshWrapper=void 0;for(let e of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))e.forEach(t=>t.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,i){if(!this.isEnabled)return!0;let r=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(this.orbitControls.update(),r=!this.orbitControls.isCurrentlyDamping),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,r=!1):this.initializationCounter===2&&this.gameControl&&(r=!this.gameControl.update(e,t,i)&&r),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let s=.016666666666666666;if(e===0)r=this.stepPhysics()&&r;else{let a=e/1e3;a<s&&a>s*.55&&(a=s),this.accumulator+=a;let n=performance.now(),o=0,l=6;for(;this.accumulator>=s&&o<l&&(r=this.stepPhysics()&&r,this.accumulator-=s,o++,!(performance.now()-n>s*1e3)););this.accumulator=this.accumulator%s}}this.skipRender=r}stepPhysics(){for(let e of this.sharedGameControlGlobals.entitiesWithTransformAnim){(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Sr,Ua,El),i5.setFromQuaternion(Ua);let t=e;t.prevR===void 0?(t.prevR=i5.clone(),t.prevT=Sr.clone()):(t.prevR.copy(i5),t.prevT.copy(Sr)),e.rigidBody&&(e.rigidBody.setNextKinematicTranslation(Sr.divideScalar(this.pixelsPerMeter)),e.rigidBody.setNextKinematicRotation(Ua))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),this.events?.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,i){let r=(this.sharedGameControlGlobals.rapierWorld?.getCollider(i))._parent,s;if(t.cloner){for(let a of t.cloner.children)if(a.rigidBody===r){s=a;break}}e.dispatch(s),t.dispatchEvent(ub)}updateUseWindowEvents(e){this.orbitControls?.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,i){let r=DD.copy(e.matrixWorld).invert();e.traverseEntity((s,a)=>{if(t===!1&&a===1)return!0;for(let n of s.dataPatched.events)if(n.data.type==="Trigger"&&n.data.disabled!==!0){let o=new TD(n.id,n.data,s,this.page,this.sharedAssets,this.eventManager),l;if(n.data.triggerZone==="box"?l=ii.ColliderDesc.cuboid(...n.data.size.map(h=>h/(2*this.pixelsPerMeter))):l=ii.ColliderDesc.ball(n.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(ii.ActiveEvents.COLLISION_EVENTS),Va.fromArray(n.data.position),L2.setFromEuler(PD.fromArray(n.data.rotation)),dm.compose(Va,L2,s5).premultiply(s.matrixWorld),i?(dm.decompose(Va,L2,r5),l.setActiveCollisionTypes(ii.ActiveCollisionTypes.KINEMATIC_FIXED|ii.ActiveCollisionTypes.DYNAMIC_FIXED)):(dm.premultiply(r).decompose(Va,L2,r5),e.rigidBody.bodyType()===ii.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===ii.RigidBodyType.Fixed?l.setActiveCollisionTypes(ii.ActiveCollisionTypes.KINEMATIC_FIXED|ii.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(ii.ActiveCollisionTypes.KINEMATIC_KINEMATIC|ii.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),Va.divideScalar(this.pixelsPerMeter),l.setTranslation(Va.x,Va.y,Va.z),l.setRotation(L2),i)i.push([l,o]);else{let h=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[h.handle]=o}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[i,r,s,a]=this.sharedGameControlGlobals.triggers[t];for(let n=0;n<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;n++){let o=this.sharedGameControlGlobals.entitiesWithTransformAnim[n];if(s===o||a.isValidTriggeringObject(Zt.is(o)?o:o.object)===!1)continue;let l=DD.copy(s.matrixWorld).decompose(Va,ID,r5).compose(Va,ID,s5).multiply(r),h=dm.copy(o.matrixWorld).invert().multiply(l);i instanceof yr?e=o.bvhGeometry.boundsTree.intersectsBox(i,h):(a5.radius=i,a5.center.setFromMatrixPosition(h),e=o.bvhGeometry.boundsTree.intersectsSphere(a5)),e?a.currentIntersectedObjects.indexOf(o)===-1&&(a.currentIntersectedObjects.push(o),a.dispatch(),s.dispatchEvent(Bwe)):a.currentIntersectedObjects=a.currentIntersectedObjects.filter(c=>c!==o)}}}};function Nwe(e){let t=this._clip.duration,i=this._clip.start??0,r=this.loop,s=this.time+e,a=this._loopCount,n=r===Pw;if(e===0)return a===-1?s:n&&(a&1)===1?t-(s-i):s;if(r===Rz){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,n)):this._setEndings(this.repetitions===0,!0,n)),s>=t||s<i){let o=Math.floor((s-i)/(t-i));s-=(t-i)*o,a+=Math.abs(o);let l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n||(s=e>0?t:i,this.repetitions===1&&(s=t)),this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let h=e<0;this._setEndings(h,!h,n)}else this._setEndings(!1,!1,n);this._loopCount=a,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=s;if(n&&(a&1)===1)return t-(s-i)}return s}var OD=!1,Uwe=class{constructor(e,t,i,r){this.scene=e,this.requestRender=t,this.updateDisplayProgress=i,this.animationInspectorState=r,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=s=>{s.data.type==="Empty"&&s.data.animations&&s.data.animations.forEach((a,n)=>{let o=a[0]+"/";if(Array.isArray(s.identity)?o+=s.identity[0]:o+=s.uuid,this.clipIdToAction[o])return;let l=y6.parse(JSON.parse(a[2]));s.animations[n]=l;let h=this.mixer.clipAction(l,s);OD===!1&&(Object.getPrototypeOf(h)._updateTime=Nwe,OD=!0),h.clampWhenFinished=!0,this.clipIdToAction[o]=h})},this.mixer=new Kae(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let i=this.scene.find(t);if(!i)return;let r=i.animations.find(a=>a.uuid===e);if(!r)return;let s=this.clipIdToAction[e];!s||(s.stop(),this.mixer.uncacheClip(r),delete this.clipIdToAction[e],i.animations=i.animations.filter(a=>a.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=Lz}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,i=this.clipIdToAction[t];if(i)return e&&(e.repeat>=0&&(i.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(i.loop=Pw)),i.play(),i.paused=!1,this.requestRender(),i}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||this.animationInspectorState?.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*(this.maxFrames-1)%(this.maxFrames-1))),this.requestRender()}get maxFrames(){return wU(this.activeClip??void 0)}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let i=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(e/(this.maxFrames-1),.9999)*this.activeClip.duration),this.requestRender(),i&&(this.clipIdToAction[t].paused=!0)}},n5=new WeakMap,Vwe=class extends gf{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){let s=new x6(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{this.decodeDracoFile(a,t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){let s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){let i=JSON.stringify(t);if(n5.has(e)){let o=n5.get(e);if(o.key===i)return o.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,s=this.workerNextTaskID++,a=e.byteLength,n=this._getWorker(s,a).then(o=>(r=o,new Promise((l,h)=>{r._callbacks[s]={resolve:l,reject:h},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(o=>this._createGeometry(o.geometry));return n.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),n5.set(e,{key:i,promise:n}),n}_createGeometry(e){let t=new rt;e.index&&t.setIndex(new mt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i],s=r.name,a=r.array,n=r.itemSize;t.setAttribute(s,new mt(a,n))}return t}_loadLibrary(e,t){let i=new x6(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{let r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);let s=jwe.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){let a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function jwe(){let e,t;onmessage=function(n){let o=n.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise(function(c){e.onModuleLoaded=function(u){c({draco:u})},DracoDecoderModule(e)});break;case"decode":let l=o.buffer,h=o.taskConfig;t.then(c=>{let u=c.draco,d=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let p=i(u,d,f,h),m=p.attributes.map(g=>g.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:o.id,error:p.message})}finally{u.destroy(f),u.destroy(d)}});break}};function i(n,o,l,h){let c=h.attributeIDs,u=h.attributeTypes,d,f,p=o.GetEncodedGeometryType(l);if(p===n.TRIANGULAR_MESH)d=new n.Mesh,f=o.DecodeBufferToMesh(l,d);else if(p===n.POINT_CLOUD)d=new n.PointCloud,f=o.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let m={index:null,attributes:[]};for(let g in c){let v=self[u[g]],y,x;if(h.useUniqueIDs)x=c[g],y=o.GetAttributeByUniqueId(d,x);else{if(x=o.GetAttributeId(d,n[c[g]]),x===-1)continue;y=o.GetAttribute(d,x)}m.attributes.push(s(n,o,d,g,v,y))}return p===n.TRIANGULAR_MESH&&(m.index=r(n,o,d)),n.destroy(d),m}function r(n,o,l){let h=l.num_faces()*3,c=h*4,u=n._malloc(c);o.GetTrianglesUInt32Array(l,c,u);let d=new Uint32Array(n.HEAPF32.buffer,u,h).slice();return n._free(u),{array:d,itemSize:1}}function s(n,o,l,h,c,u){let d=u.num_components(),f=l.num_points()*d,p=f*c.BYTES_PER_ELEMENT,m=a(n,c),g=n._malloc(p);o.GetAttributeDataArrayForAllPoints(l,u,m,p,g);let v=new c(n.HEAPF32.buffer,g,f).slice();return n._free(g),{name:h,array:v,itemSize:d}}function a(n,o){switch(o){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32}}}var eh;function Gwe(e){return eh||(eh=new Vwe,eh.setDecoderPath(e?`${e}/`:"https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),eh.decoderPending}async function Hwe(e){if(eh){let t={attributeIDs:eh.defaultAttributeIDs,attributeTypes:eh.defaultAttributeTypes,useUniqueIDs:!1},i;try{i=await eh.decodeGeometry(new Int8Array(e).buffer,t)}catch(r){console.error(r)}if(i)return{index:i.index?{array:i.index.array}:void 0,attributes:Object.entries(i.attributes).map(([r,s])=>({name:r,itemSize:s.itemSize,array:s.array}))}}return null}async function Wwe(e,t){let[i,r]=Ek(B6.deserialize(new Uint8Array(e)));return Jk(i),r.result().data}function qwe(e){let t=[];return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&r.geometry.data.draco!==void 0&&t.push(r)}),t}async function Xwe(e){for(let t of e){let i=await Hwe(t.geometry.data.draco);if(i){let r=t.geometry.data;i.index&&(r.index={array:i.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let s={};i.attributes.forEach(({name:a,array:n,itemSize:o})=>{s[a]={array:n,itemSize:o,type:"Float32Array",normalized:!1}}),r.attributes=s,r.draco=void 0}}}var Ywe=class{constructor(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0],this._delay=500,this._distance=2,this._onMouseDown=e=>{let t=[e.clientX,e.clientY],i=new Date().getTime();if(this._clickCount>0){let r=t[0]-this._lastPosition[0],s=t[1]-this._lastPosition[1];Math.sqrt(r*r+s*s)>this._distance&&(this._clickCount=0)}this._lastPosition=t,this._clickCount=i-this._lastTime>this._delay?1:this._clickCount+1,this._lastTime=i},this._onMouseUp=e=>{}}start(e,t=500,i=2){this._target&&this.stop(),this.reset(),this._delay=t,this._distance=i,this._target=e,this._target.addEventListener("pointerdown",this._onMouseDown,!1),this._target.addEventListener("pointerup",this._onMouseUp,!1)}stop(){this._target&&(this._target.removeEventListener("pointerdown",this._onMouseDown,!1),this._target.removeEventListener("pointerup",this._onMouseUp,!1),this._target=void 0)}get clickCount(){return this._clickCount}reset(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0]}},Kwe=class{constructor(e,t,i,r,s,a,n,o){this.eventId=e,this.id=t,this.data=i,this.dataEvent=r,this.object=s,this.stage=!1,this.actions=Lr(r,i.actions,a,n,o,s)}disconnect(){s1(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},Qwe=class extends G1{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(i,r)=>{this.breakpoints.forEach(s=>{let a=U6.deviceToSize(s.data.size),n=s.dataEvent.orientation==="horizontal"?i:r,o;switch(s.data.operator){case"<":o=n<a[0];break;case">":o=n>a[0];break;case"<>":o=n>a[0]&&n<a[1];break}s.stage!==o&&(s.stage=o,s.stage?s.dispatchIn():s.dispatchOut())})},this.onResizeObserver=new ResizeObserver(i=>{for(let r of i){let{width:s,height:a}=r.contentRect;this.resize(s,a)}})}connect(){let{page:e,sharedAssets:t,domElement:i}=this.eventContext;this.onResizeObserver.observe(i);let r=s=>{if(!(!s.visible||!s.data?.events.length))for(let{data:a,id:n}of s.data.events)a.disabled||a.type==="Resize"&&a.breakpoints.forEach(({data:o,id:l})=>{try{let h=new Kwe(n,l,o,a,s,e,t,this.eventManager);this.breakpoints.push(h)}catch{}})};e.traverseEntity(s=>{(s instanceof F1||s instanceof $r)&&s.frame?.traverse(a=>{r(a)}),r(s)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},Zwe=class extends G1{constructor(e,t){super(e),this.eventManager=t,this.userAPIs={},this.events=[],this.onSuccess=({userAPIId:i})=>{this.events.forEach(r=>{r.data.userAPIId===i&&r.dispatchSuccess()})},this.onError=({userAPIId:i})=>{this.events.forEach(r=>{r.data.userAPIId===i&&r.dispatchError()})},this.userAPIs=e.sharedAssets.getUserAPIs()}connect(){this.eventContext.page.traverseEntity(e=>{e.data?.events.filter(t=>t.data.type==="API"&&!t.data.disabled).forEach(t=>{this.events.push(new Jwe(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userAPIs).forEach(([e,t])=>{t.on("success",this.onSuccess),t.on("error",this.onError),t.autostart&&t.callUserAPI(this.eventContext.sharedAssets)})}disconnect(){Object.entries(this.userAPIs).forEach(([e,t])=>{t.off("success",this.onSuccess),t.off("error",this.onError)})}},Jwe=class{constructor(e,t,i,r,s,a){this.id=e,this.data=t,this.object=i,this.successActions=Lr(t,t.successActions,r,s,a,i),this.errorActions=Lr(t,t.errorActions,r,s,a,i)}dispatchSuccess(){this.dispatchActions(this.successActions)}dispatchError(){this.dispatchActions(this.errorActions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},$we=class extends G1{constructor(e,t){super(e),this.eventManager=t,this.userWebhooks={},this.events=[],this.onMessage=({userWebhookId:i})=>{this.events.forEach(r=>{r.data.userWebhookId===i&&r.dispatch()})},this.userWebhooks=e.sharedAssets.getUserWebhooks()}connect(){this.eventContext.page.traverseEntity(e=>{e.data?.events.filter(t=>t.data.type==="WEBHOOK"&&!t.data.disabled).forEach(t=>{this.events.push(new e_e(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userWebhooks).forEach(([e,t])=>{t.connect(),t.on("message",this.onMessage)})}disconnect(){Object.entries(this.userWebhooks).forEach(([e,t])=>{t.off("message",this.onMessage),t.disconnect()})}},e_e=class{constructor(e,t,i,r,s,a){this.id=e,this.data=t,this.object=i,this.actions=Lr(t,t.actions,r,s,a,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}};function t_e(){let e=document.createElement("textarea");return e.style.position="fixed",e.style.top="200px",e.style.left="400px",e.style.zIndex="-1",e.style.border="1px solid rgba(255,0,0,0.5)",e.style.width="10px",e.style.height="500px",e.style.color="white",e.style.opacity="0.5",e.style.background="transparent",e.style.display="none",e.style.margin="0px",e.style.padding="0px",e.style.boxSizing="content-box",e.style.pointerEvents="none",e}var i_e=new E(0,0,1),RD=new E,LD=new E,zD=new Dr,r_e=class{constructor(e,t,i,r,s){this.containerScene=e,this.raycaster=t,this.sharedAssets=i,this.requestRender=r,this.onExit=s,this.htmlInput=null,this.virtualInput=null,this.helper=new EN,this.doubleClickHandler=new Ywe,this.isDragging=!1,this.plane=new ds,this.caretInterval=0,this.planeIntersection=new E,this.projected=new re,this._lastIndex=0,this._isFirstDragMove=!1,this.selectionOnDragStart=0,this.onTextMaterialChanged=()=>{let a=this.virtualInput?.data;if(this.virtualInput!==void 0&&a){let n=a.material,o=typeof n=="string"?this.sharedAssets.data.materials[n]:n,l=u5e(o,this.sharedAssets);this.helper.setCaretColor(l)}},this.stopAnimateTextCursor=()=>{clearInterval(this.caretInterval),this.helper&&(this.helper.caretMesh.visible=!1)},this.startAnimateTextCursor=()=>{this.stopAnimateTextCursor(),this.helper&&(this.helper.caretMesh.visible=!0,this.caretInterval=setInterval(()=>{this.helper&&(this.helper.caretMesh.visible=!this.helper.caretMesh.visible),this.requestRender()},600))},this.handleCaretUpdate=a=>{if(!this.htmlInput||!this.virtualInput)return;let n=this.helper,o=a?.key==="ArrowLeft"||a?.key==="ArrowRight",l=a?.key==="ArrowUp"||a?.key==="ArrowDown";this.htmlInput.selectionStart===this.htmlInput.selectionEnd?(n.setCaretPosition(this.htmlInput.selectionStart,{horizontalKeyMove:o,verticalKeyMove:l}),this.startAnimateTextCursor()):n.setSelection(this.htmlInput.selectionStart,this.htmlInput.selectionEnd),this.requestRender()},this.containerScene.add(this.helper)}createInput(){return this.htmlInput=t_e(),this.htmlInput}connect(){}disconnect(){this.stopAnimateTextCursor(),this.helper.hide(),this.htmlInput?.remove(),this.doubleClickHandler.stop()}handleMouseDown(){if(!this.htmlInput||!this.virtualInput)return!0;this.getPointOnPlane();let e=this.doubleClickHandler.clickCount,{index:t,lineIndex:i,characterIndex:r}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,e>1?"inside":"previous")??{index:0,lineIndex:0,characterIndex:0};this.virtualInput?.wrappedText?.length&&this.virtualInput.wrappedText[i][Math.max(0,r-1)]===`
`&&(t--,r--),this._lastIndex=t,this._isFirstDragMove=!0;let s=this.checkClickedObject();if(e===1){if(s===null)return this.onExit(this.virtualInput),!0;this.selectionOnDragStart=t,this.isDragging=!0,this.setInputSelection(t)}else s===this.virtualInput&&(e===2?this.selectClosestWord(i,r):e>2&&(this.setInputSelection(0,this.htmlInput.value.length),this.doubleClickHandler.reset()))}handleMouseUp(){this.applyRangeToTextInput(),this.isDragging=!1,this._isFirstDragMove=!1}handleMouseMove(){!this.virtualInput||(this._isFirstDragMove&&this.doubleClickHandler.clickCount>1&&(this.selectionOnDragStart=this._lastIndex,this.isDragging=!0,this.setInputSelection(this._lastIndex)),this._isFirstDragMove=!1,this.getPointOnPlane(),this.applyRangeToTextInput())}focus(e){if(this.virtualInput=e,this.updateTextInputStyles(),this.htmlInput)if(e){let t=this.data?.geometry.text;this.htmlInput.value=typeof t=="string"?"":t?.textValue.toString()??""}else this.htmlInput.value=""}blur(){}get data(){let{virtualInput:e}=this;if(e)return e.dataPatched}applyRangeToTextInput(){if(!this.isDragging||!this.virtualInput||!this.htmlInput)return;let e=this.selectionOnDragStart,{index:t,lineIndex:i,characterIndex:r}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,this.doubleClickHandler.clickCount>2?"inside":"previous")??{index:0};i!==void 0&&r!==void 0&&this.virtualInput?.wrappedText[i][r-1]===`
`&&t--,this.htmlInput.setSelectionRange(Math.min(e,t),Math.max(e,t))}checkClickedObject(){if(this.virtualInput){let e=this.raycaster.intersectObject(this.virtualInput,!1);if(e.length>0){let t=e[0];if(t.object instanceof X_)return t.object}}return null}selectClosestWord(e,t){if(!this.virtualInput)return;let i=this.virtualInput.wrappedText,r=i[e],s=t+1,a=t;r[t]!==" "&&(s=this.findNextCharOccurence(r,t,"forward"," "),a=this.findNextCharOccurence(r,t,"backward"," "),a>0&&a++,s>=r.length-1&&e===i.length-1&&s++);let n=this.helper,o=n.getGlobalIndexFromLineAndCharIndexes(i,e,a),l=n.getGlobalIndexFromLineAndCharIndexes(i,e,s);this.setInputSelection(o,l)}findNextCharOccurence(e,t,i,r=" "){let s=Math.max(0,e.length-1),a=i==="forward"?s:0,n=i==="forward"?1:-1,o=Math.max(Math.min(t,s),0);for(;o!==a;)if(o+=n,e.charAt(o)===r)return o;return a}getPointOnPlane(){let e=this.virtualInput?.data;if(!(!this.virtualInput||!e)&&this.raycaster.ray.intersectsPlane(this.plane)){this.planeIntersection===null&&(this.planeIntersection=new E);let t=this.raycaster.ray.intersectPlane(this.plane,this.planeIntersection);if(t){this.planeIntersection.copy(this.virtualInput.worldToLocal(t));let i=typeof e.geometry.width=="number"?e.geometry.width:1,r=typeof e.geometry.height=="number"?e.geometry.height:1;this.projected.set(t.x+i*.5,t.y-r*.5)}}}updatePlane(){let e=this.virtualInput?.data;this.virtualInput&&e&&(zD.getNormalMatrix(this.virtualInput.matrixWorld),RD.copy(i_e).applyMatrix3(zD).normalize(),this.virtualInput.localToWorld(LD.set(0,0,e.geometry.depth)),this.plane.setFromNormalAndCoplanarPoint(RD,LD))}setInputSelection(e,t=e){this.htmlInput?.setSelectionRange(e,t),setTimeout(()=>{this.htmlInput?.focus()})}updateTextInputStyles(){let e=this.virtualInput?.data;this.virtualInput&&e&&this.htmlInput&&(this.htmlInput.style.fontSize=e.geometry.fontSize+"px",this.htmlInput.style.letterSpacing=e.geometry.letterSpacing*e.geometry.fontSize+"px",this.htmlInput.style.lineHeight=e.geometry.fontSize*e.geometry.lineHeight+"px",this.htmlInput.style.width=e.geometry.width+"px",this.htmlInput.style.height=e.geometry.height+"px",this.htmlInput.style.textAlign=s_e(e.geometry.horizontalAlign))}};function s_e(e){return e===4?"justify":e===2?"right":e===3?"center":"left"}var UU=(e,t)=>{if(typeof e=="string"){let i=t.data(e);if(i)return UU(i.value,t)}return w1.getDisplayedValue(e)};function BD(e,t){let i=e.text,r="";if(typeof i=="string"){let s=t.variables.data(r);s&&(r=UU(s.value,t.variables))}else r=i.textValue.toString();return r}var a_e=class extends G1{constructor(e,t){super(e),this.eventManager=t,this._textInputs=[],this.sceneHelpers=new As,this.helper=new EN,this._onMouseDownFocusIn=i=>{if(xt.length>1)return;this.eventContext.updateRaycaster(i);let r=null;if(this.eventContext.raycaster){for(let s of this._textInputs)if(this.eventContext.raycaster.intersectObject(s,!0).length>0){r=s;break}}this.focusOnTextInput(r),this._onCaretUpdate(),this._onMouseUp(),this.textInputManager.doubleClickHandler.start(this.eventContext.domElement),this.textInputManager.doubleClickHandler._onMouseDown(i),this._onMouseDown(i)},this.onExit=()=>{let{virtualInput:i}=this.textInputManager;if(i===null)return;let r=this.textInputManager.htmlInput;this.helper.hide(),r?.setSelectionRange(r.value.length,r.value.length),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0);let{domElement:s}=this.eventContext;s.removeEventListener("pointerdown",this._onMouseDown,!1),s.removeEventListener("pointerup",this._onMouseUp,!1),s.removeEventListener("pointermove",this._onMouseMove,!1),window.removeEventListener("keydown",this._onKeyPress),this.textInputManager.doubleClickHandler.reset(),s.addEventListener("pointerdown",this._onMouseDownFocusIn),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers()},this._onMouseDown=i=>{this.eventContext.updateRaycaster(i),this.textInputManager.handleMouseDown(),this.textInputManager.virtualInput&&this.eventContext.raycaster.intersectObject(this.textInputManager.virtualInput,!0).length>0&&this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1)},this._onMouseUp=()=>{this.textInputManager.handleMouseUp(),this.eventManager.controlsManager.orbitControls&&!this.eventManager.controlsManager.orbitControls.enabled&&(this.eventManager.controlsManager.orbitControls.enabled=!0)},this._onMouseMove=i=>{this.eventContext.updateRaycaster(i),this.textInputManager.handleMouseMove()},this._onTextEdit=i=>{let{htmlInput:r,virtualInput:s,helper:a}=this.textInputManager;if(!r||!s)return;let n=r.value;s.textGeometry.setText(n,this.eventContext.sharedAssets).then(()=>{this.eventContext.requestRender()});let o=s.data;a.update();let l=o.geometry.text;if(typeof l=="string"){let h=l;this.eventContext.sharedAssets.updateVariable(h,{textValue:n})}this.textInputManager.updateTextInputStyles(),this._onCaretUpdate()},this._onCaretUpdate=i=>{this.textInputManager.handleCaretUpdate(i)},this._onKeyPress=i=>{i.key==="Escape"&&this.onExit()},this.textInputManager=new r_e(this.sceneHelpers,e.raycaster,e.sharedAssets,e.requestRender,this.onExit)}connect(){let e=[];if(this.eventContext.scene.traverseEntity(r=>{r instanceof X_&&e.push(r)}),this._textInputs=e,e.length===0)return;let{domElement:t}=this.eventContext;t.addEventListener("pointerdown",this._onMouseDownFocusIn),this.textInputManager.connect();let i=this.textInputManager.createInput();document.body.appendChild(i),i.style.display="none",i.addEventListener("keyup",this._onCaretUpdate),i.addEventListener("keydown",this._onCaretUpdate),i.addEventListener("beforeinput",this._onCaretUpdate),i.addEventListener("paste",this._onCaretUpdate),i.addEventListener("cut",this._onCaretUpdate),i.addEventListener("select",this._onCaretUpdate),i.addEventListener("selectstart",this._onCaretUpdate)}disconnect(){let e=this.textInputManager.htmlInput,{domElement:t,sharedAssets:i}=this.eventContext;t.removeEventListener("pointerdown",this._onMouseDownFocusIn),e?.removeEventListener("keyup",this._onCaretUpdate),e?.removeEventListener("keydown",this._onCaretUpdate),e?.removeEventListener("beforeinput",this._onCaretUpdate),e?.removeEventListener("paste",this._onCaretUpdate),e?.removeEventListener("cut",this._onCaretUpdate),e?.removeEventListener("select",this._onCaretUpdate),e?.removeEventListener("selectstart",this._onCaretUpdate),this._textInputs.forEach(r=>{let s=BD(r.data.geometry,this.eventContext.sharedAssets.data);r.textGeometry.setText(s,i)}),t.removeEventListener("pointerdown",this._onMouseDown,!1),t.removeEventListener("pointerup",this._onMouseUp,!1),t.removeEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers(),this.textInputManager.disconnect()}focusOnTextInput(e){this.textInputManager.focus(e),this.textInputManager.onTextMaterialChanged();let t=this.textInputManager.htmlInput;if(!t||e===null)return;this.textInputManager.updateTextInputStyles(),this.eventContext.renderer.sceneHelpersOnTop=this.sceneHelpers,this.eventContext.renderer.pipeline.enableHelpers(),this.textInputManager.isDragging=!1;let i=BD(e.textGeometry.userData.parameters,this.eventContext.sharedAssets.data);t.value=i,t.setSelectionRange(0,0),this.textInputManager.helper.show(e),t.style.display="block",t.addEventListener("input",this._onTextEdit),this.textInputManager.updatePlane();let{domElement:r}=this.eventContext;r.removeEventListener("pointerdown",this._onMouseDownFocusIn),r.addEventListener("pointerdown",this._onMouseDown,!1),r.addEventListener("pointerup",this._onMouseUp,!1),r.addEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress)}},n_e=class extends G1{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onVoice=({value:i,frequencies:r})=>{this.events.forEach(s=>{s.dispatch()})}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{e.data?.events.filter(t=>t.data.type==="AIAssistantListener"&&!t.data.disabled).forEach(t=>{this.events.push(new o_e(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("voice",this.onVoice))}disconnect(){this.openAIRealtime?.off("voice",this.onVoice)}},o_e=class{constructor(e,t,i,r,s,a){this.id=e,this.data=t,this.object=i,this.actions=Lr(t,t.actions,r,s,a,i)}dispatch(){this.dispatchActions(this.actions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},l_e=class extends G1{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onTriggerEvent=({description:i,direction:r})=>{let s=this.events.find(a=>a.data.description===i);s&&(r==="backward"?s.dispatchReverse():s.dispatch())}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{e.data?.events.filter(t=>t.data.type==="AIAssistantTrigger"&&!t.data.disabled).forEach(t=>{this.events.push(new h_e(t.id,t.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("trigger_event",this.onTriggerEvent))}disconnect(){this.openAIRealtime?.off("trigger_event",this.onTriggerEvent)}},h_e=class{constructor(e,t,i,r,s,a){this.id=e,this.data=t,this.object=i,this.actions=Lr(t,t.actions,r,s,a,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispatchReverse(){let e=this.actions;e.Transition.forEach(t=>t.reverseFromCurrent()),e.Particles.forEach(t=>t.reverseFromCurrent()),e.Animation.forEach(t=>t.reverseFromCurrent()),e.SwitchCamera.forEach(t=>t.reverseFromCurrent()),e.Create.forEach(t=>t.dispatchStop())}},c_e=class{constructor(e,t,i,r,s){this.publish=e,this.controlsManager=t,this.animationControls=i,this.eventContext=r,this.sharedVariables=s,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=a=>{let n=window.parent!==window,o=document.documentElement.scrollHeight>document.documentElement.clientHeight||document.documentElement.scrollWidth>document.documentElement.clientWidth;(a.touches.length>1||this.preventTouchScroll||n===!1&&o===!1)&&a.preventDefault()},this.onMouseWheelPreventScroll=a=>{this.preventScroll&&a.preventDefault()},this.onMouseMove=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:a.buttons>0}},this.onMouseDown=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:!0}},this.onMouseUp=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:!1}},this.getMousePosition=a=>{let{domRect:n}=this.eventContext,{pageX:o,pageY:l}=a.touches?.length>0?a.touches[0]:a;return{x:o-(n.left+window.scrollX),y:l-(n.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=r.requestRender}activate(e=!1){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new kbe(this.eventContext),VariableChange:new mwe(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),API:new Zwe(this.eventContext,this),WEBHOOK:new $we(this.eventContext,this),AIAssistantListener:new n_e(this.eventContext,this),AIAssistantTrigger:new l_e(this.eventContext,this),Conditional:new Hbe(this.eventContext,this),Start:new fwe(this.eventContext,this),Basic:new Nbe(this.eventContext,this,this.needsRaycast),MouseHover:new lwe(this.eventContext,this),Scroll:new uwe(this.eventContext,this),Follow:new ewe(this.eventContext,this),DragDrop:new Kbe(this.eventContext,this),LookAt:new awe(this.eventContext),Resize:new Qwe(this.eventContext,this),Textfields:new a_e(this.eventContext,this)};let{page:t,domElement:i}=this.eventContext;this.hideCursor&&(i.style.cursor="none"),t.traverseEntity(r=>{r.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(r=>r.connect()),i.addEventListener("wheel",this.onMouseWheelPreventScroll),i.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++,e||this.eventContext.sharedAssets.openAIRealtime?.connect()}deactivate(e=!1){if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:t,domElement:i}=this.eventContext;i.style.cursor="",Object.values(this.handlers).forEach(r=>r.disconnect()),this.controlsManager.gameControl?.disposeActions(),this.controlsManager.disconnectEvents(),t.traverseEntity(r=>{r.removeEventListener("requestRender",this.requestRender),r.destroyedInAction=!1}),i.removeEventListener("touchmove",this.onTouchMovePreventScroll),i.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode(),e||this.eventContext.sharedAssets.openAIRealtime?.disconnect()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(!0),this.activate(!0),this.controlsManager.deactivate(),this.controlsManager.activate(this),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=i=>{if(i.data.type==="Conditional"&&(i.data.ifActions.forEach(t),i.data.elseActions.forEach(t)),i.data.type==="Conditional"||i.data.type==="SetVariable")for(let r of i.data.type==="Conditional"?i.data.condition:i.data.expression)"id"in r&&Array.isArray(r.id)&&(r.id[0]==="mouse"&&(this.needsMouse=!0),r.id[0]==="raycast"&&(this.needsRaycast=!0));i.data.type==="DynamicVariablePlay"&&i.data.variableId!==""&&(i.data.mode==="Play"||i.data.mode==="PlayPause"||i.data.mode==="Toggle")&&e.setDynamicVariablePlayState(i.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(i=>{if(i.data?.events.length)for(let r of i.data.events)if(r.data.type==="VariableChange"&&(r.data.variableId==="mouseProperty"&&(this.needsMouse=!0),r.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),r.data.type==="Conditional")for(let s of["inActions","outActions"])r.data[s].forEach(t);else if(r.data.type==="DragDrop")for(let s of["drag","drop"])r.data.dragDropActions[s].forEach(t);else if(r.data.type==="GameControl")for(let s of["idle","move","jump","run"])r.data.gameActions[s].forEach(t);else if(r.data.type==="Resize")for(let s of r.data.breakpoints)s.data.actions.forEach(t);else r.data.type==="LookAt"||r.data.type==="API"||r.data.actions.forEach(t)})}},u_e=class{constructor(e,t,i,r,s){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new re().copy(i),this._editorSize=new re().copy(r),this._aspect=t.aspect,this._fov=s??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,i=this._editorSize.y;this._aspect=e/t,t<=i&&(this._camera.zoom*=i/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,i=this._editorSize.y,r=this._fov;if(e&&t>i){let s=d_e(t,1080,2160,1,15)/100;r*=t/i,r*=1-s}this._camera.aspect=this._aspect,this._camera.fov=r,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function d_e(e,t,i,r,s){return(e-t)/(i-t)*(s-r)+r}var f_e=class{get sharedAssets(){return this.shared}constructor(e,t={},i=!0){this.shared=new B_(e.shared,t,!0,i),this.scene=new Q_(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof $r&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof Ir&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},p_e=class{constructor({x:e=10,y:t=10}){this._startTime=0;let i=document.getElementById("spe-perfs");i?this.element=i:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){this.element.parentElement?.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function m_e(e){let t;if(e.index)for(let i=0;i<e.index.array.length;i+=3)t=e.index.array[i],e.index.array[i]=e.index.array[i+2],e.index.array[i+2]=t}function ld(e){return e instanceof Zd?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function g_e(e,t){let i={};return e.traverseEntity(r=>{if(!r.visible||!(r instanceof ns)||r.type!=="Mesh"||Array.isArray(r.material)||r.states&&Object.keys(r.states).length)return;let s=r.parent;for(;s;){if(s instanceof ns&&r.states&&Object.keys(r.states).length)return;s=s.parent}let a=r.material.uuid,n=t.shared.materials[a];if(n){if(!i1.isMergable(n))return}else{let l=t.scene.objects.get(r.uuid)?.data;if(l&&"material"in l&&typeof l.material!="string"){if(!i1.isMergable(l.material))return;a=i1.getHash(l.material)}}i[a]||(i[a]={});let o=i[a][ld(r)];if(o){if(o.push(r),r.cloner)for(let l of r.cloner.children)o.push(l)}else if(i[a][ld(r)]=[r],r.cloner)for(let l of r.cloner.children)i[a][ld(r)].push(l)}),i}function v_e(e){let t=0;return Object.values(e).forEach(i=>{Object.values(i).forEach(r=>{let s=r.length;s>t&&(t=s)})}),t}function y_e(e,t){let i=g_e(t,e),r=v_e(i),s=new Array(r),a=0,n=new Array(r),o=0,l=new Array(r),h=0,c=new Array(r),u=0;for(let[d,f]of Object.entries(i))for(let p of Object.values(f)){if(o=0,h=0,p.forEach(g=>{g instanceof ns&&(n[o++]=g.geometry.clone(),l[h++]=g)}),h<2)continue;for(let g=0;g<h;g++)l[g].updateWorldMatrix(!0,!1),n[g].applyMatrix4(l[g].matrixWorld),l[g].matrixWorld.determinant()<0&&m_e(n[g]);let m=pc(n.slice(0,o),!1);if(m){let g;switch(d){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),g=new zi(m,l[0].material);break}default:{g=new zi(m,l[0].material);break}}g.castShadow=l[0].castShadow,g.receiveShadow=l[0].receiveShadow,t.add(g);let v=y=>{u=0;for(let x of y)x.children&&v(x.children),x instanceof ns&&(Array.isArray(x.material)||i[x.material.uuid]&&i[x.material.uuid][ld(x)]&&i[x.material.uuid][ld(x)].length>1||(c[u++]=x));for(let x=0;x<u;x++)t.attach(c[x])};for(let y=0;y<h;y++){let x=l[y];v(x.children),s[a++]=x}}}for(let d=0;d<a;d++)s[d].removeFromParent()}var x_e=Mh(R$(),1),b_e=new re;function w_e(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var __e=class{constructor(e,{renderOnDemand:t,renderMode:i="auto",wasmPath:r}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=s=>{if(this.time=s,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,this._perfs?.start(),!this._renderer){this._perfs?.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){this._perfs?.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&(this._eventManager.handlers?.Start.hasVideoAction||this._eventManager.handlers?.Basic.hasVideoAction||this._eventManager.handlers?.Conditional.hasVideoAction)&&(this._skipRender=!1),this._animationControls?.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,this._scene?.traverseVisibleEntity(a=>{a.type==="ParticleSystem"&&(a.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),this._eventManager?.isEnabled&&((this._eventManager.handlers?.Follow).onAnimationFrameDamping(),(this._eventManager.handlers?.LookAt).onAnimationFrameDamping(),(this._eventManager.handlers?.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let a=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=a,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),this._perfs?.end()},this._resize=s=>{if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=b_e.set(this._viewportWidth,this._viewportHeight)),s){let a=this._viewportWidth,n=this._viewportHeight;this._renderer.setSize(a-1,n-1,!1),this._renderer.setSize(a,n,!1)}else this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1);if(this._camera=this._scene?.activeCamera,this._scene?.updateViewPlaneSize(this._frameView?.frameSize?.x??this._viewportWidth,this._frameView?.frameSize?.y??this._viewportHeight,this._frameView?.enableResponsive??!1),this._camera){let a=Object.values(this._data?.frames??{})[0].preset??"fullscreen";this._frameView?.setCamera(this._camera),this._frameView?.updateCamera(a!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=Nd(this._resize,10),this._onScroll=s=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=t?"auto":i,r&&(this._wasmPath=ide(r,"/")),this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new p_e({x:10,y:10})),mde(e)}async load(e,t,i){w_e(e),this.disposed=!1;let r=await(await fetch(e,i)).arrayBuffer();await this.start(r,{variables:t})}async start(e,{interactive:t=!0,variables:i}={}){if(this.disposed)return;let r=await Wwe(e);this._data=r;let s=qwe(r);r.version&&(0,x_e.default)(r.version,"1.10.37")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),this._wasmPath&&this.setUIWasmUrl(`${this._wasmPath}/ui.wasm`),await Promise.all([s.length&&Gwe(this._wasmPath),nP(r)&&wge(this._wasmPath),C4e(r)&&vge(this._wasmPath),Hd.physicsEnabled(r.scene.objects)&&bde(),iP(r)&&i4e(),BP(r)&&k6e(),e4e(r)&&$ve(),EP(r)&&S5e(),Ewe(r)&&yde(this._wasmPath)].filter(Boolean)),s.length&&await Xwe(s),this._eventManager?.deactivate(),this._controls?.deactivate(),this._scene?.dispose();let a=new f_e(r);if(a.resetPersonalCameraFromDocumentData(),this._scene=a.scene,this._sharedAssetsManager=a.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let l=performance.now();y_e(r,a.scene);let h=performance.now();console.log("Merged geometries in ",h-l," ms")}nP(r)&&this._scene.traverse(l=>{jo(l)&&l.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{this._requestRenderAutoMode(),this._scene?.traverse(l=>{l instanceof va&&l.pendingMediaLoad&&l.update()})}),this._scene?.traverse(l=>{l.type==="ParticleSystem"&&(l.wakeUp(),l.data.autoPlay?l.start():l.stop())});let n=Object.keys(r.shared.fonts).map(l=>this._sharedAssetsManager.getFont(l).loadingPromise);if(Promise.all(n).then(()=>{a.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),iP(r)&&kwe(r)&&await Promise.all(n),EP(r)){let l=[];this._scene.traverseEntity(h=>{(h instanceof F1||h instanceof $r)&&h.uiCanvas&&l.push(h.uiCanvas)}),await Promise.all(l.map(h=>h.promise))}if(this._scene.rewriteEventsBeforeGoToPlayMode(),h7(this._scene.activePage,this._sharedAssetsManager),!this._renderer&&(this._renderer=new h5e({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=r.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode),r.shared.images.SplineWatermark)){let l=this._sharedAssetsManager.getImage("SplineWatermark");await l.loadPromise;let h=l.getTexture(1001);this._renderer.pipeline.setWatermark(h)}BP(r)&&this._scene.initializeSplatViewer(),r.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(r.scene.blueNoiseTextureData);let o=Object.values(r.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(o.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=o.size[0],this._viewportHeight=o.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new u_e(this._renderer,this._camera,new re(this._viewportWidth,this._viewportHeight),new re(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(o.allowResponsive??!1)&&o.preset==="fullscreen"),t){let l=new zbe(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,o);this._scene.updateMatrixWorld(!0),this._controls=new Fwe(l),this._animationControls=new Uwe(this._scene,this._requestRenderAutoMode),this._eventManager=new c_e(r.scene.publish,this._controls,this._animationControls,l,r.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this._scene.activePage.data.postprocessing.depthOfField.enabled&&Promise.all(this._sharedAssetsManager.getImageLoadPromises()).then(()=>{this._resize(!0)}),i!==void 0&&this.setVariables(i),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{this._renderer?.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(this._data!==void 0){let t=Object.entries(e);for(let[i,r]of t)this.setVariable(i,r)}}setVariable(e,t){let i=this._getVariableByName(e);if(i&&!("dynamicVariableType"in i.data)){let r=t;typeof i.data.value=="number"?r=typeof t=="number"?t:typeof t=="boolean"?t===!0?1:0:parseFloat(t):typeof i.data.value=="boolean"?r=typeof t=="number"?!!t:typeof t=="boolean"?t:t.toLocaleLowerCase()==="false"?!1:!!t:typeof i.data.value!="string"&&i.data.value.textValue!==void 0&&(r=t.toString());let s=typeof r=="string"?{textValue:r}:r;this._sharedAssetsManager?.updateVariable(i.id,s),this.requestRender(),this._requestRenderAutoMode()}else i===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in i.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{e[t.data.name]===void 0&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let i=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(i)}}_getVariableValue(e){return typeof e!="string"&&w1.isTextValue(e)?w1.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(i=>i.data.name===e);return t&&this._variablesCache.set(e,t),t}}findObjectById(e){let t=this._scene?.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){let t=this._scene?.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){let e=[];return this._scene?.traverseEntity(t=>{if(t.uuid!==v0&&!this._scene.isInvisibleObjects(t)&&!(t instanceof $r)){let i=this._createProxyObject(t);i&&e.push(i)}}),e}getSplineEvents(){return(this._eventManager?.handlers?.Spline).splineEvents}emitEvent(e,t){(this.findObjectById(t)||this.findObjectByName(t))?.emitEvent(e)}emitEventReverse(e,t){(this.findObjectById(t)||this.findObjectByName(t))?.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){this._controls?.orbitControls instanceof NU&&this._controls?.orbitControls.setZoom(e)}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){let{r:t,g:i,b:r,a:s}={r:0,g:0,b:0,a:1},a=new A1(t,i,r,s);try{a.setStyle(e)}catch{console.error("This is not a valid css color",e)}this._scene?.activePage.setBackgroundColor(a),this._requestRenderAutoMode()}dispose(){this.disposed=!0,this._eventManager?.deactivate(),this._scene?.dispose(),this._sharedAssetsManager?.dispose(),this._proxyObjectCache.forEach(e=>{cE.unsubscribe(e)}),this._variablesCache.clear(),this._renderer?.setAnimationLoop(null),this._renderer?.dispose(),this._renderer=void 0,this._sharedAssetsManager?.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),this._controls?.deactivate(),this.dt=0,gde(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){this._isPaused||(this._renderer?.setAnimationLoop(null),this._isPaused=!0,this._eventManager?.pause(),this._controls?.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){!this._isPaused||(this._isPaused=!1,this._eventManager?.resume(),this._controls?.orbitControls&&(this._controls.orbitControls.enabled=!0),this._renderer?.setAnimationLoop(this.render))}setGlobalEvents(e){this._eventManager?.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){if(!this._scene||e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(o=>{o instanceof $r&&(t=o.name)});let i=this._sharedAssetsManager,r={shared:i,scene:this._scene},s=o=>{if(o===null||o==="Base State")return null;if(o&&e.data.states){let l=e.data.states.find(h=>h.data.name===o);return l?l.id:void 0}},a={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof $r||e instanceof Q_?void 0:e.parent?.uuid,emitEvent(o){e.dispatchEvent({type:"userEvent",eventName:o})},emitEventReverse(o){e.dispatchEvent({type:"userEvent",eventName:o,reverse:!0})},hide(){e.visible&&(e.visible=!1,r.shared.requestRender())},show(){e.visible||(e.visible=!0,r.shared.requestRender())},get state(){let o=e.stateSelection;if(o!==null)return e.data.states.find(({id:l})=>l===o)?.data.name},set state(o){let l;if(o!==void 0){let h=typeof o=="string"?e.data.states.find(({id:c})=>c===o):e.data.states[o];if(h)l=h.id;else{let c=typeof o=="string"?s(o):void 0;c&&(l=c)}}e.changeSelectedState(l??null,r),e.currentState=l??null,e.dispatchEvent({type:"completeState",state:l??null}),r.shared.requestRender()},transition(o){let l=this,h,c=nd.timeline({autoplay:o.autoPlay??!0}),u={transition({from:d,to:f,duration:p,delay:m,...g}){let v=s(d);v===void 0&&(v=h);let y=s(f);h=y;let x=new ob(e,v,y,{state:y,repeat:0,delay:m??0,delayDirection:"start-once",direction:"normal",duration:p??1e3,...g,...g.easing===6?G6.defaultData:g.easing===5?H6.defaultData:{}},i,!1);return c.add({...x.params,begin:()=>{(d&&v||d==="Base State"&&!v)&&(l.state=v??void 0)},complete:()=>{l.state=y??void 0}},c.duration),this},play(){return c.play(),this},pause(){return c.pause(),this},reset(){return c.reset(),this},seek(d){return c.seek(d),this}};return u.transition(o),u}},n=cE(a,(o,l)=>{typeof e[o]!="object"&&Object.getOwnPropertyDescriptor(e,o)?.writable&&(e[o]=l),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,n),n}setUIWasmUrl(e){nN.skiaWasmUrl=e}pauseGameControls(){this._eventManager?.controlsManager.gameControl?.pause()}resumeGameControls(){this._eventManager?.controlsManager.gameControl?.resume()}};const S_e=qi({__name:"ParentSize",props:{class:String,debounceTime:{type:Number,default:300},ignoreDimensions:{type:[Array,String],default:()=>[]},parentSizeStyles:Object,enableDebounceLeadingCall:{type:Boolean,default:!0}},setup(e){const t=e,i=LI(),r=Yt(null),s=hh({width:0,height:0,top:0,left:0}),a=ci(()=>({...t.parentSizeStyles,...i.style}));ci(()=>["w-full h-full",t.class]);const n=ci(()=>{const{class:c,style:u,...d}=i;return d}),o=ci(()=>Array.isArray(t.ignoreDimensions)?t.ignoreDimensions:[t.ignoreDimensions]);function l(c){const{width:u,height:d,top:f,left:p}=c,m={width:u,height:d,top:f,left:p};if(!Object.keys(m).some(y=>s[y]!==m[y]))return;!Object.keys(m).every(y=>o.value.includes(y))&&Object.assign(s,m)}const h=BR(l,t.debounceTime);return pX(r,c=>{const u=c[0];u&&h(u.contentRect)}),(c,u)=>(It(),fi("div",af({ref_key:"target",ref:r,style:a.value,class:Si(Ma)("w-full h-full",t.class)},n.value),[sf(c.$slots,"default")],16))}}),A_e=qi({__name:"Spline",props:{scene:{type:String,required:!0},onLoad:Function,renderOnDemand:{type:Boolean,default:!0},style:Object},emits:["error","spline-mouse-down","spline-mouse-up","spline-mouse-hover","spline-key-down","spline-key-up","spline-start","spline-look-at","spline-follow","spline-scroll"],setup(e,{emit:t}){const i=e,r=t,s=Yt(null),a=Yt(!1),n=Yt(null),o=Yt(!0);let l=()=>{};const h=ci(()=>({overflow:"hidden",...i.style})),c=ci(()=>({display:"block",width:"100%",height:"100%"})),{stop:u}=mX(s,([{isIntersecting:m}])=>{o.value=m,m&&n.value&&tf(()=>{s.value&&n.value&&(n.value.requestRender(),n.value.setSize(s.value.clientWidth,s.value.clientHeight))})},{threshold:.1});function d(m,g){if(!g||!n.value)return;const v=BR(g,50,{maxWait:100});return n.value.addEventListener(m,v),()=>n.value?.removeEventListener(m,v)}async function f(){if(s.value){a.value=!0;try{n.value&&(n.value.dispose(),n.value=null),n.value=new __e(s.value,{renderOnDemand:i.renderOnDemand}),await n.value.load(i.scene);const m=[d("mouseDown",g=>r("spline-mouse-down",g)),d("mouseUp",g=>r("spline-mouse-up",g)),d("mouseHover",g=>r("spline-mouse-hover",g)),d("keyDown",g=>r("spline-key-down",g)),d("keyUp",g=>r("spline-key-up",g)),d("start",g=>r("spline-start",g)),d("lookAt",g=>r("spline-look-at",g)),d("follow",g=>r("spline-follow",g)),d("scroll",g=>r("spline-scroll",g))].filter(Boolean);return a.value=!1,i.onLoad?.(n.value),()=>{m.forEach(g=>g?.())}}catch(m){return console.error("Spline initialization error:",m),r("error",m),a.value=!1,()=>{}}}}async function p(){l(),l=await f()??(()=>{})}return M1(async()=>{await p(),Ni(o,m=>{m&&p()})}),$u(()=>{u(),n.value&&(n.value.dispose(),n.value=null)}),(m,g)=>(It(),ss(S_e,af({"parent-size-styles":h.value,"debounce-time":50},m.$attrs),{default:da(()=>[Et("canvas",{ref_key:"canvasRef",ref:s,style:Aa(c.value)},null,4),a.value?sf(m.$slots,"default",{key:0}):Dv("",!0)]),_:3},16,["parent-size-styles"]))}}),M_e={key:0,class:"relative z-50 mb-4 text-base font-normal text-red-400",style:{"text-align":"start"}},C_e=100,E_e=qi({inheritAttrs:!1,__name:"IInput",props:{defaultValue:{},modelValue:{},class:{},containerClass:{},autoFocus:{type:Boolean},trim:{type:Boolean},errorHandler:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:i}){const r=e,a=gX(r,"modelValue",i,{passive:!0,defaultValue:r.defaultValue}),n=Yt(null),o=Yt({x:0,y:0}),l=Yt(!1),h=Yt(null),c=ci(()=>`
        radial-gradient(
          ${l.value?C_e+"px":"0px"} circle at ${o.value.x}px ${o.value.y}px,
          var(--blue-500),
          transparent 80%
        )
      `),u=Yt("");function d({clientX:m,clientY:g}){if(!n.value)return;const{left:v,top:y}=n.value.getBoundingClientRect();o.value={x:m-v,y:g-y}}function f(m){let g=r.errorHandler?r.errorHandler:()=>"";return u.value=g(m),u.value.length<=0}function p(m){let g=a.value;a.value=g.trimStart(),f(a.value)}return M1(()=>{r.autoFocus&&h.value?.focus()}),t({validate:f}),(m,g)=>(It(),fi("div",{ref_key:"inputContainerRef",ref:n,class:rs(Si(Ma)("group/input rounded-lg p-[2px] transition duration-300",r.containerClass)),style:Aa({background:c.value}),onMouseenter:g[1]||(g[1]=()=>l.value=!0),onMouseleave:g[2]||(g[2]=()=>l.value=!1),onMousemove:d},[ZV(Et("input",af({ref_key:"inputRef",ref:h},m.$attrs,{"onUpdate:modelValue":g[0]||(g[0]=v=>a1(a)?a.value=v:null),onInput:p,class:Si(Ma)(`flex h-10 w-full border-none bg-gray-50 dark:bg-zinc-800 text-black dark:text-white shadow-input rounded-md px-3 py-2 text-sm  file:border-0 file:bg-transparent 
          file:text-sm file:font-medium placeholder:text-neutral-400 dark:placeholder-text-neutral-600 
          focus-visible:outline-none focus-visible:ring-[2px]  focus-visible:ring-neutral-400 dark:focus-visible:ring-neutral-600
           disabled:cursor-not-allowed disabled:opacity-50
           dark:shadow-[0px_0px_1px_1px_var(--neutral-700)]
           group-hover/input:shadow-none transition duration-400`,r.class)}),null,16),[[OG,Si(a)]]),u.value.length>0?(It(),fi("p",M_e,Hr(u.value),1)):Dv("",!0)],38))}}),T_e=al(E_e,[["__scopeId","data-v-906cb9ab"]]),VU=[{name:"Global Partnership for Education (GPE)",score:8},{name:"Hilton Foundation – Early Childhood Development",score:6},{name:"Aga Khan Foundation – Madrasa ECD Program",score:8},{name:"Bernard van Leer Foundation",score:9},{name:"EU Horizon – Africa Initiative III",score:8},{name:"Bill & Melinda Gates Foundation",score:9},{name:"Save the Children – Partner Grants",score:8},{name:"Comic Relief",score:9},{name:"Wellcome Trust",score:9},{name:"Open Society Foundations",score:10},{name:"Oak Foundation",score:8},{name:"Swedish International Development Cooperation Agency (SIDA)",score:6},{name:"UK FCDO",score:6},{name:"Norwegian Church Aid",score:7}],P_e={style:{width:"100%"},class:"flex flex-col justify-center items-center"},D_e=qi({__name:"NameInputView",emits:["name-submit"],setup(e,{emit:t}){const i=Yt(""),r=t,s=Yt(null),a=Yt(null),n=Yt(null);function o(){Wl(s.value,"zoomInDown"),W3(a.value),setTimeout(()=>{Wl(a.value,"fadeIn")},800),Wl(n.value,"zoomInUp")}function l(){zl(a.value,"fadeOut"),setTimeout(()=>{zl(s.value,"zoomOutUp"),zl(n.value,"zoomOutDown")},800)}function h(){i.value=i.value.trim(),a.value.validate(i.value)&&(l(),setTimeout(()=>{r("name-submit",i.value)},1800))}function c(u){return u.length==0?"Grant name cannot be empty":VU.map(d=>d.name).includes(i.value)?"Grant name exists":""}return M1(()=>{o()}),(u,d)=>(It(),fi("div",P_e,[Et("h1",{ref_key:"titleRef",ref:s,class:"relative z-50 mb-4 text-xl font-bold text-white",style:{width:"100%","margin-bottom":"2rem"}}," Please input your grant name ",512),$t(T_e,{ref_key:"inputRef",ref:a,id:"inputDemo",placeholder:"Input here","container-class":"w-full max-w-sm","auto-focus":"",trim:"",modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=f=>i.value=f),"error-handler":c,onKeyup:zG(h,["enter"])},null,8,["modelValue"]),$t(fg,{ref_key:"buttonRef",ref:n,text:"Start Test",style:{"margin-top":"2rem"},onClick:h},null,512)]))}}),I_e={style:{width:"100%"},class:"flex flex-col justify-center items-center"},O_e={class:"flex flex-row gap-5"},R_e=qi({__name:"QuestionView",props:{questions:{default:["Is your grant a Fortune 1500?","Is your grant a Fortune 1000?"]}},emits:["answer-submit"],setup(e,{emit:t}){Yt("");const i=e,r=Yt(0),s=Yt(null),a=Yt(null),n=Yt(null),o=Yt(null);let l=[];const h=t;function c(){Wl(s.value,"zoomInDown"),Wl(a.value,"bounceInLeft"),Wl(n.value,"bounceInRight"),Wl(o.value,"fadeIn")}function u(p=0,m=0){zl(o.value,"fadeOut"),setTimeout(()=>{zl(a.value,"bounceOutLeft"),p>0&&zl(s.value,"zoomOutUp")},p),setTimeout(()=>{zl(n.value,"bounceOutRight"),m>0&&zl(s.value,"zoomOutUp")},m),setTimeout(()=>{r.value+1<i.questions.length?(r.value+=1,c()):h("answer-submit",l)},p+m+600)}function d(){l.push(!0),u(0,400)}function f(){l.push(!1),u(400,0)}return M1(()=>{c(),l=[]}),(p,m)=>(It(),fi("div",I_e,[Et("p",{ref_key:"indexRef",ref:o,class:"relative z-50 mb-4 text-base font-normal text-slate-500"}," Question "+Hr(r.value+1)+" ( "+Hr(r.value+1)+"/"+Hr(e.questions.length)+" ) ",513),Et("h1",{ref_key:"questionRef",ref:s,class:"relative z-50 mb-4 text-xl font-bold text-white",style:{width:"100%","margin-bottom":"2rem","text-align":"start"}},Hr(e.questions[r.value]),513),Et("div",O_e,[$t(fg,{text:"Yes",class:"answer-button",ref_key:"yesButtonRef",ref:a,onClick:d},null,512),$t(fg,{text:"No",class:"answer-button",ref_key:"noButtonRef",ref:n,onClick:f},null,512)])]))}}),L_e=al(R_e,[["__scopeId","data-v-4eb8dac6"]]),z_e=[{question:"Does the funder support topics that are highly relevant to the client's project?",yes_score:1,no_score:0},{question:"Has the funder provided support in the country or region where your project will take place?",yes_score:1,no_score:0},{question:"Does the funder accept applications from nonprofits, student teams, or early-stage initiatives?",yes_score:1,no_score:0},{question:"Is the amount of funding offered within your target budget range?",yes_score:1,no_score:0},{question:"Has the funder supported similar projects or organizations in the past 3 years?",yes_score:1,no_score:0},{question:"Is there an open funding round or opportunity available currently or in the near future?",yes_score:1,no_score:0},{question:"Does the funder clearly publish the funding process or application guidelines?",yes_score:1,no_score:0},{question:"Does the funder provide clear evaluation criteria or review mechanisms?",yes_score:1,no_score:0},{question:"Does the funder require specific evaluation of project outcomes or impact?",yes_score:1,no_score:0},{question:"Does the funder emphasize long-term impact or sustainability as a key selection criterion?",yes_score:1,no_score:0}],B_e={class:"relative w-full overflow-hidden rounded-lg bg-white"},k_e={class:"absolute flex w-full flex-col items-center justify-center gap-2 p-8 text-center font-heading text-grey",style:{height:"100%",bottom:"15%"}},F_e={class:"flex w-full flex-col items-center justify-center"},N_e={class:"relative w-full",style:{width:"60%"}},U_e={class:"relative flex h-full flex-col items-start justify-end overflow-hidden rounded-2xl border border-gray-800 bg-gray-900 px-8 py-10 shadow-xl"},V_e={class:"flex relative top-100"},j_e="https://prod.spline.design/kZDDjO5HuC9GJUM2/scene.splinecode",G_e=qi({__name:"HomeView",emits:["name-submit","score-submit"],setup(e,{emit:t}){const i=Yt([]),r=ci(()=>i.value.map(l=>l.question)),s=Yt(!0),a=t;function n(l){a("name-submit",l),s.value=!1}function o(l){let h=0;l.forEach((c,u)=>{let d=i.value[u];h+=c?d.yes_score:d.no_score}),a("score-submit",h)}return M1(()=>{i.value=z_e}),(l,h)=>(It(),fi("div",B_e,[Et("div",k_e,[Et("div",F_e,[Et("div",N_e,[h[0]||(h[0]=Et("div",{class:"absolute inset-0 size-full scale-[0.80] rounded-full bg-red-500 bg-gradient-to-r from-blue-500 to-teal-500 blur-3xl"},null,-1)),Et("div",U_e,[s.value?(It(),ss(D_e,{key:0,onNameSubmit:n})):(It(),ss(L_e,{key:1,questions:r.value,onAnswerSubmit:o},null,8,["questions"])),$t(Az)])])])]),Et("div",V_e,[$t(A_e,{scene:j_e,class:"mt-24 size-full"})])]))}}),H_e=qi({__name:"HomePage",setup(e){const t=Yt(!0),i=hh({name:"",score:-1,rank:-1}),r=hh({topRanks:[],target:{}});function s(h){i.name=h}function a(h){i.score=h,o()}function n(){let h=VU.concat([{name:i.name,score:i.score}]).sort((u,d)=>d.score-u.score),c={};return c.topRanks=h.slice(0,10).map(u=>u.name),c.target={name:i.name,score:i.score,rank:h.findIndex(u=>u.name==i.name)+1},c}function o(){let h=n();r.topRanks=h.topRanks,r.target=h.target,t.value=!1}function l(){t.value=!0}return(h,c)=>t.value?(It(),ss(G_e,{key:0,onNameSubmit:s,onScoreSubmit:a})):(It(),ss(y$,{key:1,"top-ranks":r.topRanks,target:r.target,onClickRetest:l},null,8,["top-ranks","target"]))}}),W_e=jH({history:yH("/grant-evaluation-web/"),routes:[{path:"/",name:"home",component:H_e}]});var fm=new Uint8Array(256);function q_e(e,t){let i=0,r=[],s=0,a=e.length,n=t.charCodeAt(0);for(let o=0;o<a;o++){let l=e.charCodeAt(o);if(i===0&&l===n){r.push(e.slice(s,o)),s=o+1;continue}switch(l){case 92:o+=1;break;case 39:case 34:for(;++o<a;){let h=e.charCodeAt(o);if(h===92){o+=1;continue}if(h===l)break}break;case 40:fm[i]=41,i++;break;case 91:fm[i]=93,i++;break;case 123:fm[i]=125,i++;break;case 93:case 125:case 41:i>0&&l===fm[i-1]&&i--;break}}return r.push(e.slice(s)),r}var u7=class extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return t===void 0&&(t=this.factory(e,this),this.set(e,t)),t}};function o5(e){return{kind:"word",value:e}}function X_e(e,t){return{kind:"function",value:e,nodes:t}}function Y_e(e){return{kind:"separator",value:e}}function xv(e,t,i=null){for(let r=0;r<e.length;r++){let s=e[r],a=!1,n=0,o=t(s,{parent:i,replaceWith(l){a||(a=!0,Array.isArray(l)?l.length===0?(e.splice(r,1),n=0):l.length===1?(e[r]=l[0],n=1):(e.splice(r,1,...l),n=l.length):e[r]=l)}})??0;if(a){o===0?r--:r+=n-1;continue}if(o===2||o!==1&&s.kind==="function"&&xv(s.nodes,t,s)===2)return 2}}function u4(e){let t="";for(let i of e)switch(i.kind){case"word":case"separator":{t+=i.value;break}case"function":t+=i.value+"("+u4(i.nodes)+")"}return t}var kD=92,K_e=41,FD=58,ND=44,Q_e=34,UD=61,VD=62,jD=60,GD=10,Z_e=40,J_e=39,HD=47,WD=32,qD=9;function d4(e){e=e.replaceAll(`\r
`,`
`);let t=[],i=[],r=null,s="",a;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);switch(o){case kD:{s+=e[n]+e[n+1],n++;break}case FD:case ND:case UD:case VD:case jD:case GD:case HD:case WD:case qD:{if(s.length>0){let u=o5(s);r?r.nodes.push(u):t.push(u),s=""}let l=n,h=n+1;for(;h<e.length&&(a=e.charCodeAt(h),!(a!==FD&&a!==ND&&a!==UD&&a!==VD&&a!==jD&&a!==GD&&a!==HD&&a!==WD&&a!==qD));h++);n=h-1;let c=Y_e(e.slice(l,h));r?r.nodes.push(c):t.push(c);break}case J_e:case Q_e:{let l=n;for(let h=n+1;h<e.length;h++)if(a=e.charCodeAt(h),a===kD)h+=1;else if(a===o){n=h;break}s+=e.slice(l,n+1);break}case Z_e:{let l=X_e(s,[]);s="",r?r.nodes.push(l):t.push(l),i.push(l),r=l;break}case K_e:{let l=i.pop();if(s.length>0){let h=o5(s);l?.nodes.push(h),s=""}i.length>0?r=i[i.length-1]:r=null;break}default:s+=String.fromCharCode(o)}}return s.length>0&&t.push(o5(s)),t}new u7(e=>{let t=d4(e),i=new Set;return xv(t,(r,{parent:s})=>{let a=s===null?t:s.nodes??[];if(r.kind==="word"&&(r.value==="+"||r.value==="-"||r.value==="*"||r.value==="/")){let n=a.indexOf(r)??-1;if(n===-1)return;let o=a[n-1];if(o?.kind!=="separator"||o.value!==" ")return;let l=a[n+1];if(l?.kind!=="separator"||l.value!==" ")return;i.add(o),i.add(l)}else r.kind==="separator"&&r.value.trim()==="/"?r.value="/":r.kind==="separator"&&r.value.length>0&&r.value.trim()===""?(a[0]===r||a[a.length-1]===r)&&i.add(r):r.kind==="separator"&&r.value.trim()===","&&(r.value=",")}),i.size>0&&xv(t,(r,{replaceWith:s})=>{i.has(r)&&(i.delete(r),s([]))}),db(t),u4(t)});new u7(e=>{let t=d4(e);return t.length===3&&t[0].kind==="word"&&t[0].value==="&"&&t[1].kind==="separator"&&t[1].value===":"&&t[2].kind==="function"&&t[2].value==="is"?u4(t[2].nodes):e});function db(e){for(let t of e)switch(t.kind){case"function":{if(t.value==="url"||t.value.endsWith("_url")){t.value=l3(t.value);break}if(t.value==="var"||t.value.endsWith("_var")||t.value==="theme"||t.value.endsWith("_theme")){t.value=l3(t.value);for(let i=0;i<t.nodes.length;i++)db([t.nodes[i]]);break}t.value=l3(t.value),db(t.nodes);break}case"separator":t.value=l3(t.value);break;case"word":{(t.value[0]!=="-"||t.value[1]!=="-")&&(t.value=l3(t.value));break}default:$_e(t)}}new u7(e=>{let t=d4(e);return t.length===1&&t[0].kind==="function"&&t[0].value==="var"});function $_e(e){throw new Error(`Unexpected value: ${e}`)}function l3(e){return e.replaceAll("_",String.raw`\_`).replaceAll(" ","_")}function e7e(e,t){if(t===null)return e;let i=Number(t);return Number.isNaN(i)||(t=`${i*100}%`),t==="100%"?e:`color-mix(in oklab, ${e} ${t}, transparent)`}var t7e={"--alpha":i7e,"--spacing":r7e,"--theme":s7e,theme:a7e};function i7e(e,t,i,...r){let[s,a]=q_e(i,"/").map(n=>n.trim());if(!s||!a)throw new Error(`The --alpha(…) function requires a color and an alpha value, e.g.: \`--alpha(${s||"var(--my-color)"} / ${a||"50%"})\``);if(r.length>0)throw new Error(`The --alpha(…) function only accepts one argument, e.g.: \`--alpha(${s||"var(--my-color)"} / ${a||"50%"})\``);return e7e(s,a)}function r7e(e,t,i,...r){if(!i)throw new Error("The --spacing(…) function requires an argument, but received none.");if(r.length>0)throw new Error(`The --spacing(…) function only accepts a single argument, but received ${r.length+1}.`);let s=e.theme.resolve(null,["--spacing"]);if(!s)throw new Error("The --spacing(…) function requires that the `--spacing` theme variable exists, but it was not found.");return`calc(${s} * ${i})`}function s7e(e,t,i,...r){if(!i.startsWith("--"))throw new Error("The --theme(…) function can only be used with CSS variables from your theme.");let s=!1;i.endsWith(" inline")&&(s=!0,i=i.slice(0,-7)),t.kind==="at-rule"&&(s=!0);let a=e.resolveThemeValue(i,s);if(!a){if(r.length>0)return r.join(", ");throw new Error(`Could not resolve value for theme function: \`theme(${i})\`. Consider checking if the variable name is correct or provide a fallback value to silence this error.`)}if(r.length===0)return a;let n=r.join(", ");if(n==="initial")return a;if(a==="initial")return n;if(a.startsWith("var(")||a.startsWith("theme(")||a.startsWith("--theme(")){let o=d4(a);return o7e(o,n),u4(o)}return a}function a7e(e,t,i,...r){i=n7e(i);let s=e.resolveThemeValue(i);if(!s&&r.length>0)return r.join(", ");if(!s)throw new Error(`Could not resolve value for theme function: \`theme(${i})\`. Consider checking if the path is correct or provide a fallback value to silence this error.`);return s}new RegExp(Object.keys(t7e).map(e=>`${e}\\(`).join("|"));function n7e(e){if(e[0]!=="'"&&e[0]!=='"')return e;let t="",i=e[0];for(let r=1;r<e.length-1;r++){let s=e[r],a=e[r+1];s==="\\"&&(a===i||a==="\\")?(t+=a,r++):t+=s}return t}function o7e(e,t){xv(e,i=>{if(i.kind==="function"&&!(i.value!=="var"&&i.value!=="theme"&&i.value!=="--theme"))if(i.nodes.length===1)i.nodes.push({kind:"word",value:`, ${t}`});else{let r=i.nodes[i.nodes.length-1];r.kind==="word"&&r.value==="initial"&&(r.value=t)}})}var l7e=(e=>(e[e.None=0]="None",e[e.AtProperty=1]="AtProperty",e[e.ColorMix=2]="ColorMix",e[e.All=3]="All",e))(l7e||{}),h7e=(e=>(e[e.None=0]="None",e[e.AtApply=1]="AtApply",e[e.AtImport=2]="AtImport",e[e.JsPluginCompat=4]="JsPluginCompat",e[e.ThemeFunction=8]="ThemeFunction",e[e.Utilities=16]="Utilities",e[e.Variants=32]="Variants",e))(h7e||{});const d7=uO(WH);d7.use(VG());d7.use(W_e);d7.mount("#app")});export default c7e();
